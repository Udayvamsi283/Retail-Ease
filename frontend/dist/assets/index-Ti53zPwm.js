var hk=Object.defineProperty;var dk=(t,e,n)=>e in t?hk(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var W=(t,e,n)=>dk(t,typeof e!="symbol"?e+"":e,n);function fk(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function pk(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ix={exports:{}},Oh={},kx={exports:{}},ae={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dl=Symbol.for("react.element"),mk=Symbol.for("react.portal"),gk=Symbol.for("react.fragment"),yk=Symbol.for("react.strict_mode"),_k=Symbol.for("react.profiler"),vk=Symbol.for("react.provider"),wk=Symbol.for("react.context"),xk=Symbol.for("react.forward_ref"),Ek=Symbol.for("react.suspense"),bk=Symbol.for("react.memo"),Tk=Symbol.for("react.lazy"),mv=Symbol.iterator;function Sk(t){return t===null||typeof t!="object"?null:(t=mv&&t[mv]||t["@@iterator"],typeof t=="function"?t:null)}var Px={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Cx=Object.assign,Ax={};function Po(t,e,n){this.props=t,this.context=e,this.refs=Ax,this.updater=n||Px}Po.prototype.isReactComponent={};Po.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Po.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Rx(){}Rx.prototype=Po.prototype;function qm(t,e,n){this.props=t,this.context=e,this.refs=Ax,this.updater=n||Px}var Km=qm.prototype=new Rx;Km.constructor=qm;Cx(Km,Po.prototype);Km.isPureReactComponent=!0;var gv=Array.isArray,Nx=Object.prototype.hasOwnProperty,Gm={current:null},Dx={key:!0,ref:!0,__self:!0,__source:!0};function Mx(t,e,n){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Nx.call(e,i)&&!Dx.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:Dl,type:t,key:s,ref:o,props:r,_owner:Gm.current}}function Ik(t,e){return{$$typeof:Dl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Qm(t){return typeof t=="object"&&t!==null&&t.$$typeof===Dl}function kk(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var yv=/\/+/g;function nf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?kk(""+t.key):e.toString(36)}function iu(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Dl:case mk:o=!0}}if(o)return o=t,r=r(o),t=i===""?"."+nf(o,0):i,gv(r)?(n="",t!=null&&(n=t.replace(yv,"$&/")+"/"),iu(r,e,n,"",function(c){return c})):r!=null&&(Qm(r)&&(r=Ik(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(yv,"$&/")+"/")+t)),e.push(r)),1;if(o=0,i=i===""?".":i+":",gv(t))for(var a=0;a<t.length;a++){s=t[a];var l=i+nf(s,a);o+=iu(s,e,n,l,r)}else if(l=Sk(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=i+nf(s,a++),o+=iu(s,e,n,l,r);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function yc(t,e,n){if(t==null)return t;var i=[],r=0;return iu(t,i,"","",function(s){return e.call(n,s,r++)}),i}function Pk(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ft={current:null},ru={transition:null},Ck={ReactCurrentDispatcher:Ft,ReactCurrentBatchConfig:ru,ReactCurrentOwner:Gm};function Ox(){throw Error("act(...) is not supported in production builds of React.")}ae.Children={map:yc,forEach:function(t,e,n){yc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return yc(t,function(){e++}),e},toArray:function(t){return yc(t,function(e){return e})||[]},only:function(t){if(!Qm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ae.Component=Po;ae.Fragment=gk;ae.Profiler=_k;ae.PureComponent=qm;ae.StrictMode=yk;ae.Suspense=Ek;ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ck;ae.act=Ox;ae.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=Cx({},t.props),r=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Gm.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)Nx.call(e,l)&&!Dx.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}return{$$typeof:Dl,type:t.type,key:r,ref:s,props:i,_owner:o}};ae.createContext=function(t){return t={$$typeof:wk,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:vk,_context:t},t.Consumer=t};ae.createElement=Mx;ae.createFactory=function(t){var e=Mx.bind(null,t);return e.type=t,e};ae.createRef=function(){return{current:null}};ae.forwardRef=function(t){return{$$typeof:xk,render:t}};ae.isValidElement=Qm;ae.lazy=function(t){return{$$typeof:Tk,_payload:{_status:-1,_result:t},_init:Pk}};ae.memo=function(t,e){return{$$typeof:bk,type:t,compare:e===void 0?null:e}};ae.startTransition=function(t){var e=ru.transition;ru.transition={};try{t()}finally{ru.transition=e}};ae.unstable_act=Ox;ae.useCallback=function(t,e){return Ft.current.useCallback(t,e)};ae.useContext=function(t){return Ft.current.useContext(t)};ae.useDebugValue=function(){};ae.useDeferredValue=function(t){return Ft.current.useDeferredValue(t)};ae.useEffect=function(t,e){return Ft.current.useEffect(t,e)};ae.useId=function(){return Ft.current.useId()};ae.useImperativeHandle=function(t,e,n){return Ft.current.useImperativeHandle(t,e,n)};ae.useInsertionEffect=function(t,e){return Ft.current.useInsertionEffect(t,e)};ae.useLayoutEffect=function(t,e){return Ft.current.useLayoutEffect(t,e)};ae.useMemo=function(t,e){return Ft.current.useMemo(t,e)};ae.useReducer=function(t,e,n){return Ft.current.useReducer(t,e,n)};ae.useRef=function(t){return Ft.current.useRef(t)};ae.useState=function(t){return Ft.current.useState(t)};ae.useSyncExternalStore=function(t,e,n){return Ft.current.useSyncExternalStore(t,e,n)};ae.useTransition=function(){return Ft.current.useTransition()};ae.version="18.3.1";kx.exports=ae;var O=kx.exports;const mi=pk(O),Ak=fk({__proto__:null,default:mi},[O]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rk=O,Nk=Symbol.for("react.element"),Dk=Symbol.for("react.fragment"),Mk=Object.prototype.hasOwnProperty,Ok=Rk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Lk={key:!0,ref:!0,__self:!0,__source:!0};function Lx(t,e,n){var i,r={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)Mk.call(e,i)&&!Lk.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:Nk,type:t,key:s,ref:o,props:r,_owner:Ok.current}}Oh.Fragment=Dk;Oh.jsx=Lx;Oh.jsxs=Lx;Ix.exports=Oh;var f=Ix.exports,ip={},jx={exports:{}},on={},Vx={exports:{}},Fx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(V,$){var q=V.length;V.push($);e:for(;0<q;){var re=q-1>>>1,se=V[re];if(0<r(se,$))V[re]=$,V[q]=se,q=re;else break e}}function n(V){return V.length===0?null:V[0]}function i(V){if(V.length===0)return null;var $=V[0],q=V.pop();if(q!==$){V[0]=q;e:for(var re=0,se=V.length,fe=se>>>1;re<fe;){var De=2*(re+1)-1,ye=V[De],be=De+1,cn=V[be];if(0>r(ye,q))be<se&&0>r(cn,ye)?(V[re]=cn,V[be]=q,re=be):(V[re]=ye,V[De]=q,re=De);else if(be<se&&0>r(cn,q))V[re]=cn,V[be]=q,re=be;else break e}}return $}function r(V,$){var q=V.sortIndex-$.sortIndex;return q!==0?q:V.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,d=null,p=3,g=!1,y=!1,x=!1,b=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(V){for(var $=n(c);$!==null;){if($.callback===null)i(c);else if($.startTime<=V)i(c),$.sortIndex=$.expirationTime,e(l,$);else break;$=n(c)}}function C(V){if(x=!1,T(V),!y)if(n(l)!==null)y=!0,U(N);else{var $=n(c);$!==null&&Y(C,$.startTime-V)}}function N(V,$){y=!1,x&&(x=!1,v(E),E=-1),g=!0;var q=p;try{for(T($),d=n(l);d!==null&&(!(d.expirationTime>$)||V&&!A());){var re=d.callback;if(typeof re=="function"){d.callback=null,p=d.priorityLevel;var se=re(d.expirationTime<=$);$=t.unstable_now(),typeof se=="function"?d.callback=se:d===n(l)&&i(l),T($)}else i(l);d=n(l)}if(d!==null)var fe=!0;else{var De=n(c);De!==null&&Y(C,De.startTime-$),fe=!1}return fe}finally{d=null,p=q,g=!1}}var M=!1,S=null,E=-1,P=5,k=-1;function A(){return!(t.unstable_now()-k<P)}function D(){if(S!==null){var V=t.unstable_now();k=V;var $=!0;try{$=S(!0,V)}finally{$?R():(M=!1,S=null)}}else M=!1}var R;if(typeof w=="function")R=function(){w(D)};else if(typeof MessageChannel<"u"){var le=new MessageChannel,X=le.port2;le.port1.onmessage=D,R=function(){X.postMessage(null)}}else R=function(){b(D,0)};function U(V){S=V,M||(M=!0,R())}function Y(V,$){E=b(function(){V(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(V){V.callback=null},t.unstable_continueExecution=function(){y||g||(y=!0,U(N))},t.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<V?Math.floor(1e3/V):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(V){switch(p){case 1:case 2:case 3:var $=3;break;default:$=p}var q=p;p=$;try{return V()}finally{p=q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(V,$){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var q=p;p=V;try{return $()}finally{p=q}},t.unstable_scheduleCallback=function(V,$,q){var re=t.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?re+q:re):q=re,V){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=q+se,V={id:h++,callback:$,priorityLevel:V,startTime:q,expirationTime:se,sortIndex:-1},q>re?(V.sortIndex=q,e(c,V),n(l)===null&&V===n(c)&&(x?(v(E),E=-1):x=!0,Y(C,q-re))):(V.sortIndex=se,e(l,V),y||g||(y=!0,U(N))),V},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(V){var $=p;return function(){var q=p;p=$;try{return V.apply(this,arguments)}finally{p=q}}}})(Fx);Vx.exports=Fx;var jk=Vx.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vk=O,sn=jk;function B(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ux=new Set,Ga={};function ws(t,e){co(t,e),co(t+"Capture",e)}function co(t,e){for(Ga[t]=e,t=0;t<e.length;t++)Ux.add(e[t])}var vi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),rp=Object.prototype.hasOwnProperty,Fk=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_v={},vv={};function Uk(t){return rp.call(vv,t)?!0:rp.call(_v,t)?!1:Fk.test(t)?vv[t]=!0:(_v[t]=!0,!1)}function zk(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Bk(t,e,n,i){if(e===null||typeof e>"u"||zk(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ut(t,e,n,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var mt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){mt[t]=new Ut(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];mt[e]=new Ut(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){mt[t]=new Ut(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){mt[t]=new Ut(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){mt[t]=new Ut(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){mt[t]=new Ut(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){mt[t]=new Ut(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){mt[t]=new Ut(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){mt[t]=new Ut(t,5,!1,t.toLowerCase(),null,!1,!1)});var Ym=/[\-:]([a-z])/g;function Xm(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Ym,Xm);mt[e]=new Ut(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Ym,Xm);mt[e]=new Ut(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Ym,Xm);mt[e]=new Ut(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){mt[t]=new Ut(t,1,!1,t.toLowerCase(),null,!1,!1)});mt.xlinkHref=new Ut("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){mt[t]=new Ut(t,1,!1,t.toLowerCase(),null,!0,!0)});function Jm(t,e,n,i){var r=mt.hasOwnProperty(e)?mt[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Bk(e,n,r,i)&&(n=null),i||r===null?Uk(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var Ci=Vk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_c=Symbol.for("react.element"),Fs=Symbol.for("react.portal"),Us=Symbol.for("react.fragment"),Zm=Symbol.for("react.strict_mode"),sp=Symbol.for("react.profiler"),zx=Symbol.for("react.provider"),Bx=Symbol.for("react.context"),eg=Symbol.for("react.forward_ref"),op=Symbol.for("react.suspense"),ap=Symbol.for("react.suspense_list"),tg=Symbol.for("react.memo"),Ui=Symbol.for("react.lazy"),$x=Symbol.for("react.offscreen"),wv=Symbol.iterator;function Xo(t){return t===null||typeof t!="object"?null:(t=wv&&t[wv]||t["@@iterator"],typeof t=="function"?t:null)}var ze=Object.assign,rf;function da(t){if(rf===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);rf=e&&e[1]||""}return`
`+rf+t}var sf=!1;function of(t,e){if(!t||sf)return"";sf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){i=c}t.call(e.prototype)}else{try{throw Error()}catch(c){i=c}t()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var r=c.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{sf=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?da(t):""}function $k(t){switch(t.tag){case 5:return da(t.type);case 16:return da("Lazy");case 13:return da("Suspense");case 19:return da("SuspenseList");case 0:case 2:case 15:return t=of(t.type,!1),t;case 11:return t=of(t.type.render,!1),t;case 1:return t=of(t.type,!0),t;default:return""}}function lp(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Us:return"Fragment";case Fs:return"Portal";case sp:return"Profiler";case Zm:return"StrictMode";case op:return"Suspense";case ap:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Bx:return(t.displayName||"Context")+".Consumer";case zx:return(t._context.displayName||"Context")+".Provider";case eg:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case tg:return e=t.displayName||null,e!==null?e:lp(t.type)||"Memo";case Ui:e=t._payload,t=t._init;try{return lp(t(e))}catch{}}return null}function Hk(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return lp(e);case 8:return e===Zm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function _r(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Hx(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Wk(t){var e=Hx(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function vc(t){t._valueTracker||(t._valueTracker=Wk(t))}function Wx(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=Hx(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Lu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function cp(t,e){var n=e.checked;return ze({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function xv(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=_r(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function qx(t,e){e=e.checked,e!=null&&Jm(t,"checked",e,!1)}function up(t,e){qx(t,e);var n=_r(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?hp(t,e.type,n):e.hasOwnProperty("defaultValue")&&hp(t,e.type,_r(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Ev(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function hp(t,e,n){(e!=="number"||Lu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var fa=Array.isArray;function Js(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+_r(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function dp(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(B(91));return ze({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function bv(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(B(92));if(fa(n)){if(1<n.length)throw Error(B(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:_r(n)}}function Kx(t,e){var n=_r(e.value),i=_r(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function Tv(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Gx(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fp(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Gx(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var wc,Qx=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(wc=wc||document.createElement("div"),wc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=wc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Qa(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Pa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qk=["Webkit","ms","Moz","O"];Object.keys(Pa).forEach(function(t){qk.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Pa[e]=Pa[t]})});function Yx(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Pa.hasOwnProperty(t)&&Pa[t]?(""+e).trim():e+"px"}function Xx(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=Yx(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var Kk=ze({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function pp(t,e){if(e){if(Kk[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(B(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(B(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(B(61))}if(e.style!=null&&typeof e.style!="object")throw Error(B(62))}}function mp(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gp=null;function ng(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var yp=null,Zs=null,eo=null;function Sv(t){if(t=Ll(t)){if(typeof yp!="function")throw Error(B(280));var e=t.stateNode;e&&(e=Uh(e),yp(t.stateNode,t.type,e))}}function Jx(t){Zs?eo?eo.push(t):eo=[t]:Zs=t}function Zx(){if(Zs){var t=Zs,e=eo;if(eo=Zs=null,Sv(t),e)for(t=0;t<e.length;t++)Sv(e[t])}}function eE(t,e){return t(e)}function tE(){}var af=!1;function nE(t,e,n){if(af)return t(e,n);af=!0;try{return eE(t,e,n)}finally{af=!1,(Zs!==null||eo!==null)&&(tE(),Zx())}}function Ya(t,e){var n=t.stateNode;if(n===null)return null;var i=Uh(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(B(231,e,typeof n));return n}var _p=!1;if(vi)try{var Jo={};Object.defineProperty(Jo,"passive",{get:function(){_p=!0}}),window.addEventListener("test",Jo,Jo),window.removeEventListener("test",Jo,Jo)}catch{_p=!1}function Gk(t,e,n,i,r,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var Ca=!1,ju=null,Vu=!1,vp=null,Qk={onError:function(t){Ca=!0,ju=t}};function Yk(t,e,n,i,r,s,o,a,l){Ca=!1,ju=null,Gk.apply(Qk,arguments)}function Xk(t,e,n,i,r,s,o,a,l){if(Yk.apply(this,arguments),Ca){if(Ca){var c=ju;Ca=!1,ju=null}else throw Error(B(198));Vu||(Vu=!0,vp=c)}}function xs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function iE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Iv(t){if(xs(t)!==t)throw Error(B(188))}function Jk(t){var e=t.alternate;if(!e){if(e=xs(t),e===null)throw Error(B(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return Iv(r),t;if(s===i)return Iv(r),e;s=s.sibling}throw Error(B(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o)throw Error(B(189))}}if(n.alternate!==i)throw Error(B(190))}if(n.tag!==3)throw Error(B(188));return n.stateNode.current===n?t:e}function rE(t){return t=Jk(t),t!==null?sE(t):null}function sE(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=sE(t);if(e!==null)return e;t=t.sibling}return null}var oE=sn.unstable_scheduleCallback,kv=sn.unstable_cancelCallback,Zk=sn.unstable_shouldYield,eP=sn.unstable_requestPaint,Qe=sn.unstable_now,tP=sn.unstable_getCurrentPriorityLevel,ig=sn.unstable_ImmediatePriority,aE=sn.unstable_UserBlockingPriority,Fu=sn.unstable_NormalPriority,nP=sn.unstable_LowPriority,lE=sn.unstable_IdlePriority,Lh=null,zn=null;function iP(t){if(zn&&typeof zn.onCommitFiberRoot=="function")try{zn.onCommitFiberRoot(Lh,t,void 0,(t.current.flags&128)===128)}catch{}}var kn=Math.clz32?Math.clz32:oP,rP=Math.log,sP=Math.LN2;function oP(t){return t>>>=0,t===0?32:31-(rP(t)/sP|0)|0}var xc=64,Ec=4194304;function pa(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Uu(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~r;a!==0?i=pa(a):(s&=o,s!==0&&(i=pa(s)))}else o=n&~r,o!==0?i=pa(o):s!==0&&(i=pa(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-kn(e),r=1<<n,i|=t[n],e&=~r;return i}function aP(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function lP(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-kn(s),a=1<<o,l=r[o];l===-1?(!(a&n)||a&i)&&(r[o]=aP(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function wp(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function cE(){var t=xc;return xc<<=1,!(xc&4194240)&&(xc=64),t}function lf(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ml(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-kn(e),t[e]=n}function cP(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-kn(n),s=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~s}}function rg(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-kn(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var we=0;function uE(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var hE,sg,dE,fE,pE,xp=!1,bc=[],ir=null,rr=null,sr=null,Xa=new Map,Ja=new Map,Bi=[],uP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Pv(t,e){switch(t){case"focusin":case"focusout":ir=null;break;case"dragenter":case"dragleave":rr=null;break;case"mouseover":case"mouseout":sr=null;break;case"pointerover":case"pointerout":Xa.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ja.delete(e.pointerId)}}function Zo(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=Ll(e),e!==null&&sg(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function hP(t,e,n,i,r){switch(e){case"focusin":return ir=Zo(ir,t,e,n,i,r),!0;case"dragenter":return rr=Zo(rr,t,e,n,i,r),!0;case"mouseover":return sr=Zo(sr,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return Xa.set(s,Zo(Xa.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Ja.set(s,Zo(Ja.get(s)||null,t,e,n,i,r)),!0}return!1}function mE(t){var e=qr(t.target);if(e!==null){var n=xs(e);if(n!==null){if(e=n.tag,e===13){if(e=iE(n),e!==null){t.blockedOn=e,pE(t.priority,function(){dE(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function su(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ep(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);gp=i,n.target.dispatchEvent(i),gp=null}else return e=Ll(n),e!==null&&sg(e),t.blockedOn=n,!1;e.shift()}return!0}function Cv(t,e,n){su(t)&&n.delete(e)}function dP(){xp=!1,ir!==null&&su(ir)&&(ir=null),rr!==null&&su(rr)&&(rr=null),sr!==null&&su(sr)&&(sr=null),Xa.forEach(Cv),Ja.forEach(Cv)}function ea(t,e){t.blockedOn===e&&(t.blockedOn=null,xp||(xp=!0,sn.unstable_scheduleCallback(sn.unstable_NormalPriority,dP)))}function Za(t){function e(r){return ea(r,t)}if(0<bc.length){ea(bc[0],t);for(var n=1;n<bc.length;n++){var i=bc[n];i.blockedOn===t&&(i.blockedOn=null)}}for(ir!==null&&ea(ir,t),rr!==null&&ea(rr,t),sr!==null&&ea(sr,t),Xa.forEach(e),Ja.forEach(e),n=0;n<Bi.length;n++)i=Bi[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Bi.length&&(n=Bi[0],n.blockedOn===null);)mE(n),n.blockedOn===null&&Bi.shift()}var to=Ci.ReactCurrentBatchConfig,zu=!0;function fP(t,e,n,i){var r=we,s=to.transition;to.transition=null;try{we=1,og(t,e,n,i)}finally{we=r,to.transition=s}}function pP(t,e,n,i){var r=we,s=to.transition;to.transition=null;try{we=4,og(t,e,n,i)}finally{we=r,to.transition=s}}function og(t,e,n,i){if(zu){var r=Ep(t,e,n,i);if(r===null)_f(t,e,i,Bu,n),Pv(t,i);else if(hP(r,t,e,n,i))i.stopPropagation();else if(Pv(t,i),e&4&&-1<uP.indexOf(t)){for(;r!==null;){var s=Ll(r);if(s!==null&&hE(s),s=Ep(t,e,n,i),s===null&&_f(t,e,i,Bu,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else _f(t,e,i,null,n)}}var Bu=null;function Ep(t,e,n,i){if(Bu=null,t=ng(i),t=qr(t),t!==null)if(e=xs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=iE(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Bu=t,null}function gE(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(tP()){case ig:return 1;case aE:return 4;case Fu:case nP:return 16;case lE:return 536870912;default:return 16}default:return 16}}var Qi=null,ag=null,ou=null;function yE(){if(ou)return ou;var t,e=ag,n=e.length,i,r="value"in Qi?Qi.value:Qi.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(i=1;i<=o&&e[n-i]===r[s-i];i++);return ou=r.slice(t,1<i?1-i:void 0)}function au(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Tc(){return!0}function Av(){return!1}function an(t){function e(n,i,r,s,o){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Tc:Av,this.isPropagationStopped=Av,this}return ze(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Tc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Tc)},persist:function(){},isPersistent:Tc}),e}var Co={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lg=an(Co),Ol=ze({},Co,{view:0,detail:0}),mP=an(Ol),cf,uf,ta,jh=ze({},Ol,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cg,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ta&&(ta&&t.type==="mousemove"?(cf=t.screenX-ta.screenX,uf=t.screenY-ta.screenY):uf=cf=0,ta=t),cf)},movementY:function(t){return"movementY"in t?t.movementY:uf}}),Rv=an(jh),gP=ze({},jh,{dataTransfer:0}),yP=an(gP),_P=ze({},Ol,{relatedTarget:0}),hf=an(_P),vP=ze({},Co,{animationName:0,elapsedTime:0,pseudoElement:0}),wP=an(vP),xP=ze({},Co,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),EP=an(xP),bP=ze({},Co,{data:0}),Nv=an(bP),TP={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},SP={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},IP={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kP(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=IP[t])?!!e[t]:!1}function cg(){return kP}var PP=ze({},Ol,{key:function(t){if(t.key){var e=TP[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=au(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?SP[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cg,charCode:function(t){return t.type==="keypress"?au(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?au(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),CP=an(PP),AP=ze({},jh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Dv=an(AP),RP=ze({},Ol,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cg}),NP=an(RP),DP=ze({},Co,{propertyName:0,elapsedTime:0,pseudoElement:0}),MP=an(DP),OP=ze({},jh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),LP=an(OP),jP=[9,13,27,32],ug=vi&&"CompositionEvent"in window,Aa=null;vi&&"documentMode"in document&&(Aa=document.documentMode);var VP=vi&&"TextEvent"in window&&!Aa,_E=vi&&(!ug||Aa&&8<Aa&&11>=Aa),Mv=" ",Ov=!1;function vE(t,e){switch(t){case"keyup":return jP.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wE(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var zs=!1;function FP(t,e){switch(t){case"compositionend":return wE(e);case"keypress":return e.which!==32?null:(Ov=!0,Mv);case"textInput":return t=e.data,t===Mv&&Ov?null:t;default:return null}}function UP(t,e){if(zs)return t==="compositionend"||!ug&&vE(t,e)?(t=yE(),ou=ag=Qi=null,zs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return _E&&e.locale!=="ko"?null:e.data;default:return null}}var zP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Lv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!zP[t.type]:e==="textarea"}function xE(t,e,n,i){Jx(i),e=$u(e,"onChange"),0<e.length&&(n=new lg("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Ra=null,el=null;function BP(t){NE(t,0)}function Vh(t){var e=Hs(t);if(Wx(e))return t}function $P(t,e){if(t==="change")return e}var EE=!1;if(vi){var df;if(vi){var ff="oninput"in document;if(!ff){var jv=document.createElement("div");jv.setAttribute("oninput","return;"),ff=typeof jv.oninput=="function"}df=ff}else df=!1;EE=df&&(!document.documentMode||9<document.documentMode)}function Vv(){Ra&&(Ra.detachEvent("onpropertychange",bE),el=Ra=null)}function bE(t){if(t.propertyName==="value"&&Vh(el)){var e=[];xE(e,el,t,ng(t)),nE(BP,e)}}function HP(t,e,n){t==="focusin"?(Vv(),Ra=e,el=n,Ra.attachEvent("onpropertychange",bE)):t==="focusout"&&Vv()}function WP(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Vh(el)}function qP(t,e){if(t==="click")return Vh(e)}function KP(t,e){if(t==="input"||t==="change")return Vh(e)}function GP(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var An=typeof Object.is=="function"?Object.is:GP;function tl(t,e){if(An(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!rp.call(e,r)||!An(t[r],e[r]))return!1}return!0}function Fv(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Uv(t,e){var n=Fv(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Fv(n)}}function TE(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?TE(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function SE(){for(var t=window,e=Lu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Lu(t.document)}return e}function hg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function QP(t){var e=SE(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&TE(n.ownerDocument.documentElement,n)){if(i!==null&&hg(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!t.extend&&s>i&&(r=i,i=s,s=r),r=Uv(n,s);var o=Uv(n,i);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var YP=vi&&"documentMode"in document&&11>=document.documentMode,Bs=null,bp=null,Na=null,Tp=!1;function zv(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Tp||Bs==null||Bs!==Lu(i)||(i=Bs,"selectionStart"in i&&hg(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Na&&tl(Na,i)||(Na=i,i=$u(bp,"onSelect"),0<i.length&&(e=new lg("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=Bs)))}function Sc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var $s={animationend:Sc("Animation","AnimationEnd"),animationiteration:Sc("Animation","AnimationIteration"),animationstart:Sc("Animation","AnimationStart"),transitionend:Sc("Transition","TransitionEnd")},pf={},IE={};vi&&(IE=document.createElement("div").style,"AnimationEvent"in window||(delete $s.animationend.animation,delete $s.animationiteration.animation,delete $s.animationstart.animation),"TransitionEvent"in window||delete $s.transitionend.transition);function Fh(t){if(pf[t])return pf[t];if(!$s[t])return t;var e=$s[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in IE)return pf[t]=e[n];return t}var kE=Fh("animationend"),PE=Fh("animationiteration"),CE=Fh("animationstart"),AE=Fh("transitionend"),RE=new Map,Bv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ir(t,e){RE.set(t,e),ws(e,[t])}for(var mf=0;mf<Bv.length;mf++){var gf=Bv[mf],XP=gf.toLowerCase(),JP=gf[0].toUpperCase()+gf.slice(1);Ir(XP,"on"+JP)}Ir(kE,"onAnimationEnd");Ir(PE,"onAnimationIteration");Ir(CE,"onAnimationStart");Ir("dblclick","onDoubleClick");Ir("focusin","onFocus");Ir("focusout","onBlur");Ir(AE,"onTransitionEnd");co("onMouseEnter",["mouseout","mouseover"]);co("onMouseLeave",["mouseout","mouseover"]);co("onPointerEnter",["pointerout","pointerover"]);co("onPointerLeave",["pointerout","pointerover"]);ws("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ws("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ws("onBeforeInput",["compositionend","keypress","textInput","paste"]);ws("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ws("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ws("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ma="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ZP=new Set("cancel close invalid load scroll toggle".split(" ").concat(ma));function $v(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,Xk(i,e,void 0,t),t.currentTarget=null}function NE(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;$v(r,a,c),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;$v(r,a,c),s=l}}}if(Vu)throw t=vp,Vu=!1,vp=null,t}function Pe(t,e){var n=e[Cp];n===void 0&&(n=e[Cp]=new Set);var i=t+"__bubble";n.has(i)||(DE(e,t,2,!1),n.add(i))}function yf(t,e,n){var i=0;e&&(i|=4),DE(n,t,i,e)}var Ic="_reactListening"+Math.random().toString(36).slice(2);function nl(t){if(!t[Ic]){t[Ic]=!0,Ux.forEach(function(n){n!=="selectionchange"&&(ZP.has(n)||yf(n,!1,t),yf(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ic]||(e[Ic]=!0,yf("selectionchange",!1,e))}}function DE(t,e,n,i){switch(gE(e)){case 1:var r=fP;break;case 4:r=pP;break;default:r=og}n=r.bind(null,e,n,t),r=void 0,!_p||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function _f(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=qr(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}nE(function(){var c=s,h=ng(n),d=[];e:{var p=RE.get(t);if(p!==void 0){var g=lg,y=t;switch(t){case"keypress":if(au(n)===0)break e;case"keydown":case"keyup":g=CP;break;case"focusin":y="focus",g=hf;break;case"focusout":y="blur",g=hf;break;case"beforeblur":case"afterblur":g=hf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Rv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=yP;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=NP;break;case kE:case PE:case CE:g=wP;break;case AE:g=MP;break;case"scroll":g=mP;break;case"wheel":g=LP;break;case"copy":case"cut":case"paste":g=EP;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Dv}var x=(e&4)!==0,b=!x&&t==="scroll",v=x?p!==null?p+"Capture":null:p;x=[];for(var w=c,T;w!==null;){T=w;var C=T.stateNode;if(T.tag===5&&C!==null&&(T=C,v!==null&&(C=Ya(w,v),C!=null&&x.push(il(w,C,T)))),b)break;w=w.return}0<x.length&&(p=new g(p,y,null,n,h),d.push({event:p,listeners:x}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",p&&n!==gp&&(y=n.relatedTarget||n.fromElement)&&(qr(y)||y[wi]))break e;if((g||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,g?(y=n.relatedTarget||n.toElement,g=c,y=y?qr(y):null,y!==null&&(b=xs(y),y!==b||y.tag!==5&&y.tag!==6)&&(y=null)):(g=null,y=c),g!==y)){if(x=Rv,C="onMouseLeave",v="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(x=Dv,C="onPointerLeave",v="onPointerEnter",w="pointer"),b=g==null?p:Hs(g),T=y==null?p:Hs(y),p=new x(C,w+"leave",g,n,h),p.target=b,p.relatedTarget=T,C=null,qr(h)===c&&(x=new x(v,w+"enter",y,n,h),x.target=T,x.relatedTarget=b,C=x),b=C,g&&y)t:{for(x=g,v=y,w=0,T=x;T;T=Ns(T))w++;for(T=0,C=v;C;C=Ns(C))T++;for(;0<w-T;)x=Ns(x),w--;for(;0<T-w;)v=Ns(v),T--;for(;w--;){if(x===v||v!==null&&x===v.alternate)break t;x=Ns(x),v=Ns(v)}x=null}else x=null;g!==null&&Hv(d,p,g,x,!1),y!==null&&b!==null&&Hv(d,b,y,x,!0)}}e:{if(p=c?Hs(c):window,g=p.nodeName&&p.nodeName.toLowerCase(),g==="select"||g==="input"&&p.type==="file")var N=$P;else if(Lv(p))if(EE)N=KP;else{N=WP;var M=HP}else(g=p.nodeName)&&g.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(N=qP);if(N&&(N=N(t,c))){xE(d,N,n,h);break e}M&&M(t,p,c),t==="focusout"&&(M=p._wrapperState)&&M.controlled&&p.type==="number"&&hp(p,"number",p.value)}switch(M=c?Hs(c):window,t){case"focusin":(Lv(M)||M.contentEditable==="true")&&(Bs=M,bp=c,Na=null);break;case"focusout":Na=bp=Bs=null;break;case"mousedown":Tp=!0;break;case"contextmenu":case"mouseup":case"dragend":Tp=!1,zv(d,n,h);break;case"selectionchange":if(YP)break;case"keydown":case"keyup":zv(d,n,h)}var S;if(ug)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else zs?vE(t,n)&&(E="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(_E&&n.locale!=="ko"&&(zs||E!=="onCompositionStart"?E==="onCompositionEnd"&&zs&&(S=yE()):(Qi=h,ag="value"in Qi?Qi.value:Qi.textContent,zs=!0)),M=$u(c,E),0<M.length&&(E=new Nv(E,t,null,n,h),d.push({event:E,listeners:M}),S?E.data=S:(S=wE(n),S!==null&&(E.data=S)))),(S=VP?FP(t,n):UP(t,n))&&(c=$u(c,"onBeforeInput"),0<c.length&&(h=new Nv("onBeforeInput","beforeinput",null,n,h),d.push({event:h,listeners:c}),h.data=S))}NE(d,e)})}function il(t,e,n){return{instance:t,listener:e,currentTarget:n}}function $u(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=Ya(t,n),s!=null&&i.unshift(il(t,s,r)),s=Ya(t,e),s!=null&&i.push(il(t,s,r))),t=t.return}return i}function Ns(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Hv(t,e,n,i,r){for(var s=e._reactName,o=[];n!==null&&n!==i;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&c!==null&&(a=c,r?(l=Ya(n,s),l!=null&&o.unshift(il(n,l,a))):r||(l=Ya(n,s),l!=null&&o.push(il(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var eC=/\r\n?/g,tC=/\u0000|\uFFFD/g;function Wv(t){return(typeof t=="string"?t:""+t).replace(eC,`
`).replace(tC,"")}function kc(t,e,n){if(e=Wv(e),Wv(t)!==e&&n)throw Error(B(425))}function Hu(){}var Sp=null,Ip=null;function kp(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Pp=typeof setTimeout=="function"?setTimeout:void 0,nC=typeof clearTimeout=="function"?clearTimeout:void 0,qv=typeof Promise=="function"?Promise:void 0,iC=typeof queueMicrotask=="function"?queueMicrotask:typeof qv<"u"?function(t){return qv.resolve(null).then(t).catch(rC)}:Pp;function rC(t){setTimeout(function(){throw t})}function vf(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),Za(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);Za(e)}function or(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Kv(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ao=Math.random().toString(36).slice(2),Vn="__reactFiber$"+Ao,rl="__reactProps$"+Ao,wi="__reactContainer$"+Ao,Cp="__reactEvents$"+Ao,sC="__reactListeners$"+Ao,oC="__reactHandles$"+Ao;function qr(t){var e=t[Vn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[wi]||n[Vn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Kv(t);t!==null;){if(n=t[Vn])return n;t=Kv(t)}return e}t=n,n=t.parentNode}return null}function Ll(t){return t=t[Vn]||t[wi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Hs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(B(33))}function Uh(t){return t[rl]||null}var Ap=[],Ws=-1;function kr(t){return{current:t}}function Ae(t){0>Ws||(t.current=Ap[Ws],Ap[Ws]=null,Ws--)}function Ie(t,e){Ws++,Ap[Ws]=t.current,t.current=e}var vr={},At=kr(vr),Kt=kr(!1),rs=vr;function uo(t,e){var n=t.type.contextTypes;if(!n)return vr;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in n)r[s]=e[s];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function Gt(t){return t=t.childContextTypes,t!=null}function Wu(){Ae(Kt),Ae(At)}function Gv(t,e,n){if(At.current!==vr)throw Error(B(168));Ie(At,e),Ie(Kt,n)}function ME(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(B(108,Hk(t)||"Unknown",r));return ze({},n,i)}function qu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||vr,rs=At.current,Ie(At,t),Ie(Kt,Kt.current),!0}function Qv(t,e,n){var i=t.stateNode;if(!i)throw Error(B(169));n?(t=ME(t,e,rs),i.__reactInternalMemoizedMergedChildContext=t,Ae(Kt),Ae(At),Ie(At,t)):Ae(Kt),Ie(Kt,n)}var ri=null,zh=!1,wf=!1;function OE(t){ri===null?ri=[t]:ri.push(t)}function aC(t){zh=!0,OE(t)}function Pr(){if(!wf&&ri!==null){wf=!0;var t=0,e=we;try{var n=ri;for(we=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}ri=null,zh=!1}catch(r){throw ri!==null&&(ri=ri.slice(t+1)),oE(ig,Pr),r}finally{we=e,wf=!1}}return null}var qs=[],Ks=0,Ku=null,Gu=0,dn=[],fn=0,ss=null,ai=1,li="";function zr(t,e){qs[Ks++]=Gu,qs[Ks++]=Ku,Ku=t,Gu=e}function LE(t,e,n){dn[fn++]=ai,dn[fn++]=li,dn[fn++]=ss,ss=t;var i=ai;t=li;var r=32-kn(i)-1;i&=~(1<<r),n+=1;var s=32-kn(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,ai=1<<32-kn(e)+r|n<<r|i,li=s+t}else ai=1<<s|n<<r|i,li=t}function dg(t){t.return!==null&&(zr(t,1),LE(t,1,0))}function fg(t){for(;t===Ku;)Ku=qs[--Ks],qs[Ks]=null,Gu=qs[--Ks],qs[Ks]=null;for(;t===ss;)ss=dn[--fn],dn[fn]=null,li=dn[--fn],dn[fn]=null,ai=dn[--fn],dn[fn]=null}var rn=null,tn=null,Me=!1,Tn=null;function jE(t,e){var n=pn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Yv(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,rn=t,tn=or(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,rn=t,tn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ss!==null?{id:ai,overflow:li}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=pn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,rn=t,tn=null,!0):!1;default:return!1}}function Rp(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Np(t){if(Me){var e=tn;if(e){var n=e;if(!Yv(t,e)){if(Rp(t))throw Error(B(418));e=or(n.nextSibling);var i=rn;e&&Yv(t,e)?jE(i,n):(t.flags=t.flags&-4097|2,Me=!1,rn=t)}}else{if(Rp(t))throw Error(B(418));t.flags=t.flags&-4097|2,Me=!1,rn=t}}}function Xv(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;rn=t}function Pc(t){if(t!==rn)return!1;if(!Me)return Xv(t),Me=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!kp(t.type,t.memoizedProps)),e&&(e=tn)){if(Rp(t))throw VE(),Error(B(418));for(;e;)jE(t,e),e=or(e.nextSibling)}if(Xv(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(B(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){tn=or(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}tn=null}}else tn=rn?or(t.stateNode.nextSibling):null;return!0}function VE(){for(var t=tn;t;)t=or(t.nextSibling)}function ho(){tn=rn=null,Me=!1}function pg(t){Tn===null?Tn=[t]:Tn.push(t)}var lC=Ci.ReactCurrentBatchConfig;function na(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(B(309));var i=n.stateNode}if(!i)throw Error(B(147,t));var r=i,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(B(284));if(!n._owner)throw Error(B(290,t))}return t}function Cc(t,e){throw t=Object.prototype.toString.call(e),Error(B(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Jv(t){var e=t._init;return e(t._payload)}function FE(t){function e(v,w){if(t){var T=v.deletions;T===null?(v.deletions=[w],v.flags|=16):T.push(w)}}function n(v,w){if(!t)return null;for(;w!==null;)e(v,w),w=w.sibling;return null}function i(v,w){for(v=new Map;w!==null;)w.key!==null?v.set(w.key,w):v.set(w.index,w),w=w.sibling;return v}function r(v,w){return v=ur(v,w),v.index=0,v.sibling=null,v}function s(v,w,T){return v.index=T,t?(T=v.alternate,T!==null?(T=T.index,T<w?(v.flags|=2,w):T):(v.flags|=2,w)):(v.flags|=1048576,w)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,w,T,C){return w===null||w.tag!==6?(w=kf(T,v.mode,C),w.return=v,w):(w=r(w,T),w.return=v,w)}function l(v,w,T,C){var N=T.type;return N===Us?h(v,w,T.props.children,C,T.key):w!==null&&(w.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Ui&&Jv(N)===w.type)?(C=r(w,T.props),C.ref=na(v,w,T),C.return=v,C):(C=pu(T.type,T.key,T.props,null,v.mode,C),C.ref=na(v,w,T),C.return=v,C)}function c(v,w,T,C){return w===null||w.tag!==4||w.stateNode.containerInfo!==T.containerInfo||w.stateNode.implementation!==T.implementation?(w=Pf(T,v.mode,C),w.return=v,w):(w=r(w,T.children||[]),w.return=v,w)}function h(v,w,T,C,N){return w===null||w.tag!==7?(w=Zr(T,v.mode,C,N),w.return=v,w):(w=r(w,T),w.return=v,w)}function d(v,w,T){if(typeof w=="string"&&w!==""||typeof w=="number")return w=kf(""+w,v.mode,T),w.return=v,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case _c:return T=pu(w.type,w.key,w.props,null,v.mode,T),T.ref=na(v,null,w),T.return=v,T;case Fs:return w=Pf(w,v.mode,T),w.return=v,w;case Ui:var C=w._init;return d(v,C(w._payload),T)}if(fa(w)||Xo(w))return w=Zr(w,v.mode,T,null),w.return=v,w;Cc(v,w)}return null}function p(v,w,T,C){var N=w!==null?w.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return N!==null?null:a(v,w,""+T,C);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case _c:return T.key===N?l(v,w,T,C):null;case Fs:return T.key===N?c(v,w,T,C):null;case Ui:return N=T._init,p(v,w,N(T._payload),C)}if(fa(T)||Xo(T))return N!==null?null:h(v,w,T,C,null);Cc(v,T)}return null}function g(v,w,T,C,N){if(typeof C=="string"&&C!==""||typeof C=="number")return v=v.get(T)||null,a(w,v,""+C,N);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case _c:return v=v.get(C.key===null?T:C.key)||null,l(w,v,C,N);case Fs:return v=v.get(C.key===null?T:C.key)||null,c(w,v,C,N);case Ui:var M=C._init;return g(v,w,T,M(C._payload),N)}if(fa(C)||Xo(C))return v=v.get(T)||null,h(w,v,C,N,null);Cc(w,C)}return null}function y(v,w,T,C){for(var N=null,M=null,S=w,E=w=0,P=null;S!==null&&E<T.length;E++){S.index>E?(P=S,S=null):P=S.sibling;var k=p(v,S,T[E],C);if(k===null){S===null&&(S=P);break}t&&S&&k.alternate===null&&e(v,S),w=s(k,w,E),M===null?N=k:M.sibling=k,M=k,S=P}if(E===T.length)return n(v,S),Me&&zr(v,E),N;if(S===null){for(;E<T.length;E++)S=d(v,T[E],C),S!==null&&(w=s(S,w,E),M===null?N=S:M.sibling=S,M=S);return Me&&zr(v,E),N}for(S=i(v,S);E<T.length;E++)P=g(S,v,E,T[E],C),P!==null&&(t&&P.alternate!==null&&S.delete(P.key===null?E:P.key),w=s(P,w,E),M===null?N=P:M.sibling=P,M=P);return t&&S.forEach(function(A){return e(v,A)}),Me&&zr(v,E),N}function x(v,w,T,C){var N=Xo(T);if(typeof N!="function")throw Error(B(150));if(T=N.call(T),T==null)throw Error(B(151));for(var M=N=null,S=w,E=w=0,P=null,k=T.next();S!==null&&!k.done;E++,k=T.next()){S.index>E?(P=S,S=null):P=S.sibling;var A=p(v,S,k.value,C);if(A===null){S===null&&(S=P);break}t&&S&&A.alternate===null&&e(v,S),w=s(A,w,E),M===null?N=A:M.sibling=A,M=A,S=P}if(k.done)return n(v,S),Me&&zr(v,E),N;if(S===null){for(;!k.done;E++,k=T.next())k=d(v,k.value,C),k!==null&&(w=s(k,w,E),M===null?N=k:M.sibling=k,M=k);return Me&&zr(v,E),N}for(S=i(v,S);!k.done;E++,k=T.next())k=g(S,v,E,k.value,C),k!==null&&(t&&k.alternate!==null&&S.delete(k.key===null?E:k.key),w=s(k,w,E),M===null?N=k:M.sibling=k,M=k);return t&&S.forEach(function(D){return e(v,D)}),Me&&zr(v,E),N}function b(v,w,T,C){if(typeof T=="object"&&T!==null&&T.type===Us&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case _c:e:{for(var N=T.key,M=w;M!==null;){if(M.key===N){if(N=T.type,N===Us){if(M.tag===7){n(v,M.sibling),w=r(M,T.props.children),w.return=v,v=w;break e}}else if(M.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Ui&&Jv(N)===M.type){n(v,M.sibling),w=r(M,T.props),w.ref=na(v,M,T),w.return=v,v=w;break e}n(v,M);break}else e(v,M);M=M.sibling}T.type===Us?(w=Zr(T.props.children,v.mode,C,T.key),w.return=v,v=w):(C=pu(T.type,T.key,T.props,null,v.mode,C),C.ref=na(v,w,T),C.return=v,v=C)}return o(v);case Fs:e:{for(M=T.key;w!==null;){if(w.key===M)if(w.tag===4&&w.stateNode.containerInfo===T.containerInfo&&w.stateNode.implementation===T.implementation){n(v,w.sibling),w=r(w,T.children||[]),w.return=v,v=w;break e}else{n(v,w);break}else e(v,w);w=w.sibling}w=Pf(T,v.mode,C),w.return=v,v=w}return o(v);case Ui:return M=T._init,b(v,w,M(T._payload),C)}if(fa(T))return y(v,w,T,C);if(Xo(T))return x(v,w,T,C);Cc(v,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,w!==null&&w.tag===6?(n(v,w.sibling),w=r(w,T),w.return=v,v=w):(n(v,w),w=kf(T,v.mode,C),w.return=v,v=w),o(v)):n(v,w)}return b}var fo=FE(!0),UE=FE(!1),Qu=kr(null),Yu=null,Gs=null,mg=null;function gg(){mg=Gs=Yu=null}function yg(t){var e=Qu.current;Ae(Qu),t._currentValue=e}function Dp(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function no(t,e){Yu=t,mg=Gs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(qt=!0),t.firstContext=null)}function _n(t){var e=t._currentValue;if(mg!==t)if(t={context:t,memoizedValue:e,next:null},Gs===null){if(Yu===null)throw Error(B(308));Gs=t,Yu.dependencies={lanes:0,firstContext:t}}else Gs=Gs.next=t;return e}var Kr=null;function _g(t){Kr===null?Kr=[t]:Kr.push(t)}function zE(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,_g(e)):(n.next=r.next,r.next=n),e.interleaved=n,xi(t,i)}function xi(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var zi=!1;function vg(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function BE(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function gi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ar(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,pe&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,xi(t,n)}return r=i.interleaved,r===null?(e.next=e,_g(i)):(e.next=r.next,r.next=e),i.interleaved=e,xi(t,n)}function lu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,rg(t,n)}}function Zv(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?r=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Xu(t,e,n,i){var r=t.updateQueue;zi=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(s!==null){var d=r.baseState;o=0,h=c=l=null,a=s;do{var p=a.lane,g=a.eventTime;if((i&p)===p){h!==null&&(h=h.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=t,x=a;switch(p=e,g=n,x.tag){case 1:if(y=x.payload,typeof y=="function"){d=y.call(g,d,p);break e}d=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=x.payload,p=typeof y=="function"?y.call(g,d,p):y,p==null)break e;d=ze({},d,p);break e;case 2:zi=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=r.effects,p===null?r.effects=[a]:p.push(a))}else g={eventTime:g,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=g,l=d):h=h.next=g,o|=p;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;p=a,a=p.next,p.next=null,r.lastBaseUpdate=p,r.shared.pending=null}}while(!0);if(h===null&&(l=d),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=h,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);as|=o,t.lanes=o,t.memoizedState=d}}function e0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(B(191,r));r.call(i)}}}var jl={},Bn=kr(jl),sl=kr(jl),ol=kr(jl);function Gr(t){if(t===jl)throw Error(B(174));return t}function wg(t,e){switch(Ie(ol,e),Ie(sl,t),Ie(Bn,jl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:fp(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=fp(e,t)}Ae(Bn),Ie(Bn,e)}function po(){Ae(Bn),Ae(sl),Ae(ol)}function $E(t){Gr(ol.current);var e=Gr(Bn.current),n=fp(e,t.type);e!==n&&(Ie(sl,t),Ie(Bn,n))}function xg(t){sl.current===t&&(Ae(Bn),Ae(sl))}var Ve=kr(0);function Ju(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var xf=[];function Eg(){for(var t=0;t<xf.length;t++)xf[t]._workInProgressVersionPrimary=null;xf.length=0}var cu=Ci.ReactCurrentDispatcher,Ef=Ci.ReactCurrentBatchConfig,os=0,Fe=null,tt=null,ot=null,Zu=!1,Da=!1,al=0,cC=0;function xt(){throw Error(B(321))}function bg(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!An(t[n],e[n]))return!1;return!0}function Tg(t,e,n,i,r,s){if(os=s,Fe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,cu.current=t===null||t.memoizedState===null?fC:pC,t=n(i,r),Da){s=0;do{if(Da=!1,al=0,25<=s)throw Error(B(301));s+=1,ot=tt=null,e.updateQueue=null,cu.current=mC,t=n(i,r)}while(Da)}if(cu.current=eh,e=tt!==null&&tt.next!==null,os=0,ot=tt=Fe=null,Zu=!1,e)throw Error(B(300));return t}function Sg(){var t=al!==0;return al=0,t}function Ln(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ot===null?Fe.memoizedState=ot=t:ot=ot.next=t,ot}function vn(){if(tt===null){var t=Fe.alternate;t=t!==null?t.memoizedState:null}else t=tt.next;var e=ot===null?Fe.memoizedState:ot.next;if(e!==null)ot=e,tt=t;else{if(t===null)throw Error(B(310));tt=t,t={memoizedState:tt.memoizedState,baseState:tt.baseState,baseQueue:tt.baseQueue,queue:tt.queue,next:null},ot===null?Fe.memoizedState=ot=t:ot=ot.next=t}return ot}function ll(t,e){return typeof e=="function"?e(t):e}function bf(t){var e=vn(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var i=tt,r=i.baseQueue,s=n.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,n.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,c=s;do{var h=c.lane;if((os&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:t(i,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=i):l=l.next=d,Fe.lanes|=h,as|=h}c=c.next}while(c!==null&&c!==s);l===null?o=i:l.next=a,An(i,e.memoizedState)||(qt=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do s=r.lane,Fe.lanes|=s,as|=s,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Tf(t){var e=vn(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do s=t(s,o.action),o=o.next;while(o!==r);An(s,e.memoizedState)||(qt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function HE(){}function WE(t,e){var n=Fe,i=vn(),r=e(),s=!An(i.memoizedState,r);if(s&&(i.memoizedState=r,qt=!0),i=i.queue,Ig(GE.bind(null,n,i,t),[t]),i.getSnapshot!==e||s||ot!==null&&ot.memoizedState.tag&1){if(n.flags|=2048,cl(9,KE.bind(null,n,i,r,e),void 0,null),lt===null)throw Error(B(349));os&30||qE(n,e,r)}return r}function qE(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Fe.updateQueue,e===null?(e={lastEffect:null,stores:null},Fe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function KE(t,e,n,i){e.value=n,e.getSnapshot=i,QE(e)&&YE(t)}function GE(t,e,n){return n(function(){QE(e)&&YE(t)})}function QE(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!An(t,n)}catch{return!0}}function YE(t){var e=xi(t,1);e!==null&&Pn(e,t,1,-1)}function t0(t){var e=Ln();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ll,lastRenderedState:t},e.queue=t,t=t.dispatch=dC.bind(null,Fe,t),[e.memoizedState,t]}function cl(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=Fe.updateQueue,e===null?(e={lastEffect:null,stores:null},Fe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function XE(){return vn().memoizedState}function uu(t,e,n,i){var r=Ln();Fe.flags|=t,r.memoizedState=cl(1|e,n,void 0,i===void 0?null:i)}function Bh(t,e,n,i){var r=vn();i=i===void 0?null:i;var s=void 0;if(tt!==null){var o=tt.memoizedState;if(s=o.destroy,i!==null&&bg(i,o.deps)){r.memoizedState=cl(e,n,s,i);return}}Fe.flags|=t,r.memoizedState=cl(1|e,n,s,i)}function n0(t,e){return uu(8390656,8,t,e)}function Ig(t,e){return Bh(2048,8,t,e)}function JE(t,e){return Bh(4,2,t,e)}function ZE(t,e){return Bh(4,4,t,e)}function eb(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function tb(t,e,n){return n=n!=null?n.concat([t]):null,Bh(4,4,eb.bind(null,e,t),n)}function kg(){}function nb(t,e){var n=vn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&bg(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function ib(t,e){var n=vn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&bg(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function rb(t,e,n){return os&21?(An(n,e)||(n=cE(),Fe.lanes|=n,as|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,qt=!0),t.memoizedState=n)}function uC(t,e){var n=we;we=n!==0&&4>n?n:4,t(!0);var i=Ef.transition;Ef.transition={};try{t(!1),e()}finally{we=n,Ef.transition=i}}function sb(){return vn().memoizedState}function hC(t,e,n){var i=cr(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},ob(t))ab(e,n);else if(n=zE(t,e,n,i),n!==null){var r=Vt();Pn(n,t,i,r),lb(n,e,i)}}function dC(t,e,n){var i=cr(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(ob(t))ab(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,An(a,o)){var l=e.interleaved;l===null?(r.next=r,_g(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}n=zE(t,e,r,i),n!==null&&(r=Vt(),Pn(n,t,i,r),lb(n,e,i))}}function ob(t){var e=t.alternate;return t===Fe||e!==null&&e===Fe}function ab(t,e){Da=Zu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function lb(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,rg(t,n)}}var eh={readContext:_n,useCallback:xt,useContext:xt,useEffect:xt,useImperativeHandle:xt,useInsertionEffect:xt,useLayoutEffect:xt,useMemo:xt,useReducer:xt,useRef:xt,useState:xt,useDebugValue:xt,useDeferredValue:xt,useTransition:xt,useMutableSource:xt,useSyncExternalStore:xt,useId:xt,unstable_isNewReconciler:!1},fC={readContext:_n,useCallback:function(t,e){return Ln().memoizedState=[t,e===void 0?null:e],t},useContext:_n,useEffect:n0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,uu(4194308,4,eb.bind(null,e,t),n)},useLayoutEffect:function(t,e){return uu(4194308,4,t,e)},useInsertionEffect:function(t,e){return uu(4,2,t,e)},useMemo:function(t,e){var n=Ln();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Ln();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=hC.bind(null,Fe,t),[i.memoizedState,t]},useRef:function(t){var e=Ln();return t={current:t},e.memoizedState=t},useState:t0,useDebugValue:kg,useDeferredValue:function(t){return Ln().memoizedState=t},useTransition:function(){var t=t0(!1),e=t[0];return t=uC.bind(null,t[1]),Ln().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=Fe,r=Ln();if(Me){if(n===void 0)throw Error(B(407));n=n()}else{if(n=e(),lt===null)throw Error(B(349));os&30||qE(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,n0(GE.bind(null,i,s,t),[t]),i.flags|=2048,cl(9,KE.bind(null,i,s,n,e),void 0,null),n},useId:function(){var t=Ln(),e=lt.identifierPrefix;if(Me){var n=li,i=ai;n=(i&~(1<<32-kn(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=al++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=cC++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},pC={readContext:_n,useCallback:nb,useContext:_n,useEffect:Ig,useImperativeHandle:tb,useInsertionEffect:JE,useLayoutEffect:ZE,useMemo:ib,useReducer:bf,useRef:XE,useState:function(){return bf(ll)},useDebugValue:kg,useDeferredValue:function(t){var e=vn();return rb(e,tt.memoizedState,t)},useTransition:function(){var t=bf(ll)[0],e=vn().memoizedState;return[t,e]},useMutableSource:HE,useSyncExternalStore:WE,useId:sb,unstable_isNewReconciler:!1},mC={readContext:_n,useCallback:nb,useContext:_n,useEffect:Ig,useImperativeHandle:tb,useInsertionEffect:JE,useLayoutEffect:ZE,useMemo:ib,useReducer:Tf,useRef:XE,useState:function(){return Tf(ll)},useDebugValue:kg,useDeferredValue:function(t){var e=vn();return tt===null?e.memoizedState=t:rb(e,tt.memoizedState,t)},useTransition:function(){var t=Tf(ll)[0],e=vn().memoizedState;return[t,e]},useMutableSource:HE,useSyncExternalStore:WE,useId:sb,unstable_isNewReconciler:!1};function En(t,e){if(t&&t.defaultProps){e=ze({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Mp(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:ze({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var $h={isMounted:function(t){return(t=t._reactInternals)?xs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Vt(),r=cr(t),s=gi(i,r);s.payload=e,n!=null&&(s.callback=n),e=ar(t,s,r),e!==null&&(Pn(e,t,r,i),lu(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Vt(),r=cr(t),s=gi(i,r);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=ar(t,s,r),e!==null&&(Pn(e,t,r,i),lu(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Vt(),i=cr(t),r=gi(n,i);r.tag=2,e!=null&&(r.callback=e),e=ar(t,r,i),e!==null&&(Pn(e,t,i,n),lu(e,t,i))}};function i0(t,e,n,i,r,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!tl(n,i)||!tl(r,s):!0}function cb(t,e,n){var i=!1,r=vr,s=e.contextType;return typeof s=="object"&&s!==null?s=_n(s):(r=Gt(e)?rs:At.current,i=e.contextTypes,s=(i=i!=null)?uo(t,r):vr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=$h,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function r0(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&$h.enqueueReplaceState(e,e.state,null)}function Op(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},vg(t);var s=e.contextType;typeof s=="object"&&s!==null?r.context=_n(s):(s=Gt(e)?rs:At.current,r.context=uo(t,s)),r.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Mp(t,e,s,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&$h.enqueueReplaceState(r,r.state,null),Xu(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function mo(t,e){try{var n="",i=e;do n+=$k(i),i=i.return;while(i);var r=n}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:r,digest:null}}function Sf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Lp(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var gC=typeof WeakMap=="function"?WeakMap:Map;function ub(t,e,n){n=gi(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){nh||(nh=!0,qp=i),Lp(t,e)},n}function hb(t,e,n){n=gi(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){Lp(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Lp(t,e),typeof i!="function"&&(lr===null?lr=new Set([this]):lr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function s0(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new gC;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=AC.bind(null,t,e,n),e.then(t,t))}function o0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function a0(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=gi(-1,1),e.tag=2,ar(n,e,1))),n.lanes|=1),t)}var yC=Ci.ReactCurrentOwner,qt=!1;function Lt(t,e,n,i){e.child=t===null?UE(e,null,n,i):fo(e,t.child,n,i)}function l0(t,e,n,i,r){n=n.render;var s=e.ref;return no(e,r),i=Tg(t,e,n,i,s,r),n=Sg(),t!==null&&!qt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Ei(t,e,r)):(Me&&n&&dg(e),e.flags|=1,Lt(t,e,i,r),e.child)}function c0(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!Og(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,db(t,e,s,i,r)):(t=pu(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&r)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:tl,n(o,i)&&t.ref===e.ref)return Ei(t,e,r)}return e.flags|=1,t=ur(s,i),t.ref=e.ref,t.return=e,e.child=t}function db(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(tl(s,i)&&t.ref===e.ref)if(qt=!1,e.pendingProps=i=s,(t.lanes&r)!==0)t.flags&131072&&(qt=!0);else return e.lanes=t.lanes,Ei(t,e,r)}return jp(t,e,n,i,r)}function fb(t,e,n){var i=e.pendingProps,r=i.children,s=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ie(Ys,Zt),Zt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ie(Ys,Zt),Zt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:n,Ie(Ys,Zt),Zt|=i}else s!==null?(i=s.baseLanes|n,e.memoizedState=null):i=n,Ie(Ys,Zt),Zt|=i;return Lt(t,e,r,n),e.child}function pb(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function jp(t,e,n,i,r){var s=Gt(n)?rs:At.current;return s=uo(e,s),no(e,r),n=Tg(t,e,n,i,s,r),i=Sg(),t!==null&&!qt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Ei(t,e,r)):(Me&&i&&dg(e),e.flags|=1,Lt(t,e,n,r),e.child)}function u0(t,e,n,i,r){if(Gt(n)){var s=!0;qu(e)}else s=!1;if(no(e,r),e.stateNode===null)hu(t,e),cb(e,n,i),Op(e,n,i,r),i=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=_n(c):(c=Gt(n)?rs:At.current,c=uo(e,c));var h=n.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==c)&&r0(e,o,i,c),zi=!1;var p=e.memoizedState;o.state=p,Xu(e,i,o,r),l=e.memoizedState,a!==i||p!==l||Kt.current||zi?(typeof h=="function"&&(Mp(e,n,h,i),l=e.memoizedState),(a=zi||i0(e,n,a,i,p,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,BE(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:En(e.type,a),o.props=c,d=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=_n(l):(l=Gt(n)?rs:At.current,l=uo(e,l));var g=n.getDerivedStateFromProps;(h=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||p!==l)&&r0(e,o,i,l),zi=!1,p=e.memoizedState,o.state=p,Xu(e,i,o,r);var y=e.memoizedState;a!==d||p!==y||Kt.current||zi?(typeof g=="function"&&(Mp(e,n,g,i),y=e.memoizedState),(c=zi||i0(e,n,c,i,p,y,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,y,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=y),o.props=i,o.state=y,o.context=l,i=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),i=!1)}return Vp(t,e,n,i,s,r)}function Vp(t,e,n,i,r,s){pb(t,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&Qv(e,n,!1),Ei(t,e,s);i=e.stateNode,yC.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&o?(e.child=fo(e,t.child,null,s),e.child=fo(e,null,a,s)):Lt(t,e,a,s),e.memoizedState=i.state,r&&Qv(e,n,!0),e.child}function mb(t){var e=t.stateNode;e.pendingContext?Gv(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Gv(t,e.context,!1),wg(t,e.containerInfo)}function h0(t,e,n,i,r){return ho(),pg(r),e.flags|=256,Lt(t,e,n,i),e.child}var Fp={dehydrated:null,treeContext:null,retryLane:0};function Up(t){return{baseLanes:t,cachePool:null,transitions:null}}function gb(t,e,n){var i=e.pendingProps,r=Ve.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),Ie(Ve,r&1),t===null)return Np(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,t=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=qh(o,i,0,null),t=Zr(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Up(n),e.memoizedState=Fp,t):Pg(e,o));if(r=t.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return _C(t,e,o,i,a,r,n);if(s){s=i.fallback,o=e.mode,r=t.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=ur(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=ur(a,s):(s=Zr(s,o,n,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=t.child.memoizedState,o=o===null?Up(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Fp,i}return s=t.child,t=s.sibling,i=ur(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function Pg(t,e){return e=qh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ac(t,e,n,i){return i!==null&&pg(i),fo(e,t.child,null,n),t=Pg(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function _C(t,e,n,i,r,s,o){if(n)return e.flags&256?(e.flags&=-257,i=Sf(Error(B(422))),Ac(t,e,o,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=qh({mode:"visible",children:i.children},r,0,null),s=Zr(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&fo(e,t.child,null,o),e.child.memoizedState=Up(o),e.memoizedState=Fp,s);if(!(e.mode&1))return Ac(t,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(B(419)),i=Sf(s,i,void 0),Ac(t,e,o,i)}if(a=(o&t.childLanes)!==0,qt||a){if(i=lt,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,xi(t,r),Pn(i,t,r,-1))}return Mg(),i=Sf(Error(B(421))),Ac(t,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=RC.bind(null,t),r._reactRetry=e,null):(t=s.treeContext,tn=or(r.nextSibling),rn=e,Me=!0,Tn=null,t!==null&&(dn[fn++]=ai,dn[fn++]=li,dn[fn++]=ss,ai=t.id,li=t.overflow,ss=e),e=Pg(e,i.children),e.flags|=4096,e)}function d0(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Dp(t.return,e,n)}function If(t,e,n,i,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function yb(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(Lt(t,e,i.children,n),i=Ve.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&d0(t,n,e);else if(t.tag===19)d0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Ie(Ve,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&Ju(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),If(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&Ju(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}If(e,!0,n,null,s);break;case"together":If(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function hu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ei(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),as|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(B(153));if(e.child!==null){for(t=e.child,n=ur(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ur(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function vC(t,e,n){switch(e.tag){case 3:mb(e),ho();break;case 5:$E(e);break;case 1:Gt(e.type)&&qu(e);break;case 4:wg(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;Ie(Qu,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Ie(Ve,Ve.current&1),e.flags|=128,null):n&e.child.childLanes?gb(t,e,n):(Ie(Ve,Ve.current&1),t=Ei(t,e,n),t!==null?t.sibling:null);Ie(Ve,Ve.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return yb(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Ie(Ve,Ve.current),i)break;return null;case 22:case 23:return e.lanes=0,fb(t,e,n)}return Ei(t,e,n)}var _b,zp,vb,wb;_b=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};zp=function(){};vb=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,Gr(Bn.current);var s=null;switch(n){case"input":r=cp(t,r),i=cp(t,i),s=[];break;case"select":r=ze({},r,{value:void 0}),i=ze({},i,{value:void 0}),s=[];break;case"textarea":r=dp(t,r),i=dp(t,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=Hu)}pp(n,i);var o;n=null;for(c in r)if(!i.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var a=r[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Ga.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in i){var l=i[c];if(a=r!=null?r[c]:void 0,i.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Ga.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Pe("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};wb=function(t,e,n,i){n!==i&&(e.flags|=4)};function ia(t,e){if(!Me)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Et(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function wC(t,e,n){var i=e.pendingProps;switch(fg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Et(e),null;case 1:return Gt(e.type)&&Wu(),Et(e),null;case 3:return i=e.stateNode,po(),Ae(Kt),Ae(At),Eg(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(Pc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Tn!==null&&(Qp(Tn),Tn=null))),zp(t,e),Et(e),null;case 5:xg(e);var r=Gr(ol.current);if(n=e.type,t!==null&&e.stateNode!=null)vb(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(B(166));return Et(e),null}if(t=Gr(Bn.current),Pc(e)){i=e.stateNode,n=e.type;var s=e.memoizedProps;switch(i[Vn]=e,i[rl]=s,t=(e.mode&1)!==0,n){case"dialog":Pe("cancel",i),Pe("close",i);break;case"iframe":case"object":case"embed":Pe("load",i);break;case"video":case"audio":for(r=0;r<ma.length;r++)Pe(ma[r],i);break;case"source":Pe("error",i);break;case"img":case"image":case"link":Pe("error",i),Pe("load",i);break;case"details":Pe("toggle",i);break;case"input":xv(i,s),Pe("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Pe("invalid",i);break;case"textarea":bv(i,s),Pe("invalid",i)}pp(n,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&kc(i.textContent,a,t),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&kc(i.textContent,a,t),r=["children",""+a]):Ga.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Pe("scroll",i)}switch(n){case"input":vc(i),Ev(i,s,!0);break;case"textarea":vc(i),Tv(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=Hu)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Gx(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=o.createElement(n,{is:i.is}):(t=o.createElement(n),n==="select"&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,n),t[Vn]=e,t[rl]=i,_b(t,e,!1,!1),e.stateNode=t;e:{switch(o=mp(n,i),n){case"dialog":Pe("cancel",t),Pe("close",t),r=i;break;case"iframe":case"object":case"embed":Pe("load",t),r=i;break;case"video":case"audio":for(r=0;r<ma.length;r++)Pe(ma[r],t);r=i;break;case"source":Pe("error",t),r=i;break;case"img":case"image":case"link":Pe("error",t),Pe("load",t),r=i;break;case"details":Pe("toggle",t),r=i;break;case"input":xv(t,i),r=cp(t,i),Pe("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=ze({},i,{value:void 0}),Pe("invalid",t);break;case"textarea":bv(t,i),r=dp(t,i),Pe("invalid",t);break;default:r=i}pp(n,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?Xx(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Qx(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Qa(t,l):typeof l=="number"&&Qa(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ga.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Pe("scroll",t):l!=null&&Jm(t,s,l,o))}switch(n){case"input":vc(t),Ev(t,i,!1);break;case"textarea":vc(t),Tv(t);break;case"option":i.value!=null&&t.setAttribute("value",""+_r(i.value));break;case"select":t.multiple=!!i.multiple,s=i.value,s!=null?Js(t,!!i.multiple,s,!1):i.defaultValue!=null&&Js(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=Hu)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Et(e),null;case 6:if(t&&e.stateNode!=null)wb(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(B(166));if(n=Gr(ol.current),Gr(Bn.current),Pc(e)){if(i=e.stateNode,n=e.memoizedProps,i[Vn]=e,(s=i.nodeValue!==n)&&(t=rn,t!==null))switch(t.tag){case 3:kc(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&kc(i.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Vn]=e,e.stateNode=i}return Et(e),null;case 13:if(Ae(Ve),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Me&&tn!==null&&e.mode&1&&!(e.flags&128))VE(),ho(),e.flags|=98560,s=!1;else if(s=Pc(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(B(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(B(317));s[Vn]=e}else ho(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Et(e),s=!1}else Tn!==null&&(Qp(Tn),Tn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||Ve.current&1?nt===0&&(nt=3):Mg())),e.updateQueue!==null&&(e.flags|=4),Et(e),null);case 4:return po(),zp(t,e),t===null&&nl(e.stateNode.containerInfo),Et(e),null;case 10:return yg(e.type._context),Et(e),null;case 17:return Gt(e.type)&&Wu(),Et(e),null;case 19:if(Ae(Ve),s=e.memoizedState,s===null)return Et(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)ia(s,!1);else{if(nt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Ju(t),o!==null){for(e.flags|=128,ia(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)s=n,t=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ie(Ve,Ve.current&1|2),e.child}t=t.sibling}s.tail!==null&&Qe()>go&&(e.flags|=128,i=!0,ia(s,!1),e.lanes=4194304)}else{if(!i)if(t=Ju(o),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ia(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Me)return Et(e),null}else 2*Qe()-s.renderingStartTime>go&&n!==1073741824&&(e.flags|=128,i=!0,ia(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Qe(),e.sibling=null,n=Ve.current,Ie(Ve,i?n&1|2:n&1),e):(Et(e),null);case 22:case 23:return Dg(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Zt&1073741824&&(Et(e),e.subtreeFlags&6&&(e.flags|=8192)):Et(e),null;case 24:return null;case 25:return null}throw Error(B(156,e.tag))}function xC(t,e){switch(fg(e),e.tag){case 1:return Gt(e.type)&&Wu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return po(),Ae(Kt),Ae(At),Eg(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return xg(e),null;case 13:if(Ae(Ve),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(B(340));ho()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ae(Ve),null;case 4:return po(),null;case 10:return yg(e.type._context),null;case 22:case 23:return Dg(),null;case 24:return null;default:return null}}var Rc=!1,It=!1,EC=typeof WeakSet=="function"?WeakSet:Set,G=null;function Qs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){He(t,e,i)}else n.current=null}function Bp(t,e,n){try{n()}catch(i){He(t,e,i)}}var f0=!1;function bC(t,e){if(Sp=zu,t=SE(),hg(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,h=0,d=t,p=null;t:for(;;){for(var g;d!==n||r!==0&&d.nodeType!==3||(a=o+r),d!==s||i!==0&&d.nodeType!==3||(l=o+i),d.nodeType===3&&(o+=d.nodeValue.length),(g=d.firstChild)!==null;)p=d,d=g;for(;;){if(d===t)break t;if(p===n&&++c===r&&(a=o),p===s&&++h===i&&(l=o),(g=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=g}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ip={focusedElem:t,selectionRange:n},zu=!1,G=e;G!==null;)if(e=G,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,G=t;else for(;G!==null;){e=G;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var x=y.memoizedProps,b=y.memoizedState,v=e.stateNode,w=v.getSnapshotBeforeUpdate(e.elementType===e.type?x:En(e.type,x),b);v.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var T=e.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(B(163))}}catch(C){He(e,e.return,C)}if(t=e.sibling,t!==null){t.return=e.return,G=t;break}G=e.return}return y=f0,f0=!1,y}function Ma(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,s!==void 0&&Bp(e,n,s)}r=r.next}while(r!==i)}}function Hh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function $p(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function xb(t){var e=t.alternate;e!==null&&(t.alternate=null,xb(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Vn],delete e[rl],delete e[Cp],delete e[sC],delete e[oC])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Eb(t){return t.tag===5||t.tag===3||t.tag===4}function p0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Eb(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Hp(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Hu));else if(i!==4&&(t=t.child,t!==null))for(Hp(t,e,n),t=t.sibling;t!==null;)Hp(t,e,n),t=t.sibling}function Wp(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(Wp(t,e,n),t=t.sibling;t!==null;)Wp(t,e,n),t=t.sibling}var ut=null,bn=!1;function Li(t,e,n){for(n=n.child;n!==null;)bb(t,e,n),n=n.sibling}function bb(t,e,n){if(zn&&typeof zn.onCommitFiberUnmount=="function")try{zn.onCommitFiberUnmount(Lh,n)}catch{}switch(n.tag){case 5:It||Qs(n,e);case 6:var i=ut,r=bn;ut=null,Li(t,e,n),ut=i,bn=r,ut!==null&&(bn?(t=ut,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ut.removeChild(n.stateNode));break;case 18:ut!==null&&(bn?(t=ut,n=n.stateNode,t.nodeType===8?vf(t.parentNode,n):t.nodeType===1&&vf(t,n),Za(t)):vf(ut,n.stateNode));break;case 4:i=ut,r=bn,ut=n.stateNode.containerInfo,bn=!0,Li(t,e,n),ut=i,bn=r;break;case 0:case 11:case 14:case 15:if(!It&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Bp(n,e,o),r=r.next}while(r!==i)}Li(t,e,n);break;case 1:if(!It&&(Qs(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){He(n,e,a)}Li(t,e,n);break;case 21:Li(t,e,n);break;case 22:n.mode&1?(It=(i=It)||n.memoizedState!==null,Li(t,e,n),It=i):Li(t,e,n);break;default:Li(t,e,n)}}function m0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new EC),e.forEach(function(i){var r=NC.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function xn(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:ut=a.stateNode,bn=!1;break e;case 3:ut=a.stateNode.containerInfo,bn=!0;break e;case 4:ut=a.stateNode.containerInfo,bn=!0;break e}a=a.return}if(ut===null)throw Error(B(160));bb(s,o,r),ut=null,bn=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(c){He(r,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Tb(e,t),e=e.sibling}function Tb(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(xn(e,t),Mn(t),i&4){try{Ma(3,t,t.return),Hh(3,t)}catch(x){He(t,t.return,x)}try{Ma(5,t,t.return)}catch(x){He(t,t.return,x)}}break;case 1:xn(e,t),Mn(t),i&512&&n!==null&&Qs(n,n.return);break;case 5:if(xn(e,t),Mn(t),i&512&&n!==null&&Qs(n,n.return),t.flags&32){var r=t.stateNode;try{Qa(r,"")}catch(x){He(t,t.return,x)}}if(i&4&&(r=t.stateNode,r!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&qx(r,s),mp(a,o);var c=mp(a,s);for(o=0;o<l.length;o+=2){var h=l[o],d=l[o+1];h==="style"?Xx(r,d):h==="dangerouslySetInnerHTML"?Qx(r,d):h==="children"?Qa(r,d):Jm(r,h,d,c)}switch(a){case"input":up(r,s);break;case"textarea":Kx(r,s);break;case"select":var p=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?Js(r,!!s.multiple,g,!1):p!==!!s.multiple&&(s.defaultValue!=null?Js(r,!!s.multiple,s.defaultValue,!0):Js(r,!!s.multiple,s.multiple?[]:"",!1))}r[rl]=s}catch(x){He(t,t.return,x)}}break;case 6:if(xn(e,t),Mn(t),i&4){if(t.stateNode===null)throw Error(B(162));r=t.stateNode,s=t.memoizedProps;try{r.nodeValue=s}catch(x){He(t,t.return,x)}}break;case 3:if(xn(e,t),Mn(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Za(e.containerInfo)}catch(x){He(t,t.return,x)}break;case 4:xn(e,t),Mn(t);break;case 13:xn(e,t),Mn(t),r=t.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(Rg=Qe())),i&4&&m0(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(It=(c=It)||h,xn(e,t),It=c):xn(e,t),Mn(t),i&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(G=t,h=t.child;h!==null;){for(d=G=h;G!==null;){switch(p=G,g=p.child,p.tag){case 0:case 11:case 14:case 15:Ma(4,p,p.return);break;case 1:Qs(p,p.return);var y=p.stateNode;if(typeof y.componentWillUnmount=="function"){i=p,n=p.return;try{e=i,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(x){He(i,n,x)}}break;case 5:Qs(p,p.return);break;case 22:if(p.memoizedState!==null){y0(d);continue}}g!==null?(g.return=p,G=g):y0(d)}h=h.sibling}e:for(h=null,d=t;;){if(d.tag===5){if(h===null){h=d;try{r=d.stateNode,c?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Yx("display",o))}catch(x){He(t,t.return,x)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(x){He(t,t.return,x)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:xn(e,t),Mn(t),i&4&&m0(t);break;case 21:break;default:xn(e,t),Mn(t)}}function Mn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Eb(n)){var i=n;break e}n=n.return}throw Error(B(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(Qa(r,""),i.flags&=-33);var s=p0(t);Wp(t,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=p0(t);Hp(t,a,o);break;default:throw Error(B(161))}}catch(l){He(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function TC(t,e,n){G=t,Sb(t)}function Sb(t,e,n){for(var i=(t.mode&1)!==0;G!==null;){var r=G,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||Rc;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||It;a=Rc;var c=It;if(Rc=o,(It=l)&&!c)for(G=r;G!==null;)o=G,l=o.child,o.tag===22&&o.memoizedState!==null?_0(r):l!==null?(l.return=o,G=l):_0(r);for(;s!==null;)G=s,Sb(s),s=s.sibling;G=r,Rc=a,It=c}g0(t)}else r.subtreeFlags&8772&&s!==null?(s.return=r,G=s):g0(t)}}function g0(t){for(;G!==null;){var e=G;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:It||Hh(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!It)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:En(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&e0(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}e0(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&Za(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(B(163))}It||e.flags&512&&$p(e)}catch(p){He(e,e.return,p)}}if(e===t){G=null;break}if(n=e.sibling,n!==null){n.return=e.return,G=n;break}G=e.return}}function y0(t){for(;G!==null;){var e=G;if(e===t){G=null;break}var n=e.sibling;if(n!==null){n.return=e.return,G=n;break}G=e.return}}function _0(t){for(;G!==null;){var e=G;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Hh(4,e)}catch(l){He(e,n,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){He(e,r,l)}}var s=e.return;try{$p(e)}catch(l){He(e,s,l)}break;case 5:var o=e.return;try{$p(e)}catch(l){He(e,o,l)}}}catch(l){He(e,e.return,l)}if(e===t){G=null;break}var a=e.sibling;if(a!==null){a.return=e.return,G=a;break}G=e.return}}var SC=Math.ceil,th=Ci.ReactCurrentDispatcher,Cg=Ci.ReactCurrentOwner,mn=Ci.ReactCurrentBatchConfig,pe=0,lt=null,Je=null,ft=0,Zt=0,Ys=kr(0),nt=0,ul=null,as=0,Wh=0,Ag=0,Oa=null,$t=null,Rg=0,go=1/0,ii=null,nh=!1,qp=null,lr=null,Nc=!1,Yi=null,ih=0,La=0,Kp=null,du=-1,fu=0;function Vt(){return pe&6?Qe():du!==-1?du:du=Qe()}function cr(t){return t.mode&1?pe&2&&ft!==0?ft&-ft:lC.transition!==null?(fu===0&&(fu=cE()),fu):(t=we,t!==0||(t=window.event,t=t===void 0?16:gE(t.type)),t):1}function Pn(t,e,n,i){if(50<La)throw La=0,Kp=null,Error(B(185));Ml(t,n,i),(!(pe&2)||t!==lt)&&(t===lt&&(!(pe&2)&&(Wh|=n),nt===4&&$i(t,ft)),Qt(t,i),n===1&&pe===0&&!(e.mode&1)&&(go=Qe()+500,zh&&Pr()))}function Qt(t,e){var n=t.callbackNode;lP(t,e);var i=Uu(t,t===lt?ft:0);if(i===0)n!==null&&kv(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&kv(n),e===1)t.tag===0?aC(v0.bind(null,t)):OE(v0.bind(null,t)),iC(function(){!(pe&6)&&Pr()}),n=null;else{switch(uE(i)){case 1:n=ig;break;case 4:n=aE;break;case 16:n=Fu;break;case 536870912:n=lE;break;default:n=Fu}n=Db(n,Ib.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Ib(t,e){if(du=-1,fu=0,pe&6)throw Error(B(327));var n=t.callbackNode;if(io()&&t.callbackNode!==n)return null;var i=Uu(t,t===lt?ft:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=rh(t,i);else{e=i;var r=pe;pe|=2;var s=Pb();(lt!==t||ft!==e)&&(ii=null,go=Qe()+500,Jr(t,e));do try{PC();break}catch(a){kb(t,a)}while(!0);gg(),th.current=s,pe=r,Je!==null?e=0:(lt=null,ft=0,e=nt)}if(e!==0){if(e===2&&(r=wp(t),r!==0&&(i=r,e=Gp(t,r))),e===1)throw n=ul,Jr(t,0),$i(t,i),Qt(t,Qe()),n;if(e===6)$i(t,i);else{if(r=t.current.alternate,!(i&30)&&!IC(r)&&(e=rh(t,i),e===2&&(s=wp(t),s!==0&&(i=s,e=Gp(t,s))),e===1))throw n=ul,Jr(t,0),$i(t,i),Qt(t,Qe()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(B(345));case 2:Br(t,$t,ii);break;case 3:if($i(t,i),(i&130023424)===i&&(e=Rg+500-Qe(),10<e)){if(Uu(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){Vt(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=Pp(Br.bind(null,t,$t,ii),e);break}Br(t,$t,ii);break;case 4:if($i(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var o=31-kn(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=Qe()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*SC(i/1960))-i,10<i){t.timeoutHandle=Pp(Br.bind(null,t,$t,ii),i);break}Br(t,$t,ii);break;case 5:Br(t,$t,ii);break;default:throw Error(B(329))}}}return Qt(t,Qe()),t.callbackNode===n?Ib.bind(null,t):null}function Gp(t,e){var n=Oa;return t.current.memoizedState.isDehydrated&&(Jr(t,e).flags|=256),t=rh(t,e),t!==2&&(e=$t,$t=n,e!==null&&Qp(e)),t}function Qp(t){$t===null?$t=t:$t.push.apply($t,t)}function IC(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!An(s(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function $i(t,e){for(e&=~Ag,e&=~Wh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-kn(e),i=1<<n;t[n]=-1,e&=~i}}function v0(t){if(pe&6)throw Error(B(327));io();var e=Uu(t,0);if(!(e&1))return Qt(t,Qe()),null;var n=rh(t,e);if(t.tag!==0&&n===2){var i=wp(t);i!==0&&(e=i,n=Gp(t,i))}if(n===1)throw n=ul,Jr(t,0),$i(t,e),Qt(t,Qe()),n;if(n===6)throw Error(B(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Br(t,$t,ii),Qt(t,Qe()),null}function Ng(t,e){var n=pe;pe|=1;try{return t(e)}finally{pe=n,pe===0&&(go=Qe()+500,zh&&Pr())}}function ls(t){Yi!==null&&Yi.tag===0&&!(pe&6)&&io();var e=pe;pe|=1;var n=mn.transition,i=we;try{if(mn.transition=null,we=1,t)return t()}finally{we=i,mn.transition=n,pe=e,!(pe&6)&&Pr()}}function Dg(){Zt=Ys.current,Ae(Ys)}function Jr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,nC(n)),Je!==null)for(n=Je.return;n!==null;){var i=n;switch(fg(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Wu();break;case 3:po(),Ae(Kt),Ae(At),Eg();break;case 5:xg(i);break;case 4:po();break;case 13:Ae(Ve);break;case 19:Ae(Ve);break;case 10:yg(i.type._context);break;case 22:case 23:Dg()}n=n.return}if(lt=t,Je=t=ur(t.current,null),ft=Zt=e,nt=0,ul=null,Ag=Wh=as=0,$t=Oa=null,Kr!==null){for(e=0;e<Kr.length;e++)if(n=Kr[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,s=n.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}n.pending=i}Kr=null}return t}function kb(t,e){do{var n=Je;try{if(gg(),cu.current=eh,Zu){for(var i=Fe.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Zu=!1}if(os=0,ot=tt=Fe=null,Da=!1,al=0,Cg.current=null,n===null||n.return===null){nt=1,ul=e,Je=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=ft,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var g=o0(o);if(g!==null){g.flags&=-257,a0(g,o,a,s,e),g.mode&1&&s0(s,c,e),e=g,l=c;var y=e.updateQueue;if(y===null){var x=new Set;x.add(l),e.updateQueue=x}else y.add(l);break e}else{if(!(e&1)){s0(s,c,e),Mg();break e}l=Error(B(426))}}else if(Me&&a.mode&1){var b=o0(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),a0(b,o,a,s,e),pg(mo(l,a));break e}}s=l=mo(l,a),nt!==4&&(nt=2),Oa===null?Oa=[s]:Oa.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=ub(s,l,e);Zv(s,v);break e;case 1:a=l;var w=s.type,T=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(lr===null||!lr.has(T)))){s.flags|=65536,e&=-e,s.lanes|=e;var C=hb(s,a,e);Zv(s,C);break e}}s=s.return}while(s!==null)}Ab(n)}catch(N){e=N,Je===n&&n!==null&&(Je=n=n.return);continue}break}while(!0)}function Pb(){var t=th.current;return th.current=eh,t===null?eh:t}function Mg(){(nt===0||nt===3||nt===2)&&(nt=4),lt===null||!(as&268435455)&&!(Wh&268435455)||$i(lt,ft)}function rh(t,e){var n=pe;pe|=2;var i=Pb();(lt!==t||ft!==e)&&(ii=null,Jr(t,e));do try{kC();break}catch(r){kb(t,r)}while(!0);if(gg(),pe=n,th.current=i,Je!==null)throw Error(B(261));return lt=null,ft=0,nt}function kC(){for(;Je!==null;)Cb(Je)}function PC(){for(;Je!==null&&!Zk();)Cb(Je)}function Cb(t){var e=Nb(t.alternate,t,Zt);t.memoizedProps=t.pendingProps,e===null?Ab(t):Je=e,Cg.current=null}function Ab(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=xC(n,e),n!==null){n.flags&=32767,Je=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{nt=6,Je=null;return}}else if(n=wC(n,e,Zt),n!==null){Je=n;return}if(e=e.sibling,e!==null){Je=e;return}Je=e=t}while(e!==null);nt===0&&(nt=5)}function Br(t,e,n){var i=we,r=mn.transition;try{mn.transition=null,we=1,CC(t,e,n,i)}finally{mn.transition=r,we=i}return null}function CC(t,e,n,i){do io();while(Yi!==null);if(pe&6)throw Error(B(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(B(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(cP(t,s),t===lt&&(Je=lt=null,ft=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Nc||(Nc=!0,Db(Fu,function(){return io(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=mn.transition,mn.transition=null;var o=we;we=1;var a=pe;pe|=4,Cg.current=null,bC(t,n),Tb(n,t),QP(Ip),zu=!!Sp,Ip=Sp=null,t.current=n,TC(n),eP(),pe=a,we=o,mn.transition=s}else t.current=n;if(Nc&&(Nc=!1,Yi=t,ih=r),s=t.pendingLanes,s===0&&(lr=null),iP(n.stateNode),Qt(t,Qe()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(nh)throw nh=!1,t=qp,qp=null,t;return ih&1&&t.tag!==0&&io(),s=t.pendingLanes,s&1?t===Kp?La++:(La=0,Kp=t):La=0,Pr(),null}function io(){if(Yi!==null){var t=uE(ih),e=mn.transition,n=we;try{if(mn.transition=null,we=16>t?16:t,Yi===null)var i=!1;else{if(t=Yi,Yi=null,ih=0,pe&6)throw Error(B(331));var r=pe;for(pe|=4,G=t.current;G!==null;){var s=G,o=s.child;if(G.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(G=c;G!==null;){var h=G;switch(h.tag){case 0:case 11:case 15:Ma(8,h,s)}var d=h.child;if(d!==null)d.return=h,G=d;else for(;G!==null;){h=G;var p=h.sibling,g=h.return;if(xb(h),h===c){G=null;break}if(p!==null){p.return=g,G=p;break}G=g}}}var y=s.alternate;if(y!==null){var x=y.child;if(x!==null){y.child=null;do{var b=x.sibling;x.sibling=null,x=b}while(x!==null)}}G=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,G=o;else e:for(;G!==null;){if(s=G,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Ma(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,G=v;break e}G=s.return}}var w=t.current;for(G=w;G!==null;){o=G;var T=o.child;if(o.subtreeFlags&2064&&T!==null)T.return=o,G=T;else e:for(o=w;G!==null;){if(a=G,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Hh(9,a)}}catch(N){He(a,a.return,N)}if(a===o){G=null;break e}var C=a.sibling;if(C!==null){C.return=a.return,G=C;break e}G=a.return}}if(pe=r,Pr(),zn&&typeof zn.onPostCommitFiberRoot=="function")try{zn.onPostCommitFiberRoot(Lh,t)}catch{}i=!0}return i}finally{we=n,mn.transition=e}}return!1}function w0(t,e,n){e=mo(n,e),e=ub(t,e,1),t=ar(t,e,1),e=Vt(),t!==null&&(Ml(t,1,e),Qt(t,e))}function He(t,e,n){if(t.tag===3)w0(t,t,n);else for(;e!==null;){if(e.tag===3){w0(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(lr===null||!lr.has(i))){t=mo(n,t),t=hb(e,t,1),e=ar(e,t,1),t=Vt(),e!==null&&(Ml(e,1,t),Qt(e,t));break}}e=e.return}}function AC(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=Vt(),t.pingedLanes|=t.suspendedLanes&n,lt===t&&(ft&n)===n&&(nt===4||nt===3&&(ft&130023424)===ft&&500>Qe()-Rg?Jr(t,0):Ag|=n),Qt(t,e)}function Rb(t,e){e===0&&(t.mode&1?(e=Ec,Ec<<=1,!(Ec&130023424)&&(Ec=4194304)):e=1);var n=Vt();t=xi(t,e),t!==null&&(Ml(t,e,n),Qt(t,n))}function RC(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Rb(t,n)}function NC(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(B(314))}i!==null&&i.delete(e),Rb(t,n)}var Nb;Nb=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Kt.current)qt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return qt=!1,vC(t,e,n);qt=!!(t.flags&131072)}else qt=!1,Me&&e.flags&1048576&&LE(e,Gu,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;hu(t,e),t=e.pendingProps;var r=uo(e,At.current);no(e,n),r=Tg(null,e,i,t,r,n);var s=Sg();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Gt(i)?(s=!0,qu(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,vg(e),r.updater=$h,e.stateNode=r,r._reactInternals=e,Op(e,i,t,n),e=Vp(null,e,i,!0,s,n)):(e.tag=0,Me&&s&&dg(e),Lt(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(hu(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=MC(i),t=En(i,t),r){case 0:e=jp(null,e,i,t,n);break e;case 1:e=u0(null,e,i,t,n);break e;case 11:e=l0(null,e,i,t,n);break e;case 14:e=c0(null,e,i,En(i.type,t),n);break e}throw Error(B(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:En(i,r),jp(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:En(i,r),u0(t,e,i,r,n);case 3:e:{if(mb(e),t===null)throw Error(B(387));i=e.pendingProps,s=e.memoizedState,r=s.element,BE(t,e),Xu(e,i,null,n);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=mo(Error(B(423)),e),e=h0(t,e,i,n,r);break e}else if(i!==r){r=mo(Error(B(424)),e),e=h0(t,e,i,n,r);break e}else for(tn=or(e.stateNode.containerInfo.firstChild),rn=e,Me=!0,Tn=null,n=UE(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ho(),i===r){e=Ei(t,e,n);break e}Lt(t,e,i,n)}e=e.child}return e;case 5:return $E(e),t===null&&Np(e),i=e.type,r=e.pendingProps,s=t!==null?t.memoizedProps:null,o=r.children,kp(i,r)?o=null:s!==null&&kp(i,s)&&(e.flags|=32),pb(t,e),Lt(t,e,o,n),e.child;case 6:return t===null&&Np(e),null;case 13:return gb(t,e,n);case 4:return wg(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=fo(e,null,i,n):Lt(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:En(i,r),l0(t,e,i,r,n);case 7:return Lt(t,e,e.pendingProps,n),e.child;case 8:return Lt(t,e,e.pendingProps.children,n),e.child;case 12:return Lt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,Ie(Qu,i._currentValue),i._currentValue=o,s!==null)if(An(s.value,o)){if(s.children===r.children&&!Kt.current){e=Ei(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=gi(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Dp(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(B(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Dp(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Lt(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,no(e,n),r=_n(r),i=i(r),e.flags|=1,Lt(t,e,i,n),e.child;case 14:return i=e.type,r=En(i,e.pendingProps),r=En(i.type,r),c0(t,e,i,r,n);case 15:return db(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:En(i,r),hu(t,e),e.tag=1,Gt(i)?(t=!0,qu(e)):t=!1,no(e,n),cb(e,i,r),Op(e,i,r,n),Vp(null,e,i,!0,t,n);case 19:return yb(t,e,n);case 22:return fb(t,e,n)}throw Error(B(156,e.tag))};function Db(t,e){return oE(t,e)}function DC(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function pn(t,e,n,i){return new DC(t,e,n,i)}function Og(t){return t=t.prototype,!(!t||!t.isReactComponent)}function MC(t){if(typeof t=="function")return Og(t)?1:0;if(t!=null){if(t=t.$$typeof,t===eg)return 11;if(t===tg)return 14}return 2}function ur(t,e){var n=t.alternate;return n===null?(n=pn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function pu(t,e,n,i,r,s){var o=2;if(i=t,typeof t=="function")Og(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Us:return Zr(n.children,r,s,e);case Zm:o=8,r|=8;break;case sp:return t=pn(12,n,e,r|2),t.elementType=sp,t.lanes=s,t;case op:return t=pn(13,n,e,r),t.elementType=op,t.lanes=s,t;case ap:return t=pn(19,n,e,r),t.elementType=ap,t.lanes=s,t;case $x:return qh(n,r,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case zx:o=10;break e;case Bx:o=9;break e;case eg:o=11;break e;case tg:o=14;break e;case Ui:o=16,i=null;break e}throw Error(B(130,t==null?t:typeof t,""))}return e=pn(o,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function Zr(t,e,n,i){return t=pn(7,t,i,e),t.lanes=n,t}function qh(t,e,n,i){return t=pn(22,t,i,e),t.elementType=$x,t.lanes=n,t.stateNode={isHidden:!1},t}function kf(t,e,n){return t=pn(6,t,null,e),t.lanes=n,t}function Pf(t,e,n){return e=pn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function OC(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=lf(0),this.expirationTimes=lf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=lf(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Lg(t,e,n,i,r,s,o,a,l){return t=new OC(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=pn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},vg(s),t}function LC(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Fs,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function Mb(t){if(!t)return vr;t=t._reactInternals;e:{if(xs(t)!==t||t.tag!==1)throw Error(B(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Gt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(B(171))}if(t.tag===1){var n=t.type;if(Gt(n))return ME(t,n,e)}return e}function Ob(t,e,n,i,r,s,o,a,l){return t=Lg(n,i,!0,t,r,s,o,a,l),t.context=Mb(null),n=t.current,i=Vt(),r=cr(n),s=gi(i,r),s.callback=e??null,ar(n,s,r),t.current.lanes=r,Ml(t,r,i),Qt(t,i),t}function Kh(t,e,n,i){var r=e.current,s=Vt(),o=cr(r);return n=Mb(n),e.context===null?e.context=n:e.pendingContext=n,e=gi(s,o),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=ar(r,e,o),t!==null&&(Pn(t,r,o,s),lu(t,r,o)),o}function sh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function x0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function jg(t,e){x0(t,e),(t=t.alternate)&&x0(t,e)}function jC(){return null}var Lb=typeof reportError=="function"?reportError:function(t){console.error(t)};function Vg(t){this._internalRoot=t}Gh.prototype.render=Vg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(B(409));Kh(t,e,null,null)};Gh.prototype.unmount=Vg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ls(function(){Kh(null,t,null,null)}),e[wi]=null}};function Gh(t){this._internalRoot=t}Gh.prototype.unstable_scheduleHydration=function(t){if(t){var e=fE();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Bi.length&&e!==0&&e<Bi[n].priority;n++);Bi.splice(n,0,t),n===0&&mE(t)}};function Fg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Qh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function E0(){}function VC(t,e,n,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var c=sh(o);s.call(c)}}var o=Ob(e,i,t,0,null,!1,!1,"",E0);return t._reactRootContainer=o,t[wi]=o.current,nl(t.nodeType===8?t.parentNode:t),ls(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var c=sh(l);a.call(c)}}var l=Lg(t,0,!1,null,null,!1,!1,"",E0);return t._reactRootContainer=l,t[wi]=l.current,nl(t.nodeType===8?t.parentNode:t),ls(function(){Kh(e,l,n,i)}),l}function Yh(t,e,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=sh(o);a.call(l)}}Kh(e,o,t,r)}else o=VC(n,e,t,r,i);return sh(o)}hE=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=pa(e.pendingLanes);n!==0&&(rg(e,n|1),Qt(e,Qe()),!(pe&6)&&(go=Qe()+500,Pr()))}break;case 13:ls(function(){var i=xi(t,1);if(i!==null){var r=Vt();Pn(i,t,1,r)}}),jg(t,1)}};sg=function(t){if(t.tag===13){var e=xi(t,134217728);if(e!==null){var n=Vt();Pn(e,t,134217728,n)}jg(t,134217728)}};dE=function(t){if(t.tag===13){var e=cr(t),n=xi(t,e);if(n!==null){var i=Vt();Pn(n,t,e,i)}jg(t,e)}};fE=function(){return we};pE=function(t,e){var n=we;try{return we=t,e()}finally{we=n}};yp=function(t,e,n){switch(e){case"input":if(up(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=Uh(i);if(!r)throw Error(B(90));Wx(i),up(i,r)}}}break;case"textarea":Kx(t,n);break;case"select":e=n.value,e!=null&&Js(t,!!n.multiple,e,!1)}};eE=Ng;tE=ls;var FC={usingClientEntryPoint:!1,Events:[Ll,Hs,Uh,Jx,Zx,Ng]},ra={findFiberByHostInstance:qr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},UC={bundleType:ra.bundleType,version:ra.version,rendererPackageName:ra.rendererPackageName,rendererConfig:ra.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ci.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=rE(t),t===null?null:t.stateNode},findFiberByHostInstance:ra.findFiberByHostInstance||jC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Dc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Dc.isDisabled&&Dc.supportsFiber)try{Lh=Dc.inject(UC),zn=Dc}catch{}}on.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=FC;on.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Fg(e))throw Error(B(200));return LC(t,e,null,n)};on.createRoot=function(t,e){if(!Fg(t))throw Error(B(299));var n=!1,i="",r=Lb;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=Lg(t,1,!1,null,null,n,!1,i,r),t[wi]=e.current,nl(t.nodeType===8?t.parentNode:t),new Vg(e)};on.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(B(188)):(t=Object.keys(t).join(","),Error(B(268,t)));return t=rE(e),t=t===null?null:t.stateNode,t};on.flushSync=function(t){return ls(t)};on.hydrate=function(t,e,n){if(!Qh(e))throw Error(B(200));return Yh(null,t,e,!0,n)};on.hydrateRoot=function(t,e,n){if(!Fg(t))throw Error(B(405));var i=n!=null&&n.hydratedSources||null,r=!1,s="",o=Lb;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Ob(e,null,t,1,n??null,r,!1,s,o),t[wi]=e.current,nl(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new Gh(e)};on.render=function(t,e,n){if(!Qh(e))throw Error(B(200));return Yh(null,t,e,!1,n)};on.unmountComponentAtNode=function(t){if(!Qh(t))throw Error(B(40));return t._reactRootContainer?(ls(function(){Yh(null,null,t,!1,function(){t._reactRootContainer=null,t[wi]=null})}),!0):!1};on.unstable_batchedUpdates=Ng;on.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!Qh(n))throw Error(B(200));if(t==null||t._reactInternals===void 0)throw Error(B(38));return Yh(t,e,n,!1,i)};on.version="18.3.1-next-f1338f8080-20240426";function jb(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(jb)}catch(t){console.error(t)}}jb(),jx.exports=on;var zC=jx.exports,b0=zC;ip.createRoot=b0.createRoot,ip.hydrateRoot=b0.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function hl(){return hl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},hl.apply(this,arguments)}var Xi;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Xi||(Xi={}));const T0="popstate";function BC(t){t===void 0&&(t={});function e(i,r){let{pathname:s,search:o,hash:a}=i.location;return Yp("",{pathname:s,search:o,hash:a},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(i,r){return typeof r=="string"?r:oh(r)}return HC(e,n,null,t)}function Ue(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Vb(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function $C(){return Math.random().toString(36).substr(2,8)}function S0(t,e){return{usr:t.state,key:t.key,idx:e}}function Yp(t,e,n,i){return n===void 0&&(n=null),hl({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ro(e):e,{state:n,key:e&&e.key||i||$C()})}function oh(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Ro(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function HC(t,e,n,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:s=!1}=i,o=r.history,a=Xi.Pop,l=null,c=h();c==null&&(c=0,o.replaceState(hl({},o.state,{idx:c}),""));function h(){return(o.state||{idx:null}).idx}function d(){a=Xi.Pop;let b=h(),v=b==null?null:b-c;c=b,l&&l({action:a,location:x.location,delta:v})}function p(b,v){a=Xi.Push;let w=Yp(x.location,b,v);c=h()+1;let T=S0(w,c),C=x.createHref(w);try{o.pushState(T,"",C)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;r.location.assign(C)}s&&l&&l({action:a,location:x.location,delta:1})}function g(b,v){a=Xi.Replace;let w=Yp(x.location,b,v);c=h();let T=S0(w,c),C=x.createHref(w);o.replaceState(T,"",C),s&&l&&l({action:a,location:x.location,delta:0})}function y(b){let v=r.location.origin!=="null"?r.location.origin:r.location.href,w=typeof b=="string"?b:oh(b);return w=w.replace(/ $/,"%20"),Ue(v,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,v)}let x={get action(){return a},get location(){return t(r,o)},listen(b){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(T0,d),l=b,()=>{r.removeEventListener(T0,d),l=null}},createHref(b){return e(r,b)},createURL:y,encodeLocation(b){let v=y(b);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:p,replace:g,go(b){return o.go(b)}};return x}var I0;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(I0||(I0={}));function WC(t,e,n){return n===void 0&&(n="/"),qC(t,e,n)}function qC(t,e,n,i){let r=typeof e=="string"?Ro(e):e,s=yo(r.pathname||"/",n);if(s==null)return null;let o=Fb(t);KC(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=rA(s);a=nA(o[l],c)}return a}function Fb(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let r=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Ue(l.relativePath.startsWith(i),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(i.length));let c=hr([i,l.relativePath]),h=n.concat(l);s.children&&s.children.length>0&&(Ue(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),Fb(s.children,e,h,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:eA(c,s.index),routesMeta:h})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))r(s,o);else for(let l of Ub(s.path))r(s,o,l)}),e}function Ub(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),s=n.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let o=Ub(i.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),r&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function KC(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:tA(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const GC=/^:[\w-]+$/,QC=3,YC=2,XC=1,JC=10,ZC=-2,k0=t=>t==="*";function eA(t,e){let n=t.split("/"),i=n.length;return n.some(k0)&&(i+=ZC),e&&(i+=YC),n.filter(r=>!k0(r)).reduce((r,s)=>r+(GC.test(s)?QC:s===""?XC:JC),i)}function tA(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function nA(t,e,n){let{routesMeta:i}=t,r={},s="/",o=[];for(let a=0;a<i.length;++a){let l=i[a],c=a===i.length-1,h=s==="/"?e:e.slice(s.length)||"/",d=Xp({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},h),p=l.route;if(!d)return null;Object.assign(r,d.params),o.push({params:r,pathname:hr([s,d.pathname]),pathnameBase:lA(hr([s,d.pathnameBase])),route:p}),d.pathnameBase!=="/"&&(s=hr([s,d.pathnameBase]))}return o}function Xp(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=iA(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let s=r[0],o=s.replace(/(.)\/+$/,"$1"),a=r.slice(1);return{params:i.reduce((c,h,d)=>{let{paramName:p,isOptional:g}=h;if(p==="*"){let x=a[d]||"";o=s.slice(0,s.length-x.length).replace(/(.)\/+$/,"$1")}const y=a[d];return g&&!y?c[p]=void 0:c[p]=(y||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function iA(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Vb(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(i.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function rA(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Vb(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function yo(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function sA(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?Ro(t):t;return{pathname:n?n.startsWith("/")?n:oA(n,e):e,search:cA(i),hash:uA(r)}}function oA(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function Cf(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function aA(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Ug(t,e){let n=aA(t);return e?n.map((i,r)=>r===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function zg(t,e,n,i){i===void 0&&(i=!1);let r;typeof t=="string"?r=Ro(t):(r=hl({},t),Ue(!r.pathname||!r.pathname.includes("?"),Cf("?","pathname","search",r)),Ue(!r.pathname||!r.pathname.includes("#"),Cf("#","pathname","hash",r)),Ue(!r.search||!r.search.includes("#"),Cf("#","search","hash",r)));let s=t===""||r.pathname==="",o=s?"/":r.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!i&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),d-=1;r.pathname=p.join("/")}a=d>=0?e[d]:"/"}let l=sA(r,a),c=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||h)&&(l.pathname+="/"),l}const hr=t=>t.join("/").replace(/\/\/+/g,"/"),lA=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),cA=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,uA=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function hA(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const zb=["post","put","patch","delete"];new Set(zb);const dA=["get",...zb];new Set(dA);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function dl(){return dl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},dl.apply(this,arguments)}const Xh=O.createContext(null),Bb=O.createContext(null),Ai=O.createContext(null),Jh=O.createContext(null),Ri=O.createContext({outlet:null,matches:[],isDataRoute:!1}),$b=O.createContext(null);function fA(t,e){let{relative:n}=e===void 0?{}:e;No()||Ue(!1);let{basename:i,navigator:r}=O.useContext(Ai),{hash:s,pathname:o,search:a}=Zh(t,{relative:n}),l=o;return i!=="/"&&(l=o==="/"?i:hr([i,o])),r.createHref({pathname:l,search:a,hash:s})}function No(){return O.useContext(Jh)!=null}function Do(){return No()||Ue(!1),O.useContext(Jh).location}function Hb(t){O.useContext(Ai).static||O.useLayoutEffect(t)}function Ni(){let{isDataRoute:t}=O.useContext(Ri);return t?kA():pA()}function pA(){No()||Ue(!1);let t=O.useContext(Xh),{basename:e,future:n,navigator:i}=O.useContext(Ai),{matches:r}=O.useContext(Ri),{pathname:s}=Do(),o=JSON.stringify(Ug(r,n.v7_relativeSplatPath)),a=O.useRef(!1);return Hb(()=>{a.current=!0}),O.useCallback(function(c,h){if(h===void 0&&(h={}),!a.current)return;if(typeof c=="number"){i.go(c);return}let d=zg(c,JSON.parse(o),s,h.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:hr([e,d.pathname])),(h.replace?i.replace:i.push)(d,h.state,h)},[e,i,o,s,t])}function mA(){let{matches:t}=O.useContext(Ri),e=t[t.length-1];return e?e.params:{}}function Zh(t,e){let{relative:n}=e===void 0?{}:e,{future:i}=O.useContext(Ai),{matches:r}=O.useContext(Ri),{pathname:s}=Do(),o=JSON.stringify(Ug(r,i.v7_relativeSplatPath));return O.useMemo(()=>zg(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function gA(t,e){return yA(t,e)}function yA(t,e,n,i){No()||Ue(!1);let{navigator:r,static:s}=O.useContext(Ai),{matches:o}=O.useContext(Ri),a=o[o.length-1],l=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let h=Do(),d;if(e){var p;let v=typeof e=="string"?Ro(e):e;c==="/"||(p=v.pathname)!=null&&p.startsWith(c)||Ue(!1),d=v}else d=h;let g=d.pathname||"/",y=g;if(c!=="/"){let v=c.replace(/^\//,"").split("/");y="/"+g.replace(/^\//,"").split("/").slice(v.length).join("/")}let x=WC(t,{pathname:y}),b=EA(x&&x.map(v=>Object.assign({},v,{params:Object.assign({},l,v.params),pathname:hr([c,r.encodeLocation?r.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?c:hr([c,r.encodeLocation?r.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),o,n,i);return e&&b?O.createElement(Jh.Provider,{value:{location:dl({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Xi.Pop}},b):b}function _A(){let t=IA(),e=hA(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},e),n?O.createElement("pre",{style:r},n):null,null)}const vA=O.createElement(_A,null);class wA extends O.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?O.createElement(Ri.Provider,{value:this.props.routeContext},O.createElement($b.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function xA(t){let{routeContext:e,match:n,children:i}=t,r=O.useContext(Xh);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),O.createElement(Ri.Provider,{value:e},i)}function EA(t,e,n,i){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),i===void 0&&(i=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=i)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(r=n)==null?void 0:r.errors;if(a!=null){let h=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);h>=0||Ue(!1),o=o.slice(0,Math.min(o.length,h+1))}let l=!1,c=-1;if(n&&i&&i.v7_partialHydration)for(let h=0;h<o.length;h++){let d=o[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=h),d.route.id){let{loaderData:p,errors:g}=n,y=d.route.loader&&p[d.route.id]===void 0&&(!g||g[d.route.id]===void 0);if(d.route.lazy||y){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((h,d,p)=>{let g,y=!1,x=null,b=null;n&&(g=a&&d.route.id?a[d.route.id]:void 0,x=d.route.errorElement||vA,l&&(c<0&&p===0?(PA("route-fallback"),y=!0,b=null):c===p&&(y=!0,b=d.route.hydrateFallbackElement||null)));let v=e.concat(o.slice(0,p+1)),w=()=>{let T;return g?T=x:y?T=b:d.route.Component?T=O.createElement(d.route.Component,null):d.route.element?T=d.route.element:T=h,O.createElement(xA,{match:d,routeContext:{outlet:h,matches:v,isDataRoute:n!=null},children:T})};return n&&(d.route.ErrorBoundary||d.route.errorElement||p===0)?O.createElement(wA,{location:n.location,revalidation:n.revalidation,component:x,error:g,children:w(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):w()},null)}var Wb=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Wb||{}),qb=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(qb||{});function bA(t){let e=O.useContext(Xh);return e||Ue(!1),e}function TA(t){let e=O.useContext(Bb);return e||Ue(!1),e}function SA(t){let e=O.useContext(Ri);return e||Ue(!1),e}function Kb(t){let e=SA(),n=e.matches[e.matches.length-1];return n.route.id||Ue(!1),n.route.id}function IA(){var t;let e=O.useContext($b),n=TA(),i=Kb();return e!==void 0?e:(t=n.errors)==null?void 0:t[i]}function kA(){let{router:t}=bA(Wb.UseNavigateStable),e=Kb(qb.UseNavigateStable),n=O.useRef(!1);return Hb(()=>{n.current=!0}),O.useCallback(function(r,s){s===void 0&&(s={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,dl({fromRouteId:e},s)))},[t,e])}const P0={};function PA(t,e,n){P0[t]||(P0[t]=!0)}function CA(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function AA(t){let{to:e,replace:n,state:i,relative:r}=t;No()||Ue(!1);let{future:s,static:o}=O.useContext(Ai),{matches:a}=O.useContext(Ri),{pathname:l}=Do(),c=Ni(),h=zg(e,Ug(a,s.v7_relativeSplatPath),l,r==="path"),d=JSON.stringify(h);return O.useEffect(()=>c(JSON.parse(d),{replace:n,state:i,relative:r}),[c,d,r,n,i]),null}function hn(t){Ue(!1)}function RA(t){let{basename:e="/",children:n=null,location:i,navigationType:r=Xi.Pop,navigator:s,static:o=!1,future:a}=t;No()&&Ue(!1);let l=e.replace(/^\/*/,"/"),c=O.useMemo(()=>({basename:l,navigator:s,static:o,future:dl({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof i=="string"&&(i=Ro(i));let{pathname:h="/",search:d="",hash:p="",state:g=null,key:y="default"}=i,x=O.useMemo(()=>{let b=yo(h,l);return b==null?null:{location:{pathname:b,search:d,hash:p,state:g,key:y},navigationType:r}},[l,h,d,p,g,y,r]);return x==null?null:O.createElement(Ai.Provider,{value:c},O.createElement(Jh.Provider,{children:n,value:x}))}function NA(t){let{children:e,location:n}=t;return gA(Jp(e),n)}new Promise(()=>{});function Jp(t,e){e===void 0&&(e=[]);let n=[];return O.Children.forEach(t,(i,r)=>{if(!O.isValidElement(i))return;let s=[...e,r];if(i.type===O.Fragment){n.push.apply(n,Jp(i.props.children,s));return}i.type!==hn&&Ue(!1),!i.props.index||!i.props.children||Ue(!1);let o={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(o.children=Jp(i.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ah(){return ah=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},ah.apply(this,arguments)}function Gb(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function DA(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function MA(t,e){return t.button===0&&(!e||e==="_self")&&!DA(t)}const OA=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],LA=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],jA="6";try{window.__reactRouterVersion=jA}catch{}const VA=O.createContext({isTransitioning:!1}),FA="startTransition",C0=Ak[FA];function UA(t){let{basename:e,children:n,future:i,window:r}=t,s=O.useRef();s.current==null&&(s.current=BC({window:r,v5Compat:!0}));let o=s.current,[a,l]=O.useState({action:o.action,location:o.location}),{v7_startTransition:c}=i||{},h=O.useCallback(d=>{c&&C0?C0(()=>l(d)):l(d)},[l,c]);return O.useLayoutEffect(()=>o.listen(h),[o,h]),O.useEffect(()=>CA(i),[i]),O.createElement(RA,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:i})}const zA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",BA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Sn=O.forwardRef(function(e,n){let{onClick:i,relative:r,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:h,viewTransition:d}=e,p=Gb(e,OA),{basename:g}=O.useContext(Ai),y,x=!1;if(typeof c=="string"&&BA.test(c)&&(y=c,zA))try{let T=new URL(window.location.href),C=c.startsWith("//")?new URL(T.protocol+c):new URL(c),N=yo(C.pathname,g);C.origin===T.origin&&N!=null?c=N+C.search+C.hash:x=!0}catch{}let b=fA(c,{relative:r}),v=HA(c,{replace:o,state:a,target:l,preventScrollReset:h,relative:r,viewTransition:d});function w(T){i&&i(T),T.defaultPrevented||v(T)}return O.createElement("a",ah({},p,{href:y||b,onClick:x||s?i:w,ref:n,target:l}))}),Ds=O.forwardRef(function(e,n){let{"aria-current":i="page",caseSensitive:r=!1,className:s="",end:o=!1,style:a,to:l,viewTransition:c,children:h}=e,d=Gb(e,LA),p=Zh(l,{relative:d.relative}),g=Do(),y=O.useContext(Bb),{navigator:x,basename:b}=O.useContext(Ai),v=y!=null&&WA(p)&&c===!0,w=x.encodeLocation?x.encodeLocation(p).pathname:p.pathname,T=g.pathname,C=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;r||(T=T.toLowerCase(),C=C?C.toLowerCase():null,w=w.toLowerCase()),C&&b&&(C=yo(C,b)||C);const N=w!=="/"&&w.endsWith("/")?w.length-1:w.length;let M=T===w||!o&&T.startsWith(w)&&T.charAt(N)==="/",S=C!=null&&(C===w||!o&&C.startsWith(w)&&C.charAt(w.length)==="/"),E={isActive:M,isPending:S,isTransitioning:v},P=M?i:void 0,k;typeof s=="function"?k=s(E):k=[s,M?"active":null,S?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let A=typeof a=="function"?a(E):a;return O.createElement(Sn,ah({},d,{"aria-current":P,className:k,ref:n,style:A,to:l,viewTransition:c}),typeof h=="function"?h(E):h)});var Zp;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Zp||(Zp={}));var A0;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(A0||(A0={}));function $A(t){let e=O.useContext(Xh);return e||Ue(!1),e}function HA(t,e){let{target:n,replace:i,state:r,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=Ni(),c=Do(),h=Zh(t,{relative:o});return O.useCallback(d=>{if(MA(d,n)){d.preventDefault();let p=i!==void 0?i:oh(c)===oh(h);l(t,{replace:p,state:r,preventScrollReset:s,relative:o,viewTransition:a})}},[c,l,h,i,r,n,t,s,o,a])}function WA(t,e){e===void 0&&(e={});let n=O.useContext(VA);n==null&&Ue(!1);let{basename:i}=$A(Zp.useViewTransitionState),r=Zh(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=yo(n.currentLocation.pathname,i)||n.currentLocation.pathname,o=yo(n.nextLocation.pathname,i)||n.nextLocation.pathname;return Xp(r.pathname,o)!=null||Xp(r.pathname,s)!=null}var R0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qb=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},qA=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=t[n++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=t[n++],o=t[n++],a=t[n++],l=((r&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[i++]=String.fromCharCode(55296+(l>>10)),e[i++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Yb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const s=t[r],o=r+1<t.length,a=o?t[r+1]:0,l=r+2<t.length,c=l?t[r+2]:0,h=s>>2,d=(s&3)<<4|a>>4;let p=(a&15)<<2|c>>6,g=c&63;l||(g=64,o||(p=64)),i.push(n[h],n[d],n[p],n[g])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Qb(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):qA(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const s=n[t.charAt(r++)],a=r<t.length?n[t.charAt(r)]:0;++r;const c=r<t.length?n[t.charAt(r)]:64;++r;const d=r<t.length?n[t.charAt(r)]:64;if(++r,s==null||a==null||c==null||d==null)throw new KA;const p=s<<2|a>>4;if(i.push(p),c!==64){const g=a<<4&240|c>>2;if(i.push(g),d!==64){const y=c<<6&192|d;i.push(y)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class KA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const GA=function(t){const e=Qb(t);return Yb.encodeByteArray(e,!0)},lh=function(t){return GA(t).replace(/\./g,"")},Xb=function(t){try{return Yb.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YA=()=>QA().__FIREBASE_DEFAULTS__,XA=()=>{if(typeof process>"u"||typeof R0>"u")return;const t=R0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},JA=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Xb(t[1]);return e&&JSON.parse(e)},ed=()=>{try{return YA()||XA()||JA()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Jb=t=>{var e,n;return(n=(e=ed())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Zb=t=>{const e=Jb(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},eT=()=>{var t;return(t=ed())===null||t===void 0?void 0:t.config},tT=t=>{var e;return(e=ed())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nT(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[lh(JSON.stringify(n)),lh(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function eR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Rt())}function tR(){var t;const e=(t=ed())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function nR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function iR(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function rR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function sR(){const t=Rt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function oR(){return!tR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function aR(){try{return typeof indexedDB=="object"}catch{return!1}}function lR(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;e(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cR="FirebaseError";class Yn extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=cR,Object.setPrototypeOf(this,Yn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Vl.prototype.create)}}class Vl{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,s=this.errors[e],o=s?uR(s,i):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new Yn(r,a,i)}}function uR(t,e){return t.replace(hR,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const hR=/\{\$([^}]+)}/g;function dR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ch(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const s=t[r],o=e[r];if(N0(s)&&N0(o)){if(!ch(s,o))return!1}else if(s!==o)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function N0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fl(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function ga(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,s]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(s)}}),e}function ya(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function fR(t,e){const n=new pR(t,e);return n.subscribe.bind(n)}class pR{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");mR(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=Af),r.error===void 0&&(r.error=Af),r.complete===void 0&&(r.complete=Af);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function mR(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Af(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ee(t){return t&&t._delegate?t._delegate:t}class wr{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $r="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gR{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new ZA;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(_R(e))try{this.getOrInitializeService({instanceIdentifier:$r})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=$r){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=$r){return this.instances.has(e)}getOptions(e=$r){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);i===a&&o.resolve(r)}return r}onInit(e,n){var i;const r=this.normalizeInstanceIdentifier(n),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:yR(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=$r){return this.component?this.component.multipleInstances?e:$r:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function yR(t){return t===$r?void 0:t}function _R(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new gR(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var he;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(he||(he={}));const wR={debug:he.DEBUG,verbose:he.VERBOSE,info:he.INFO,warn:he.WARN,error:he.ERROR,silent:he.SILENT},xR=he.INFO,ER={[he.DEBUG]:"log",[he.VERBOSE]:"log",[he.INFO]:"info",[he.WARN]:"warn",[he.ERROR]:"error"},bR=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=ER[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Bg{constructor(e){this.name=e,this._logLevel=xR,this._logHandler=bR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in he))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?wR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,he.DEBUG,...e),this._logHandler(this,he.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,he.VERBOSE,...e),this._logHandler(this,he.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,he.INFO,...e),this._logHandler(this,he.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,he.WARN,...e),this._logHandler(this,he.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,he.ERROR,...e),this._logHandler(this,he.ERROR,...e)}}const TR=(t,e)=>e.some(n=>t instanceof n);let D0,M0;function SR(){return D0||(D0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function IR(){return M0||(M0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const iT=new WeakMap,em=new WeakMap,rT=new WeakMap,Rf=new WeakMap,$g=new WeakMap;function kR(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(dr(t.result)),r()},o=()=>{i(t.error),r()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&iT.set(n,t)}).catch(()=>{}),$g.set(e,t),e}function PR(t){if(em.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),r()},o=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});em.set(t,e)}let tm={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return em.get(t);if(e==="objectStoreNames")return t.objectStoreNames||rT.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return dr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function CR(t){tm=t(tm)}function AR(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Nf(this),e,...n);return rT.set(i,e.sort?e.sort():[e]),dr(i)}:IR().includes(t)?function(...e){return t.apply(Nf(this),e),dr(iT.get(this))}:function(...e){return dr(t.apply(Nf(this),e))}}function RR(t){return typeof t=="function"?AR(t):(t instanceof IDBTransaction&&PR(t),TR(t,SR())?new Proxy(t,tm):t)}function dr(t){if(t instanceof IDBRequest)return kR(t);if(Rf.has(t))return Rf.get(t);const e=RR(t);return e!==t&&(Rf.set(t,e),$g.set(e,t)),e}const Nf=t=>$g.get(t);function NR(t,e,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(t,e),a=dr(o);return i&&o.addEventListener("upgradeneeded",l=>{i(dr(o.result),l.oldVersion,l.newVersion,dr(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),r&&l.addEventListener("versionchange",c=>r(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const DR=["get","getKey","getAll","getAllKeys","count"],MR=["put","add","delete","clear"],Df=new Map;function O0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Df.get(e))return Df.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=MR.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||DR.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,r?"readwrite":"readonly");let c=l.store;return i&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),r&&l.done]))[0]};return Df.set(e,s),s}CR(t=>({...t,get:(e,n,i)=>O0(e,n)||t.get(e,n,i),has:(e,n)=>!!O0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(LR(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function LR(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const nm="@firebase/app",L0="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bi=new Bg("@firebase/app"),jR="@firebase/app-compat",VR="@firebase/analytics-compat",FR="@firebase/analytics",UR="@firebase/app-check-compat",zR="@firebase/app-check",BR="@firebase/auth",$R="@firebase/auth-compat",HR="@firebase/database",WR="@firebase/data-connect",qR="@firebase/database-compat",KR="@firebase/functions",GR="@firebase/functions-compat",QR="@firebase/installations",YR="@firebase/installations-compat",XR="@firebase/messaging",JR="@firebase/messaging-compat",ZR="@firebase/performance",eN="@firebase/performance-compat",tN="@firebase/remote-config",nN="@firebase/remote-config-compat",iN="@firebase/storage",rN="@firebase/storage-compat",sN="@firebase/firestore",oN="@firebase/vertexai-preview",aN="@firebase/firestore-compat",lN="firebase",cN="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const im="[DEFAULT]",uN={[nm]:"fire-core",[jR]:"fire-core-compat",[FR]:"fire-analytics",[VR]:"fire-analytics-compat",[zR]:"fire-app-check",[UR]:"fire-app-check-compat",[BR]:"fire-auth",[$R]:"fire-auth-compat",[HR]:"fire-rtdb",[WR]:"fire-data-connect",[qR]:"fire-rtdb-compat",[KR]:"fire-fn",[GR]:"fire-fn-compat",[QR]:"fire-iid",[YR]:"fire-iid-compat",[XR]:"fire-fcm",[JR]:"fire-fcm-compat",[ZR]:"fire-perf",[eN]:"fire-perf-compat",[tN]:"fire-rc",[nN]:"fire-rc-compat",[iN]:"fire-gcs",[rN]:"fire-gcs-compat",[sN]:"fire-fst",[aN]:"fire-fst-compat",[oN]:"fire-vertex","fire-js":"fire-js",[lN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uh=new Map,hN=new Map,rm=new Map;function j0(t,e){try{t.container.addComponent(e)}catch(n){bi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function cs(t){const e=t.name;if(rm.has(e))return bi.debug(`There were multiple attempts to register component ${e}.`),!1;rm.set(e,t);for(const n of uh.values())j0(n,t);for(const n of hN.values())j0(n,t);return!0}function td(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Fn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},fr=new Vl("app","Firebase",dN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fN{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new wr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw fr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Es=cN;function sT(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:im,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw fr.create("bad-app-name",{appName:String(r)});if(n||(n=eT()),!n)throw fr.create("no-options");const s=uh.get(r);if(s){if(ch(n,s.options)&&ch(i,s.config))return s;throw fr.create("duplicate-app",{appName:r})}const o=new vR(r);for(const l of rm.values())o.addComponent(l);const a=new fN(n,i,o);return uh.set(r,a),a}function Hg(t=im){const e=uh.get(t);if(!e&&t===im&&eT())return sT();if(!e)throw fr.create("no-app",{appName:t});return e}function $n(t,e,n){var i;let r=(i=uN[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),bi.warn(a.join(" "));return}cs(new wr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pN="firebase-heartbeat-database",mN=1,fl="firebase-heartbeat-store";let Mf=null;function oT(){return Mf||(Mf=NR(pN,mN,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(fl)}catch(n){console.warn(n)}}}}).catch(t=>{throw fr.create("idb-open",{originalErrorMessage:t.message})})),Mf}async function gN(t){try{const n=(await oT()).transaction(fl),i=await n.objectStore(fl).get(aT(t));return await n.done,i}catch(e){if(e instanceof Yn)bi.warn(e.message);else{const n=fr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});bi.warn(n.message)}}}async function V0(t,e){try{const i=(await oT()).transaction(fl,"readwrite");await i.objectStore(fl).put(e,aT(t)),await i.done}catch(n){if(n instanceof Yn)bi.warn(n.message);else{const i=fr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});bi.warn(i.message)}}}function aT(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yN=1024,_N=30*24*60*60*1e3;class vN{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new xN(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=F0();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=_N}),this._storage.overwrite(this._heartbeatsCache))}catch(i){bi.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=F0(),{heartbeatsToSend:i,unsentEntries:r}=wN(this._heartbeatsCache.heartbeats),s=lh(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return bi.warn(n),""}}}function F0(){return new Date().toISOString().substring(0,10)}function wN(t,e=yN){const n=[];let i=t.slice();for(const r of t){const s=n.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),U0(n)>e){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),U0(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class xN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return aR()?lR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await gN(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return V0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return V0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function U0(t){return lh(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EN(t){cs(new wr("platform-logger",e=>new OR(e),"PRIVATE")),cs(new wr("heartbeat",e=>new vN(e),"PRIVATE")),$n(nm,L0,t),$n(nm,L0,"esm2017"),$n("fire-js","")}EN("");function Wg(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function lT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const bN=lT,cT=new Vl("auth","Firebase",lT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hh=new Bg("@firebase/auth");function TN(t,...e){hh.logLevel<=he.WARN&&hh.warn(`Auth (${Es}): ${t}`,...e)}function mu(t,...e){hh.logLevel<=he.ERROR&&hh.error(`Auth (${Es}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rn(t,...e){throw qg(t,...e)}function Hn(t,...e){return qg(t,...e)}function uT(t,e,n){const i=Object.assign(Object.assign({},bN()),{[e]:n});return new Vl("auth","Firebase",i).create(e,{appName:t.name})}function yi(t){return uT(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function qg(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return cT.create(t,...e)}function Z(t,e,...n){if(!t)throw qg(e,...n)}function ci(t){const e="INTERNAL ASSERTION FAILED: "+t;throw mu(e),new Error(e)}function Ti(t,e){t||ci(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sm(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function SN(){return z0()==="http:"||z0()==="https:"}function z0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(SN()||iR()||"connection"in navigator)?navigator.onLine:!0}function kN(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ti(n>e,"Short delay should be less than long delay!"),this.isMobile=eR()||rR()}get(){return IN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kg(t,e){Ti(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ci("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ci("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ci("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CN=new Ul(3e4,6e4);function Cr(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Xn(t,e,n,i,r={}){return dT(t,r,async()=>{let s={},o={};i&&(e==="GET"?o=i:s={body:JSON.stringify(i)});const a=Fl(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},s);return nR()||(c.referrerPolicy="no-referrer"),hT.fetch()(fT(t,t.config.apiHost,n,a),c)})}async function dT(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},PN),e);try{const r=new RN(t),s=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Mc(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Mc(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Mc(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Mc(t,"user-disabled",o);const h=i[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw uT(t,h,c);Rn(t,h)}}catch(r){if(r instanceof Yn)throw r;Rn(t,"network-request-failed",{message:String(r)})}}async function zl(t,e,n,i,r={}){const s=await Xn(t,e,n,i,r);return"mfaPendingCredential"in s&&Rn(t,"multi-factor-auth-required",{_serverResponse:s}),s}function fT(t,e,n,i){const r=`${e}${n}?${i}`;return t.config.emulator?Kg(t.config,r):`${t.config.apiScheme}://${r}`}function AN(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class RN{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Hn(this.auth,"network-request-failed")),CN.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Mc(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Hn(t,e,i);return r.customData._tokenResponse=n,r}function B0(t){return t!==void 0&&t.enterprise!==void 0}class NN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return AN(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function DN(t,e){return Xn(t,"GET","/v2/recaptchaConfig",Cr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MN(t,e){return Xn(t,"POST","/v1/accounts:delete",e)}async function pT(t,e){return Xn(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ja(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function ON(t,e=!1){const n=Ee(t),i=await n.getIdToken(e),r=Gg(i);Z(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:ja(Of(r.auth_time)),issuedAtTime:ja(Of(r.iat)),expirationTime:ja(Of(r.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Of(t){return Number(t)*1e3}function Gg(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return mu("JWT malformed, contained fewer than 3 sections"),null;try{const r=Xb(n);return r?JSON.parse(r):(mu("Failed to decode base64 JWT payload"),null)}catch(r){return mu("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function $0(t){const e=Gg(t);return Z(e,"internal-error"),Z(typeof e.exp<"u","internal-error"),Z(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function us(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Yn&&LN(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function LN({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ja(this.lastLoginAt),this.creationTime=ja(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dh(t){var e;const n=t.auth,i=await t.getIdToken(),r=await us(t,pT(n,{idToken:i}));Z(r==null?void 0:r.users.length,n,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?mT(s.providerUserInfo):[],a=FN(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),h=l?c:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new om(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,d)}async function VN(t){const e=Ee(t);await dh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function FN(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function mT(t){return t.map(e=>{var{providerId:n}=e,i=Wg(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UN(t,e){const n=await dT(t,{},async()=>{const i=Fl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=t.config,o=fT(t,r,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",hT.fetch()(o,{method:"POST",headers:a,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function zN(t,e){return Xn(t,"POST","/v2/accounts:revokeToken",Cr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Z(e.idToken,"internal-error"),Z(typeof e.idToken<"u","internal-error"),Z(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):$0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Z(e.length!==0,"internal-error");const n=$0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Z(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:s}=await UN(e,n);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:s}=n,o=new ro;return i&&(Z(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),r&&(Z(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),s&&(Z(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ro,this.toJSON())}_performRefresh(){return ci("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ji(t,e){Z(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ui{constructor(e){var{uid:n,auth:i,stsTokenManager:r}=e,s=Wg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new jN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new om(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await us(this,this.stsTokenManager.getToken(this.auth,e));return Z(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return ON(this,e)}reload(){return VN(this)}_assign(e){this!==e&&(Z(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ui(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Z(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await dh(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Fn(this.auth.app))return Promise.reject(yi(this.auth));const e=await this.getIdToken();return await us(this,MN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,r,s,o,a,l,c,h;const d=(i=n.displayName)!==null&&i!==void 0?i:void 0,p=(r=n.email)!==null&&r!==void 0?r:void 0,g=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,y=(o=n.photoURL)!==null&&o!==void 0?o:void 0,x=(a=n.tenantId)!==null&&a!==void 0?a:void 0,b=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,v=(c=n.createdAt)!==null&&c!==void 0?c:void 0,w=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:T,emailVerified:C,isAnonymous:N,providerData:M,stsTokenManager:S}=n;Z(T&&S,e,"internal-error");const E=ro.fromJSON(this.name,S);Z(typeof T=="string",e,"internal-error"),ji(d,e.name),ji(p,e.name),Z(typeof C=="boolean",e,"internal-error"),Z(typeof N=="boolean",e,"internal-error"),ji(g,e.name),ji(y,e.name),ji(x,e.name),ji(b,e.name),ji(v,e.name),ji(w,e.name);const P=new ui({uid:T,auth:e,email:p,emailVerified:C,displayName:d,isAnonymous:N,photoURL:y,phoneNumber:g,tenantId:x,stsTokenManager:E,createdAt:v,lastLoginAt:w});return M&&Array.isArray(M)&&(P.providerData=M.map(k=>Object.assign({},k))),b&&(P._redirectEventId=b),P}static async _fromIdTokenResponse(e,n,i=!1){const r=new ro;r.updateFromServerResponse(n);const s=new ui({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await dh(s),s}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];Z(r.localId!==void 0,"internal-error");const s=r.providerUserInfo!==void 0?mT(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!(s!=null&&s.length),a=new ro;a.updateFromIdToken(i);const l=new ui({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new om(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H0=new Map;function hi(t){Ti(t instanceof Function,"Expected a class definition");let e=H0.get(t);return e?(Ti(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,H0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}gT.type="NONE";const W0=gT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gu(t,e,n){return`firebase:${t}:${e}:${n}`}class so{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=gu(this.userKey,r.apiKey,s),this.fullPersistenceKey=gu("persistence",r.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ui._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new so(hi(W0),e,i);const r=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=r[0]||hi(W0);const o=gu(i,e.config.apiKey,e.name);let a=null;for(const c of n)try{const h=await c._get(o);if(h){const d=ui._fromJSON(e,h);c!==s&&(a=d),s=c;break}}catch{}const l=r.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new so(s,e,i):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new so(s,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(wT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(yT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ET(e))return"Blackberry";if(bT(e))return"Webos";if(_T(e))return"Safari";if((e.includes("chrome/")||vT(e))&&!e.includes("edge/"))return"Chrome";if(xT(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function yT(t=Rt()){return/firefox\//i.test(t)}function _T(t=Rt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function vT(t=Rt()){return/crios\//i.test(t)}function wT(t=Rt()){return/iemobile/i.test(t)}function xT(t=Rt()){return/android/i.test(t)}function ET(t=Rt()){return/blackberry/i.test(t)}function bT(t=Rt()){return/webos/i.test(t)}function Qg(t=Rt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function BN(t=Rt()){var e;return Qg(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function $N(){return sR()&&document.documentMode===10}function TT(t=Rt()){return Qg(t)||xT(t)||bT(t)||ET(t)||/windows phone/i.test(t)||wT(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ST(t,e=[]){let n;switch(t){case"Browser":n=q0(Rt());break;case"Worker":n=`${q0(Rt())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Es}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WN(t,e={}){return Xn(t,"GET","/v2/passwordPolicy",Cr(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qN=6;class KN{constructor(e){var n,i,r,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:qN,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,r,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(i=l.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(r=l.containsLowercaseLetter)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GN{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new K0(this),this.idTokenSubscription=new K0(this),this.beforeStateQueue=new HN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=cT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=hi(n)),this._initializationPromise=this.queue(async()=>{var i,r;if(!this._deleted&&(this.persistenceManager=await so.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await pT(this,{idToken:e}),i=await ui._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Fn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Z(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await dh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=kN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Fn(this.app))return Promise.reject(yi(this));const n=e?Ee(e):null;return n&&Z(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Z(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Fn(this.app)?Promise.reject(yi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Fn(this.app)?Promise.reject(yi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(hi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await WN(this),n=new KN(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Vl("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await zN(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&hi(e)||this._popupRedirectResolver;Z(n,this,"argument-error"),this.redirectPersistenceManager=await so.create(this,[hi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Z(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,i,r);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Z(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ST(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&TN(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function bs(t){return Ee(t)}class K0{constructor(e){this.auth=e,this.observer=null,this.addObserver=fR(n=>this.observer=n)}get next(){return Z(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function QN(t){nd=t}function IT(t){return nd.loadJS(t)}function YN(){return nd.recaptchaEnterpriseScript}function XN(){return nd.gapiScript}function JN(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const ZN="recaptcha-enterprise",e4="NO_RECAPTCHA";class t4{constructor(e){this.type=ZN,this.auth=bs(e)}async verify(e="verify",n=!1){async function i(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{DN(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new NN(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function r(s,o,a){const l=window.grecaptcha;B0(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(e4)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{i(this.auth).then(a=>{if(!n&&B0(window.grecaptcha))r(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=YN();l.length!==0&&(l+=a),IT(l).then(()=>{r(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function G0(t,e,n,i=!1){const r=new t4(t);let s;try{s=await r.verify(n)}catch{s=await r.verify(n,!0)}const o=Object.assign({},e);return i?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function am(t,e,n,i){var r;if(!((r=t._getRecaptchaConfig())===null||r===void 0)&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await G0(t,e,n,n==="getOobCode");return i(t,s)}else return i(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await G0(t,e,n,n==="getOobCode");return i(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n4(t,e){const n=td(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),s=n.getOptions();if(ch(s,e??{}))return r;Rn(r,"already-initialized")}return n.initialize({options:e})}function i4(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(hi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function r4(t,e,n){const i=bs(t);Z(i._canInitEmulator,i,"emulator-config-failed"),Z(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,s=kT(e),{host:o,port:a}=s4(e),l=a===null?"":`:${a}`;i.config.emulator={url:`${s}//${o}${l}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),o4()}function kT(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function s4(t){const e=kT(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const s=r[1];return{host:s,port:Q0(i.substr(s.length+1))}}else{const[s,o]=i.split(":");return{host:s,port:Q0(o)}}}function Q0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function o4(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ci("not implemented")}_getIdTokenResponse(e){return ci("not implemented")}_linkToIdToken(e,n){return ci("not implemented")}_getReauthenticationResolver(e){return ci("not implemented")}}async function a4(t,e){return Xn(t,"POST","/v1/accounts:update",e)}async function l4(t,e){return Xn(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c4(t,e){return zl(t,"POST","/v1/accounts:signInWithPassword",Cr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u4(t,e){return zl(t,"POST","/v1/accounts:signInWithEmailLink",Cr(t,e))}async function h4(t,e){return zl(t,"POST","/v1/accounts:signInWithEmailLink",Cr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl extends Yg{constructor(e,n,i,r=null){super("password",i),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new pl(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new pl(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return am(e,n,"signInWithPassword",c4);case"emailLink":return u4(e,{email:this._email,oobCode:this._password});default:Rn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return am(e,i,"signUpPassword",l4);case"emailLink":return h4(e,{idToken:n,email:this._email,oobCode:this._password});default:Rn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oo(t,e){return zl(t,"POST","/v1/accounts:signInWithIdp",Cr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d4="http://localhost";class hs extends Yg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new hs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Rn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=n,s=Wg(n,["providerId","signInMethod"]);if(!i||!r)return null;const o=new hs(i,r);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return oo(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,oo(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,oo(e,n)}buildRequest(){const e={requestUri:d4,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Fl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f4(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function p4(t){const e=ga(ya(t)).link,n=e?ga(ya(e)).deep_link_id:null,i=ga(ya(t)).deep_link_id;return(i?ga(ya(i)).link:null)||i||n||e||t}class Xg{constructor(e){var n,i,r,s,o,a;const l=ga(ya(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,h=(i=l.oobCode)!==null&&i!==void 0?i:null,d=f4((r=l.mode)!==null&&r!==void 0?r:null);Z(c&&h&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=h,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=p4(e);try{return new Xg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(){this.providerId=Ts.PROVIDER_ID}static credential(e,n){return pl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=Xg.parseLink(n);return Z(i,"argument-error"),pl._fromEmailAndCode(e,i.code,i.tenantId)}}Ts.PROVIDER_ID="password";Ts.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ts.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl extends PT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi extends Bl{constructor(){super("facebook.com")}static credential(e){return hs._fromParams({providerId:Hi.PROVIDER_ID,signInMethod:Hi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Hi.credentialFromTaggedObject(e)}static credentialFromError(e){return Hi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Hi.credential(e.oauthAccessToken)}catch{return null}}}Hi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Hi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi extends Bl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return hs._fromParams({providerId:Wi.PROVIDER_ID,signInMethod:Wi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Wi.credentialFromTaggedObject(e)}static credentialFromError(e){return Wi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Wi.credential(n,i)}catch{return null}}}Wi.GOOGLE_SIGN_IN_METHOD="google.com";Wi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi extends Bl{constructor(){super("github.com")}static credential(e){return hs._fromParams({providerId:qi.PROVIDER_ID,signInMethod:qi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return qi.credentialFromTaggedObject(e)}static credentialFromError(e){return qi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return qi.credential(e.oauthAccessToken)}catch{return null}}}qi.GITHUB_SIGN_IN_METHOD="github.com";qi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki extends Bl{constructor(){super("twitter.com")}static credential(e,n){return hs._fromParams({providerId:Ki.PROVIDER_ID,signInMethod:Ki.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ki.credentialFromTaggedObject(e)}static credentialFromError(e){return Ki.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Ki.credential(n,i)}catch{return null}}}Ki.TWITTER_SIGN_IN_METHOD="twitter.com";Ki.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m4(t,e){return zl(t,"POST","/v1/accounts:signUp",Cr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const s=await ui._fromIdTokenResponse(e,i,r),o=Y0(i);return new ds({user:s,providerId:o,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=Y0(i);return new ds({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function Y0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh extends Yn{constructor(e,n,i,r){var s;super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,fh.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new fh(e,n,i,r)}}function CT(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?fh._fromErrorAndOperation(t,s,e,i):s})}async function g4(t,e,n=!1){const i=await us(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ds._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AT(t,e,n=!1){const{auth:i}=t;if(Fn(i.app))return Promise.reject(yi(i));const r="reauthenticate";try{const s=await us(t,CT(i,r,e,t),n);Z(s.idToken,i,"internal-error");const o=Gg(s.idToken);Z(o,i,"internal-error");const{sub:a}=o;return Z(t.uid===a,i,"user-mismatch"),ds._forOperation(t,r,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Rn(i,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RT(t,e,n=!1){if(Fn(t.app))return Promise.reject(yi(t));const i="signIn",r=await CT(t,i,e),s=await ds._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(s.user),s}async function y4(t,e){return RT(bs(t),e)}async function _4(t,e){return AT(Ee(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NT(t){const e=bs(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function v4(t,e,n){if(Fn(t.app))return Promise.reject(yi(t));const i=bs(t),o=await am(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",m4).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&NT(t),l}),a=await ds._fromIdTokenResponse(i,"signIn",o);return await i._updateCurrentUser(a.user),a}function w4(t,e,n){return Fn(t.app)?Promise.reject(yi(t)):y4(Ee(t),Ts.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&NT(t),i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x4(t,e){return Xn(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DT(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const i=Ee(t),s={idToken:await i.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await us(i,x4(i.auth,s));i.displayName=o.displayName||null,i.photoURL=o.photoUrl||null;const a=i.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=i.displayName,a.photoURL=i.photoURL),await i._updateTokensIfNecessary(o)}function E4(t,e){return b4(Ee(t),null,e)}async function b4(t,e,n){const{auth:i}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(s.password=n);const o=await us(t,a4(i,s));await t._updateTokensIfNecessary(o,!0)}function T4(t,e,n,i){return Ee(t).onIdTokenChanged(e,n,i)}function S4(t,e,n){return Ee(t).beforeAuthStateChanged(e,n)}function I4(t,e,n,i){return Ee(t).onAuthStateChanged(e,n,i)}function k4(t){return Ee(t).signOut()}async function P4(t){return Ee(t).delete()}const ph="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ph,"1"),this.storage.removeItem(ph),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C4=1e3,A4=10;class OT extends MT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=TT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const i=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(i);!n&&this.localCache[i]===o||this.notifyListeners(i,o)},s=this.storage.getItem(i);$N()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,A4):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},C4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}OT.type="LOCAL";const R4=OT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT extends MT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}LT.type="SESSION";const jT=LT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N4(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new id(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:s}=n.data,o=this.handlersMap[r];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await N4(a);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}id.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jg(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D4{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=Jg("",20);r.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},i);o={messageChannel:r,onMessage(d){const p=d;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(p.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wn(){return window}function M4(t){Wn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VT(){return typeof Wn().WorkerGlobalScope<"u"&&typeof Wn().importScripts=="function"}async function O4(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function L4(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function j4(){return VT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FT="firebaseLocalStorageDb",V4=1,mh="firebaseLocalStorage",UT="fbase_key";class $l{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function rd(t,e){return t.transaction([mh],e?"readwrite":"readonly").objectStore(mh)}function F4(){const t=indexedDB.deleteDatabase(FT);return new $l(t).toPromise()}function lm(){const t=indexedDB.open(FT,V4);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(mh,{keyPath:UT})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(mh)?e(i):(i.close(),await F4(),e(await lm()))})})}async function X0(t,e,n){const i=rd(t,!0).put({[UT]:e,value:n});return new $l(i).toPromise()}async function U4(t,e){const n=rd(t,!1).get(e),i=await new $l(n).toPromise();return i===void 0?null:i.value}function J0(t,e){const n=rd(t,!0).delete(e);return new $l(n).toPromise()}const z4=800,B4=3;class zT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await lm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>B4)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return VT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=id._getInstance(j4()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await O4(),!this.activeServiceWorker)return;this.sender=new D4(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||L4()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await lm();return await X0(e,ph,"1"),await J0(e,ph),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>X0(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>U4(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>J0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const s=rd(r,!1).getAll();return new $l(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:s}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),z4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}zT.type="LOCAL";const $4=zT;new Ul(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H4(t,e){return e?hi(e):(Z(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zg extends Yg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return oo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return oo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return oo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function W4(t){return RT(t.auth,new Zg(t),t.bypassAuthState)}function q4(t){const{auth:e,user:n}=t;return Z(n,e,"internal-error"),AT(n,new Zg(t),t.bypassAuthState)}async function K4(t){const{auth:e,user:n}=t;return Z(n,e,"internal-error"),g4(n,new Zg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT{constructor(e,n,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return W4;case"linkViaPopup":case"linkViaRedirect":return K4;case"reauthViaPopup":case"reauthViaRedirect":return q4;default:Rn(this.auth,"internal-error")}}resolve(e){Ti(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ti(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G4=new Ul(2e3,1e4);class Xs extends BT{constructor(e,n,i,r,s){super(e,n,r,s),this.provider=i,this.authWindow=null,this.pollId=null,Xs.currentPopupAction&&Xs.currentPopupAction.cancel(),Xs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Z(e,this.auth,"internal-error"),e}async onExecution(){Ti(this.filter.length===1,"Popup operations only handle one event");const e=Jg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Hn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Hn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Xs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Hn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,G4.get())};e()}}Xs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q4="pendingRedirect",yu=new Map;class Y4 extends BT{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=yu.get(this.auth._key());if(!e){try{const i=await X4(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}yu.set(this.auth._key(),e)}return this.bypassAuthState||yu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function X4(t,e){const n=eD(e),i=Z4(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function J4(t,e){yu.set(t._key(),e)}function Z4(t){return hi(t._redirectPersistence)}function eD(t){return gu(Q4,t.config.apiKey,t.name)}async function tD(t,e,n=!1){if(Fn(t.app))return Promise.reject(yi(t));const i=bs(t),r=H4(i,e),o=await new Y4(i,r,n).execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nD=10*60*1e3;class iD{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!rD(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!$T(e)){const r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(Hn(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=nD&&this.cachedEventUids.clear(),this.cachedEventUids.has(Z0(e))}saveEventToCache(e){this.cachedEventUids.add(Z0(e)),this.lastProcessedEventTime=Date.now()}}function Z0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function $T({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function rD(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return $T(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sD(t,e={}){return Xn(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,aD=/^https?/;async function lD(t){if(t.config.emulator)return;const{authorizedDomains:e}=await sD(t);for(const n of e)try{if(cD(n))return}catch{}Rn(t,"unauthorized-domain")}function cD(t){const e=sm(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===i}if(!aD.test(n))return!1;if(oD.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uD=new Ul(3e4,6e4);function e1(){const t=Wn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function hD(t){return new Promise((e,n)=>{var i,r,s;function o(){e1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{e1(),n(Hn(t,"network-request-failed"))},timeout:uD.get()})}if(!((r=(i=Wn().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((s=Wn().gapi)===null||s===void 0)&&s.load)o();else{const a=JN("iframefcb");return Wn()[a]=()=>{gapi.load?o():n(Hn(t,"network-request-failed"))},IT(`${XN()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw _u=null,e})}let _u=null;function dD(t){return _u=_u||hD(t),_u}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fD=new Ul(5e3,15e3),pD="__/auth/iframe",mD="emulator/auth/iframe",gD={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},yD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function _D(t){const e=t.config;Z(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Kg(e,mD):`https://${t.config.authDomain}/${pD}`,i={apiKey:e.apiKey,appName:t.name,v:Es},r=yD.get(t.config.apiHost);r&&(i.eid=r);const s=t._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${Fl(i).slice(1)}`}async function vD(t){const e=await dD(t),n=Wn().gapi;return Z(n,t,"internal-error"),e.open({where:document.body,url:_D(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:gD,dontclear:!0},i=>new Promise(async(r,s)=>{await i.restyle({setHideOnLeave:!1});const o=Hn(t,"network-request-failed"),a=Wn().setTimeout(()=>{s(o)},fD.get());function l(){Wn().clearTimeout(a),r(i)}i.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wD={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},xD=500,ED=600,bD="_blank",TD="http://localhost";class t1{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function SD(t,e,n,i=xD,r=ED){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const l=Object.assign(Object.assign({},wD),{width:i.toString(),height:r.toString(),top:s,left:o}),c=Rt().toLowerCase();n&&(a=vT(c)?bD:n),yT(c)&&(e=e||TD,l.scrollbars="yes");const h=Object.entries(l).reduce((p,[g,y])=>`${p}${g}=${y},`,"");if(BN(c)&&a!=="_self")return ID(e||"",a),new t1(null);const d=window.open(e||"",a,h);Z(d,t,"popup-blocked");try{d.focus()}catch{}return new t1(d)}function ID(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kD="__/auth/handler",PD="emulator/auth/handler",CD=encodeURIComponent("fac");async function n1(t,e,n,i,r,s){Z(t.config.authDomain,t,"auth-domain-config-required"),Z(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:Es,eventId:r};if(e instanceof PT){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",dR(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries({}))o[h]=d}if(e instanceof Bl){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),c=l?`#${CD}=${encodeURIComponent(l)}`:"";return`${AD(t)}?${Fl(a).slice(1)}${c}`}function AD({config:t}){return t.emulator?Kg(t,PD):`https://${t.authDomain}/${kD}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lf="webStorageSupport";class RD{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=jT,this._completeRedirectFn=tD,this._overrideRedirectResult=J4}async _openPopup(e,n,i,r){var s;Ti((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await n1(e,n,i,sm(),r);return SD(e,o,Jg())}async _openRedirect(e,n,i,r){await this._originValidation(e);const s=await n1(e,n,i,sm(),r);return M4(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:s}=this.eventManagers[n];return r?Promise.resolve(r):(Ti(s,"If manager is not set, promise should be"),s)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await vD(e),i=new iD(e);return n.register("authEvent",r=>(Z(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Lf,{type:Lf},r=>{var s;const o=(s=r==null?void 0:r[0])===null||s===void 0?void 0:s[Lf];o!==void 0&&n(!!o),Rn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=lD(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return TT()||_T()||Qg()}}const ND=RD;var i1="@firebase/auth",r1="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Z(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MD(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function OD(t){cs(new wr("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;Z(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ST(t)},c=new GN(i,r,s,l);return i4(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),cs(new wr("auth-internal",e=>{const n=bs(e.getProvider("auth").getImmediate());return(i=>new DD(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),$n(i1,r1,MD(t)),$n(i1,r1,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LD=5*60,jD=tT("authIdTokenMaxAge")||LD;let s1=null;const VD=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>jD)return;const r=n==null?void 0:n.token;s1!==r&&(s1=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function FD(t=Hg()){const e=td(t,"auth");if(e.isInitialized())return e.getImmediate();const n=n4(t,{popupRedirectResolver:ND,persistence:[$4,R4,jT]}),i=tT("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(i,location.origin);if(location.origin===s.origin){const o=VD(s.toString());S4(n,o,()=>o(n.currentUser)),T4(n,a=>o(a))}}const r=Jb("auth");return r&&r4(n,`http://${r}`),n}function UD(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}QN({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const s=Hn("internal-error");s.customData=r,n(s)},i.type="text/javascript",i.charset="UTF-8",UD().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});OD("Browser");var zD="firebase",BD="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$n(zD,BD,"app");var o1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var es,HT;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,E){function P(){}P.prototype=E.prototype,S.D=E.prototype,S.prototype=new P,S.prototype.constructor=S,S.C=function(k,A,D){for(var R=Array(arguments.length-2),le=2;le<arguments.length;le++)R[le-2]=arguments[le];return E.prototype[A].apply(k,R)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(S,E,P){P||(P=0);var k=Array(16);if(typeof E=="string")for(var A=0;16>A;++A)k[A]=E.charCodeAt(P++)|E.charCodeAt(P++)<<8|E.charCodeAt(P++)<<16|E.charCodeAt(P++)<<24;else for(A=0;16>A;++A)k[A]=E[P++]|E[P++]<<8|E[P++]<<16|E[P++]<<24;E=S.g[0],P=S.g[1],A=S.g[2];var D=S.g[3],R=E+(D^P&(A^D))+k[0]+3614090360&4294967295;E=P+(R<<7&4294967295|R>>>25),R=D+(A^E&(P^A))+k[1]+3905402710&4294967295,D=E+(R<<12&4294967295|R>>>20),R=A+(P^D&(E^P))+k[2]+606105819&4294967295,A=D+(R<<17&4294967295|R>>>15),R=P+(E^A&(D^E))+k[3]+3250441966&4294967295,P=A+(R<<22&4294967295|R>>>10),R=E+(D^P&(A^D))+k[4]+4118548399&4294967295,E=P+(R<<7&4294967295|R>>>25),R=D+(A^E&(P^A))+k[5]+1200080426&4294967295,D=E+(R<<12&4294967295|R>>>20),R=A+(P^D&(E^P))+k[6]+2821735955&4294967295,A=D+(R<<17&4294967295|R>>>15),R=P+(E^A&(D^E))+k[7]+4249261313&4294967295,P=A+(R<<22&4294967295|R>>>10),R=E+(D^P&(A^D))+k[8]+1770035416&4294967295,E=P+(R<<7&4294967295|R>>>25),R=D+(A^E&(P^A))+k[9]+2336552879&4294967295,D=E+(R<<12&4294967295|R>>>20),R=A+(P^D&(E^P))+k[10]+4294925233&4294967295,A=D+(R<<17&4294967295|R>>>15),R=P+(E^A&(D^E))+k[11]+2304563134&4294967295,P=A+(R<<22&4294967295|R>>>10),R=E+(D^P&(A^D))+k[12]+1804603682&4294967295,E=P+(R<<7&4294967295|R>>>25),R=D+(A^E&(P^A))+k[13]+4254626195&4294967295,D=E+(R<<12&4294967295|R>>>20),R=A+(P^D&(E^P))+k[14]+2792965006&4294967295,A=D+(R<<17&4294967295|R>>>15),R=P+(E^A&(D^E))+k[15]+1236535329&4294967295,P=A+(R<<22&4294967295|R>>>10),R=E+(A^D&(P^A))+k[1]+4129170786&4294967295,E=P+(R<<5&4294967295|R>>>27),R=D+(P^A&(E^P))+k[6]+3225465664&4294967295,D=E+(R<<9&4294967295|R>>>23),R=A+(E^P&(D^E))+k[11]+643717713&4294967295,A=D+(R<<14&4294967295|R>>>18),R=P+(D^E&(A^D))+k[0]+3921069994&4294967295,P=A+(R<<20&4294967295|R>>>12),R=E+(A^D&(P^A))+k[5]+3593408605&4294967295,E=P+(R<<5&4294967295|R>>>27),R=D+(P^A&(E^P))+k[10]+38016083&4294967295,D=E+(R<<9&4294967295|R>>>23),R=A+(E^P&(D^E))+k[15]+3634488961&4294967295,A=D+(R<<14&4294967295|R>>>18),R=P+(D^E&(A^D))+k[4]+3889429448&4294967295,P=A+(R<<20&4294967295|R>>>12),R=E+(A^D&(P^A))+k[9]+568446438&4294967295,E=P+(R<<5&4294967295|R>>>27),R=D+(P^A&(E^P))+k[14]+3275163606&4294967295,D=E+(R<<9&4294967295|R>>>23),R=A+(E^P&(D^E))+k[3]+4107603335&4294967295,A=D+(R<<14&4294967295|R>>>18),R=P+(D^E&(A^D))+k[8]+1163531501&4294967295,P=A+(R<<20&4294967295|R>>>12),R=E+(A^D&(P^A))+k[13]+2850285829&4294967295,E=P+(R<<5&4294967295|R>>>27),R=D+(P^A&(E^P))+k[2]+4243563512&4294967295,D=E+(R<<9&4294967295|R>>>23),R=A+(E^P&(D^E))+k[7]+1735328473&4294967295,A=D+(R<<14&4294967295|R>>>18),R=P+(D^E&(A^D))+k[12]+2368359562&4294967295,P=A+(R<<20&4294967295|R>>>12),R=E+(P^A^D)+k[5]+4294588738&4294967295,E=P+(R<<4&4294967295|R>>>28),R=D+(E^P^A)+k[8]+2272392833&4294967295,D=E+(R<<11&4294967295|R>>>21),R=A+(D^E^P)+k[11]+1839030562&4294967295,A=D+(R<<16&4294967295|R>>>16),R=P+(A^D^E)+k[14]+4259657740&4294967295,P=A+(R<<23&4294967295|R>>>9),R=E+(P^A^D)+k[1]+2763975236&4294967295,E=P+(R<<4&4294967295|R>>>28),R=D+(E^P^A)+k[4]+1272893353&4294967295,D=E+(R<<11&4294967295|R>>>21),R=A+(D^E^P)+k[7]+4139469664&4294967295,A=D+(R<<16&4294967295|R>>>16),R=P+(A^D^E)+k[10]+3200236656&4294967295,P=A+(R<<23&4294967295|R>>>9),R=E+(P^A^D)+k[13]+681279174&4294967295,E=P+(R<<4&4294967295|R>>>28),R=D+(E^P^A)+k[0]+3936430074&4294967295,D=E+(R<<11&4294967295|R>>>21),R=A+(D^E^P)+k[3]+3572445317&4294967295,A=D+(R<<16&4294967295|R>>>16),R=P+(A^D^E)+k[6]+76029189&4294967295,P=A+(R<<23&4294967295|R>>>9),R=E+(P^A^D)+k[9]+3654602809&4294967295,E=P+(R<<4&4294967295|R>>>28),R=D+(E^P^A)+k[12]+3873151461&4294967295,D=E+(R<<11&4294967295|R>>>21),R=A+(D^E^P)+k[15]+530742520&4294967295,A=D+(R<<16&4294967295|R>>>16),R=P+(A^D^E)+k[2]+3299628645&4294967295,P=A+(R<<23&4294967295|R>>>9),R=E+(A^(P|~D))+k[0]+4096336452&4294967295,E=P+(R<<6&4294967295|R>>>26),R=D+(P^(E|~A))+k[7]+1126891415&4294967295,D=E+(R<<10&4294967295|R>>>22),R=A+(E^(D|~P))+k[14]+2878612391&4294967295,A=D+(R<<15&4294967295|R>>>17),R=P+(D^(A|~E))+k[5]+4237533241&4294967295,P=A+(R<<21&4294967295|R>>>11),R=E+(A^(P|~D))+k[12]+1700485571&4294967295,E=P+(R<<6&4294967295|R>>>26),R=D+(P^(E|~A))+k[3]+2399980690&4294967295,D=E+(R<<10&4294967295|R>>>22),R=A+(E^(D|~P))+k[10]+4293915773&4294967295,A=D+(R<<15&4294967295|R>>>17),R=P+(D^(A|~E))+k[1]+2240044497&4294967295,P=A+(R<<21&4294967295|R>>>11),R=E+(A^(P|~D))+k[8]+1873313359&4294967295,E=P+(R<<6&4294967295|R>>>26),R=D+(P^(E|~A))+k[15]+4264355552&4294967295,D=E+(R<<10&4294967295|R>>>22),R=A+(E^(D|~P))+k[6]+2734768916&4294967295,A=D+(R<<15&4294967295|R>>>17),R=P+(D^(A|~E))+k[13]+1309151649&4294967295,P=A+(R<<21&4294967295|R>>>11),R=E+(A^(P|~D))+k[4]+4149444226&4294967295,E=P+(R<<6&4294967295|R>>>26),R=D+(P^(E|~A))+k[11]+3174756917&4294967295,D=E+(R<<10&4294967295|R>>>22),R=A+(E^(D|~P))+k[2]+718787259&4294967295,A=D+(R<<15&4294967295|R>>>17),R=P+(D^(A|~E))+k[9]+3951481745&4294967295,S.g[0]=S.g[0]+E&4294967295,S.g[1]=S.g[1]+(A+(R<<21&4294967295|R>>>11))&4294967295,S.g[2]=S.g[2]+A&4294967295,S.g[3]=S.g[3]+D&4294967295}i.prototype.u=function(S,E){E===void 0&&(E=S.length);for(var P=E-this.blockSize,k=this.B,A=this.h,D=0;D<E;){if(A==0)for(;D<=P;)r(this,S,D),D+=this.blockSize;if(typeof S=="string"){for(;D<E;)if(k[A++]=S.charCodeAt(D++),A==this.blockSize){r(this,k),A=0;break}}else for(;D<E;)if(k[A++]=S[D++],A==this.blockSize){r(this,k),A=0;break}}this.h=A,this.o+=E},i.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var E=1;E<S.length-8;++E)S[E]=0;var P=8*this.o;for(E=S.length-8;E<S.length;++E)S[E]=P&255,P/=256;for(this.u(S),S=Array(16),E=P=0;4>E;++E)for(var k=0;32>k;k+=8)S[P++]=this.g[E]>>>k&255;return S};function s(S,E){var P=a;return Object.prototype.hasOwnProperty.call(P,S)?P[S]:P[S]=E(S)}function o(S,E){this.h=E;for(var P=[],k=!0,A=S.length-1;0<=A;A--){var D=S[A]|0;k&&D==E||(P[A]=D,k=!1)}this.g=P}var a={};function l(S){return-128<=S&&128>S?s(S,function(E){return new o([E|0],0>E?-1:0)}):new o([S|0],0>S?-1:0)}function c(S){if(isNaN(S)||!isFinite(S))return d;if(0>S)return b(c(-S));for(var E=[],P=1,k=0;S>=P;k++)E[k]=S/P|0,P*=4294967296;return new o(E,0)}function h(S,E){if(S.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(S.charAt(0)=="-")return b(h(S.substring(1),E));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var P=c(Math.pow(E,8)),k=d,A=0;A<S.length;A+=8){var D=Math.min(8,S.length-A),R=parseInt(S.substring(A,A+D),E);8>D?(D=c(Math.pow(E,D)),k=k.j(D).add(c(R))):(k=k.j(P),k=k.add(c(R)))}return k}var d=l(0),p=l(1),g=l(16777216);t=o.prototype,t.m=function(){if(x(this))return-b(this).m();for(var S=0,E=1,P=0;P<this.g.length;P++){var k=this.i(P);S+=(0<=k?k:4294967296+k)*E,E*=4294967296}return S},t.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(y(this))return"0";if(x(this))return"-"+b(this).toString(S);for(var E=c(Math.pow(S,6)),P=this,k="";;){var A=C(P,E).g;P=v(P,A.j(E));var D=((0<P.g.length?P.g[0]:P.h)>>>0).toString(S);if(P=A,y(P))return D+k;for(;6>D.length;)D="0"+D;k=D+k}},t.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function y(S){if(S.h!=0)return!1;for(var E=0;E<S.g.length;E++)if(S.g[E]!=0)return!1;return!0}function x(S){return S.h==-1}t.l=function(S){return S=v(this,S),x(S)?-1:y(S)?0:1};function b(S){for(var E=S.g.length,P=[],k=0;k<E;k++)P[k]=~S.g[k];return new o(P,~S.h).add(p)}t.abs=function(){return x(this)?b(this):this},t.add=function(S){for(var E=Math.max(this.g.length,S.g.length),P=[],k=0,A=0;A<=E;A++){var D=k+(this.i(A)&65535)+(S.i(A)&65535),R=(D>>>16)+(this.i(A)>>>16)+(S.i(A)>>>16);k=R>>>16,D&=65535,R&=65535,P[A]=R<<16|D}return new o(P,P[P.length-1]&-2147483648?-1:0)};function v(S,E){return S.add(b(E))}t.j=function(S){if(y(this)||y(S))return d;if(x(this))return x(S)?b(this).j(b(S)):b(b(this).j(S));if(x(S))return b(this.j(b(S)));if(0>this.l(g)&&0>S.l(g))return c(this.m()*S.m());for(var E=this.g.length+S.g.length,P=[],k=0;k<2*E;k++)P[k]=0;for(k=0;k<this.g.length;k++)for(var A=0;A<S.g.length;A++){var D=this.i(k)>>>16,R=this.i(k)&65535,le=S.i(A)>>>16,X=S.i(A)&65535;P[2*k+2*A]+=R*X,w(P,2*k+2*A),P[2*k+2*A+1]+=D*X,w(P,2*k+2*A+1),P[2*k+2*A+1]+=R*le,w(P,2*k+2*A+1),P[2*k+2*A+2]+=D*le,w(P,2*k+2*A+2)}for(k=0;k<E;k++)P[k]=P[2*k+1]<<16|P[2*k];for(k=E;k<2*E;k++)P[k]=0;return new o(P,0)};function w(S,E){for(;(S[E]&65535)!=S[E];)S[E+1]+=S[E]>>>16,S[E]&=65535,E++}function T(S,E){this.g=S,this.h=E}function C(S,E){if(y(E))throw Error("division by zero");if(y(S))return new T(d,d);if(x(S))return E=C(b(S),E),new T(b(E.g),b(E.h));if(x(E))return E=C(S,b(E)),new T(b(E.g),E.h);if(30<S.g.length){if(x(S)||x(E))throw Error("slowDivide_ only works with positive integers.");for(var P=p,k=E;0>=k.l(S);)P=N(P),k=N(k);var A=M(P,1),D=M(k,1);for(k=M(k,2),P=M(P,2);!y(k);){var R=D.add(k);0>=R.l(S)&&(A=A.add(P),D=R),k=M(k,1),P=M(P,1)}return E=v(S,A.j(E)),new T(A,E)}for(A=d;0<=S.l(E);){for(P=Math.max(1,Math.floor(S.m()/E.m())),k=Math.ceil(Math.log(P)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),D=c(P),R=D.j(E);x(R)||0<R.l(S);)P-=k,D=c(P),R=D.j(E);y(D)&&(D=p),A=A.add(D),S=v(S,R)}return new T(A,S)}t.A=function(S){return C(this,S).h},t.and=function(S){for(var E=Math.max(this.g.length,S.g.length),P=[],k=0;k<E;k++)P[k]=this.i(k)&S.i(k);return new o(P,this.h&S.h)},t.or=function(S){for(var E=Math.max(this.g.length,S.g.length),P=[],k=0;k<E;k++)P[k]=this.i(k)|S.i(k);return new o(P,this.h|S.h)},t.xor=function(S){for(var E=Math.max(this.g.length,S.g.length),P=[],k=0;k<E;k++)P[k]=this.i(k)^S.i(k);return new o(P,this.h^S.h)};function N(S){for(var E=S.g.length+1,P=[],k=0;k<E;k++)P[k]=S.i(k)<<1|S.i(k-1)>>>31;return new o(P,S.h)}function M(S,E){var P=E>>5;E%=32;for(var k=S.g.length-P,A=[],D=0;D<k;D++)A[D]=0<E?S.i(D+P)>>>E|S.i(D+P+1)<<32-E:S.i(D+P);return new o(A,S.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,HT=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,es=o}).apply(typeof o1<"u"?o1:typeof self<"u"?self:typeof window<"u"?window:{});var Oc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var WT,_a,qT,vu,cm,KT,GT,QT;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,_){return u==Array.prototype||u==Object.prototype||(u[m]=_.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Oc=="object"&&Oc];for(var m=0;m<u.length;++m){var _=u[m];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var i=n(this);function r(u,m){if(m)e:{var _=i;u=u.split(".");for(var I=0;I<u.length-1;I++){var L=u[I];if(!(L in _))break e;_=_[L]}u=u[u.length-1],I=_[u],m=m(I),m!=I&&m!=null&&e(_,u,{configurable:!0,writable:!0,value:m})}}function s(u,m){u instanceof String&&(u+="");var _=0,I=!1,L={next:function(){if(!I&&_<u.length){var j=_++;return{value:m(j,u[j]),done:!1}}return I=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}r("Array.prototype.values",function(u){return u||function(){return s(this,function(m,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function c(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function h(u,m,_){return u.call.apply(u.bind,arguments)}function d(u,m,_){if(!u)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,I),u.apply(m,L)}}return function(){return u.apply(m,arguments)}}function p(u,m,_){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:d,p.apply(null,arguments)}function g(u,m){var _=Array.prototype.slice.call(arguments,1);return function(){var I=_.slice();return I.push.apply(I,arguments),u.apply(this,I)}}function y(u,m){function _(){}_.prototype=m.prototype,u.aa=m.prototype,u.prototype=new _,u.prototype.constructor=u,u.Qb=function(I,L,j){for(var H=Array(arguments.length-2),Te=2;Te<arguments.length;Te++)H[Te-2]=arguments[Te];return m.prototype[L].apply(I,H)}}function x(u){const m=u.length;if(0<m){const _=Array(m);for(let I=0;I<m;I++)_[I]=u[I];return _}return[]}function b(u,m){for(let _=1;_<arguments.length;_++){const I=arguments[_];if(l(I)){const L=u.length||0,j=I.length||0;u.length=L+j;for(let H=0;H<j;H++)u[L+H]=I[H]}else u.push(I)}}class v{constructor(m,_){this.i=m,this.j=_,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function w(u){return/^[\s\xa0]*$/.test(u)}function T(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function C(u){return C[" "](u),u}C[" "]=function(){};var N=T().indexOf("Gecko")!=-1&&!(T().toLowerCase().indexOf("webkit")!=-1&&T().indexOf("Edge")==-1)&&!(T().indexOf("Trident")!=-1||T().indexOf("MSIE")!=-1)&&T().indexOf("Edge")==-1;function M(u,m,_){for(const I in u)m.call(_,u[I],I,u)}function S(u,m){for(const _ in u)m.call(void 0,u[_],_,u)}function E(u){const m={};for(const _ in u)m[_]=u[_];return m}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(u,m){let _,I;for(let L=1;L<arguments.length;L++){I=arguments[L];for(_ in I)u[_]=I[_];for(let j=0;j<P.length;j++)_=P[j],Object.prototype.hasOwnProperty.call(I,_)&&(u[_]=I[_])}}function A(u){var m=1;u=u.split(":");const _=[];for(;0<m&&u.length;)_.push(u.shift()),m--;return u.length&&_.push(u.join(":")),_}function D(u){a.setTimeout(()=>{throw u},0)}function R(){var u=$;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class le{constructor(){this.h=this.g=null}add(m,_){const I=X.get();I.set(m,_),this.h?this.h.next=I:this.g=I,this.h=I}}var X=new v(()=>new U,u=>u.reset());class U{constructor(){this.next=this.g=this.h=null}set(m,_){this.h=m,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let Y,V=!1,$=new le,q=()=>{const u=a.Promise.resolve(void 0);Y=()=>{u.then(re)}};var re=()=>{for(var u;u=R();){try{u.h.call(u.g)}catch(_){D(_)}var m=X;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}V=!1};function se(){this.s=this.s,this.C=this.C}se.prototype.s=!1,se.prototype.ma=function(){this.s||(this.s=!0,this.N())},se.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function fe(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}fe.prototype.h=function(){this.defaultPrevented=!0};var De=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};a.addEventListener("test",_,m),a.removeEventListener("test",_,m)}catch{}return u}();function ye(u,m){if(fe.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var _=this.type=u.type,I=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(N){e:{try{C(m.nodeName);var L=!0;break e}catch{}L=!1}L||(m=null)}}else _=="mouseover"?m=u.fromElement:_=="mouseout"&&(m=u.toElement);this.relatedTarget=m,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:be[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&ye.aa.h.call(this)}}y(ye,fe);var be={2:"touch",3:"pen",4:"mouse"};ye.prototype.h=function(){ye.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var cn="closure_listenable_"+(1e6*Math.random()|0),ec=0;function yt(u,m,_,I,L){this.listener=u,this.proxy=null,this.src=m,this.type=_,this.capture=!!I,this.ha=L,this.key=++ec,this.da=this.fa=!1}function zt(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function je(u){this.src=u,this.g={},this.h=0}je.prototype.add=function(u,m,_,I,L){var j=u.toString();u=this.g[j],u||(u=this.g[j]=[],this.h++);var H=Md(u,m,I,L);return-1<H?(m=u[H],_||(m.fa=!1)):(m=new yt(m,this.src,j,!!I,L),m.fa=_,u.push(m)),m};function Dd(u,m){var _=m.type;if(_ in u.g){var I=u.g[_],L=Array.prototype.indexOf.call(I,m,void 0),j;(j=0<=L)&&Array.prototype.splice.call(I,L,1),j&&(zt(m),u.g[_].length==0&&(delete u.g[_],u.h--))}}function Md(u,m,_,I){for(var L=0;L<u.length;++L){var j=u[L];if(!j.da&&j.listener==m&&j.capture==!!_&&j.ha==I)return L}return-1}var Od="closure_lm_"+(1e6*Math.random()|0),Ld={};function g_(u,m,_,I,L){if(Array.isArray(m)){for(var j=0;j<m.length;j++)g_(u,m[j],_,I,L);return null}return _=v_(_),u&&u[cn]?u.K(m,_,c(I)?!!I.capture:!1,L):LI(u,m,_,!1,I,L)}function LI(u,m,_,I,L,j){if(!m)throw Error("Invalid event type");var H=c(L)?!!L.capture:!!L,Te=Vd(u);if(Te||(u[Od]=Te=new je(u)),_=Te.add(m,_,I,H,j),_.proxy)return _;if(I=jI(),_.proxy=I,I.src=u,I.listener=_,u.addEventListener)De||(L=H),L===void 0&&(L=!1),u.addEventListener(m.toString(),I,L);else if(u.attachEvent)u.attachEvent(__(m.toString()),I);else if(u.addListener&&u.removeListener)u.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return _}function jI(){function u(_){return m.call(u.src,u.listener,_)}const m=VI;return u}function y_(u,m,_,I,L){if(Array.isArray(m))for(var j=0;j<m.length;j++)y_(u,m[j],_,I,L);else I=c(I)?!!I.capture:!!I,_=v_(_),u&&u[cn]?(u=u.i,m=String(m).toString(),m in u.g&&(j=u.g[m],_=Md(j,_,I,L),-1<_&&(zt(j[_]),Array.prototype.splice.call(j,_,1),j.length==0&&(delete u.g[m],u.h--)))):u&&(u=Vd(u))&&(m=u.g[m.toString()],u=-1,m&&(u=Md(m,_,I,L)),(_=-1<u?m[u]:null)&&jd(_))}function jd(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[cn])Dd(m.i,u);else{var _=u.type,I=u.proxy;m.removeEventListener?m.removeEventListener(_,I,u.capture):m.detachEvent?m.detachEvent(__(_),I):m.addListener&&m.removeListener&&m.removeListener(I),(_=Vd(m))?(Dd(_,u),_.h==0&&(_.src=null,m[Od]=null)):zt(u)}}}function __(u){return u in Ld?Ld[u]:Ld[u]="on"+u}function VI(u,m){if(u.da)u=!0;else{m=new ye(m,this);var _=u.listener,I=u.ha||u.src;u.fa&&jd(u),u=_.call(I,m)}return u}function Vd(u){return u=u[Od],u instanceof je?u:null}var Fd="__closure_events_fn_"+(1e9*Math.random()>>>0);function v_(u){return typeof u=="function"?u:(u[Fd]||(u[Fd]=function(m){return u.handleEvent(m)}),u[Fd])}function _t(){se.call(this),this.i=new je(this),this.M=this,this.F=null}y(_t,se),_t.prototype[cn]=!0,_t.prototype.removeEventListener=function(u,m,_,I){y_(this,u,m,_,I)};function Dt(u,m){var _,I=u.F;if(I)for(_=[];I;I=I.F)_.push(I);if(u=u.M,I=m.type||m,typeof m=="string")m=new fe(m,u);else if(m instanceof fe)m.target=m.target||u;else{var L=m;m=new fe(I,u),k(m,L)}if(L=!0,_)for(var j=_.length-1;0<=j;j--){var H=m.g=_[j];L=tc(H,I,!0,m)&&L}if(H=m.g=u,L=tc(H,I,!0,m)&&L,L=tc(H,I,!1,m)&&L,_)for(j=0;j<_.length;j++)H=m.g=_[j],L=tc(H,I,!1,m)&&L}_t.prototype.N=function(){if(_t.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var _=u.g[m],I=0;I<_.length;I++)zt(_[I]);delete u.g[m],u.h--}}this.F=null},_t.prototype.K=function(u,m,_,I){return this.i.add(String(u),m,!1,_,I)},_t.prototype.L=function(u,m,_,I){return this.i.add(String(u),m,!0,_,I)};function tc(u,m,_,I){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var L=!0,j=0;j<m.length;++j){var H=m[j];if(H&&!H.da&&H.capture==_){var Te=H.listener,ct=H.ha||H.src;H.fa&&Dd(u.i,H),L=Te.call(ct,I)!==!1&&L}}return L&&!I.defaultPrevented}function w_(u,m,_){if(typeof u=="function")_&&(u=p(u,_));else if(u&&typeof u.handleEvent=="function")u=p(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:a.setTimeout(u,m||0)}function x_(u){u.g=w_(()=>{u.g=null,u.i&&(u.i=!1,x_(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class FI extends se{constructor(m,_){super(),this.m=m,this.l=_,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:x_(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Vo(u){se.call(this),this.h=u,this.g={}}y(Vo,se);var E_=[];function b_(u){M(u.g,function(m,_){this.g.hasOwnProperty(_)&&jd(m)},u),u.g={}}Vo.prototype.N=function(){Vo.aa.N.call(this),b_(this)},Vo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ud=a.JSON.stringify,UI=a.JSON.parse,zI=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function zd(){}zd.prototype.h=null;function T_(u){return u.h||(u.h=u.i())}function S_(){}var Fo={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Bd(){fe.call(this,"d")}y(Bd,fe);function $d(){fe.call(this,"c")}y($d,fe);var Dr={},I_=null;function nc(){return I_=I_||new _t}Dr.La="serverreachability";function k_(u){fe.call(this,Dr.La,u)}y(k_,fe);function Uo(u){const m=nc();Dt(m,new k_(m))}Dr.STAT_EVENT="statevent";function P_(u,m){fe.call(this,Dr.STAT_EVENT,u),this.stat=m}y(P_,fe);function Mt(u){const m=nc();Dt(m,new P_(m,u))}Dr.Ma="timingevent";function C_(u,m){fe.call(this,Dr.Ma,u),this.size=m}y(C_,fe);function zo(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},m)}function Bo(){this.g=!0}Bo.prototype.xa=function(){this.g=!1};function BI(u,m,_,I,L,j){u.info(function(){if(u.g)if(j)for(var H="",Te=j.split("&"),ct=0;ct<Te.length;ct++){var me=Te[ct].split("=");if(1<me.length){var vt=me[0];me=me[1];var wt=vt.split("_");H=2<=wt.length&&wt[1]=="type"?H+(vt+"="+me+"&"):H+(vt+"=redacted&")}}else H=null;else H=j;return"XMLHTTP REQ ("+I+") [attempt "+L+"]: "+m+`
`+_+`
`+H})}function $I(u,m,_,I,L,j,H){u.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+L+"]: "+m+`
`+_+`
`+j+" "+H})}function Ps(u,m,_,I){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+WI(u,_)+(I?" "+I:"")})}function HI(u,m){u.info(function(){return"TIMEOUT: "+m})}Bo.prototype.info=function(){};function WI(u,m){if(!u.g)return m;if(!m)return null;try{var _=JSON.parse(m);if(_){for(u=0;u<_.length;u++)if(Array.isArray(_[u])){var I=_[u];if(!(2>I.length)){var L=I[1];if(Array.isArray(L)&&!(1>L.length)){var j=L[0];if(j!="noop"&&j!="stop"&&j!="close")for(var H=1;H<L.length;H++)L[H]=""}}}}return Ud(_)}catch{return m}}var ic={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},A_={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Hd;function rc(){}y(rc,zd),rc.prototype.g=function(){return new XMLHttpRequest},rc.prototype.i=function(){return{}},Hd=new rc;function Di(u,m,_,I){this.j=u,this.i=m,this.l=_,this.R=I||1,this.U=new Vo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new R_}function R_(){this.i=null,this.g="",this.h=!1}var N_={},Wd={};function qd(u,m,_){u.L=1,u.v=lc(Jn(m)),u.m=_,u.P=!0,D_(u,null)}function D_(u,m){u.F=Date.now(),sc(u),u.A=Jn(u.v);var _=u.A,I=u.R;Array.isArray(I)||(I=[String(I)]),K_(_.i,"t",I),u.C=0,_=u.j.J,u.h=new R_,u.g=hv(u.j,_?m:null,!u.m),0<u.O&&(u.M=new FI(p(u.Y,u,u.g),u.O)),m=u.U,_=u.g,I=u.ca;var L="readystatechange";Array.isArray(L)||(L&&(E_[0]=L.toString()),L=E_);for(var j=0;j<L.length;j++){var H=g_(_,L[j],I||m.handleEvent,!1,m.h||m);if(!H)break;m.g[H.key]=H}m=u.H?E(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),Uo(),BI(u.i,u.u,u.A,u.l,u.R,u.m)}Di.prototype.ca=function(u){u=u.target;const m=this.M;m&&Zn(u)==3?m.j():this.Y(u)},Di.prototype.Y=function(u){try{if(u==this.g)e:{const wt=Zn(this.g);var m=this.g.Ba();const Rs=this.g.Z();if(!(3>wt)&&(wt!=3||this.g&&(this.h.h||this.g.oa()||ev(this.g)))){this.J||wt!=4||m==7||(m==8||0>=Rs?Uo(3):Uo(2)),Kd(this);var _=this.g.Z();this.X=_;t:if(M_(this)){var I=ev(this.g);u="";var L=I.length,j=Zn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Mr(this),$o(this);var H="";break t}this.h.i=new a.TextDecoder}for(m=0;m<L;m++)this.h.h=!0,u+=this.h.i.decode(I[m],{stream:!(j&&m==L-1)});I.length=0,this.h.g+=u,this.C=0,H=this.h.g}else H=this.g.oa();if(this.o=_==200,$I(this.i,this.u,this.A,this.l,this.R,wt,_),this.o){if(this.T&&!this.K){t:{if(this.g){var Te,ct=this.g;if((Te=ct.g?ct.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(Te)){var me=Te;break t}}me=null}if(_=me)Ps(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Gd(this,_);else{this.o=!1,this.s=3,Mt(12),Mr(this),$o(this);break e}}if(this.P){_=!0;let wn;for(;!this.J&&this.C<H.length;)if(wn=qI(this,H),wn==Wd){wt==4&&(this.s=4,Mt(14),_=!1),Ps(this.i,this.l,null,"[Incomplete Response]");break}else if(wn==N_){this.s=4,Mt(15),Ps(this.i,this.l,H,"[Invalid Chunk]"),_=!1;break}else Ps(this.i,this.l,wn,null),Gd(this,wn);if(M_(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),wt!=4||H.length!=0||this.h.h||(this.s=1,Mt(16),_=!1),this.o=this.o&&_,!_)Ps(this.i,this.l,H,"[Invalid Chunked Response]"),Mr(this),$o(this);else if(0<H.length&&!this.W){this.W=!0;var vt=this.j;vt.g==this&&vt.ba&&!vt.M&&(vt.j.info("Great, no buffering proxy detected. Bytes received: "+H.length),ef(vt),vt.M=!0,Mt(11))}}else Ps(this.i,this.l,H,null),Gd(this,H);wt==4&&Mr(this),this.o&&!this.J&&(wt==4?av(this.j,this):(this.o=!1,sc(this)))}else ck(this.g),_==400&&0<H.indexOf("Unknown SID")?(this.s=3,Mt(12)):(this.s=0,Mt(13)),Mr(this),$o(this)}}}catch{}finally{}};function M_(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function qI(u,m){var _=u.C,I=m.indexOf(`
`,_);return I==-1?Wd:(_=Number(m.substring(_,I)),isNaN(_)?N_:(I+=1,I+_>m.length?Wd:(m=m.slice(I,I+_),u.C=I+_,m)))}Di.prototype.cancel=function(){this.J=!0,Mr(this)};function sc(u){u.S=Date.now()+u.I,O_(u,u.I)}function O_(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=zo(p(u.ba,u),m)}function Kd(u){u.B&&(a.clearTimeout(u.B),u.B=null)}Di.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(HI(this.i,this.A),this.L!=2&&(Uo(),Mt(17)),Mr(this),this.s=2,$o(this)):O_(this,this.S-u)};function $o(u){u.j.G==0||u.J||av(u.j,u)}function Mr(u){Kd(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,b_(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function Gd(u,m){try{var _=u.j;if(_.G!=0&&(_.g==u||Qd(_.h,u))){if(!u.K&&Qd(_.h,u)&&_.G==3){try{var I=_.Da.g.parse(m)}catch{I=null}if(Array.isArray(I)&&I.length==3){var L=I;if(L[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<u.F)pc(_),dc(_);else break e;Zd(_),Mt(18)}}else _.za=L[1],0<_.za-_.T&&37500>L[2]&&_.F&&_.v==0&&!_.C&&(_.C=zo(p(_.Za,_),6e3));if(1>=V_(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Lr(_,11)}else if((u.K||_.g==u)&&pc(_),!w(m))for(L=_.Da.g.parse(m),m=0;m<L.length;m++){let me=L[m];if(_.T=me[0],me=me[1],_.G==2)if(me[0]=="c"){_.K=me[1],_.ia=me[2];const vt=me[3];vt!=null&&(_.la=vt,_.j.info("VER="+_.la));const wt=me[4];wt!=null&&(_.Aa=wt,_.j.info("SVER="+_.Aa));const Rs=me[5];Rs!=null&&typeof Rs=="number"&&0<Rs&&(I=1.5*Rs,_.L=I,_.j.info("backChannelRequestTimeoutMs_="+I)),I=_;const wn=u.g;if(wn){const gc=wn.g?wn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(gc){var j=I.h;j.g||gc.indexOf("spdy")==-1&&gc.indexOf("quic")==-1&&gc.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(Yd(j,j.h),j.h=null))}if(I.D){const tf=wn.g?wn.g.getResponseHeader("X-HTTP-Session-Id"):null;tf&&(I.ya=tf,ke(I.I,I.D,tf))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-u.F,_.j.info("Handshake RTT: "+_.R+"ms")),I=_;var H=u;if(I.qa=uv(I,I.J?I.ia:null,I.W),H.K){F_(I.h,H);var Te=H,ct=I.L;ct&&(Te.I=ct),Te.B&&(Kd(Te),sc(Te)),I.g=H}else sv(I);0<_.i.length&&fc(_)}else me[0]!="stop"&&me[0]!="close"||Lr(_,7);else _.G==3&&(me[0]=="stop"||me[0]=="close"?me[0]=="stop"?Lr(_,7):Jd(_):me[0]!="noop"&&_.l&&_.l.ta(me),_.v=0)}}Uo(4)}catch{}}var KI=class{constructor(u,m){this.g=u,this.map=m}};function L_(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function j_(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function V_(u){return u.h?1:u.g?u.g.size:0}function Qd(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function Yd(u,m){u.g?u.g.add(m):u.h=m}function F_(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}L_.prototype.cancel=function(){if(this.i=U_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function U_(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const _ of u.g.values())m=m.concat(_.D);return m}return x(u.i)}function GI(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var m=[],_=u.length,I=0;I<_;I++)m.push(u[I]);return m}m=[],_=0;for(I in u)m[_++]=u[I];return m}function QI(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var m=[];u=u.length;for(var _=0;_<u;_++)m.push(_);return m}m=[],_=0;for(const I in u)m[_++]=I;return m}}}function z_(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var _=QI(u),I=GI(u),L=I.length,j=0;j<L;j++)m.call(void 0,I[j],_&&_[j],u)}var B_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function YI(u,m){if(u){u=u.split("&");for(var _=0;_<u.length;_++){var I=u[_].indexOf("="),L=null;if(0<=I){var j=u[_].substring(0,I);L=u[_].substring(I+1)}else j=u[_];m(j,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function Or(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Or){this.h=u.h,oc(this,u.j),this.o=u.o,this.g=u.g,ac(this,u.s),this.l=u.l;var m=u.i,_=new qo;_.i=m.i,m.g&&(_.g=new Map(m.g),_.h=m.h),$_(this,_),this.m=u.m}else u&&(m=String(u).match(B_))?(this.h=!1,oc(this,m[1]||"",!0),this.o=Ho(m[2]||""),this.g=Ho(m[3]||"",!0),ac(this,m[4]),this.l=Ho(m[5]||"",!0),$_(this,m[6]||"",!0),this.m=Ho(m[7]||"")):(this.h=!1,this.i=new qo(null,this.h))}Or.prototype.toString=function(){var u=[],m=this.j;m&&u.push(Wo(m,H_,!0),":");var _=this.g;return(_||m=="file")&&(u.push("//"),(m=this.o)&&u.push(Wo(m,H_,!0),"@"),u.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&u.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(Wo(_,_.charAt(0)=="/"?ZI:JI,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",Wo(_,tk)),u.join("")};function Jn(u){return new Or(u)}function oc(u,m,_){u.j=_?Ho(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function ac(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function $_(u,m,_){m instanceof qo?(u.i=m,nk(u.i,u.h)):(_||(m=Wo(m,ek)),u.i=new qo(m,u.h))}function ke(u,m,_){u.i.set(m,_)}function lc(u){return ke(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Ho(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Wo(u,m,_){return typeof u=="string"?(u=encodeURI(u).replace(m,XI),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function XI(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var H_=/[#\/\?@]/g,JI=/[#\?:]/g,ZI=/[#\?]/g,ek=/[#\?@]/g,tk=/#/g;function qo(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function Mi(u){u.g||(u.g=new Map,u.h=0,u.i&&YI(u.i,function(m,_){u.add(decodeURIComponent(m.replace(/\+/g," ")),_)}))}t=qo.prototype,t.add=function(u,m){Mi(this),this.i=null,u=Cs(this,u);var _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(m),this.h+=1,this};function W_(u,m){Mi(u),m=Cs(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function q_(u,m){return Mi(u),m=Cs(u,m),u.g.has(m)}t.forEach=function(u,m){Mi(this),this.g.forEach(function(_,I){_.forEach(function(L){u.call(m,L,I,this)},this)},this)},t.na=function(){Mi(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),_=[];for(let I=0;I<m.length;I++){const L=u[I];for(let j=0;j<L.length;j++)_.push(m[I])}return _},t.V=function(u){Mi(this);let m=[];if(typeof u=="string")q_(this,u)&&(m=m.concat(this.g.get(Cs(this,u))));else{u=Array.from(this.g.values());for(let _=0;_<u.length;_++)m=m.concat(u[_])}return m},t.set=function(u,m){return Mi(this),this.i=null,u=Cs(this,u),q_(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},t.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function K_(u,m,_){W_(u,m),0<_.length&&(u.i=null,u.g.set(Cs(u,m),x(_)),u.h+=_.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var _=0;_<m.length;_++){var I=m[_];const j=encodeURIComponent(String(I)),H=this.V(I);for(I=0;I<H.length;I++){var L=j;H[I]!==""&&(L+="="+encodeURIComponent(String(H[I]))),u.push(L)}}return this.i=u.join("&")};function Cs(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function nk(u,m){m&&!u.j&&(Mi(u),u.i=null,u.g.forEach(function(_,I){var L=I.toLowerCase();I!=L&&(W_(this,I),K_(this,L,_))},u)),u.j=m}function ik(u,m){const _=new Bo;if(a.Image){const I=new Image;I.onload=g(Oi,_,"TestLoadImage: loaded",!0,m,I),I.onerror=g(Oi,_,"TestLoadImage: error",!1,m,I),I.onabort=g(Oi,_,"TestLoadImage: abort",!1,m,I),I.ontimeout=g(Oi,_,"TestLoadImage: timeout",!1,m,I),a.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=u}else m(!1)}function rk(u,m){const _=new Bo,I=new AbortController,L=setTimeout(()=>{I.abort(),Oi(_,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:I.signal}).then(j=>{clearTimeout(L),j.ok?Oi(_,"TestPingServer: ok",!0,m):Oi(_,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(L),Oi(_,"TestPingServer: error",!1,m)})}function Oi(u,m,_,I,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),I(_)}catch{}}function sk(){this.g=new zI}function ok(u,m,_){const I=_||"";try{z_(u,function(L,j){let H=L;c(L)&&(H=Ud(L)),m.push(I+j+"="+encodeURIComponent(H))})}catch(L){throw m.push(I+"type="+encodeURIComponent("_badmap")),L}}function cc(u){this.l=u.Ub||null,this.j=u.eb||!1}y(cc,zd),cc.prototype.g=function(){return new uc(this.l,this.j)},cc.prototype.i=function(u){return function(){return u}}({});function uc(u,m){_t.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}y(uc,_t),t=uc.prototype,t.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,Go(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||a).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ko(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Go(this)),this.g&&(this.readyState=3,Go(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;G_(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function G_(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?Ko(this):Go(this),this.readyState==3&&G_(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,Ko(this))},t.Qa=function(u){this.g&&(this.response=u,Ko(this))},t.ga=function(){this.g&&Ko(this)};function Ko(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Go(u)}t.setRequestHeader=function(u,m){this.u.append(u,m)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var _=m.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=m.next();return u.join(`\r
`)};function Go(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(uc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Q_(u){let m="";return M(u,function(_,I){m+=I,m+=":",m+=_,m+=`\r
`}),m}function Xd(u,m,_){e:{for(I in _){var I=!1;break e}I=!0}I||(_=Q_(_),typeof u=="string"?_!=null&&encodeURIComponent(String(_)):ke(u,m,_))}function $e(u){_t.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}y($e,_t);var ak=/^https?$/i,lk=["POST","PUT"];t=$e.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,m,_,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Hd.g(),this.v=this.o?T_(this.o):T_(Hd),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(j){Y_(this,j);return}if(u=_||"",_=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var L in I)_.set(L,I[L]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const j of I.keys())_.set(j,I.get(j));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(_.keys()).find(j=>j.toLowerCase()=="content-type"),L=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(lk,m,void 0))||I||L||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[j,H]of _)this.g.setRequestHeader(j,H);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Z_(this),this.u=!0,this.g.send(u),this.u=!1}catch(j){Y_(this,j)}};function Y_(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,X_(u),hc(u)}function X_(u){u.A||(u.A=!0,Dt(u,"complete"),Dt(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Dt(this,"complete"),Dt(this,"abort"),hc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),hc(this,!0)),$e.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?J_(this):this.bb())},t.bb=function(){J_(this)};function J_(u){if(u.h&&typeof o<"u"&&(!u.v[1]||Zn(u)!=4||u.Z()!=2)){if(u.u&&Zn(u)==4)w_(u.Ea,0,u);else if(Dt(u,"readystatechange"),Zn(u)==4){u.h=!1;try{const H=u.Z();e:switch(H){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var _;if(!(_=m)){var I;if(I=H===0){var L=String(u.D).match(B_)[1]||null;!L&&a.self&&a.self.location&&(L=a.self.location.protocol.slice(0,-1)),I=!ak.test(L?L.toLowerCase():"")}_=I}if(_)Dt(u,"complete"),Dt(u,"success");else{u.m=6;try{var j=2<Zn(u)?u.g.statusText:""}catch{j=""}u.l=j+" ["+u.Z()+"]",X_(u)}}finally{hc(u)}}}}function hc(u,m){if(u.g){Z_(u);const _=u.g,I=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||Dt(u,"ready");try{_.onreadystatechange=I}catch{}}}function Z_(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function Zn(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<Zn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),UI(m)}};function ev(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function ck(u){const m={};u=(u.g&&2<=Zn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<u.length;I++){if(w(u[I]))continue;var _=A(u[I]);const L=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const j=m[L]||[];m[L]=j,j.push(_)}S(m,function(I){return I.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Qo(u,m,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||m}function tv(u){this.Aa=0,this.i=[],this.j=new Bo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Qo("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Qo("baseRetryDelayMs",5e3,u),this.cb=Qo("retryDelaySeedMs",1e4,u),this.Wa=Qo("forwardChannelMaxRetries",2,u),this.wa=Qo("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new L_(u&&u.concurrentRequestLimit),this.Da=new sk,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=tv.prototype,t.la=8,t.G=1,t.connect=function(u,m,_,I){Mt(0),this.W=u,this.H=m||{},_&&I!==void 0&&(this.H.OSID=_,this.H.OAID=I),this.F=this.X,this.I=uv(this,null,this.W),fc(this)};function Jd(u){if(nv(u),u.G==3){var m=u.U++,_=Jn(u.I);if(ke(_,"SID",u.K),ke(_,"RID",m),ke(_,"TYPE","terminate"),Yo(u,_),m=new Di(u,u.j,m),m.L=2,m.v=lc(Jn(_)),_=!1,a.navigator&&a.navigator.sendBeacon)try{_=a.navigator.sendBeacon(m.v.toString(),"")}catch{}!_&&a.Image&&(new Image().src=m.v,_=!0),_||(m.g=hv(m.j,null),m.g.ea(m.v)),m.F=Date.now(),sc(m)}cv(u)}function dc(u){u.g&&(ef(u),u.g.cancel(),u.g=null)}function nv(u){dc(u),u.u&&(a.clearTimeout(u.u),u.u=null),pc(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function fc(u){if(!j_(u.h)&&!u.s){u.s=!0;var m=u.Ga;Y||q(),V||(Y(),V=!0),$.add(m,u),u.B=0}}function uk(u,m){return V_(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=zo(p(u.Ga,u,m),lv(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const L=new Di(this,this.j,u);let j=this.o;if(this.S&&(j?(j=E(j),k(j,this.S)):j=this.S),this.m!==null||this.O||(L.H=j,j=null),this.P)e:{for(var m=0,_=0;_<this.i.length;_++){t:{var I=this.i[_];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(m+=I,4096<m){m=_;break e}if(m===4096||_===this.i.length-1){m=_+1;break e}}m=1e3}else m=1e3;m=rv(this,L,m),_=Jn(this.I),ke(_,"RID",u),ke(_,"CVER",22),this.D&&ke(_,"X-HTTP-Session-Id",this.D),Yo(this,_),j&&(this.O?m="headers="+encodeURIComponent(String(Q_(j)))+"&"+m:this.m&&Xd(_,this.m,j)),Yd(this.h,L),this.Ua&&ke(_,"TYPE","init"),this.P?(ke(_,"$req",m),ke(_,"SID","null"),L.T=!0,qd(L,_,null)):qd(L,_,m),this.G=2}}else this.G==3&&(u?iv(this,u):this.i.length==0||j_(this.h)||iv(this))};function iv(u,m){var _;m?_=m.l:_=u.U++;const I=Jn(u.I);ke(I,"SID",u.K),ke(I,"RID",_),ke(I,"AID",u.T),Yo(u,I),u.m&&u.o&&Xd(I,u.m,u.o),_=new Di(u,u.j,_,u.B+1),u.m===null&&(_.H=u.o),m&&(u.i=m.D.concat(u.i)),m=rv(u,_,1e3),_.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Yd(u.h,_),qd(_,I,m)}function Yo(u,m){u.H&&M(u.H,function(_,I){ke(m,I,_)}),u.l&&z_({},function(_,I){ke(m,I,_)})}function rv(u,m,_){_=Math.min(u.i.length,_);var I=u.l?p(u.l.Na,u.l,u):null;e:{var L=u.i;let j=-1;for(;;){const H=["count="+_];j==-1?0<_?(j=L[0].g,H.push("ofs="+j)):j=0:H.push("ofs="+j);let Te=!0;for(let ct=0;ct<_;ct++){let me=L[ct].g;const vt=L[ct].map;if(me-=j,0>me)j=Math.max(0,L[ct].g-100),Te=!1;else try{ok(vt,H,"req"+me+"_")}catch{I&&I(vt)}}if(Te){I=H.join("&");break e}}}return u=u.i.splice(0,_),m.D=u,I}function sv(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;Y||q(),V||(Y(),V=!0),$.add(m,u),u.v=0}}function Zd(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=zo(p(u.Fa,u),lv(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,ov(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=zo(p(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Mt(10),dc(this),ov(this))};function ef(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function ov(u){u.g=new Di(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=Jn(u.qa);ke(m,"RID","rpc"),ke(m,"SID",u.K),ke(m,"AID",u.T),ke(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&ke(m,"TO",u.ja),ke(m,"TYPE","xmlhttp"),Yo(u,m),u.m&&u.o&&Xd(m,u.m,u.o),u.L&&(u.g.I=u.L);var _=u.g;u=u.ia,_.L=1,_.v=lc(Jn(m)),_.m=null,_.P=!0,D_(_,u)}t.Za=function(){this.C!=null&&(this.C=null,dc(this),Zd(this),Mt(19))};function pc(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function av(u,m){var _=null;if(u.g==m){pc(u),ef(u),u.g=null;var I=2}else if(Qd(u.h,m))_=m.D,F_(u.h,m),I=1;else return;if(u.G!=0){if(m.o)if(I==1){_=m.m?m.m.length:0,m=Date.now()-m.F;var L=u.B;I=nc(),Dt(I,new C_(I,_)),fc(u)}else sv(u);else if(L=m.s,L==3||L==0&&0<m.X||!(I==1&&uk(u,m)||I==2&&Zd(u)))switch(_&&0<_.length&&(m=u.h,m.i=m.i.concat(_)),L){case 1:Lr(u,5);break;case 4:Lr(u,10);break;case 3:Lr(u,6);break;default:Lr(u,2)}}}function lv(u,m){let _=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(_*=2),_*m}function Lr(u,m){if(u.j.info("Error code "+m),m==2){var _=p(u.fb,u),I=u.Xa;const L=!I;I=new Or(I||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||oc(I,"https"),lc(I),L?ik(I.toString(),_):rk(I.toString(),_)}else Mt(2);u.G=0,u.l&&u.l.sa(m),cv(u),nv(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Mt(2)):(this.j.info("Failed to ping google.com"),Mt(1))};function cv(u){if(u.G=0,u.ka=[],u.l){const m=U_(u.h);(m.length!=0||u.i.length!=0)&&(b(u.ka,m),b(u.ka,u.i),u.h.i.length=0,x(u.i),u.i.length=0),u.l.ra()}}function uv(u,m,_){var I=_ instanceof Or?Jn(_):new Or(_);if(I.g!="")m&&(I.g=m+"."+I.g),ac(I,I.s);else{var L=a.location;I=L.protocol,m=m?m+"."+L.hostname:L.hostname,L=+L.port;var j=new Or(null);I&&oc(j,I),m&&(j.g=m),L&&ac(j,L),_&&(j.l=_),I=j}return _=u.D,m=u.ya,_&&m&&ke(I,_,m),ke(I,"VER",u.la),Yo(u,I),I}function hv(u,m,_){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new $e(new cc({eb:_})):new $e(u.pa),m.Ha(u.J),m}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function dv(){}t=dv.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function mc(){}mc.prototype.g=function(u,m){return new Xt(u,m)};function Xt(u,m){_t.call(this),this.g=new tv(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!w(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!w(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new As(this)}y(Xt,_t),Xt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Xt.prototype.close=function(){Jd(this.g)},Xt.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.u&&(_={},_.__data__=Ud(u),u=_);m.i.push(new KI(m.Ya++,u)),m.G==3&&fc(m)},Xt.prototype.N=function(){this.g.l=null,delete this.j,Jd(this.g),delete this.g,Xt.aa.N.call(this)};function fv(u){Bd.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const _ in m){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}y(fv,Bd);function pv(){$d.call(this),this.status=1}y(pv,$d);function As(u){this.g=u}y(As,dv),As.prototype.ua=function(){Dt(this.g,"a")},As.prototype.ta=function(u){Dt(this.g,new fv(u))},As.prototype.sa=function(u){Dt(this.g,new pv)},As.prototype.ra=function(){Dt(this.g,"b")},mc.prototype.createWebChannel=mc.prototype.g,Xt.prototype.send=Xt.prototype.o,Xt.prototype.open=Xt.prototype.m,Xt.prototype.close=Xt.prototype.close,QT=function(){return new mc},GT=function(){return nc()},KT=Dr,cm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ic.NO_ERROR=0,ic.TIMEOUT=8,ic.HTTP_ERROR=6,vu=ic,A_.COMPLETE="complete",qT=A_,S_.EventType=Fo,Fo.OPEN="a",Fo.CLOSE="b",Fo.ERROR="c",Fo.MESSAGE="d",_t.prototype.listen=_t.prototype.K,_a=S_,$e.prototype.listenOnce=$e.prototype.L,$e.prototype.getLastError=$e.prototype.Ka,$e.prototype.getLastErrorCode=$e.prototype.Ba,$e.prototype.getStatus=$e.prototype.Z,$e.prototype.getResponseJson=$e.prototype.Oa,$e.prototype.getResponseText=$e.prototype.oa,$e.prototype.send=$e.prototype.ea,$e.prototype.setWithCredentials=$e.prototype.Ha,WT=$e}).apply(typeof Oc<"u"?Oc:typeof self<"u"?self:typeof window<"u"?window:{});const a1="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}St.UNAUTHENTICATED=new St(null),St.GOOGLE_CREDENTIALS=new St("google-credentials-uid"),St.FIRST_PARTY=new St("first-party-uid"),St.MOCK_USER=new St("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mo="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fs=new Bg("@firebase/firestore");function sa(){return fs.logLevel}function Q(t,...e){if(fs.logLevel<=he.DEBUG){const n=e.map(ey);fs.debug(`Firestore (${Mo}): ${t}`,...n)}}function Si(t,...e){if(fs.logLevel<=he.ERROR){const n=e.map(ey);fs.error(`Firestore (${Mo}): ${t}`,...n)}}function _o(t,...e){if(fs.logLevel<=he.WARN){const n=e.map(ey);fs.warn(`Firestore (${Mo}): ${t}`,...n)}}function ey(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ee(t="Unexpected state"){const e=`FIRESTORE (${Mo}) INTERNAL ASSERTION FAILED: `+t;throw Si(e),new Error(e)}function xe(t,e){t||ee()}function ne(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class K extends Yn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class $D{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(St.UNAUTHENTICATED))}shutdown(){}}class HD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class WD{constructor(e){this.t=e,this.currentUser=St.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){xe(this.o===void 0);let i=this.i;const r=l=>this.i!==i?(i=this.i,n(l)):Promise.resolve();let s=new _i;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new _i,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await r(this.currentUser)})},a=l=>{Q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(Q("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new _i)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(Q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(xe(typeof i.accessToken=="string"),new YT(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return xe(e===null||typeof e=="string"),new St(e)}}class qD{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=St.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class KD{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new qD(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(St.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class GD{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class QD{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){xe(this.o===void 0);const i=s=>{s.error!=null&&Q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,Q("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};const r=s=>{Q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?r(s):Q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(xe(typeof n.token=="string"),this.R=n.token,new GD(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YD(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XT{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const r=YD(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<n&&(i+=e.charAt(r[s]%e.length))}return i}}function ge(t,e){return t<e?-1:t>e?1:0}function vo(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new K(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new K(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new K(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new K(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return rt.fromMillis(Date.now())}static fromDate(e){return rt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new rt(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ge(this.nanoseconds,e.nanoseconds):ge(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.timestamp=e}static fromTimestamp(e){return new te(e)}static min(){return new te(new rt(0,0))}static max(){return new te(new rt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{constructor(e,n,i){n===void 0?n=0:n>e.length&&ee(),i===void 0?i=e.length-n:i>e.length-n&&ee(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return ml.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ml?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const s=e.get(r),o=n.get(r);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ce extends ml{construct(e,n,i){return new Ce(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new K(F.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new Ce(n)}static emptyPath(){return new Ce([])}}const XD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class dt extends ml{construct(e,n,i){return new dt(e,n,i)}static isValidIdentifier(e){return XD.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),dt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new dt(["__name__"])}static fromServerFormat(e){const n=[];let i="",r=0;const s=()=>{if(i.length===0)throw new K(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let o=!1;for(;r<e.length;){const a=e[r];if(a==="\\"){if(r+1===e.length)throw new K(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new K(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=l,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(i+=a,r++):(s(),r++)}if(s(),o)throw new K(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new dt(n)}static emptyPath(){return new dt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.path=e}static fromPath(e){return new J(Ce.fromString(e))}static fromName(e){return new J(Ce.fromString(e).popFirst(5))}static empty(){return new J(Ce.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ce.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ce.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new J(new Ce(e.slice()))}}function JD(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=te.fromTimestamp(i===1e9?new rt(n+1,0):new rt(n,i));return new xr(r,J.empty(),e)}function ZD(t){return new xr(t.readTime,t.key,-1)}class xr{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new xr(te.min(),J.empty(),-1)}static max(){return new xr(te.max(),J.empty(),-1)}}function eM(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=J.comparator(t.documentKey,e.documentKey),n!==0?n:ge(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class nM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hl(t){if(t.code!==F.FAILED_PRECONDITION||t.message!==tM)throw t;Q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ee(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new z((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(n,s).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof z?n:z.resolve(n)}catch(n){return z.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):z.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):z.reject(n)}static resolve(e){return new z((n,i)=>{n(e)})}static reject(e){return new z((n,i)=>{i(e)})}static waitFor(e){return new z((n,i)=>{let r=0,s=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++s,o&&s===r&&n()},l=>i(l))}),o=!0,s===r&&n()})}static or(e){let n=z.resolve(!1);for(const i of e)n=n.next(r=>r?z.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,s)=>{i.push(n.call(this,r,s))}),this.waitFor(i)}static mapArray(e,n){return new z((i,r)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(h=>{o[c]=h,++a,a===s&&i(o)},h=>r(h))}})}static doWhile(e,n){return new z((i,r)=>{const s=()=>{e()===!0?n().next(()=>{s()},r):i()};s()})}}function iM(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Wl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ty{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ie(i),this.se=i=>n.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}ty.oe=-1;function sd(t){return t==null}function gh(t){return t===0&&1/t==-1/0}function rM(t){return typeof t=="number"&&Number.isInteger(t)&&!gh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l1(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ss(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function JT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(e,n){this.comparator=e,this.root=n||ht.EMPTY}insert(e,n){return new Be(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ht.BLACK,null,null))}remove(e){return new Be(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ht.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Lc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Lc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Lc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Lc(this.root,e,this.comparator,!0)}}class Lc{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?i(e.key,n):1,n&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ht{constructor(e,n,i,r,s){this.key=e,this.value=n,this.color=i??ht.RED,this.left=r??ht.EMPTY,this.right=s??ht.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,s){return new ht(e??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,n,i),null):s===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ht.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return ht.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ht.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ht.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ee();const e=this.left.check();if(e!==this.right.check())throw ee();return e+(this.isRed()?0:1)}}ht.EMPTY=null,ht.RED=!0,ht.BLACK=!1;ht.EMPTY=new class{constructor(){this.size=0}get key(){throw ee()}get value(){throw ee()}get color(){throw ee()}get left(){throw ee()}get right(){throw ee()}copy(e,n,i,r,s){return this}insert(e,n,i){return new ht(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e){this.comparator=e,this.data=new Be(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new c1(this.data.getIterator())}getIteratorFrom(e){return new c1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof pt)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new pt(this.comparator);return n.data=e,n}}class c1{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.fields=e,e.sort(dt.comparator)}static empty(){return new nn([])}unionWith(e){let n=new pt(dt.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new nn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return vo(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new ZT("Invalid base64 string: "+s):s}}(e);return new gt(n)}static fromUint8Array(e){const n=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(e);return new gt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ge(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}gt.EMPTY_BYTE_STRING=new gt("");const sM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Er(t){if(xe(!!t),typeof t=="string"){let e=0;const n=sM.exec(t);if(xe(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Ge(t.seconds),nanos:Ge(t.nanos)}}function Ge(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ps(t){return typeof t=="string"?gt.fromBase64String(t):gt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ny(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function iy(t){const e=t.mapValue.fields.__previous_value__;return ny(e)?iy(e):e}function gl(t){const e=Er(t.mapValue.fields.__local_write_time__.timestampValue);return new rt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oM{constructor(e,n,i,r,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class yl{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new yl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof yl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jc={mapValue:{}};function ms(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ny(t)?4:lM(t)?9007199254740991:aM(t)?10:11:ee()}function Qn(t,e){if(t===e)return!0;const n=ms(t);if(n!==ms(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return gl(t).isEqual(gl(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const o=Er(r.timestampValue),a=Er(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,s){return ps(r.bytesValue).isEqual(ps(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,s){return Ge(r.geoPointValue.latitude)===Ge(s.geoPointValue.latitude)&&Ge(r.geoPointValue.longitude)===Ge(s.geoPointValue.longitude)}(t,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Ge(r.integerValue)===Ge(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const o=Ge(r.doubleValue),a=Ge(s.doubleValue);return o===a?gh(o)===gh(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return vo(t.arrayValue.values||[],e.arrayValue.values||[],Qn);case 10:case 11:return function(r,s){const o=r.mapValue.fields||{},a=s.mapValue.fields||{};if(l1(o)!==l1(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Qn(o[l],a[l])))return!1;return!0}(t,e);default:return ee()}}function _l(t,e){return(t.values||[]).find(n=>Qn(n,e))!==void 0}function wo(t,e){if(t===e)return 0;const n=ms(t),i=ms(e);if(n!==i)return ge(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return ge(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Ge(s.integerValue||s.doubleValue),l=Ge(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return u1(t.timestampValue,e.timestampValue);case 4:return u1(gl(t),gl(e));case 5:return ge(t.stringValue,e.stringValue);case 6:return function(s,o){const a=ps(s),l=ps(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=ge(a[c],l[c]);if(h!==0)return h}return ge(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=ge(Ge(s.latitude),Ge(o.latitude));return a!==0?a:ge(Ge(s.longitude),Ge(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return h1(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,c,h;const d=s.fields||{},p=o.fields||{},g=(a=d.value)===null||a===void 0?void 0:a.arrayValue,y=(l=p.value)===null||l===void 0?void 0:l.arrayValue,x=ge(((c=g==null?void 0:g.values)===null||c===void 0?void 0:c.length)||0,((h=y==null?void 0:y.values)===null||h===void 0?void 0:h.length)||0);return x!==0?x:h1(g,y)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===jc.mapValue&&o===jc.mapValue)return 0;if(s===jc.mapValue)return 1;if(o===jc.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let d=0;d<l.length&&d<h.length;++d){const p=ge(l[d],h[d]);if(p!==0)return p;const g=wo(a[l[d]],c[h[d]]);if(g!==0)return g}return ge(l.length,h.length)}(t.mapValue,e.mapValue);default:throw ee()}}function u1(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ge(t,e);const n=Er(t),i=Er(e),r=ge(n.seconds,i.seconds);return r!==0?r:ge(n.nanos,i.nanos)}function h1(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const s=wo(n[r],i[r]);if(s)return s}return ge(n.length,i.length)}function xo(t){return um(t)}function um(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=Er(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ps(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return J.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(const s of n.values||[])r?r=!1:i+=",",i+=um(s);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",s=!0;for(const o of i)s?s=!1:r+=",",r+=`${o}:${um(n.fields[o])}`;return r+"}"}(t.mapValue):ee()}function d1(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function hm(t){return!!t&&"integerValue"in t}function ry(t){return!!t&&"arrayValue"in t}function f1(t){return!!t&&"nullValue"in t}function p1(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function wu(t){return!!t&&"mapValue"in t}function aM(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Va(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ss(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=Va(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Va(t.arrayValue.values[n]);return e}return Object.assign({},t)}function lM(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this.value=e}static empty(){return new Ht({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!wu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Va(n)}setAll(e){let n=dt.emptyPath(),i={},r=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,i,r),i={},r=[],n=a.popLast()}o?i[a.lastSegment()]=Va(o):r.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,i,r)}delete(e){const n=this.field(e.popLast());wu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Qn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];wu(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){Ss(n,(r,s)=>e[r]=s);for(const r of i)delete e[r]}clone(){return new Ht(Va(this.value))}}function e2(t){const e=[];return Ss(t.fields,(n,i)=>{const r=new dt([n]);if(wu(i)){const s=e2(i.mapValue).fields;if(s.length===0)e.push(r);else for(const o of s)e.push(r.child(o))}else e.push(r)}),new nn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e,n,i,r,s,o,a){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new kt(e,0,te.min(),te.min(),te.min(),Ht.empty(),0)}static newFoundDocument(e,n,i,r){return new kt(e,1,n,te.min(),i,r,0)}static newNoDocument(e,n){return new kt(e,2,n,te.min(),te.min(),Ht.empty(),0)}static newUnknownDocument(e,n){return new kt(e,3,n,te.min(),te.min(),Ht.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ht.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ht.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof kt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new kt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh{constructor(e,n){this.position=e,this.inclusive=n}}function m1(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const s=e[r],o=t.position[r];if(s.field.isKeyField()?i=J.comparator(J.fromName(o.referenceValue),n.key):i=wo(o,n.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function g1(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Qn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(e,n="asc"){this.field=e,this.dir=n}}function cM(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2{}class Ze extends t2{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new hM(e,n,i):n==="array-contains"?new pM(e,i):n==="in"?new mM(e,i):n==="not-in"?new gM(e,i):n==="array-contains-any"?new yM(e,i):new Ze(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new dM(e,i):new fM(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(wo(n,this.value)):n!==null&&ms(this.value)===ms(n)&&this.matchesComparison(wo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ee()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Nn extends t2{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Nn(e,n)}matches(e){return n2(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function n2(t){return t.op==="and"}function i2(t){return uM(t)&&n2(t)}function uM(t){for(const e of t.filters)if(e instanceof Nn)return!1;return!0}function dm(t){if(t instanceof Ze)return t.field.canonicalString()+t.op.toString()+xo(t.value);if(i2(t))return t.filters.map(e=>dm(e)).join(",");{const e=t.filters.map(n=>dm(n)).join(",");return`${t.op}(${e})`}}function r2(t,e){return t instanceof Ze?function(i,r){return r instanceof Ze&&i.op===r.op&&i.field.isEqual(r.field)&&Qn(i.value,r.value)}(t,e):t instanceof Nn?function(i,r){return r instanceof Nn&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,o,a)=>s&&r2(o,r.filters[a]),!0):!1}(t,e):void ee()}function s2(t){return t instanceof Ze?function(n){return`${n.field.canonicalString()} ${n.op} ${xo(n.value)}`}(t):t instanceof Nn?function(n){return n.op.toString()+" {"+n.getFilters().map(s2).join(" ,")+"}"}(t):"Filter"}class hM extends Ze{constructor(e,n,i){super(e,n,i),this.key=J.fromName(i.referenceValue)}matches(e){const n=J.comparator(e.key,this.key);return this.matchesComparison(n)}}class dM extends Ze{constructor(e,n){super(e,"in",n),this.keys=o2("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class fM extends Ze{constructor(e,n){super(e,"not-in",n),this.keys=o2("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function o2(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>J.fromName(i.referenceValue))}class pM extends Ze{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return ry(n)&&_l(n.arrayValue,this.value)}}class mM extends Ze{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&_l(this.value.arrayValue,n)}}class gM extends Ze{constructor(e,n){super(e,"not-in",n)}matches(e){if(_l(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!_l(this.value.arrayValue,n)}}class yM extends Ze{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!ry(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>_l(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _M{constructor(e,n=null,i=[],r=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function y1(t,e=null,n=[],i=[],r=null,s=null,o=null){return new _M(t,e,n,i,r,s,o)}function sy(t){const e=ne(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>dm(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),sd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>xo(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>xo(i)).join(",")),e.ue=n}return e.ue}function oy(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!cM(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!r2(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!g1(t.startAt,e.startAt)&&g1(t.endAt,e.endAt)}function fm(t){return J.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(e,n=null,i=[],r=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function vM(t,e,n,i,r,s,o,a){return new Oo(t,e,n,i,r,s,o,a)}function od(t){return new Oo(t)}function _1(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function a2(t){return t.collectionGroup!==null}function Fa(t){const e=ne(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new pt(dt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new vl(s,i))}),n.has(dt.keyField().canonicalString())||e.ce.push(new vl(dt.keyField(),i))}return e.ce}function qn(t){const e=ne(t);return e.le||(e.le=wM(e,Fa(t))),e.le}function wM(t,e){if(t.limitType==="F")return y1(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const s=r.dir==="desc"?"asc":"desc";return new vl(r.field,s)});const n=t.endAt?new yh(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new yh(t.startAt.position,t.startAt.inclusive):null;return y1(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function pm(t,e){const n=t.filters.concat([e]);return new Oo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function mm(t,e,n){return new Oo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ad(t,e){return oy(qn(t),qn(e))&&t.limitType===e.limitType}function l2(t){return`${sy(qn(t))}|lt:${t.limitType}`}function Ls(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>s2(r)).join(", ")}]`),sd(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>xo(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>xo(r)).join(",")),`Target(${i})`}(qn(t))}; limitType=${t.limitType})`}function ld(t,e){return e.isFoundDocument()&&function(i,r){const s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):J.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(t,e)&&function(i,r){for(const s of Fa(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(t,e)&&function(i,r){for(const s of i.filters)if(!s.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(o,a,l){const c=m1(o,a,l);return o.inclusive?c<=0:c<0}(i.startAt,Fa(i),r)||i.endAt&&!function(o,a,l){const c=m1(o,a,l);return o.inclusive?c>=0:c>0}(i.endAt,Fa(i),r))}(t,e)}function xM(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function c2(t){return(e,n)=>{let i=!1;for(const r of Fa(t)){const s=EM(r,e,n);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function EM(t,e,n){const i=t.field.isKeyField()?J.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?wo(l,c):ee()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return ee()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Ss(this.inner,(n,i)=>{for(const[r,s]of i)e(r,s)})}isEmpty(){return JT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bM=new Be(J.comparator);function Ii(){return bM}const u2=new Be(J.comparator);function va(...t){let e=u2;for(const n of t)e=e.insert(n.key,n);return e}function h2(t){let e=u2;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function Qr(){return Ua()}function d2(){return Ua()}function Ua(){return new Lo(t=>t.toString(),(t,e)=>t.isEqual(e))}const TM=new Be(J.comparator),SM=new pt(J.comparator);function ce(...t){let e=SM;for(const n of t)e=e.add(n);return e}const IM=new pt(ge);function kM(){return IM}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ay(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:gh(e)?"-0":e}}function f2(t){return{integerValue:""+t}}function PM(t,e){return rM(e)?f2(e):ay(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(){this._=void 0}}function CM(t,e,n){return t instanceof wl?function(r,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&ny(s)&&(s=iy(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof xl?m2(t,e):t instanceof El?g2(t,e):function(r,s){const o=p2(r,s),a=v1(o)+v1(r.Pe);return hm(o)&&hm(r.Pe)?f2(a):ay(r.serializer,a)}(t,e)}function AM(t,e,n){return t instanceof xl?m2(t,e):t instanceof El?g2(t,e):n}function p2(t,e){return t instanceof _h?function(i){return hm(i)||function(s){return!!s&&"doubleValue"in s}(i)}(e)?e:{integerValue:0}:null}class wl extends cd{}class xl extends cd{constructor(e){super(),this.elements=e}}function m2(t,e){const n=y2(e);for(const i of t.elements)n.some(r=>Qn(r,i))||n.push(i);return{arrayValue:{values:n}}}class El extends cd{constructor(e){super(),this.elements=e}}function g2(t,e){let n=y2(e);for(const i of t.elements)n=n.filter(r=>!Qn(r,i));return{arrayValue:{values:n}}}class _h extends cd{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function v1(t){return Ge(t.integerValue||t.doubleValue)}function y2(t){return ry(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RM{constructor(e,n){this.field=e,this.transform=n}}function NM(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof xl&&r instanceof xl||i instanceof El&&r instanceof El?vo(i.elements,r.elements,Qn):i instanceof _h&&r instanceof _h?Qn(i.Pe,r.Pe):i instanceof wl&&r instanceof wl}(t.transform,e.transform)}class DM{constructor(e,n){this.version=e,this.transformResults=n}}class gn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new gn}static exists(e){return new gn(void 0,e)}static updateTime(e){return new gn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function xu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class ud{}function _2(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new ly(t.key,gn.none()):new ql(t.key,t.data,gn.none());{const n=t.data,i=Ht.empty();let r=new pt(dt.comparator);for(let s of e.fields)if(!r.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?i.delete(s):i.set(s,o),r=r.add(s)}return new Ar(t.key,i,new nn(r.toArray()),gn.none())}}function MM(t,e,n){t instanceof ql?function(r,s,o){const a=r.value.clone(),l=x1(r.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Ar?function(r,s,o){if(!xu(r.precondition,s))return void s.convertToUnknownDocument(o.version);const a=x1(r.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(v2(r)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function za(t,e,n,i){return t instanceof ql?function(s,o,a,l){if(!xu(s.precondition,o))return a;const c=s.value.clone(),h=E1(s.fieldTransforms,l,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,i):t instanceof Ar?function(s,o,a,l){if(!xu(s.precondition,o))return a;const c=E1(s.fieldTransforms,l,o),h=o.data;return h.setAll(v2(s)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,i):function(s,o,a){return xu(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function OM(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),s=p2(i.transform,r||null);s!=null&&(n===null&&(n=Ht.empty()),n.set(i.field,s))}return n||null}function w1(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&vo(i,r,(s,o)=>NM(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ql extends ud{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Ar extends ud{constructor(e,n,i,r,s=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function v2(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function x1(t,e,n){const i=new Map;xe(t.length===n.length);for(let r=0;r<n.length;r++){const s=t[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,AM(o,a,n[r]))}return i}function E1(t,e,n){const i=new Map;for(const r of t){const s=r.transform,o=n.data.field(r.field);i.set(r.field,CM(s,o,e))}return i}class ly extends ud{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class LM extends ud{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jM{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(e.key)&&MM(s,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=za(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=za(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=d2();return this.mutations.forEach(r=>{const s=e.get(r.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(r.key)?null:a;const l=_2(o,a);l!==null&&i.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(te.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ce())}isEqual(e){return this.batchId===e.batchId&&vo(this.mutations,e.mutations,(n,i)=>w1(n,i))&&vo(this.baseMutations,e.baseMutations,(n,i)=>w1(n,i))}}class cy{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){xe(e.mutations.length===i.length);let r=function(){return TM}();const s=e.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,i[o].version);return new cy(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VM{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FM{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xe,de;function UM(t){switch(t){default:return ee();case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0}}function w2(t){if(t===void 0)return Si("GRPC error has no .code"),F.UNKNOWN;switch(t){case Xe.OK:return F.OK;case Xe.CANCELLED:return F.CANCELLED;case Xe.UNKNOWN:return F.UNKNOWN;case Xe.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case Xe.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case Xe.INTERNAL:return F.INTERNAL;case Xe.UNAVAILABLE:return F.UNAVAILABLE;case Xe.UNAUTHENTICATED:return F.UNAUTHENTICATED;case Xe.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case Xe.NOT_FOUND:return F.NOT_FOUND;case Xe.ALREADY_EXISTS:return F.ALREADY_EXISTS;case Xe.PERMISSION_DENIED:return F.PERMISSION_DENIED;case Xe.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case Xe.ABORTED:return F.ABORTED;case Xe.OUT_OF_RANGE:return F.OUT_OF_RANGE;case Xe.UNIMPLEMENTED:return F.UNIMPLEMENTED;case Xe.DATA_LOSS:return F.DATA_LOSS;default:return ee()}}(de=Xe||(Xe={}))[de.OK=0]="OK",de[de.CANCELLED=1]="CANCELLED",de[de.UNKNOWN=2]="UNKNOWN",de[de.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",de[de.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",de[de.NOT_FOUND=5]="NOT_FOUND",de[de.ALREADY_EXISTS=6]="ALREADY_EXISTS",de[de.PERMISSION_DENIED=7]="PERMISSION_DENIED",de[de.UNAUTHENTICATED=16]="UNAUTHENTICATED",de[de.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",de[de.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",de[de.ABORTED=10]="ABORTED",de[de.OUT_OF_RANGE=11]="OUT_OF_RANGE",de[de.UNIMPLEMENTED=12]="UNIMPLEMENTED",de[de.INTERNAL=13]="INTERNAL",de[de.UNAVAILABLE=14]="UNAVAILABLE",de[de.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zM(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BM=new es([4294967295,4294967295],0);function b1(t){const e=zM().encode(t),n=new HT;return n.update(e),new Uint8Array(n.digest())}function T1(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new es([n,i],0),new es([r,s],0)]}class uy{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new wa(`Invalid padding: ${n}`);if(i<0)throw new wa(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new wa(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new wa(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=es.fromNumber(this.Ie)}Ee(e,n,i){let r=e.add(n.multiply(es.fromNumber(i)));return r.compare(BM)===1&&(r=new es([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=b1(e),[i,r]=T1(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(i,r,s);if(!this.de(o))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new uy(s,r,n);return i.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=b1(e),[i,r]=T1(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(i,r,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class wa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd{constructor(e,n,i,r,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,Kl.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new hd(te.min(),r,new Be(ge),Ii(),ce())}}class Kl{constructor(e,n,i,r,s){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Kl(i,n,ce(),ce(),ce())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu{constructor(e,n,i,r){this.Re=e,this.removedTargetIds=n,this.key=i,this.Ve=r}}class x2{constructor(e,n){this.targetId=e,this.me=n}}class E2{constructor(e,n,i=gt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class S1{constructor(){this.fe=0,this.ge=k1(),this.pe=gt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ce(),n=ce(),i=ce();return this.ge.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:ee()}}),new Kl(this.pe,this.ye,e,n,i)}Ce(){this.we=!1,this.ge=k1()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,xe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class $M{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ii(),this.qe=I1(),this.Qe=new Be(ge)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const i=this.Ge(n);switch(e.state){case 0:this.ze(n)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),i.De(e.resumeToken));break;default:ee()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((i,r)=>{this.ze(r)&&n(r)})}He(e){const n=e.targetId,i=e.me.count,r=this.Je(n);if(r){const s=r.target;if(fm(s))if(i===0){const o=new J(s.path);this.Ue(n,o,kt.newNoDocument(o,te.min()))}else xe(i===1);else{const o=this.Ye(n);if(o!==i){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=n;let o,a;try{o=ps(i).toUint8Array()}catch(l){if(l instanceof ZT)return _o("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new uy(o,r,s)}catch(l){return _o(l instanceof wa?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,i){return n.me.count===i-this.nt(e,n.targetId)?0:2}nt(e,n){const i=this.Le.getRemoteKeysForTarget(n);let r=0;return i.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),r++)}),r}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&fm(a.target)){const l=new J(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,kt.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let i=ce();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const r=new hd(e,n,this.Qe,this.ke,i);return this.ke=Ii(),this.qe=I1(),this.Qe=new Be(ge),r}$e(e,n){if(!this.ze(e))return;const i=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,i),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,i){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,n)?r.Fe(n,1):r.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),i&&(this.ke=this.ke.insert(n,i))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new S1,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new pt(ge),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||Q("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new S1),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function I1(){return new Be(J.comparator)}function k1(){return new Be(J.comparator)}const HM={asc:"ASCENDING",desc:"DESCENDING"},WM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},qM={and:"AND",or:"OR"};class KM{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function gm(t,e){return t.useProto3Json||sd(e)?e:{value:e}}function vh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function b2(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function GM(t,e){return vh(t,e.toTimestamp())}function Kn(t){return xe(!!t),te.fromTimestamp(function(n){const i=Er(n);return new rt(i.seconds,i.nanos)}(t))}function hy(t,e){return ym(t,e).canonicalString()}function ym(t,e){const n=function(r){return new Ce(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function T2(t){const e=Ce.fromString(t);return xe(C2(e)),e}function _m(t,e){return hy(t.databaseId,e.path)}function jf(t,e){const n=T2(e);if(n.get(1)!==t.databaseId.projectId)throw new K(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new K(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new J(I2(n))}function S2(t,e){return hy(t.databaseId,e)}function QM(t){const e=T2(t);return e.length===4?Ce.emptyPath():I2(e)}function vm(t){return new Ce(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function I2(t){return xe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function P1(t,e,n){return{name:_m(t,e),fields:n.value.mapValue.fields}}function YM(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ee()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(xe(h===void 0||typeof h=="string"),gt.fromBase64String(h||"")):(xe(h===void 0||h instanceof Buffer||h instanceof Uint8Array),gt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=c.code===void 0?F.UNKNOWN:w2(c.code);return new K(h,c.message||"")}(o);n=new E2(i,r,s,a||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=jf(t,i.document.name),s=Kn(i.document.updateTime),o=i.document.createTime?Kn(i.document.createTime):te.min(),a=new Ht({mapValue:{fields:i.document.fields}}),l=kt.newFoundDocument(r,s,o,a),c=i.targetIds||[],h=i.removedTargetIds||[];n=new Eu(c,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=jf(t,i.document),s=i.readTime?Kn(i.readTime):te.min(),o=kt.newNoDocument(r,s),a=i.removedTargetIds||[];n=new Eu([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=jf(t,i.document),s=i.removedTargetIds||[];n=new Eu([],s,r,null)}else{if(!("filter"in e))return ee();{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:s}=i,o=new FM(r,s),a=i.targetId;n=new x2(a,o)}}return n}function XM(t,e){let n;if(e instanceof ql)n={update:P1(t,e.key,e.value)};else if(e instanceof ly)n={delete:_m(t,e.key)};else if(e instanceof Ar)n={update:P1(t,e.key,e.data),updateMask:oO(e.fieldMask)};else{if(!(e instanceof LM))return ee();n={verify:_m(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(s,o){const a=o.transform;if(a instanceof wl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof xl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof El)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof _h)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw ee()}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:GM(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ee()}(t,e.precondition)),n}function JM(t,e){return t&&t.length>0?(xe(e!==void 0),t.map(n=>function(r,s){let o=r.updateTime?Kn(r.updateTime):Kn(s);return o.isEqual(te.min())&&(o=Kn(s)),new DM(o,r.transformResults||[])}(n,e))):[]}function ZM(t,e){return{documents:[S2(t,e.path)]}}function eO(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=S2(t,r);const s=function(c){if(c.length!==0)return P2(Nn.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(h=>function(p){return{field:js(p.field),direction:iO(p.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=gm(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:r}}function tO(t){let e=QM(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){xe(i===1);const h=n.from[0];h.allDescendants?r=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(d){const p=k2(d);return p instanceof Nn&&i2(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(p=>function(y){return new vl(Vs(y.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(d){let p;return p=typeof d=="object"?d.value:d,sd(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(d){const p=!!d.before,g=d.values||[];return new yh(g,p)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const p=!d.before,g=d.values||[];return new yh(g,p)}(n.endAt)),vM(e,r,o,s,a,"F",l,c)}function nO(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ee()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function k2(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Vs(n.unaryFilter.field);return Ze.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=Vs(n.unaryFilter.field);return Ze.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Vs(n.unaryFilter.field);return Ze.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Vs(n.unaryFilter.field);return Ze.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ee()}}(t):t.fieldFilter!==void 0?function(n){return Ze.create(Vs(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ee()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Nn.create(n.compositeFilter.filters.map(i=>k2(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return ee()}}(n.compositeFilter.op))}(t):ee()}function iO(t){return HM[t]}function rO(t){return WM[t]}function sO(t){return qM[t]}function js(t){return{fieldPath:t.canonicalString()}}function Vs(t){return dt.fromServerFormat(t.fieldPath)}function P2(t){return t instanceof Ze?function(n){if(n.op==="=="){if(p1(n.value))return{unaryFilter:{field:js(n.field),op:"IS_NAN"}};if(f1(n.value))return{unaryFilter:{field:js(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(p1(n.value))return{unaryFilter:{field:js(n.field),op:"IS_NOT_NAN"}};if(f1(n.value))return{unaryFilter:{field:js(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:js(n.field),op:rO(n.op),value:n.value}}}(t):t instanceof Nn?function(n){const i=n.getFilters().map(r=>P2(r));return i.length===1?i[0]:{compositeFilter:{op:sO(n.op),filters:i}}}(t):ee()}function oO(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function C2(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(e,n,i,r,s=te.min(),o=te.min(),a=gt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Ji(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ji(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ji(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ji(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aO{constructor(e){this.ct=e}}function lO(t){const e=tO({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?mm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cO{constructor(){this.un=new uO}addToCollectionParentIndex(e,n){return this.un.add(n),z.resolve()}getCollectionParents(e,n){return z.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return z.resolve()}deleteFieldIndex(e,n){return z.resolve()}deleteAllFieldIndexes(e){return z.resolve()}createTargetIndexes(e,n){return z.resolve()}getDocumentsMatchingTarget(e,n){return z.resolve(null)}getIndexType(e,n){return z.resolve(0)}getFieldIndexes(e,n){return z.resolve([])}getNextCollectionGroupToUpdate(e){return z.resolve(null)}getMinOffset(e,n){return z.resolve(xr.min())}getMinOffsetFromCollectionGroup(e,n){return z.resolve(xr.min())}updateCollectionGroup(e,n,i){return z.resolve()}updateIndexEntries(e,n){return z.resolve()}}class uO{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new pt(Ce.comparator),s=!r.has(i);return this.index[n]=r.add(i),s}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new pt(Ce.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Eo(0)}static kn(){return new Eo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hO{constructor(){this.changes=new Lo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,kt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?z.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dO{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fO{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&za(i.mutation,r,nn.empty(),rt.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,ce()).next(()=>i))}getLocalViewOfDocuments(e,n,i=ce()){const r=Qr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(s=>{let o=va();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const i=Qr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,ce()))}populateOverlays(e,n,i){const r=[];return i.forEach(s=>{n.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,i,r){let s=Ii();const o=Ua(),a=function(){return Ua()}();return n.forEach((l,c)=>{const h=i.get(c.key);r.has(c.key)&&(h===void 0||h.mutation instanceof Ar)?s=s.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),za(h.mutation,c,h.mutation.getFieldMask(),rt.now())):o.set(c.key,nn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>{var d;return a.set(c,new dO(h,(d=o.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){const i=Ua();let r=new Be((o,a)=>o-a),s=ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let h=i.get(l)||nn.empty();h=a.applyToLocalView(c,h),i.set(l,h);const d=(r.get(a.batchId)||ce()).add(l);r=r.insert(a.batchId,d)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,d=d2();h.forEach(p=>{if(!s.has(p)){const g=_2(n.get(p),i.get(p));g!==null&&d.set(p,g),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return z.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(o){return J.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):a2(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(s=>{const o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-s.size):z.resolve(Qr());let a=-1,l=s;return o.next(c=>z.forEach(c,(h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(h)?z.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{l=l.insert(h,p)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,ce())).next(h=>({batchId:a,changes:h2(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new J(n)).next(i=>{let r=va();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const s=n.collectionGroup;let o=va();return this.indexManager.getCollectionParents(e,s).next(a=>z.forEach(a,l=>{const c=function(d,p){return new Oo(p,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,i,r).next(h=>{h.forEach((d,p)=>{o=o.insert(d,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,s,r))).next(o=>{s.forEach((l,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,kt.newInvalidDocument(h)))});let a=va();return o.forEach((l,c)=>{const h=s.get(l);h!==void 0&&za(h.mutation,c,nn.empty(),rt.now()),ld(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pO{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return z.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:Kn(r.createTime)}}(n)),z.resolve()}getNamedQuery(e,n){return z.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(r){return{name:r.name,query:lO(r.bundledQuery),readTime:Kn(r.readTime)}}(n)),z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mO{constructor(){this.overlays=new Be(J.comparator),this.Ir=new Map}getOverlay(e,n){return z.resolve(this.overlays.get(n))}getOverlays(e,n){const i=Qr();return z.forEach(n,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,s)=>{this.ht(e,n,s)}),z.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.Ir.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(i)),z.resolve()}getOverlaysForCollection(e,n,i){const r=Qr(),s=n.length+1,o=new J(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>i&&r.set(l.getKey(),l)}return z.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let s=new Be((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>i){let h=s.get(c.largestBatchId);h===null&&(h=Qr(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=Qr(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=r)););return z.resolve(a)}ht(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const o=this.Ir.get(r.largestBatchId).delete(i.key);this.Ir.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new VM(n,i));let s=this.Ir.get(n);s===void 0&&(s=ce(),this.Ir.set(n,s)),this.Ir.set(n,s.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gO{constructor(){this.sessionToken=gt.EMPTY_BYTE_STRING}getSessionToken(e){return z.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dy{constructor(){this.Tr=new pt(st.Er),this.dr=new pt(st.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const i=new st(e,n);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Vr(new st(e,n))}mr(e,n){e.forEach(i=>this.removeReference(i,n))}gr(e){const n=new J(new Ce([])),i=new st(n,e),r=new st(n,e+1),s=[];return this.dr.forEachInRange([i,r],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new J(new Ce([])),i=new st(n,e),r=new st(n,e+1);let s=ce();return this.dr.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new st(e,0),i=this.Tr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class st{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return J.comparator(e.key,n.key)||ge(e.wr,n.wr)}static Ar(e,n){return ge(e.wr,n.wr)||J.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yO{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new pt(st.Er)}checkEmpty(e){return z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new jM(s,n,i,r);this.mutationQueue.push(o);for(const a of r)this.br=this.br.add(new st(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return z.resolve(o)}lookupMutationBatch(e,n){return z.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.vr(i),s=r<0?0:r;return z.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return z.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new st(n,0),r=new st(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([i,r],o=>{const a=this.Dr(o.wr);s.push(a)}),z.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new pt(ge);return n.forEach(r=>{const s=new st(r,0),o=new st(r,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{i=i.add(a.wr)})}),z.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let s=i;J.isDocumentKey(s)||(s=s.child(""));const o=new st(new J(s),0);let a=new pt(ge);return this.br.forEachWhile(l=>{const c=l.key.path;return!!i.isPrefixOf(c)&&(c.length===r&&(a=a.add(l.wr)),!0)},o),z.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(i=>{const r=this.Dr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){xe(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return z.forEach(n.mutations,r=>{const s=new st(r.key,n.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=i})}On(e){}containsKey(e,n){const i=new st(n,0),r=this.br.firstAfterOrEqual(i);return z.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,z.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _O{constructor(e){this.Mr=e,this.docs=function(){return new Be(J.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),s=r?r.size:0,o=this.Mr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return z.resolve(i?i.document.mutableCopy():kt.newInvalidDocument(n))}getEntries(e,n){let i=Ii();return n.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():kt.newInvalidDocument(r))}),z.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let s=Ii();const o=n.path,a=new J(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||eM(ZD(h),i)<=0||(r.has(h.key)||ld(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return z.resolve(s)}getAllFromCollectionGroup(e,n,i,r){ee()}Or(e,n){return z.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new vO(this)}getSize(e){return z.resolve(this.size)}}class vO extends hO{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.cr.addEntry(e,r)):this.cr.removeEntry(i)}),z.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wO{constructor(e){this.persistence=e,this.Nr=new Lo(n=>sy(n),oy),this.lastRemoteSnapshotVersion=te.min(),this.highestTargetId=0,this.Lr=0,this.Br=new dy,this.targetCount=0,this.kr=Eo.Bn()}forEachTarget(e,n){return this.Nr.forEach((i,r)=>n(r)),z.resolve()}getLastRemoteSnapshotVersion(e){return z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return z.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),z.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Lr&&(this.Lr=n),z.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Eo(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,z.resolve()}updateTargetData(e,n){return this.Kn(n),z.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,z.resolve()}removeTargets(e,n,i){let r=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&i.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),z.waitFor(s).next(()=>r)}getTargetCount(e){return z.resolve(this.targetCount)}getTargetData(e,n){const i=this.Nr.get(n)||null;return z.resolve(i)}addMatchingKeys(e,n,i){return this.Br.Rr(n,i),z.resolve()}removeMatchingKeys(e,n,i){this.Br.mr(n,i);const r=this.persistence.referenceDelegate,s=[];return r&&n.forEach(o=>{s.push(r.markPotentiallyOrphaned(e,o))}),z.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),z.resolve()}getMatchingKeysForTargetId(e,n){const i=this.Br.yr(n);return z.resolve(i)}containsKey(e,n){return z.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xO{constructor(e,n){this.qr={},this.overlays={},this.Qr=new ty(0),this.Kr=!1,this.Kr=!0,this.$r=new gO,this.referenceDelegate=e(this),this.Ur=new wO(this),this.indexManager=new cO,this.remoteDocumentCache=function(r){return new _O(r)}(i=>this.referenceDelegate.Wr(i)),this.serializer=new aO(n),this.Gr=new pO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new mO,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.qr[e.toKey()];return i||(i=new yO(n,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,i){Q("MemoryPersistence","Starting transaction:",e);const r=new EO(this.Qr.next());return this.referenceDelegate.zr(),i(r).next(s=>this.referenceDelegate.jr(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Hr(e,n){return z.or(Object.values(this.qr).map(i=>()=>i.containsKey(e,n)))}}class EO extends nM{constructor(e){super(),this.currentSequenceNumber=e}}class fy{constructor(e){this.persistence=e,this.Jr=new dy,this.Yr=null}static Zr(e){return new fy(e)}get Xr(){if(this.Yr)return this.Yr;throw ee()}addReference(e,n,i){return this.Jr.addReference(i,n),this.Xr.delete(i.toString()),z.resolve()}removeReference(e,n,i){return this.Jr.removeReference(i,n),this.Xr.add(i.toString()),z.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),z.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(r=>this.Xr.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(s=>this.Xr.add(s.toString()))}).next(()=>i.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return z.forEach(this.Xr,i=>{const r=J.fromPath(i);return this.ei(e,r).next(s=>{s||n.removeEntry(r,te.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(i=>{i?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return z.or([()=>z.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class py{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.$i=i,this.Ui=r}static Wi(e,n){let i=ce(),r=ce();for(const s of n.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new py(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TO{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return oR()?8:iM(Rt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,i,r){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,r,i).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new bO;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,i,r){return i.documentReadCount<this.ji?(sa()<=he.DEBUG&&Q("QueryEngine","SDK will not create cache indexes for query:",Ls(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),z.resolve()):(sa()<=he.DEBUG&&Q("QueryEngine","Query:",Ls(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Hi*r?(sa()<=he.DEBUG&&Q("QueryEngine","The SDK decides to create cache indexes for query:",Ls(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,qn(n))):z.resolve())}Yi(e,n){if(_1(n))return z.resolve(null);let i=qn(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=mm(n,null,"F"),i=qn(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{const o=ce(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,i).next(l=>{const c=this.ts(n,a);return this.ns(n,c,o,l.readTime)?this.Yi(e,mm(n,null,"F")):this.rs(e,c,n,l)}))})))}Zi(e,n,i,r){return _1(n)||r.isEqual(te.min())?z.resolve(null):this.Ji.getDocuments(e,i).next(s=>{const o=this.ts(n,s);return this.ns(n,o,i,r)?z.resolve(null):(sa()<=he.DEBUG&&Q("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Ls(n)),this.rs(e,o,n,JD(r,-1)).next(a=>a))})}ts(e,n){let i=new pt(c2(e));return n.forEach((r,s)=>{ld(e,s)&&(i=i.add(s))}),i}ns(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Xi(e,n,i){return sa()<=he.DEBUG&&Q("QueryEngine","Using full collection scan to execute query:",Ls(n)),this.Ji.getDocumentsMatchingQuery(e,n,xr.min(),i)}rs(e,n,i,r){return this.Ji.getDocumentsMatchingQuery(e,i,r).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SO{constructor(e,n,i,r){this.persistence=e,this.ss=n,this.serializer=r,this.os=new Be(ge),this._s=new Lo(s=>sy(s),oy),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new fO(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function IO(t,e,n,i){return new SO(t,e,n,i)}async function A2(t,e){const n=ne(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,n.ls(e),n.mutationQueue.getAllMutationBatches(i))).next(s=>{const o=[],a=[];let l=ce();for(const c of r){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of s){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(i,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function kO(t,e){const n=ne(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,h){const d=c.batch,p=d.keys();let g=z.resolve();return p.forEach(y=>{g=g.next(()=>h.getEntry(l,y)).next(x=>{const b=c.docVersions.get(y);xe(b!==null),x.version.compareTo(b)<0&&(d.applyToRemoteDocument(x,c),x.isValidDocument()&&(x.setReadTime(c.commitVersion),h.addEntry(x)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(n,i,e,s).next(()=>s.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let l=ce();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function R2(t){const e=ne(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function PO(t,e){const n=ne(t),i=e.snapshotVersion;let r=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});r=n.os;const a=[];e.targetChanges.forEach((h,d)=>{const p=r.get(d);if(!p)return;a.push(n.Ur.removeMatchingKeys(s,h.removedDocuments,d).next(()=>n.Ur.addMatchingKeys(s,h.addedDocuments,d)));let g=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?g=g.withResumeToken(gt.EMPTY_BYTE_STRING,te.min()).withLastLimboFreeSnapshotVersion(te.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,i)),r=r.insert(d,g),function(x,b,v){return x.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=3e8?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(p,g,h)&&a.push(n.Ur.updateTargetData(s,g))});let l=Ii(),c=ce();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(CO(s,o,e.documentUpdates).next(h=>{l=h.Ps,c=h.Is})),!i.isEqual(te.min())){const h=n.Ur.getLastRemoteSnapshotVersion(s).next(d=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,i));a.push(h)}return z.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.os=r,s))}function CO(t,e,n){let i=ce(),r=ce();return n.forEach(s=>i=i.add(s)),e.getEntries(t,i).next(s=>{let o=Ii();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(te.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):Q("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:r}})}function AO(t,e){const n=ne(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function RO(t,e){const n=ne(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Ur.getTargetData(i,e).next(s=>s?(r=s,z.resolve(r)):n.Ur.allocateTargetId(i).next(o=>(r=new Ji(e,o,"TargetPurposeListen",i.currentSequenceNumber),n.Ur.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.os.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.os=n.os.insert(i.targetId,i),n._s.set(e,i.targetId)),i})}async function wm(t,e,n){const i=ne(t),r=i.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!Wl(o))throw o;Q("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}i.os=i.os.remove(e),i._s.delete(r.target)}function C1(t,e,n){const i=ne(t);let r=te.min(),s=ce();return i.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,h){const d=ne(l),p=d._s.get(h);return p!==void 0?z.resolve(d.os.get(p)):d.Ur.getTargetData(c,h)}(i,o,qn(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>i.ss.getDocumentsMatchingQuery(o,e,n?r:te.min(),n?s:ce())).next(a=>(NO(i,xM(e),a),{documents:a,Ts:s})))}function NO(t,e,n){let i=t.us.get(e)||te.min();n.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),t.us.set(e,i)}class A1{constructor(){this.activeTargetIds=kM()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class DO{constructor(){this.so=new A1,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,i){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new A1,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MO{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Q("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Q("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vc=null;function Vf(){return Vc===null?Vc=function(){return 268435456+Math.round(2147483648*Math.random())}():Vc++,"0x"+Vc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LO{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bt="WebChannelConnection";class jO extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const i=n.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+n.host,this.vo=`projects/${r}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${s}`}get Fo(){return!1}Mo(n,i,r,s,o){const a=Vf(),l=this.xo(n,i.toUriEncodedString());Q("RestConnection",`Sending RPC '${n}' ${a}:`,l,r);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,o),this.No(n,l,c,r).then(h=>(Q("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw _o("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",l,"request:",r),h})}Lo(n,i,r,s,o,a){return this.Mo(n,i,r,s,o)}Oo(n,i,r){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Mo}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((s,o)=>n[o]=s),r&&r.headers.forEach((s,o)=>n[o]=s)}xo(n,i){const r=OO[n];return`${this.Do}/v1/${i}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,i,r){const s=Vf();return new Promise((o,a)=>{const l=new WT;l.setWithCredentials(!0),l.listenOnce(qT.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case vu.NO_ERROR:const h=l.getResponseJson();Q(bt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case vu.TIMEOUT:Q(bt,`RPC '${e}' ${s} timed out`),a(new K(F.DEADLINE_EXCEEDED,"Request time out"));break;case vu.HTTP_ERROR:const d=l.getStatus();if(Q(bt,`RPC '${e}' ${s} failed with status:`,d,"response text:",l.getResponseText()),d>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const g=p==null?void 0:p.error;if(g&&g.status&&g.message){const y=function(b){const v=b.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(v)>=0?v:F.UNKNOWN}(g.status);a(new K(y,g.message))}else a(new K(F.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new K(F.UNAVAILABLE,"Connection failed."));break;default:ee()}}finally{Q(bt,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(r);Q(bt,`RPC '${e}' ${s} sending request:`,r),l.send(n,"POST",c,i,15)})}Bo(e,n,i){const r=Vf(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=QT(),a=GT(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,i),l.encodeInitMessageHeaders=!0;const h=s.join("");Q(bt,`Creating RPC '${e}' stream ${r}: ${h}`,l);const d=o.createWebChannel(h,l);let p=!1,g=!1;const y=new LO({Io:b=>{g?Q(bt,`Not sending because RPC '${e}' stream ${r} is closed:`,b):(p||(Q(bt,`Opening RPC '${e}' stream ${r} transport.`),d.open(),p=!0),Q(bt,`RPC '${e}' stream ${r} sending:`,b),d.send(b))},To:()=>d.close()}),x=(b,v,w)=>{b.listen(v,T=>{try{w(T)}catch(C){setTimeout(()=>{throw C},0)}})};return x(d,_a.EventType.OPEN,()=>{g||(Q(bt,`RPC '${e}' stream ${r} transport opened.`),y.yo())}),x(d,_a.EventType.CLOSE,()=>{g||(g=!0,Q(bt,`RPC '${e}' stream ${r} transport closed`),y.So())}),x(d,_a.EventType.ERROR,b=>{g||(g=!0,_o(bt,`RPC '${e}' stream ${r} transport errored:`,b),y.So(new K(F.UNAVAILABLE,"The operation could not be completed")))}),x(d,_a.EventType.MESSAGE,b=>{var v;if(!g){const w=b.data[0];xe(!!w);const T=w,C=T.error||((v=T[0])===null||v===void 0?void 0:v.error);if(C){Q(bt,`RPC '${e}' stream ${r} received error:`,C);const N=C.status;let M=function(P){const k=Xe[P];if(k!==void 0)return w2(k)}(N),S=C.message;M===void 0&&(M=F.INTERNAL,S="Unknown error status: "+N+" with message "+C.message),g=!0,y.So(new K(M,S)),d.close()}else Q(bt,`RPC '${e}' stream ${r} received:`,w),y.bo(w)}}),x(a,KT.STAT_EVENT,b=>{b.stat===cm.PROXY?Q(bt,`RPC '${e}' stream ${r} detected buffering proxy`):b.stat===cm.NOPROXY&&Q(bt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{y.wo()},0),y}}function Ff(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dd(t){return new KM(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N2{constructor(e,n,i=1e3,r=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=i,this.qo=r,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),r=Math.max(0,n-i);r>0&&Q("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D2{constructor(e,n,i,r,s,o,a,l){this.ui=e,this.Ho=i,this.Jo=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new N2(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(Si(n.toString()),Si("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Yo===n&&this.P_(i,r)},i=>{e(()=>{const r=new K(F.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(r)})})}P_(e,n){const i=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(r=>{i(()=>this.I_(r))}),this.stream.onMessage(r=>{i(()=>++this.e_==1?this.E_(r):this.onNext(r))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Q("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(Q("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class VO extends D2{constructor(e,n,i,r,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=YM(this.serializer,e),i=function(s){if(!("targetChange"in s))return te.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?te.min():o.readTime?Kn(o.readTime):te.min()}(e);return this.listener.d_(n,i)}A_(e){const n={};n.database=vm(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=fm(l)?{documents:ZM(s,l)}:{query:eO(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=b2(s,o.resumeToken);const c=gm(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(te.min())>0){a.readTime=vh(s,o.snapshotVersion.toTimestamp());const c=gm(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const i=nO(this.serializer,e);i&&(n.labels=i),this.a_(n)}R_(e){const n={};n.database=vm(this.serializer),n.removeTarget=e,this.a_(n)}}class FO extends D2{constructor(e,n,i,r,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return xe(!!e.streamToken),this.lastStreamToken=e.streamToken,xe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){xe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=JM(e.writeResults,e.commitTime),i=Kn(e.commitTime);return this.listener.g_(i,n)}p_(){const e={};e.database=vm(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>XM(this.serializer,i))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UO extends class{}{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new K(F.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,i,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,ym(n,i),r,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new K(F.UNKNOWN,s.toString())})}Lo(e,n,i,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,ym(n,i),r,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new K(F.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class zO{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Si(n),this.D_=!1):Q("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BO{constructor(e,n,i,r,s){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{i.enqueueAndForget(async()=>{Is(this)&&(Q("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=ne(l);c.L_.add(4),await Gl(c),c.q_.set("Unknown"),c.L_.delete(4),await fd(c)}(this))})}),this.q_=new zO(i,r)}}async function fd(t){if(Is(t))for(const e of t.B_)await e(!0)}async function Gl(t){for(const e of t.B_)await e(!1)}function M2(t,e){const n=ne(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),_y(n)?yy(n):jo(n).r_()&&gy(n,e))}function my(t,e){const n=ne(t),i=jo(n);n.N_.delete(e),i.r_()&&O2(n,e),n.N_.size===0&&(i.r_()?i.o_():Is(n)&&n.q_.set("Unknown"))}function gy(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(te.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}jo(t).A_(e)}function O2(t,e){t.Q_.xe(e),jo(t).R_(e)}function yy(t){t.Q_=new $M({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),jo(t).start(),t.q_.v_()}function _y(t){return Is(t)&&!jo(t).n_()&&t.N_.size>0}function Is(t){return ne(t).L_.size===0}function L2(t){t.Q_=void 0}async function $O(t){t.q_.set("Online")}async function HO(t){t.N_.forEach((e,n)=>{gy(t,e)})}async function WO(t,e){L2(t),_y(t)?(t.q_.M_(e),yy(t)):t.q_.set("Unknown")}async function qO(t,e,n){if(t.q_.set("Online"),e instanceof E2&&e.state===2&&e.cause)try{await async function(r,s){const o=s.cause;for(const a of s.targetIds)r.N_.has(a)&&(await r.remoteSyncer.rejectListen(a,o),r.N_.delete(a),r.Q_.removeTarget(a))}(t,e)}catch(i){Q("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await wh(t,i)}else if(e instanceof Eu?t.Q_.Ke(e):e instanceof x2?t.Q_.He(e):t.Q_.We(e),!n.isEqual(te.min()))try{const i=await R2(t.localStore);n.compareTo(i)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.N_.get(c);h&&s.N_.set(c,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const h=s.N_.get(l);if(!h)return;s.N_.set(l,h.withResumeToken(gt.EMPTY_BYTE_STRING,h.snapshotVersion)),O2(s,l);const d=new Ji(h.target,l,c,h.sequenceNumber);gy(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(i){Q("RemoteStore","Failed to raise snapshot:",i),await wh(t,i)}}async function wh(t,e,n){if(!Wl(e))throw e;t.L_.add(1),await Gl(t),t.q_.set("Offline"),n||(n=()=>R2(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Q("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await fd(t)})}function j2(t,e){return e().catch(n=>wh(t,n,e))}async function pd(t){const e=ne(t),n=br(e);let i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;KO(e);)try{const r=await AO(e.localStore,i);if(r===null){e.O_.length===0&&n.o_();break}i=r.batchId,GO(e,r)}catch(r){await wh(e,r)}V2(e)&&F2(e)}function KO(t){return Is(t)&&t.O_.length<10}function GO(t,e){t.O_.push(e);const n=br(t);n.r_()&&n.V_&&n.m_(e.mutations)}function V2(t){return Is(t)&&!br(t).n_()&&t.O_.length>0}function F2(t){br(t).start()}async function QO(t){br(t).p_()}async function YO(t){const e=br(t);for(const n of t.O_)e.m_(n.mutations)}async function XO(t,e,n){const i=t.O_.shift(),r=cy.from(i,e,n);await j2(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await pd(t)}async function JO(t,e){e&&br(t).V_&&await async function(i,r){if(function(o){return UM(o)&&o!==F.ABORTED}(r.code)){const s=i.O_.shift();br(i).s_(),await j2(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),await pd(i)}}(t,e),V2(t)&&F2(t)}async function N1(t,e){const n=ne(t);n.asyncQueue.verifyOperationInProgress(),Q("RemoteStore","RemoteStore received new credentials");const i=Is(n);n.L_.add(3),await Gl(n),i&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await fd(n)}async function ZO(t,e){const n=ne(t);e?(n.L_.delete(2),await fd(n)):e||(n.L_.add(2),await Gl(n),n.q_.set("Unknown"))}function jo(t){return t.K_||(t.K_=function(n,i,r){const s=ne(n);return s.w_(),new VO(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{Eo:$O.bind(null,t),Ro:HO.bind(null,t),mo:WO.bind(null,t),d_:qO.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),_y(t)?yy(t):t.q_.set("Unknown")):(await t.K_.stop(),L2(t))})),t.K_}function br(t){return t.U_||(t.U_=function(n,i,r){const s=ne(n);return s.w_(),new FO(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:QO.bind(null,t),mo:JO.bind(null,t),f_:YO.bind(null,t),g_:XO.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await pd(t)):(await t.U_.stop(),t.O_.length>0&&(Q("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vy{constructor(e,n,i,r,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new _i,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,s){const o=Date.now()+i,a=new vy(e,n,o,r,s);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new K(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function wy(t,e){if(Si("AsyncQueue",`${e}: ${t}`),Wl(t))return new K(F.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(e){this.comparator=e?(n,i)=>e(n,i)||J.comparator(n.key,i.key):(n,i)=>J.comparator(n.key,i.key),this.keyedMap=va(),this.sortedSet=new Be(this.comparator)}static emptySet(e){return new ao(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ao)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new ao;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D1{constructor(){this.W_=new Be(J.comparator)}track(e){const n=e.doc.key,i=this.W_.get(n);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(n,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(n):e.type===1&&i.type===2?this.W_=this.W_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ee():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,i)=>{e.push(i)}),e}}class bo{constructor(e,n,i,r,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,i,r,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new bo(e,n,ao.emptySet(n),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ad(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eL{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class tL{constructor(){this.queries=M1(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,i){const r=ne(n),s=r.queries;r.queries=M1(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(i)})})(this,new K(F.ABORTED,"Firestore shutting down"))}}function M1(){return new Lo(t=>l2(t),ad)}async function xy(t,e){const n=ne(t);let i=3;const r=e.query;let s=n.queries.get(r);s?!s.H_()&&e.J_()&&(i=2):(s=new eL,i=e.J_()?0:1);try{switch(i){case 0:s.z_=await n.onListen(r,!0);break;case 1:s.z_=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(o){const a=wy(o,`Initialization of query '${Ls(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&by(n)}async function Ey(t,e){const n=ne(t),i=e.query;let r=3;const s=n.queries.get(i);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?r=e.J_()?0:1:!s.H_()&&e.J_()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function nL(t,e){const n=ne(t);let i=!1;for(const r of e){const s=r.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(r)&&(i=!0);o.z_=r}}i&&by(n)}function iL(t,e,n){const i=ne(t),r=i.queries.get(e);if(r)for(const s of r.j_)s.onError(n);i.queries.delete(e)}function by(t){t.Y_.forEach(e=>{e.next()})}var xm,O1;(O1=xm||(xm={})).ea="default",O1.Cache="cache";class Ty{constructor(e,n,i){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new bo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const i=n!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=bo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==xm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2{constructor(e){this.key=e}}class z2{constructor(e){this.key=e}}class rL{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ce(),this.mutatedKeys=ce(),this.Aa=c2(e),this.Ra=new ao(this.Aa)}get Va(){return this.Ta}ma(e,n){const i=n?n.fa:new D1,r=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=r,a=!1;const l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,c=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((h,d)=>{const p=r.get(h),g=ld(this.query,d)?d:null,y=!!p&&this.mutatedKeys.has(p.key),x=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let b=!1;p&&g?p.data.isEqual(g.data)?y!==x&&(i.track({type:3,doc:g}),b=!0):this.ga(p,g)||(i.track({type:2,doc:g}),b=!0,(l&&this.Aa(g,l)>0||c&&this.Aa(g,c)<0)&&(a=!0)):!p&&g?(i.track({type:0,doc:g}),b=!0):p&&!g&&(i.track({type:1,doc:p}),b=!0,(l||c)&&(a=!0)),b&&(g?(o=o.add(g),s=x?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),i.track({type:1,doc:h})}return{Ra:o,fa:i,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,d)=>function(g,y){const x=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ee()}};return x(g)-x(y)}(h.type,d.type)||this.Aa(h.doc,d.doc)),this.pa(i),r=r!=null&&r;const a=n&&!r?this.ya():[],l=this.da.size===0&&this.current&&!r?1:0,c=l!==this.Ea;return this.Ea=l,o.length!==0||c?{snapshot:new bo(this.query,e.Ra,s,o,e.mutatedKeys,l===0,c,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new D1,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ce(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});const n=[];return e.forEach(i=>{this.da.has(i)||n.push(new z2(i))}),this.da.forEach(i=>{e.has(i)||n.push(new U2(i))}),n}ba(e){this.Ta=e.Ts,this.da=ce();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return bo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class sL{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class oL{constructor(e){this.key=e,this.va=!1}}class aL{constructor(e,n,i,r,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Lo(a=>l2(a),ad),this.Ma=new Map,this.xa=new Set,this.Oa=new Be(J.comparator),this.Na=new Map,this.La=new dy,this.Ba={},this.ka=new Map,this.qa=Eo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function lL(t,e,n=!0){const i=K2(t);let r;const s=i.Fa.get(e);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.Da()):r=await B2(i,e,n,!0),r}async function cL(t,e){const n=K2(t);await B2(n,e,!0,!1)}async function B2(t,e,n,i){const r=await RO(t.localStore,qn(e)),s=r.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return i&&(a=await uL(t,e,s,o==="current",r.resumeToken)),t.isPrimaryClient&&n&&M2(t.remoteStore,r),a}async function uL(t,e,n,i,r){t.Ka=(d,p,g)=>async function(x,b,v,w){let T=b.view.ma(v);T.ns&&(T=await C1(x.localStore,b.query,!1).then(({documents:S})=>b.view.ma(S,T)));const C=w&&w.targetChanges.get(b.targetId),N=w&&w.targetMismatches.get(b.targetId)!=null,M=b.view.applyChanges(T,x.isPrimaryClient,C,N);return j1(x,b.targetId,M.wa),M.snapshot}(t,d,p,g);const s=await C1(t.localStore,e,!0),o=new rL(e,s.Ts),a=o.ma(s.documents),l=Kl.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),c=o.applyChanges(a,t.isPrimaryClient,l);j1(t,n,c.wa);const h=new sL(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function hL(t,e,n){const i=ne(t),r=i.Fa.get(e),s=i.Ma.get(r.targetId);if(s.length>1)return i.Ma.set(r.targetId,s.filter(o=>!ad(o,e))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await wm(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&my(i.remoteStore,r.targetId),Em(i,r.targetId)}).catch(Hl)):(Em(i,r.targetId),await wm(i.localStore,r.targetId,!0))}async function dL(t,e){const n=ne(t),i=n.Fa.get(e),r=n.Ma.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),my(n.remoteStore,i.targetId))}async function fL(t,e,n){const i=wL(t);try{const r=await function(o,a){const l=ne(o),c=rt.now(),h=a.reduce((g,y)=>g.add(y.key),ce());let d,p;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let y=Ii(),x=ce();return l.cs.getEntries(g,h).next(b=>{y=b,y.forEach((v,w)=>{w.isValidDocument()||(x=x.add(v))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,y)).next(b=>{d=b;const v=[];for(const w of a){const T=OM(w,d.get(w.key).overlayedDocument);T!=null&&v.push(new Ar(w.key,T,e2(T.value.mapValue),gn.exists(!0)))}return l.mutationQueue.addMutationBatch(g,c,v,a)}).next(b=>{p=b;const v=b.applyToLocalDocumentSet(d,x);return l.documentOverlayCache.saveOverlays(g,b.batchId,v)})}).then(()=>({batchId:p.batchId,changes:h2(d)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new Be(ge)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(i,r.batchId,n),await Ql(i,r.changes),await pd(i.remoteStore)}catch(r){const s=wy(r,"Failed to persist write");n.reject(s)}}async function $2(t,e){const n=ne(t);try{const i=await PO(n.localStore,e);e.targetChanges.forEach((r,s)=>{const o=n.Na.get(s);o&&(xe(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.va=!0:r.modifiedDocuments.size>0?xe(o.va):r.removedDocuments.size>0&&(xe(o.va),o.va=!1))}),await Ql(n,i,e)}catch(i){await Hl(i)}}function L1(t,e,n){const i=ne(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&r.push(a.snapshot)}),function(o,a){const l=ne(o);l.onlineState=a;let c=!1;l.queries.forEach((h,d)=>{for(const p of d.j_)p.Z_(a)&&(c=!0)}),c&&by(l)}(i.eventManager,e),r.length&&i.Ca.d_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function pL(t,e,n){const i=ne(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Na.get(e),s=r&&r.key;if(s){let o=new Be(J.comparator);o=o.insert(s,kt.newNoDocument(s,te.min()));const a=ce().add(s),l=new hd(te.min(),new Map,new Be(ge),o,a);await $2(i,l),i.Oa=i.Oa.remove(s),i.Na.delete(e),Sy(i)}else await wm(i.localStore,e,!1).then(()=>Em(i,e,n)).catch(Hl)}async function mL(t,e){const n=ne(t),i=e.batch.batchId;try{const r=await kO(n.localStore,e);W2(n,i,null),H2(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Ql(n,r)}catch(r){await Hl(r)}}async function gL(t,e,n){const i=ne(t);try{const r=await function(o,a){const l=ne(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,a).next(d=>(xe(d!==null),h=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(i.localStore,e);W2(i,e,n),H2(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Ql(i,r)}catch(r){await Hl(r)}}function H2(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function W2(t,e,n){const i=ne(t);let r=i.Ba[i.currentUser.toKey()];if(r){const s=r.get(e);s&&(n?s.reject(n):s.resolve(),r=r.remove(e)),i.Ba[i.currentUser.toKey()]=r}}function Em(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Ma.get(e))t.Fa.delete(i),n&&t.Ca.$a(i,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(i=>{t.La.containsKey(i)||q2(t,i)})}function q2(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(my(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Sy(t))}function j1(t,e,n){for(const i of n)i instanceof U2?(t.La.addReference(i.key,e),yL(t,i)):i instanceof z2?(Q("SyncEngine","Document no longer in limbo: "+i.key),t.La.removeReference(i.key,e),t.La.containsKey(i.key)||q2(t,i.key)):ee()}function yL(t,e){const n=e.key,i=n.path.canonicalString();t.Oa.get(n)||t.xa.has(i)||(Q("SyncEngine","New document in limbo: "+n),t.xa.add(i),Sy(t))}function Sy(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new J(Ce.fromString(e)),i=t.qa.next();t.Na.set(i,new oL(n)),t.Oa=t.Oa.insert(n,i),M2(t.remoteStore,new Ji(qn(od(n.path)),i,"TargetPurposeLimboResolution",ty.oe))}}async function Ql(t,e,n){const i=ne(t),r=[],s=[],o=[];i.Fa.isEmpty()||(i.Fa.forEach((a,l)=>{o.push(i.Ka(l,e,n).then(c=>{var h;if((c||n)&&i.isPrimaryClient){const d=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;i.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){r.push(c);const d=py.Wi(l.targetId,c);s.push(d)}}))}),await Promise.all(o),i.Ca.d_(r),await async function(l,c){const h=ne(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>z.forEach(c,p=>z.forEach(p.$i,g=>h.persistence.referenceDelegate.addReference(d,p.targetId,g)).next(()=>z.forEach(p.Ui,g=>h.persistence.referenceDelegate.removeReference(d,p.targetId,g)))))}catch(d){if(!Wl(d))throw d;Q("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const p=d.targetId;if(!d.fromCache){const g=h.os.get(p),y=g.snapshotVersion,x=g.withLastLimboFreeSnapshotVersion(y);h.os=h.os.insert(p,x)}}}(i.localStore,s))}async function _L(t,e){const n=ne(t);if(!n.currentUser.isEqual(e)){Q("SyncEngine","User change. New user:",e.toKey());const i=await A2(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new K(F.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Ql(n,i.hs)}}function vL(t,e){const n=ne(t),i=n.Na.get(e);if(i&&i.va)return ce().add(i.key);{let r=ce();const s=n.Ma.get(e);if(!s)return r;for(const o of s){const a=n.Fa.get(o);r=r.unionWith(a.view.Va)}return r}}function K2(t){const e=ne(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=$2.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=vL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=pL.bind(null,e),e.Ca.d_=nL.bind(null,e.eventManager),e.Ca.$a=iL.bind(null,e.eventManager),e}function wL(t){const e=ne(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=mL.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=gL.bind(null,e),e}class xh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=dd(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return IO(this.persistence,new TO,e.initialUser,this.serializer)}Ga(e){return new xO(fy.Zr,this.serializer)}Wa(e){return new DO}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}xh.provider={build:()=>new xh};class bm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>L1(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=_L.bind(null,this.syncEngine),await ZO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new tL}()}createDatastore(e){const n=dd(e.databaseInfo.databaseId),i=function(s){return new jO(s)}(e.databaseInfo);return function(s,o,a,l){return new UO(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,s,o,a){return new BO(i,r,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>L1(this.syncEngine,n,0),function(){return R1.D()?new R1:new MO}())}createSyncEngine(e,n){return function(r,s,o,a,l,c,h){const d=new aL(r,s,o,a,l,c);return h&&(d.Qa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const s=ne(r);Q("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Gl(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}bm.provider={build:()=>new bm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iy{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Si("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xL{constructor(e,n,i,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=St.UNAUTHENTICATED,this.clientId=XT.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(i,async o=>{Q("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(i,o=>(Q("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new _i;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=wy(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Uf(t,e){t.asyncQueue.verifyOperationInProgress(),Q("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await A2(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function V1(t,e){t.asyncQueue.verifyOperationInProgress();const n=await EL(t);Q("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>N1(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>N1(e.remoteStore,r)),t._onlineComponents=e}async function EL(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Q("FirestoreClient","Using user provided OfflineComponentProvider");try{await Uf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===F.FAILED_PRECONDITION||r.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;_o("Error using user provided cache. Falling back to memory cache: "+n),await Uf(t,new xh)}}else Q("FirestoreClient","Using default OfflineComponentProvider"),await Uf(t,new xh);return t._offlineComponents}async function G2(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Q("FirestoreClient","Using user provided OnlineComponentProvider"),await V1(t,t._uninitializedComponentsProvider._online)):(Q("FirestoreClient","Using default OnlineComponentProvider"),await V1(t,new bm))),t._onlineComponents}function bL(t){return G2(t).then(e=>e.syncEngine)}async function Eh(t){const e=await G2(t),n=e.eventManager;return n.onListen=lL.bind(null,e.syncEngine),n.onUnlisten=hL.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=cL.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=dL.bind(null,e.syncEngine),n}function TL(t,e,n={}){const i=new _i;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const h=new Iy({next:p=>{h.Za(),o.enqueueAndForget(()=>Ey(s,d));const g=p.docs.has(a);!g&&p.fromCache?c.reject(new K(F.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&p.fromCache&&l&&l.source==="server"?c.reject(new K(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),d=new Ty(od(a.path),h,{includeMetadataChanges:!0,_a:!0});return xy(s,d)}(await Eh(t),t.asyncQueue,e,n,i)),i.promise}function SL(t,e,n={}){const i=new _i;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const h=new Iy({next:p=>{h.Za(),o.enqueueAndForget(()=>Ey(s,d)),p.fromCache&&l.source==="server"?c.reject(new K(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),d=new Ty(a,h,{includeMetadataChanges:!0,_a:!0});return xy(s,d)}(await Eh(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q2(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F1=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y2(t,e,n){if(!n)throw new K(F.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function IL(t,e,n,i){if(e===!0&&i===!0)throw new K(F.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function U1(t){if(!J.isDocumentKey(t))throw new K(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function z1(t){if(J.isDocumentKey(t))throw new K(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function md(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ee()}function Yt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new K(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=md(t);throw new K(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new K(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new K(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}IL("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Q2((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new K(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new K(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new K(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class gd{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new B1({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new K(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new K(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new B1(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new $D;switch(i.type){case"firstParty":return new KD(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new K(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=F1.get(n);i&&(Q("ComponentProvider","Removing Datastore"),F1.delete(n),i.terminate())}(this),Promise.resolve()}}function kL(t,e,n,i={}){var r;const s=(t=Yt(t,gd))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&_o("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let a,l;if(typeof i.mockUserToken=="string")a=i.mockUserToken,l=St.MOCK_USER;else{a=nT(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new K(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new St(c)}t._authCredentials=new HD(new YT(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Rr(this.firestore,e,this._query)}}class Ct{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new pr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ct(this.firestore,e,this._key)}}class pr extends Rr{constructor(e,n,i){super(e,n,od(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ct(this.firestore,null,new J(e))}withConverter(e){return new pr(this.firestore,e,this._path)}}function ki(t,e,...n){if(t=Ee(t),Y2("collection","path",e),t instanceof gd){const i=Ce.fromString(e,...n);return z1(i),new pr(t,null,i)}{if(!(t instanceof Ct||t instanceof pr))throw new K(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Ce.fromString(e,...n));return z1(i),new pr(t.firestore,null,i)}}function yn(t,e,...n){if(t=Ee(t),arguments.length===1&&(e=XT.newId()),Y2("doc","path",e),t instanceof gd){const i=Ce.fromString(e,...n);return U1(i),new Ct(t,null,new J(i))}{if(!(t instanceof Ct||t instanceof pr))throw new K(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Ce.fromString(e,...n));return U1(i),new Ct(t.firestore,t instanceof pr?t.converter:null,new J(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new N2(this,"async_queue_retry"),this.Vu=()=>{const i=Ff();i&&Q("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;const n=Ff();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Ff();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new _i;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Wl(e))throw e;Q("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(i=>{this.Eu=i,this.du=!1;const r=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(i);throw Si("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.du=!1,i))));return this.mu=n,n}enqueueAfterDelay(e,n,i){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const r=vy.createAndSchedule(this,e,n,i,s=>this.yu(s));return this.Tu.push(r),r}fu(){this.Eu&&ee()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function H1(t){return function(n,i){if(typeof n!="object"||n===null)return!1;const r=n;for(const s of i)if(s in r&&typeof r[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Pi extends gd{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new $1,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new $1(e),this._firestoreClient=void 0,await e}}}function PL(t,e){const n=typeof t=="object"?t:Hg(),i=typeof t=="string"?t:"(default)",r=td(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const s=Zb("firestore");s&&kL(r,...s)}return r}function yd(t){if(t._terminated)throw new K(F.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||CL(t),t._firestoreClient}function CL(t){var e,n,i;const r=t._freezeSettings(),s=function(a,l,c,h){return new oM(a,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,Q2(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._componentsProvider||!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),t._firestoreClient=new xL(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(e){this._byteString=e}static fromBase64String(e){try{return new To(gt.fromBase64String(e))}catch(n){throw new K(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new To(gt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new K(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ky{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new K(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new K(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ge(this._lat,e._lat)||ge(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Py{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AL=/^__.*__$/;class RL{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Ar(e,this.data,this.fieldMask,n,this.fieldTransforms):new ql(e,this.data,n,this.fieldTransforms)}}class X2{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new Ar(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function J2(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ee()}}class Cy{constructor(e,n,i,r,s,o){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Cy(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Fu({path:i,xu:!1});return r.Ou(e),r}Nu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Fu({path:i,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return bh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(J2(this.Cu)&&AL.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class NL{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||dd(e)}Qu(e,n,i,r=!1){return new Cy({Cu:e,methodName:n,qu:i,path:dt.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function wd(t){const e=t._freezeSettings(),n=dd(t._databaseId);return new NL(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Z2(t,e,n,i,r,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,r);Ry("Data must be an object, but it was:",o,i);const a=eS(i,o);let l,c;if(s.merge)l=new nn(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const d of s.mergeFields){const p=Tm(e,d,n);if(!o.contains(p))throw new K(F.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);nS(h,p)||h.push(p)}l=new nn(h),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new RL(new Ht(a),l,c)}class xd extends vd{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof xd}}class Ay extends vd{_toFieldTransform(e){return new RM(e.path,new wl)}isEqual(e){return e instanceof Ay}}function DL(t,e,n,i){const r=t.Qu(1,e,n);Ry("Data must be an object, but it was:",r,i);const s=[],o=Ht.empty();Ss(i,(l,c)=>{const h=Ny(e,l,n);c=Ee(c);const d=r.Nu(h);if(c instanceof xd)s.push(h);else{const p=Yl(c,d);p!=null&&(s.push(h),o.set(h,p))}});const a=new nn(s);return new X2(o,a,r.fieldTransforms)}function ML(t,e,n,i,r,s){const o=t.Qu(1,e,n),a=[Tm(e,i,n)],l=[r];if(s.length%2!=0)throw new K(F.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<s.length;p+=2)a.push(Tm(e,s[p])),l.push(s[p+1]);const c=[],h=Ht.empty();for(let p=a.length-1;p>=0;--p)if(!nS(c,a[p])){const g=a[p];let y=l[p];y=Ee(y);const x=o.Nu(g);if(y instanceof xd)c.push(g);else{const b=Yl(y,x);b!=null&&(c.push(g),h.set(g,b))}}const d=new nn(c);return new X2(h,d,o.fieldTransforms)}function OL(t,e,n,i=!1){return Yl(n,t.Qu(i?4:3,e))}function Yl(t,e){if(tS(t=Ee(t)))return Ry("Unsupported field value:",e,t),eS(t,e);if(t instanceof vd)return function(i,r){if(!J2(r.Cu))throw r.Bu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Bu(`${i._methodName}() is not currently supported inside arrays`);const s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(i,r){const s=[];let o=0;for(const a of i){let l=Yl(a,r.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(i,r){if((i=Ee(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return PM(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const s=rt.fromDate(i);return{timestampValue:vh(r.serializer,s)}}if(i instanceof rt){const s=new rt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:vh(r.serializer,s)}}if(i instanceof ky)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof To)return{bytesValue:b2(r.serializer,i._byteString)};if(i instanceof Ct){const s=r.databaseId,o=i.firestore._databaseId;if(!o.isEqual(s))throw r.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:hy(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Py)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return ay(a.serializer,l)})}}}}}}(i,r);throw r.Bu(`Unsupported field value: ${md(i)}`)}(t,e)}function eS(t,e){const n={};return JT(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ss(t,(i,r)=>{const s=Yl(r,e.Mu(i));s!=null&&(n[i]=s)}),{mapValue:{fields:n}}}function tS(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof rt||t instanceof ky||t instanceof To||t instanceof Ct||t instanceof vd||t instanceof Py)}function Ry(t,e,n){if(!tS(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const i=md(n);throw i==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+i)}}function Tm(t,e,n){if((e=Ee(e))instanceof _d)return e._internalPath;if(typeof e=="string")return Ny(t,e);throw bh("Field path arguments must be of type string or ",t,!1,void 0,n)}const LL=new RegExp("[~\\*/\\[\\]]");function Ny(t,e,n){if(e.search(LL)>=0)throw bh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new _d(...e.split("."))._internalPath}catch{throw bh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function bh(t,e,n,i,r){const s=i&&!i.isEmpty(),o=r!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${i}`),o&&(l+=` in document ${r}`),l+=")"),new K(F.INVALID_ARGUMENT,a+t+l)}function nS(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{constructor(e,n,i,r,s){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ct(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new jL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Ed("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class jL extends iS{data(){return super.data()}}function Ed(t,e){return typeof e=="string"?Ny(t,e):e instanceof _d?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rS(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new K(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Dy{}class sS extends Dy{}function gs(t,e,...n){let i=[];e instanceof Dy&&i.push(e),i=i.concat(n),function(s){const o=s.filter(l=>l instanceof My).length,a=s.filter(l=>l instanceof bd).length;if(o>1||o>0&&a>0)throw new K(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)t=r._apply(t);return t}class bd extends sS{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new bd(e,n,i)}_apply(e){const n=this._parse(e);return aS(e._query,n),new Rr(e.firestore,e.converter,pm(e._query,n))}_parse(e){const n=wd(e.firestore);return function(s,o,a,l,c,h,d){let p;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new K(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){q1(d,h);const g=[];for(const y of d)g.push(W1(l,s,y));p={arrayValue:{values:g}}}else p=W1(l,s,d)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||q1(d,h),p=OL(a,o,d,h==="in"||h==="not-in");return Ze.create(c,h,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function mr(t,e,n){const i=e,r=Ed("where",t);return bd._create(r,i,n)}class My extends Dy{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new My(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:Nn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,s){let o=r;const a=s.getFlattenedFilters();for(const l of a)aS(o,l),o=pm(o,l)}(e._query,n),new Rr(e.firestore,e.converter,pm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Oy extends sS{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Oy(e,n)}_apply(e){const n=function(r,s,o){if(r.startAt!==null)throw new K(F.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new K(F.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new vl(s,o)}(e._query,this._field,this._direction);return new Rr(e.firestore,e.converter,function(r,s){const o=r.explicitOrderBy.concat([s]);return new Oo(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}}function oS(t,e="asc"){const n=e,i=Ed("orderBy",t);return Oy._create(i,n)}function W1(t,e,n){if(typeof(n=Ee(n))=="string"){if(n==="")throw new K(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!a2(e)&&n.indexOf("/")!==-1)throw new K(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(Ce.fromString(n));if(!J.isDocumentKey(i))throw new K(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return d1(t,new J(i))}if(n instanceof Ct)return d1(t,n._key);throw new K(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${md(n)}.`)}function q1(t,e){if(!Array.isArray(t)||t.length===0)throw new K(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function aS(t,e){const n=function(r,s){for(const o of r)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new K(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new K(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class VL{convertValue(e,n="none"){switch(ms(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ge(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ps(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ee()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return Ss(e,(r,s)=>{i[r]=this.convertValue(s,n)}),i}convertVectorValue(e){var n,i,r;const s=(r=(i=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(o=>Ge(o.doubleValue));return new Py(s)}convertGeoPoint(e){return new ky(Ge(e.latitude),Ge(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=iy(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(gl(e));default:return null}}convertTimestamp(e){const n=Er(e);return new rt(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Ce.fromString(e);xe(C2(i));const r=new yl(i.get(1),i.get(3)),s=new J(i.popFirst(5));return r.isEqual(n)||Si(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lS(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class cS extends iS{constructor(e,n,i,r,s,o){super(e,n,i,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new bu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(Ed("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class bu extends cS{data(e={}){return super.data(e)}}class uS{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new xa(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new bu(this._firestore,this._userDataWriter,i.key,i,new xa(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new K(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(a=>{const l=new bu(r._firestore,r._userDataWriter,a.doc.key,a.doc,new xa(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new bu(r._firestore,r._userDataWriter,a.doc.key,a.doc,new xa(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);let c=-1,h=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:FL(a.type),doc:l,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function FL(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ee()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ly(t){t=Yt(t,Ct);const e=Yt(t.firestore,Pi);return TL(yd(e),t._key).then(n=>fS(e,t,n))}class jy extends VL{constructor(e){super(),this.firestore=e}convertBytes(e){return new To(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ct(this.firestore,null,n)}}function Th(t){t=Yt(t,Rr);const e=Yt(t.firestore,Pi),n=yd(e),i=new jy(e);return rS(t._query),SL(n,t._query).then(r=>new uS(e,i,t,r))}function hS(t,e,n){t=Yt(t,Ct);const i=Yt(t.firestore,Pi),r=lS(t.converter,e,n);return Td(i,[Z2(wd(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,gn.none())])}function Sm(t,e,n,...i){t=Yt(t,Ct);const r=Yt(t.firestore,Pi),s=wd(r);let o;return o=typeof(e=Ee(e))=="string"||e instanceof _d?ML(s,"updateDoc",t._key,e,n,i):DL(s,"updateDoc",t._key,e),Td(r,[o.toMutation(t._key,gn.exists(!0))])}function Tu(t){return Td(Yt(t.firestore,Pi),[new ly(t._key,gn.none())])}function dS(t,e){const n=Yt(t.firestore,Pi),i=yn(t),r=lS(t.converter,e);return Td(n,[Z2(wd(t.firestore),"addDoc",i._key,r,t.converter!==null,{}).toMutation(i._key,gn.exists(!1))]).then(()=>i)}function Vy(t,...e){var n,i,r;t=Ee(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||H1(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(H1(e[o])){const d=e[o];e[o]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[o+1]=(i=d.error)===null||i===void 0?void 0:i.bind(d),e[o+2]=(r=d.complete)===null||r===void 0?void 0:r.bind(d)}let l,c,h;if(t instanceof Ct)c=Yt(t.firestore,Pi),h=od(t._key.path),l={next:d=>{e[o]&&e[o](fS(c,t,d))},error:e[o+1],complete:e[o+2]};else{const d=Yt(t,Rr);c=Yt(d.firestore,Pi),h=d._query;const p=new jy(c);l={next:g=>{e[o]&&e[o](new uS(c,p,d,g))},error:e[o+1],complete:e[o+2]},rS(t._query)}return function(p,g,y,x){const b=new Iy(x),v=new Ty(g,b,y);return p.asyncQueue.enqueueAndForget(async()=>xy(await Eh(p),v)),()=>{b.Za(),p.asyncQueue.enqueueAndForget(async()=>Ey(await Eh(p),v))}}(yd(c),h,a,l)}function Td(t,e){return function(i,r){const s=new _i;return i.asyncQueue.enqueueAndForget(async()=>fL(await bL(i),r,s)),s.promise}(yd(t),e)}function fS(t,e,n){const i=n.docs.get(e._key),r=new jy(t);return new cS(t,r,e._key,i,new xa(n.hasPendingWrites,n.fromCache),e.converter)}function Su(){return new Ay("serverTimestamp")}(function(e,n=!0){(function(r){Mo=r})(Es),cs(new wr("firestore",(i,{instanceIdentifier:r,options:s})=>{const o=i.getProvider("app").getImmediate(),a=new Pi(new WD(i.getProvider("auth-internal")),new QD(i.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new K(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new yl(c.options.projectId,h)}(o,r),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),$n(a1,"4.7.3",e),$n(a1,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pS="firebasestorage.googleapis.com",mS="storageBucket",UL=2*60*1e3,zL=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke extends Yn{constructor(e,n,i=0){super(zf(e),`Firebase Storage: ${n} (${zf(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ke.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return zf(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var qe;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(qe||(qe={}));function zf(t){return"storage/"+t}function Fy(){const t="An unknown error occurred, please check the error payload for server response.";return new Ke(qe.UNKNOWN,t)}function BL(t){return new Ke(qe.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function $L(t){return new Ke(qe.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function HL(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ke(qe.UNAUTHENTICATED,t)}function WL(){return new Ke(qe.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function qL(t){return new Ke(qe.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function KL(){return new Ke(qe.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function GL(){return new Ke(qe.CANCELED,"User canceled the upload/download.")}function QL(t){return new Ke(qe.INVALID_URL,"Invalid URL '"+t+"'.")}function YL(t){return new Ke(qe.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function XL(){return new Ke(qe.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+mS+"' property when initializing the app?")}function JL(){return new Ke(qe.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function ZL(){return new Ke(qe.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function e6(t){return new Ke(qe.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Im(t){return new Ke(qe.INVALID_ARGUMENT,t)}function gS(){return new Ke(qe.APP_DELETED,"The Firebase app was deleted.")}function t6(t){return new Ke(qe.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Ba(t,e){return new Ke(qe.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function oa(t){throw new Ke(qe.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=jt.makeFromUrl(e,n)}catch{return new jt(e,"")}if(i.path==="")return i;throw YL(e)}static makeFromUrl(e,n){let i=null;const r="([A-Za-z0-9.\\-_]+)";function s(C){C.path.charAt(C.path.length-1)==="/"&&(C.path_=C.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+r+o,"i"),l={bucket:1,path:3};function c(C){C.path_=decodeURIComponent(C.path)}const h="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",g=new RegExp(`^https?://${d}/${h}/b/${r}/o${p}`,"i"),y={bucket:1,path:3},x=n===pS?"(?:storage.googleapis.com|storage.cloud.google.com)":n,b="([^?#]*)",v=new RegExp(`^https?://${x}/${r}/${b}`,"i"),T=[{regex:a,indices:l,postModify:s},{regex:g,indices:y,postModify:c},{regex:v,indices:{bucket:1,path:2},postModify:c}];for(let C=0;C<T.length;C++){const N=T[C],M=N.regex.exec(e);if(M){const S=M[N.indices.bucket];let E=M[N.indices.path];E||(E=""),i=new jt(S,E),N.postModify(i);break}}if(i==null)throw QL(e);return i}}class n6{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i6(t,e,n){let i=1,r=null,s=null,o=!1,a=0;function l(){return a===2}let c=!1;function h(...b){c||(c=!0,e.apply(null,b))}function d(b){r=setTimeout(()=>{r=null,t(g,l())},b)}function p(){s&&clearTimeout(s)}function g(b,...v){if(c){p();return}if(b){p(),h.call(null,b,...v);return}if(l()||o){p(),h.call(null,b,...v);return}i<64&&(i*=2);let T;a===1?(a=2,T=0):T=(i+Math.random())*1e3,d(T)}let y=!1;function x(b){y||(y=!0,p(),!c&&(r!==null?(b||(a=2),clearTimeout(r),d(0)):b||(a=1)))}return d(0),s=setTimeout(()=>{o=!0,x(!0)},n),x}function r6(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s6(t){return t!==void 0}function o6(t){return typeof t=="object"&&!Array.isArray(t)}function Uy(t){return typeof t=="string"||t instanceof String}function K1(t){return zy()&&t instanceof Blob}function zy(){return typeof Blob<"u"}function km(t,e,n,i){if(i<e)throw Im(`Invalid value for '${t}'. Expected ${e} or greater.`);if(i>n)throw Im(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xl(t,e,n){let i=e;return n==null&&(i=`https://${e}`),`${n}://${i}/v0${t}`}function yS(t){const e=encodeURIComponent;let n="?";for(const i in t)if(t.hasOwnProperty(i)){const r=e(i)+"="+e(t[i]);n=n+r+"&"}return n=n.slice(0,-1),n}var ts;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(ts||(ts={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a6(t,e){const n=t>=500&&t<600,r=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||r||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l6{constructor(e,n,i,r,s,o,a,l,c,h,d,p=!0){this.url_=e,this.method_=n,this.headers_=i,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=h,this.connectionFactory_=d,this.retry=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((g,y)=>{this.resolve_=g,this.reject_=y,this.start_()})}start_(){const e=(i,r)=>{if(r){i(!1,new Fc(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===ts.NO_ERROR,l=s.getStatus();if(!a||a6(l,this.additionalRetryCodes_)&&this.retry){const h=s.getErrorCode()===ts.ABORT;i(!1,new Fc(!1,null,h));return}const c=this.successCodes_.indexOf(l)!==-1;i(!0,new Fc(c,s))})},n=(i,r)=>{const s=this.resolve_,o=this.reject_,a=r.connection;if(r.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());s6(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=Fy();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(r.canceled){const l=this.appDelete_?gS():GL();o(l)}else{const l=KL();o(l)}};this.canceled_?n(!1,new Fc(!1,null,!0)):this.backoffId_=i6(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&r6(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Fc{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}}function c6(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function u6(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function h6(t,e){e&&(t["X-Firebase-GMPID"]=e)}function d6(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function f6(t,e,n,i,r,s,o=!0){const a=yS(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return h6(c,e),c6(c,n),u6(c,s),d6(c,i),new l6(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p6(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function m6(...t){const e=p6();if(e!==void 0){const n=new e;for(let i=0;i<t.length;i++)n.append(t[i]);return n.getBlob()}else{if(zy())return new Blob(t);throw new Ke(qe.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function g6(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y6(t){if(typeof atob>"u")throw e6("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Un={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Bf{constructor(e,n){this.data=e,this.contentType=n||null}}function _6(t,e){switch(t){case Un.RAW:return new Bf(_S(e));case Un.BASE64:case Un.BASE64URL:return new Bf(vS(t,e));case Un.DATA_URL:return new Bf(w6(e),x6(e))}throw Fy()}function _S(t){const e=[];for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=i,o=t.charCodeAt(++n);i=65536|(s&1023)<<10|o&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function v6(t){let e;try{e=decodeURIComponent(t)}catch{throw Ba(Un.DATA_URL,"Malformed data URL.")}return _S(e)}function vS(t,e){switch(t){case Un.BASE64:{const r=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(r||s)throw Ba(t,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case Un.BASE64URL:{const r=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(r||s)throw Ba(t,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=y6(e)}catch(r){throw r.message.includes("polyfill")?r:Ba(t,"Invalid character found")}const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}class wS{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Ba(Un.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=n[1]||null;i!=null&&(this.base64=E6(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function w6(t){const e=new wS(t);return e.base64?vS(Un.BASE64,e.rest):v6(e.rest)}function x6(t){return new wS(t).contentType}function E6(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(e,n){let i=0,r="";K1(e)?(this.data_=e,i=e.size,r=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,n){if(K1(this.data_)){const i=this.data_,r=g6(i,e,n);return r===null?null:new Gi(r)}else{const i=new Uint8Array(this.data_.buffer,e,n-e);return new Gi(i,!0)}}static getBlob(...e){if(zy()){const n=e.map(i=>i instanceof Gi?i.data_:i);return new Gi(m6.apply(null,n))}else{const n=e.map(o=>Uy(o)?_6(Un.RAW,o).data:o.data_);let i=0;n.forEach(o=>{i+=o.byteLength});const r=new Uint8Array(i);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)r[s++]=o[a]}),new Gi(r,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function By(t){let e;try{e=JSON.parse(t)}catch{return null}return o6(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b6(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function T6(t,e){const n=e.split("/").filter(i=>i.length>0).join("/");return t.length===0?n:t+"/"+n}function xS(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S6(t,e){return e}class Ot{constructor(e,n,i,r){this.server=e,this.local=n||e,this.writable=!!i,this.xform=r||S6}}let Uc=null;function I6(t){return!Uy(t)||t.length<2?t:xS(t)}function ES(){if(Uc)return Uc;const t=[];t.push(new Ot("bucket")),t.push(new Ot("generation")),t.push(new Ot("metageneration")),t.push(new Ot("name","fullPath",!0));function e(s,o){return I6(o)}const n=new Ot("name");n.xform=e,t.push(n);function i(s,o){return o!==void 0?Number(o):o}const r=new Ot("size");return r.xform=i,t.push(r),t.push(new Ot("timeCreated")),t.push(new Ot("updated")),t.push(new Ot("md5Hash",null,!0)),t.push(new Ot("cacheControl",null,!0)),t.push(new Ot("contentDisposition",null,!0)),t.push(new Ot("contentEncoding",null,!0)),t.push(new Ot("contentLanguage",null,!0)),t.push(new Ot("contentType",null,!0)),t.push(new Ot("metadata","customMetadata",!0)),Uc=t,Uc}function k6(t,e){function n(){const i=t.bucket,r=t.fullPath,s=new jt(i,r);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function P6(t,e,n){const i={};i.type="file";const r=n.length;for(let s=0;s<r;s++){const o=n[s];i[o.local]=o.xform(i,e[o.server])}return k6(i,t),i}function bS(t,e,n){const i=By(e);return i===null?null:P6(t,i,n)}function C6(t,e,n,i){const r=By(e);if(r===null||!Uy(r.downloadTokens))return null;const s=r.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(c=>{const h=t.bucket,d=t.fullPath,p="/b/"+o(h)+"/o/"+o(d),g=Xl(p,n,i),y=yS({alt:"media",token:c});return g+y})[0]}function A6(t,e){const n={},i=e.length;for(let r=0;r<i;r++){const s=e[r];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G1="prefixes",Q1="items";function R6(t,e,n){const i={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[G1])for(const r of n[G1]){const s=r.replace(/\/$/,""),o=t._makeStorageReference(new jt(e,s));i.prefixes.push(o)}if(n[Q1])for(const r of n[Q1]){const s=t._makeStorageReference(new jt(e,r.name));i.items.push(s)}return i}function N6(t,e,n){const i=By(n);return i===null?null:R6(t,e,i)}class Sd{constructor(e,n,i,r){this.url=e,this.method=n,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $y(t){if(!t)throw Fy()}function D6(t,e){function n(i,r){const s=bS(t,r,e);return $y(s!==null),s}return n}function M6(t,e){function n(i,r){const s=N6(t,e,r);return $y(s!==null),s}return n}function O6(t,e){function n(i,r){const s=bS(t,r,e);return $y(s!==null),C6(s,r,t.host,t._protocol)}return n}function Hy(t){function e(n,i){let r;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?r=WL():r=HL():n.getStatus()===402?r=$L(t.bucket):n.getStatus()===403?r=qL(t.path):r=i,r.status=n.getStatus(),r.serverResponse=i.serverResponse,r}return e}function TS(t){const e=Hy(t);function n(i,r){let s=e(i,r);return i.getStatus()===404&&(s=BL(t.path)),s.serverResponse=r.serverResponse,s}return n}function L6(t,e,n,i,r){const s={};e.isRoot?s.prefix="":s.prefix=e.path+"/",n.length>0&&(s.delimiter=n),i&&(s.pageToken=i),r&&(s.maxResults=r);const o=e.bucketOnlyServerUrl(),a=Xl(o,t.host,t._protocol),l="GET",c=t.maxOperationRetryTime,h=new Sd(a,l,M6(t,e.bucket),c);return h.urlParams=s,h.errorHandler=Hy(e),h}function j6(t,e,n){const i=e.fullServerUrl(),r=Xl(i,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new Sd(r,s,O6(t,n),o);return a.errorHandler=TS(e),a}function V6(t,e){const n=e.fullServerUrl(),i=Xl(n,t.host,t._protocol),r="DELETE",s=t.maxOperationRetryTime;function o(l,c){}const a=new Sd(i,r,o,s);return a.successCodes=[200,204],a.errorHandler=TS(e),a}function F6(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function U6(t,e,n){const i=Object.assign({},n);return i.fullPath=t.path,i.size=e.size(),i.contentType||(i.contentType=F6(null,e)),i}function z6(t,e,n,i,r){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let T="";for(let C=0;C<2;C++)T=T+Math.random().toString().slice(2);return T}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=U6(e,i,r),h=A6(c,n),d="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,p=`\r
--`+l+"--",g=Gi.getBlob(d,i,p);if(g===null)throw JL();const y={name:c.fullPath},x=Xl(s,t.host,t._protocol),b="POST",v=t.maxUploadRetryTime,w=new Sd(x,b,D6(t,n),v);return w.urlParams=y,w.headers=o,w.body=g.uploadData(),w.errorHandler=Hy(e),w}class B6{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ts.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ts.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ts.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,i,r){if(this.sent_)throw oa("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),r!==void 0)for(const s in r)r.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,r[s].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw oa("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw oa("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw oa("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw oa("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class $6 extends B6{initXhr(){this.xhr_.responseType="text"}}function Id(){return new $6}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(e,n){this._service=e,n instanceof jt?this._location=n:this._location=jt.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new ys(e,n)}get root(){const e=new jt(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return xS(this._location.path)}get storage(){return this._service}get parent(){const e=b6(this._location.path);if(e===null)return null;const n=new jt(this._location.bucket,e);return new ys(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw t6(e)}}function H6(t,e,n){t._throwIfRoot("uploadBytes");const i=z6(t.storage,t._location,ES(),new Gi(e,!0),n);return t.storage.makeRequestWithTokens(i,Id).then(r=>({metadata:r,ref:t}))}function W6(t){const e={prefixes:[],items:[]};return SS(t,e).then(()=>e)}async function SS(t,e,n){const r=await q6(t,{pageToken:n});e.prefixes.push(...r.prefixes),e.items.push(...r.items),r.nextPageToken!=null&&await SS(t,e,r.nextPageToken)}function q6(t,e){e!=null&&typeof e.maxResults=="number"&&km("options.maxResults",1,1e3,e.maxResults);const n=e||{},i=L6(t.storage,t._location,"/",n.pageToken,n.maxResults);return t.storage.makeRequestWithTokens(i,Id)}function K6(t){t._throwIfRoot("getDownloadURL");const e=j6(t.storage,t._location,ES());return t.storage.makeRequestWithTokens(e,Id).then(n=>{if(n===null)throw ZL();return n})}function G6(t){t._throwIfRoot("deleteObject");const e=V6(t.storage,t._location);return t.storage.makeRequestWithTokens(e,Id)}function Q6(t,e){const n=T6(t._location.path,e),i=new jt(t._location.bucket,n);return new ys(t.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y6(t){return/^[A-Za-z]+:\/\//.test(t)}function X6(t,e){return new ys(t,e)}function IS(t,e){if(t instanceof Wy){const n=t;if(n._bucket==null)throw XL();const i=new ys(n,n._bucket);return e!=null?IS(i,e):i}else return e!==void 0?Q6(t,e):t}function J6(t,e){if(e&&Y6(e)){if(t instanceof Wy)return X6(t,e);throw Im("To use ref(service, url), the first argument must be a Storage instance.")}else return IS(t,e)}function Y1(t,e){const n=e==null?void 0:e[mS];return n==null?null:jt.makeFromBucketSpec(n,t)}function Z6(t,e,n,i={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:r}=i;r&&(t._overrideAuthToken=typeof r=="string"?r:nT(r,t.app.options.projectId))}class Wy{constructor(e,n,i,r,s){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=r,this._firebaseVersion=s,this._bucket=null,this._host=pS,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=UL,this._maxUploadRetryTime=zL,this._requests=new Set,r!=null?this._bucket=jt.makeFromBucketSpec(r,this._host):this._bucket=Y1(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=jt.makeFromBucketSpec(this._url,e):this._bucket=Y1(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){km("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){km("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ys(this,e)}_makeRequest(e,n,i,r,s=!0){if(this._deleted)return new n6(gS());{const o=f6(e,this._appId,i,r,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[i,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,r).getPromise()}}const X1="@firebase/storage",J1="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kS="storage";function Pm(t,e,n){return t=Ee(t),H6(t,e,n)}function Z1(t){return t=Ee(t),W6(t)}function Cm(t){return t=Ee(t),K6(t)}function ew(t){return t=Ee(t),G6(t)}function bl(t,e){return t=Ee(t),J6(t,e)}function e3(t=Hg(),e){t=Ee(t);const i=td(t,kS).getImmediate({identifier:e}),r=Zb("storage");return r&&t3(i,...r),i}function t3(t,e,n,i={}){Z6(t,e,n,i)}function n3(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return new Wy(n,i,r,e,Es)}function i3(){cs(new wr(kS,n3,"PUBLIC").setMultipleInstances(!0)),$n(X1,J1,""),$n(X1,J1,"esm2017")}i3();const r3={apiKey:"AIzaSyCnKNX6SQQUvXs5pDtwMFLlNSTLkm7YvCw",authDomain:"retailease-a45f0.firebaseapp.com",projectId:"retailease-a45f0",storageBucket:"retailease-a45f0.firebasestorage.app",messagingSenderId:"943909405770",appId:"1:943909405770:web:e42ab60d5d266e70eb92b3"},qy=sT(r3),zc=FD(qy),et=PL(qy),Tl=e3(qy),PS=O.createContext();function ln(){return O.useContext(PS)}function s3({children:t}){const[e,n]=O.useState(null),[i,r]=O.useState(!0);function s(h,d){return v4(zc,h,d)}function o(h,d){return w4(zc,h,d)}function a(){return k4(zc)}function l(h,d){return DT(h,d)}O.useEffect(()=>I4(zc,d=>{n(d),r(!1)}),[]);const c={currentUser:e,signup:s,login:o,logout:a,updateUserProfile:l,loading:i};return f.jsx(PS.Provider,{value:c,children:t})}var CS={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},tw=mi.createContext&&mi.createContext(CS),gr=function(){return gr=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},gr.apply(this,arguments)},o3=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n};function AS(t){return t&&t.map(function(e,n){return mi.createElement(e.tag,gr({key:n},e.attr),AS(e.child))})}function _e(t){return function(e){return mi.createElement(a3,gr({attr:gr({},t.attr)},e),AS(t.child))}}function a3(t){var e=function(n){var i=t.attr,r=t.size,s=t.title,o=o3(t,["attr","size","title"]),a=r||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),mi.createElement("svg",gr({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,i,o,{className:l,style:gr(gr({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&mi.createElement("title",null,s),t.children)};return tw!==void 0?mi.createElement(tw.Consumer,null,function(n){return e(n)}):e(CS)}function RS(t){return _e({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"}}]})(t)}function l3(t){return _e({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M0 448V64h18v384H0zm26.857-.273V64H36v383.727h-9.143zm27.143 0V64h8.857v383.727H54zm44.857 0V64h8.857v383.727h-8.857zm36 0V64h17.714v383.727h-17.714zm44.857 0V64h8.857v383.727h-8.857zm18 0V64h8.857v383.727h-8.857zm18 0V64h8.857v383.727h-8.857zm35.715 0V64h18v383.727h-18zm44.857 0V64h18v383.727h-18zm35.999 0V64h18.001v383.727h-18.001zm36.001 0V64h18.001v383.727h-18.001zm26.857 0V64h18v383.727h-18zm45.143 0V64h26.857v383.727h-26.857zm35.714 0V64h9.143v383.727H476zm18 .273V64h18v384h-18z"}}]})(t)}function c3(t){return _e({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"}}]})(t)}function Ky(t){return _e({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M425.7 256c-16.9 0-32.8-9-41.4-23.4L320 126l-64.2 106.6c-8.7 14.5-24.6 23.5-41.5 23.5-4.5 0-9-.6-13.3-1.9L64 215v178c0 14.7 10 27.5 24.2 31l216.2 54.1c10.2 2.5 20.9 2.5 31 0L551.8 424c14.2-3.6 24.2-16.4 24.2-31V215l-137 39.1c-4.3 1.3-8.8 1.9-13.3 1.9zm212.6-112.2L586.8 41c-3.1-6.2-9.8-9.8-16.7-8.9L320 64l91.7 152.1c3.8 6.3 11.4 9.3 18.5 7.3l197.9-56.5c9.9-2.9 14.7-13.9 10.2-23.1zM53.2 41L1.7 143.8c-4.6 9.2.3 20.2 10.1 23l197.9 56.5c7.1 2 14.7-1 18.5-7.3L320 64 69.8 32.1c-6.9-.8-13.5 2.7-16.6 8.9z"}}]})(t)}function nw(t){return _e({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M0 464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V192H0v272zm320-196c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM192 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM64 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zM400 64h-48V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H160V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H48C21.5 64 0 85.5 0 112v48h448v-48c0-26.5-21.5-48-48-48z"}}]})(t)}function NS(t){return _e({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M512 144v288c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V144c0-26.5 21.5-48 48-48h88l12.3-32.9c7-18.7 24.9-31.1 44.9-31.1h125.5c20 0 37.9 12.4 44.9 31.1L376 96h88c26.5 0 48 21.5 48 48zM376 288c0-66.2-53.8-120-120-120s-120 53.8-120 120 53.8 120 120 120 120-53.8 120-120zm-32 0c0 48.5-39.5 88-88 88s-88-39.5-88-88 39.5-88 88-88 88 39.5 88 88z"}}]})(t)}function DS(t){return _e({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M511.1 378.8l-26.7-160c-2.6-15.4-15.9-26.7-31.6-26.7H208v-64h96c8.8 0 16-7.2 16-16V16c0-8.8-7.2-16-16-16H48c-8.8 0-16 7.2-16 16v96c0 8.8 7.2 16 16 16h96v64H59.1c-15.6 0-29 11.3-31.6 26.7L.8 378.7c-.6 3.5-.9 7-.9 10.5V480c0 17.7 14.3 32 32 32h448c17.7 0 32-14.3 32-32v-90.7c.1-3.5-.2-7-.8-10.5zM280 248c0-8.8 7.2-16 16-16h16c8.8 0 16 7.2 16 16v16c0 8.8-7.2 16-16 16h-16c-8.8 0-16-7.2-16-16v-16zm-32 64h16c8.8 0 16 7.2 16 16v16c0 8.8-7.2 16-16 16h-16c-8.8 0-16-7.2-16-16v-16c0-8.8 7.2-16 16-16zm-32-80c8.8 0 16 7.2 16 16v16c0 8.8-7.2 16-16 16h-16c-8.8 0-16-7.2-16-16v-16c0-8.8 7.2-16 16-16h16zM80 80V48h192v32H80zm40 200h-16c-8.8 0-16-7.2-16-16v-16c0-8.8 7.2-16 16-16h16c8.8 0 16 7.2 16 16v16c0 8.8-7.2 16-16 16zm16 64v-16c0-8.8 7.2-16 16-16h16c8.8 0 16 7.2 16 16v16c0 8.8-7.2 16-16 16h-16c-8.8 0-16-7.2-16-16zm216 112c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h176c4.4 0 8 3.6 8 8v16zm24-112c0 8.8-7.2 16-16 16h-16c-8.8 0-16-7.2-16-16v-16c0-8.8 7.2-16 16-16h16c8.8 0 16 7.2 16 16v16zm48-80c0 8.8-7.2 16-16 16h-16c-8.8 0-16-7.2-16-16v-16c0-8.8 7.2-16 16-16h16c8.8 0 16 7.2 16 16v16z"}}]})(t)}function Gy(t){return _e({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M496 384H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16zM464 96H345.94c-21.38 0-32.09 25.85-16.97 40.97l32.4 32.4L288 242.75l-73.37-73.37c-12.5-12.5-32.76-12.5-45.25 0l-68.69 68.69c-6.25 6.25-6.25 16.38 0 22.63l22.62 22.62c6.25 6.25 16.38 6.25 22.63 0L192 237.25l73.37 73.37c12.5 12.5 32.76 12.5 45.25 0l96-96 32.4 32.4c15.12 15.12 40.97 4.41 40.97-16.97V112c.01-8.84-7.15-16-15.99-16z"}}]})(t)}function MS(t){return _e({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"}}]})(t)}function u3(t){return _e({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"}}]})(t)}function Qy(t){return _e({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"}}]})(t)}function h3(t){return _e({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"}}]})(t)}function $f(t){return _e({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M320 400c-75.85 0-137.25-58.71-142.9-133.11L72.2 185.82c-13.79 17.3-26.48 35.59-36.72 55.59a32.35 32.35 0 0 0 0 29.19C89.71 376.41 197.07 448 320 448c26.91 0 52.87-4 77.89-10.46L346 397.39a144.13 144.13 0 0 1-26 2.61zm313.82 58.1l-110.55-85.44a331.25 331.25 0 0 0 81.25-102.07 32.35 32.35 0 0 0 0-29.19C550.29 135.59 442.93 64 320 64a308.15 308.15 0 0 0-147.32 37.7L45.46 3.37A16 16 0 0 0 23 6.18L3.37 31.45A16 16 0 0 0 6.18 53.9l588.36 454.73a16 16 0 0 0 22.46-2.81l19.64-25.27a16 16 0 0 0-2.82-22.45zm-183.72-142l-39.3-30.38A94.75 94.75 0 0 0 416 256a94.76 94.76 0 0 0-121.31-92.21A47.65 47.65 0 0 1 304 192a46.64 46.64 0 0 1-1.54 10l-73.61-56.89A142.31 142.31 0 0 1 320 112a143.92 143.92 0 0 1 144 144c0 21.63-5.29 41.79-13.9 60.11z"}}]})(t)}function Iu(t){return _e({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z"}}]})(t)}function d3(t){return _e({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"}}]})(t)}function f3(t){return _e({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M96.06 454.35c.01 6.29 1.87 12.45 5.36 17.69l17.09 25.69a31.99 31.99 0 0 0 26.64 14.28h61.71a31.99 31.99 0 0 0 26.64-14.28l17.09-25.69a31.989 31.989 0 0 0 5.36-17.69l.04-38.35H96.01l.05 38.35zM0 176c0 44.37 16.45 84.85 43.56 115.78 16.52 18.85 42.36 58.23 52.21 91.45.04.26.07.52.11.78h160.24c.04-.26.07-.51.11-.78 9.85-33.22 35.69-72.6 52.21-91.45C335.55 260.85 352 220.37 352 176 352 78.61 272.91-.3 175.45 0 73.44.31 0 82.97 0 176zm176-80c-44.11 0-80 35.89-80 80 0 8.84-7.16 16-16 16s-16-7.16-16-16c0-61.76 50.24-112 112-112 8.84 0 16 7.16 16 16s-7.16 16-16 16z"}}]})(t)}function Sh(t){return _e({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 224h-24v-72C376 68.2 307.8 0 224 0S72 68.2 72 152v72H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48zm-104 0H152v-72c0-39.7 32.3-72 72-72s72 32.3 72 72v72z"}}]})(t)}function OS(t){return _e({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"}}]})(t)}function LS(t){return _e({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"}}]})(t)}function Yy(t){return _e({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M358.4 3.2L320 48 265.6 3.2a15.9 15.9 0 0 0-19.2 0L192 48 137.6 3.2a15.9 15.9 0 0 0-19.2 0L64 48 25.6 3.2C15-4.7 0 2.8 0 16v480c0 13.2 15 20.7 25.6 12.8L64 464l54.4 44.8a15.9 15.9 0 0 0 19.2 0L192 464l54.4 44.8a15.9 15.9 0 0 0 19.2 0L320 464l38.4 44.8c10.5 7.9 25.6.4 25.6-12.8V16c0-13.2-15-20.7-25.6-12.8zM320 360c0 4.4-3.6 8-8 8H72c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h240c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H72c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h240c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H72c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h240c4.4 0 8 3.6 8 8v16z"}}]})(t)}function jS(t){return _e({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M32,224H64V416H32A31.96166,31.96166,0,0,1,0,384V256A31.96166,31.96166,0,0,1,32,224Zm512-48V448a64.06328,64.06328,0,0,1-64,64H160a64.06328,64.06328,0,0,1-64-64V176a79.974,79.974,0,0,1,80-80H288V32a32,32,0,0,1,64,0V96H464A79.974,79.974,0,0,1,544,176ZM264,256a40,40,0,1,0-40,40A39.997,39.997,0,0,0,264,256Zm-8,128H192v32h64Zm96,0H288v32h64ZM456,256a40,40,0,1,0-40,40A39.997,39.997,0,0,0,456,256Zm-8,128H384v32h64ZM640,256V384a31.96166,31.96166,0,0,1-32,32H576V224h32A31.96166,31.96166,0,0,1,640,256Z"}}]})(t)}function p3(t){return _e({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M308 96c6.627 0 12-5.373 12-12V44c0-6.627-5.373-12-12-12H12C5.373 32 0 37.373 0 44v44.748c0 6.627 5.373 12 12 12h85.28c27.308 0 48.261 9.958 60.97 27.252H12c-6.627 0-12 5.373-12 12v40c0 6.627 5.373 12 12 12h158.757c-6.217 36.086-32.961 58.632-74.757 58.632H12c-6.627 0-12 5.373-12 12v53.012c0 3.349 1.4 6.546 3.861 8.818l165.052 152.356a12.001 12.001 0 0 0 8.139 3.182h82.562c10.924 0 16.166-13.408 8.139-20.818L116.871 319.906c76.499-2.34 131.144-53.395 138.318-127.906H308c6.627 0 12-5.373 12-12v-40c0-6.627-5.373-12-12-12h-58.69c-3.486-11.541-8.28-22.246-14.252-32H308z"}}]})(t)}function Xy(t){return _e({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"}}]})(t)}function Yr(t){return _e({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M528.12 301.319l47.273-208C578.806 78.301 567.391 64 551.99 64H159.208l-9.166-44.81C147.758 8.021 137.93 0 126.529 0H24C10.745 0 0 10.745 0 24v16c0 13.255 10.745 24 24 24h69.883l70.248 343.435C147.325 417.1 136 435.222 136 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-15.674-6.447-29.835-16.824-40h209.647C430.447 426.165 424 440.326 424 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-22.172-12.888-41.332-31.579-50.405l5.517-24.276c3.413-15.018-8.002-29.319-23.403-29.319H218.117l-6.545-32h293.145c11.206 0 20.92-7.754 23.403-18.681z"}}]})(t)}function VS(t){return _e({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"}}]})(t)}function FS(t){return _e({attr:{viewBox:"0 0 616 512"},child:[{tag:"path",attr:{d:"M602 118.6L537.1 15C531.3 5.7 521 0 510 0H106C95 0 84.7 5.7 78.9 15L14 118.6c-33.5 53.5-3.8 127.9 58.8 136.4 4.5.6 9.1.9 13.7.9 29.6 0 55.8-13 73.8-33.1 18 20.1 44.3 33.1 73.8 33.1 29.6 0 55.8-13 73.8-33.1 18 20.1 44.3 33.1 73.8 33.1 29.6 0 55.8-13 73.8-33.1 18.1 20.1 44.3 33.1 73.8 33.1 4.7 0 9.2-.3 13.7-.9 62.8-8.4 92.6-82.8 59-136.4zM529.5 288c-10 0-19.9-1.5-29.5-3.8V384H116v-99.8c-9.6 2.2-19.5 3.8-29.5 3.8-6 0-12.1-.4-18-1.2-5.6-.8-11.1-2.1-16.4-3.6V480c0 17.7 14.3 32 32 32h448c17.7 0 32-14.3 32-32V283.2c-5.4 1.6-10.8 2.9-16.4 3.6-6.1.8-12.1 1.2-18.2 1.2z"}}]})(t)}function m3(t){return _e({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"}}]})(t)}function g3(t){return _e({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M384 64H192C85.961 64 0 149.961 0 256s85.961 192 192 192h192c106.039 0 192-85.961 192-192S490.039 64 384 64zM64 256c0-70.741 57.249-128 128-128 70.741 0 128 57.249 128 128 0 70.741-57.249 128-128 128-70.741 0-128-57.249-128-128zm320 128h-48.905c65.217-72.858 65.236-183.12 0-256H384c70.741 0 128 57.249 128 128 0 70.74-57.249 128-128 128z"}}]})(t)}function y3(t){return _e({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M384 64H192C86 64 0 150 0 256s86 192 192 192h192c106 0 192-86 192-192S490 64 384 64zm0 320c-70.8 0-128-57.3-128-128 0-70.8 57.3-128 128-128 70.8 0 128 57.3 128 128 0 70.8-57.3 128-128 128z"}}]})(t)}function Ih(t){return _e({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"}}]})(t)}function Jy(t){return _e({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"}}]})(t)}const _3=()=>{const[t,e]=O.useState(!1);return O.useEffect(()=>{const n=setTimeout(()=>{e(!0)},2500);return()=>clearTimeout(n)},[]),f.jsx("div",{className:`splash-screen ${t?"fade-out":"fade-in"}`,children:f.jsxs("div",{className:"splash-content",children:[f.jsx("div",{className:"logo-container",children:f.jsx(Yr,{className:"cart-icon"})}),f.jsx("h1",{className:"app-name",children:"Retail Ease"}),f.jsx("div",{className:"loading-bar",children:f.jsx("div",{className:"loading-progress"})})]})})},v3=()=>{const t=Ni();return f.jsx("div",{className:"landing-page",children:f.jsxs("div",{className:"landing-content",children:[f.jsx("div",{className:"logo-container",children:f.jsx(Yr,{className:"cart-icon"})}),f.jsx("h1",{className:"app-title",children:"Welcome to Retail Ease"}),f.jsx("p",{className:"app-description",children:"Smart inventory management for Indian small businesses. Track items, get alerts, analyze sales."}),f.jsxs("div",{className:"button-group",children:[f.jsx("button",{className:"primary-btn register-btn",onClick:()=>t("/register"),children:"Register"}),f.jsx("button",{className:"secondary-btn login-btn",onClick:()=>t("/login"),children:"Login"})]}),f.jsxs("div",{className:"features-section",children:[f.jsxs("div",{className:"feature-card",children:[f.jsx("div",{className:"feature-icon",style:{backgroundColor:"var(--primary)"},children:f.jsx(Yr,{})}),f.jsx("h3",{children:"Inventory Management"}),f.jsx("p",{children:"Track your stock levels and get alerts for low inventory"})]}),f.jsxs("div",{className:"feature-card",children:[f.jsx("div",{className:"feature-icon",style:{backgroundColor:"var(--secondary)"},children:f.jsx(Yr,{})}),f.jsx("h3",{children:"Expiry Alerts"}),f.jsx("p",{children:"Never miss expiry dates with our smart notification system"})]}),f.jsxs("div",{className:"feature-card",children:[f.jsx("div",{className:"feature-icon",style:{backgroundColor:"var(--accent)"},children:f.jsx(Yr,{})}),f.jsx("h3",{children:"Business Analytics"}),f.jsx("p",{children:"Gain insights into your sales and profit margins"})]})]})]})})},w3=()=>{const[t,e]=O.useState(""),[n,i]=O.useState(""),[r,s]=O.useState(""),[o,a]=O.useState(!1),{login:l}=ln(),c=Ni(),h=async d=>{d.preventDefault();try{s(""),a(!0),await l(t,n),c("/dashboard")}catch(p){s("Failed to log in. Please check your credentials."),console.error(p)}a(!1)};return f.jsx("div",{className:"auth-container",children:f.jsxs("div",{className:"auth-card",children:[f.jsxs(Sn,{to:"/",className:"back-link",children:[f.jsx(RS,{})," Back to Home"]}),f.jsx("h2",{className:"auth-title",children:"Login to Retail Ease"}),r&&f.jsx("div",{className:"error-message",children:r}),f.jsxs("form",{onSubmit:h,className:"auth-form",children:[f.jsxs("div",{className:"form-group",children:[f.jsxs("label",{htmlFor:"email",children:[f.jsx(Qy,{})," Email"]}),f.jsx("input",{type:"email",id:"email",value:t,onChange:d=>e(d.target.value),required:!0,placeholder:"Enter your email"})]}),f.jsxs("div",{className:"form-group",children:[f.jsxs("label",{htmlFor:"password",children:[f.jsx(Sh,{})," Password"]}),f.jsx("input",{type:"password",id:"password",value:n,onChange:d=>i(d.target.value),required:!0,placeholder:"Enter your password"})]}),f.jsx("button",{type:"submit",className:"primary-btn auth-btn",disabled:o,children:o?"Logging in...":"Login"})]}),f.jsxs("p",{className:"auth-redirect",children:["Don't have an account? ",f.jsx(Sn,{to:"/register",children:"Register"})]})]})})},x3=()=>{const[t,e]=O.useState(""),[n,i]=O.useState(""),[r,s]=O.useState(""),[o,a]=O.useState(""),[l,c]=O.useState(""),[h,d]=O.useState(!1),{signup:p,updateUserProfile:g}=ln(),y=Ni(),x=async b=>{if(b.preventDefault(),r!==o)return c("Passwords do not match");try{c(""),d(!0);const{user:v}=await p(n,r);await g(v,{displayName:t}),y("/dashboard")}catch(v){c("Failed to create an account"),console.error(v)}d(!1)};return f.jsx("div",{className:"auth-container",children:f.jsxs("div",{className:"auth-card",children:[f.jsxs(Sn,{to:"/",className:"back-link",children:[f.jsx(RS,{})," Back to Home"]}),f.jsx("h2",{className:"auth-title",children:"Register for Retail Ease"}),l&&f.jsx("div",{className:"error-message",children:l}),f.jsxs("form",{onSubmit:x,className:"auth-form",children:[f.jsxs("div",{className:"form-group",children:[f.jsxs("label",{htmlFor:"name",children:[f.jsx(Jy,{})," Full Name"]}),f.jsx("input",{type:"text",id:"name",value:t,onChange:b=>e(b.target.value),required:!0,placeholder:"Enter your full name"})]}),f.jsxs("div",{className:"form-group",children:[f.jsxs("label",{htmlFor:"email",children:[f.jsx(Qy,{})," Email"]}),f.jsx("input",{type:"email",id:"email",value:n,onChange:b=>i(b.target.value),required:!0,placeholder:"Enter your email"})]}),f.jsxs("div",{className:"form-group",children:[f.jsxs("label",{htmlFor:"password",children:[f.jsx(Sh,{})," Password"]}),f.jsx("input",{type:"password",id:"password",value:r,onChange:b=>s(b.target.value),required:!0,placeholder:"Create a password",minLength:"6"})]}),f.jsxs("div",{className:"form-group",children:[f.jsxs("label",{htmlFor:"confirmPassword",children:[f.jsx(Sh,{})," Confirm Password"]}),f.jsx("input",{type:"password",id:"confirmPassword",value:o,onChange:b=>a(b.target.value),required:!0,placeholder:"Confirm your password",minLength:"6"})]}),f.jsx("button",{type:"submit",className:"primary-btn auth-btn",disabled:h,children:h?"Creating Account...":"Register"})]}),f.jsxs("p",{className:"auth-redirect",children:["Already have an account? ",f.jsx(Sn,{to:"/login",children:"Login"})]})]})})},E3=()=>{const{currentUser:t}=ln(),[e,n]=O.useState({totalItems:0,lowStock:0,expiringItems:0,totalValue:0}),[i,r]=O.useState(!0);return O.useEffect(()=>{if(!t)return;const s=ki(et,"inventory"),o=gs(s,mr("userId","==",t.uid)),a=Vy(o,l=>{let c=0,h=0,d=0,p=0;l.forEach(g=>{const y=g.data();if(c++,y.quantity<5&&h++,y.expiryDate){const v=new Date(y.expiryDate.seconds*1e3)-new Date,w=Math.ceil(v/(1e3*60*60*24));w>0&&w<=30&&d++}p+=y.price*y.quantity}),n({totalItems:c,lowStock:h,expiringItems:d,totalValue:p}),r(!1)},l=>{console.error("Error fetching inventory stats:",l),r(!1)});return()=>a()},[t]),f.jsxs("div",{className:"dashboard",children:[f.jsx("h1",{className:"page-title",children:"Dashboard"}),f.jsxs("div",{className:"welcome-card",children:[f.jsxs("h2",{children:["Welcome, ",(t==null?void 0:t.displayName)||"User","!"]}),f.jsx("p",{children:"Manage your inventory and track your business performance with Retail Ease."})]}),f.jsxs("div",{className:"dashboard-stats",children:[f.jsxs("div",{className:"stat-card",children:[f.jsx("h3",{children:"Total Items"}),f.jsx("p",{className:"stat-value",children:i?"...":e.totalItems})]}),f.jsxs("div",{className:"stat-card",children:[f.jsx("h3",{children:"Low Stock"}),f.jsx("p",{className:"stat-value",children:i?"...":e.lowStock})]}),f.jsxs("div",{className:"stat-card",children:[f.jsx("h3",{children:"Expiring Soon"}),f.jsx("p",{className:"stat-value",children:i?"...":e.expiringItems})]}),f.jsxs("div",{className:"stat-card",children:[f.jsx("h3",{children:"Total Value"}),f.jsxs("p",{className:"stat-value",children:["",i?"...":e.totalValue.toLocaleString("en-IN")]})]})]}),f.jsxs("div",{className:"dashboard-actions",children:[f.jsxs(Sn,{to:"/inventory",className:"action-card",children:[f.jsx("div",{className:"action-icon",style:{backgroundColor:"var(--primary)"},children:f.jsx(Ky,{})}),f.jsxs("div",{className:"action-content",children:[f.jsx("h3",{children:"Inventory"}),f.jsx("p",{children:"Manage your stock and items"})]})]}),f.jsxs(Sn,{to:"/billing",className:"action-card",children:[f.jsx("div",{className:"action-icon",style:{backgroundColor:"var(--secondary)"},children:f.jsx(DS,{})}),f.jsxs("div",{className:"action-content",children:[f.jsx("h3",{children:"Billing"}),f.jsx("p",{children:"Create bills and process sales"})]})]}),f.jsxs(Sn,{to:"/receipts",className:"action-card",children:[f.jsx("div",{className:"action-icon",style:{backgroundColor:"var(--accent)"},children:f.jsx(Yy,{})}),f.jsxs("div",{className:"action-content",children:[f.jsx("h3",{children:"Receipts"}),f.jsx("p",{children:"View and manage sales receipts"})]})]}),f.jsxs(Sn,{to:"/profit-analysis",className:"action-card",children:[f.jsx("div",{className:"action-icon",style:{backgroundColor:"var(--highlight)"},children:f.jsx(Gy,{})}),f.jsxs("div",{className:"action-content",children:[f.jsx("h3",{children:"Profit Analysis"}),f.jsx("p",{children:"Track your business performance"})]})]}),f.jsxs(Sn,{to:"/ai-business-help",className:"action-card",children:[f.jsx("div",{className:"action-icon",style:{backgroundColor:"var(--accent)"},children:f.jsx(jS,{})}),f.jsxs("div",{className:"action-content",children:[f.jsx("h3",{children:"AI Business Help"}),f.jsx("p",{children:"Get AI-powered business insights"})]})]}),f.jsxs(Sn,{to:"/settings/profile",className:"action-card",children:[f.jsx("div",{className:"action-icon",style:{backgroundColor:"var(--highlight)"},children:f.jsx(MS,{})}),f.jsxs("div",{className:"action-content",children:[f.jsx("h3",{children:"Settings"}),f.jsx("p",{children:"Configure your account"})]})]})]})]})},b3=({onSubmit:t,onUpdate:e,editItem:n,setEditItem:i,categories:r})=>{const[s,o]=O.useState({name:"",quantity:0,price:0,expiryDate:"",category:"",barcode:"",newCategory:""}),[a,l]=O.useState(null),[c,h]=O.useState(null),[d,p]=O.useState(!1),[g,y]=O.useState(""),[x,b]=O.useState("");O.useEffect(()=>{n&&(o({name:n.name||"",quantity:n.quantity||0,price:n.price||0,expiryDate:n.expiryDate?new Date(n.expiryDate.seconds*1e3).toISOString().split("T")[0]:"",category:n.category||"",barcode:n.barcode||"",newCategory:""}),n.imageUrl?h(n.imageUrl):h(null))},[n]);const v=M=>{const{name:S,value:E,type:P}=M.target;o(k=>({...k,[S]:P==="number"?Number.parseFloat(E)||0:E}))},w=M=>{const S=M.target.files[0];if(!S)return;l(S);const E=new FileReader;E.onloadend=()=>{h(E.result)},E.readAsDataURL(S)},T=async M=>{M.preventDefault(),y(""),b(""),p(!0);try{const S={name:s.name,quantity:s.quantity,price:s.price,expiryDate:s.expiryDate?new Date(s.expiryDate):null,category:s.category==="new"?s.newCategory:s.category||"Uncategorized",barcode:s.barcode};if(n){const E=await e(n.id,{...S,imageUrl:n.imageUrl},a);E.success?(b("Item updated successfully!"),C()):y(E.error||"Failed to update item")}else{const E=await t(S,a);E.success?(b("Item added successfully!"),C()):y(E.error||"Failed to add item")}}catch(S){console.error("Error in form submission:",S),y("An unexpected error occurred")}p(!1)},C=()=>{o({name:"",quantity:0,price:0,expiryDate:"",category:"",barcode:"",newCategory:""}),l(null),h(null),i(null)},N=()=>{alert("Barcode scanner will be integrated with QuaggaJS in the future. This is a placeholder."),o(M=>({...M,barcode:"SCAN"+Math.floor(Math.random()*1e6)}))};return f.jsxs("div",{className:"inventory-form-container",children:[f.jsx("h2",{className:"form-title",children:n?"Edit Item":"Add New Item"}),g&&f.jsx("div",{className:"error-message",children:g}),x&&f.jsx("div",{className:"success-message",children:x}),f.jsxs("form",{onSubmit:T,className:"inventory-form",children:[f.jsxs("div",{className:"form-grid",children:[f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"name",children:"Item Name*"}),f.jsx("input",{type:"text",id:"name",name:"name",value:s.name,onChange:v,required:!0,placeholder:"Enter item name"})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"quantity",children:"Quantity*"}),f.jsx("input",{type:"number",id:"quantity",name:"quantity",value:s.quantity,onChange:v,required:!0,min:"0",step:"1"})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"price",children:"Price ()*"}),f.jsx("input",{type:"number",id:"price",name:"price",value:s.price,onChange:v,required:!0,min:"0",step:"0.01"})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"expiryDate",children:"Expiry Date"}),f.jsx("input",{type:"date",id:"expiryDate",name:"expiryDate",value:s.expiryDate,onChange:v})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"category",children:"Category"}),f.jsxs("select",{id:"category",name:"category",value:s.category,onChange:v,children:[f.jsx("option",{value:"",children:"Select Category"}),r.map(M=>f.jsx("option",{value:M,children:M},M)),f.jsx("option",{value:"new",children:"+ Add New Category"})]})]}),s.category==="new"&&f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"newCategory",children:"New Category"}),f.jsx("input",{type:"text",id:"newCategory",name:"newCategory",value:s.newCategory,onChange:v,placeholder:"Enter new category name"})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"barcode",children:"Barcode"}),f.jsxs("button",{type:"button",className:"scan-barcode-btn",onClick:N,children:[f.jsx(l3,{className:"barcode-icon"}),f.jsx("span",{children:"Scan Barcode"})]}),s.barcode&&f.jsx("div",{className:"barcode-result",children:f.jsxs("span",{children:["Barcode: ",s.barcode]})})]}),f.jsxs("div",{className:"form-group image-upload-group",children:[f.jsx("label",{children:"Item Image"}),f.jsxs("div",{className:"image-upload",children:[f.jsx("input",{type:"file",id:"image",accept:"image/*",onChange:w,className:"image-input"}),f.jsxs("label",{htmlFor:"image",className:"image-label",children:[f.jsx(NS,{className:"camera-icon"}),f.jsx("span",{children:a?"Change Image":"Upload Image"})]}),c&&f.jsx("div",{className:"image-preview",children:f.jsx("img",{src:c||"/placeholder.svg",alt:"Preview"})})]})]})]}),f.jsxs("div",{className:"form-actions",children:[n&&f.jsx("button",{type:"button",className:"outline-btn cancel-btn",onClick:C,children:"Cancel"}),f.jsx("button",{type:"submit",className:"primary-btn submit-btn",disabled:d,children:d?"Processing...":n?"Update Item":"Add Item"})]})]})]})},T3=({items:t,groupedItems:e,loading:n,onDelete:i,onEdit:r,onUpdateQuantity:s})=>{const o=c=>c?new Date(c.seconds*1e3).toLocaleDateString():"N/A",a=c=>{if(!c)return!1;const p=new Date(c.seconds*1e3)-new Date,g=Math.ceil(p/(1e3*60*60*24));return g>0&&g<=30},l=c=>c<5;return n?f.jsx("div",{className:"loading",children:"Loading inventory..."}):t.length===0?f.jsx("div",{className:"empty-inventory",children:f.jsx("p",{children:"No items found. Add your first item using the form above."})}):f.jsxs("div",{className:"inventory-list",children:[f.jsxs("h2",{className:"list-title",children:["Your Inventory (",t.length," items)"]}),Object.entries(e).map(([c,h])=>f.jsxs("div",{className:"category-section",children:[f.jsx("h3",{className:"category-title",children:c}),f.jsx("div",{className:"item-grid",children:h.map(d=>f.jsxs("div",{className:"item-card",children:[f.jsx("div",{className:"item-image",children:d.imageUrl?f.jsx("img",{src:d.imageUrl||"/placeholder.svg",alt:d.name}):f.jsx("div",{className:"no-image",children:"No Image"})}),f.jsxs("div",{className:"item-details",children:[f.jsx("h3",{className:"item-name",children:d.name}),f.jsxs("div",{className:"item-info",children:[f.jsx("div",{className:"info-row",children:f.jsxs("span",{className:"info-value price-tag",children:["",d.price.toFixed(2)]})}),f.jsx("div",{className:"info-row",children:f.jsxs("span",{className:`quantity-value ${l(d.quantity)?"low-stock":""}`,children:["Qty: ",d.quantity]})}),d.expiryDate&&f.jsx("div",{className:"info-row",children:f.jsxs("span",{className:`info-value ${a(d.expiryDate)?"expiring-soon":""}`,children:["Exp: ",o(d.expiryDate)]})})]}),f.jsxs("div",{className:"item-actions",children:[f.jsxs("div",{className:"quantity-control",children:[f.jsx("button",{className:"quantity-btn minus-btn",onClick:()=>s(d.id,d.quantity-1),disabled:d.quantity<=0,children:f.jsx(OS,{})}),f.jsx("button",{className:"quantity-btn plus-btn",onClick:()=>s(d.id,d.quantity+1),children:f.jsx(LS,{})})]}),f.jsxs("div",{className:"action-buttons",children:[f.jsx("button",{className:"action-btn edit-btn",onClick:()=>r(d),title:"Edit Item",children:f.jsx(u3,{})}),f.jsx("button",{className:"action-btn delete-btn",onClick:()=>i(d.id),title:"Delete Item",children:f.jsx(Ih,{})})]})]})]})]},d.id))})]},c))]})},S3=()=>{const[t,e]=O.useState([]),[n,i]=O.useState(!0),[r,s]=O.useState(""),[o,a]=O.useState(""),[l,c]=O.useState("All"),[h,d]=O.useState(["All"]),[p,g]=O.useState(null),{currentUser:y}=ln(),[x,b]=O.useState("category"),[v,w]=O.useState("asc");O.useEffect(()=>{if(!y)return;i(!0);const k=gs(ki(et,"inventory"),mr("userId","==",y.uid));return Vy(k,D=>{const R=[],le=new Set(["All"]);D.forEach(X=>{const U={id:X.id,...X.data()};R.push(U),U.category&&le.add(U.category)}),e(R),d(Array.from(le)),i(!1)},D=>{console.error("Error fetching inventory:",D),s("Failed to load inventory items"),i(!1)})},[y]);const T=async(k,A)=>{try{let D=null;if(A){const R=bl(Tl,`inventory/${y.uid}/${Date.now()}_${A.name}`);await Pm(R,A),D=await Cm(R)}return await dS(ki(et,"inventory"),{...k,imageUrl:D,userId:y.uid,createdAt:Su()}),{success:!0}}catch(D){return console.error("Error adding item:",D),{success:!1,error:"Failed to add item"}}},C=async(k,A,D)=>{try{let R=A.imageUrl;if(D){const le=bl(Tl,`inventory/${y.uid}/${Date.now()}_${D.name}`);await Pm(le,D),R=await Cm(le)}return await Sm(yn(et,"inventory",k),{...A,imageUrl:R,updatedAt:Su()}),g(null),{success:!0}}catch(R){return console.error("Error updating item:",R),{success:!1,error:"Failed to update item"}}},N=async k=>{if(window.confirm("Are you sure you want to delete this item?"))try{await Tu(yn(et,"inventory",k))}catch(A){console.error("Error deleting item:",A),s("Failed to delete item")}},M=async(k,A)=>{if(!(A<0))try{await Sm(yn(et,"inventory",k),{quantity:A,updatedAt:Su()})}catch(D){console.error("Error updating quantity:",D),s("Failed to update quantity")}},S=k=>{const A=k.target.value;A==="price-asc"?(b("price"),w("asc")):A==="price-desc"?(b("price"),w("desc")):A==="expiry-asc"?(b("expiryDate"),w("asc")):(b(A),w("asc"))},E=t.filter(k=>{const A=k.name.toLowerCase().includes(o.toLowerCase()),D=l==="All"||k.category===l;return A&&D}).sort((k,A)=>{if(x==="price")return v==="asc"?k.price-A.price:A.price-k.price;if(x==="expiryDate")return!k.expiryDate&&!A.expiryDate?0:k.expiryDate?A.expiryDate?v==="asc"?k.expiryDate.seconds-A.expiryDate.seconds:A.expiryDate.seconds-k.expiryDate.seconds:-1:1;if(x==="category"){const D=k.category||"Uncategorized",R=A.category||"Uncategorized";return D.localeCompare(R)}return 0}),P=E.reduce((k,A)=>{const D=A.category||"Uncategorized";return k[D]||(k[D]=[]),k[D].push(A),k},{});return f.jsxs("div",{className:"inventory-page",children:[f.jsx("h1",{className:"page-title",children:"Inventory Management"}),r&&f.jsx("div",{className:"error-message",children:r}),f.jsx(b3,{onSubmit:T,onUpdate:C,editItem:p,setEditItem:g,categories:h.filter(k=>k!=="All")}),f.jsxs("div",{className:"inventory-filters",children:[f.jsxs("div",{className:"search-container",children:[f.jsx(Xy,{className:"search-icon"}),f.jsx("input",{type:"text",placeholder:"Search items...",value:o,onChange:k=>a(k.target.value),className:"search-input"})]}),f.jsxs("div",{className:"filter-options",children:[f.jsx("select",{value:l,onChange:k=>c(k.target.value),className:"category-filter",children:h.map(k=>f.jsx("option",{value:k,children:k},k))}),f.jsxs("select",{value:x==="price"?`price-${v}`:x==="expiryDate"?"expiry-asc":x,onChange:S,className:"sort-filter",children:[f.jsx("option",{value:"category",children:"Sort by Category"}),f.jsx("option",{value:"price-asc",children:"Price: Low to High"}),f.jsx("option",{value:"price-desc",children:"Price: High to Low"}),f.jsx("option",{value:"expiry-asc",children:"Expiry: Sooner to Later"})]})]})]}),f.jsx(T3,{items:E,groupedItems:P,loading:n,onDelete:N,onEdit:g,onUpdateQuantity:M})]})},Bc=({title:t,value:e,subvalue:n,icon:i,color:r,isCurrency:s=!1,imageUrl:o,altValue:a=null,altLabel:l=null})=>{const[c,h]=O.useState(!1);O.useEffect(()=>{const y=setTimeout(()=>{h(!0)},100);return()=>clearTimeout(y)},[]);const d=y=>typeof y!="number"?y:y>=1e5?`${(y/1e5).toFixed(2)} L`:y>=1e3?`${(y/1e3).toFixed(1)} K`:`${y.toFixed(2)}`,p=s?d(e):e,g=a!==null?s?d(a):a:null;return f.jsxs("div",{className:`metric-card ${r} ${c?"visible":""}`,children:[f.jsx("div",{className:"metric-icon",children:i}),f.jsxs("div",{className:"metric-content",children:[f.jsx("h3",{className:"metric-title",children:t}),f.jsxs("div",{className:"metric-value-container",children:[o?f.jsxs("div",{className:"metric-with-image",children:[f.jsx("img",{src:o||"/placeholder.svg",alt:e,className:"metric-image"}),f.jsxs("div",{children:[f.jsx("p",{className:"metric-value",children:p}),n&&f.jsx("p",{className:"metric-subvalue",children:n})]})]}):f.jsxs(f.Fragment,{children:[f.jsx("p",{className:"metric-value",children:p}),n&&f.jsx("p",{className:"metric-subvalue",children:n})]}),g!==null&&f.jsxs("div",{className:"metric-alt-value",children:[f.jsx("span",{className:"alt-label",children:l||"Alt"}),f.jsx("span",{className:"alt-value",children:g})]})]})]})]})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Jl(t){return t+.5|0}const Zi=(t,e,n)=>Math.max(Math.min(t,n),e);function Ea(t){return Zi(Jl(t*2.55),0,255)}function yr(t){return Zi(Jl(t*255),0,255)}function si(t){return Zi(Jl(t/2.55)/100,0,1)}function iw(t){return Zi(Jl(t*100),0,100)}const un={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Am=[..."0123456789ABCDEF"],I3=t=>Am[t&15],k3=t=>Am[(t&240)>>4]+Am[t&15],$c=t=>(t&240)>>4===(t&15),P3=t=>$c(t.r)&&$c(t.g)&&$c(t.b)&&$c(t.a);function C3(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&un[t[1]]*17,g:255&un[t[2]]*17,b:255&un[t[3]]*17,a:e===5?un[t[4]]*17:255}:(e===7||e===9)&&(n={r:un[t[1]]<<4|un[t[2]],g:un[t[3]]<<4|un[t[4]],b:un[t[5]]<<4|un[t[6]],a:e===9?un[t[7]]<<4|un[t[8]]:255})),n}const A3=(t,e)=>t<255?e(t):"";function R3(t){var e=P3(t)?I3:k3;return t?"#"+e(t.r)+e(t.g)+e(t.b)+A3(t.a,e):void 0}const N3=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function US(t,e,n){const i=e*Math.min(n,1-n),r=(s,o=(s+t/30)%12)=>n-i*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function D3(t,e,n){const i=(r,s=(r+t/60)%6)=>n-n*e*Math.max(Math.min(s,4-s,1),0);return[i(5),i(3),i(1)]}function M3(t,e,n){const i=US(t,1,.5);let r;for(e+n>1&&(r=1/(e+n),e*=r,n*=r),r=0;r<3;r++)i[r]*=1-e-n,i[r]+=e;return i}function O3(t,e,n,i,r){return t===r?(e-n)/i+(e<n?6:0):e===r?(n-t)/i+2:(t-e)/i+4}function Zy(t){const n=t.r/255,i=t.g/255,r=t.b/255,s=Math.max(n,i,r),o=Math.min(n,i,r),a=(s+o)/2;let l,c,h;return s!==o&&(h=s-o,c=a>.5?h/(2-s-o):h/(s+o),l=O3(n,i,r,h,s),l=l*60+.5),[l|0,c||0,a]}function e_(t,e,n,i){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,i)).map(yr)}function t_(t,e,n){return e_(US,t,e,n)}function L3(t,e,n){return e_(M3,t,e,n)}function j3(t,e,n){return e_(D3,t,e,n)}function zS(t){return(t%360+360)%360}function V3(t){const e=N3.exec(t);let n=255,i;if(!e)return;e[5]!==i&&(n=e[6]?Ea(+e[5]):yr(+e[5]));const r=zS(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?i=L3(r,s,o):e[1]==="hsv"?i=j3(r,s,o):i=t_(r,s,o),{r:i[0],g:i[1],b:i[2],a:n}}function F3(t,e){var n=Zy(t);n[0]=zS(n[0]+e),n=t_(n),t.r=n[0],t.g=n[1],t.b=n[2]}function U3(t){if(!t)return;const e=Zy(t),n=e[0],i=iw(e[1]),r=iw(e[2]);return t.a<255?`hsla(${n}, ${i}%, ${r}%, ${si(t.a)})`:`hsl(${n}, ${i}%, ${r}%)`}const rw={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},sw={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function z3(){const t={},e=Object.keys(sw),n=Object.keys(rw);let i,r,s,o,a;for(i=0;i<e.length;i++){for(o=a=e[i],r=0;r<n.length;r++)s=n[r],a=a.replace(s,rw[s]);s=parseInt(sw[o],16),t[a]=[s>>16&255,s>>8&255,s&255]}return t}let Hc;function B3(t){Hc||(Hc=z3(),Hc.transparent=[0,0,0,0]);const e=Hc[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const $3=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function H3(t){const e=$3.exec(t);let n=255,i,r,s;if(e){if(e[7]!==i){const o=+e[7];n=e[8]?Ea(o):Zi(o*255,0,255)}return i=+e[1],r=+e[3],s=+e[5],i=255&(e[2]?Ea(i):Zi(i,0,255)),r=255&(e[4]?Ea(r):Zi(r,0,255)),s=255&(e[6]?Ea(s):Zi(s,0,255)),{r:i,g:r,b:s,a:n}}}function W3(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${si(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const Hf=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Ms=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function q3(t,e,n){const i=Ms(si(t.r)),r=Ms(si(t.g)),s=Ms(si(t.b));return{r:yr(Hf(i+n*(Ms(si(e.r))-i))),g:yr(Hf(r+n*(Ms(si(e.g))-r))),b:yr(Hf(s+n*(Ms(si(e.b))-s))),a:t.a+n*(e.a-t.a)}}function Wc(t,e,n){if(t){let i=Zy(t);i[e]=Math.max(0,Math.min(i[e]+i[e]*n,e===0?360:1)),i=t_(i),t.r=i[0],t.g=i[1],t.b=i[2]}}function BS(t,e){return t&&Object.assign(e||{},t)}function ow(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=yr(t[3]))):(e=BS(t,{r:0,g:0,b:0,a:1}),e.a=yr(e.a)),e}function K3(t){return t.charAt(0)==="r"?H3(t):V3(t)}class Sl{constructor(e){if(e instanceof Sl)return e;const n=typeof e;let i;n==="object"?i=ow(e):n==="string"&&(i=C3(e)||B3(e)||K3(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=BS(this._rgb);return e&&(e.a=si(e.a)),e}set rgb(e){this._rgb=ow(e)}rgbString(){return this._valid?W3(this._rgb):void 0}hexString(){return this._valid?R3(this._rgb):void 0}hslString(){return this._valid?U3(this._rgb):void 0}mix(e,n){if(e){const i=this.rgb,r=e.rgb;let s;const o=n===s?.5:n,a=2*o-1,l=i.a-r.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-c,i.r=255&c*i.r+s*r.r+.5,i.g=255&c*i.g+s*r.g+.5,i.b=255&c*i.b+s*r.b+.5,i.a=o*i.a+(1-o)*r.a,this.rgb=i}return this}interpolate(e,n){return e&&(this._rgb=q3(this._rgb,e._rgb,n)),this}clone(){return new Sl(this.rgb)}alpha(e){return this._rgb.a=yr(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=Jl(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Wc(this._rgb,2,e),this}darken(e){return Wc(this._rgb,2,-e),this}saturate(e){return Wc(this._rgb,1,e),this}desaturate(e){return Wc(this._rgb,1,-e),this}rotate(e){return F3(this._rgb,e),this}}/*!
 * Chart.js v4.4.8
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function ei(){}const G3=(()=>{let t=0;return()=>t++})();function oe(t){return t==null}function Oe(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function ue(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function We(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Jt(t,e){return We(t)?t:e}function ie(t,e){return typeof t>"u"?e:t}const Q3=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,$S=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Se(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function ve(t,e,n,i){let r,s,o;if(Oe(t))for(s=t.length,r=0;r<s;r++)e.call(n,t[r],r);else if(ue(t))for(o=Object.keys(t),s=o.length,r=0;r<s;r++)e.call(n,t[o[r]],o[r])}function kh(t,e){let n,i,r,s;if(!t||!e||t.length!==e.length)return!1;for(n=0,i=t.length;n<i;++n)if(r=t[n],s=e[n],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function Ph(t){if(Oe(t))return t.map(Ph);if(ue(t)){const e=Object.create(null),n=Object.keys(t),i=n.length;let r=0;for(;r<i;++r)e[n[r]]=Ph(t[n[r]]);return e}return t}function HS(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function Y3(t,e,n,i){if(!HS(t))return;const r=e[t],s=n[t];ue(r)&&ue(s)?Il(r,s,i):e[t]=Ph(s)}function Il(t,e,n){const i=Oe(e)?e:[e],r=i.length;if(!ue(t))return t;n=n||{};const s=n.merger||Y3;let o;for(let a=0;a<r;++a){if(o=i[a],!ue(o))continue;const l=Object.keys(o);for(let c=0,h=l.length;c<h;++c)s(l[c],t,o,n)}return t}function $a(t,e){return Il(t,e,{merger:X3})}function X3(t,e,n){if(!HS(t))return;const i=e[t],r=n[t];ue(i)&&ue(r)?$a(i,r):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Ph(r))}const aw={"":t=>t,x:t=>t.x,y:t=>t.y};function J3(t){const e=t.split("."),n=[];let i="";for(const r of e)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}function Z3(t){const e=J3(t);return n=>{for(const i of e){if(i==="")break;n=n&&n[i]}return n}}function Tr(t,e){return(aw[e]||(aw[e]=Z3(e)))(t)}function n_(t){return t.charAt(0).toUpperCase()+t.slice(1)}const kl=t=>typeof t<"u",Sr=t=>typeof t=="function",lw=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function ej(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Ne=Math.PI,Re=2*Ne,tj=Re+Ne,Ch=Number.POSITIVE_INFINITY,nj=Ne/180,Ye=Ne/2,jr=Ne/4,cw=Ne*2/3,er=Math.log10,Gn=Math.sign;function Ha(t,e,n){return Math.abs(t-e)<n}function uw(t){const e=Math.round(t);t=Ha(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(er(t))),i=t/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function ij(t){const e=[],n=Math.sqrt(t);let i;for(i=1;i<n;i++)t%i===0&&(e.push(i),e.push(t/i));return n===(n|0)&&e.push(n),e.sort((r,s)=>r-s).pop(),e}function rj(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function So(t){return!rj(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function sj(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function WS(t,e,n){let i,r,s;for(i=0,r=t.length;i<r;i++)s=t[i][n],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function In(t){return t*(Ne/180)}function i_(t){return t*(180/Ne)}function hw(t){if(!We(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function qS(t,e){const n=e.x-t.x,i=e.y-t.y,r=Math.sqrt(n*n+i*i);let s=Math.atan2(i,n);return s<-.5*Ne&&(s+=Re),{angle:s,distance:r}}function Rm(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function oj(t,e){return(t-e+tj)%Re-Ne}function en(t){return(t%Re+Re)%Re}function Pl(t,e,n,i){const r=en(t),s=en(e),o=en(n),a=en(s-r),l=en(o-r),c=en(r-s),h=en(r-o);return r===s||r===o||i&&s===o||a>l&&c<h}function at(t,e,n){return Math.max(e,Math.min(n,t))}function aj(t){return at(t,-32768,32767)}function di(t,e,n,i=1e-6){return t>=Math.min(e,n)-i&&t<=Math.max(e,n)+i}function r_(t,e,n){n=n||(o=>t[o]<e);let i=t.length-1,r=0,s;for(;i-r>1;)s=r+i>>1,n(s)?r=s:i=s;return{lo:r,hi:i}}const fi=(t,e,n,i)=>r_(t,n,i?r=>{const s=t[r][e];return s<n||s===n&&t[r+1][e]===n}:r=>t[r][e]<n),lj=(t,e,n)=>r_(t,n,i=>t[i][e]>=n);function cj(t,e,n){let i=0,r=t.length;for(;i<r&&t[i]<e;)i++;for(;r>i&&t[r-1]>n;)r--;return i>0||r<t.length?t.slice(i,r):t}const KS=["push","pop","shift","splice","unshift"];function uj(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),KS.forEach(n=>{const i="_onData"+n_(n),r=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...s){const o=r.apply(this,s);return t._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...s)}),o}})})}function dw(t,e){const n=t._chartjs;if(!n)return;const i=n.listeners,r=i.indexOf(e);r!==-1&&i.splice(r,1),!(i.length>0)&&(KS.forEach(s=>{delete t[s]}),delete t._chartjs)}function GS(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const QS=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function YS(t,e){let n=[],i=!1;return function(...r){n=r,i||(i=!0,QS.call(window,()=>{i=!1,t.apply(e,n)}))}}function hj(t,e){let n;return function(...i){return e?(clearTimeout(n),n=setTimeout(t,e,i)):t.apply(this,i),e}}const s_=t=>t==="start"?"left":t==="end"?"right":"center",Tt=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,dj=(t,e,n,i)=>t===(i?"left":"right")?n:t==="center"?(e+n)/2:e;function XS(t,e,n){const i=e.length;let r=0,s=i;if(t._sorted){const{iScale:o,vScale:a,_parsed:l}=t,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,h=o.axis,{min:d,max:p,minDefined:g,maxDefined:y}=o.getUserBounds();if(g){if(r=Math.min(fi(l,h,d).lo,n?i:fi(e,h,o.getPixelForValue(d)).lo),c){const x=l.slice(0,r+1).reverse().findIndex(b=>!oe(b[a.axis]));r-=Math.max(0,x)}r=at(r,0,i-1)}if(y){let x=Math.max(fi(l,o.axis,p,!0).hi+1,n?0:fi(e,h,o.getPixelForValue(p),!0).hi+1);if(c){const b=l.slice(x-1).findIndex(v=>!oe(v[a.axis]));x+=Math.max(0,b)}s=at(x,r,i)-r}else s=i-r}return{start:r,count:s}}function JS(t){const{xScale:e,yScale:n,_scaleRanges:i}=t,r={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!i)return t._scaleRanges=r,!0;const s=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,r),s}const qc=t=>t===0||t===1,fw=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Re/n)),pw=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*Re/n)+1,Wa={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Ye)+1,easeOutSine:t=>Math.sin(t*Ye),easeInOutSine:t=>-.5*(Math.cos(Ne*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>qc(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>qc(t)?t:fw(t,.075,.3),easeOutElastic:t=>qc(t)?t:pw(t,.075,.3),easeInOutElastic(t){return qc(t)?t:t<.5?.5*fw(t*2,.1125,.45):.5+.5*pw(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-Wa.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?Wa.easeInBounce(t*2)*.5:Wa.easeOutBounce(t*2-1)*.5+.5};function o_(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function mw(t){return o_(t)?t:new Sl(t)}function Wf(t){return o_(t)?t:new Sl(t).saturate(.5).darken(.1).hexString()}const fj=["x","y","borderWidth","radius","tension"],pj=["color","borderColor","backgroundColor"];function mj(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:pj},numbers:{type:"number",properties:fj}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function gj(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const gw=new Map;function yj(t,e){e=e||{};const n=t+JSON.stringify(e);let i=gw.get(n);return i||(i=new Intl.NumberFormat(t,e),gw.set(n,i)),i}function Zl(t,e,n){return yj(e,n).format(t)}const ZS={values(t){return Oe(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const i=this.chart.options.locale;let r,s=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(r="scientific"),s=_j(t,n)}const o=er(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),Zl(t,i,l)},logarithmic(t,e,n){if(t===0)return"0";const i=n[e].significand||t/Math.pow(10,Math.floor(er(t)));return[1,2,3,5,10,15].includes(i)||e>.8*n.length?ZS.numeric.call(this,t,e,n):""}};function _j(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var kd={formatters:ZS};function vj(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:kd.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const _s=Object.create(null),Nm=Object.create(null);function qa(t,e){if(!e)return t;const n=e.split(".");for(let i=0,r=n.length;i<r;++i){const s=n[i];t=t[s]||(t[s]=Object.create(null))}return t}function qf(t,e,n){return typeof e=="string"?Il(qa(t,e),n):Il(qa(t,""),e)}class wj{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,r)=>Wf(r.backgroundColor),this.hoverBorderColor=(i,r)=>Wf(r.borderColor),this.hoverColor=(i,r)=>Wf(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return qf(this,e,n)}get(e){return qa(this,e)}describe(e,n){return qf(Nm,e,n)}override(e,n){return qf(_s,e,n)}route(e,n,i,r){const s=qa(this,e),o=qa(this,i),a="_"+n;Object.defineProperties(s,{[a]:{value:s[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[r];return ue(l)?Object.assign({},c,l):ie(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var Le=new wj({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[mj,gj,vj]);function xj(t){return!t||oe(t.size)||oe(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function Ah(t,e,n,i,r){let s=e[r];return s||(s=e[r]=t.measureText(r).width,n.push(r)),s>i&&(i=s),i}function Ej(t,e,n,i){i=i||{};let r=i.data=i.data||{},s=i.garbageCollect=i.garbageCollect||[];i.font!==e&&(r=i.data={},s=i.garbageCollect=[],i.font=e),t.save(),t.font=e;let o=0;const a=n.length;let l,c,h,d,p;for(l=0;l<a;l++)if(d=n[l],d!=null&&!Oe(d))o=Ah(t,r,s,o,d);else if(Oe(d))for(c=0,h=d.length;c<h;c++)p=d[c],p!=null&&!Oe(p)&&(o=Ah(t,r,s,o,p));t.restore();const g=s.length/2;if(g>n.length){for(l=0;l<g;l++)delete r[s[l]];s.splice(0,g)}return o}function Vr(t,e,n){const i=t.currentDevicePixelRatio,r=n!==0?Math.max(n/2,.5):0;return Math.round((e-r)*i)/i+r}function yw(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function Dm(t,e,n,i){eI(t,e,n,i,null)}function eI(t,e,n,i,r){let s,o,a,l,c,h,d,p;const g=e.pointStyle,y=e.rotation,x=e.radius;let b=(y||0)*nj;if(g&&typeof g=="object"&&(s=g.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){t.save(),t.translate(n,i),t.rotate(b),t.drawImage(g,-g.width/2,-g.height/2,g.width,g.height),t.restore();return}if(!(isNaN(x)||x<=0)){switch(t.beginPath(),g){default:r?t.ellipse(n,i,r/2,x,0,0,Re):t.arc(n,i,x,0,Re),t.closePath();break;case"triangle":h=r?r/2:x,t.moveTo(n+Math.sin(b)*h,i-Math.cos(b)*x),b+=cw,t.lineTo(n+Math.sin(b)*h,i-Math.cos(b)*x),b+=cw,t.lineTo(n+Math.sin(b)*h,i-Math.cos(b)*x),t.closePath();break;case"rectRounded":c=x*.516,l=x-c,o=Math.cos(b+jr)*l,d=Math.cos(b+jr)*(r?r/2-c:l),a=Math.sin(b+jr)*l,p=Math.sin(b+jr)*(r?r/2-c:l),t.arc(n-d,i-a,c,b-Ne,b-Ye),t.arc(n+p,i-o,c,b-Ye,b),t.arc(n+d,i+a,c,b,b+Ye),t.arc(n-p,i+o,c,b+Ye,b+Ne),t.closePath();break;case"rect":if(!y){l=Math.SQRT1_2*x,h=r?r/2:l,t.rect(n-h,i-l,2*h,2*l);break}b+=jr;case"rectRot":d=Math.cos(b)*(r?r/2:x),o=Math.cos(b)*x,a=Math.sin(b)*x,p=Math.sin(b)*(r?r/2:x),t.moveTo(n-d,i-a),t.lineTo(n+p,i-o),t.lineTo(n+d,i+a),t.lineTo(n-p,i+o),t.closePath();break;case"crossRot":b+=jr;case"cross":d=Math.cos(b)*(r?r/2:x),o=Math.cos(b)*x,a=Math.sin(b)*x,p=Math.sin(b)*(r?r/2:x),t.moveTo(n-d,i-a),t.lineTo(n+d,i+a),t.moveTo(n+p,i-o),t.lineTo(n-p,i+o);break;case"star":d=Math.cos(b)*(r?r/2:x),o=Math.cos(b)*x,a=Math.sin(b)*x,p=Math.sin(b)*(r?r/2:x),t.moveTo(n-d,i-a),t.lineTo(n+d,i+a),t.moveTo(n+p,i-o),t.lineTo(n-p,i+o),b+=jr,d=Math.cos(b)*(r?r/2:x),o=Math.cos(b)*x,a=Math.sin(b)*x,p=Math.sin(b)*(r?r/2:x),t.moveTo(n-d,i-a),t.lineTo(n+d,i+a),t.moveTo(n+p,i-o),t.lineTo(n-p,i+o);break;case"line":o=r?r/2:Math.cos(b)*x,a=Math.sin(b)*x,t.moveTo(n-o,i-a),t.lineTo(n+o,i+a);break;case"dash":t.moveTo(n,i),t.lineTo(n+Math.cos(b)*(r?r/2:x),i+Math.sin(b)*x);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function pi(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function Pd(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Cd(t){t.restore()}function bj(t,e,n,i,r){if(!e)return t.lineTo(n.x,n.y);if(r==="middle"){const s=(e.x+n.x)/2;t.lineTo(s,e.y),t.lineTo(s,n.y)}else r==="after"!=!!i?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function Tj(t,e,n,i){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function Sj(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),oe(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function Ij(t,e,n,i,r){if(r.strikethrough||r.underline){const s=t.measureText(i),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,h=r.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=r.decorationWidth||2,t.moveTo(o,h),t.lineTo(a,h),t.stroke()}}function kj(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function vs(t,e,n,i,r,s={}){const o=Oe(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="";let l,c;for(t.save(),t.font=r.string,Sj(t,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&kj(t,s.backdrop),a&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),oe(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(c,n,i,s.maxWidth)),t.fillText(c,n,i,s.maxWidth),Ij(t,n,i,c,s),i+=Number(r.lineHeight);t.restore()}function Cl(t,e){const{x:n,y:i,w:r,h:s,radius:o}=e;t.arc(n+o.topLeft,i+o.topLeft,o.topLeft,1.5*Ne,Ne,!0),t.lineTo(n,i+s-o.bottomLeft),t.arc(n+o.bottomLeft,i+s-o.bottomLeft,o.bottomLeft,Ne,Ye,!0),t.lineTo(n+r-o.bottomRight,i+s),t.arc(n+r-o.bottomRight,i+s-o.bottomRight,o.bottomRight,Ye,0,!0),t.lineTo(n+r,i+o.topRight),t.arc(n+r-o.topRight,i+o.topRight,o.topRight,0,-Ye,!0),t.lineTo(n+o.topLeft,i)}const Pj=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Cj=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Aj(t,e){const n=(""+t).match(Pj);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const Rj=t=>+t||0;function a_(t,e){const n={},i=ue(e),r=i?Object.keys(e):e,s=ue(t)?i?o=>ie(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of r)n[o]=Rj(s(o));return n}function tI(t){return a_(t,{top:"y",right:"x",bottom:"y",left:"x"})}function ns(t){return a_(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Nt(t){const e=tI(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function it(t,e){t=t||{},e=e||Le.font;let n=ie(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let i=ie(t.style,e.style);i&&!(""+i).match(Cj)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:ie(t.family,e.family),lineHeight:Aj(ie(t.lineHeight,e.lineHeight),n),size:n,style:i,weight:ie(t.weight,e.weight),string:""};return r.string=xj(r),r}function ba(t,e,n,i){let r,s,o;for(r=0,s=t.length;r<s;++r)if(o=t[r],o!==void 0&&o!==void 0)return o}function Nj(t,e,n){const{min:i,max:r}=t,s=$S(e,(r-i)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(i,-Math.abs(s)),max:o(r,s)}}function Nr(t,e){return Object.assign(Object.create(t),e)}function l_(t,e=[""],n,i,r=()=>t[0]){const s=n||t;typeof i>"u"&&(i=sI("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:s,_fallback:i,_getTarget:r,override:a=>l_([a,...t],e,s,i)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return iI(a,l,()=>Uj(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return vw(a).includes(l)},ownKeys(a){return vw(a)},set(a,l,c){const h=a._storage||(a._storage=r());return a[l]=h[l]=c,delete a._keys,!0}})}function Io(t,e,n,i){const r={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:nI(t,i),setContext:s=>Io(t,s,n,i),override:s=>Io(t.override(s),e,n,i)};return new Proxy(r,{deleteProperty(s,o){return delete s[o],delete t[o],!0},get(s,o,a){return iI(s,o,()=>Mj(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(s,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(s,o,a){return t[o]=a,delete s[o],!0}})}function nI(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:i=e.indexable,_allKeys:r=e.allKeys}=t;return{allKeys:r,scriptable:n,indexable:i,isScriptable:Sr(n)?n:()=>n,isIndexable:Sr(i)?i:()=>i}}const Dj=(t,e)=>t?t+n_(e):e,c_=(t,e)=>ue(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function iI(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const i=n();return t[e]=i,i}function Mj(t,e,n){const{_proxy:i,_context:r,_subProxy:s,_descriptors:o}=t;let a=i[e];return Sr(a)&&o.isScriptable(e)&&(a=Oj(e,a,t,n)),Oe(a)&&a.length&&(a=Lj(e,a,t,o.isIndexable)),c_(e,a)&&(a=Io(a,r,s&&s[e],o)),a}function Oj(t,e,n,i){const{_proxy:r,_context:s,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(s,o||i);return a.delete(t),c_(t,l)&&(l=u_(r._scopes,r,t,l)),l}function Lj(t,e,n,i){const{_proxy:r,_context:s,_subProxy:o,_descriptors:a}=n;if(typeof s.index<"u"&&i(t))return e[s.index%e.length];if(ue(e[0])){const l=e,c=r._scopes.filter(h=>h!==l);e=[];for(const h of l){const d=u_(c,r,t,h);e.push(Io(d,s,o&&o[t],a))}}return e}function rI(t,e,n){return Sr(t)?t(e,n):t}const jj=(t,e)=>t===!0?e:typeof t=="string"?Tr(e,t):void 0;function Vj(t,e,n,i,r){for(const s of e){const o=jj(n,s);if(o){t.add(o);const a=rI(o._fallback,n,r);if(typeof a<"u"&&a!==n&&a!==i)return a}else if(o===!1&&typeof i<"u"&&n!==i)return null}return!1}function u_(t,e,n,i){const r=e._rootScopes,s=rI(e._fallback,n,i),o=[...t,...r],a=new Set;a.add(i);let l=_w(a,o,n,s||n,i);return l===null||typeof s<"u"&&s!==n&&(l=_w(a,o,s,l,i),l===null)?!1:l_(Array.from(a),[""],r,s,()=>Fj(e,n,i))}function _w(t,e,n,i,r){for(;n;)n=Vj(t,e,n,i,r);return n}function Fj(t,e,n){const i=t._getTarget();e in i||(i[e]={});const r=i[e];return Oe(r)&&ue(n)?n:r||{}}function Uj(t,e,n,i){let r;for(const s of e)if(r=sI(Dj(s,t),n),typeof r<"u")return c_(t,r)?u_(n,i,t,r):r}function sI(t,e){for(const n of e){if(!n)continue;const i=n[t];if(typeof i<"u")return i}}function vw(t){let e=t._keys;return e||(e=t._keys=zj(t._scopes)),e}function zj(t){const e=new Set;for(const n of t)for(const i of Object.keys(n).filter(r=>!r.startsWith("_")))e.add(i);return Array.from(e)}function oI(t,e,n,i){const{iScale:r}=t,{key:s="r"}=this._parsing,o=new Array(i);let a,l,c,h;for(a=0,l=i;a<l;++a)c=a+n,h=e[c],o[a]={r:r.parse(Tr(h,s),c)};return o}const Bj=Number.EPSILON||1e-14,ko=(t,e)=>e<t.length&&!t[e].skip&&t[e],aI=t=>t==="x"?"y":"x";function $j(t,e,n,i){const r=t.skip?e:t,s=e,o=n.skip?e:n,a=Rm(s,r),l=Rm(o,s);let c=a/(a+l),h=l/(a+l);c=isNaN(c)?0:c,h=isNaN(h)?0:h;const d=i*c,p=i*h;return{previous:{x:s.x-d*(o.x-r.x),y:s.y-d*(o.y-r.y)},next:{x:s.x+p*(o.x-r.x),y:s.y+p*(o.y-r.y)}}}function Hj(t,e,n){const i=t.length;let r,s,o,a,l,c=ko(t,0);for(let h=0;h<i-1;++h)if(l=c,c=ko(t,h+1),!(!l||!c)){if(Ha(e[h],0,Bj)){n[h]=n[h+1]=0;continue}r=n[h]/e[h],s=n[h+1]/e[h],a=Math.pow(r,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),n[h]=r*o*e[h],n[h+1]=s*o*e[h])}}function Wj(t,e,n="x"){const i=aI(n),r=t.length;let s,o,a,l=ko(t,0);for(let c=0;c<r;++c){if(o=a,a=l,l=ko(t,c+1),!a)continue;const h=a[n],d=a[i];o&&(s=(h-o[n])/3,a[`cp1${n}`]=h-s,a[`cp1${i}`]=d-s*e[c]),l&&(s=(l[n]-h)/3,a[`cp2${n}`]=h+s,a[`cp2${i}`]=d+s*e[c])}}function qj(t,e="x"){const n=aI(e),i=t.length,r=Array(i).fill(0),s=Array(i);let o,a,l,c=ko(t,0);for(o=0;o<i;++o)if(a=l,l=c,c=ko(t,o+1),!!l){if(c){const h=c[e]-l[e];r[o]=h!==0?(c[n]-l[n])/h:0}s[o]=a?c?Gn(r[o-1])!==Gn(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}Hj(t,r,s),Wj(t,s,e)}function Kc(t,e,n){return Math.max(Math.min(t,n),e)}function Kj(t,e){let n,i,r,s,o,a=pi(t[0],e);for(n=0,i=t.length;n<i;++n)o=s,s=a,a=n<i-1&&pi(t[n+1],e),s&&(r=t[n],o&&(r.cp1x=Kc(r.cp1x,e.left,e.right),r.cp1y=Kc(r.cp1y,e.top,e.bottom)),a&&(r.cp2x=Kc(r.cp2x,e.left,e.right),r.cp2y=Kc(r.cp2y,e.top,e.bottom)))}function Gj(t,e,n,i,r){let s,o,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")qj(t,r);else{let c=i?t[t.length-1]:t[0];for(s=0,o=t.length;s<o;++s)a=t[s],l=$j(c,a,t[Math.min(s+1,o-(i?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&Kj(t,n)}function h_(){return typeof window<"u"&&typeof document<"u"}function d_(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Rh(t,e,n){let i;return typeof t=="string"?(i=parseInt(t,10),t.indexOf("%")!==-1&&(i=i/100*e.parentNode[n])):i=t,i}const Ad=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function Qj(t,e){return Ad(t).getPropertyValue(e)}const Yj=["top","right","bottom","left"];function is(t,e,n){const i={};n=n?"-"+n:"";for(let r=0;r<4;r++){const s=Yj[r];i[s]=parseFloat(t[e+"-"+s+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const Xj=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function Jj(t,e){const n=t.touches,i=n&&n.length?n[0]:t,{offsetX:r,offsetY:s}=i;let o=!1,a,l;if(Xj(r,s,t.target))a=r,l=s;else{const c=e.getBoundingClientRect();a=i.clientX-c.left,l=i.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function Hr(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:i}=e,r=Ad(n),s=r.boxSizing==="border-box",o=is(r,"padding"),a=is(r,"border","width"),{x:l,y:c,box:h}=Jj(t,n),d=o.left+(h&&a.left),p=o.top+(h&&a.top);let{width:g,height:y}=e;return s&&(g-=o.width+a.width,y-=o.height+a.height),{x:Math.round((l-d)/g*n.width/i),y:Math.round((c-p)/y*n.height/i)}}function Zj(t,e,n){let i,r;if(e===void 0||n===void 0){const s=t&&d_(t);if(!s)e=t.clientWidth,n=t.clientHeight;else{const o=s.getBoundingClientRect(),a=Ad(s),l=is(a,"border","width"),c=is(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,i=Rh(a.maxWidth,s,"clientWidth"),r=Rh(a.maxHeight,s,"clientHeight")}}return{width:e,height:n,maxWidth:i||Ch,maxHeight:r||Ch}}const Gc=t=>Math.round(t*10)/10;function eV(t,e,n,i){const r=Ad(t),s=is(r,"margin"),o=Rh(r.maxWidth,t,"clientWidth")||Ch,a=Rh(r.maxHeight,t,"clientHeight")||Ch,l=Zj(t,e,n);let{width:c,height:h}=l;if(r.boxSizing==="content-box"){const p=is(r,"border","width"),g=is(r,"padding");c-=g.width+p.width,h-=g.height+p.height}return c=Math.max(0,c-s.width),h=Math.max(0,i?c/i:h-s.height),c=Gc(Math.min(c,o,l.maxWidth)),h=Gc(Math.min(h,a,l.maxHeight)),c&&!h&&(h=Gc(c/2)),(e!==void 0||n!==void 0)&&i&&l.height&&h>l.height&&(h=l.height,c=Gc(Math.floor(h*i))),{width:c,height:h}}function ww(t,e,n){const i=e||1,r=Math.floor(t.height*i),s=Math.floor(t.width*i);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==i||o.height!==r||o.width!==s?(t.currentDevicePixelRatio=i,o.height=r,o.width=s,t.ctx.setTransform(i,0,0,i,0,0),!0):!1}const tV=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};h_()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function xw(t,e){const n=Qj(t,e),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function Wr(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function nV(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:i==="middle"?n<.5?t.y:e.y:i==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function iV(t,e,n,i){const r={x:t.cp2x,y:t.cp2y},s={x:e.cp1x,y:e.cp1y},o=Wr(t,r,n),a=Wr(r,s,n),l=Wr(s,e,n),c=Wr(o,a,n),h=Wr(a,l,n);return Wr(c,h,n)}const rV=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,i){return n-i},leftForLtr(n,i){return n-i}}},sV=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function lo(t,e,n){return t?rV(e,n):sV()}function lI(t,e){let n,i;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=i)}function cI(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function uI(t){return t==="angle"?{between:Pl,compare:oj,normalize:en}:{between:di,compare:(e,n)=>e-n,normalize:e=>e}}function Ew({start:t,end:e,count:n,loop:i,style:r}){return{start:t%n,end:e%n,loop:i&&(e-t+1)%n===0,style:r}}function oV(t,e,n){const{property:i,start:r,end:s}=n,{between:o,normalize:a}=uI(i),l=e.length;let{start:c,end:h,loop:d}=t,p,g;if(d){for(c+=l,h+=l,p=0,g=l;p<g&&o(a(e[c%l][i]),r,s);++p)c--,h--;c%=l,h%=l}return h<c&&(h+=l),{start:c,end:h,loop:d,style:t.style}}function hI(t,e,n){if(!n)return[t];const{property:i,start:r,end:s}=n,o=e.length,{compare:a,between:l,normalize:c}=uI(i),{start:h,end:d,loop:p,style:g}=oV(t,e,n),y=[];let x=!1,b=null,v,w,T;const C=()=>l(r,T,v)&&a(r,T)!==0,N=()=>a(s,v)===0||l(s,T,v),M=()=>x||C(),S=()=>!x||N();for(let E=h,P=h;E<=d;++E)w=e[E%o],!w.skip&&(v=c(w[i]),v!==T&&(x=l(v,r,s),b===null&&M()&&(b=a(v,r)===0?E:P),b!==null&&S()&&(y.push(Ew({start:b,end:E,loop:p,count:o,style:g})),b=null),P=E,T=v));return b!==null&&y.push(Ew({start:b,end:d,loop:p,count:o,style:g})),y}function dI(t,e){const n=[],i=t.segments;for(let r=0;r<i.length;r++){const s=hI(i[r],t.points,e);s.length&&n.push(...s)}return n}function aV(t,e,n,i){let r=0,s=e-1;if(n&&!i)for(;r<e&&!t[r].skip;)r++;for(;r<e&&t[r].skip;)r++;for(r%=e,n&&(s+=r);s>r&&t[s%e].skip;)s--;return s%=e,{start:r,end:s}}function lV(t,e,n,i){const r=t.length,s=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%r];c.skip||c.stop?a.skip||(i=!1,s.push({start:e%r,end:(l-1)%r,loop:i}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&s.push({start:e%r,end:o%r,loop:i}),s}function cV(t,e){const n=t.points,i=t.options.spanGaps,r=n.length;if(!r)return[];const s=!!t._loop,{start:o,end:a}=aV(n,r,s,i);if(i===!0)return bw(t,[{start:o,end:a,loop:s}],n,e);const l=a<o?a+r:a,c=!!t._fullLoop&&o===0&&a===r-1;return bw(t,lV(n,o,l,c),n,e)}function bw(t,e,n,i){return!i||!i.setContext||!n?e:uV(t,e,n,i)}function uV(t,e,n,i){const r=t._chart.getContext(),s=Tw(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let h=s,d=e[0].start,p=d;function g(y,x,b,v){const w=a?-1:1;if(y!==x){for(y+=l;n[y%l].skip;)y-=w;for(;n[x%l].skip;)x+=w;y%l!==x%l&&(c.push({start:y%l,end:x%l,loop:b,style:v}),h=v,d=x%l)}}for(const y of e){d=a?d:y.start;let x=n[d%l],b;for(p=d+1;p<=y.end;p++){const v=n[p%l];b=Tw(i.setContext(Nr(r,{type:"segment",p0:x,p1:v,p0DataIndex:(p-1)%l,p1DataIndex:p%l,datasetIndex:o}))),hV(b,h)&&g(d,p-1,y.loop,h),x=v,h=b}d<p-1&&g(d,p-1,y.loop,h)}return c}function Tw(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function hV(t,e){if(!e)return!1;const n=[],i=function(r,s){return o_(s)?(n.includes(s)||n.push(s),n.indexOf(s)):s};return JSON.stringify(t,i)!==JSON.stringify(e,i)}/*!
 * Chart.js v4.4.8
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class dV{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,i,r){const s=n.listeners[r],o=n.duration;s.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(i-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=QS.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((i,r)=>{if(!i.running||!i.items.length)return;const s=i.items;let o=s.length-1,a=!1,l;for(;o>=0;--o)l=s[o],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(r.draw(),this._notify(r,i,e,"progress")),s.length||(i.running=!1,this._notify(r,i,e,"complete"),i.initial=!1),n+=s.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let i=n.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,i)),i}listen(e,n,i){this._getAnims(e).listeners[n].push(i)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((i,r)=>Math.max(i,r._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const i=n.items;let r=i.length-1;for(;r>=0;--r)i[r].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var ti=new dV;const Sw="transparent",fV={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const i=mw(t||Sw),r=i.valid&&mw(e||Sw);return r&&r.valid?r.mix(i,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class pV{constructor(e,n,i,r){const s=n[i];r=ba([e.to,r,s,e.from]);const o=ba([e.from,s,r]);this._active=!0,this._fn=e.fn||fV[e.type||typeof o],this._easing=Wa[e.easing]||Wa.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=i,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(e,n,i){if(this._active){this._notify(!1);const r=this._target[this._prop],s=i-this._start,o=this._duration-s;this._start=i,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=ba([e.to,n,r,e.from]),this._from=ba([e.from,r,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,i=this._duration,r=this._prop,s=this._from,o=this._loop,a=this._to;let l;if(this._active=s!==a&&(o||n<i),!this._active){this._target[r]=a,this._notify(!0);return}if(n<0){this._target[r]=s;return}l=n/i%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[r]=this._fn(s,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,i)=>{e.push({res:n,rej:i})})}_notify(e){const n=e?"res":"rej",i=this._promises||[];for(let r=0;r<i.length;r++)i[r][n]()}}class fI{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!ue(e))return;const n=Object.keys(Le.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{const s=e[r];if(!ue(s))return;const o={};for(const a of n)o[a]=s[a];(Oe(s.properties)&&s.properties||[r]).forEach(a=>{(a===r||!i.has(a))&&i.set(a,o)})})}_animateOptions(e,n){const i=n.options,r=gV(e,i);if(!r)return[];const s=this._createAnimations(r,i);return i.$shared&&mV(e.options.$animations,i).then(()=>{e.options=i},()=>{}),s}_createAnimations(e,n){const i=this._properties,r=[],s=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){r.push(...this._animateOptions(e,n));continue}const h=n[c];let d=s[c];const p=i.get(c);if(d)if(p&&d.active()){d.update(p,h,a);continue}else d.cancel();if(!p||!p.duration){e[c]=h;continue}s[c]=d=new pV(p,e,c,h),r.push(d)}return r}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const i=this._createAnimations(e,n);if(i.length)return ti.add(this._chart,i),!0}}function mV(t,e){const n=[],i=Object.keys(e);for(let r=0;r<i.length;r++){const s=t[i[r]];s&&s.active()&&n.push(s.wait())}return Promise.all(n)}function gV(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function Iw(t,e){const n=t&&t.options||{},i=n.reverse,r=n.min===void 0?e:0,s=n.max===void 0?e:0;return{start:i?s:r,end:i?r:s}}function yV(t,e,n){if(n===!1)return!1;const i=Iw(t,n),r=Iw(e,n);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}function _V(t){let e,n,i,r;return ue(t)?(e=t.top,n=t.right,i=t.bottom,r=t.left):e=n=i=r=t,{top:e,right:n,bottom:i,left:r,disabled:t===!1}}function pI(t,e){const n=[],i=t._getSortedDatasetMetas(e);let r,s;for(r=0,s=i.length;r<s;++r)n.push(i[r].index);return n}function kw(t,e,n,i={}){const r=t.keys,s=i.mode==="single";let o,a,l,c;if(e===null)return;let h=!1;for(o=0,a=r.length;o<a;++o){if(l=+r[o],l===n){if(h=!0,i.all)continue;break}c=t.values[l],We(c)&&(s||e===0||Gn(e)===Gn(c))&&(e+=c)}return!h&&!i.all?0:e}function vV(t,e){const{iScale:n,vScale:i}=e,r=n.axis==="x"?"x":"y",s=i.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,c,h;for(l=0,c=o.length;l<c;++l)h=o[l],a[l]={[r]:h,[s]:t[h]};return a}function Kf(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function wV(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function xV(t){const{min:e,max:n,minDefined:i,maxDefined:r}=t.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}function EV(t,e,n){const i=t[e]||(t[e]={});return i[n]||(i[n]={})}function Pw(t,e,n,i){for(const r of e.getMatchingVisibleMetas(i).reverse()){const s=t[r.index];if(n&&s>0||!n&&s<0)return r.index}return null}function Cw(t,e){const{chart:n,_cachedMeta:i}=t,r=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=i,l=s.axis,c=o.axis,h=wV(s,o,i),d=e.length;let p;for(let g=0;g<d;++g){const y=e[g],{[l]:x,[c]:b}=y,v=y._stacks||(y._stacks={});p=v[c]=EV(r,h,x),p[a]=b,p._top=Pw(p,o,!0,i.type),p._bottom=Pw(p,o,!1,i.type);const w=p._visualValues||(p._visualValues={});w[a]=b}}function Gf(t,e){const n=t.scales;return Object.keys(n).filter(i=>n[i].axis===e).shift()}function bV(t,e){return Nr(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function TV(t,e,n){return Nr(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function aa(t,e){const n=t.controller.index,i=t.vScale&&t.vScale.axis;if(i){e=e||t._parsed;for(const r of e){const s=r._stacks;if(!s||s[i]===void 0||s[i][n]===void 0)return;delete s[i][n],s[i]._visualValues!==void 0&&s[i]._visualValues[n]!==void 0&&delete s[i]._visualValues[n]}}}const Qf=t=>t==="reset"||t==="none",Aw=(t,e)=>e?t:Object.assign({},t),SV=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:pI(n,!0),values:null};class Cn{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Kf(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&aa(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,i=this.getDataset(),r=(d,p,g,y)=>d==="x"?p:d==="r"?y:g,s=n.xAxisID=ie(i.xAxisID,Gf(e,"x")),o=n.yAxisID=ie(i.yAxisID,Gf(e,"y")),a=n.rAxisID=ie(i.rAxisID,Gf(e,"r")),l=n.indexAxis,c=n.iAxisID=r(l,s,o,a),h=n.vAxisID=r(l,o,s,a);n.xScale=this.getScaleForId(s),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&dw(this._data,this),e._stacked&&aa(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),i=this._data;if(ue(n)){const r=this._cachedMeta;this._data=vV(n,r)}else if(i!==n){if(i){dw(i,this);const r=this._cachedMeta;aa(r),r._parsed=[]}n&&Object.isExtensible(n)&&uj(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,i=this.getDataset();let r=!1;this._dataCheck();const s=n._stacked;n._stacked=Kf(n.vScale,n),n.stack!==i.stack&&(r=!0,aa(n),n.stack=i.stack),this._resyncElements(e),(r||s!==n._stacked)&&(Cw(this,n._parsed),n._stacked=Kf(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:i,_data:r}=this,{iScale:s,_stacked:o}=i,a=s.axis;let l=e===0&&n===r.length?!0:i._sorted,c=e>0&&i._parsed[e-1],h,d,p;if(this._parsing===!1)i._parsed=r,i._sorted=!0,p=r;else{Oe(r[e])?p=this.parseArrayData(i,r,e,n):ue(r[e])?p=this.parseObjectData(i,r,e,n):p=this.parsePrimitiveData(i,r,e,n);const g=()=>d[a]===null||c&&d[a]<c[a];for(h=0;h<n;++h)i._parsed[h+e]=d=p[h],l&&(g()&&(l=!1),c=d);i._sorted=l}o&&Cw(this,p)}parsePrimitiveData(e,n,i,r){const{iScale:s,vScale:o}=e,a=s.axis,l=o.axis,c=s.getLabels(),h=s===o,d=new Array(r);let p,g,y;for(p=0,g=r;p<g;++p)y=p+i,d[p]={[a]:h||s.parse(c[y],y),[l]:o.parse(n[y],y)};return d}parseArrayData(e,n,i,r){const{xScale:s,yScale:o}=e,a=new Array(r);let l,c,h,d;for(l=0,c=r;l<c;++l)h=l+i,d=n[h],a[l]={x:s.parse(d[0],h),y:o.parse(d[1],h)};return a}parseObjectData(e,n,i,r){const{xScale:s,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(r);let h,d,p,g;for(h=0,d=r;h<d;++h)p=h+i,g=n[p],c[h]={x:s.parse(Tr(g,a),p),y:o.parse(Tr(g,l),p)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,i){const r=this.chart,s=this._cachedMeta,o=n[e.axis],a={keys:pI(r,!0),values:n._stacks[e.axis]._visualValues};return kw(a,o,s.index,{mode:i})}updateRangeFromParsed(e,n,i,r){const s=i[n.axis];let o=s===null?NaN:s;const a=r&&i._stacks[n.axis];r&&a&&(r.values=a,o=kw(r,s,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const i=this._cachedMeta,r=i._parsed,s=i._sorted&&e===i.iScale,o=r.length,a=this._getOtherScale(e),l=SV(n,i,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:d}=xV(a);let p,g;function y(){g=r[p];const x=g[a.axis];return!We(g[e.axis])||h>x||d<x}for(p=0;p<o&&!(!y()&&(this.updateRangeFromParsed(c,e,g,l),s));++p);if(s){for(p=o-1;p>=0;--p)if(!y()){this.updateRangeFromParsed(c,e,g,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,i=[];let r,s,o;for(r=0,s=n.length;r<s;++r)o=n[r][e.axis],We(o)&&i.push(o);return i}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,i=n.iScale,r=n.vScale,s=this.getParsed(e);return{label:i?""+i.getLabelForValue(s[i.axis]):"",value:r?""+r.getLabelForValue(s[r.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=_V(ie(this.options.clip,yV(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,i=this._cachedMeta,r=i.data||[],s=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||r.length-a,c=this.options.drawActiveElementsOnTop;let h;for(i.dataset&&i.dataset.draw(e,s,a,l),h=a;h<a+l;++h){const d=r[h];d.hidden||(d.active&&c?o.push(d):d.draw(e,s))}for(h=0;h<o.length;++h)o[h].draw(e,s)}getStyle(e,n){const i=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,n,i){const r=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];s=o.$context||(o.$context=TV(this.getContext(),e,o)),s.parsed=this.getParsed(e),s.raw=r.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=bV(this.chart.getContext(),this.index)),s.dataset=r,s.index=s.datasetIndex=this.index;return s.active=!!n,s.mode=i,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",i){const r=n==="active",s=this._cachedDataOpts,o=e+"-"+n,a=s[o],l=this.enableOptionSharing&&kl(i);if(a)return Aw(a,l);const c=this.chart.config,h=c.datasetElementScopeKeys(this._type,e),d=r?[`${e}Hover`,"hover",e,""]:[e,""],p=c.getOptionScopes(this.getDataset(),h),g=Object.keys(Le.elements[e]),y=()=>this.getContext(i,r,n),x=c.resolveNamedOptions(p,g,y,d);return x.$shared&&(x.$shared=l,s[o]=Object.freeze(Aw(x,l))),x}_resolveAnimations(e,n,i){const r=this.chart,s=this._cachedDataOpts,o=`animation-${n}`,a=s[o];if(a)return a;let l;if(r.options.animation!==!1){const h=this.chart.config,d=h.datasetAnimationScopeKeys(this._type,n),p=h.getOptionScopes(this.getDataset(),d);l=h.createResolver(p,this.getContext(e,i,n))}const c=new fI(r,l&&l.animations);return l&&l._cacheable&&(s[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||Qf(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const i=this.resolveDataElementOptions(e,n),r=this._sharedOptions,s=this.getSharedOptions(i),o=this.includeOptions(n,s)||s!==r;return this.updateSharedOptions(s,n,i),{sharedOptions:s,includeOptions:o}}updateElement(e,n,i,r){Qf(r)?Object.assign(e,i):this._resolveAnimations(n,r).update(e,i)}updateSharedOptions(e,n,i){e&&!Qf(n)&&this._resolveAnimations(void 0,n).update(e,i)}_setStyle(e,n,i,r){e.active=r;const s=this.getStyle(n,r);this._resolveAnimations(n,i,r).update(e,{options:!r&&this.getSharedOptions(s)||s})}removeHoverStyle(e,n,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,n,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,i=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const r=i.length,s=n.length,o=Math.min(s,r);o&&this.parse(0,o),s>r?this._insertElements(r,s-r,e):s<r&&this._removeElements(s,r-s)}_insertElements(e,n,i=!0){const r=this._cachedMeta,s=r.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(s),a=e;a<o;++a)s[a]=new this.dataElementType;this._parsing&&l(r._parsed),this.parse(e,n),i&&this.updateElements(s,e,n,"reset")}updateElements(e,n,i,r){}_removeElements(e,n){const i=this._cachedMeta;if(this._parsing){const r=i._parsed.splice(e,n);i._stacked&&aa(i,r)}i.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,i,r]=e;this[n](i,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}W(Cn,"defaults",{}),W(Cn,"datasetElementType",null),W(Cn,"dataElementType",null);function IV(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let i=[];for(let r=0,s=n.length;r<s;r++)i=i.concat(n[r].controller.getAllParsedValues(t));t._cache.$bar=GS(i.sort((r,s)=>r-s))}return t._cache.$bar}function kV(t){const e=t.iScale,n=IV(e,t.type);let i=e._length,r,s,o,a;const l=()=>{o===32767||o===-32768||(kl(a)&&(i=Math.min(i,Math.abs(o-a)||i)),a=o)};for(r=0,s=n.length;r<s;++r)o=e.getPixelForValue(n[r]),l();for(a=void 0,r=0,s=e.ticks.length;r<s;++r)o=e.getPixelForTick(r),l();return i}function PV(t,e,n,i){const r=n.barThickness;let s,o;return oe(r)?(s=e.min*n.categoryPercentage,o=n.barPercentage):(s=r*i,o=1),{chunk:s/i,ratio:o,start:e.pixels[t]-s/2}}function CV(t,e,n,i){const r=e.pixels,s=r[t];let o=t>0?r[t-1]:null,a=t<r.length-1?r[t+1]:null;const l=n.categoryPercentage;o===null&&(o=s-(a===null?e.end-e.start:a-s)),a===null&&(a=s+s-o);const c=s-(s-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/i,ratio:n.barPercentage,start:c}}function AV(t,e,n,i){const r=n.parse(t[0],i),s=n.parse(t[1],i),o=Math.min(r,s),a=Math.max(r,s);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),e[n.axis]=c,e._custom={barStart:l,barEnd:c,start:r,end:s,min:o,max:a}}function mI(t,e,n,i){return Oe(t)?AV(t,e,n,i):e[n.axis]=n.parse(t,i),e}function Rw(t,e,n,i){const r=t.iScale,s=t.vScale,o=r.getLabels(),a=r===s,l=[];let c,h,d,p;for(c=n,h=n+i;c<h;++c)p=e[c],d={},d[r.axis]=a||r.parse(o[c],c),l.push(mI(p,d,s,c));return l}function Yf(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function RV(t,e,n){return t!==0?Gn(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function NV(t){let e,n,i,r,s;return t.horizontal?(e=t.base>t.x,n="left",i="right"):(e=t.base<t.y,n="bottom",i="top"),e?(r="end",s="start"):(r="start",s="end"),{start:n,end:i,reverse:e,top:r,bottom:s}}function DV(t,e,n,i){let r=e.borderSkipped;const s={};if(!r){t.borderSkipped=s;return}if(r===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:c,bottom:h}=NV(t);r==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===i?r=c:(n._bottom||0)===i?r=h:(s[Nw(h,o,a,l)]=!0,r=c)),s[Nw(r,o,a,l)]=!0,t.borderSkipped=s}function Nw(t,e,n,i){return i?(t=MV(t,e,n),t=Dw(t,n,e)):t=Dw(t,e,n),t}function MV(t,e,n){return t===e?n:t===n?e:t}function Dw(t,e,n){return t==="start"?e:t==="end"?n:t}function OV(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class ku extends Cn{parsePrimitiveData(e,n,i,r){return Rw(e,n,i,r)}parseArrayData(e,n,i,r){return Rw(e,n,i,r)}parseObjectData(e,n,i,r){const{iScale:s,vScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=s.axis==="x"?a:l,h=o.axis==="x"?a:l,d=[];let p,g,y,x;for(p=i,g=i+r;p<g;++p)x=n[p],y={},y[s.axis]=s.parse(Tr(x,c),p),d.push(mI(Tr(x,h),y,o,p));return d}updateRangeFromParsed(e,n,i,r){super.updateRangeFromParsed(e,n,i,r);const s=i._custom;s&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,s.min),e.max=Math.max(e.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:i,vScale:r}=n,s=this.getParsed(e),o=s._custom,a=Yf(o)?"["+o.start+", "+o.end+"]":""+r.getLabelForValue(s[r.axis]);return{label:""+i.getLabelForValue(s[i.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,i,r){const s=r==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),h=this._getRuler(),{sharedOptions:d,includeOptions:p}=this._getSharedOptions(n,r);for(let g=n;g<n+i;g++){const y=this.getParsed(g),x=s||oe(y[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(g),b=this._calculateBarIndexPixels(g,h),v=(y._stacks||{})[a.axis],w={horizontal:c,base:x.base,enableBorderRadius:!v||Yf(y._custom)||o===v._top||o===v._bottom,x:c?x.head:b.center,y:c?b.center:x.head,height:c?b.size:Math.abs(x.size),width:c?Math.abs(x.size):b.size};p&&(w.options=d||this.resolveDataElementOptions(g,e[g].active?"active":r));const T=w.options||e[g].options;DV(w,T,v,o),OV(w,T,h.ratio),this.updateElement(e[g],g,w,r)}}_getStacks(e,n){const{iScale:i}=this._cachedMeta,r=i.getMatchingVisibleMetas(this._type).filter(h=>h.controller.options.grouped),s=i.options.stacked,o=[],a=this._cachedMeta.controller.getParsed(n),l=a&&a[i.axis],c=h=>{const d=h._parsed.find(g=>g[i.axis]===l),p=d&&d[h.vScale.axis];if(oe(p)||isNaN(p))return!0};for(const h of r)if(!(n!==void 0&&c(h))&&((s===!1||o.indexOf(h.stack)===-1||s===void 0&&h.stack===void 0)&&o.push(h.stack),h.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,n,i){const r=this._getStacks(e,i),s=n!==void 0?r.indexOf(n):-1;return s===-1?r.length-1:s}_getRuler(){const e=this.options,n=this._cachedMeta,i=n.iScale,r=[];let s,o;for(s=0,o=n.data.length;s<o;++s)r.push(i.getPixelForValue(this.getParsed(s)[i.axis],s));const a=e.barThickness;return{min:a||kV(n),pixels:r,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:i,index:r},options:{base:s,minBarLength:o}}=this,a=s||0,l=this.getParsed(e),c=l._custom,h=Yf(c);let d=l[n.axis],p=0,g=i?this.applyStack(n,l,i):d,y,x;g!==d&&(p=g-d,g=d),h&&(d=c.barStart,g=c.barEnd-c.barStart,d!==0&&Gn(d)!==Gn(c.barEnd)&&(p=0),p+=d);const b=!oe(s)&&!h?s:p;let v=n.getPixelForValue(b);if(this.chart.getDataVisibility(e)?y=n.getPixelForValue(p+g):y=v,x=y-v,Math.abs(x)<o){x=RV(x,n,a)*o,d===a&&(v-=x/2);const w=n.getPixelForDecimal(0),T=n.getPixelForDecimal(1),C=Math.min(w,T),N=Math.max(w,T);v=Math.max(Math.min(v,N),C),y=v+x,i&&!h&&(l._stacks[n.axis]._visualValues[r]=n.getValueForPixel(y)-n.getValueForPixel(v))}if(v===n.getPixelForValue(a)){const w=Gn(x)*n.getLineWidthForValue(a)/2;v+=w,x-=w}return{size:x,base:v,head:y,center:y+x/2}}_calculateBarIndexPixels(e,n){const i=n.scale,r=this.options,s=r.skipNull,o=ie(r.maxBarThickness,1/0);let a,l;if(n.grouped){const c=s?this._getStackCount(e):n.stackCount,h=r.barThickness==="flex"?CV(e,n,r,c):PV(e,n,r,c),d=this._getStackIndex(this.index,this._cachedMeta.stack,s?e:void 0);a=h.start+h.chunk*d+h.chunk/2,l=Math.min(o,h.chunk*h.ratio)}else a=i.getPixelForValue(this.getParsed(e)[i.axis],e),l=Math.min(o,n.min*n.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,n=e.vScale,i=e.data,r=i.length;let s=0;for(;s<r;++s)this.getParsed(s)[n.axis]!==null&&!i[s].hidden&&i[s].draw(this._ctx)}}W(ku,"id","bar"),W(ku,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),W(ku,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class Pu extends Cn{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,n,i,r){const s=super.parsePrimitiveData(e,n,i,r);for(let o=0;o<s.length;o++)s[o]._custom=this.resolveDataElementOptions(o+i).radius;return s}parseArrayData(e,n,i,r){const s=super.parseArrayData(e,n,i,r);for(let o=0;o<s.length;o++){const a=n[i+o];s[o]._custom=ie(a[2],this.resolveDataElementOptions(o+i).radius)}return s}parseObjectData(e,n,i,r){const s=super.parseObjectData(e,n,i,r);for(let o=0;o<s.length;o++){const a=n[i+o];s[o]._custom=ie(a&&a.r&&+a.r,this.resolveDataElementOptions(o+i).radius)}return s}getMaxOverflow(){const e=this._cachedMeta.data;let n=0;for(let i=e.length-1;i>=0;--i)n=Math.max(n,e[i].size(this.resolveDataElementOptions(i))/2);return n>0&&n}getLabelAndValue(e){const n=this._cachedMeta,i=this.chart.data.labels||[],{xScale:r,yScale:s}=n,o=this.getParsed(e),a=r.getLabelForValue(o.x),l=s.getLabelForValue(o.y),c=o._custom;return{label:i[e]||"",value:"("+a+", "+l+(c?", "+c:"")+")"}}update(e){const n=this._cachedMeta.data;this.updateElements(n,0,n.length,e)}updateElements(e,n,i,r){const s=r==="reset",{iScale:o,vScale:a}=this._cachedMeta,{sharedOptions:l,includeOptions:c}=this._getSharedOptions(n,r),h=o.axis,d=a.axis;for(let p=n;p<n+i;p++){const g=e[p],y=!s&&this.getParsed(p),x={},b=x[h]=s?o.getPixelForDecimal(.5):o.getPixelForValue(y[h]),v=x[d]=s?a.getBasePixel():a.getPixelForValue(y[d]);x.skip=isNaN(b)||isNaN(v),c&&(x.options=l||this.resolveDataElementOptions(p,g.active?"active":r),s&&(x.options.radius=0)),this.updateElement(g,p,x,r)}}resolveDataElementOptions(e,n){const i=this.getParsed(e);let r=super.resolveDataElementOptions(e,n);r.$shared&&(r=Object.assign({},r,{$shared:!1}));const s=r.radius;return n!=="active"&&(r.radius=0),r.radius+=ie(i&&i._custom,s),r}}W(Pu,"id","bubble"),W(Pu,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),W(Pu,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function LV(t,e,n){let i=1,r=1,s=0,o=0;if(e<Re){const a=t,l=a+e,c=Math.cos(a),h=Math.sin(a),d=Math.cos(l),p=Math.sin(l),g=(T,C,N)=>Pl(T,a,l,!0)?1:Math.max(C,C*n,N,N*n),y=(T,C,N)=>Pl(T,a,l,!0)?-1:Math.min(C,C*n,N,N*n),x=g(0,c,d),b=g(Ye,h,p),v=y(Ne,c,d),w=y(Ne+Ye,h,p);i=(x-v)/2,r=(b-w)/2,s=-(x+v)/2,o=-(b+w)/2}return{ratioX:i,ratioY:r,offsetX:s,offsetY:o}}class Xr extends Cn{constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const i=this.getDataset().data,r=this._cachedMeta;if(this._parsing===!1)r._parsed=i;else{let s=l=>+i[l];if(ue(i[e])){const{key:l="value"}=this._parsing;s=c=>+Tr(i[c],l)}let o,a;for(o=e,a=e+n;o<a;++o)r._parsed[o]=s(o)}}_getRotation(){return In(this.options.rotation-90)}_getCircumference(){return In(this.options.circumference)}_getRotationExtents(){let e=Re,n=-Re;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const r=this.chart.getDatasetMeta(i).controller,s=r._getRotation(),o=r._getCircumference();e=Math.min(e,s),n=Math.max(n,s+o)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:i}=n,r=this._cachedMeta,s=r.data,o=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,a=Math.max((Math.min(i.width,i.height)-o)/2,0),l=Math.min(Q3(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:h,rotation:d}=this._getRotationExtents(),{ratioX:p,ratioY:g,offsetX:y,offsetY:x}=LV(d,h,l),b=(i.width-o)/p,v=(i.height-o)/g,w=Math.max(Math.min(b,v)/2,0),T=$S(this.options.radius,w),C=Math.max(T*l,0),N=(T-C)/this._getVisibleDatasetWeightTotal();this.offsetX=y*T,this.offsetY=x*T,r.total=this.calculateTotal(),this.outerRadius=T-N*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-N*c,0),this.updateElements(s,0,s.length,e)}_circumference(e,n){const i=this.options,r=this._cachedMeta,s=this._getCircumference();return n&&i.animation.animateRotate||!this.chart.getDataVisibility(e)||r._parsed[e]===null||r.data[e].hidden?0:this.calculateCircumference(r._parsed[e]*s/Re)}updateElements(e,n,i,r){const s=r==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,h=(a.left+a.right)/2,d=(a.top+a.bottom)/2,p=s&&c.animateScale,g=p?0:this.innerRadius,y=p?0:this.outerRadius,{sharedOptions:x,includeOptions:b}=this._getSharedOptions(n,r);let v=this._getRotation(),w;for(w=0;w<n;++w)v+=this._circumference(w,s);for(w=n;w<n+i;++w){const T=this._circumference(w,s),C=e[w],N={x:h+this.offsetX,y:d+this.offsetY,startAngle:v,endAngle:v+T,circumference:T,outerRadius:y,innerRadius:g};b&&(N.options=x||this.resolveDataElementOptions(w,C.active?"active":r)),v+=T,this.updateElement(C,w,N,r)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let i=0,r;for(r=0;r<n.length;r++){const s=e._parsed[r];s!==null&&!isNaN(s)&&this.chart.getDataVisibility(r)&&!n[r].hidden&&(i+=Math.abs(s))}return i}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?Re*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,i=this.chart,r=i.data.labels||[],s=Zl(n._parsed[e],i.options.locale);return{label:r[e]||"",value:s}}getMaxBorderWidth(e){let n=0;const i=this.chart;let r,s,o,a,l;if(!e){for(r=0,s=i.data.datasets.length;r<s;++r)if(i.isDatasetVisible(r)){o=i.getDatasetMeta(r),e=o.data,a=o.controller;break}}if(!e)return 0;for(r=0,s=e.length;r<s;++r)l=a.resolveDataElementOptions(r),l.borderAlign!=="inner"&&(n=Math.max(n,l.borderWidth||0,l.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let i=0,r=e.length;i<r;++i){const s=this.resolveDataElementOptions(i);n=Math.max(n,s.offset||0,s.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let i=0;i<e;++i)this.chart.isDatasetVisible(i)&&(n+=this._getRingWeight(i));return n}_getRingWeight(e){return Math.max(ie(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}W(Xr,"id","doughnut"),W(Xr,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),W(Xr,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),W(Xr,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:i,color:r}}=e.legend.options;return n.labels.map((s,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:s,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:r,lineWidth:l.borderWidth,pointStyle:i,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,n,i){i.chart.toggleDataVisibility(n.index),i.chart.update()}}}});class Cu extends Cn{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:i,data:r=[],_dataset:s}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=XS(n,r,o);this._drawStart=a,this._drawCount=l,JS(n)&&(a=0,l=r.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!s._decimated,i.points=r;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(i,void 0,{animated:!o,options:c},e),this.updateElements(r,a,l,e)}updateElements(e,n,i,r){const s=r==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:h,includeOptions:d}=this._getSharedOptions(n,r),p=o.axis,g=a.axis,{spanGaps:y,segment:x}=this.options,b=So(y)?y:Number.POSITIVE_INFINITY,v=this.chart._animationsDisabled||s||r==="none",w=n+i,T=e.length;let C=n>0&&this.getParsed(n-1);for(let N=0;N<T;++N){const M=e[N],S=v?M:{};if(N<n||N>=w){S.skip=!0;continue}const E=this.getParsed(N),P=oe(E[g]),k=S[p]=o.getPixelForValue(E[p],N),A=S[g]=s||P?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,E,l):E[g],N);S.skip=isNaN(k)||isNaN(A)||P,S.stop=N>0&&Math.abs(E[p]-C[p])>b,x&&(S.parsed=E,S.raw=c.data[N]),d&&(S.options=h||this.resolveDataElementOptions(N,M.active?"active":r)),v||this.updateElement(M,N,S,r),C=E}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,i=n.options&&n.options.borderWidth||0,r=e.data||[];if(!r.length)return i;const s=r[0].size(this.resolveDataElementOptions(0)),o=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(i,s,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}W(Cu,"id","line"),W(Cu,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),W(Cu,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class Ka extends Cn{constructor(e,n){super(e,n),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const n=this._cachedMeta,i=this.chart,r=i.data.labels||[],s=Zl(n._parsed[e].r,i.options.locale);return{label:r[e]||"",value:s}}parseObjectData(e,n,i,r){return oI.bind(this)(e,n,i,r)}update(e){const n=this._cachedMeta.data;this._updateRadius(),this.updateElements(n,0,n.length,e)}getMinMax(){const e=this._cachedMeta,n={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((i,r)=>{const s=this.getParsed(r).r;!isNaN(s)&&this.chart.getDataVisibility(r)&&(s<n.min&&(n.min=s),s>n.max&&(n.max=s))}),n}_updateRadius(){const e=this.chart,n=e.chartArea,i=e.options,r=Math.min(n.right-n.left,n.bottom-n.top),s=Math.max(r/2,0),o=Math.max(i.cutoutPercentage?s/100*i.cutoutPercentage:1,0),a=(s-o)/e.getVisibleDatasetCount();this.outerRadius=s-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(e,n,i,r){const s=r==="reset",o=this.chart,l=o.options.animation,c=this._cachedMeta.rScale,h=c.xCenter,d=c.yCenter,p=c.getIndexAngle(0)-.5*Ne;let g=p,y;const x=360/this.countVisibleElements();for(y=0;y<n;++y)g+=this._computeAngle(y,r,x);for(y=n;y<n+i;y++){const b=e[y];let v=g,w=g+this._computeAngle(y,r,x),T=o.getDataVisibility(y)?c.getDistanceFromCenterForValue(this.getParsed(y).r):0;g=w,s&&(l.animateScale&&(T=0),l.animateRotate&&(v=w=p));const C={x:h,y:d,innerRadius:0,outerRadius:T,startAngle:v,endAngle:w,options:this.resolveDataElementOptions(y,b.active?"active":r)};this.updateElement(b,y,C,r)}}countVisibleElements(){const e=this._cachedMeta;let n=0;return e.data.forEach((i,r)=>{!isNaN(this.getParsed(r).r)&&this.chart.getDataVisibility(r)&&n++}),n}_computeAngle(e,n,i){return this.chart.getDataVisibility(e)?In(this.resolveDataElementOptions(e,n).angle||i):0}}W(Ka,"id","polarArea"),W(Ka,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),W(Ka,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:i,color:r}}=e.legend.options;return n.labels.map((s,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:s,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:r,lineWidth:l.borderWidth,pointStyle:i,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,n,i){i.chart.toggleDataVisibility(n.index),i.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class Mm extends Xr{}W(Mm,"id","pie"),W(Mm,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class Au extends Cn{getLabelAndValue(e){const n=this._cachedMeta.vScale,i=this.getParsed(e);return{label:n.getLabels()[e],value:""+n.getLabelForValue(i[n.axis])}}parseObjectData(e,n,i,r){return oI.bind(this)(e,n,i,r)}update(e){const n=this._cachedMeta,i=n.dataset,r=n.data||[],s=n.iScale.getLabels();if(i.points=r,e!=="resize"){const o=this.resolveDatasetElementOptions(e);this.options.showLine||(o.borderWidth=0);const a={_loop:!0,_fullLoop:s.length===r.length,options:o};this.updateElement(i,void 0,a,e)}this.updateElements(r,0,r.length,e)}updateElements(e,n,i,r){const s=this._cachedMeta.rScale,o=r==="reset";for(let a=n;a<n+i;a++){const l=e[a],c=this.resolveDataElementOptions(a,l.active?"active":r),h=s.getPointPositionForValue(a,this.getParsed(a).r),d=o?s.xCenter:h.x,p=o?s.yCenter:h.y,g={x:d,y:p,angle:h.angle,skip:isNaN(d)||isNaN(p),options:c};this.updateElement(l,a,g,r)}}}W(Au,"id","radar"),W(Au,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),W(Au,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class Ru extends Cn{getLabelAndValue(e){const n=this._cachedMeta,i=this.chart.data.labels||[],{xScale:r,yScale:s}=n,o=this.getParsed(e),a=r.getLabelForValue(o.x),l=s.getLabelForValue(o.y);return{label:i[e]||"",value:"("+a+", "+l+")"}}update(e){const n=this._cachedMeta,{data:i=[]}=n,r=this.chart._animationsDisabled;let{start:s,count:o}=XS(n,i,r);if(this._drawStart=s,this._drawCount=o,JS(n)&&(s=0,o=i.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:l}=n;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=i;const c=this.resolveDatasetElementOptions(e);c.segment=this.options.segment,this.updateElement(a,void 0,{animated:!r,options:c},e)}else this.datasetElementType&&(delete n.dataset,this.datasetElementType=!1);this.updateElements(i,s,o,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,n,i,r){const s=r==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,h=this.resolveDataElementOptions(n,r),d=this.getSharedOptions(h),p=this.includeOptions(r,d),g=o.axis,y=a.axis,{spanGaps:x,segment:b}=this.options,v=So(x)?x:Number.POSITIVE_INFINITY,w=this.chart._animationsDisabled||s||r==="none";let T=n>0&&this.getParsed(n-1);for(let C=n;C<n+i;++C){const N=e[C],M=this.getParsed(C),S=w?N:{},E=oe(M[y]),P=S[g]=o.getPixelForValue(M[g],C),k=S[y]=s||E?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,M,l):M[y],C);S.skip=isNaN(P)||isNaN(k)||E,S.stop=C>0&&Math.abs(M[g]-T[g])>v,b&&(S.parsed=M,S.raw=c.data[C]),p&&(S.options=d||this.resolveDataElementOptions(C,N.active?"active":r)),w||this.updateElement(N,C,S,r),T=M}this.updateSharedOptions(d,r,h)}getMaxOverflow(){const e=this._cachedMeta,n=e.data||[];if(!this.options.showLine){let a=0;for(let l=n.length-1;l>=0;--l)a=Math.max(a,n[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}const i=e.dataset,r=i.options&&i.options.borderWidth||0;if(!n.length)return r;const s=n[0].size(this.resolveDataElementOptions(0)),o=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(r,s,o)/2}}W(Ru,"id","scatter"),W(Ru,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),W(Ru,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var jV=Object.freeze({__proto__:null,BarController:ku,BubbleController:Pu,DoughnutController:Xr,LineController:Cu,PieController:Mm,PolarAreaController:Ka,RadarController:Au,ScatterController:Ru});function Fr(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class f_{constructor(e){W(this,"options");this.options=e||{}}static override(e){Object.assign(f_.prototype,e)}init(){}formats(){return Fr()}parse(){return Fr()}format(){return Fr()}add(){return Fr()}diff(){return Fr()}startOf(){return Fr()}endOf(){return Fr()}}var VV={_date:f_};function FV(t,e,n,i){const{controller:r,data:s,_sorted:o}=t,a=r._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&s.length){const c=a._reversePixels?lj:fi;if(i){if(r._sharedOptions){const h=s[0],d=typeof h.getRange=="function"&&h.getRange(e);if(d){const p=c(s,e,n-d),g=c(s,e,n+d);return{lo:p.lo,hi:g.hi}}}}else{const h=c(s,e,n);if(l){const{vScale:d}=r._cachedMeta,{_parsed:p}=t,g=p.slice(0,h.lo+1).reverse().findIndex(x=>!oe(x[d.axis]));h.lo-=Math.max(0,g);const y=p.slice(h.hi).findIndex(x=>!oe(x[d.axis]));h.hi+=Math.max(0,y)}return h}}return{lo:0,hi:s.length-1}}function Rd(t,e,n,i,r){const s=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=s.length;a<l;++a){const{index:c,data:h}=s[a],{lo:d,hi:p}=FV(s[a],e,o,r);for(let g=d;g<=p;++g){const y=h[g];y.skip||i(y,c,g)}}}function UV(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(i,r){const s=e?Math.abs(i.x-r.x):0,o=n?Math.abs(i.y-r.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function Xf(t,e,n,i,r){const s=[];return!r&&!t.isPointInArea(e)||Rd(t,n,e,function(a,l,c){!r&&!pi(a,t.chartArea,0)||a.inRange(e.x,e.y,i)&&s.push({element:a,datasetIndex:l,index:c})},!0),s}function zV(t,e,n,i){let r=[];function s(o,a,l){const{startAngle:c,endAngle:h}=o.getProps(["startAngle","endAngle"],i),{angle:d}=qS(o,{x:e.x,y:e.y});Pl(d,c,h)&&r.push({element:o,datasetIndex:a,index:l})}return Rd(t,n,e,s),r}function BV(t,e,n,i,r,s){let o=[];const a=UV(n);let l=Number.POSITIVE_INFINITY;function c(h,d,p){const g=h.inRange(e.x,e.y,r);if(i&&!g)return;const y=h.getCenterPoint(r);if(!(!!s||t.isPointInArea(y))&&!g)return;const b=a(e,y);b<l?(o=[{element:h,datasetIndex:d,index:p}],l=b):b===l&&o.push({element:h,datasetIndex:d,index:p})}return Rd(t,n,e,c),o}function Jf(t,e,n,i,r,s){return!s&&!t.isPointInArea(e)?[]:n==="r"&&!i?zV(t,e,n,r):BV(t,e,n,i,r,s)}function Mw(t,e,n,i,r){const s=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return Rd(t,n,e,(l,c,h)=>{l[o]&&l[o](e[n],r)&&(s.push({element:l,datasetIndex:c,index:h}),a=a||l.inRange(e.x,e.y,r))}),i&&!a?[]:s}var $V={modes:{index(t,e,n,i){const r=Hr(e,t),s=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?Xf(t,r,s,i,o):Jf(t,r,s,!1,i,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const h=a[0].index,d=c.data[h];d&&!d.skip&&l.push({element:d,datasetIndex:c.index,index:h})}),l):[]},dataset(t,e,n,i){const r=Hr(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?Xf(t,r,s,i,o):Jf(t,r,s,!1,i,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let h=0;h<c.length;++h)a.push({element:c[h],datasetIndex:l,index:h})}return a},point(t,e,n,i){const r=Hr(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return Xf(t,r,s,i,o)},nearest(t,e,n,i){const r=Hr(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return Jf(t,r,s,n.intersect,i,o)},x(t,e,n,i){const r=Hr(e,t);return Mw(t,r,"x",n.intersect,i)},y(t,e,n,i){const r=Hr(e,t);return Mw(t,r,"y",n.intersect,i)}}};const gI=["left","top","right","bottom"];function la(t,e){return t.filter(n=>n.pos===e)}function Ow(t,e){return t.filter(n=>gI.indexOf(n.pos)===-1&&n.box.axis===e)}function ca(t,e){return t.sort((n,i)=>{const r=e?i:n,s=e?n:i;return r.weight===s.weight?r.index-s.index:r.weight-s.weight})}function HV(t){const e=[];let n,i,r,s,o,a;for(n=0,i=(t||[]).length;n<i;++n)r=t[n],{position:s,options:{stack:o,stackWeight:a=1}}=r,e.push({index:n,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&s+o,stackWeight:a});return e}function WV(t){const e={};for(const n of t){const{stack:i,pos:r,stackWeight:s}=n;if(!i||!gI.includes(r))continue;const o=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function qV(t,e){const n=WV(t),{vBoxMaxWidth:i,hBoxMaxHeight:r}=e;let s,o,a;for(s=0,o=t.length;s<o;++s){a=t[s];const{fullSize:l}=a.box,c=n[a.stack],h=c&&a.stackWeight/c.weight;a.horizontal?(a.width=h?h*i:l&&e.availableWidth,a.height=r):(a.width=i,a.height=h?h*r:l&&e.availableHeight)}return n}function KV(t){const e=HV(t),n=ca(e.filter(c=>c.box.fullSize),!0),i=ca(la(e,"left"),!0),r=ca(la(e,"right")),s=ca(la(e,"top"),!0),o=ca(la(e,"bottom")),a=Ow(e,"x"),l=Ow(e,"y");return{fullSize:n,leftAndTop:i.concat(s),rightAndBottom:r.concat(l).concat(o).concat(a),chartArea:la(e,"chartArea"),vertical:i.concat(r).concat(l),horizontal:s.concat(o).concat(a)}}function Lw(t,e,n,i){return Math.max(t[n],e[n])+Math.max(t[i],e[i])}function yI(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function GV(t,e,n,i){const{pos:r,box:s}=n,o=t.maxPadding;if(!ue(r)){n.size&&(t[r]-=n.size);const d=i[n.stack]||{size:0,count:1};d.size=Math.max(d.size,n.horizontal?s.height:s.width),n.size=d.size/d.count,t[r]+=n.size}s.getPadding&&yI(o,s.getPadding());const a=Math.max(0,e.outerWidth-Lw(o,t,"left","right")),l=Math.max(0,e.outerHeight-Lw(o,t,"top","bottom")),c=a!==t.w,h=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:h}:{same:h,other:c}}function QV(t){const e=t.maxPadding;function n(i){const r=Math.max(e[i]-t[i],0);return t[i]+=r,r}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function YV(t,e){const n=e.maxPadding;function i(r){const s={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{s[o]=Math.max(e[o],n[o])}),s}return i(t?["left","right"]:["top","bottom"])}function Ta(t,e,n,i){const r=[];let s,o,a,l,c,h;for(s=0,o=t.length,c=0;s<o;++s){a=t[s],l=a.box,l.update(a.width||e.w,a.height||e.h,YV(a.horizontal,e));const{same:d,other:p}=GV(e,n,a,i);c|=d&&r.length,h=h||p,l.fullSize||r.push(a)}return c&&Ta(r,e,n,i)||h}function Qc(t,e,n,i,r){t.top=n,t.left=e,t.right=e+i,t.bottom=n+r,t.width=i,t.height=r}function jw(t,e,n,i){const r=n.padding;let{x:s,y:o}=e;for(const a of t){const l=a.box,c=i[a.stack]||{placed:0,weight:1},h=a.stackWeight/c.weight||1;if(a.horizontal){const d=e.w*h,p=c.size||l.height;kl(c.start)&&(o=c.start),l.fullSize?Qc(l,r.left,o,n.outerWidth-r.right-r.left,p):Qc(l,e.left+c.placed,o,d,p),c.start=o,c.placed+=d,o=l.bottom}else{const d=e.h*h,p=c.size||l.width;kl(c.start)&&(s=c.start),l.fullSize?Qc(l,s,r.top,p,n.outerHeight-r.bottom-r.top):Qc(l,s,e.top+c.placed,p,d),c.start=s,c.placed+=d,s=l.right}}e.x=s,e.y=o}var Pt={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,i){if(!t)return;const r=Nt(t.options.layout.padding),s=Math.max(e-r.width,0),o=Math.max(n-r.height,0),a=KV(t.boxes),l=a.vertical,c=a.horizontal;ve(t.boxes,x=>{typeof x.beforeLayout=="function"&&x.beforeLayout()});const h=l.reduce((x,b)=>b.box.options&&b.box.options.display===!1?x:x+1,0)||1,d=Object.freeze({outerWidth:e,outerHeight:n,padding:r,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/h,hBoxMaxHeight:o/2}),p=Object.assign({},r);yI(p,Nt(i));const g=Object.assign({maxPadding:p,w:s,h:o,x:r.left,y:r.top},r),y=qV(l.concat(c),d);Ta(a.fullSize,g,d,y),Ta(l,g,d,y),Ta(c,g,d,y)&&Ta(l,g,d,y),QV(g),jw(a.leftAndTop,g,d,y),g.x+=g.w,g.y+=g.h,jw(a.rightAndBottom,g,d,y),t.chartArea={left:g.left,top:g.top,right:g.left+g.w,bottom:g.top+g.h,height:g.h,width:g.w},ve(a.chartArea,x=>{const b=x.box;Object.assign(b,t.chartArea),b.update(g.w,g.h,{left:0,top:0,right:0,bottom:0})})}};class _I{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,i){}removeEventListener(e,n,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,i,r){return n=Math.max(0,n||e.width),i=i||e.height,{width:n,height:Math.max(0,r?Math.floor(n/r):i)}}isAttached(e){return!0}updateConfig(e){}}class XV extends _I{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Nu="$chartjs",JV={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Vw=t=>t===null||t==="";function ZV(t,e){const n=t.style,i=t.getAttribute("height"),r=t.getAttribute("width");if(t[Nu]={initial:{height:i,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",Vw(r)){const s=xw(t,"width");s!==void 0&&(t.width=s)}if(Vw(i))if(t.style.height==="")t.height=t.width/(e||2);else{const s=xw(t,"height");s!==void 0&&(t.height=s)}return t}const vI=tV?{passive:!0}:!1;function e5(t,e,n){t&&t.addEventListener(e,n,vI)}function t5(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,vI)}function n5(t,e){const n=JV[t.type]||t.type,{x:i,y:r}=Hr(t,e);return{type:n,chart:e,native:t,x:i!==void 0?i:null,y:r!==void 0?r:null}}function Nh(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function i5(t,e,n){const i=t.canvas,r=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||Nh(a.addedNodes,i),o=o&&!Nh(a.removedNodes,i);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}function r5(t,e,n){const i=t.canvas,r=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||Nh(a.removedNodes,i),o=o&&!Nh(a.addedNodes,i);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}const Al=new Map;let Fw=0;function wI(){const t=window.devicePixelRatio;t!==Fw&&(Fw=t,Al.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function s5(t,e){Al.size||window.addEventListener("resize",wI),Al.set(t,e)}function o5(t){Al.delete(t),Al.size||window.removeEventListener("resize",wI)}function a5(t,e,n){const i=t.canvas,r=i&&d_(i);if(!r)return;const s=YS((a,l)=>{const c=r.clientWidth;n(a,l),c<r.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,h=l.contentRect.height;c===0&&h===0||s(c,h)});return o.observe(r),s5(t,s),o}function Zf(t,e,n){n&&n.disconnect(),e==="resize"&&o5(t)}function l5(t,e,n){const i=t.canvas,r=YS(s=>{t.ctx!==null&&n(n5(s,t))},t);return e5(i,e,r),r}class c5 extends _I{acquireContext(e,n){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(ZV(e,n),i):null}releaseContext(e){const n=e.canvas;if(!n[Nu])return!1;const i=n[Nu].initial;["height","width"].forEach(s=>{const o=i[s];oe(o)?n.removeAttribute(s):n.setAttribute(s,o)});const r=i.style||{};return Object.keys(r).forEach(s=>{n.style[s]=r[s]}),n.width=n.width,delete n[Nu],!0}addEventListener(e,n,i){this.removeEventListener(e,n);const r=e.$proxies||(e.$proxies={}),o={attach:i5,detach:r5,resize:a5}[n]||l5;r[n]=o(e,n,i)}removeEventListener(e,n){const i=e.$proxies||(e.$proxies={}),r=i[n];if(!r)return;({attach:Zf,detach:Zf,resize:Zf}[n]||t5)(e,n,r),i[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,i,r){return eV(e,n,i,r)}isAttached(e){const n=e&&d_(e);return!!(n&&n.isConnected)}}function u5(t){return!h_()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?XV:c5}class Dn{constructor(){W(this,"x");W(this,"y");W(this,"active",!1);W(this,"options");W(this,"$animations")}tooltipPosition(e){const{x:n,y:i}=this.getProps(["x","y"],e);return{x:n,y:i}}hasValue(){return So(this.x)&&So(this.y)}getProps(e,n){const i=this.$animations;if(!n||!i)return this;const r={};return e.forEach(s=>{r[s]=i[s]&&i[s].active()?i[s]._to:this[s]}),r}}W(Dn,"defaults",{}),W(Dn,"defaultRoutes");function h5(t,e){const n=t.options.ticks,i=d5(t),r=Math.min(n.maxTicksLimit||i,i),s=n.major.enabled?p5(e):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>r)return m5(e,c,s,o/r),c;const h=f5(s,e,r);if(o>0){let d,p;const g=o>1?Math.round((l-a)/(o-1)):null;for(Yc(e,c,h,oe(g)?0:a-g,a),d=0,p=o-1;d<p;d++)Yc(e,c,h,s[d],s[d+1]);return Yc(e,c,h,l,oe(g)?e.length:l+g),c}return Yc(e,c,h),c}function d5(t){const e=t.options.offset,n=t._tickSize(),i=t._length/n+(e?0:1),r=t._maxLength/n;return Math.floor(Math.min(i,r))}function f5(t,e,n){const i=g5(t),r=e.length/n;if(!i)return Math.max(r,1);const s=ij(i);for(let o=0,a=s.length-1;o<a;o++){const l=s[o];if(l>r)return l}return Math.max(r,1)}function p5(t){const e=[];let n,i;for(n=0,i=t.length;n<i;n++)t[n].major&&e.push(n);return e}function m5(t,e,n,i){let r=0,s=n[0],o;for(i=Math.ceil(i),o=0;o<t.length;o++)o===s&&(e.push(t[o]),r++,s=n[r*i])}function Yc(t,e,n,i,r){const s=ie(i,0),o=Math.min(ie(r,t.length),t.length);let a=0,l,c,h;for(n=Math.ceil(n),r&&(l=r-i,n=l/Math.floor(l/n)),h=s;h<0;)a++,h=Math.round(s+a*n);for(c=Math.max(s,0);c<o;c++)c===h&&(e.push(t[c]),a++,h=Math.round(s+a*n))}function g5(t){const e=t.length;let n,i;if(e<2)return!1;for(i=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==i)return!1;return i}const y5=t=>t==="left"?"right":t==="right"?"left":t,Uw=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,zw=(t,e)=>Math.min(e||t,t);function Bw(t,e){const n=[],i=t.length/e,r=t.length;let s=0;for(;s<r;s+=i)n.push(t[Math.floor(s)]);return n}function _5(t,e,n){const i=t.ticks.length,r=Math.min(e,i-1),s=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(r),c;if(!(n&&(i===1?c=Math.max(l-s,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(r-1))/2,l+=r<e?c:-c,l<s-a||l>o+a)))return l}function v5(t,e){ve(t,n=>{const i=n.gc,r=i.length/2;let s;if(r>e){for(s=0;s<r;++s)delete n.data[i[s]];i.splice(0,r)}})}function ua(t){return t.drawTicks?t.tickLength:0}function $w(t,e){if(!t.display)return 0;const n=it(t.font,e),i=Nt(t.padding);return(Oe(t.text)?t.text.length:1)*n.lineHeight+i.height}function w5(t,e){return Nr(t,{scale:e,type:"scale"})}function x5(t,e,n){return Nr(t,{tick:n,index:e,type:"tick"})}function E5(t,e,n){let i=s_(t);return(n&&e!=="right"||!n&&e==="right")&&(i=y5(i)),i}function b5(t,e,n,i){const{top:r,left:s,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:h}=l;let d=0,p,g,y;const x=o-r,b=a-s;if(t.isHorizontal()){if(g=Tt(i,s,a),ue(n)){const v=Object.keys(n)[0],w=n[v];y=h[v].getPixelForValue(w)+x-e}else n==="center"?y=(c.bottom+c.top)/2+x-e:y=Uw(t,n,e);p=a-s}else{if(ue(n)){const v=Object.keys(n)[0],w=n[v];g=h[v].getPixelForValue(w)-b+e}else n==="center"?g=(c.left+c.right)/2-b+e:g=Uw(t,n,e);y=Tt(i,o,r),d=n==="left"?-Ye:Ye}return{titleX:g,titleY:y,maxWidth:p,rotation:d}}class ks extends Dn{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:i,_suggestedMax:r}=this;return e=Jt(e,Number.POSITIVE_INFINITY),n=Jt(n,Number.NEGATIVE_INFINITY),i=Jt(i,Number.POSITIVE_INFINITY),r=Jt(r,Number.NEGATIVE_INFINITY),{min:Jt(e,i),max:Jt(n,r),minDefined:We(e),maxDefined:We(n)}}getMinMax(e){let{min:n,max:i,minDefined:r,maxDefined:s}=this.getUserBounds(),o;if(r&&s)return{min:n,max:i};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),r||(n=Math.min(n,o.min)),s||(i=Math.max(i,o.max));return n=s&&n>i?i:n,i=r&&n>i?n:i,{min:Jt(n,Jt(i,n)),max:Jt(i,Jt(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Se(this.options.beforeUpdate,[this])}update(e,n,i){const{beginAtZero:r,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Nj(this,s,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?Bw(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=h5(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,i;this.isHorizontal()?(n=this.left,i=this.right):(n=this.top,i=this.bottom,e=!e),this._startPixel=n,this._endPixel=i,this._reversePixels=e,this._length=i-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Se(this.options.afterUpdate,[this])}beforeSetDimensions(){Se(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Se(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Se(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Se(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let i,r,s;for(i=0,r=e.length;i<r;i++)s=e[i],s.label=Se(n.callback,[s.value,i,e],this)}afterTickToLabelConversion(){Se(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Se(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,i=zw(this.ticks.length,e.ticks.maxTicksLimit),r=n.minRotation||0,s=n.maxRotation;let o=r,a,l,c;if(!this._isVisible()||!n.display||r>=s||i<=1||!this.isHorizontal()){this.labelRotation=r;return}const h=this._getLabelSizes(),d=h.widest.width,p=h.highest.height,g=at(this.chart.width-d,0,this.maxWidth);a=e.offset?this.maxWidth/i:g/(i-1),d+6>a&&(a=g/(i-(e.offset?.5:1)),l=this.maxHeight-ua(e.grid)-n.padding-$w(e.title,this.chart.options.font),c=Math.sqrt(d*d+p*p),o=i_(Math.min(Math.asin(at((h.highest.height+6)/a,-1,1)),Math.asin(at(l/c,-1,1))-Math.asin(at(p/c,-1,1)))),o=Math.max(r,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){Se(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Se(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:i,title:r,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=$w(r,n.options.font);if(a?(e.width=this.maxWidth,e.height=ua(s)+l):(e.height=this.maxHeight,e.width=ua(s)+l),i.display&&this.ticks.length){const{first:c,last:h,widest:d,highest:p}=this._getLabelSizes(),g=i.padding*2,y=In(this.labelRotation),x=Math.cos(y),b=Math.sin(y);if(a){const v=i.mirror?0:b*d.width+x*p.height;e.height=Math.min(this.maxHeight,e.height+v+g)}else{const v=i.mirror?0:x*d.width+b*p.height;e.width=Math.min(this.maxWidth,e.width+v+g)}this._calculatePadding(c,h,b,x)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,i,r){const{ticks:{align:s,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const h=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let p=0,g=0;l?c?(p=r*e.width,g=i*n.height):(p=i*e.height,g=r*n.width):s==="start"?g=n.width:s==="end"?p=e.width:s!=="inner"&&(p=e.width/2,g=n.width/2),this.paddingLeft=Math.max((p-h+o)*this.width/(this.width-h),0),this.paddingRight=Math.max((g-d+o)*this.width/(this.width-d),0)}else{let h=n.height/2,d=e.height/2;s==="start"?(h=0,d=e.height):s==="end"&&(h=n.height,d=0),this.paddingTop=h+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Se(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,i;for(n=0,i=e.length;n<i;n++)oe(e[n].label)&&(e.splice(n,1),i--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let i=this.ticks;n<i.length&&(i=Bw(i,n)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,i){const{ctx:r,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(n/zw(n,i));let c=0,h=0,d,p,g,y,x,b,v,w,T,C,N;for(d=0;d<n;d+=l){if(y=e[d].label,x=this._resolveTickFontOptions(d),r.font=b=x.string,v=s[b]=s[b]||{data:{},gc:[]},w=x.lineHeight,T=C=0,!oe(y)&&!Oe(y))T=Ah(r,v.data,v.gc,T,y),C=w;else if(Oe(y))for(p=0,g=y.length;p<g;++p)N=y[p],!oe(N)&&!Oe(N)&&(T=Ah(r,v.data,v.gc,T,N),C+=w);o.push(T),a.push(C),c=Math.max(T,c),h=Math.max(C,h)}v5(s,n);const M=o.indexOf(c),S=a.indexOf(h),E=P=>({width:o[P]||0,height:a[P]||0});return{first:E(0),last:E(n-1),widest:E(M),highest:E(S),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return aj(this._alignToPixels?Vr(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const i=n[e];return i.$context||(i.$context=x5(this.getContext(),e,i))}return this.$context||(this.$context=w5(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=In(this.labelRotation),i=Math.abs(Math.cos(n)),r=Math.abs(Math.sin(n)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*i>a*r?a/i:l/r:l*r<a*i?l/i:a/r}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,i=this.chart,r=this.options,{grid:s,position:o,border:a}=r,l=s.offset,c=this.isHorizontal(),d=this.ticks.length+(l?1:0),p=ua(s),g=[],y=a.setContext(this.getContext()),x=y.display?y.width:0,b=x/2,v=function(U){return Vr(i,U,x)};let w,T,C,N,M,S,E,P,k,A,D,R;if(o==="top")w=v(this.bottom),S=this.bottom-p,P=w-b,A=v(e.top)+b,R=e.bottom;else if(o==="bottom")w=v(this.top),A=e.top,R=v(e.bottom)-b,S=w+b,P=this.top+p;else if(o==="left")w=v(this.right),M=this.right-p,E=w-b,k=v(e.left)+b,D=e.right;else if(o==="right")w=v(this.left),k=e.left,D=v(e.right)-b,M=w+b,E=this.left+p;else if(n==="x"){if(o==="center")w=v((e.top+e.bottom)/2+.5);else if(ue(o)){const U=Object.keys(o)[0],Y=o[U];w=v(this.chart.scales[U].getPixelForValue(Y))}A=e.top,R=e.bottom,S=w+b,P=S+p}else if(n==="y"){if(o==="center")w=v((e.left+e.right)/2);else if(ue(o)){const U=Object.keys(o)[0],Y=o[U];w=v(this.chart.scales[U].getPixelForValue(Y))}M=w-b,E=M-p,k=e.left,D=e.right}const le=ie(r.ticks.maxTicksLimit,d),X=Math.max(1,Math.ceil(d/le));for(T=0;T<d;T+=X){const U=this.getContext(T),Y=s.setContext(U),V=a.setContext(U),$=Y.lineWidth,q=Y.color,re=V.dash||[],se=V.dashOffset,fe=Y.tickWidth,De=Y.tickColor,ye=Y.tickBorderDash||[],be=Y.tickBorderDashOffset;C=_5(this,T,l),C!==void 0&&(N=Vr(i,C,$),c?M=E=k=D=N:S=P=A=R=N,g.push({tx1:M,ty1:S,tx2:E,ty2:P,x1:k,y1:A,x2:D,y2:R,width:$,color:q,borderDash:re,borderDashOffset:se,tickWidth:fe,tickColor:De,tickBorderDash:ye,tickBorderDashOffset:be}))}return this._ticksLength=d,this._borderValue=w,g}_computeLabelItems(e){const n=this.axis,i=this.options,{position:r,ticks:s}=i,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:h,mirror:d}=s,p=ua(i.grid),g=p+h,y=d?-h:g,x=-In(this.labelRotation),b=[];let v,w,T,C,N,M,S,E,P,k,A,D,R="middle";if(r==="top")M=this.bottom-y,S=this._getXAxisLabelAlignment();else if(r==="bottom")M=this.top+y,S=this._getXAxisLabelAlignment();else if(r==="left"){const X=this._getYAxisLabelAlignment(p);S=X.textAlign,N=X.x}else if(r==="right"){const X=this._getYAxisLabelAlignment(p);S=X.textAlign,N=X.x}else if(n==="x"){if(r==="center")M=(e.top+e.bottom)/2+g;else if(ue(r)){const X=Object.keys(r)[0],U=r[X];M=this.chart.scales[X].getPixelForValue(U)+g}S=this._getXAxisLabelAlignment()}else if(n==="y"){if(r==="center")N=(e.left+e.right)/2-g;else if(ue(r)){const X=Object.keys(r)[0],U=r[X];N=this.chart.scales[X].getPixelForValue(U)}S=this._getYAxisLabelAlignment(p).textAlign}n==="y"&&(l==="start"?R="top":l==="end"&&(R="bottom"));const le=this._getLabelSizes();for(v=0,w=a.length;v<w;++v){T=a[v],C=T.label;const X=s.setContext(this.getContext(v));E=this.getPixelForTick(v)+s.labelOffset,P=this._resolveTickFontOptions(v),k=P.lineHeight,A=Oe(C)?C.length:1;const U=A/2,Y=X.color,V=X.textStrokeColor,$=X.textStrokeWidth;let q=S;o?(N=E,S==="inner"&&(v===w-1?q=this.options.reverse?"left":"right":v===0?q=this.options.reverse?"right":"left":q="center"),r==="top"?c==="near"||x!==0?D=-A*k+k/2:c==="center"?D=-le.highest.height/2-U*k+k:D=-le.highest.height+k/2:c==="near"||x!==0?D=k/2:c==="center"?D=le.highest.height/2-U*k:D=le.highest.height-A*k,d&&(D*=-1),x!==0&&!X.showLabelBackdrop&&(N+=k/2*Math.sin(x))):(M=E,D=(1-A)*k/2);let re;if(X.showLabelBackdrop){const se=Nt(X.backdropPadding),fe=le.heights[v],De=le.widths[v];let ye=D-se.top,be=0-se.left;switch(R){case"middle":ye-=fe/2;break;case"bottom":ye-=fe;break}switch(S){case"center":be-=De/2;break;case"right":be-=De;break;case"inner":v===w-1?be-=De:v>0&&(be-=De/2);break}re={left:be,top:ye,width:De+se.width,height:fe+se.height,color:X.backdropColor}}b.push({label:C,font:P,textOffset:D,options:{rotation:x,color:Y,strokeColor:V,strokeWidth:$,textAlign:q,textBaseline:R,translation:[N,M],backdrop:re}})}return b}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-In(this.labelRotation))return e==="top"?"left":"right";let r="center";return n.align==="start"?r="left":n.align==="end"?r="right":n.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:i,mirror:r,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,l=o.widest.width;let c,h;return n==="left"?r?(h=this.right+s,i==="near"?c="left":i==="center"?(c="center",h+=l/2):(c="right",h+=l)):(h=this.right-a,i==="near"?c="right":i==="center"?(c="center",h-=l/2):(c="left",h=this.left)):n==="right"?r?(h=this.left+s,i==="near"?c="right":i==="center"?(c="center",h-=l/2):(c="left",h-=l)):(h=this.left+a,i==="near"?c="left":i==="center"?(c="center",h+=l/2):(c="right",h=this.right)):c="right",{textAlign:c,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:i,top:r,width:s,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(i,r,s,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const r=this.ticks.findIndex(s=>s.value===e);return r>=0?n.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){const n=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const a=(l,c,h)=>{!h.width||!h.color||(i.save(),i.lineWidth=h.width,i.strokeStyle=h.color,i.setLineDash(h.borderDash||[]),i.lineDashOffset=h.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(c.x,c.y),i.stroke(),i.restore())};if(n.display)for(s=0,o=r.length;s<o;++s){const l=r[s];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:i,grid:r}}=this,s=i.setContext(this.getContext()),o=i.display?s.width:0;if(!o)return;const a=r.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,h,d,p;this.isHorizontal()?(c=Vr(e,this.left,o)-o/2,h=Vr(e,this.right,a)+a/2,d=p=l):(d=Vr(e,this.top,o)-o/2,p=Vr(e,this.bottom,a)+a/2,c=h=l),n.save(),n.lineWidth=s.width,n.strokeStyle=s.color,n.beginPath(),n.moveTo(c,d),n.lineTo(h,p),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const i=this.ctx,r=this._computeLabelArea();r&&Pd(i,r);const s=this.getLabelItems(e);for(const o of s){const a=o.options,l=o.font,c=o.label,h=o.textOffset;vs(i,c,0,h,l,a)}r&&Cd(i)}drawTitle(){const{ctx:e,options:{position:n,title:i,reverse:r}}=this;if(!i.display)return;const s=it(i.font),o=Nt(i.padding),a=i.align;let l=s.lineHeight/2;n==="bottom"||n==="center"||ue(n)?(l+=o.bottom,Oe(i.text)&&(l+=s.lineHeight*(i.text.length-1))):l+=o.top;const{titleX:c,titleY:h,maxWidth:d,rotation:p}=b5(this,l,n,a);vs(e,i.text,0,0,s,{color:i.color,maxWidth:d,rotation:p,textAlign:E5(a,n,r),textBaseline:"middle",translation:[c,h]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,i=ie(e.grid&&e.grid.z,-1),r=ie(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==ks.prototype.draw?[{z:n,draw:s=>{this.draw(s)}}]:[{z:i,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:n,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[];let s,o;for(s=0,o=n.length;s<o;++s){const a=n[s];a[i]===this.id&&(!e||a.type===e)&&r.push(a)}return r}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return it(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Xc{constructor(e,n,i){this.type=e,this.scope=n,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let i;I5(n)&&(i=this.register(n));const r=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in r||(r[s]=e,T5(e,o,i),this.override&&Le.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,i=e.id,r=this.scope;i in n&&delete n[i],r&&i in Le[r]&&(delete Le[r][i],this.override&&delete _s[i])}}function T5(t,e,n){const i=Il(Object.create(null),[n?Le.get(n):{},Le.get(e),t.defaults]);Le.set(e,i),t.defaultRoutes&&S5(e,t.defaultRoutes),t.descriptors&&Le.describe(e,t.descriptors)}function S5(t,e){Object.keys(e).forEach(n=>{const i=n.split("."),r=i.pop(),s=[t].concat(i).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");Le.route(s,r,l,a)})}function I5(t){return"id"in t&&"defaults"in t}class k5{constructor(){this.controllers=new Xc(Cn,"datasets",!0),this.elements=new Xc(Dn,"elements"),this.plugins=new Xc(Object,"plugins"),this.scales=new Xc(ks,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,i){[...n].forEach(r=>{const s=i||this._getRegistryForType(r);i||s.isForType(r)||s===this.plugins&&r.id?this._exec(e,s,r):ve(r,o=>{const a=i||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,i){const r=n_(e);Se(i["before"+r],[],i),n[e](i),Se(i["after"+r],[],i)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const i=this._typedRegistries[n];if(i.isForType(e))return i}return this.plugins}_get(e,n,i){const r=n.get(e);if(r===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return r}}var jn=new k5;class P5{constructor(){this._init=[]}notify(e,n,i,r){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const s=r?this._descriptors(e).filter(r):this._descriptors(e),o=this._notify(s,e,n,i);return n==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,i,r){r=r||{};for(const s of e){const o=s.plugin,a=o[i],l=[n,r,s.options];if(Se(a,l,o)===!1&&r.cancelable)return!1}return!0}invalidate(){oe(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const i=e&&e.config,r=ie(i.options&&i.options.plugins,{}),s=C5(i);return r===!1&&!n?[]:R5(e,s,r,n)}_notifyStateChanges(e){const n=this._oldCache||[],i=this._cache,r=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(r(n,i),e,"stop"),this._notify(r(i,n),e,"start")}}function C5(t){const e={},n=[],i=Object.keys(jn.plugins.items);for(let s=0;s<i.length;s++)n.push(jn.getPlugin(i[s]));const r=t.plugins||[];for(let s=0;s<r.length;s++){const o=r[s];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function A5(t,e){return!e&&t===!1?null:t===!0?{}:t}function R5(t,{plugins:e,localIds:n},i,r){const s=[],o=t.getContext();for(const a of e){const l=a.id,c=A5(i[l],r);c!==null&&s.push({plugin:a,options:N5(t.config,{plugin:a,local:n[l]},c,o)})}return s}function N5(t,{plugin:e,local:n},i,r){const s=t.pluginScopeKeys(e),o=t.getOptionScopes(i,s);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Om(t,e){const n=Le.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function D5(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function M5(t,e){return t===e?"_index_":"_value_"}function Hw(t){if(t==="x"||t==="y"||t==="r")return t}function O5(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function Lm(t,...e){if(Hw(t))return t;for(const n of e){const i=n.axis||O5(n.position)||t.length>1&&Hw(t[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function Ww(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function L5(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(i=>i.xAxisID===t||i.yAxisID===t);if(n.length)return Ww(t,"x",n[0])||Ww(t,"y",n[0])}return{}}function j5(t,e){const n=_s[t.type]||{scales:{}},i=e.scales||{},r=Om(t.type,e),s=Object.create(null);return Object.keys(i).forEach(o=>{const a=i[o];if(!ue(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=Lm(o,a,L5(o,t),Le.scales[a.type]),c=M5(l,r),h=n.scales||{};s[o]=$a(Object.create(null),[{axis:l},a,h[l],h[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||Om(a,e),h=(_s[a]||{}).scales||{};Object.keys(h).forEach(d=>{const p=D5(d,l),g=o[p+"AxisID"]||p;s[g]=s[g]||Object.create(null),$a(s[g],[{axis:p},i[g],h[d]])})}),Object.keys(s).forEach(o=>{const a=s[o];$a(a,[Le.scales[a.type],Le.scale])}),s}function xI(t){const e=t.options||(t.options={});e.plugins=ie(e.plugins,{}),e.scales=j5(t,e)}function EI(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function V5(t){return t=t||{},t.data=EI(t.data),xI(t),t}const qw=new Map,bI=new Set;function Jc(t,e){let n=qw.get(t);return n||(n=e(),qw.set(t,n),bI.add(n)),n}const ha=(t,e,n)=>{const i=Tr(e,n);i!==void 0&&t.add(i)};class F5{constructor(e){this._config=V5(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=EI(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),xI(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Jc(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return Jc(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return Jc(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,i=this.type;return Jc(`${i}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const i=this._scopeCache;let r=i.get(e);return(!r||n)&&(r=new Map,i.set(e,r)),r}getOptionScopes(e,n,i){const{options:r,type:s}=this,o=this._cachedScopes(e,i),a=o.get(n);if(a)return a;const l=new Set;n.forEach(h=>{e&&(l.add(e),h.forEach(d=>ha(l,e,d))),h.forEach(d=>ha(l,r,d)),h.forEach(d=>ha(l,_s[s]||{},d)),h.forEach(d=>ha(l,Le,d)),h.forEach(d=>ha(l,Nm,d))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),bI.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,_s[n]||{},Le.datasets[n]||{},{type:n},Le,Nm]}resolveNamedOptions(e,n,i,r=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=Kw(this._resolverCache,e,r);let l=o;if(z5(o,n)){s.$shared=!1,i=Sr(i)?i():i;const c=this.createResolver(e,i,a);l=Io(o,i,c)}for(const c of n)s[c]=l[c];return s}createResolver(e,n,i=[""],r){const{resolver:s}=Kw(this._resolverCache,e,i);return ue(n)?Io(s,n,void 0,r):s}}function Kw(t,e,n){let i=t.get(e);i||(i=new Map,t.set(e,i));const r=n.join();let s=i.get(r);return s||(s={resolver:l_(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},i.set(r,s)),s}const U5=t=>ue(t)&&Object.getOwnPropertyNames(t).some(e=>Sr(t[e]));function z5(t,e){const{isScriptable:n,isIndexable:i}=nI(t);for(const r of e){const s=n(r),o=i(r),a=(o||s)&&t[r];if(s&&(Sr(a)||U5(a))||o&&Oe(a))return!0}return!1}var B5="4.4.8";const $5=["top","bottom","left","right","chartArea"];function Gw(t,e){return t==="top"||t==="bottom"||$5.indexOf(t)===-1&&e==="x"}function Qw(t,e){return function(n,i){return n[t]===i[t]?n[e]-i[e]:n[t]-i[t]}}function Yw(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),Se(n&&n.onComplete,[t],e)}function H5(t){const e=t.chart,n=e.options.animation;Se(n&&n.onProgress,[t],e)}function TI(t){return h_()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Du={},Xw=t=>{const e=TI(t);return Object.values(Du).filter(n=>n.canvas===e).pop()};function W5(t,e,n){const i=Object.keys(t);for(const r of i){const s=+r;if(s>=e){const o=t[r];delete t[r],(n>0||s>e)&&(t[s+n]=o)}}}function q5(t,e,n,i){return!n||t.type==="mouseout"?null:i?e:t}function Zc(t,e,n){return t.options.clip?t[n]:e[n]}function K5(t,e){const{xScale:n,yScale:i}=t;return n&&i?{left:Zc(n,e,"left"),right:Zc(n,e,"right"),top:Zc(i,e,"top"),bottom:Zc(i,e,"bottom")}:e}class oi{static register(...e){jn.add(...e),Jw()}static unregister(...e){jn.remove(...e),Jw()}constructor(e,n){const i=this.config=new F5(n),r=TI(e),s=Xw(r);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||u5(r)),this.platform.updateConfig(i);const a=this.platform.acquireContext(r,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,h=l&&l.width;if(this.id=G3(),this.ctx=a,this.canvas=l,this.width=h,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new P5,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=hj(d=>this.update(d),o.resizeDelay||0),this._dataChanges=[],Du[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}ti.listen(this,"complete",Yw),ti.listen(this,"progress",H5),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:i,height:r,_aspectRatio:s}=this;return oe(e)?n&&s?s:r?i/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return jn}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():ww(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return yw(this.canvas,this.ctx),this}stop(){return ti.stop(this),this}resize(e,n){ti.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const i=this.options,r=this.canvas,s=i.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,e,n,s),a=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,ww(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),Se(i.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};ve(n,(i,r)=>{i.id=r})}buildOrUpdateScales(){const e=this.options,n=e.scales,i=this.scales,r=Object.keys(i).reduce((o,a)=>(o[a]=!1,o),{});let s=[];n&&(s=s.concat(Object.keys(n).map(o=>{const a=n[o],l=Lm(o,a),c=l==="r",h=l==="x";return{options:a,dposition:c?"chartArea":h?"bottom":"left",dtype:c?"radialLinear":h?"category":"linear"}}))),ve(s,o=>{const a=o.options,l=a.id,c=Lm(l,a),h=ie(a.type,o.dtype);(a.position===void 0||Gw(a.position,c)!==Gw(o.dposition))&&(a.position=o.dposition),r[l]=!0;let d=null;if(l in i&&i[l].type===h)d=i[l];else{const p=jn.getScale(h);d=new p({id:l,type:h,ctx:this.ctx,chart:this}),i[d.id]=d}d.init(a,e)}),ve(r,(o,a)=>{o||delete i[a]}),ve(i,o=>{Pt.configure(this,o,o.options),Pt.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,i=e.length;if(e.sort((r,s)=>r.index-s.index),i>n){for(let r=n;r<i;++r)this._destroyDatasetMeta(r);e.splice(n,i-n)}this._sortedMetasets=e.slice(0).sort(Qw("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((i,r)=>{n.filter(s=>s===i._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let i,r;for(this._removeUnreferencedMetasets(),i=0,r=n.length;i<r;i++){const s=n[i];let o=this.getDatasetMeta(i);const a=s.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(i),o=this.getDatasetMeta(i)),o.type=a,o.indexAxis=s.indexAxis||Om(a,this.options),o.order=s.order||0,o.index=i,o.label=""+s.label,o.visible=this.isDatasetVisible(i),o.controller)o.controller.updateIndex(i),o.controller.linkScales();else{const l=jn.getController(a),{datasetElementType:c,dataElementType:h}=Le.datasets[a];Object.assign(l,{dataElementType:jn.getElement(h),datasetElementType:c&&jn.getElement(c)}),o.controller=new l(this,i),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){ve(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const i=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,h=this.data.datasets.length;c<h;c++){const{controller:d}=this.getDatasetMeta(c),p=!r&&s.indexOf(d)===-1;d.buildOrUpdateElements(p),o=Math.max(+d.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),r||ve(s,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Qw("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){ve(this.scales,e=>{Pt.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),i=new Set(e.events);(!lw(n,i)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:i,start:r,count:s}of n){const o=i==="_removeElements"?-s:s;W5(e,r,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,i=s=>new Set(e.filter(o=>o[0]===s).map((o,a)=>a+","+o.splice(1).join(","))),r=i(0);for(let s=1;s<n;s++)if(!lw(r,i(s)))return;return Array.from(r).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Pt.update(this,this.width,this.height,e);const n=this.chartArea,i=n.width<=0||n.height<=0;this._layers=[],ve(this.boxes,r=>{i&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,s)=>{r._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,i=this.data.datasets.length;n<i;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,i=this.data.datasets.length;n<i;++n)this._updateDataset(n,Sr(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const i=this.getDatasetMeta(e),r={meta:i,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(i.controller._update(n),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(ti.has(this)?this.attached&&!ti.running(this)&&ti.start(this):(this.draw(),Yw({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:i,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,i=[];let r,s;for(r=0,s=n.length;r<s;++r){const o=n[r];(!e||o.visible)&&i.push(o)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,i=e._clip,r=!i.disabled,s=K5(e,this.chartArea),o={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",o)!==!1&&(r&&Pd(n,{left:i.left===!1?0:s.left-i.left,right:i.right===!1?this.width:s.right+i.right,top:i.top===!1?0:s.top-i.top,bottom:i.bottom===!1?this.height:s.bottom+i.bottom}),e.controller.draw(),r&&Cd(n),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(e){return pi(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,i,r){const s=$V.modes[n];return typeof s=="function"?s(this,e,i,r):[]}getDatasetMeta(e){const n=this.data.datasets[e],i=this._metasets;let r=i.filter(s=>s&&s._dataset===n).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},i.push(r)),r}getContext(){return this.$context||(this.$context=Nr(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const i=this.getDatasetMeta(e);return typeof i.hidden=="boolean"?!i.hidden:!n.hidden}setDatasetVisibility(e,n){const i=this.getDatasetMeta(e);i.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,i){const r=i?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,r);kl(n)?(s.data[n].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),o.update(s,{visible:i}),this.update(a=>a.datasetIndex===e?r:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),ti.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),yw(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Du[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,i=(s,o)=>{n.addEventListener(this,s,o),e[s]=o},r=(s,o,a)=>{s.offsetX=o,s.offsetY=a,this._eventHandler(s)};ve(this.options.events,s=>i(s,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,i=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},r=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},s=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{r("attach",a),this.attached=!0,this.resize(),i("resize",s),i("detach",o)};o=()=>{this.attached=!1,r("resize",s),this._stop(),this._resize(0,0),i("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){ve(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},ve(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,i){const r=i?"set":"remove";let s,o,a,l;for(n==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+r+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],i=e.map(({datasetIndex:s,index:o})=>{const a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[o],index:o}});!kh(i,n)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,n))}notifyPlugins(e,n,i){return this._plugins.notify(this,e,n,i)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,i){const r=this.options.hover,s=(l,c)=>l.filter(h=>!c.some(d=>h.datasetIndex===d.datasetIndex&&h.index===d.index)),o=s(n,e),a=i?e:s(e,n);o.length&&this.updateHoverStyle(o,r.mode,!1),a.length&&r.mode&&this.updateHoverStyle(a,r.mode,!0)}_eventHandler(e,n){const i={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},r=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",i,r)===!1)return;const s=this._handleEvent(e,n,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,r),(s||i.changed)&&this.render(),this}_handleEvent(e,n,i){const{_active:r=[],options:s}=this,o=n,a=this._getActiveElements(e,r,i,o),l=ej(e),c=q5(e,this._lastEvent,i,l);i&&(this._lastEvent=null,Se(s.onHover,[e,a,this],this),l&&Se(s.onClick,[e,a,this],this));const h=!kh(a,r);return(h||n)&&(this._active=a,this._updateHoverStyles(a,r,n)),this._lastEvent=c,h}_getActiveElements(e,n,i,r){if(e.type==="mouseout")return[];if(!i)return n;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,r)}}W(oi,"defaults",Le),W(oi,"instances",Du),W(oi,"overrides",_s),W(oi,"registry",jn),W(oi,"version",B5),W(oi,"getChart",Xw);function Jw(){return ve(oi.instances,t=>t._plugins.invalidate())}function G5(t,e,n){const{startAngle:i,pixelMargin:r,x:s,y:o,outerRadius:a,innerRadius:l}=e;let c=r/a;t.beginPath(),t.arc(s,o,a,i-c,n+c),l>r?(c=r/l,t.arc(s,o,l,n+c,i-c,!0)):t.arc(s,o,r,n+Ye,i-Ye),t.closePath(),t.clip()}function Q5(t){return a_(t,["outerStart","outerEnd","innerStart","innerEnd"])}function Y5(t,e,n,i){const r=Q5(t.options.borderRadius),s=(n-e)/2,o=Math.min(s,i*e/2),a=l=>{const c=(n-Math.min(s,l))*i/2;return at(l,0,Math.min(s,c))};return{outerStart:a(r.outerStart),outerEnd:a(r.outerEnd),innerStart:at(r.innerStart,0,o),innerEnd:at(r.innerEnd,0,o)}}function Os(t,e,n,i){return{x:n+t*Math.cos(e),y:i+t*Math.sin(e)}}function Dh(t,e,n,i,r,s){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:h}=e,d=Math.max(e.outerRadius+i+n-c,0),p=h>0?h+i+n+c:0;let g=0;const y=r-l;if(i){const X=h>0?h-i:0,U=d>0?d-i:0,Y=(X+U)/2,V=Y!==0?y*Y/(Y+i):y;g=(y-V)/2}const x=Math.max(.001,y*d-n/Ne)/d,b=(y-x)/2,v=l+b+g,w=r-b-g,{outerStart:T,outerEnd:C,innerStart:N,innerEnd:M}=Y5(e,p,d,w-v),S=d-T,E=d-C,P=v+T/S,k=w-C/E,A=p+N,D=p+M,R=v+N/A,le=w-M/D;if(t.beginPath(),s){const X=(P+k)/2;if(t.arc(o,a,d,P,X),t.arc(o,a,d,X,k),C>0){const $=Os(E,k,o,a);t.arc($.x,$.y,C,k,w+Ye)}const U=Os(D,w,o,a);if(t.lineTo(U.x,U.y),M>0){const $=Os(D,le,o,a);t.arc($.x,$.y,M,w+Ye,le+Math.PI)}const Y=(w-M/p+(v+N/p))/2;if(t.arc(o,a,p,w-M/p,Y,!0),t.arc(o,a,p,Y,v+N/p,!0),N>0){const $=Os(A,R,o,a);t.arc($.x,$.y,N,R+Math.PI,v-Ye)}const V=Os(S,v,o,a);if(t.lineTo(V.x,V.y),T>0){const $=Os(S,P,o,a);t.arc($.x,$.y,T,v-Ye,P)}}else{t.moveTo(o,a);const X=Math.cos(P)*d+o,U=Math.sin(P)*d+a;t.lineTo(X,U);const Y=Math.cos(k)*d+o,V=Math.sin(k)*d+a;t.lineTo(Y,V)}t.closePath()}function X5(t,e,n,i,r){const{fullCircles:s,startAngle:o,circumference:a}=e;let l=e.endAngle;if(s){Dh(t,e,n,i,l,r);for(let c=0;c<s;++c)t.fill();isNaN(a)||(l=o+(a%Re||Re))}return Dh(t,e,n,i,l,r),t.fill(),l}function J5(t,e,n,i,r){const{fullCircles:s,startAngle:o,circumference:a,options:l}=e,{borderWidth:c,borderJoinStyle:h,borderDash:d,borderDashOffset:p}=l,g=l.borderAlign==="inner";if(!c)return;t.setLineDash(d||[]),t.lineDashOffset=p,g?(t.lineWidth=c*2,t.lineJoin=h||"round"):(t.lineWidth=c,t.lineJoin=h||"bevel");let y=e.endAngle;if(s){Dh(t,e,n,i,y,r);for(let x=0;x<s;++x)t.stroke();isNaN(a)||(y=o+(a%Re||Re))}g&&G5(t,e,y),s||(Dh(t,e,n,i,y,r),t.stroke())}class Sa extends Dn{constructor(n){super();W(this,"circumference");W(this,"endAngle");W(this,"fullCircles");W(this,"innerRadius");W(this,"outerRadius");W(this,"pixelMargin");W(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,i,r){const s=this.getProps(["x","y"],r),{angle:o,distance:a}=qS(s,{x:n,y:i}),{startAngle:l,endAngle:c,innerRadius:h,outerRadius:d,circumference:p}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],r),g=(this.options.spacing+this.options.borderWidth)/2,y=ie(p,c-l),x=Pl(o,l,c)&&l!==c,b=y>=Re||x,v=di(a,h+g,d+g);return b&&v}getCenterPoint(n){const{x:i,y:r,startAngle:s,endAngle:o,innerRadius:a,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:c,spacing:h}=this.options,d=(s+o)/2,p=(a+l+h+c)/2;return{x:i+Math.cos(d)*p,y:r+Math.sin(d)*p}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:i,circumference:r}=this,s=(i.offset||0)/4,o=(i.spacing||0)/2,a=i.circular;if(this.pixelMargin=i.borderAlign==="inner"?.33:0,this.fullCircles=r>Re?Math.floor(r/Re):0,r===0||this.innerRadius<0||this.outerRadius<0)return;n.save();const l=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(l)*s,Math.sin(l)*s);const c=1-Math.sin(Math.min(Ne,r||0)),h=s*c;n.fillStyle=i.backgroundColor,n.strokeStyle=i.borderColor,X5(n,this,h,o,a),J5(n,this,h,o,a),n.restore()}}W(Sa,"id","arc"),W(Sa,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),W(Sa,"defaultRoutes",{backgroundColor:"backgroundColor"}),W(Sa,"descriptors",{_scriptable:!0,_indexable:n=>n!=="borderDash"});function SI(t,e,n=e){t.lineCap=ie(n.borderCapStyle,e.borderCapStyle),t.setLineDash(ie(n.borderDash,e.borderDash)),t.lineDashOffset=ie(n.borderDashOffset,e.borderDashOffset),t.lineJoin=ie(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=ie(n.borderWidth,e.borderWidth),t.strokeStyle=ie(n.borderColor,e.borderColor)}function Z5(t,e,n){t.lineTo(n.x,n.y)}function e8(t){return t.stepped?bj:t.tension||t.cubicInterpolationMode==="monotone"?Tj:Z5}function II(t,e,n={}){const i=t.length,{start:r=0,end:s=i-1}=n,{start:o,end:a}=e,l=Math.max(r,o),c=Math.min(s,a),h=r<o&&s<o||r>a&&s>a;return{count:i,start:l,loop:e.loop,ilen:c<l&&!h?i+c-l:c-l}}function t8(t,e,n,i){const{points:r,options:s}=e,{count:o,start:a,loop:l,ilen:c}=II(r,n,i),h=e8(s);let{move:d=!0,reverse:p}=i||{},g,y,x;for(g=0;g<=c;++g)y=r[(a+(p?c-g:g))%o],!y.skip&&(d?(t.moveTo(y.x,y.y),d=!1):h(t,x,y,p,s.stepped),x=y);return l&&(y=r[(a+(p?c:0))%o],h(t,x,y,p,s.stepped)),!!l}function n8(t,e,n,i){const r=e.points,{count:s,start:o,ilen:a}=II(r,n,i),{move:l=!0,reverse:c}=i||{};let h=0,d=0,p,g,y,x,b,v;const w=C=>(o+(c?a-C:C))%s,T=()=>{x!==b&&(t.lineTo(h,b),t.lineTo(h,x),t.lineTo(h,v))};for(l&&(g=r[w(0)],t.moveTo(g.x,g.y)),p=0;p<=a;++p){if(g=r[w(p)],g.skip)continue;const C=g.x,N=g.y,M=C|0;M===y?(N<x?x=N:N>b&&(b=N),h=(d*h+C)/++d):(T(),t.lineTo(C,N),y=M,d=0,x=b=N),v=N}T()}function jm(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?n8:t8}function i8(t){return t.stepped?nV:t.tension||t.cubicInterpolationMode==="monotone"?iV:Wr}function r8(t,e,n,i){let r=e._path;r||(r=e._path=new Path2D,e.path(r,n,i)&&r.closePath()),SI(t,e.options),t.stroke(r)}function s8(t,e,n,i){const{segments:r,options:s}=e,o=jm(e);for(const a of r)SI(t,s,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+i-1})&&t.closePath(),t.stroke()}const o8=typeof Path2D=="function";function a8(t,e,n,i){o8&&!e.options.segment?r8(t,e,n,i):s8(t,e,n,i)}class tr extends Dn{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const r=i.spanGaps?this._loop:this._fullLoop;Gj(this._points,i,e,r,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=cV(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,i=e.length;return i&&n[e[i-1].end]}interpolate(e,n){const i=this.options,r=e[n],s=this.points,o=dI(this,{property:n,start:r,end:r});if(!o.length)return;const a=[],l=i8(i);let c,h;for(c=0,h=o.length;c<h;++c){const{start:d,end:p}=o[c],g=s[d],y=s[p];if(g===y){a.push(g);continue}const x=Math.abs((r-g[n])/(y[n]-g[n])),b=l(g,y,x,i.stepped);b[n]=e[n],a.push(b)}return a.length===1?a[0]:a}pathSegment(e,n,i){return jm(this)(e,this,n,i)}path(e,n,i){const r=this.segments,s=jm(this);let o=this._loop;n=n||0,i=i||this.points.length-n;for(const a of r)o&=s(e,this,a,{start:n,end:n+i-1});return!!o}draw(e,n,i,r){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),a8(e,this,i,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}W(tr,"id","line"),W(tr,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),W(tr,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),W(tr,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function Zw(t,e,n,i){const r=t.options,{[n]:s}=t.getProps([n],i);return Math.abs(e-s)<r.radius+r.hitRadius}class Mu extends Dn{constructor(n){super();W(this,"parsed");W(this,"skip");W(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,i,r){const s=this.options,{x:o,y:a}=this.getProps(["x","y"],r);return Math.pow(n-o,2)+Math.pow(i-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(n,i){return Zw(this,n,"x",i)}inYRange(n,i){return Zw(this,n,"y",i)}getCenterPoint(n){const{x:i,y:r}=this.getProps(["x","y"],n);return{x:i,y:r}}size(n){n=n||this.options||{};let i=n.radius||0;i=Math.max(i,i&&n.hoverRadius||0);const r=i&&n.borderWidth||0;return(i+r)*2}draw(n,i){const r=this.options;this.skip||r.radius<.1||!pi(this,i,this.size(r)/2)||(n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.fillStyle=r.backgroundColor,Dm(n,r,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}W(Mu,"id","point"),W(Mu,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),W(Mu,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function kI(t,e){const{x:n,y:i,base:r,width:s,height:o}=t.getProps(["x","y","base","width","height"],e);let a,l,c,h,d;return t.horizontal?(d=o/2,a=Math.min(n,r),l=Math.max(n,r),c=i-d,h=i+d):(d=s/2,a=n-d,l=n+d,c=Math.min(i,r),h=Math.max(i,r)),{left:a,top:c,right:l,bottom:h}}function nr(t,e,n,i){return t?0:at(e,n,i)}function l8(t,e,n){const i=t.options.borderWidth,r=t.borderSkipped,s=tI(i);return{t:nr(r.top,s.top,0,n),r:nr(r.right,s.right,0,e),b:nr(r.bottom,s.bottom,0,n),l:nr(r.left,s.left,0,e)}}function c8(t,e,n){const{enableBorderRadius:i}=t.getProps(["enableBorderRadius"]),r=t.options.borderRadius,s=ns(r),o=Math.min(e,n),a=t.borderSkipped,l=i||ue(r);return{topLeft:nr(!l||a.top||a.left,s.topLeft,0,o),topRight:nr(!l||a.top||a.right,s.topRight,0,o),bottomLeft:nr(!l||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:nr(!l||a.bottom||a.right,s.bottomRight,0,o)}}function u8(t){const e=kI(t),n=e.right-e.left,i=e.bottom-e.top,r=l8(t,n/2,i/2),s=c8(t,n/2,i/2);return{outer:{x:e.left,y:e.top,w:n,h:i,radius:s},inner:{x:e.left+r.l,y:e.top+r.t,w:n-r.l-r.r,h:i-r.t-r.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,s.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(r.b,r.r))}}}}function ep(t,e,n,i){const r=e===null,s=n===null,a=t&&!(r&&s)&&kI(t,i);return a&&(r||di(e,a.left,a.right))&&(s||di(n,a.top,a.bottom))}function h8(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function d8(t,e){t.rect(e.x,e.y,e.w,e.h)}function tp(t,e,n={}){const i=t.x!==n.x?-e:0,r=t.y!==n.y?-e:0,s=(t.x+t.w!==n.x+n.w?e:0)-i,o=(t.y+t.h!==n.y+n.h?e:0)-r;return{x:t.x+i,y:t.y+r,w:t.w+s,h:t.h+o,radius:t.radius}}class Ou extends Dn{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:i,backgroundColor:r}}=this,{inner:s,outer:o}=u8(this),a=h8(o.radius)?Cl:d8;e.save(),(o.w!==s.w||o.h!==s.h)&&(e.beginPath(),a(e,tp(o,n,s)),e.clip(),a(e,tp(s,-n,o)),e.fillStyle=i,e.fill("evenodd")),e.beginPath(),a(e,tp(s,n)),e.fillStyle=r,e.fill(),e.restore()}inRange(e,n,i){return ep(this,e,n,i)}inXRange(e,n){return ep(this,e,null,n)}inYRange(e,n){return ep(this,null,e,n)}getCenterPoint(e){const{x:n,y:i,base:r,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(n+r)/2:n,y:s?i:(i+r)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}W(Ou,"id","bar"),W(Ou,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),W(Ou,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var f8=Object.freeze({__proto__:null,ArcElement:Sa,BarElement:Ou,LineElement:tr,PointElement:Mu});const Vm=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],ex=Vm.map(t=>t.replace("rgb(","rgba(").replace(")",", 0.5)"));function PI(t){return Vm[t%Vm.length]}function CI(t){return ex[t%ex.length]}function p8(t,e){return t.borderColor=PI(e),t.backgroundColor=CI(e),++e}function m8(t,e){return t.backgroundColor=t.data.map(()=>PI(e++)),e}function g8(t,e){return t.backgroundColor=t.data.map(()=>CI(e++)),e}function y8(t){let e=0;return(n,i)=>{const r=t.getDatasetMeta(i).controller;r instanceof Xr?e=m8(n,e):r instanceof Ka?e=g8(n,e):r&&(e=p8(n,e))}}function tx(t){let e;for(e in t)if(t[e].borderColor||t[e].backgroundColor)return!0;return!1}function _8(t){return t&&(t.borderColor||t.backgroundColor)}function v8(){return Le.borderColor!=="rgba(0,0,0,0.1)"||Le.backgroundColor!=="rgba(0,0,0,0.1)"}var w8={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(t,e,n){if(!n.enabled)return;const{data:{datasets:i},options:r}=t.config,{elements:s}=r,o=tx(i)||_8(r)||s&&tx(s)||v8();if(!n.forceOverride&&o)return;const a=y8(t);i.forEach(a)}};function x8(t,e,n,i,r){const s=r.samples||i;if(s>=n)return t.slice(e,e+n);const o=[],a=(n-2)/(s-2);let l=0;const c=e+n-1;let h=e,d,p,g,y,x;for(o[l++]=t[h],d=0;d<s-2;d++){let b=0,v=0,w;const T=Math.floor((d+1)*a)+1+e,C=Math.min(Math.floor((d+2)*a)+1,n)+e,N=C-T;for(w=T;w<C;w++)b+=t[w].x,v+=t[w].y;b/=N,v/=N;const M=Math.floor(d*a)+1+e,S=Math.min(Math.floor((d+1)*a)+1,n)+e,{x:E,y:P}=t[h];for(g=y=-1,w=M;w<S;w++)y=.5*Math.abs((E-b)*(t[w].y-P)-(E-t[w].x)*(v-P)),y>g&&(g=y,p=t[w],x=w);o[l++]=p,h=x}return o[l++]=t[c],o}function E8(t,e,n,i){let r=0,s=0,o,a,l,c,h,d,p,g,y,x;const b=[],v=e+n-1,w=t[e].x,C=t[v].x-w;for(o=e;o<e+n;++o){a=t[o],l=(a.x-w)/C*i,c=a.y;const N=l|0;if(N===h)c<y?(y=c,d=o):c>x&&(x=c,p=o),r=(s*r+a.x)/++s;else{const M=o-1;if(!oe(d)&&!oe(p)){const S=Math.min(d,p),E=Math.max(d,p);S!==g&&S!==M&&b.push({...t[S],x:r}),E!==g&&E!==M&&b.push({...t[E],x:r})}o>0&&M!==g&&b.push(t[M]),b.push(a),h=N,s=0,y=x=c,d=p=g=o}}return b}function AI(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function nx(t){t.data.datasets.forEach(e=>{AI(e)})}function b8(t,e){const n=e.length;let i=0,r;const{iScale:s}=t,{min:o,max:a,minDefined:l,maxDefined:c}=s.getUserBounds();return l&&(i=at(fi(e,s.axis,o).lo,0,n-1)),c?r=at(fi(e,s.axis,a).hi+1,i,n)-i:r=n-i,{start:i,count:r}}var T8={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,n)=>{if(!n.enabled){nx(t);return}const i=t.width;t.data.datasets.forEach((r,s)=>{const{_data:o,indexAxis:a}=r,l=t.getDatasetMeta(s),c=o||r.data;if(ba([a,t.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;const h=t.scales[l.xAxisID];if(h.type!=="linear"&&h.type!=="time"||t.options.parsing)return;let{start:d,count:p}=b8(l,c);const g=n.threshold||4*i;if(p<=g){AI(r);return}oe(o)&&(r._data=c,delete r.data,Object.defineProperty(r,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(x){this._data=x}}));let y;switch(n.algorithm){case"lttb":y=x8(c,d,p,i,n);break;case"min-max":y=E8(c,d,p,i);break;default:throw new Error(`Unsupported decimation algorithm '${n.algorithm}'`)}r._decimated=y})},destroy(t){nx(t)}};function S8(t,e,n){const i=t.segments,r=t.points,s=e.points,o=[];for(const a of i){let{start:l,end:c}=a;c=p_(l,c,r);const h=Fm(n,r[l],r[c],a.loop);if(!e.segments){o.push({source:a,target:h,start:r[l],end:r[c]});continue}const d=dI(e,h);for(const p of d){const g=Fm(n,s[p.start],s[p.end],p.loop),y=hI(a,r,g);for(const x of y)o.push({source:x,target:p,start:{[n]:ix(h,g,"start",Math.max)},end:{[n]:ix(h,g,"end",Math.min)}})}}return o}function Fm(t,e,n,i){if(i)return;let r=e[t],s=n[t];return t==="angle"&&(r=en(r),s=en(s)),{property:t,start:r,end:s}}function I8(t,e){const{x:n=null,y:i=null}=t||{},r=e.points,s=[];return e.segments.forEach(({start:o,end:a})=>{a=p_(o,a,r);const l=r[o],c=r[a];i!==null?(s.push({x:l.x,y:i}),s.push({x:c.x,y:i})):n!==null&&(s.push({x:n,y:l.y}),s.push({x:n,y:c.y}))}),s}function p_(t,e,n){for(;e>t;e--){const i=n[e];if(!isNaN(i.x)&&!isNaN(i.y))break}return e}function ix(t,e,n,i){return t&&e?i(t[n],e[n]):t?t[n]:e?e[n]:0}function RI(t,e){let n=[],i=!1;return Oe(t)?(i=!0,n=t):n=I8(t,e),n.length?new tr({points:n,options:{tension:0},_loop:i,_fullLoop:i}):null}function rx(t){return t&&t.fill!==!1}function k8(t,e,n){let r=t[e].fill;const s=[e];let o;if(!n)return r;for(;r!==!1&&s.indexOf(r)===-1;){if(!We(r))return r;if(o=t[r],!o)return!1;if(o.visible)return r;s.push(r),r=o.fill}return!1}function P8(t,e,n){const i=N8(t);if(ue(i))return isNaN(i.value)?!1:i;let r=parseFloat(i);return We(r)&&Math.floor(r)===r?C8(i[0],e,r,n):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function C8(t,e,n,i){return(t==="-"||t==="+")&&(n=e+n),n===e||n<0||n>=i?!1:n}function A8(t,e){let n=null;return t==="start"?n=e.bottom:t==="end"?n=e.top:ue(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}function R8(t,e,n){let i;return t==="start"?i=n:t==="end"?i=e.options.reverse?e.min:e.max:ue(t)?i=t.value:i=e.getBaseValue(),i}function N8(t){const e=t.options,n=e.fill;let i=ie(n&&n.target,n);return i===void 0&&(i=!!e.backgroundColor),i===!1||i===null?!1:i===!0?"origin":i}function D8(t){const{scale:e,index:n,line:i}=t,r=[],s=i.segments,o=i.points,a=M8(e,n);a.push(RI({x:null,y:e.bottom},i));for(let l=0;l<s.length;l++){const c=s[l];for(let h=c.start;h<=c.end;h++)O8(r,o[h],a)}return new tr({points:r,options:{}})}function M8(t,e){const n=[],i=t.getMatchingVisibleMetas("line");for(let r=0;r<i.length;r++){const s=i[r];if(s.index===e)break;s.hidden||n.unshift(s.dataset)}return n}function O8(t,e,n){const i=[];for(let r=0;r<n.length;r++){const s=n[r],{first:o,last:a,point:l}=L8(s,e,"x");if(!(!l||o&&a)){if(o)i.unshift(l);else if(t.push(l),!a)break}}t.push(...i)}function L8(t,e,n){const i=t.interpolate(e,n);if(!i)return{};const r=i[n],s=t.segments,o=t.points;let a=!1,l=!1;for(let c=0;c<s.length;c++){const h=s[c],d=o[h.start][n],p=o[h.end][n];if(di(r,d,p)){a=r===d,l=r===p;break}}return{first:a,last:l,point:i}}class NI{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,n,i){const{x:r,y:s,radius:o}=this;return n=n||{start:0,end:Re},e.arc(r,s,o,n.end,n.start,!0),!i.bounds}interpolate(e){const{x:n,y:i,radius:r}=this,s=e.angle;return{x:n+Math.cos(s)*r,y:i+Math.sin(s)*r,angle:s}}}function j8(t){const{chart:e,fill:n,line:i}=t;if(We(n))return V8(e,n);if(n==="stack")return D8(t);if(n==="shape")return!0;const r=F8(t);return r instanceof NI?r:RI(r,i)}function V8(t,e){const n=t.getDatasetMeta(e);return n&&t.isDatasetVisible(e)?n.dataset:null}function F8(t){return(t.scale||{}).getPointPositionForValue?z8(t):U8(t)}function U8(t){const{scale:e={},fill:n}=t,i=A8(n,e);if(We(i)){const r=e.isHorizontal();return{x:r?i:null,y:r?null:i}}return null}function z8(t){const{scale:e,fill:n}=t,i=e.options,r=e.getLabels().length,s=i.reverse?e.max:e.min,o=R8(n,e,s),a=[];if(i.grid.circular){const l=e.getPointPositionForValue(0,s);return new NI({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(o)})}for(let l=0;l<r;++l)a.push(e.getPointPositionForValue(l,o));return a}function np(t,e,n){const i=j8(e),{line:r,scale:s,axis:o}=e,a=r.options,l=a.fill,c=a.backgroundColor,{above:h=c,below:d=c}=l||{};i&&r.points.length&&(Pd(t,n),B8(t,{line:r,target:i,above:h,below:d,area:n,scale:s,axis:o}),Cd(t))}function B8(t,e){const{line:n,target:i,above:r,below:s,area:o,scale:a}=e,l=n._loop?"angle":e.axis;t.save(),l==="x"&&s!==r&&(sx(t,i,o.top),ox(t,{line:n,target:i,color:r,scale:a,property:l}),t.restore(),t.save(),sx(t,i,o.bottom)),ox(t,{line:n,target:i,color:s,scale:a,property:l}),t.restore()}function sx(t,e,n){const{segments:i,points:r}=e;let s=!0,o=!1;t.beginPath();for(const a of i){const{start:l,end:c}=a,h=r[l],d=r[p_(l,c,r)];s?(t.moveTo(h.x,h.y),s=!1):(t.lineTo(h.x,n),t.lineTo(h.x,h.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(d.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function ox(t,e){const{line:n,target:i,property:r,color:s,scale:o}=e,a=S8(n,i,r);for(const{source:l,target:c,start:h,end:d}of a){const{style:{backgroundColor:p=s}={}}=l,g=i!==!0;t.save(),t.fillStyle=p,$8(t,o,g&&Fm(r,h,d)),t.beginPath();const y=!!n.pathSegment(t,l);let x;if(g){y?t.closePath():ax(t,i,d,r);const b=!!i.pathSegment(t,c,{move:y,reverse:!0});x=y&&b,x||ax(t,i,h,r)}t.closePath(),t.fill(x?"evenodd":"nonzero"),t.restore()}}function $8(t,e,n){const{top:i,bottom:r}=e.chart.chartArea,{property:s,start:o,end:a}=n||{};s==="x"&&(t.beginPath(),t.rect(o,i,a-o,r-i),t.clip())}function ax(t,e,n,i){const r=e.interpolate(n,i);r&&t.lineTo(r.x,r.y)}var H8={id:"filler",afterDatasetsUpdate(t,e,n){const i=(t.data.datasets||[]).length,r=[];let s,o,a,l;for(o=0;o<i;++o)s=t.getDatasetMeta(o),a=s.dataset,l=null,a&&a.options&&a instanceof tr&&(l={visible:t.isDatasetVisible(o),index:o,fill:P8(a,o,i),chart:t,axis:s.controller.options.indexAxis,scale:s.vScale,line:a}),s.$filler=l,r.push(l);for(o=0;o<i;++o)l=r[o],!(!l||l.fill===!1)&&(l.fill=k8(r,o,n.propagate))},beforeDraw(t,e,n){const i=n.drawTime==="beforeDraw",r=t.getSortedVisibleDatasetMetas(),s=t.chartArea;for(let o=r.length-1;o>=0;--o){const a=r[o].$filler;a&&(a.line.updateControlPoints(s,a.axis),i&&a.fill&&np(t.ctx,a,s))}},beforeDatasetsDraw(t,e,n){if(n.drawTime!=="beforeDatasetsDraw")return;const i=t.getSortedVisibleDatasetMetas();for(let r=i.length-1;r>=0;--r){const s=i[r].$filler;rx(s)&&np(t.ctx,s,t.chartArea)}},beforeDatasetDraw(t,e,n){const i=e.meta.$filler;!rx(i)||n.drawTime!=="beforeDatasetDraw"||np(t.ctx,i,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const lx=(t,e)=>{let{boxHeight:n=e,boxWidth:i=e}=t;return t.usePointStyle&&(n=Math.min(n,e),i=t.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(e,n)}},W8=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class cx extends Dn{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,i){this.maxWidth=e,this.maxHeight=n,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=Se(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(i=>e.filter(i,this.chart.data))),e.sort&&(n=n.sort((i,r)=>e.sort(i,r,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const i=e.labels,r=it(i.font),s=r.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=lx(i,s);let c,h;n.font=r.string,this.isHorizontal()?(c=this.maxWidth,h=this._fitRows(o,s,a,l)+10):(h=this.maxHeight,c=this._fitCols(o,r,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(h,e.maxHeight||this.maxHeight)}_fitRows(e,n,i,r){const{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],h=r+a;let d=e;s.textAlign="left",s.textBaseline="middle";let p=-1,g=-h;return this.legendItems.forEach((y,x)=>{const b=i+n/2+s.measureText(y.text).width;(x===0||c[c.length-1]+b+2*a>o)&&(d+=h,c[c.length-(x>0?0:1)]=0,g+=h,p++),l[x]={left:0,top:g,row:p,width:b,height:r},c[c.length-1]+=b+a}),d}_fitCols(e,n,i,r){const{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],h=o-e;let d=a,p=0,g=0,y=0,x=0;return this.legendItems.forEach((b,v)=>{const{itemWidth:w,itemHeight:T}=q8(i,n,s,b,r);v>0&&g+T+2*a>h&&(d+=p+a,c.push({width:p,height:g}),y+=p+a,x++,p=g=0),l[v]={left:y,top:g,col:x,width:w,height:T},p=Math.max(p,w),g+=T+a}),d+=p,c.push({width:p,height:g}),d}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:i,labels:{padding:r},rtl:s}}=this,o=lo(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=Tt(i,this.left+r,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=Tt(i,this.left+r,this.right-this.lineWidths[a])),c.top+=this.top+e+r,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+r}else{let a=0,l=Tt(i,this.top+e+r,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=Tt(i,this.top+e+r,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+r,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Pd(e,this),this._draw(),Cd(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:i,ctx:r}=this,{align:s,labels:o}=e,a=Le.color,l=lo(e.rtl,this.left,this.width),c=it(o.font),{padding:h}=o,d=c.size,p=d/2;let g;this.drawTitle(),r.textAlign=l.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=c.string;const{boxWidth:y,boxHeight:x,itemHeight:b}=lx(o,d),v=function(M,S,E){if(isNaN(y)||y<=0||isNaN(x)||x<0)return;r.save();const P=ie(E.lineWidth,1);if(r.fillStyle=ie(E.fillStyle,a),r.lineCap=ie(E.lineCap,"butt"),r.lineDashOffset=ie(E.lineDashOffset,0),r.lineJoin=ie(E.lineJoin,"miter"),r.lineWidth=P,r.strokeStyle=ie(E.strokeStyle,a),r.setLineDash(ie(E.lineDash,[])),o.usePointStyle){const k={radius:x*Math.SQRT2/2,pointStyle:E.pointStyle,rotation:E.rotation,borderWidth:P},A=l.xPlus(M,y/2),D=S+p;eI(r,k,A,D,o.pointStyleWidth&&y)}else{const k=S+Math.max((d-x)/2,0),A=l.leftForLtr(M,y),D=ns(E.borderRadius);r.beginPath(),Object.values(D).some(R=>R!==0)?Cl(r,{x:A,y:k,w:y,h:x,radius:D}):r.rect(A,k,y,x),r.fill(),P!==0&&r.stroke()}r.restore()},w=function(M,S,E){vs(r,E.text,M,S+b/2,c,{strikethrough:E.hidden,textAlign:l.textAlign(E.textAlign)})},T=this.isHorizontal(),C=this._computeTitleHeight();T?g={x:Tt(s,this.left+h,this.right-i[0]),y:this.top+h+C,line:0}:g={x:this.left+h,y:Tt(s,this.top+C+h,this.bottom-n[0].height),line:0},lI(this.ctx,e.textDirection);const N=b+h;this.legendItems.forEach((M,S)=>{r.strokeStyle=M.fontColor,r.fillStyle=M.fontColor;const E=r.measureText(M.text).width,P=l.textAlign(M.textAlign||(M.textAlign=o.textAlign)),k=y+p+E;let A=g.x,D=g.y;l.setWidth(this.width),T?S>0&&A+k+h>this.right&&(D=g.y+=N,g.line++,A=g.x=Tt(s,this.left+h,this.right-i[g.line])):S>0&&D+N>this.bottom&&(A=g.x=A+n[g.line].width+h,g.line++,D=g.y=Tt(s,this.top+C+h,this.bottom-n[g.line].height));const R=l.x(A);if(v(R,D,M),A=dj(P,A+y+p,T?A+k:this.right,e.rtl),w(l.x(A),D,M),T)g.x+=k+h;else if(typeof M.text!="string"){const le=c.lineHeight;g.y+=DI(M,le)+h}else g.y+=N}),cI(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,i=it(n.font),r=Nt(n.padding);if(!n.display)return;const s=lo(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=i.size/2,c=r.top+l;let h,d=this.left,p=this.width;if(this.isHorizontal())p=Math.max(...this.lineWidths),h=this.top+c,d=Tt(e.align,d,this.right-p);else{const y=this.columnSizes.reduce((x,b)=>Math.max(x,b.height),0);h=c+Tt(e.align,this.top,this.bottom-y-e.labels.padding-this._computeTitleHeight())}const g=Tt(a,d,d+p);o.textAlign=s.textAlign(s_(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=i.string,vs(o,n.text,g,h,i)}_computeTitleHeight(){const e=this.options.title,n=it(e.font),i=Nt(e.padding);return e.display?n.lineHeight+i.height:0}_getLegendItemAt(e,n){let i,r,s;if(di(e,this.left,this.right)&&di(n,this.top,this.bottom)){for(s=this.legendHitBoxes,i=0;i<s.length;++i)if(r=s[i],di(e,r.left,r.left+r.width)&&di(n,r.top,r.top+r.height))return this.legendItems[i]}return null}handleEvent(e){const n=this.options;if(!Q8(e.type,n))return;const i=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const r=this._hoveredItem,s=W8(r,i);r&&!s&&Se(n.onLeave,[e,r,this],this),this._hoveredItem=i,i&&!s&&Se(n.onHover,[e,i,this],this)}else i&&Se(n.onClick,[e,i,this],this)}}function q8(t,e,n,i,r){const s=K8(i,t,e,n),o=G8(r,i,e.lineHeight);return{itemWidth:s,itemHeight:o}}function K8(t,e,n,i){let r=t.text;return r&&typeof r!="string"&&(r=r.reduce((s,o)=>s.length>o.length?s:o)),e+n.size/2+i.measureText(r).width}function G8(t,e,n){let i=t;return typeof e.text!="string"&&(i=DI(e,n)),i}function DI(t,e){const n=t.text?t.text.length:0;return e*n}function Q8(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var Y8={id:"legend",_element:cx,start(t,e,n){const i=t.legend=new cx({ctx:t.ctx,options:n,chart:t});Pt.configure(t,i,n),Pt.addBox(t,i)},stop(t){Pt.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const i=t.legend;Pt.configure(t,i,n),i.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const i=e.datasetIndex,r=n.chart;r.isDatasetVisible(i)?(r.hide(i),e.hidden=!0):(r.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:r,color:s,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),h=Nt(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:c.borderColor,pointStyle:i||c.pointStyle,rotation:c.rotation,textAlign:r||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class m_ extends Dn{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const r=Oe(i.text)?i.text.length:1;this._padding=Nt(i.padding);const s=r*it(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:i,bottom:r,right:s,options:o}=this,a=o.align;let l=0,c,h,d;return this.isHorizontal()?(h=Tt(a,i,s),d=n+e,c=s-i):(o.position==="left"?(h=i+e,d=Tt(a,r,n),l=Ne*-.5):(h=s-e,d=Tt(a,n,r),l=Ne*.5),c=r-n),{titleX:h,titleY:d,maxWidth:c,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const i=it(n.font),s=i.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(s);vs(e,n.text,0,0,i,{color:n.color,maxWidth:l,rotation:c,textAlign:s_(n.align),textBaseline:"middle",translation:[o,a]})}}function X8(t,e){const n=new m_({ctx:t.ctx,options:e,chart:t});Pt.configure(t,n,e),Pt.addBox(t,n),t.titleBlock=n}var J8={id:"title",_element:m_,start(t,e,n){X8(t,n)},stop(t){const e=t.titleBlock;Pt.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const i=t.titleBlock;Pt.configure(t,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const eu=new WeakMap;var Z8={id:"subtitle",start(t,e,n){const i=new m_({ctx:t.ctx,options:n,chart:t});Pt.configure(t,i,n),Pt.addBox(t,i),eu.set(t,i)},stop(t){Pt.removeBox(t,eu.get(t)),eu.delete(t)},beforeUpdate(t,e,n){const i=eu.get(t);Pt.configure(t,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Ia={average(t){if(!t.length)return!1;let e,n,i=new Set,r=0,s=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();i.add(l.x),r+=l.y,++s}}return s===0||i.size===0?!1:{x:[...i].reduce((a,l)=>a+l)/i.size,y:r/s}},nearest(t,e){if(!t.length)return!1;let n=e.x,i=e.y,r=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=t.length;s<o;++s){const l=t[s].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),h=Rm(e,c);h<r&&(r=h,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,i=l.y}return{x:n,y:i}}};function On(t,e){return e&&(Oe(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function ni(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function eF(t,e){const{element:n,datasetIndex:i,index:r}=e,s=t.getDatasetMeta(i).controller,{label:o,value:a}=s.getLabelAndValue(r);return{chart:t,label:o,parsed:s.getParsed(r),raw:t.data.datasets[i].data[r],formattedValue:a,dataset:s.getDataset(),dataIndex:r,datasetIndex:i,element:n}}function ux(t,e){const n=t.chart.ctx,{body:i,footer:r,title:s}=t,{boxWidth:o,boxHeight:a}=e,l=it(e.bodyFont),c=it(e.titleFont),h=it(e.footerFont),d=s.length,p=r.length,g=i.length,y=Nt(e.padding);let x=y.height,b=0,v=i.reduce((C,N)=>C+N.before.length+N.lines.length+N.after.length,0);if(v+=t.beforeBody.length+t.afterBody.length,d&&(x+=d*c.lineHeight+(d-1)*e.titleSpacing+e.titleMarginBottom),v){const C=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;x+=g*C+(v-g)*l.lineHeight+(v-1)*e.bodySpacing}p&&(x+=e.footerMarginTop+p*h.lineHeight+(p-1)*e.footerSpacing);let w=0;const T=function(C){b=Math.max(b,n.measureText(C).width+w)};return n.save(),n.font=c.string,ve(t.title,T),n.font=l.string,ve(t.beforeBody.concat(t.afterBody),T),w=e.displayColors?o+2+e.boxPadding:0,ve(i,C=>{ve(C.before,T),ve(C.lines,T),ve(C.after,T)}),w=0,n.font=h.string,ve(t.footer,T),n.restore(),b+=y.width,{width:b,height:x}}function tF(t,e){const{y:n,height:i}=e;return n<i/2?"top":n>t.height-i/2?"bottom":"center"}function nF(t,e,n,i){const{x:r,width:s}=i,o=n.caretSize+n.caretPadding;if(t==="left"&&r+s+o>e.width||t==="right"&&r-s-o<0)return!0}function iF(t,e,n,i){const{x:r,width:s}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return i==="center"?c=r<=(a+l)/2?"left":"right":r<=s/2?c="left":r>=o-s/2&&(c="right"),nF(c,t,e,n)&&(c="center"),c}function hx(t,e,n){const i=n.yAlign||e.yAlign||tF(t,n);return{xAlign:n.xAlign||e.xAlign||iF(t,e,n,i),yAlign:i}}function rF(t,e){let{x:n,width:i}=t;return e==="right"?n-=i:e==="center"&&(n-=i/2),n}function sF(t,e,n){let{y:i,height:r}=t;return e==="top"?i+=n:e==="bottom"?i-=r+n:i-=r/2,i}function dx(t,e,n,i){const{caretSize:r,caretPadding:s,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=r+s,{topLeft:h,topRight:d,bottomLeft:p,bottomRight:g}=ns(o);let y=rF(e,a);const x=sF(e,l,c);return l==="center"?a==="left"?y+=c:a==="right"&&(y-=c):a==="left"?y-=Math.max(h,p)+r:a==="right"&&(y+=Math.max(d,g)+r),{x:at(y,0,i.width-e.width),y:at(x,0,i.height-e.height)}}function tu(t,e,n){const i=Nt(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-i.right:t.x+i.left}function fx(t){return On([],ni(t))}function oF(t,e,n){return Nr(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function px(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const MI={beforeTitle:ei,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,i=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return n[e.dataIndex]}return""},afterTitle:ei,beforeBody:ei,beforeLabel:ei,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return oe(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:ei,afterBody:ei,beforeFooter:ei,footer:ei,afterFooter:ei};function Bt(t,e,n,i){const r=t[e].call(n,i);return typeof r>"u"?MI[e].call(n,i):r}class Um extends Dn{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,i=this.options.setContext(this.getContext()),r=i.enabled&&n.options.animation&&i.animations,s=new fI(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=oF(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:i}=n,r=Bt(i,"beforeTitle",this,e),s=Bt(i,"title",this,e),o=Bt(i,"afterTitle",this,e);let a=[];return a=On(a,ni(r)),a=On(a,ni(s)),a=On(a,ni(o)),a}getBeforeBody(e,n){return fx(Bt(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:i}=n,r=[];return ve(e,s=>{const o={before:[],lines:[],after:[]},a=px(i,s);On(o.before,ni(Bt(a,"beforeLabel",this,s))),On(o.lines,Bt(a,"label",this,s)),On(o.after,ni(Bt(a,"afterLabel",this,s))),r.push(o)}),r}getAfterBody(e,n){return fx(Bt(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:i}=n,r=Bt(i,"beforeFooter",this,e),s=Bt(i,"footer",this,e),o=Bt(i,"afterFooter",this,e);let a=[];return a=On(a,ni(r)),a=On(a,ni(s)),a=On(a,ni(o)),a}_createItems(e){const n=this._active,i=this.chart.data,r=[],s=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(eF(this.chart,n[l]));return e.filter&&(a=a.filter((h,d,p)=>e.filter(h,d,p,i))),e.itemSort&&(a=a.sort((h,d)=>e.itemSort(h,d,i))),ve(a,h=>{const d=px(e.callbacks,h);r.push(Bt(d,"labelColor",this,h)),s.push(Bt(d,"labelPointStyle",this,h)),o.push(Bt(d,"labelTextColor",this,h))}),this.labelColors=r,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const i=this.options.setContext(this.getContext()),r=this._active;let s,o=[];if(!r.length)this.opacity!==0&&(s={opacity:0});else{const a=Ia[i.position].call(this,r,this._eventPosition);o=this._createItems(i),this.title=this.getTitle(o,i),this.beforeBody=this.getBeforeBody(o,i),this.body=this.getBody(o,i),this.afterBody=this.getAfterBody(o,i),this.footer=this.getFooter(o,i);const l=this._size=ux(this,i),c=Object.assign({},a,l),h=hx(this.chart,i,c),d=dx(i,c,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,s={opacity:1,x:d.x,y:d.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,i,r){const s=this.getCaretPosition(e,i,r);n.lineTo(s.x1,s.y1),n.lineTo(s.x2,s.y2),n.lineTo(s.x3,s.y3)}getCaretPosition(e,n,i){const{xAlign:r,yAlign:s}=this,{caretSize:o,cornerRadius:a}=i,{topLeft:l,topRight:c,bottomLeft:h,bottomRight:d}=ns(a),{x:p,y:g}=e,{width:y,height:x}=n;let b,v,w,T,C,N;return s==="center"?(C=g+x/2,r==="left"?(b=p,v=b-o,T=C+o,N=C-o):(b=p+y,v=b+o,T=C-o,N=C+o),w=b):(r==="left"?v=p+Math.max(l,h)+o:r==="right"?v=p+y-Math.max(c,d)-o:v=this.caretX,s==="top"?(T=g,C=T-o,b=v-o,w=v+o):(T=g+x,C=T+o,b=v+o,w=v-o),N=T),{x1:b,x2:v,x3:w,y1:T,y2:C,y3:N}}drawTitle(e,n,i){const r=this.title,s=r.length;let o,a,l;if(s){const c=lo(i.rtl,this.x,this.width);for(e.x=tu(this,i.titleAlign,i),n.textAlign=c.textAlign(i.titleAlign),n.textBaseline="middle",o=it(i.titleFont),a=i.titleSpacing,n.fillStyle=i.titleColor,n.font=o.string,l=0;l<s;++l)n.fillText(r[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===s&&(e.y+=i.titleMarginBottom-a)}}_drawColorBox(e,n,i,r,s){const o=this.labelColors[i],a=this.labelPointStyles[i],{boxHeight:l,boxWidth:c}=s,h=it(s.bodyFont),d=tu(this,"left",s),p=r.x(d),g=l<h.lineHeight?(h.lineHeight-l)/2:0,y=n.y+g;if(s.usePointStyle){const x={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},b=r.leftForLtr(p,c)+c/2,v=y+l/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,Dm(e,x,b,v),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,Dm(e,x,b,v)}else{e.lineWidth=ue(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const x=r.leftForLtr(p,c),b=r.leftForLtr(r.xPlus(p,1),c-2),v=ns(o.borderRadius);Object.values(v).some(w=>w!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,Cl(e,{x,y,w:c,h:l,radius:v}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),Cl(e,{x:b,y:y+1,w:c-2,h:l-2,radius:v}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(x,y,c,l),e.strokeRect(x,y,c,l),e.fillStyle=o.backgroundColor,e.fillRect(b,y+1,c-2,l-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,n,i){const{body:r}=this,{bodySpacing:s,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:h}=i,d=it(i.bodyFont);let p=d.lineHeight,g=0;const y=lo(i.rtl,this.x,this.width),x=function(E){n.fillText(E,y.x(e.x+g),e.y+p/2),e.y+=p+s},b=y.textAlign(o);let v,w,T,C,N,M,S;for(n.textAlign=o,n.textBaseline="middle",n.font=d.string,e.x=tu(this,b,i),n.fillStyle=i.bodyColor,ve(this.beforeBody,x),g=a&&b!=="right"?o==="center"?c/2+h:c+2+h:0,C=0,M=r.length;C<M;++C){for(v=r[C],w=this.labelTextColors[C],n.fillStyle=w,ve(v.before,x),T=v.lines,a&&T.length&&(this._drawColorBox(n,e,C,y,i),p=Math.max(d.lineHeight,l)),N=0,S=T.length;N<S;++N)x(T[N]),p=d.lineHeight;ve(v.after,x)}g=0,p=d.lineHeight,ve(this.afterBody,x),e.y-=s}drawFooter(e,n,i){const r=this.footer,s=r.length;let o,a;if(s){const l=lo(i.rtl,this.x,this.width);for(e.x=tu(this,i.footerAlign,i),e.y+=i.footerMarginTop,n.textAlign=l.textAlign(i.footerAlign),n.textBaseline="middle",o=it(i.footerFont),n.fillStyle=i.footerColor,n.font=o.string,a=0;a<s;++a)n.fillText(r[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+i.footerSpacing}}drawBackground(e,n,i,r){const{xAlign:s,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:h}=i,{topLeft:d,topRight:p,bottomLeft:g,bottomRight:y}=ns(r.cornerRadius);n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.beginPath(),n.moveTo(a+d,l),o==="top"&&this.drawCaret(e,n,i,r),n.lineTo(a+c-p,l),n.quadraticCurveTo(a+c,l,a+c,l+p),o==="center"&&s==="right"&&this.drawCaret(e,n,i,r),n.lineTo(a+c,l+h-y),n.quadraticCurveTo(a+c,l+h,a+c-y,l+h),o==="bottom"&&this.drawCaret(e,n,i,r),n.lineTo(a+g,l+h),n.quadraticCurveTo(a,l+h,a,l+h-g),o==="center"&&s==="left"&&this.drawCaret(e,n,i,r),n.lineTo(a,l+d),n.quadraticCurveTo(a,l,a+d,l),n.closePath(),n.fill(),r.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,i=this.$animations,r=i&&i.x,s=i&&i.y;if(r||s){const o=Ia[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=ux(this,e),l=Object.assign({},o,this._size),c=hx(n,e,l),h=dx(e,l,c,n);(r._to!==h.x||s._to!==h.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(n);const r={width:this.width,height:this.height},s={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const o=Nt(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=i,this.drawBackground(s,e,r,n),lI(e,n.textDirection),s.y+=o.top,this.drawTitle(s,e,n),this.drawBody(s,e,n),this.drawFooter(s,e,n),cI(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const i=this._active,r=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),s=!kh(i,r),o=this._positionChanged(r,n);(s||o)&&(this._active=r,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,i=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,s=this._active||[],o=this._getActiveElements(e,s,n,i),a=this._positionChanged(o,e),l=n||!kh(o,s)||a;return l&&(this._active=o,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,i,r){const s=this.options;if(e.type==="mouseout")return[];if(!r)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,s.mode,s,i);return s.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:i,caretY:r,options:s}=this,o=Ia[s.position].call(this,e,n);return o!==!1&&(i!==o.x||r!==o.y)}}W(Um,"positioners",Ia);var aF={id:"tooltip",_element:Um,positioners:Ia,afterInit(t,e,n){n&&(t.tooltip=new Um({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:MI},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},lF=Object.freeze({__proto__:null,Colors:w8,Decimation:T8,Filler:H8,Legend:Y8,SubTitle:Z8,Title:J8,Tooltip:aF});const cF=(t,e,n,i)=>(typeof e=="string"?(n=t.push(e)-1,i.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function uF(t,e,n,i){const r=t.indexOf(e);if(r===-1)return cF(t,e,n,i);const s=t.lastIndexOf(e);return r!==s?n:r}const hF=(t,e)=>t===null?null:at(Math.round(t),0,e);function mx(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class zm extends ks{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const i=this.getLabels();for(const{index:r,label:s}of n)i[r]===s&&i.splice(r,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(oe(e))return null;const i=this.getLabels();return n=isFinite(n)&&i[n]===e?n:uF(i,e,ie(n,e),this._addedLabels),hF(n,i.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:i,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(i=0),n||(r=this.getLabels().length-1)),this.min=i,this.max=r}buildTicks(){const e=this.min,n=this.max,i=this.options.offset,r=[];let s=this.getLabels();s=e===0&&n===s.length-1?s:s.slice(e,n+1),this._valueRange=Math.max(s.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let o=e;o<=n;o++)r.push({value:o});return r}getLabelForValue(e){return mx.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}W(zm,"id","category"),W(zm,"defaults",{ticks:{callback:mx}});function dF(t,e){const n=[],{bounds:r,step:s,min:o,max:a,precision:l,count:c,maxTicks:h,maxDigits:d,includeBounds:p}=t,g=s||1,y=h-1,{min:x,max:b}=e,v=!oe(o),w=!oe(a),T=!oe(c),C=(b-x)/(d+1);let N=uw((b-x)/y/g)*g,M,S,E,P;if(N<1e-14&&!v&&!w)return[{value:x},{value:b}];P=Math.ceil(b/N)-Math.floor(x/N),P>y&&(N=uw(P*N/y/g)*g),oe(l)||(M=Math.pow(10,l),N=Math.ceil(N*M)/M),r==="ticks"?(S=Math.floor(x/N)*N,E=Math.ceil(b/N)*N):(S=x,E=b),v&&w&&s&&sj((a-o)/s,N/1e3)?(P=Math.round(Math.min((a-o)/N,h)),N=(a-o)/P,S=o,E=a):T?(S=v?o:S,E=w?a:E,P=c-1,N=(E-S)/P):(P=(E-S)/N,Ha(P,Math.round(P),N/1e3)?P=Math.round(P):P=Math.ceil(P));const k=Math.max(hw(N),hw(S));M=Math.pow(10,oe(l)?k:l),S=Math.round(S*M)/M,E=Math.round(E*M)/M;let A=0;for(v&&(p&&S!==o?(n.push({value:o}),S<o&&A++,Ha(Math.round((S+A*N)*M)/M,o,gx(o,C,t))&&A++):S<o&&A++);A<P;++A){const D=Math.round((S+A*N)*M)/M;if(w&&D>a)break;n.push({value:D})}return w&&p&&E!==a?n.length&&Ha(n[n.length-1].value,a,gx(a,C,t))?n[n.length-1].value=a:n.push({value:a}):(!w||E===a)&&n.push({value:E}),n}function gx(t,e,{horizontal:n,minRotation:i}){const r=In(i),s=(n?Math.sin(r):Math.cos(r))||.001,o=.75*e*(""+t).length;return Math.min(e/s,o)}class Mh extends ks{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return oe(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:i}=this.getUserBounds();let{min:r,max:s}=this;const o=l=>r=n?r:l,a=l=>s=i?s:l;if(e){const l=Gn(r),c=Gn(s);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(r===s){let l=s===0?1:Math.abs(s*.05);a(s+l),e||o(r-l)}this.min=r,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:i}=e,r;return i?(r=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),n=n||11),n&&(r=Math.min(n,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const r={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},s=this._range||this,o=dF(r,s);return e.bounds==="ticks"&&WS(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const r=(i-n)/Math.max(e.length-1,1)/2;n-=r,i+=r}this._startValue=n,this._endValue=i,this._valueRange=i-n}getLabelForValue(e){return Zl(e,this.chart.options.locale,this.options.ticks.format)}}class Bm extends Mh{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=We(e)?e:0,this.max=We(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,i=In(this.options.ticks.minRotation),r=(e?Math.sin(i):Math.cos(i))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,s.lineHeight/r))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}W(Bm,"id","linear"),W(Bm,"defaults",{ticks:{callback:kd.formatters.numeric}});const Rl=t=>Math.floor(er(t)),Ur=(t,e)=>Math.pow(10,Rl(t)+e);function yx(t){return t/Math.pow(10,Rl(t))===1}function _x(t,e,n){const i=Math.pow(10,n),r=Math.floor(t/i);return Math.ceil(e/i)-r}function fF(t,e){const n=e-t;let i=Rl(n);for(;_x(t,e,i)>10;)i++;for(;_x(t,e,i)<10;)i--;return Math.min(i,Rl(t))}function pF(t,{min:e,max:n}){e=Jt(t.min,e);const i=[],r=Rl(e);let s=fF(e,n),o=s<0?Math.pow(10,Math.abs(s)):1;const a=Math.pow(10,s),l=r>s?Math.pow(10,r):0,c=Math.round((e-l)*o)/o,h=Math.floor((e-l)/a/10)*a*10;let d=Math.floor((c-h)/Math.pow(10,s)),p=Jt(t.min,Math.round((l+h+d*Math.pow(10,s))*o)/o);for(;p<n;)i.push({value:p,major:yx(p),significand:d}),d>=10?d=d<15?15:20:d++,d>=20&&(s++,d=2,o=s>=0?1:o),p=Math.round((l+h+d*Math.pow(10,s))*o)/o;const g=Jt(t.max,p);return i.push({value:g,major:yx(g),significand:d}),i}class $m extends ks{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,n){const i=Mh.prototype.parse.apply(this,[e,n]);if(i===0){this._zero=!0;return}return We(i)&&i>0?i:null}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=We(e)?Math.max(0,e):null,this.max=We(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!We(this._userMin)&&(this.min=e===Ur(this.min,0)?Ur(this.min,-1):Ur(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let i=this.min,r=this.max;const s=a=>i=e?i:a,o=a=>r=n?r:a;i===r&&(i<=0?(s(1),o(10)):(s(Ur(i,-1)),o(Ur(r,1)))),i<=0&&s(Ur(r,-1)),r<=0&&o(Ur(i,1)),this.min=i,this.max=r}buildTicks(){const e=this.options,n={min:this._userMin,max:this._userMax},i=pF(n,this);return e.bounds==="ticks"&&WS(i,this,"value"),e.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(e){return e===void 0?"0":Zl(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=er(e),this._valueRange=er(this.max)-er(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(er(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const n=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+n*this._valueRange)}}W($m,"id","logarithmic"),W($m,"defaults",{ticks:{callback:kd.formatters.logarithmic,major:{enabled:!0}}});function Hm(t){const e=t.ticks;if(e.display&&t.display){const n=Nt(e.backdropPadding);return ie(e.font&&e.font.size,Le.font.size)+n.height}return 0}function mF(t,e,n){return n=Oe(n)?n:[n],{w:Ej(t,e.string,n),h:n.length*e.lineHeight}}function vx(t,e,n,i,r){return t===i||t===r?{start:e-n/2,end:e+n/2}:t<i||t>r?{start:e-n,end:e}:{start:e,end:e+n}}function gF(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),i=[],r=[],s=t._pointLabels.length,o=t.options.pointLabels,a=o.centerPointLabels?Ne/s:0;for(let l=0;l<s;l++){const c=o.setContext(t.getPointLabelContext(l));r[l]=c.padding;const h=t.getPointPosition(l,t.drawingArea+r[l],a),d=it(c.font),p=mF(t.ctx,d,t._pointLabels[l]);i[l]=p;const g=en(t.getIndexAngle(l)+a),y=Math.round(i_(g)),x=vx(y,h.x,p.w,0,180),b=vx(y,h.y,p.h,90,270);yF(n,e,g,x,b)}t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=wF(t,i,r)}function yF(t,e,n,i,r){const s=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n));let a=0,l=0;i.start<e.l?(a=(e.l-i.start)/s,t.l=Math.min(t.l,e.l-a)):i.end>e.r&&(a=(i.end-e.r)/s,t.r=Math.max(t.r,e.r+a)),r.start<e.t?(l=(e.t-r.start)/o,t.t=Math.min(t.t,e.t-l)):r.end>e.b&&(l=(r.end-e.b)/o,t.b=Math.max(t.b,e.b+l))}function _F(t,e,n){const i=t.drawingArea,{extra:r,additionalAngle:s,padding:o,size:a}=n,l=t.getPointPosition(e,i+r+o,s),c=Math.round(i_(en(l.angle+Ye))),h=bF(l.y,a.h,c),d=xF(c),p=EF(l.x,a.w,d);return{visible:!0,x:l.x,y:h,textAlign:d,left:p,top:h,right:p+a.w,bottom:h+a.h}}function vF(t,e){if(!e)return!0;const{left:n,top:i,right:r,bottom:s}=t;return!(pi({x:n,y:i},e)||pi({x:n,y:s},e)||pi({x:r,y:i},e)||pi({x:r,y:s},e))}function wF(t,e,n){const i=[],r=t._pointLabels.length,s=t.options,{centerPointLabels:o,display:a}=s.pointLabels,l={extra:Hm(s)/2,additionalAngle:o?Ne/r:0};let c;for(let h=0;h<r;h++){l.padding=n[h],l.size=e[h];const d=_F(t,h,l);i.push(d),a==="auto"&&(d.visible=vF(d,c),d.visible&&(c=d))}return i}function xF(t){return t===0||t===180?"center":t<180?"left":"right"}function EF(t,e,n){return n==="right"?t-=e:n==="center"&&(t-=e/2),t}function bF(t,e,n){return n===90||n===270?t-=e/2:(n>270||n<90)&&(t-=e),t}function TF(t,e,n){const{left:i,top:r,right:s,bottom:o}=n,{backdropColor:a}=e;if(!oe(a)){const l=ns(e.borderRadius),c=Nt(e.backdropPadding);t.fillStyle=a;const h=i-c.left,d=r-c.top,p=s-i+c.width,g=o-r+c.height;Object.values(l).some(y=>y!==0)?(t.beginPath(),Cl(t,{x:h,y:d,w:p,h:g,radius:l}),t.fill()):t.fillRect(h,d,p,g)}}function SF(t,e){const{ctx:n,options:{pointLabels:i}}=t;for(let r=e-1;r>=0;r--){const s=t._pointLabelItems[r];if(!s.visible)continue;const o=i.setContext(t.getPointLabelContext(r));TF(n,o,s);const a=it(o.font),{x:l,y:c,textAlign:h}=s;vs(n,t._pointLabels[r],l,c+a.lineHeight/2,a,{color:o.color,textAlign:h,textBaseline:"middle"})}}function OI(t,e,n,i){const{ctx:r}=t;if(n)r.arc(t.xCenter,t.yCenter,e,0,Re);else{let s=t.getPointPosition(0,e);r.moveTo(s.x,s.y);for(let o=1;o<i;o++)s=t.getPointPosition(o,e),r.lineTo(s.x,s.y)}}function IF(t,e,n,i,r){const s=t.ctx,o=e.circular,{color:a,lineWidth:l}=e;!o&&!i||!a||!l||n<0||(s.save(),s.strokeStyle=a,s.lineWidth=l,s.setLineDash(r.dash||[]),s.lineDashOffset=r.dashOffset,s.beginPath(),OI(t,n,o,i),s.closePath(),s.stroke(),s.restore())}function kF(t,e,n){return Nr(t,{label:n,index:e,type:"pointLabel"})}class ka extends Mh{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=Nt(Hm(this.options)/2),n=this.width=this.maxWidth-e.width,i=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+n/2+e.left),this.yCenter=Math.floor(this.top+i/2+e.top),this.drawingArea=Math.floor(Math.min(n,i)/2)}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!1);this.min=We(e)&&!isNaN(e)?e:0,this.max=We(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Hm(this.options))}generateTickLabels(e){Mh.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((n,i)=>{const r=Se(this.options.pointLabels.callback,[n,i],this);return r||r===0?r:""}).filter((n,i)=>this.chart.getDataVisibility(i))}fit(){const e=this.options;e.display&&e.pointLabels.display?gF(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,n,i,r){this.xCenter+=Math.floor((e-n)/2),this.yCenter+=Math.floor((i-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,n,i,r))}getIndexAngle(e){const n=Re/(this._pointLabels.length||1),i=this.options.startAngle||0;return en(e*n+In(i))}getDistanceFromCenterForValue(e){if(oe(e))return NaN;const n=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*n:(e-this.min)*n}getValueForDistanceFromCenter(e){if(oe(e))return NaN;const n=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-n:this.min+n}getPointLabelContext(e){const n=this._pointLabels||[];if(e>=0&&e<n.length){const i=n[e];return kF(this.getContext(),e,i)}}getPointPosition(e,n,i=0){const r=this.getIndexAngle(e)-Ye+i;return{x:Math.cos(r)*n+this.xCenter,y:Math.sin(r)*n+this.yCenter,angle:r}}getPointPositionForValue(e,n){return this.getPointPosition(e,this.getDistanceFromCenterForValue(n))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:n,top:i,right:r,bottom:s}=this._pointLabelItems[e];return{left:n,top:i,right:r,bottom:s}}drawBackground(){const{backgroundColor:e,grid:{circular:n}}=this.options;if(e){const i=this.ctx;i.save(),i.beginPath(),OI(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),i.closePath(),i.fillStyle=e,i.fill(),i.restore()}}drawGrid(){const e=this.ctx,n=this.options,{angleLines:i,grid:r,border:s}=n,o=this._pointLabels.length;let a,l,c;if(n.pointLabels.display&&SF(this,o),r.display&&this.ticks.forEach((h,d)=>{if(d!==0||d===0&&this.min<0){l=this.getDistanceFromCenterForValue(h.value);const p=this.getContext(d),g=r.setContext(p),y=s.setContext(p);IF(this,g,l,o,y)}}),i.display){for(e.save(),a=o-1;a>=0;a--){const h=i.setContext(this.getPointLabelContext(a)),{color:d,lineWidth:p}=h;!p||!d||(e.lineWidth=p,e.strokeStyle=d,e.setLineDash(h.borderDash),e.lineDashOffset=h.borderDashOffset,l=this.getDistanceFromCenterForValue(n.reverse?this.min:this.max),c=this.getPointPosition(a,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(c.x,c.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,n=this.options,i=n.ticks;if(!i.display)return;const r=this.getIndexAngle(0);let s,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(r),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&this.min>=0&&!n.reverse)return;const c=i.setContext(this.getContext(l)),h=it(c.font);if(s=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){e.font=h.string,o=e.measureText(a.label).width,e.fillStyle=c.backdropColor;const d=Nt(c.backdropPadding);e.fillRect(-o/2-d.left,-s-h.size/2-d.top,o+d.width,h.size+d.height)}vs(e,a.label,0,-s,h,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),e.restore()}drawTitle(){}}W(ka,"id","radialLinear"),W(ka,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:kd.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),W(ka,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),W(ka,"descriptors",{angleLines:{_fallback:"grid"}});const Nd={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Wt=Object.keys(Nd);function wx(t,e){return t-e}function xx(t,e){if(oe(e))return null;const n=t._adapter,{parser:i,round:r,isoWeekday:s}=t._parseOpts;let o=e;return typeof i=="function"&&(o=i(o)),We(o)||(o=typeof i=="string"?n.parse(o,i):n.parse(o)),o===null?null:(r&&(o=r==="week"&&(So(s)||s===!0)?n.startOf(o,"isoWeek",s):n.startOf(o,r)),+o)}function Ex(t,e,n,i){const r=Wt.length;for(let s=Wt.indexOf(t);s<r-1;++s){const o=Nd[Wt[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=i)return Wt[s]}return Wt[r-1]}function PF(t,e,n,i,r){for(let s=Wt.length-1;s>=Wt.indexOf(n);s--){const o=Wt[s];if(Nd[o].common&&t._adapter.diff(r,i,o)>=e-1)return o}return Wt[n?Wt.indexOf(n):0]}function CF(t){for(let e=Wt.indexOf(t)+1,n=Wt.length;e<n;++e)if(Nd[Wt[e]].common)return Wt[e]}function bx(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:i,hi:r}=r_(n,e),s=n[i]>=e?n[i]:n[r];t[s]=!0}}function AF(t,e,n,i){const r=t._adapter,s=+r.startOf(e[0].value,i),o=e[e.length-1].value;let a,l;for(a=s;a<=o;a=+r.add(a,1,i))l=n[a],l>=0&&(e[l].major=!0);return e}function Tx(t,e,n){const i=[],r={},s=e.length;let o,a;for(o=0;o<s;++o)a=e[o],r[a]=o,i.push({value:a,major:!1});return s===0||!n?i:AF(t,i,r,n)}class Nl extends ks{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const i=e.time||(e.time={}),r=this._adapter=new VV._date(e.adapters.date);r.init(n),$a(i.displayFormats,r.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:xx(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,i=e.time.unit||"day";let{min:r,max:s,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(r=Math.min(r,c.min)),!a&&!isNaN(c.max)&&(s=Math.max(s,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),r=We(r)&&!isNaN(r)?r:+n.startOf(Date.now(),i),s=We(s)&&!isNaN(s)?s:+n.endOf(Date.now(),i)+1,this.min=Math.min(r,s-1),this.max=Math.max(r+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],i=e[e.length-1]),{min:n,max:i}}buildTicks(){const e=this.options,n=e.time,i=e.ticks,r=i.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const s=this.min,o=this.max,a=cj(r,s,o);return this._unit=n.unit||(i.autoSkip?Ex(n.minUnit,this.min,this.max,this._getLabelCapacity(s)):PF(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:CF(this._unit),this.initOffsets(r),e.reverse&&a.reverse(),Tx(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,i=0,r,s;this.options.offset&&e.length&&(r=this.getDecimalForValue(e[0]),e.length===1?n=1-r:n=(this.getDecimalForValue(e[1])-r)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?i=s:i=(s-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=at(n,0,o),i=at(i,0,o),this._offsets={start:n,end:i,factor:1/(n+1+i)}}_generate(){const e=this._adapter,n=this.min,i=this.max,r=this.options,s=r.time,o=s.unit||Ex(s.minUnit,n,i,this._getLabelCapacity(n)),a=ie(r.ticks.stepSize,1),l=o==="week"?s.isoWeekday:!1,c=So(l)||l===!0,h={};let d=n,p,g;if(c&&(d=+e.startOf(d,"isoWeek",l)),d=+e.startOf(d,c?"day":o),e.diff(i,n,o)>1e5*a)throw new Error(n+" and "+i+" are too far apart with stepSize of "+a+" "+o);const y=r.ticks.source==="data"&&this.getDataTimestamps();for(p=d,g=0;p<i;p=+e.add(p,a,o),g++)bx(h,p,y);return(p===i||r.bounds==="ticks"||g===1)&&bx(h,p,y),Object.keys(h).sort(wx).map(x=>+x)}getLabelForValue(e){const n=this._adapter,i=this.options.time;return i.tooltipFormat?n.format(e,i.tooltipFormat):n.format(e,i.displayFormats.datetime)}format(e,n){const r=this.options.time.displayFormats,s=this._unit,o=n||r[s];return this._adapter.format(e,o)}_tickFormatFunction(e,n,i,r){const s=this.options,o=s.ticks.callback;if(o)return Se(o,[e,n,i],this);const a=s.time.displayFormats,l=this._unit,c=this._majorUnit,h=l&&a[l],d=c&&a[c],p=i[n],g=c&&d&&p&&p.major;return this._adapter.format(e,r||(g?d:h))}generateTickLabels(e){let n,i,r;for(n=0,i=e.length;n<i;++n)r=e[n],r.label=this._tickFormatFunction(r.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+i)*n.factor)}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+i*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,i=this.ctx.measureText(e).width,r=In(this.isHorizontal()?n.maxRotation:n.minRotation),s=Math.cos(r),o=Math.sin(r),a=this._resolveTickFontOptions(0).size;return{w:i*s+a*o,h:i*o+a*s}}_getLabelCapacity(e){const n=this.options.time,i=n.displayFormats,r=i[n.unit]||i.millisecond,s=this._tickFormatFunction(e,0,Tx(this,[e],this._majorUnit),r),o=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,i;if(e.length)return e;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(n=0,i=r.length;n<i;++n)e=e.concat(r[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,i;if(e.length)return e;const r=this.getLabels();for(n=0,i=r.length;n<i;++n)e.push(xx(this,r[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return GS(e.sort(wx))}}W(Nl,"id","time"),W(Nl,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function nu(t,e,n){let i=0,r=t.length-1,s,o,a,l;n?(e>=t[i].pos&&e<=t[r].pos&&({lo:i,hi:r}=fi(t,"pos",e)),{pos:s,time:a}=t[i],{pos:o,time:l}=t[r]):(e>=t[i].time&&e<=t[r].time&&({lo:i,hi:r}=fi(t,"time",e)),{time:s,pos:a}=t[i],{time:o,pos:l}=t[r]);const c=o-s;return c?a+(l-a)*(e-s)/c:a}class Wm extends Nl{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=nu(n,this.min),this._tableRange=nu(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:i}=this,r=[],s=[];let o,a,l,c,h;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=i&&r.push(c);if(r.length<2)return[{time:n,pos:0},{time:i,pos:1}];for(o=0,a=r.length;o<a;++o)h=r[o+1],l=r[o-1],c=r[o],Math.round((h+l)/2)!==c&&s.push({time:c,pos:o/(a-1)});return s}_generate(){const e=this.min,n=this.max;let i=super.getDataTimestamps();return(!i.includes(e)||!i.length)&&i.splice(0,0,e),(!i.includes(n)||i.length===1)&&i.push(n),i.sort((r,s)=>r-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),i=this.getLabelTimestamps();return n.length&&i.length?e=this.normalize(n.concat(i)):e=n.length?n:i,e=this._cache.all=e,e}getDecimalForValue(e){return(nu(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return nu(this._table,i*this._tableRange+this._minPos,!0)}}W(Wm,"id","timeseries"),W(Wm,"defaults",Nl.defaults);var RF=Object.freeze({__proto__:null,CategoryScale:zm,LinearScale:Bm,LogarithmicScale:$m,RadialLinearScale:ka,TimeScale:Nl,TimeSeriesScale:Wm});const NF=[jV,f8,lF,RF];oi.register(...NF);const DF=({salesData:t,viewMode:e})=>{const n=O.useRef(null),i=O.useRef(null);return O.useEffect(()=>{if(!t||t.length===0)return;const r=t.map(a=>new Date(a.date).toLocaleDateString("en-IN",{day:"2-digit",month:"short"})),s=t.map(a=>e==="revenue"?a.totalRevenue:a.totalProfit);i.current&&i.current.destroy();const o=n.current.getContext("2d");return i.current=new oi(o,{type:"bar",data:{labels:r,datasets:[{label:e==="revenue"?"Revenue ()":"Profit ()",data:s,backgroundColor:e==="revenue"?"rgba(251, 165, 24, 0.7)":"rgba(168, 156, 41, 0.7)",borderColor:e==="revenue"?"rgb(251, 165, 24)":"rgb(168, 156, 41)",borderWidth:1,borderRadius:4}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0,position:"top"},tooltip:{callbacks:{label:a=>{let l=a.dataset.label||"";return l&&(l+=": "),a.parsed.y!==null&&(l+=new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(a.parsed.y)),l}}}},scales:{x:{grid:{display:!1}},y:{beginAtZero:!0,ticks:{callback:a=>a>=1e3?""+a/1e3+"K":""+a}}}}}),()=>{i.current&&i.current.destroy()}},[t,e]),!t||t.length===0?f.jsx("div",{className:"no-data",children:"No sales data available for the selected period"}):f.jsx("div",{className:"sales-chart-container",children:f.jsx("canvas",{ref:n})})},MF=({items:t,viewMode:e})=>{if(!t||t.length===0)return f.jsx("div",{className:"no-data",children:"No sales data available"});const n=Math.max(...t.map(i=>e==="revenue"?i.revenue:i.profit));return f.jsx("div",{className:"top-items-container",children:t.map((i,r)=>{const s=e==="revenue"?i.revenue:i.profit,o=s/n*100;return f.jsxs("div",{className:"top-item",children:[f.jsxs("div",{className:"item-info",children:[f.jsx("div",{className:"item-rank",children:r+1}),f.jsxs("div",{className:"item-details",children:[f.jsx("h4",{className:"item-name",children:i.name}),f.jsxs("p",{className:"item-sold",children:[i.quantitySold," units sold"]})]})]}),f.jsxs("div",{className:"item-value-container",children:[f.jsx("div",{className:"item-bar-container",children:f.jsx("div",{className:"item-bar",style:{width:`${o}%`,backgroundColor:e==="revenue"?"var(--secondary)":"var(--highlight)"}})}),f.jsxs("div",{className:"item-value",children:["",s.toFixed(0)]})]})]},i.itemId||r)})})},OF=({transactions:t})=>{if(!t||t.length===0)return f.jsx("div",{className:"no-data",children:"No transaction data available"});const e=r=>new Date(r).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}),n=r=>new Date(r).toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"}),i=r=>r.length===1?r[0].name:`${r[0].name} + ${r.length-1} more`;return f.jsx("div",{className:"transactions-table-container",children:f.jsxs("table",{className:"transactions-table",children:[f.jsx("thead",{children:f.jsxs("tr",{children:[f.jsx("th",{children:"Date & Time"}),f.jsx("th",{children:"Items"}),f.jsx("th",{children:"Type"}),f.jsx("th",{children:"Amount"})]})}),f.jsx("tbody",{children:t.map(r=>f.jsxs("tr",{className:r.type==="sale"?"sale-row":"restock-row",children:[f.jsx("td",{children:f.jsxs("div",{className:"date-time",children:[f.jsx("span",{className:"date",children:e(r.date)}),f.jsx("span",{className:"time",children:n(r.date)})]})}),f.jsx("td",{children:i(r.items)}),f.jsx("td",{children:f.jsx("span",{className:`transaction-type ${r.type}`,children:r.type==="sale"?"Sale":"Restock"})}),f.jsxs("td",{className:"amount",children:["",r.total.toFixed(2)]})]},r.id))})]})})},LF=({insights:t})=>{const[e,n]=O.useState(0);return O.useEffect(()=>{if(!t||t.length<=1)return;const i=setInterval(()=>{n(r=>(r+1)%t.length)},8e3);return()=>clearInterval(i)},[t]),!t||t.length===0?null:f.jsxs("div",{className:"business-insights",children:[f.jsx("div",{className:"insight-icon",children:f.jsx(f3,{})}),f.jsxs("div",{className:"insight-content",children:[f.jsx("p",{className:"insight-text",children:t[e]}),t.length>1&&f.jsx("div",{className:"insight-indicators",children:t.map((i,r)=>f.jsx("span",{className:`indicator ${r===e?"active":""}`,onClick:()=>n(r)},r))})]})]})},jF=({currentFilter:t,onFilterChange:e})=>f.jsxs("div",{className:"filter-controls",children:[f.jsx("button",{className:`filter-btn ${t==="week"?"active":""}`,onClick:()=>e("week"),children:"This Week"}),f.jsx("button",{className:`filter-btn ${t==="month"?"active":""}`,onClick:()=>e("month"),children:"This Month"}),f.jsx("button",{className:`filter-btn ${t==="quarter"?"active":""}`,onClick:()=>e("quarter"),children:"Last 3 Months"})]}),VF=()=>{const{currentUser:t}=ln(),[e,n]=O.useState(!0),[i,r]=O.useState(""),[s,o]=O.useState("month"),[a,l]=O.useState("revenue"),[c,h]=O.useState([]),[d,p]=O.useState([]),[g,y]=O.useState([]),[x,b]=O.useState(0),[v,w]=O.useState(0),[T,C]=O.useState(null),[N,M]=O.useState(null),[S,E]=O.useState([]),[P,k]=O.useState([]),A=()=>{const X=new Date,U=X,Y=new Date;return s==="week"?Y.setDate(X.getDate()-7):s==="month"?Y.setMonth(X.getMonth()-1):s==="quarter"&&Y.setMonth(X.getMonth()-3),{start:Y,end:U}};O.useEffect(()=>{if(!t)return;(async()=>{n(!0),r("");try{const{start:U}=A(),Y=ki(et,"inventory"),V=gs(Y,mr("userId","==",t.uid)),$=await Th(V),q=[];$.forEach(yt=>{q.push({id:yt.id,...yt.data()})}),p(q);const re=ki(et,"receipts"),se=gs(re,mr("userId","==",t.uid),mr("timestamp",">=",U),oS("timestamp","desc")),fe=await Th(se),De=[];fe.forEach(yt=>{var je;const zt=yt.data();De.push({id:yt.id,...zt,timestamp:((je=zt.timestamp)==null?void 0:je.toDate())||new Date})});const ye={},be={},cn=[];De.forEach(yt=>{const zt=yt.timestamp.toISOString().split("T")[0];ye[zt]||(ye[zt]={date:new Date(zt),totalRevenue:0,totalProfit:0,itemsSold:[]}),ye[zt].totalRevenue+=yt.total,ye[zt].totalProfit+=yt.total*.3,yt.items.forEach(je=>{ye[zt].itemsSold.push({itemId:je.id,name:je.name,quantitySold:je.quantity,revenue:je.subtotal,profit:je.subtotal*.3}),be[je.id]||(be[je.id]={itemId:je.id,name:je.name,quantitySold:0,revenue:0,profit:0}),be[je.id].quantitySold+=je.quantity,be[je.id].revenue+=je.subtotal,be[je.id].profit+=je.subtotal*.3}),cn.push({id:yt.id,date:yt.timestamp,items:yt.items,total:yt.total,type:"sale"})});const ec=Object.values(ye);h(ec),y(cn),D(ec,be,q)}catch(U){console.error("Error fetching data:",U),r("Failed to load analytics data")}n(!1)})()},[t,s]);const D=(X,U,Y)=>{let V=0,$=0;X.forEach(re=>{V+=re.totalRevenue,$+=re.totalProfit}),b(V),w($);const q=Object.values(U);if(q.length>0){const re=[...q].sort((se,fe)=>fe.quantitySold-se.quantitySold);C(re[0]||null),M(re[re.length-1]||null),E(re.slice(0,5))}else C(null),M(null),E([]);R(X,q,Y)},R=(X,U,Y)=>{const V=[];if(X.length>0){const q=Math.floor(X.length/2),re=X.slice(0,q),se=X.slice(q),fe=re.reduce((ye,be)=>ye+be.totalRevenue,0),De=se.reduce((ye,be)=>ye+be.totalRevenue,0);if(De>0){const ye=(fe-De)/De*100;ye>0?V.push(`Your sales increased by ${ye.toFixed(1)}% compared to the previous period.`):ye<0?V.push(`Your sales decreased by ${Math.abs(ye).toFixed(1)}% compared to the previous period.`):V.push("Your sales remained stable compared to the previous period.")}}T&&V.push(`${T.name} is your best-selling product with ${T.quantitySold} units sold.`);const $=Y.filter(q=>q.quantity<5);if($.length>0&&V.push(`You have ${$.length} items with low stock. Consider restocking soon.`),g.length>0){const q=x/g.length;V.push(`Your average transaction value is ${q.toFixed(2)}.`)}k(V)},le=()=>{l(a==="revenue"?"profit":"revenue")};return f.jsxs("div",{className:"profit-analysis-page",children:[f.jsxs("div",{className:"page-header",children:[f.jsx("h1",{className:"page-title",children:"Profit Analysis"}),f.jsxs("div",{className:"view-toggle",onClick:le,children:[f.jsxs("span",{children:["View: ",a==="revenue"?"Revenue":"Profit"]}),a==="revenue"?f.jsx(y3,{className:"toggle-icon"}):f.jsx(g3,{className:"toggle-icon"})]})]}),i&&f.jsx("div",{className:"error-message",children:i}),f.jsx(jF,{currentFilter:s,onFilterChange:o}),e?f.jsxs("div",{className:"loading-container",children:[f.jsx("div",{className:"loading-spinner"}),f.jsx("p",{children:"Loading analytics data..."})]}):f.jsxs(f.Fragment,{children:[f.jsxs("section",{className:"metrics-section",children:[f.jsx(Bc,{title:"Total Revenue",value:x,icon:f.jsx(p3,{}),color:"primary",isCurrency:!0,altValue:a==="profit"?v:null,altLabel:a==="profit"?"Profit":null}),f.jsx(Bc,{title:"Estimated Profit",value:v,icon:f.jsx(Gy,{}),color:"highlight",isCurrency:!0,altValue:a==="profit"?(v/x*100).toFixed(1)+"%":null,altLabel:a==="profit"?"Margin":null}),f.jsx(Bc,{title:"Best-Selling Item",value:(T==null?void 0:T.name)||"N/A",subvalue:T?`${T.quantitySold} units`:"",icon:f.jsx(Ky,{}),color:"secondary"}),f.jsx(Bc,{title:"Slow-Moving Item",value:(N==null?void 0:N.name)||"N/A",subvalue:N?`${N.quantitySold} units`:"",icon:f.jsx(h3,{}),color:"accent"})]}),f.jsx(LF,{insights:P}),f.jsxs("section",{className:"charts-section",children:[f.jsxs("div",{className:"chart-container",children:[f.jsx("h2",{className:"section-title",children:"Sales Trends"}),f.jsx(DF,{salesData:c,viewMode:a})]}),f.jsxs("div",{className:"chart-container",children:[f.jsx("h2",{className:"section-title",children:"Top Selling Items"}),f.jsx(MF,{items:S,viewMode:a})]})]}),f.jsxs("section",{className:"transactions-section",children:[f.jsx("h2",{className:"section-title",children:"Recent Transactions"}),f.jsx(OF,{transactions:g})]})]})]})},FF=()=>f.jsxs("div",{className:"ai-business-help",children:[f.jsx("h1",{className:"page-title",children:"AI Business Help"}),f.jsxs("div",{className:"coming-soon",children:[f.jsx("h2",{children:"Coming Soon!"}),f.jsx("p",{children:"We're developing AI-powered business insights to help you grow your retail business."}),f.jsx("p",{children:"This feature will provide personalized recommendations based on your inventory and sales data."})]})]}),UF=({user:t})=>{const{updateUserProfile:e}=ln(),[n,i]=O.useState(!1),[r,s]=O.useState(""),[o,a]=O.useState(""),[l,c]=O.useState({displayName:"",email:"",phoneNumber:""}),[h,d]=O.useState(null),[p,g]=O.useState(null);O.useEffect(()=>{if(!t)return;c({displayName:t.displayName||"",email:t.email||"",phoneNumber:""}),t.photoURL&&g(t.photoURL),(async()=>{try{const w=await Ly(yn(et,"users",t.uid));if(w.exists()){const T=w.data();c(C=>({...C,phoneNumber:T.phoneNumber||""}))}}catch(w){console.error("Error fetching user data:",w)}})()},[t]);const y=v=>{const{name:w,value:T}=v.target;c(C=>({...C,[w]:T}))},x=v=>{const w=v.target.files[0];if(!w)return;d(w);const T=new FileReader;T.onloadend=()=>{g(T.result)},T.readAsDataURL(w)},b=async v=>{v.preventDefault(),i(!0),a(""),s("");try{let w=t.photoURL;if(h){const T=bl(Tl,`users/${t.uid}/profile-image`);await Pm(T,h),w=await Cm(T)}await DT(t,{displayName:l.displayName,photoURL:w}),await hS(yn(et,"users",t.uid),{displayName:l.displayName,phoneNumber:l.phoneNumber,photoURL:w,updatedAt:new Date},{merge:!0}),s("Profile updated successfully!")}catch(w){console.error("Error updating profile:",w),a("Failed to update profile. Please try again.")}i(!1)};return f.jsxs("div",{className:"profile-settings",children:[f.jsx("h2",{className:"section-title",children:"Profile Settings"}),o&&f.jsx("div",{className:"error-message",children:o}),r&&f.jsx("div",{className:"success-message",children:r}),f.jsxs("form",{onSubmit:b,className:"settings-form",children:[f.jsx("div",{className:"profile-image-upload",children:f.jsxs("div",{className:"profile-image-container",children:[p?f.jsx("img",{src:p||"/placeholder.svg",alt:"Profile",className:"profile-image"}):f.jsx("div",{className:"profile-placeholder",children:f.jsx(Jy,{})}),f.jsx("label",{htmlFor:"profile-image",className:"image-upload-label",children:f.jsx(NS,{})}),f.jsx("input",{type:"file",id:"profile-image",accept:"image/*",onChange:x,className:"image-upload-input"})]})}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"displayName",children:"Full Name"}),f.jsx("input",{type:"text",id:"displayName",name:"displayName",value:l.displayName,onChange:y,required:!0})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"email",children:"Email"}),f.jsx("input",{type:"email",id:"email",name:"email",value:l.email,disabled:!0,className:"disabled-input"}),f.jsx("small",{className:"input-note",children:"Email cannot be changed"})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"phoneNumber",children:"Phone Number"}),f.jsx("input",{type:"tel",id:"phoneNumber",name:"phoneNumber",value:l.phoneNumber,onChange:y,placeholder:"Enter your phone number"})]}),f.jsx("button",{type:"submit",className:"primary-btn save-btn",disabled:n,children:n?"Saving...":"Save Changes"})]})]})},zF=({user:t})=>{const[e,n]=O.useState(!1),[i,r]=O.useState(""),[s,o]=O.useState(""),[a,l]=O.useState({storeName:"",address:"",contactNumber:"",gstin:"",storeType:""}),c=["Kirana Store","Medical Store","Bookstore","Electronics","Clothing","Hardware","Stationery","Other"];O.useEffect(()=>{if(!t)return;(async()=>{try{const g=await Ly(yn(et,"stores",t.uid));g.exists()&&l(g.data())}catch(g){console.error("Error fetching store data:",g)}})()},[t]);const h=p=>{const{name:g,value:y}=p.target;l(x=>({...x,[g]:y}))},d=async p=>{p.preventDefault(),n(!0),o(""),r("");try{await hS(yn(et,"stores",t.uid),{...a,updatedAt:new Date},{merge:!0}),r("Store details updated successfully!")}catch(g){console.error("Error updating store details:",g),o("Failed to update store details. Please try again.")}n(!1)};return f.jsxs("div",{className:"store-details",children:[f.jsx("h2",{className:"section-title",children:"Store Details"}),s&&f.jsx("div",{className:"error-message",children:s}),i&&f.jsx("div",{className:"success-message",children:i}),f.jsxs("form",{onSubmit:d,className:"settings-form",children:[f.jsx("div",{className:"store-icon",children:f.jsx(FS,{})}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"storeName",children:"Store Name"}),f.jsx("input",{type:"text",id:"storeName",name:"storeName",value:a.storeName,onChange:h,required:!0,placeholder:"Enter your store name"})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"address",children:"Address"}),f.jsx("textarea",{id:"address",name:"address",value:a.address,onChange:h,rows:"3",placeholder:"Enter your store address"})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"contactNumber",children:"Contact Number"}),f.jsx("input",{type:"tel",id:"contactNumber",name:"contactNumber",value:a.contactNumber,onChange:h,placeholder:"Enter store contact number"})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"gstin",children:"GSTIN (Optional)"}),f.jsx("input",{type:"text",id:"gstin",name:"gstin",value:a.gstin,onChange:h,placeholder:"Enter your GSTIN"})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"storeType",children:"Store Type"}),f.jsxs("select",{id:"storeType",name:"storeType",value:a.storeType,onChange:h,required:!0,children:[f.jsx("option",{value:"",children:"Select Store Type"}),c.map(p=>f.jsx("option",{value:p,children:p},p))]})]}),f.jsx("button",{type:"submit",className:"primary-btn save-btn",disabled:e,children:e?"Saving...":"Save Store Details"})]})]})},BF=({user:t})=>{const{logout:e}=ln(),n=Ni(),[i,r]=O.useState(!1),[s,o]=O.useState(""),[a,l]=O.useState(!1),[c,h]=O.useState({createdAt:null,plan:"Free Plan"});O.useEffect(()=>{if(!t)return;(async()=>{try{const x=await Ly(yn(et,"users",t.uid));if(x.exists()){const b=x.data();h({createdAt:t.metadata.creationTime,plan:b.plan||"Free Plan"})}else h({createdAt:t.metadata.creationTime,plan:"Free Plan"})}catch(x){console.error("Error fetching user metadata:",x)}})()},[t]);const d=async()=>{try{await e(),n("/")}catch(y){console.error("Error logging out:",y),o("Failed to log out. Please try again.")}},p=async()=>{r(!0),o("");try{const y=ki(et,"inventory"),x=gs(y,mr("userId","==",t.uid)),b=await Th(x),v=[];b.forEach(C=>{v.push(Tu(C.ref))}),await Promise.all(v),await Tu(yn(et,"stores",t.uid)),await Tu(yn(et,"users",t.uid));const w=bl(Tl,`users/${t.uid}`),T=bl(Tl,`inventory/${t.uid}`);try{const N=(await Z1(w)).items.map(E=>ew(E));await Promise.all(N);const S=(await Z1(T)).items.map(E=>ew(E));await Promise.all(S)}catch(C){console.error("Error deleting storage files:",C)}await P4(t),n("/")}catch(y){console.error("Error deleting account:",y),o("Failed to delete account. Please try again."),r(!1)}},g=y=>y?new Date(y).toLocaleDateString("en-IN",{day:"2-digit",month:"long",year:"numeric"}):"Unknown";return f.jsxs("div",{className:"account-settings",children:[f.jsx("h2",{className:"section-title",children:"Account Settings"}),s&&f.jsx("div",{className:"error-message",children:s}),f.jsxs("div",{className:"account-info",children:[f.jsxs("div",{className:"info-item",children:[f.jsx("span",{className:"info-label",children:"Email"}),f.jsx("span",{className:"info-value",children:t==null?void 0:t.email})]}),f.jsxs("div",{className:"info-item",children:[f.jsx("span",{className:"info-label",children:"Account Created"}),f.jsx("span",{className:"info-value",children:g(c.createdAt)})]}),f.jsxs("div",{className:"info-item",children:[f.jsx("span",{className:"info-label",children:"Current Plan"}),f.jsx("span",{className:"info-value plan-badge",children:c.plan})]})]}),f.jsxs("div",{className:"account-actions",children:[f.jsxs("button",{className:"secondary-btn logout-btn",onClick:d,children:[f.jsx(VS,{className:"btn-icon"}),f.jsx("span",{children:"Log Out"})]}),a?f.jsxs("div",{className:"delete-confirmation",children:[f.jsxs("div",{className:"confirmation-message",children:[f.jsx(d3,{className:"warning-icon"}),f.jsx("p",{children:"Are you sure you want to delete your account? This action cannot be undone and will permanently delete all your data."})]}),f.jsxs("div",{className:"confirmation-actions",children:[f.jsx("button",{className:"outline-btn cancel-btn",onClick:()=>l(!1),children:"Cancel"}),f.jsx("button",{className:"danger-btn confirm-delete-btn",onClick:p,disabled:i,children:i?"Deleting...":"Yes, Delete My Account"})]})]}):f.jsxs("button",{className:"danger-btn delete-btn",onClick:()=>l(!0),children:[f.jsx(Ih,{className:"btn-icon"}),f.jsx("span",{children:"Delete Account"})]})]})]})},$F=({user:t})=>{const[e,n]=O.useState(!1),[i,r]=O.useState(""),[s,o]=O.useState(""),[a,l]=O.useState(!1),[c,h]=O.useState(!1),[d,p]=O.useState(!1),[g,y]=O.useState({currentPassword:"",newPassword:"",confirmPassword:""}),x=w=>{const{name:T,value:C}=w.target;y(N=>({...N,[T]:C}))},b=w=>{switch(w){case"current":l(!a);break;case"new":h(!c);break;case"confirm":p(!d);break}},v=async w=>{if(w.preventDefault(),n(!0),o(""),r(""),g.newPassword!==g.confirmPassword){o("New passwords do not match"),n(!1);return}if(g.newPassword.length<6){o("New password must be at least 6 characters long"),n(!1);return}try{const T=Ts.credential(t.email,g.currentPassword);await _4(t,T),await E4(t,g.newPassword),y({currentPassword:"",newPassword:"",confirmPassword:""}),r("Password updated successfully!")}catch(T){console.error("Error updating password:",T),T.code==="auth/wrong-password"?o("Current password is incorrect"):o("Failed to update password. Please try again.")}n(!1)};return f.jsxs("div",{className:"password-settings",children:[f.jsx("h2",{className:"section-title",children:"Change Password"}),s&&f.jsx("div",{className:"error-message",children:s}),i&&f.jsx("div",{className:"success-message",children:i}),f.jsxs("form",{onSubmit:v,className:"settings-form",children:[f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"currentPassword",children:"Current Password"}),f.jsxs("div",{className:"password-input-container",children:[f.jsx("input",{type:a?"text":"password",id:"currentPassword",name:"currentPassword",value:g.currentPassword,onChange:x,required:!0}),f.jsx("button",{type:"button",className:"toggle-password-btn",onClick:()=>b("current"),tabIndex:"-1",children:a?f.jsx($f,{}):f.jsx(Iu,{})})]})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"newPassword",children:"New Password"}),f.jsxs("div",{className:"password-input-container",children:[f.jsx("input",{type:c?"text":"password",id:"newPassword",name:"newPassword",value:g.newPassword,onChange:x,required:!0,minLength:"6"}),f.jsx("button",{type:"button",className:"toggle-password-btn",onClick:()=>b("new"),tabIndex:"-1",children:c?f.jsx($f,{}):f.jsx(Iu,{})})]})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"confirmPassword",children:"Confirm New Password"}),f.jsxs("div",{className:"password-input-container",children:[f.jsx("input",{type:d?"text":"password",id:"confirmPassword",name:"confirmPassword",value:g.confirmPassword,onChange:x,required:!0,minLength:"6"}),f.jsx("button",{type:"button",className:"toggle-password-btn",onClick:()=>b("confirm"),tabIndex:"-1",children:d?f.jsx($f,{}):f.jsx(Iu,{})})]})]}),f.jsx("button",{type:"submit",className:"primary-btn save-btn",disabled:e,children:e?"Updating...":"Update Password"})]})]})},Sx=()=>{const{section:t}=mA(),e=Ni(),[n,i]=O.useState("profile"),{currentUser:r}=ln();O.useEffect(()=>{t?i(t):e("/settings/profile",{replace:!0})},[t,e]);const s=o=>{i(o),e(`/settings/${o}`)};return f.jsxs("div",{className:"settings-page",children:[f.jsx("h1",{className:"page-title",children:"Settings"}),f.jsxs("div",{className:"settings-container",children:[f.jsxs("div",{className:"settings-tabs",children:[f.jsxs("button",{className:`tab-button ${n==="profile"?"active":""}`,onClick:()=>s("profile"),children:[f.jsx(Jy,{className:"tab-icon"}),f.jsx("span",{children:"Profile"})]}),f.jsxs("button",{className:`tab-button ${n==="store"?"active":""}`,onClick:()=>s("store"),children:[f.jsx(FS,{className:"tab-icon"}),f.jsx("span",{children:"Store Details"})]}),f.jsxs("button",{className:`tab-button ${n==="account"?"active":""}`,onClick:()=>s("account"),children:[f.jsx(Qy,{className:"tab-icon"}),f.jsx("span",{children:"Account"})]}),f.jsxs("button",{className:`tab-button ${n==="password"?"active":""}`,onClick:()=>s("password"),children:[f.jsx(Sh,{className:"tab-icon"}),f.jsx("span",{children:"Password"})]})]}),f.jsxs("div",{className:"settings-content",children:[n==="profile"&&f.jsx(UF,{user:r}),n==="store"&&f.jsx(zF,{user:r}),n==="account"&&f.jsx(BF,{user:r}),n==="password"&&f.jsx($F,{user:r})]})]})]})},HF=()=>{const{currentUser:t}=ln(),[e,n]=O.useState([]),[i,r]=O.useState([]),[s,o]=O.useState(""),[a,l]=O.useState([]),[c,h]=O.useState(!0),[d,p]=O.useState(""),[g,y]=O.useState(!1),[x,b]=O.useState(""),[v,w]=O.useState(""),[T,C]=O.useState(!1),[N,M]=O.useState(null);O.useEffect(()=>{if(!t)return;h(!0);const U=gs(ki(et,"inventory"),mr("userId","==",t.uid));return Vy(U,V=>{const $=[];V.forEach(q=>{$.push({id:q.id,...q.data()})}),n($),r($),h(!1)},V=>{console.error("Error fetching inventory:",V),p("Failed to load inventory items"),h(!1)})},[t]),O.useEffect(()=>{if(s.trim()==="")r(e);else{const U=e.filter(Y=>Y.name.toLowerCase().includes(s.toLowerCase()));r(U)}},[s,e]);const S=a.reduce((U,Y)=>U+Y.price*Y.quantity,0),E=U=>{const Y=a.find(V=>V.id===U.id);Y?Y.quantity<U.availableQuantity?l(a.map(V=>V.id===U.id?{...V,quantity:V.quantity+1}:V)):(p(`Maximum available quantity for ${U.name} is ${U.availableQuantity}`),setTimeout(()=>p(""),3e3)):U.quantity>0?l([...a,{...U,quantity:1,availableQuantity:U.quantity}]):(p(`${U.name} is out of stock`),setTimeout(()=>p(""),3e3))},P=U=>{l(a.filter(Y=>Y.id!==U))},k=(U,Y)=>{const V=a.find($=>$.id===U);if(Y<=0){P(U);return}if(Y>V.availableQuantity){p(`Maximum available quantity for ${V.name} is ${V.availableQuantity}`),setTimeout(()=>p(""),3e3);return}l(a.map($=>$.id===U?{...$,quantity:Y}:$))},A=()=>{l([])},D=U=>{if(b(U),U==="upi"){alert("UPI payment is coming soon!");return}y(!0)},R=()=>(Number.parseFloat(v)||0)-S,le=async()=>{try{const U={userId:t.uid,items:a.map($=>({id:$.id,name:$.name,quantity:$.quantity,price:$.price,subtotal:$.price*$.quantity})),total:S,paymentMethod:x,amountPaid:Number.parseFloat(v)||0,change:R(),timestamp:Su()},Y=await dS(ki(et,"receipts"),U),V=a.map($=>{const q=$.availableQuantity-$.quantity;return Sm(yn(et,"inventory",$.id),{quantity:q})});await Promise.all(V),M({id:Y.id,...U,timestamp:new Date}),C(!0),y(!1),l([]),w(""),b("")}catch(U){console.error("Error generating receipt:",U),p("Failed to generate receipt")}},X=()=>{C(!1),M(null)};return f.jsxs("div",{className:"billing-page",children:[f.jsx("h1",{className:"page-title",children:"Billing"}),d&&f.jsx("div",{className:"error-message",children:d}),f.jsxs("div",{className:"billing-container",children:[f.jsxs("div",{className:"inventory-section",children:[f.jsxs("div",{className:"search-container",children:[f.jsx(Xy,{className:"search-icon"}),f.jsx("input",{type:"text",placeholder:"Search items...",value:s,onChange:U=>o(U.target.value),className:"search-input"})]}),c?f.jsx("div",{className:"loading",children:"Loading inventory..."}):f.jsx("div",{className:"inventory-grid",children:i.length===0?f.jsx("div",{className:"no-items",children:"No items found"}):i.map(U=>f.jsxs("div",{className:"inventory-item",children:[f.jsx("div",{className:"item-image",children:U.imageUrl?f.jsx("img",{src:U.imageUrl||"/placeholder.svg",alt:U.name}):f.jsx("div",{className:"no-image",children:"No Image"})}),f.jsxs("div",{className:"item-details",children:[f.jsx("h3",{className:"item-name",children:U.name}),f.jsxs("p",{className:"item-price",children:["",U.price.toFixed(2)]}),f.jsx("p",{className:"item-quantity",children:U.quantity>0?`${U.quantity} in stock`:"Out of stock"}),f.jsx("p",{className:"item-category",children:U.category||"Uncategorized"})]}),f.jsx("button",{className:"add-to-cart-btn",onClick:()=>E(U),disabled:U.quantity<=0,children:"Add to Cart"})]},U.id))})]}),f.jsxs("div",{className:"cart-section",children:[f.jsxs("div",{className:"cart-header",children:[f.jsxs("h2",{children:[f.jsx(Yr,{})," Shopping Cart"]}),a.length>0&&f.jsxs("button",{className:"clear-cart-btn",onClick:A,children:[f.jsx(Ih,{})," Clear"]})]}),a.length===0?f.jsx("div",{className:"empty-cart",children:"Your cart is empty"}):f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"cart-items",children:a.map(U=>f.jsxs("div",{className:"cart-item",children:[f.jsxs("div",{className:"cart-item-details",children:[f.jsx("h3",{children:U.name}),f.jsxs("p",{children:["",U.price.toFixed(2)," each"]})]}),f.jsxs("div",{className:"cart-item-quantity",children:[f.jsx("button",{className:"quantity-btn",onClick:()=>k(U.id,U.quantity-1),children:f.jsx(OS,{})}),f.jsx("span",{children:U.quantity}),f.jsx("button",{className:"quantity-btn",onClick:()=>k(U.id,U.quantity+1),children:f.jsx(LS,{})})]}),f.jsxs("div",{className:"cart-item-subtotal",children:["",(U.price*U.quantity).toFixed(2)]}),f.jsx("button",{className:"remove-btn",onClick:()=>P(U.id),children:f.jsx(Ih,{})})]},U.id))}),f.jsx("div",{className:"cart-total",children:f.jsxs("h3",{children:["Total: ",S.toFixed(2)]})}),f.jsxs("div",{className:"payment-options",children:[f.jsx("button",{className:"payment-btn cash-btn",onClick:()=>D("cash"),children:"Cash Payment"}),f.jsx("button",{className:"payment-btn upi-btn",onClick:()=>D("upi"),children:"UPI Payment"})]})]})]})]}),g&&f.jsx("div",{className:"modal-overlay",children:f.jsxs("div",{className:"payment-modal",children:[f.jsx("h2",{children:"Cash Payment"}),f.jsxs("div",{className:"payment-details",children:[f.jsx("div",{className:"payment-info",children:f.jsxs("p",{children:["Total Amount: ",S.toFixed(2)]})}),f.jsxs("div",{className:"payment-form",children:[f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"amountPaid",children:"Amount Paid"}),f.jsx("input",{type:"number",id:"amountPaid",value:v,onChange:U=>w(U.target.value),min:S,step:"0.01",required:!0})]}),v&&Number.parseFloat(v)>=S&&f.jsx("div",{className:"change-amount",children:f.jsxs("p",{children:["Change to Return: ",R().toFixed(2)]})})]})]}),f.jsxs("div",{className:"modal-actions",children:[f.jsx("button",{className:"cancel-btn",onClick:()=>y(!1),children:"Cancel"}),f.jsx("button",{className:"confirm-btn",onClick:le,disabled:!v||Number.parseFloat(v)<S,children:"Confirm Payment"})]})]})}),T&&N&&f.jsx("div",{className:"modal-overlay",children:f.jsxs("div",{className:"receipt-modal",children:[f.jsx("h2",{children:"Receipt"}),f.jsxs("div",{className:"receipt-content",children:[f.jsxs("div",{className:"receipt-header",children:[f.jsxs("p",{children:["Receipt ID: ",N.id]}),f.jsxs("p",{children:["Date: ",N.timestamp.toLocaleDateString()," ",N.timestamp.toLocaleTimeString()]})]}),f.jsx("div",{className:"receipt-items",children:f.jsxs("table",{children:[f.jsx("thead",{children:f.jsxs("tr",{children:[f.jsx("th",{children:"Item"}),f.jsx("th",{children:"Qty"}),f.jsx("th",{children:"Price"}),f.jsx("th",{children:"Total"})]})}),f.jsx("tbody",{children:N.items.map((U,Y)=>f.jsxs("tr",{children:[f.jsx("td",{children:U.name}),f.jsx("td",{children:U.quantity}),f.jsxs("td",{children:["",U.price.toFixed(2)]}),f.jsxs("td",{children:["",U.subtotal.toFixed(2)]})]},Y))})]})}),f.jsxs("div",{className:"receipt-summary",children:[f.jsxs("p",{children:[f.jsx("strong",{children:"Total Amount:"})," ",N.total.toFixed(2)]}),f.jsxs("p",{children:[f.jsx("strong",{children:"Payment Method:"})," ",N.paymentMethod==="cash"?"Cash":"UPI"]}),N.paymentMethod==="cash"&&f.jsxs(f.Fragment,{children:[f.jsxs("p",{children:[f.jsx("strong",{children:"Amount Paid:"})," ",N.amountPaid.toFixed(2)]}),f.jsxs("p",{children:[f.jsx("strong",{children:"Change:"})," ",N.change.toFixed(2)]})]})]}),f.jsx("div",{className:"receipt-footer",children:f.jsx("p",{children:"Thank you for your purchase!"})})]}),f.jsx("div",{className:"modal-actions",children:f.jsx("button",{className:"confirm-btn",onClick:X,children:"Close"})})]})})]})},WF=()=>{const{currentUser:t}=ln(),[e,n]=O.useState([]),[i,r]=O.useState([]),[s,o]=O.useState(!0),[a,l]=O.useState(""),[c,h]=O.useState(""),[d,p]=O.useState({start:"",end:""}),[g,y]=O.useState("all"),[x,b]=O.useState(null);O.useEffect(()=>{if(!t)return;(async()=>{o(!0);try{const S=gs(ki(et,"receipts"),mr("userId","==",t.uid),oS("timestamp","desc")),E=await Th(S),P=[];E.forEach(k=>{var D;const A=k.data();P.push({id:k.id,...A,timestamp:((D=A.timestamp)==null?void 0:D.toDate())||new Date})}),n(P),r(P),o(!1)}catch(S){console.error("Error fetching receipts:",S),l("Failed to load receipts"),o(!1)}})()},[t]),O.useEffect(()=>{let M=[...e];if(c&&(M=M.filter(S=>S.items.some(E=>E.name.toLowerCase().includes(c.toLowerCase())))),d.start){const S=new Date(d.start);S.setHours(0,0,0,0),M=M.filter(E=>E.timestamp>=S)}if(d.end){const S=new Date(d.end);S.setHours(23,59,59,999),M=M.filter(E=>E.timestamp<=S)}g!=="all"&&(M=M.filter(S=>S.paymentMethod===g)),r(M)},[c,d,g,e]);const v=M=>{const{name:S,value:E}=M.target;p(P=>({...P,[S]:E}))},w=M=>{b(M)},T=()=>{b(null)},C=M=>M.toLocaleDateString(),N=M=>M.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return f.jsxs("div",{className:"receipts-page",children:[f.jsx("h1",{className:"page-title",children:"Receipts"}),a&&f.jsx("div",{className:"error-message",children:a}),f.jsxs("div",{className:"receipts-filters",children:[f.jsxs("div",{className:"search-container",children:[f.jsx(Xy,{className:"search-icon"}),f.jsx("input",{type:"text",placeholder:"Search items in receipts...",value:c,onChange:M=>h(M.target.value),className:"search-input"})]}),f.jsxs("div",{className:"filter-group",children:[f.jsxs("div",{className:"date-filters",children:[f.jsxs("div",{className:"date-filter",children:[f.jsxs("label",{htmlFor:"start",children:[f.jsx(nw,{})," From"]}),f.jsx("input",{type:"date",id:"start",name:"start",value:d.start,onChange:v})]}),f.jsxs("div",{className:"date-filter",children:[f.jsxs("label",{htmlFor:"end",children:[f.jsx(nw,{})," To"]}),f.jsx("input",{type:"date",id:"end",name:"end",value:d.end,onChange:v})]})]}),f.jsxs("div",{className:"payment-filter",children:[f.jsx("label",{htmlFor:"paymentFilter",children:"Payment Method"}),f.jsxs("select",{id:"paymentFilter",value:g,onChange:M=>y(M.target.value),children:[f.jsx("option",{value:"all",children:"All Methods"}),f.jsx("option",{value:"cash",children:"Cash"}),f.jsx("option",{value:"upi",children:"UPI"})]})]})]})]}),s?f.jsx("div",{className:"loading",children:"Loading receipts..."}):f.jsx("div",{className:"receipts-list",children:i.length===0?f.jsx("div",{className:"no-receipts",children:"No receipts found"}):i.map(M=>f.jsxs("div",{className:"receipt-card",children:[f.jsxs("div",{className:"receipt-header",children:[f.jsx("div",{className:"receipt-icon",children:f.jsx(Yy,{})}),f.jsxs("div",{className:"receipt-info",children:[f.jsxs("h3",{children:["Receipt #",M.id.slice(-6)]}),f.jsxs("p",{className:"receipt-date",children:[C(M.timestamp)," at"," ",N(M.timestamp)]})]})]}),f.jsxs("div",{className:"receipt-summary",children:[f.jsxs("div",{className:"receipt-items-summary",children:[f.jsxs("p",{children:[M.items.length," item(s)"]}),f.jsxs("ul",{className:"items-preview",children:[M.items.slice(0,3).map((S,E)=>f.jsxs("li",{children:[S.quantity," x ",S.name]},E)),M.items.length>3&&f.jsxs("li",{children:["+ ",M.items.length-3," more"]})]})]}),f.jsxs("div",{className:"receipt-total",children:[f.jsxs("p",{className:"total-amount",children:["",M.total.toFixed(2)]}),f.jsx("p",{className:"payment-method",children:M.paymentMethod==="cash"?"Cash Payment":"UPI Payment"})]})]}),f.jsxs("button",{className:"view-details-btn",onClick:()=>w(M),children:[f.jsx(Iu,{})," View Details"]})]},M.id))}),x&&f.jsx("div",{className:"modal-overlay",children:f.jsxs("div",{className:"receipt-details-modal",children:[f.jsx("h2",{children:"Receipt Details"}),f.jsxs("div",{className:"receipt-content",children:[f.jsxs("div",{className:"receipt-header",children:[f.jsxs("p",{children:["Receipt ID: ",x.id]}),f.jsxs("p",{children:["Date: ",C(x.timestamp)," ",N(x.timestamp)]})]}),f.jsx("div",{className:"receipt-items",children:f.jsxs("table",{children:[f.jsx("thead",{children:f.jsxs("tr",{children:[f.jsx("th",{children:"Item"}),f.jsx("th",{children:"Qty"}),f.jsx("th",{children:"Price"}),f.jsx("th",{children:"Total"})]})}),f.jsx("tbody",{children:x.items.map((M,S)=>f.jsxs("tr",{children:[f.jsx("td",{children:M.name}),f.jsx("td",{children:M.quantity}),f.jsxs("td",{children:["",M.price.toFixed(2)]}),f.jsxs("td",{children:["",M.subtotal.toFixed(2)]})]},S))})]})}),f.jsxs("div",{className:"receipt-summary",children:[f.jsxs("p",{children:[f.jsx("strong",{children:"Total Amount:"})," ",x.total.toFixed(2)]}),f.jsxs("p",{children:[f.jsx("strong",{children:"Payment Method:"})," ",x.paymentMethod==="cash"?"Cash":"UPI"]}),x.paymentMethod==="cash"&&f.jsxs(f.Fragment,{children:[f.jsxs("p",{children:[f.jsx("strong",{children:"Amount Paid:"})," ",x.amountPaid.toFixed(2)]}),f.jsxs("p",{children:[f.jsx("strong",{children:"Change:"})," ",x.change.toFixed(2)]})]})]}),f.jsx("div",{className:"receipt-footer",children:f.jsx("p",{children:"Thank you for your purchase!"})})]}),f.jsx("div",{className:"modal-actions",children:f.jsx("button",{className:"confirm-btn",onClick:T,children:"Close"})})]})})]})},qF=({toggleSidebar:t})=>{const{currentUser:e}=ln(),n=Ni(),i=()=>e!=null&&e.displayName?e.displayName.split(" ").map(s=>s[0]).join("").toUpperCase():"U",r=()=>{n("/settings/profile")};return f.jsx("nav",{className:"navbar",children:f.jsxs("div",{className:"navbar-container",children:[f.jsxs("div",{className:"navbar-left",children:[f.jsx("button",{className:"menu-button",onClick:t,children:f.jsx(c3,{})}),f.jsxs("div",{className:"navbar-logo",children:[f.jsx(Yr,{className:"logo-icon"}),f.jsx("span",{className:"logo-text",children:"Retail Ease"})]})]}),f.jsx("div",{className:"navbar-right",children:f.jsx("div",{className:"user-profile",onClick:r,children:e!=null&&e.photoURL?f.jsx("img",{src:e.photoURL||"/placeholder.svg",alt:"User Profile",className:"profile-image"}):f.jsx("div",{className:"profile-initials",children:i()})})})]})})},KF=({isOpen:t,toggleSidebar:e,onLogout:n})=>f.jsxs("div",{className:`sidebar ${t?"open":""}`,children:[f.jsx("div",{className:"sidebar-header",children:f.jsx("button",{className:"close-button",onClick:e,children:f.jsx(m3,{})})}),f.jsx("div",{className:"sidebar-content",children:f.jsxs("ul",{className:"sidebar-menu",children:[f.jsx("li",{className:"sidebar-item",children:f.jsxs(Ds,{to:"/inventory",className:({isActive:i})=>i?"sidebar-link active":"sidebar-link",onClick:()=>e(),children:[f.jsx(Ky,{className:"sidebar-icon"}),f.jsx("span",{children:"Inventory"})]})}),f.jsx("li",{className:"sidebar-item",children:f.jsxs(Ds,{to:"/billing",className:({isActive:i})=>i?"sidebar-link active":"sidebar-link",onClick:()=>e(),children:[f.jsx(DS,{className:"sidebar-icon"}),f.jsx("span",{children:"Billing"})]})}),f.jsx("li",{className:"sidebar-item",children:f.jsxs(Ds,{to:"/receipts",className:({isActive:i})=>i?"sidebar-link active":"sidebar-link",onClick:()=>e(),children:[f.jsx(Yy,{className:"sidebar-icon"}),f.jsx("span",{children:"Receipts"})]})}),f.jsx("li",{className:"sidebar-item",children:f.jsxs(Ds,{to:"/profit-analysis",className:({isActive:i})=>i?"sidebar-link active":"sidebar-link",onClick:()=>e(),children:[f.jsx(Gy,{className:"sidebar-icon"}),f.jsx("span",{children:"Profit Analysis"})]})}),f.jsx("li",{className:"sidebar-item",children:f.jsxs(Ds,{to:"/ai-business-help",className:({isActive:i})=>i?"sidebar-link active":"sidebar-link",onClick:()=>e(),children:[f.jsx(jS,{className:"sidebar-icon"}),f.jsx("span",{children:"AI Business Help"})]})}),f.jsx("li",{className:"sidebar-item",children:f.jsxs(Ds,{to:"/settings/profile",className:({isActive:i})=>i?"sidebar-link active":"sidebar-link",onClick:()=>e(),children:[f.jsx(MS,{className:"sidebar-icon"}),f.jsx("span",{children:"Settings"})]})})]})}),f.jsx("div",{className:"sidebar-footer",children:f.jsxs("button",{className:"logout-button",onClick:n,children:[f.jsx(VS,{className:"sidebar-icon"}),f.jsx("span",{children:"Logout"})]})})]}),Vi=({children:t})=>{const[e,n]=O.useState(!1),{logout:i}=ln(),r=Ni(),s=()=>{n(!e)},o=async()=>{try{await i(),r("/")}catch(a){console.error("Failed to log out",a)}};return f.jsxs("div",{className:"main-layout",children:[f.jsx(qF,{toggleSidebar:s}),f.jsxs("div",{className:"layout-container",children:[f.jsx(KF,{isOpen:e,toggleSidebar:s,onLogout:o}),f.jsx("main",{className:`main-content ${e?"sidebar-open":""}`,children:t})]})]})},Fi=({children:t})=>{const{currentUser:e,loading:n}=ln();return n?f.jsx("div",{className:"loading",children:"Loading..."}):e?t:f.jsx(AA,{to:"/login"})};function GF(){const[t,e]=O.useState(!0);return O.useEffect(()=>{const n=setTimeout(()=>{e(!1)},3e3);return()=>clearTimeout(n)},[]),t?f.jsx(_3,{}):f.jsxs(NA,{children:[f.jsx(hn,{path:"/",element:f.jsx(v3,{})}),f.jsx(hn,{path:"/login",element:f.jsx(w3,{})}),f.jsx(hn,{path:"/register",element:f.jsx(x3,{})}),f.jsx(hn,{path:"/dashboard",element:f.jsx(Fi,{children:f.jsx(Vi,{children:f.jsx(E3,{})})})}),f.jsx(hn,{path:"/inventory",element:f.jsx(Fi,{children:f.jsx(Vi,{children:f.jsx(S3,{})})})}),f.jsx(hn,{path:"/profit-analysis",element:f.jsx(Fi,{children:f.jsx(Vi,{children:f.jsx(VF,{})})})}),f.jsx(hn,{path:"/ai-business-help",element:f.jsx(Fi,{children:f.jsx(Vi,{children:f.jsx(FF,{})})})}),f.jsx(hn,{path:"/settings",element:f.jsx(Fi,{children:f.jsx(Vi,{children:f.jsx(Sx,{})})})}),f.jsx(hn,{path:"/settings/:section",element:f.jsx(Fi,{children:f.jsx(Vi,{children:f.jsx(Sx,{})})})}),f.jsx(hn,{path:"/billing",element:f.jsx(Fi,{children:f.jsx(Vi,{children:f.jsx(HF,{})})})}),f.jsx(hn,{path:"/receipts",element:f.jsx(Fi,{children:f.jsx(Vi,{children:f.jsx(WF,{})})})})]})}ip.createRoot(document.getElementById("root")).render(f.jsx(mi.StrictMode,{children:f.jsx(UA,{children:f.jsx(s3,{children:f.jsx(GF,{})})})}));
