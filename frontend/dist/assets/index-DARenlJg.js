var zT=Object.defineProperty;var UT=(t,e,n)=>e in t?zT(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Z=(t,e,n)=>UT(t,typeof e!="symbol"?e+"":e,n);function HT(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var de=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function iw(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function WT(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var sw={exports:{}},yd={},ow={exports:{}},me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pc=Symbol.for("react.element"),$T=Symbol.for("react.portal"),qT=Symbol.for("react.fragment"),KT=Symbol.for("react.strict_mode"),GT=Symbol.for("react.profiler"),QT=Symbol.for("react.provider"),YT=Symbol.for("react.context"),XT=Symbol.for("react.forward_ref"),JT=Symbol.for("react.suspense"),ZT=Symbol.for("react.memo"),e6=Symbol.for("react.lazy"),d1=Symbol.iterator;function t6(t){return t===null||typeof t!="object"?null:(t=d1&&t[d1]||t["@@iterator"],typeof t=="function"?t:null)}var aw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},lw=Object.assign,cw={};function oa(t,e,n){this.props=t,this.context=e,this.refs=cw,this.updater=n||aw}oa.prototype.isReactComponent={};oa.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};oa.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function uw(){}uw.prototype=oa.prototype;function rg(t,e,n){this.props=t,this.context=e,this.refs=cw,this.updater=n||aw}var ig=rg.prototype=new uw;ig.constructor=rg;lw(ig,oa.prototype);ig.isPureReactComponent=!0;var f1=Array.isArray,hw=Object.prototype.hasOwnProperty,sg={current:null},dw={key:!0,ref:!0,__self:!0,__source:!0};function fw(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)hw.call(e,r)&&!dw.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:pc,type:t,key:s,ref:o,props:i,_owner:sg.current}}function n6(t,e){return{$$typeof:pc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function og(t){return typeof t=="object"&&t!==null&&t.$$typeof===pc}function r6(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var p1=/\/+/g;function Ff(t,e){return typeof t=="object"&&t!==null&&t.key!=null?r6(""+t.key):e.toString(36)}function zu(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case pc:case $T:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Ff(o,0):r,f1(i)?(n="",t!=null&&(n=t.replace(p1,"$&/")+"/"),zu(i,e,n,"",function(c){return c})):i!=null&&(og(i)&&(i=n6(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(p1,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",f1(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+Ff(s,a);o+=zu(s,e,n,l,i)}else if(l=t6(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+Ff(s,a++),o+=zu(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function tu(t,e,n){if(t==null)return t;var r=[],i=0;return zu(t,r,"","",function(s){return e.call(n,s,i++)}),r}function i6(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Gt={current:null},Uu={transition:null},s6={ReactCurrentDispatcher:Gt,ReactCurrentBatchConfig:Uu,ReactCurrentOwner:sg};function pw(){throw Error("act(...) is not supported in production builds of React.")}me.Children={map:tu,forEach:function(t,e,n){tu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return tu(t,function(){e++}),e},toArray:function(t){return tu(t,function(e){return e})||[]},only:function(t){if(!og(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};me.Component=oa;me.Fragment=qT;me.Profiler=GT;me.PureComponent=rg;me.StrictMode=KT;me.Suspense=JT;me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=s6;me.act=pw;me.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=lw({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=sg.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)hw.call(e,l)&&!dw.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:pc,type:t.type,key:i,ref:s,props:r,_owner:o}};me.createContext=function(t){return t={$$typeof:YT,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:QT,_context:t},t.Consumer=t};me.createElement=fw;me.createFactory=function(t){var e=fw.bind(null,t);return e.type=t,e};me.createRef=function(){return{current:null}};me.forwardRef=function(t){return{$$typeof:XT,render:t}};me.isValidElement=og;me.lazy=function(t){return{$$typeof:e6,_payload:{_status:-1,_result:t},_init:i6}};me.memo=function(t,e){return{$$typeof:ZT,type:t,compare:e===void 0?null:e}};me.startTransition=function(t){var e=Uu.transition;Uu.transition={};try{t()}finally{Uu.transition=e}};me.unstable_act=pw;me.useCallback=function(t,e){return Gt.current.useCallback(t,e)};me.useContext=function(t){return Gt.current.useContext(t)};me.useDebugValue=function(){};me.useDeferredValue=function(t){return Gt.current.useDeferredValue(t)};me.useEffect=function(t,e){return Gt.current.useEffect(t,e)};me.useId=function(){return Gt.current.useId()};me.useImperativeHandle=function(t,e,n){return Gt.current.useImperativeHandle(t,e,n)};me.useInsertionEffect=function(t,e){return Gt.current.useInsertionEffect(t,e)};me.useLayoutEffect=function(t,e){return Gt.current.useLayoutEffect(t,e)};me.useMemo=function(t,e){return Gt.current.useMemo(t,e)};me.useReducer=function(t,e,n){return Gt.current.useReducer(t,e,n)};me.useRef=function(t){return Gt.current.useRef(t)};me.useState=function(t){return Gt.current.useState(t)};me.useSyncExternalStore=function(t,e,n){return Gt.current.useSyncExternalStore(t,e,n)};me.useTransition=function(){return Gt.current.useTransition()};me.version="18.3.1";ow.exports=me;var M=ow.exports;const Mr=iw(M),o6=HT({__proto__:null,default:Mr},[M]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a6=M,l6=Symbol.for("react.element"),c6=Symbol.for("react.fragment"),u6=Object.prototype.hasOwnProperty,h6=a6.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,d6={key:!0,ref:!0,__self:!0,__source:!0};function mw(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)u6.call(e,r)&&!d6.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:l6,type:t,key:s,ref:o,props:i,_owner:h6.current}}yd.Fragment=c6;yd.jsx=mw;yd.jsxs=mw;sw.exports=yd;var p=sw.exports,mp={},gw={exports:{}},En={},xw={exports:{}},vw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(j,W){var Q=j.length;j.push(W);e:for(;0<Q;){var B=Q-1>>>1,V=j[B];if(0<i(V,W))j[B]=W,j[Q]=V,Q=B;else break e}}function n(j){return j.length===0?null:j[0]}function r(j){if(j.length===0)return null;var W=j[0],Q=j.pop();if(Q!==W){j[0]=Q;e:for(var B=0,V=j.length,U=V>>>1;B<U;){var H=2*(B+1)-1,re=j[H],ie=H+1,ke=j[ie];if(0>i(re,Q))ie<V&&0>i(ke,re)?(j[B]=ke,j[ie]=Q,B=ie):(j[B]=re,j[H]=Q,B=H);else if(ie<V&&0>i(ke,Q))j[B]=ke,j[ie]=Q,B=ie;else break e}}return W}function i(j,W){var Q=j.sortIndex-W.sortIndex;return Q!==0?Q:j.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,f=3,m=!1,x=!1,y=!1,w=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(j){for(var W=n(c);W!==null;){if(W.callback===null)r(c);else if(W.startTime<=j)r(c),W.sortIndex=W.expirationTime,e(l,W);else break;W=n(c)}}function A(j){if(y=!1,_(j),!x)if(n(l)!==null)x=!0,L(P);else{var W=n(c);W!==null&&X(A,W.startTime-j)}}function P(j,W){x=!1,y&&(y=!1,v(b),b=-1),m=!0;var Q=f;try{for(_(W),d=n(l);d!==null&&(!(d.expirationTime>W)||j&&!I());){var B=d.callback;if(typeof B=="function"){d.callback=null,f=d.priorityLevel;var V=B(d.expirationTime<=W);W=t.unstable_now(),typeof V=="function"?d.callback=V:d===n(l)&&r(l),_(W)}else r(l);d=n(l)}if(d!==null)var U=!0;else{var H=n(c);H!==null&&X(A,H.startTime-W),U=!1}return U}finally{d=null,f=Q,m=!1}}var D=!1,C=null,b=-1,k=5,T=-1;function I(){return!(t.unstable_now()-T<k)}function N(){if(C!==null){var j=t.unstable_now();T=j;var W=!0;try{W=C(!0,j)}finally{W?R():(D=!1,C=null)}}else D=!1}var R;if(typeof g=="function")R=function(){g(N)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,q=K.port2;K.port1.onmessage=N,R=function(){q.postMessage(null)}}else R=function(){w(N,0)};function L(j){C=j,D||(D=!0,R())}function X(j,W){b=w(function(){j(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(j){j.callback=null},t.unstable_continueExecution=function(){x||m||(x=!0,L(P))},t.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<j?Math.floor(1e3/j):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(j){switch(f){case 1:case 2:case 3:var W=3;break;default:W=f}var Q=f;f=W;try{return j()}finally{f=Q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(j,W){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var Q=f;f=j;try{return W()}finally{f=Q}},t.unstable_scheduleCallback=function(j,W,Q){var B=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?B+Q:B):Q=B,j){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=Q+V,j={id:u++,callback:W,priorityLevel:j,startTime:Q,expirationTime:V,sortIndex:-1},Q>B?(j.sortIndex=Q,e(c,j),n(l)===null&&j===n(c)&&(y?(v(b),b=-1):y=!0,X(A,Q-B))):(j.sortIndex=V,e(l,j),x||m||(x=!0,L(P))),j},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(j){var W=f;return function(){var Q=f;f=W;try{return j.apply(this,arguments)}finally{f=Q}}}})(vw);xw.exports=vw;var f6=xw.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p6=M,_n=f6;function Y(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var yw=new Set,kl={};function Ws(t,e){Uo(t,e),Uo(t+"Capture",e)}function Uo(t,e){for(kl[t]=e,t=0;t<e.length;t++)yw.add(e[t])}var jr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),gp=Object.prototype.hasOwnProperty,m6=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m1={},g1={};function g6(t){return gp.call(g1,t)?!0:gp.call(m1,t)?!1:m6.test(t)?g1[t]=!0:(m1[t]=!0,!1)}function x6(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function v6(t,e,n,r){if(e===null||typeof e>"u"||x6(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Qt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var It={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){It[t]=new Qt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];It[e]=new Qt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){It[t]=new Qt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){It[t]=new Qt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){It[t]=new Qt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){It[t]=new Qt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){It[t]=new Qt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){It[t]=new Qt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){It[t]=new Qt(t,5,!1,t.toLowerCase(),null,!1,!1)});var ag=/[\-:]([a-z])/g;function lg(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ag,lg);It[e]=new Qt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ag,lg);It[e]=new Qt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ag,lg);It[e]=new Qt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){It[t]=new Qt(t,1,!1,t.toLowerCase(),null,!1,!1)});It.xlinkHref=new Qt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){It[t]=new Qt(t,1,!1,t.toLowerCase(),null,!0,!0)});function cg(t,e,n,r){var i=It.hasOwnProperty(e)?It[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(v6(e,n,i,r)&&(n=null),r||i===null?g6(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Qr=p6.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,nu=Symbol.for("react.element"),xo=Symbol.for("react.portal"),vo=Symbol.for("react.fragment"),ug=Symbol.for("react.strict_mode"),xp=Symbol.for("react.profiler"),_w=Symbol.for("react.provider"),Ew=Symbol.for("react.context"),hg=Symbol.for("react.forward_ref"),vp=Symbol.for("react.suspense"),yp=Symbol.for("react.suspense_list"),dg=Symbol.for("react.memo"),li=Symbol.for("react.lazy"),ww=Symbol.for("react.offscreen"),x1=Symbol.iterator;function Ra(t){return t===null||typeof t!="object"?null:(t=x1&&t[x1]||t["@@iterator"],typeof t=="function"?t:null)}var Ke=Object.assign,Mf;function Ka(t){if(Mf===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Mf=e&&e[1]||""}return`
`+Mf+t}var Of=!1;function Bf(t,e){if(!t||Of)return"";Of=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Of=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ka(t):""}function y6(t){switch(t.tag){case 5:return Ka(t.type);case 16:return Ka("Lazy");case 13:return Ka("Suspense");case 19:return Ka("SuspenseList");case 0:case 2:case 15:return t=Bf(t.type,!1),t;case 11:return t=Bf(t.type.render,!1),t;case 1:return t=Bf(t.type,!0),t;default:return""}}function _p(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case vo:return"Fragment";case xo:return"Portal";case xp:return"Profiler";case ug:return"StrictMode";case vp:return"Suspense";case yp:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Ew:return(t.displayName||"Context")+".Consumer";case _w:return(t._context.displayName||"Context")+".Provider";case hg:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case dg:return e=t.displayName||null,e!==null?e:_p(t.type)||"Memo";case li:e=t._payload,t=t._init;try{return _p(t(e))}catch{}}return null}function _6(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return _p(e);case 8:return e===ug?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ji(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function bw(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function E6(t){var e=bw(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ru(t){t._valueTracker||(t._valueTracker=E6(t))}function Cw(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=bw(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function yh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ep(t,e){var n=e.checked;return Ke({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function v1(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ji(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Aw(t,e){e=e.checked,e!=null&&cg(t,"checked",e,!1)}function wp(t,e){Aw(t,e);var n=ji(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?bp(t,e.type,n):e.hasOwnProperty("defaultValue")&&bp(t,e.type,ji(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function y1(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function bp(t,e,n){(e!=="number"||yh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ga=Array.isArray;function Po(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ji(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Cp(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Y(91));return Ke({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function _1(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Y(92));if(Ga(n)){if(1<n.length)throw Error(Y(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ji(n)}}function Sw(t,e){var n=ji(e.value),r=ji(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function E1(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Tw(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ap(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Tw(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var iu,Iw=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(iu=iu||document.createElement("div"),iu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=iu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Pl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var cl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},w6=["Webkit","ms","Moz","O"];Object.keys(cl).forEach(function(t){w6.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),cl[e]=cl[t]})});function kw(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||cl.hasOwnProperty(t)&&cl[t]?(""+e).trim():e+"px"}function Pw(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=kw(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var b6=Ke({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Sp(t,e){if(e){if(b6[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Y(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Y(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Y(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Y(62))}}function Tp(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ip=null;function fg(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var kp=null,Do=null,Ro=null;function w1(t){if(t=xc(t)){if(typeof kp!="function")throw Error(Y(280));var e=t.stateNode;e&&(e=Cd(e),kp(t.stateNode,t.type,e))}}function Dw(t){Do?Ro?Ro.push(t):Ro=[t]:Do=t}function Rw(){if(Do){var t=Do,e=Ro;if(Ro=Do=null,w1(t),e)for(t=0;t<e.length;t++)w1(e[t])}}function Nw(t,e){return t(e)}function Fw(){}var Lf=!1;function Mw(t,e,n){if(Lf)return t(e,n);Lf=!0;try{return Nw(t,e,n)}finally{Lf=!1,(Do!==null||Ro!==null)&&(Fw(),Rw())}}function Dl(t,e){var n=t.stateNode;if(n===null)return null;var r=Cd(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Y(231,e,typeof n));return n}var Pp=!1;if(jr)try{var Na={};Object.defineProperty(Na,"passive",{get:function(){Pp=!0}}),window.addEventListener("test",Na,Na),window.removeEventListener("test",Na,Na)}catch{Pp=!1}function C6(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var ul=!1,_h=null,Eh=!1,Dp=null,A6={onError:function(t){ul=!0,_h=t}};function S6(t,e,n,r,i,s,o,a,l){ul=!1,_h=null,C6.apply(A6,arguments)}function T6(t,e,n,r,i,s,o,a,l){if(S6.apply(this,arguments),ul){if(ul){var c=_h;ul=!1,_h=null}else throw Error(Y(198));Eh||(Eh=!0,Dp=c)}}function $s(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Ow(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function b1(t){if($s(t)!==t)throw Error(Y(188))}function I6(t){var e=t.alternate;if(!e){if(e=$s(t),e===null)throw Error(Y(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return b1(i),t;if(s===r)return b1(i),e;s=s.sibling}throw Error(Y(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(Y(189))}}if(n.alternate!==r)throw Error(Y(190))}if(n.tag!==3)throw Error(Y(188));return n.stateNode.current===n?t:e}function Bw(t){return t=I6(t),t!==null?Lw(t):null}function Lw(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Lw(t);if(e!==null)return e;t=t.sibling}return null}var jw=_n.unstable_scheduleCallback,C1=_n.unstable_cancelCallback,k6=_n.unstable_shouldYield,P6=_n.unstable_requestPaint,st=_n.unstable_now,D6=_n.unstable_getCurrentPriorityLevel,pg=_n.unstable_ImmediatePriority,Vw=_n.unstable_UserBlockingPriority,wh=_n.unstable_NormalPriority,R6=_n.unstable_LowPriority,zw=_n.unstable_IdlePriority,_d=null,sr=null;function N6(t){if(sr&&typeof sr.onCommitFiberRoot=="function")try{sr.onCommitFiberRoot(_d,t,void 0,(t.current.flags&128)===128)}catch{}}var Vn=Math.clz32?Math.clz32:O6,F6=Math.log,M6=Math.LN2;function O6(t){return t>>>=0,t===0?32:31-(F6(t)/M6|0)|0}var su=64,ou=4194304;function Qa(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function bh(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Qa(a):(s&=o,s!==0&&(r=Qa(s)))}else o=n&~i,o!==0?r=Qa(o):s!==0&&(r=Qa(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Vn(e),i=1<<n,r|=t[n],e&=~i;return r}function B6(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function L6(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Vn(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=B6(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Rp(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Uw(){var t=su;return su<<=1,!(su&4194240)&&(su=64),t}function jf(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function mc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Vn(e),t[e]=n}function j6(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Vn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function mg(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Vn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Se=0;function Hw(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Ww,gg,$w,qw,Kw,Np=!1,au=[],Ai=null,Si=null,Ti=null,Rl=new Map,Nl=new Map,ui=[],V6="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function A1(t,e){switch(t){case"focusin":case"focusout":Ai=null;break;case"dragenter":case"dragleave":Si=null;break;case"mouseover":case"mouseout":Ti=null;break;case"pointerover":case"pointerout":Rl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Nl.delete(e.pointerId)}}function Fa(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=xc(e),e!==null&&gg(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function z6(t,e,n,r,i){switch(e){case"focusin":return Ai=Fa(Ai,t,e,n,r,i),!0;case"dragenter":return Si=Fa(Si,t,e,n,r,i),!0;case"mouseover":return Ti=Fa(Ti,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Rl.set(s,Fa(Rl.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Nl.set(s,Fa(Nl.get(s)||null,t,e,n,r,i)),!0}return!1}function Gw(t){var e=xs(t.target);if(e!==null){var n=$s(e);if(n!==null){if(e=n.tag,e===13){if(e=Ow(n),e!==null){t.blockedOn=e,Kw(t.priority,function(){$w(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Hu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Fp(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Ip=r,n.target.dispatchEvent(r),Ip=null}else return e=xc(n),e!==null&&gg(e),t.blockedOn=n,!1;e.shift()}return!0}function S1(t,e,n){Hu(t)&&n.delete(e)}function U6(){Np=!1,Ai!==null&&Hu(Ai)&&(Ai=null),Si!==null&&Hu(Si)&&(Si=null),Ti!==null&&Hu(Ti)&&(Ti=null),Rl.forEach(S1),Nl.forEach(S1)}function Ma(t,e){t.blockedOn===e&&(t.blockedOn=null,Np||(Np=!0,_n.unstable_scheduleCallback(_n.unstable_NormalPriority,U6)))}function Fl(t){function e(i){return Ma(i,t)}if(0<au.length){Ma(au[0],t);for(var n=1;n<au.length;n++){var r=au[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ai!==null&&Ma(Ai,t),Si!==null&&Ma(Si,t),Ti!==null&&Ma(Ti,t),Rl.forEach(e),Nl.forEach(e),n=0;n<ui.length;n++)r=ui[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ui.length&&(n=ui[0],n.blockedOn===null);)Gw(n),n.blockedOn===null&&ui.shift()}var No=Qr.ReactCurrentBatchConfig,Ch=!0;function H6(t,e,n,r){var i=Se,s=No.transition;No.transition=null;try{Se=1,xg(t,e,n,r)}finally{Se=i,No.transition=s}}function W6(t,e,n,r){var i=Se,s=No.transition;No.transition=null;try{Se=4,xg(t,e,n,r)}finally{Se=i,No.transition=s}}function xg(t,e,n,r){if(Ch){var i=Fp(t,e,n,r);if(i===null)Qf(t,e,r,Ah,n),A1(t,r);else if(z6(i,t,e,n,r))r.stopPropagation();else if(A1(t,r),e&4&&-1<V6.indexOf(t)){for(;i!==null;){var s=xc(i);if(s!==null&&Ww(s),s=Fp(t,e,n,r),s===null&&Qf(t,e,r,Ah,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Qf(t,e,r,null,n)}}var Ah=null;function Fp(t,e,n,r){if(Ah=null,t=fg(r),t=xs(t),t!==null)if(e=$s(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Ow(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ah=t,null}function Qw(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(D6()){case pg:return 1;case Vw:return 4;case wh:case R6:return 16;case zw:return 536870912;default:return 16}default:return 16}}var xi=null,vg=null,Wu=null;function Yw(){if(Wu)return Wu;var t,e=vg,n=e.length,r,i="value"in xi?xi.value:xi.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Wu=i.slice(t,1<r?1-r:void 0)}function $u(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function lu(){return!0}function T1(){return!1}function wn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?lu:T1,this.isPropagationStopped=T1,this}return Ke(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=lu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=lu)},persist:function(){},isPersistent:lu}),e}var aa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},yg=wn(aa),gc=Ke({},aa,{view:0,detail:0}),$6=wn(gc),Vf,zf,Oa,Ed=Ke({},gc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_g,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Oa&&(Oa&&t.type==="mousemove"?(Vf=t.screenX-Oa.screenX,zf=t.screenY-Oa.screenY):zf=Vf=0,Oa=t),Vf)},movementY:function(t){return"movementY"in t?t.movementY:zf}}),I1=wn(Ed),q6=Ke({},Ed,{dataTransfer:0}),K6=wn(q6),G6=Ke({},gc,{relatedTarget:0}),Uf=wn(G6),Q6=Ke({},aa,{animationName:0,elapsedTime:0,pseudoElement:0}),Y6=wn(Q6),X6=Ke({},aa,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),J6=wn(X6),Z6=Ke({},aa,{data:0}),k1=wn(Z6),e8={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},t8={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},n8={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function r8(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=n8[t])?!!e[t]:!1}function _g(){return r8}var i8=Ke({},gc,{key:function(t){if(t.key){var e=e8[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=$u(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?t8[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_g,charCode:function(t){return t.type==="keypress"?$u(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?$u(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),s8=wn(i8),o8=Ke({},Ed,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),P1=wn(o8),a8=Ke({},gc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_g}),l8=wn(a8),c8=Ke({},aa,{propertyName:0,elapsedTime:0,pseudoElement:0}),u8=wn(c8),h8=Ke({},Ed,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),d8=wn(h8),f8=[9,13,27,32],Eg=jr&&"CompositionEvent"in window,hl=null;jr&&"documentMode"in document&&(hl=document.documentMode);var p8=jr&&"TextEvent"in window&&!hl,Xw=jr&&(!Eg||hl&&8<hl&&11>=hl),D1=" ",R1=!1;function Jw(t,e){switch(t){case"keyup":return f8.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zw(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var yo=!1;function m8(t,e){switch(t){case"compositionend":return Zw(e);case"keypress":return e.which!==32?null:(R1=!0,D1);case"textInput":return t=e.data,t===D1&&R1?null:t;default:return null}}function g8(t,e){if(yo)return t==="compositionend"||!Eg&&Jw(t,e)?(t=Yw(),Wu=vg=xi=null,yo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Xw&&e.locale!=="ko"?null:e.data;default:return null}}var x8={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function N1(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!x8[t.type]:e==="textarea"}function e4(t,e,n,r){Dw(r),e=Sh(e,"onChange"),0<e.length&&(n=new yg("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var dl=null,Ml=null;function v8(t){h4(t,0)}function wd(t){var e=wo(t);if(Cw(e))return t}function y8(t,e){if(t==="change")return e}var t4=!1;if(jr){var Hf;if(jr){var Wf="oninput"in document;if(!Wf){var F1=document.createElement("div");F1.setAttribute("oninput","return;"),Wf=typeof F1.oninput=="function"}Hf=Wf}else Hf=!1;t4=Hf&&(!document.documentMode||9<document.documentMode)}function M1(){dl&&(dl.detachEvent("onpropertychange",n4),Ml=dl=null)}function n4(t){if(t.propertyName==="value"&&wd(Ml)){var e=[];e4(e,Ml,t,fg(t)),Mw(v8,e)}}function _8(t,e,n){t==="focusin"?(M1(),dl=e,Ml=n,dl.attachEvent("onpropertychange",n4)):t==="focusout"&&M1()}function E8(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return wd(Ml)}function w8(t,e){if(t==="click")return wd(e)}function b8(t,e){if(t==="input"||t==="change")return wd(e)}function C8(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Wn=typeof Object.is=="function"?Object.is:C8;function Ol(t,e){if(Wn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!gp.call(e,i)||!Wn(t[i],e[i]))return!1}return!0}function O1(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function B1(t,e){var n=O1(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=O1(n)}}function r4(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?r4(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function i4(){for(var t=window,e=yh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=yh(t.document)}return e}function wg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function A8(t){var e=i4(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&r4(n.ownerDocument.documentElement,n)){if(r!==null&&wg(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=B1(n,s);var o=B1(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var S8=jr&&"documentMode"in document&&11>=document.documentMode,_o=null,Mp=null,fl=null,Op=!1;function L1(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Op||_o==null||_o!==yh(r)||(r=_o,"selectionStart"in r&&wg(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),fl&&Ol(fl,r)||(fl=r,r=Sh(Mp,"onSelect"),0<r.length&&(e=new yg("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=_o)))}function cu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Eo={animationend:cu("Animation","AnimationEnd"),animationiteration:cu("Animation","AnimationIteration"),animationstart:cu("Animation","AnimationStart"),transitionend:cu("Transition","TransitionEnd")},$f={},s4={};jr&&(s4=document.createElement("div").style,"AnimationEvent"in window||(delete Eo.animationend.animation,delete Eo.animationiteration.animation,delete Eo.animationstart.animation),"TransitionEvent"in window||delete Eo.transitionend.transition);function bd(t){if($f[t])return $f[t];if(!Eo[t])return t;var e=Eo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in s4)return $f[t]=e[n];return t}var o4=bd("animationend"),a4=bd("animationiteration"),l4=bd("animationstart"),c4=bd("transitionend"),u4=new Map,j1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ki(t,e){u4.set(t,e),Ws(e,[t])}for(var qf=0;qf<j1.length;qf++){var Kf=j1[qf],T8=Kf.toLowerCase(),I8=Kf[0].toUpperCase()+Kf.slice(1);Ki(T8,"on"+I8)}Ki(o4,"onAnimationEnd");Ki(a4,"onAnimationIteration");Ki(l4,"onAnimationStart");Ki("dblclick","onDoubleClick");Ki("focusin","onFocus");Ki("focusout","onBlur");Ki(c4,"onTransitionEnd");Uo("onMouseEnter",["mouseout","mouseover"]);Uo("onMouseLeave",["mouseout","mouseover"]);Uo("onPointerEnter",["pointerout","pointerover"]);Uo("onPointerLeave",["pointerout","pointerover"]);Ws("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ws("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ws("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ws("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ws("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ws("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ya="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),k8=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ya));function V1(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,T6(r,e,void 0,t),t.currentTarget=null}function h4(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;V1(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;V1(i,a,c),s=l}}}if(Eh)throw t=Dp,Eh=!1,Dp=null,t}function Fe(t,e){var n=e[zp];n===void 0&&(n=e[zp]=new Set);var r=t+"__bubble";n.has(r)||(d4(e,t,2,!1),n.add(r))}function Gf(t,e,n){var r=0;e&&(r|=4),d4(n,t,r,e)}var uu="_reactListening"+Math.random().toString(36).slice(2);function Bl(t){if(!t[uu]){t[uu]=!0,yw.forEach(function(n){n!=="selectionchange"&&(k8.has(n)||Gf(n,!1,t),Gf(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[uu]||(e[uu]=!0,Gf("selectionchange",!1,e))}}function d4(t,e,n,r){switch(Qw(e)){case 1:var i=H6;break;case 4:i=W6;break;default:i=xg}n=i.bind(null,e,n,t),i=void 0,!Pp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Qf(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=xs(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}Mw(function(){var c=s,u=fg(n),d=[];e:{var f=u4.get(t);if(f!==void 0){var m=yg,x=t;switch(t){case"keypress":if($u(n)===0)break e;case"keydown":case"keyup":m=s8;break;case"focusin":x="focus",m=Uf;break;case"focusout":x="blur",m=Uf;break;case"beforeblur":case"afterblur":m=Uf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=I1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=K6;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=l8;break;case o4:case a4:case l4:m=Y6;break;case c4:m=u8;break;case"scroll":m=$6;break;case"wheel":m=d8;break;case"copy":case"cut":case"paste":m=J6;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=P1}var y=(e&4)!==0,w=!y&&t==="scroll",v=y?f!==null?f+"Capture":null:f;y=[];for(var g=c,_;g!==null;){_=g;var A=_.stateNode;if(_.tag===5&&A!==null&&(_=A,v!==null&&(A=Dl(g,v),A!=null&&y.push(Ll(g,A,_)))),w)break;g=g.return}0<y.length&&(f=new m(f,x,null,n,u),d.push({event:f,listeners:y}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",f&&n!==Ip&&(x=n.relatedTarget||n.fromElement)&&(xs(x)||x[Vr]))break e;if((m||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,m?(x=n.relatedTarget||n.toElement,m=c,x=x?xs(x):null,x!==null&&(w=$s(x),x!==w||x.tag!==5&&x.tag!==6)&&(x=null)):(m=null,x=c),m!==x)){if(y=I1,A="onMouseLeave",v="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(y=P1,A="onPointerLeave",v="onPointerEnter",g="pointer"),w=m==null?f:wo(m),_=x==null?f:wo(x),f=new y(A,g+"leave",m,n,u),f.target=w,f.relatedTarget=_,A=null,xs(u)===c&&(y=new y(v,g+"enter",x,n,u),y.target=_,y.relatedTarget=w,A=y),w=A,m&&x)t:{for(y=m,v=x,g=0,_=y;_;_=uo(_))g++;for(_=0,A=v;A;A=uo(A))_++;for(;0<g-_;)y=uo(y),g--;for(;0<_-g;)v=uo(v),_--;for(;g--;){if(y===v||v!==null&&y===v.alternate)break t;y=uo(y),v=uo(v)}y=null}else y=null;m!==null&&z1(d,f,m,y,!1),x!==null&&w!==null&&z1(d,w,x,y,!0)}}e:{if(f=c?wo(c):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var P=y8;else if(N1(f))if(t4)P=b8;else{P=E8;var D=_8}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(P=w8);if(P&&(P=P(t,c))){e4(d,P,n,u);break e}D&&D(t,f,c),t==="focusout"&&(D=f._wrapperState)&&D.controlled&&f.type==="number"&&bp(f,"number",f.value)}switch(D=c?wo(c):window,t){case"focusin":(N1(D)||D.contentEditable==="true")&&(_o=D,Mp=c,fl=null);break;case"focusout":fl=Mp=_o=null;break;case"mousedown":Op=!0;break;case"contextmenu":case"mouseup":case"dragend":Op=!1,L1(d,n,u);break;case"selectionchange":if(S8)break;case"keydown":case"keyup":L1(d,n,u)}var C;if(Eg)e:{switch(t){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else yo?Jw(t,n)&&(b="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(b="onCompositionStart");b&&(Xw&&n.locale!=="ko"&&(yo||b!=="onCompositionStart"?b==="onCompositionEnd"&&yo&&(C=Yw()):(xi=u,vg="value"in xi?xi.value:xi.textContent,yo=!0)),D=Sh(c,b),0<D.length&&(b=new k1(b,t,null,n,u),d.push({event:b,listeners:D}),C?b.data=C:(C=Zw(n),C!==null&&(b.data=C)))),(C=p8?m8(t,n):g8(t,n))&&(c=Sh(c,"onBeforeInput"),0<c.length&&(u=new k1("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=C))}h4(d,e)})}function Ll(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Sh(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Dl(t,n),s!=null&&r.unshift(Ll(t,s,i)),s=Dl(t,e),s!=null&&r.push(Ll(t,s,i))),t=t.return}return r}function uo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function z1(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Dl(n,s),l!=null&&o.unshift(Ll(n,l,a))):i||(l=Dl(n,s),l!=null&&o.push(Ll(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var P8=/\r\n?/g,D8=/\u0000|\uFFFD/g;function U1(t){return(typeof t=="string"?t:""+t).replace(P8,`
`).replace(D8,"")}function hu(t,e,n){if(e=U1(e),U1(t)!==e&&n)throw Error(Y(425))}function Th(){}var Bp=null,Lp=null;function jp(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Vp=typeof setTimeout=="function"?setTimeout:void 0,R8=typeof clearTimeout=="function"?clearTimeout:void 0,H1=typeof Promise=="function"?Promise:void 0,N8=typeof queueMicrotask=="function"?queueMicrotask:typeof H1<"u"?function(t){return H1.resolve(null).then(t).catch(F8)}:Vp;function F8(t){setTimeout(function(){throw t})}function Yf(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Fl(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Fl(e)}function Ii(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function W1(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var la=Math.random().toString(36).slice(2),nr="__reactFiber$"+la,jl="__reactProps$"+la,Vr="__reactContainer$"+la,zp="__reactEvents$"+la,M8="__reactListeners$"+la,O8="__reactHandles$"+la;function xs(t){var e=t[nr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Vr]||n[nr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=W1(t);t!==null;){if(n=t[nr])return n;t=W1(t)}return e}t=n,n=t.parentNode}return null}function xc(t){return t=t[nr]||t[Vr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function wo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Y(33))}function Cd(t){return t[jl]||null}var Up=[],bo=-1;function Gi(t){return{current:t}}function Oe(t){0>bo||(t.current=Up[bo],Up[bo]=null,bo--)}function Re(t,e){bo++,Up[bo]=t.current,t.current=e}var Vi={},zt=Gi(Vi),an=Gi(!1),ks=Vi;function Ho(t,e){var n=t.type.contextTypes;if(!n)return Vi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function ln(t){return t=t.childContextTypes,t!=null}function Ih(){Oe(an),Oe(zt)}function $1(t,e,n){if(zt.current!==Vi)throw Error(Y(168));Re(zt,e),Re(an,n)}function f4(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Y(108,_6(t)||"Unknown",i));return Ke({},n,r)}function kh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Vi,ks=zt.current,Re(zt,t),Re(an,an.current),!0}function q1(t,e,n){var r=t.stateNode;if(!r)throw Error(Y(169));n?(t=f4(t,e,ks),r.__reactInternalMemoizedMergedChildContext=t,Oe(an),Oe(zt),Re(zt,t)):Oe(an),Re(an,n)}var Cr=null,Ad=!1,Xf=!1;function p4(t){Cr===null?Cr=[t]:Cr.push(t)}function B8(t){Ad=!0,p4(t)}function Qi(){if(!Xf&&Cr!==null){Xf=!0;var t=0,e=Se;try{var n=Cr;for(Se=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Cr=null,Ad=!1}catch(i){throw Cr!==null&&(Cr=Cr.slice(t+1)),jw(pg,Qi),i}finally{Se=e,Xf=!1}}return null}var Co=[],Ao=0,Ph=null,Dh=0,Sn=[],Tn=0,Ps=null,Tr=1,Ir="";function ds(t,e){Co[Ao++]=Dh,Co[Ao++]=Ph,Ph=t,Dh=e}function m4(t,e,n){Sn[Tn++]=Tr,Sn[Tn++]=Ir,Sn[Tn++]=Ps,Ps=t;var r=Tr;t=Ir;var i=32-Vn(r)-1;r&=~(1<<i),n+=1;var s=32-Vn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Tr=1<<32-Vn(e)+i|n<<i|r,Ir=s+t}else Tr=1<<s|n<<i|r,Ir=t}function bg(t){t.return!==null&&(ds(t,1),m4(t,1,0))}function Cg(t){for(;t===Ph;)Ph=Co[--Ao],Co[Ao]=null,Dh=Co[--Ao],Co[Ao]=null;for(;t===Ps;)Ps=Sn[--Tn],Sn[Tn]=null,Ir=Sn[--Tn],Sn[Tn]=null,Tr=Sn[--Tn],Sn[Tn]=null}var yn=null,xn=null,je=!1,Ln=null;function g4(t,e){var n=In(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function K1(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,yn=t,xn=Ii(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,yn=t,xn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ps!==null?{id:Tr,overflow:Ir}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=In(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,yn=t,xn=null,!0):!1;default:return!1}}function Hp(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Wp(t){if(je){var e=xn;if(e){var n=e;if(!K1(t,e)){if(Hp(t))throw Error(Y(418));e=Ii(n.nextSibling);var r=yn;e&&K1(t,e)?g4(r,n):(t.flags=t.flags&-4097|2,je=!1,yn=t)}}else{if(Hp(t))throw Error(Y(418));t.flags=t.flags&-4097|2,je=!1,yn=t}}}function G1(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;yn=t}function du(t){if(t!==yn)return!1;if(!je)return G1(t),je=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!jp(t.type,t.memoizedProps)),e&&(e=xn)){if(Hp(t))throw x4(),Error(Y(418));for(;e;)g4(t,e),e=Ii(e.nextSibling)}if(G1(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Y(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){xn=Ii(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}xn=null}}else xn=yn?Ii(t.stateNode.nextSibling):null;return!0}function x4(){for(var t=xn;t;)t=Ii(t.nextSibling)}function Wo(){xn=yn=null,je=!1}function Ag(t){Ln===null?Ln=[t]:Ln.push(t)}var L8=Qr.ReactCurrentBatchConfig;function Ba(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Y(309));var r=n.stateNode}if(!r)throw Error(Y(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(Y(284));if(!n._owner)throw Error(Y(290,t))}return t}function fu(t,e){throw t=Object.prototype.toString.call(e),Error(Y(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Q1(t){var e=t._init;return e(t._payload)}function v4(t){function e(v,g){if(t){var _=v.deletions;_===null?(v.deletions=[g],v.flags|=16):_.push(g)}}function n(v,g){if(!t)return null;for(;g!==null;)e(v,g),g=g.sibling;return null}function r(v,g){for(v=new Map;g!==null;)g.key!==null?v.set(g.key,g):v.set(g.index,g),g=g.sibling;return v}function i(v,g){return v=Ri(v,g),v.index=0,v.sibling=null,v}function s(v,g,_){return v.index=_,t?(_=v.alternate,_!==null?(_=_.index,_<g?(v.flags|=2,g):_):(v.flags|=2,g)):(v.flags|=1048576,g)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,g,_,A){return g===null||g.tag!==6?(g=i0(_,v.mode,A),g.return=v,g):(g=i(g,_),g.return=v,g)}function l(v,g,_,A){var P=_.type;return P===vo?u(v,g,_.props.children,A,_.key):g!==null&&(g.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===li&&Q1(P)===g.type)?(A=i(g,_.props),A.ref=Ba(v,g,_),A.return=v,A):(A=Ju(_.type,_.key,_.props,null,v.mode,A),A.ref=Ba(v,g,_),A.return=v,A)}function c(v,g,_,A){return g===null||g.tag!==4||g.stateNode.containerInfo!==_.containerInfo||g.stateNode.implementation!==_.implementation?(g=s0(_,v.mode,A),g.return=v,g):(g=i(g,_.children||[]),g.return=v,g)}function u(v,g,_,A,P){return g===null||g.tag!==7?(g=Cs(_,v.mode,A,P),g.return=v,g):(g=i(g,_),g.return=v,g)}function d(v,g,_){if(typeof g=="string"&&g!==""||typeof g=="number")return g=i0(""+g,v.mode,_),g.return=v,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case nu:return _=Ju(g.type,g.key,g.props,null,v.mode,_),_.ref=Ba(v,null,g),_.return=v,_;case xo:return g=s0(g,v.mode,_),g.return=v,g;case li:var A=g._init;return d(v,A(g._payload),_)}if(Ga(g)||Ra(g))return g=Cs(g,v.mode,_,null),g.return=v,g;fu(v,g)}return null}function f(v,g,_,A){var P=g!==null?g.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return P!==null?null:a(v,g,""+_,A);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case nu:return _.key===P?l(v,g,_,A):null;case xo:return _.key===P?c(v,g,_,A):null;case li:return P=_._init,f(v,g,P(_._payload),A)}if(Ga(_)||Ra(_))return P!==null?null:u(v,g,_,A,null);fu(v,_)}return null}function m(v,g,_,A,P){if(typeof A=="string"&&A!==""||typeof A=="number")return v=v.get(_)||null,a(g,v,""+A,P);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case nu:return v=v.get(A.key===null?_:A.key)||null,l(g,v,A,P);case xo:return v=v.get(A.key===null?_:A.key)||null,c(g,v,A,P);case li:var D=A._init;return m(v,g,_,D(A._payload),P)}if(Ga(A)||Ra(A))return v=v.get(_)||null,u(g,v,A,P,null);fu(g,A)}return null}function x(v,g,_,A){for(var P=null,D=null,C=g,b=g=0,k=null;C!==null&&b<_.length;b++){C.index>b?(k=C,C=null):k=C.sibling;var T=f(v,C,_[b],A);if(T===null){C===null&&(C=k);break}t&&C&&T.alternate===null&&e(v,C),g=s(T,g,b),D===null?P=T:D.sibling=T,D=T,C=k}if(b===_.length)return n(v,C),je&&ds(v,b),P;if(C===null){for(;b<_.length;b++)C=d(v,_[b],A),C!==null&&(g=s(C,g,b),D===null?P=C:D.sibling=C,D=C);return je&&ds(v,b),P}for(C=r(v,C);b<_.length;b++)k=m(C,v,b,_[b],A),k!==null&&(t&&k.alternate!==null&&C.delete(k.key===null?b:k.key),g=s(k,g,b),D===null?P=k:D.sibling=k,D=k);return t&&C.forEach(function(I){return e(v,I)}),je&&ds(v,b),P}function y(v,g,_,A){var P=Ra(_);if(typeof P!="function")throw Error(Y(150));if(_=P.call(_),_==null)throw Error(Y(151));for(var D=P=null,C=g,b=g=0,k=null,T=_.next();C!==null&&!T.done;b++,T=_.next()){C.index>b?(k=C,C=null):k=C.sibling;var I=f(v,C,T.value,A);if(I===null){C===null&&(C=k);break}t&&C&&I.alternate===null&&e(v,C),g=s(I,g,b),D===null?P=I:D.sibling=I,D=I,C=k}if(T.done)return n(v,C),je&&ds(v,b),P;if(C===null){for(;!T.done;b++,T=_.next())T=d(v,T.value,A),T!==null&&(g=s(T,g,b),D===null?P=T:D.sibling=T,D=T);return je&&ds(v,b),P}for(C=r(v,C);!T.done;b++,T=_.next())T=m(C,v,b,T.value,A),T!==null&&(t&&T.alternate!==null&&C.delete(T.key===null?b:T.key),g=s(T,g,b),D===null?P=T:D.sibling=T,D=T);return t&&C.forEach(function(N){return e(v,N)}),je&&ds(v,b),P}function w(v,g,_,A){if(typeof _=="object"&&_!==null&&_.type===vo&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case nu:e:{for(var P=_.key,D=g;D!==null;){if(D.key===P){if(P=_.type,P===vo){if(D.tag===7){n(v,D.sibling),g=i(D,_.props.children),g.return=v,v=g;break e}}else if(D.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===li&&Q1(P)===D.type){n(v,D.sibling),g=i(D,_.props),g.ref=Ba(v,D,_),g.return=v,v=g;break e}n(v,D);break}else e(v,D);D=D.sibling}_.type===vo?(g=Cs(_.props.children,v.mode,A,_.key),g.return=v,v=g):(A=Ju(_.type,_.key,_.props,null,v.mode,A),A.ref=Ba(v,g,_),A.return=v,v=A)}return o(v);case xo:e:{for(D=_.key;g!==null;){if(g.key===D)if(g.tag===4&&g.stateNode.containerInfo===_.containerInfo&&g.stateNode.implementation===_.implementation){n(v,g.sibling),g=i(g,_.children||[]),g.return=v,v=g;break e}else{n(v,g);break}else e(v,g);g=g.sibling}g=s0(_,v.mode,A),g.return=v,v=g}return o(v);case li:return D=_._init,w(v,g,D(_._payload),A)}if(Ga(_))return x(v,g,_,A);if(Ra(_))return y(v,g,_,A);fu(v,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,g!==null&&g.tag===6?(n(v,g.sibling),g=i(g,_),g.return=v,v=g):(n(v,g),g=i0(_,v.mode,A),g.return=v,v=g),o(v)):n(v,g)}return w}var $o=v4(!0),y4=v4(!1),Rh=Gi(null),Nh=null,So=null,Sg=null;function Tg(){Sg=So=Nh=null}function Ig(t){var e=Rh.current;Oe(Rh),t._currentValue=e}function $p(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Fo(t,e){Nh=t,Sg=So=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(on=!0),t.firstContext=null)}function Dn(t){var e=t._currentValue;if(Sg!==t)if(t={context:t,memoizedValue:e,next:null},So===null){if(Nh===null)throw Error(Y(308));So=t,Nh.dependencies={lanes:0,firstContext:t}}else So=So.next=t;return e}var vs=null;function kg(t){vs===null?vs=[t]:vs.push(t)}function _4(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,kg(e)):(n.next=i.next,i.next=n),e.interleaved=n,zr(t,r)}function zr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ci=!1;function Pg(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function E4(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Or(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ki(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ee&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,zr(t,n)}return i=r.interleaved,i===null?(e.next=e,kg(r)):(e.next=i.next,i.next=e),r.interleaved=e,zr(t,n)}function qu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,mg(t,n)}}function Y1(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Fh(t,e,n,r){var i=t.updateQueue;ci=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,u=c=l=null,a=s;do{var f=a.lane,m=a.eventTime;if((r&f)===f){u!==null&&(u=u.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var x=t,y=a;switch(f=e,m=n,y.tag){case 1:if(x=y.payload,typeof x=="function"){d=x.call(m,d,f);break e}d=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=y.payload,f=typeof x=="function"?x.call(m,d,f):x,f==null)break e;d=Ke({},d,f);break e;case 2:ci=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else m={eventTime:m,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=m,l=d):u=u.next=m,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(u===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Rs|=o,t.lanes=o,t.memoizedState=d}}function X1(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Y(191,i));i.call(r)}}}var vc={},or=Gi(vc),Vl=Gi(vc),zl=Gi(vc);function ys(t){if(t===vc)throw Error(Y(174));return t}function Dg(t,e){switch(Re(zl,e),Re(Vl,t),Re(or,vc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ap(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ap(e,t)}Oe(or),Re(or,e)}function qo(){Oe(or),Oe(Vl),Oe(zl)}function w4(t){ys(zl.current);var e=ys(or.current),n=Ap(e,t.type);e!==n&&(Re(Vl,t),Re(or,n))}function Rg(t){Vl.current===t&&(Oe(or),Oe(Vl))}var We=Gi(0);function Mh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Jf=[];function Ng(){for(var t=0;t<Jf.length;t++)Jf[t]._workInProgressVersionPrimary=null;Jf.length=0}var Ku=Qr.ReactCurrentDispatcher,Zf=Qr.ReactCurrentBatchConfig,Ds=0,$e=null,ht=null,gt=null,Oh=!1,pl=!1,Ul=0,j8=0;function Rt(){throw Error(Y(321))}function Fg(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Wn(t[n],e[n]))return!1;return!0}function Mg(t,e,n,r,i,s){if(Ds=s,$e=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ku.current=t===null||t.memoizedState===null?H8:W8,t=n(r,i),pl){s=0;do{if(pl=!1,Ul=0,25<=s)throw Error(Y(301));s+=1,gt=ht=null,e.updateQueue=null,Ku.current=$8,t=n(r,i)}while(pl)}if(Ku.current=Bh,e=ht!==null&&ht.next!==null,Ds=0,gt=ht=$e=null,Oh=!1,e)throw Error(Y(300));return t}function Og(){var t=Ul!==0;return Ul=0,t}function er(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gt===null?$e.memoizedState=gt=t:gt=gt.next=t,gt}function Rn(){if(ht===null){var t=$e.alternate;t=t!==null?t.memoizedState:null}else t=ht.next;var e=gt===null?$e.memoizedState:gt.next;if(e!==null)gt=e,ht=t;else{if(t===null)throw Error(Y(310));ht=t,t={memoizedState:ht.memoizedState,baseState:ht.baseState,baseQueue:ht.baseQueue,queue:ht.queue,next:null},gt===null?$e.memoizedState=gt=t:gt=gt.next=t}return gt}function Hl(t,e){return typeof e=="function"?e(t):e}function e0(t){var e=Rn(),n=e.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=t;var r=ht,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((Ds&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,$e.lanes|=u,Rs|=u}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,Wn(r,e.memoizedState)||(on=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,$e.lanes|=s,Rs|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function t0(t){var e=Rn(),n=e.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Wn(s,e.memoizedState)||(on=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function b4(){}function C4(t,e){var n=$e,r=Rn(),i=e(),s=!Wn(r.memoizedState,i);if(s&&(r.memoizedState=i,on=!0),r=r.queue,Bg(T4.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||gt!==null&&gt.memoizedState.tag&1){if(n.flags|=2048,Wl(9,S4.bind(null,n,r,i,e),void 0,null),vt===null)throw Error(Y(349));Ds&30||A4(n,e,i)}return i}function A4(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=$e.updateQueue,e===null?(e={lastEffect:null,stores:null},$e.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function S4(t,e,n,r){e.value=n,e.getSnapshot=r,I4(e)&&k4(t)}function T4(t,e,n){return n(function(){I4(e)&&k4(t)})}function I4(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Wn(t,n)}catch{return!0}}function k4(t){var e=zr(t,1);e!==null&&zn(e,t,1,-1)}function J1(t){var e=er();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Hl,lastRenderedState:t},e.queue=t,t=t.dispatch=U8.bind(null,$e,t),[e.memoizedState,t]}function Wl(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=$e.updateQueue,e===null?(e={lastEffect:null,stores:null},$e.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function P4(){return Rn().memoizedState}function Gu(t,e,n,r){var i=er();$e.flags|=t,i.memoizedState=Wl(1|e,n,void 0,r===void 0?null:r)}function Sd(t,e,n,r){var i=Rn();r=r===void 0?null:r;var s=void 0;if(ht!==null){var o=ht.memoizedState;if(s=o.destroy,r!==null&&Fg(r,o.deps)){i.memoizedState=Wl(e,n,s,r);return}}$e.flags|=t,i.memoizedState=Wl(1|e,n,s,r)}function Z1(t,e){return Gu(8390656,8,t,e)}function Bg(t,e){return Sd(2048,8,t,e)}function D4(t,e){return Sd(4,2,t,e)}function R4(t,e){return Sd(4,4,t,e)}function N4(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function F4(t,e,n){return n=n!=null?n.concat([t]):null,Sd(4,4,N4.bind(null,e,t),n)}function Lg(){}function M4(t,e){var n=Rn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Fg(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function O4(t,e){var n=Rn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Fg(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function B4(t,e,n){return Ds&21?(Wn(n,e)||(n=Uw(),$e.lanes|=n,Rs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,on=!0),t.memoizedState=n)}function V8(t,e){var n=Se;Se=n!==0&&4>n?n:4,t(!0);var r=Zf.transition;Zf.transition={};try{t(!1),e()}finally{Se=n,Zf.transition=r}}function L4(){return Rn().memoizedState}function z8(t,e,n){var r=Di(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},j4(t))V4(e,n);else if(n=_4(t,e,n,r),n!==null){var i=Kt();zn(n,t,r,i),z4(n,e,r)}}function U8(t,e,n){var r=Di(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(j4(t))V4(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Wn(a,o)){var l=e.interleaved;l===null?(i.next=i,kg(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=_4(t,e,i,r),n!==null&&(i=Kt(),zn(n,t,r,i),z4(n,e,r))}}function j4(t){var e=t.alternate;return t===$e||e!==null&&e===$e}function V4(t,e){pl=Oh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function z4(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,mg(t,n)}}var Bh={readContext:Dn,useCallback:Rt,useContext:Rt,useEffect:Rt,useImperativeHandle:Rt,useInsertionEffect:Rt,useLayoutEffect:Rt,useMemo:Rt,useReducer:Rt,useRef:Rt,useState:Rt,useDebugValue:Rt,useDeferredValue:Rt,useTransition:Rt,useMutableSource:Rt,useSyncExternalStore:Rt,useId:Rt,unstable_isNewReconciler:!1},H8={readContext:Dn,useCallback:function(t,e){return er().memoizedState=[t,e===void 0?null:e],t},useContext:Dn,useEffect:Z1,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Gu(4194308,4,N4.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Gu(4194308,4,t,e)},useInsertionEffect:function(t,e){return Gu(4,2,t,e)},useMemo:function(t,e){var n=er();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=er();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=z8.bind(null,$e,t),[r.memoizedState,t]},useRef:function(t){var e=er();return t={current:t},e.memoizedState=t},useState:J1,useDebugValue:Lg,useDeferredValue:function(t){return er().memoizedState=t},useTransition:function(){var t=J1(!1),e=t[0];return t=V8.bind(null,t[1]),er().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=$e,i=er();if(je){if(n===void 0)throw Error(Y(407));n=n()}else{if(n=e(),vt===null)throw Error(Y(349));Ds&30||A4(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Z1(T4.bind(null,r,s,t),[t]),r.flags|=2048,Wl(9,S4.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=er(),e=vt.identifierPrefix;if(je){var n=Ir,r=Tr;n=(r&~(1<<32-Vn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ul++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=j8++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},W8={readContext:Dn,useCallback:M4,useContext:Dn,useEffect:Bg,useImperativeHandle:F4,useInsertionEffect:D4,useLayoutEffect:R4,useMemo:O4,useReducer:e0,useRef:P4,useState:function(){return e0(Hl)},useDebugValue:Lg,useDeferredValue:function(t){var e=Rn();return B4(e,ht.memoizedState,t)},useTransition:function(){var t=e0(Hl)[0],e=Rn().memoizedState;return[t,e]},useMutableSource:b4,useSyncExternalStore:C4,useId:L4,unstable_isNewReconciler:!1},$8={readContext:Dn,useCallback:M4,useContext:Dn,useEffect:Bg,useImperativeHandle:F4,useInsertionEffect:D4,useLayoutEffect:R4,useMemo:O4,useReducer:t0,useRef:P4,useState:function(){return t0(Hl)},useDebugValue:Lg,useDeferredValue:function(t){var e=Rn();return ht===null?e.memoizedState=t:B4(e,ht.memoizedState,t)},useTransition:function(){var t=t0(Hl)[0],e=Rn().memoizedState;return[t,e]},useMutableSource:b4,useSyncExternalStore:C4,useId:L4,unstable_isNewReconciler:!1};function On(t,e){if(t&&t.defaultProps){e=Ke({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function qp(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ke({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Td={isMounted:function(t){return(t=t._reactInternals)?$s(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Kt(),i=Di(t),s=Or(r,i);s.payload=e,n!=null&&(s.callback=n),e=ki(t,s,i),e!==null&&(zn(e,t,i,r),qu(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Kt(),i=Di(t),s=Or(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=ki(t,s,i),e!==null&&(zn(e,t,i,r),qu(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Kt(),r=Di(t),i=Or(n,r);i.tag=2,e!=null&&(i.callback=e),e=ki(t,i,r),e!==null&&(zn(e,t,r,n),qu(e,t,r))}};function ey(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Ol(n,r)||!Ol(i,s):!0}function U4(t,e,n){var r=!1,i=Vi,s=e.contextType;return typeof s=="object"&&s!==null?s=Dn(s):(i=ln(e)?ks:zt.current,r=e.contextTypes,s=(r=r!=null)?Ho(t,i):Vi),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Td,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function ty(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Td.enqueueReplaceState(e,e.state,null)}function Kp(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Pg(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Dn(s):(s=ln(e)?ks:zt.current,i.context=Ho(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(qp(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Td.enqueueReplaceState(i,i.state,null),Fh(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Ko(t,e){try{var n="",r=e;do n+=y6(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function n0(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Gp(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var q8=typeof WeakMap=="function"?WeakMap:Map;function H4(t,e,n){n=Or(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){jh||(jh=!0,im=r),Gp(t,e)},n}function W4(t,e,n){n=Or(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Gp(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Gp(t,e),typeof r!="function"&&(Pi===null?Pi=new Set([this]):Pi.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function ny(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new q8;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=oI.bind(null,t,e,n),e.then(t,t))}function ry(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function iy(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Or(-1,1),e.tag=2,ki(n,e,1))),n.lanes|=1),t)}var K8=Qr.ReactCurrentOwner,on=!1;function $t(t,e,n,r){e.child=t===null?y4(e,null,n,r):$o(e,t.child,n,r)}function sy(t,e,n,r,i){n=n.render;var s=e.ref;return Fo(e,i),r=Mg(t,e,n,r,s,i),n=Og(),t!==null&&!on?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ur(t,e,i)):(je&&n&&bg(e),e.flags|=1,$t(t,e,r,i),e.child)}function oy(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!qg(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,$4(t,e,s,r,i)):(t=Ju(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Ol,n(o,r)&&t.ref===e.ref)return Ur(t,e,i)}return e.flags|=1,t=Ri(s,r),t.ref=e.ref,t.return=e,e.child=t}function $4(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Ol(s,r)&&t.ref===e.ref)if(on=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(on=!0);else return e.lanes=t.lanes,Ur(t,e,i)}return Qp(t,e,n,r,i)}function q4(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Re(Io,mn),mn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Re(Io,mn),mn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Re(Io,mn),mn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Re(Io,mn),mn|=r;return $t(t,e,i,n),e.child}function K4(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Qp(t,e,n,r,i){var s=ln(n)?ks:zt.current;return s=Ho(e,s),Fo(e,i),n=Mg(t,e,n,r,s,i),r=Og(),t!==null&&!on?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ur(t,e,i)):(je&&r&&bg(e),e.flags|=1,$t(t,e,n,i),e.child)}function ay(t,e,n,r,i){if(ln(n)){var s=!0;kh(e)}else s=!1;if(Fo(e,i),e.stateNode===null)Qu(t,e),U4(e,n,r),Kp(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Dn(c):(c=ln(n)?ks:zt.current,c=Ho(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&ty(e,o,r,c),ci=!1;var f=e.memoizedState;o.state=f,Fh(e,r,o,i),l=e.memoizedState,a!==r||f!==l||an.current||ci?(typeof u=="function"&&(qp(e,n,u,r),l=e.memoizedState),(a=ci||ey(e,n,a,r,f,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,E4(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:On(e.type,a),o.props=c,d=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Dn(l):(l=ln(n)?ks:zt.current,l=Ho(e,l));var m=n.getDerivedStateFromProps;(u=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&ty(e,o,r,l),ci=!1,f=e.memoizedState,o.state=f,Fh(e,r,o,i);var x=e.memoizedState;a!==d||f!==x||an.current||ci?(typeof m=="function"&&(qp(e,n,m,r),x=e.memoizedState),(c=ci||ey(e,n,c,r,f,x,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,x,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,x,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=x),o.props=r,o.state=x,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Yp(t,e,n,r,s,i)}function Yp(t,e,n,r,i,s){K4(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&q1(e,n,!1),Ur(t,e,s);r=e.stateNode,K8.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=$o(e,t.child,null,s),e.child=$o(e,null,a,s)):$t(t,e,a,s),e.memoizedState=r.state,i&&q1(e,n,!0),e.child}function G4(t){var e=t.stateNode;e.pendingContext?$1(t,e.pendingContext,e.pendingContext!==e.context):e.context&&$1(t,e.context,!1),Dg(t,e.containerInfo)}function ly(t,e,n,r,i){return Wo(),Ag(i),e.flags|=256,$t(t,e,n,r),e.child}var Xp={dehydrated:null,treeContext:null,retryLane:0};function Jp(t){return{baseLanes:t,cachePool:null,transitions:null}}function Q4(t,e,n){var r=e.pendingProps,i=We.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Re(We,i&1),t===null)return Wp(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Pd(o,r,0,null),t=Cs(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Jp(n),e.memoizedState=Xp,t):jg(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return G8(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Ri(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Ri(a,s):(s=Cs(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Jp(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Xp,r}return s=t.child,t=s.sibling,r=Ri(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function jg(t,e){return e=Pd({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function pu(t,e,n,r){return r!==null&&Ag(r),$o(e,t.child,null,n),t=jg(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function G8(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=n0(Error(Y(422))),pu(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Pd({mode:"visible",children:r.children},i,0,null),s=Cs(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&$o(e,t.child,null,o),e.child.memoizedState=Jp(o),e.memoizedState=Xp,s);if(!(e.mode&1))return pu(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Y(419)),r=n0(s,r,void 0),pu(t,e,o,r)}if(a=(o&t.childLanes)!==0,on||a){if(r=vt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,zr(t,i),zn(r,t,i,-1))}return $g(),r=n0(Error(Y(421))),pu(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=aI.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,xn=Ii(i.nextSibling),yn=e,je=!0,Ln=null,t!==null&&(Sn[Tn++]=Tr,Sn[Tn++]=Ir,Sn[Tn++]=Ps,Tr=t.id,Ir=t.overflow,Ps=e),e=jg(e,r.children),e.flags|=4096,e)}function cy(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),$p(t.return,e,n)}function r0(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Y4(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if($t(t,e,r.children,n),r=We.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&cy(t,n,e);else if(t.tag===19)cy(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Re(We,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Mh(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),r0(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Mh(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}r0(e,!0,n,null,s);break;case"together":r0(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Qu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ur(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Rs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Y(153));if(e.child!==null){for(t=e.child,n=Ri(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ri(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Q8(t,e,n){switch(e.tag){case 3:G4(e),Wo();break;case 5:w4(e);break;case 1:ln(e.type)&&kh(e);break;case 4:Dg(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Re(Rh,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Re(We,We.current&1),e.flags|=128,null):n&e.child.childLanes?Q4(t,e,n):(Re(We,We.current&1),t=Ur(t,e,n),t!==null?t.sibling:null);Re(We,We.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Y4(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Re(We,We.current),r)break;return null;case 22:case 23:return e.lanes=0,q4(t,e,n)}return Ur(t,e,n)}var X4,Zp,J4,Z4;X4=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Zp=function(){};J4=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,ys(or.current);var s=null;switch(n){case"input":i=Ep(t,i),r=Ep(t,r),s=[];break;case"select":i=Ke({},i,{value:void 0}),r=Ke({},r,{value:void 0}),s=[];break;case"textarea":i=Cp(t,i),r=Cp(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Th)}Sp(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(kl.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(kl.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Fe("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};Z4=function(t,e,n,r){n!==r&&(e.flags|=4)};function La(t,e){if(!je)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Nt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Y8(t,e,n){var r=e.pendingProps;switch(Cg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nt(e),null;case 1:return ln(e.type)&&Ih(),Nt(e),null;case 3:return r=e.stateNode,qo(),Oe(an),Oe(zt),Ng(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(du(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ln!==null&&(am(Ln),Ln=null))),Zp(t,e),Nt(e),null;case 5:Rg(e);var i=ys(zl.current);if(n=e.type,t!==null&&e.stateNode!=null)J4(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Y(166));return Nt(e),null}if(t=ys(or.current),du(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[nr]=e,r[jl]=s,t=(e.mode&1)!==0,n){case"dialog":Fe("cancel",r),Fe("close",r);break;case"iframe":case"object":case"embed":Fe("load",r);break;case"video":case"audio":for(i=0;i<Ya.length;i++)Fe(Ya[i],r);break;case"source":Fe("error",r);break;case"img":case"image":case"link":Fe("error",r),Fe("load",r);break;case"details":Fe("toggle",r);break;case"input":v1(r,s),Fe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Fe("invalid",r);break;case"textarea":_1(r,s),Fe("invalid",r)}Sp(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&hu(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&hu(r.textContent,a,t),i=["children",""+a]):kl.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Fe("scroll",r)}switch(n){case"input":ru(r),y1(r,s,!0);break;case"textarea":ru(r),E1(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Th)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Tw(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[nr]=e,t[jl]=r,X4(t,e,!1,!1),e.stateNode=t;e:{switch(o=Tp(n,r),n){case"dialog":Fe("cancel",t),Fe("close",t),i=r;break;case"iframe":case"object":case"embed":Fe("load",t),i=r;break;case"video":case"audio":for(i=0;i<Ya.length;i++)Fe(Ya[i],t);i=r;break;case"source":Fe("error",t),i=r;break;case"img":case"image":case"link":Fe("error",t),Fe("load",t),i=r;break;case"details":Fe("toggle",t),i=r;break;case"input":v1(t,r),i=Ep(t,r),Fe("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ke({},r,{value:void 0}),Fe("invalid",t);break;case"textarea":_1(t,r),i=Cp(t,r),Fe("invalid",t);break;default:i=r}Sp(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?Pw(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Iw(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Pl(t,l):typeof l=="number"&&Pl(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(kl.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Fe("scroll",t):l!=null&&cg(t,s,l,o))}switch(n){case"input":ru(t),y1(t,r,!1);break;case"textarea":ru(t),E1(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ji(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Po(t,!!r.multiple,s,!1):r.defaultValue!=null&&Po(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Th)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Nt(e),null;case 6:if(t&&e.stateNode!=null)Z4(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Y(166));if(n=ys(zl.current),ys(or.current),du(e)){if(r=e.stateNode,n=e.memoizedProps,r[nr]=e,(s=r.nodeValue!==n)&&(t=yn,t!==null))switch(t.tag){case 3:hu(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&hu(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[nr]=e,e.stateNode=r}return Nt(e),null;case 13:if(Oe(We),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(je&&xn!==null&&e.mode&1&&!(e.flags&128))x4(),Wo(),e.flags|=98560,s=!1;else if(s=du(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(Y(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Y(317));s[nr]=e}else Wo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Nt(e),s=!1}else Ln!==null&&(am(Ln),Ln=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||We.current&1?dt===0&&(dt=3):$g())),e.updateQueue!==null&&(e.flags|=4),Nt(e),null);case 4:return qo(),Zp(t,e),t===null&&Bl(e.stateNode.containerInfo),Nt(e),null;case 10:return Ig(e.type._context),Nt(e),null;case 17:return ln(e.type)&&Ih(),Nt(e),null;case 19:if(Oe(We),s=e.memoizedState,s===null)return Nt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)La(s,!1);else{if(dt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Mh(t),o!==null){for(e.flags|=128,La(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Re(We,We.current&1|2),e.child}t=t.sibling}s.tail!==null&&st()>Go&&(e.flags|=128,r=!0,La(s,!1),e.lanes=4194304)}else{if(!r)if(t=Mh(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),La(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!je)return Nt(e),null}else 2*st()-s.renderingStartTime>Go&&n!==1073741824&&(e.flags|=128,r=!0,La(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=st(),e.sibling=null,n=We.current,Re(We,r?n&1|2:n&1),e):(Nt(e),null);case 22:case 23:return Wg(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?mn&1073741824&&(Nt(e),e.subtreeFlags&6&&(e.flags|=8192)):Nt(e),null;case 24:return null;case 25:return null}throw Error(Y(156,e.tag))}function X8(t,e){switch(Cg(e),e.tag){case 1:return ln(e.type)&&Ih(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return qo(),Oe(an),Oe(zt),Ng(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Rg(e),null;case 13:if(Oe(We),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Y(340));Wo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Oe(We),null;case 4:return qo(),null;case 10:return Ig(e.type._context),null;case 22:case 23:return Wg(),null;case 24:return null;default:return null}}var mu=!1,Bt=!1,J8=typeof WeakSet=="function"?WeakSet:Set,te=null;function To(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ye(t,e,r)}else n.current=null}function em(t,e,n){try{n()}catch(r){Ye(t,e,r)}}var uy=!1;function Z8(t,e){if(Bp=Ch,t=i4(),wg(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=t,f=null;t:for(;;){for(var m;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(m=d.firstChild)!==null;)f=d,d=m;for(;;){if(d===t)break t;if(f===n&&++c===i&&(a=o),f===s&&++u===r&&(l=o),(m=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Lp={focusedElem:t,selectionRange:n},Ch=!1,te=e;te!==null;)if(e=te,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,te=t;else for(;te!==null;){e=te;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var y=x.memoizedProps,w=x.memoizedState,v=e.stateNode,g=v.getSnapshotBeforeUpdate(e.elementType===e.type?y:On(e.type,y),w);v.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Y(163))}}catch(A){Ye(e,e.return,A)}if(t=e.sibling,t!==null){t.return=e.return,te=t;break}te=e.return}return x=uy,uy=!1,x}function ml(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&em(e,n,s)}i=i.next}while(i!==r)}}function Id(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function tm(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function eb(t){var e=t.alternate;e!==null&&(t.alternate=null,eb(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[nr],delete e[jl],delete e[zp],delete e[M8],delete e[O8])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function tb(t){return t.tag===5||t.tag===3||t.tag===4}function hy(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||tb(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function nm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Th));else if(r!==4&&(t=t.child,t!==null))for(nm(t,e,n),t=t.sibling;t!==null;)nm(t,e,n),t=t.sibling}function rm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(rm(t,e,n),t=t.sibling;t!==null;)rm(t,e,n),t=t.sibling}var bt=null,Bn=!1;function si(t,e,n){for(n=n.child;n!==null;)nb(t,e,n),n=n.sibling}function nb(t,e,n){if(sr&&typeof sr.onCommitFiberUnmount=="function")try{sr.onCommitFiberUnmount(_d,n)}catch{}switch(n.tag){case 5:Bt||To(n,e);case 6:var r=bt,i=Bn;bt=null,si(t,e,n),bt=r,Bn=i,bt!==null&&(Bn?(t=bt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):bt.removeChild(n.stateNode));break;case 18:bt!==null&&(Bn?(t=bt,n=n.stateNode,t.nodeType===8?Yf(t.parentNode,n):t.nodeType===1&&Yf(t,n),Fl(t)):Yf(bt,n.stateNode));break;case 4:r=bt,i=Bn,bt=n.stateNode.containerInfo,Bn=!0,si(t,e,n),bt=r,Bn=i;break;case 0:case 11:case 14:case 15:if(!Bt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&em(n,e,o),i=i.next}while(i!==r)}si(t,e,n);break;case 1:if(!Bt&&(To(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ye(n,e,a)}si(t,e,n);break;case 21:si(t,e,n);break;case 22:n.mode&1?(Bt=(r=Bt)||n.memoizedState!==null,si(t,e,n),Bt=r):si(t,e,n);break;default:si(t,e,n)}}function dy(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new J8),e.forEach(function(r){var i=lI.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Mn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:bt=a.stateNode,Bn=!1;break e;case 3:bt=a.stateNode.containerInfo,Bn=!0;break e;case 4:bt=a.stateNode.containerInfo,Bn=!0;break e}a=a.return}if(bt===null)throw Error(Y(160));nb(s,o,i),bt=null,Bn=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Ye(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)rb(e,t),e=e.sibling}function rb(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Mn(e,t),Yn(t),r&4){try{ml(3,t,t.return),Id(3,t)}catch(y){Ye(t,t.return,y)}try{ml(5,t,t.return)}catch(y){Ye(t,t.return,y)}}break;case 1:Mn(e,t),Yn(t),r&512&&n!==null&&To(n,n.return);break;case 5:if(Mn(e,t),Yn(t),r&512&&n!==null&&To(n,n.return),t.flags&32){var i=t.stateNode;try{Pl(i,"")}catch(y){Ye(t,t.return,y)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&Aw(i,s),Tp(a,o);var c=Tp(a,s);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];u==="style"?Pw(i,d):u==="dangerouslySetInnerHTML"?Iw(i,d):u==="children"?Pl(i,d):cg(i,u,d,c)}switch(a){case"input":wp(i,s);break;case"textarea":Sw(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?Po(i,!!s.multiple,m,!1):f!==!!s.multiple&&(s.defaultValue!=null?Po(i,!!s.multiple,s.defaultValue,!0):Po(i,!!s.multiple,s.multiple?[]:"",!1))}i[jl]=s}catch(y){Ye(t,t.return,y)}}break;case 6:if(Mn(e,t),Yn(t),r&4){if(t.stateNode===null)throw Error(Y(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(y){Ye(t,t.return,y)}}break;case 3:if(Mn(e,t),Yn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Fl(e.containerInfo)}catch(y){Ye(t,t.return,y)}break;case 4:Mn(e,t),Yn(t);break;case 13:Mn(e,t),Yn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Ug=st())),r&4&&dy(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(Bt=(c=Bt)||u,Mn(e,t),Bt=c):Mn(e,t),Yn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(te=t,u=t.child;u!==null;){for(d=te=u;te!==null;){switch(f=te,m=f.child,f.tag){case 0:case 11:case 14:case 15:ml(4,f,f.return);break;case 1:To(f,f.return);var x=f.stateNode;if(typeof x.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(y){Ye(r,n,y)}}break;case 5:To(f,f.return);break;case 22:if(f.memoizedState!==null){py(d);continue}}m!==null?(m.return=f,te=m):py(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=kw("display",o))}catch(y){Ye(t,t.return,y)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(y){Ye(t,t.return,y)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Mn(e,t),Yn(t),r&4&&dy(t);break;case 21:break;default:Mn(e,t),Yn(t)}}function Yn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(tb(n)){var r=n;break e}n=n.return}throw Error(Y(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Pl(i,""),r.flags&=-33);var s=hy(t);rm(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=hy(t);nm(t,a,o);break;default:throw Error(Y(161))}}catch(l){Ye(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function eI(t,e,n){te=t,ib(t)}function ib(t,e,n){for(var r=(t.mode&1)!==0;te!==null;){var i=te,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||mu;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Bt;a=mu;var c=Bt;if(mu=o,(Bt=l)&&!c)for(te=i;te!==null;)o=te,l=o.child,o.tag===22&&o.memoizedState!==null?my(i):l!==null?(l.return=o,te=l):my(i);for(;s!==null;)te=s,ib(s),s=s.sibling;te=i,mu=a,Bt=c}fy(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,te=s):fy(t)}}function fy(t){for(;te!==null;){var e=te;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Bt||Id(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Bt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:On(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&X1(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}X1(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&Fl(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Y(163))}Bt||e.flags&512&&tm(e)}catch(f){Ye(e,e.return,f)}}if(e===t){te=null;break}if(n=e.sibling,n!==null){n.return=e.return,te=n;break}te=e.return}}function py(t){for(;te!==null;){var e=te;if(e===t){te=null;break}var n=e.sibling;if(n!==null){n.return=e.return,te=n;break}te=e.return}}function my(t){for(;te!==null;){var e=te;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Id(4,e)}catch(l){Ye(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Ye(e,i,l)}}var s=e.return;try{tm(e)}catch(l){Ye(e,s,l)}break;case 5:var o=e.return;try{tm(e)}catch(l){Ye(e,o,l)}}}catch(l){Ye(e,e.return,l)}if(e===t){te=null;break}var a=e.sibling;if(a!==null){a.return=e.return,te=a;break}te=e.return}}var tI=Math.ceil,Lh=Qr.ReactCurrentDispatcher,Vg=Qr.ReactCurrentOwner,kn=Qr.ReactCurrentBatchConfig,Ee=0,vt=null,lt=null,St=0,mn=0,Io=Gi(0),dt=0,$l=null,Rs=0,kd=0,zg=0,gl=null,nn=null,Ug=0,Go=1/0,br=null,jh=!1,im=null,Pi=null,gu=!1,vi=null,Vh=0,xl=0,sm=null,Yu=-1,Xu=0;function Kt(){return Ee&6?st():Yu!==-1?Yu:Yu=st()}function Di(t){return t.mode&1?Ee&2&&St!==0?St&-St:L8.transition!==null?(Xu===0&&(Xu=Uw()),Xu):(t=Se,t!==0||(t=window.event,t=t===void 0?16:Qw(t.type)),t):1}function zn(t,e,n,r){if(50<xl)throw xl=0,sm=null,Error(Y(185));mc(t,n,r),(!(Ee&2)||t!==vt)&&(t===vt&&(!(Ee&2)&&(kd|=n),dt===4&&hi(t,St)),cn(t,r),n===1&&Ee===0&&!(e.mode&1)&&(Go=st()+500,Ad&&Qi()))}function cn(t,e){var n=t.callbackNode;L6(t,e);var r=bh(t,t===vt?St:0);if(r===0)n!==null&&C1(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&C1(n),e===1)t.tag===0?B8(gy.bind(null,t)):p4(gy.bind(null,t)),N8(function(){!(Ee&6)&&Qi()}),n=null;else{switch(Hw(r)){case 1:n=pg;break;case 4:n=Vw;break;case 16:n=wh;break;case 536870912:n=zw;break;default:n=wh}n=db(n,sb.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function sb(t,e){if(Yu=-1,Xu=0,Ee&6)throw Error(Y(327));var n=t.callbackNode;if(Mo()&&t.callbackNode!==n)return null;var r=bh(t,t===vt?St:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=zh(t,r);else{e=r;var i=Ee;Ee|=2;var s=ab();(vt!==t||St!==e)&&(br=null,Go=st()+500,bs(t,e));do try{iI();break}catch(a){ob(t,a)}while(!0);Tg(),Lh.current=s,Ee=i,lt!==null?e=0:(vt=null,St=0,e=dt)}if(e!==0){if(e===2&&(i=Rp(t),i!==0&&(r=i,e=om(t,i))),e===1)throw n=$l,bs(t,0),hi(t,r),cn(t,st()),n;if(e===6)hi(t,r);else{if(i=t.current.alternate,!(r&30)&&!nI(i)&&(e=zh(t,r),e===2&&(s=Rp(t),s!==0&&(r=s,e=om(t,s))),e===1))throw n=$l,bs(t,0),hi(t,r),cn(t,st()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Y(345));case 2:fs(t,nn,br);break;case 3:if(hi(t,r),(r&130023424)===r&&(e=Ug+500-st(),10<e)){if(bh(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Kt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Vp(fs.bind(null,t,nn,br),e);break}fs(t,nn,br);break;case 4:if(hi(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Vn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=st()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*tI(r/1960))-r,10<r){t.timeoutHandle=Vp(fs.bind(null,t,nn,br),r);break}fs(t,nn,br);break;case 5:fs(t,nn,br);break;default:throw Error(Y(329))}}}return cn(t,st()),t.callbackNode===n?sb.bind(null,t):null}function om(t,e){var n=gl;return t.current.memoizedState.isDehydrated&&(bs(t,e).flags|=256),t=zh(t,e),t!==2&&(e=nn,nn=n,e!==null&&am(e)),t}function am(t){nn===null?nn=t:nn.push.apply(nn,t)}function nI(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Wn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function hi(t,e){for(e&=~zg,e&=~kd,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Vn(e),r=1<<n;t[n]=-1,e&=~r}}function gy(t){if(Ee&6)throw Error(Y(327));Mo();var e=bh(t,0);if(!(e&1))return cn(t,st()),null;var n=zh(t,e);if(t.tag!==0&&n===2){var r=Rp(t);r!==0&&(e=r,n=om(t,r))}if(n===1)throw n=$l,bs(t,0),hi(t,e),cn(t,st()),n;if(n===6)throw Error(Y(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,fs(t,nn,br),cn(t,st()),null}function Hg(t,e){var n=Ee;Ee|=1;try{return t(e)}finally{Ee=n,Ee===0&&(Go=st()+500,Ad&&Qi())}}function Ns(t){vi!==null&&vi.tag===0&&!(Ee&6)&&Mo();var e=Ee;Ee|=1;var n=kn.transition,r=Se;try{if(kn.transition=null,Se=1,t)return t()}finally{Se=r,kn.transition=n,Ee=e,!(Ee&6)&&Qi()}}function Wg(){mn=Io.current,Oe(Io)}function bs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,R8(n)),lt!==null)for(n=lt.return;n!==null;){var r=n;switch(Cg(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ih();break;case 3:qo(),Oe(an),Oe(zt),Ng();break;case 5:Rg(r);break;case 4:qo();break;case 13:Oe(We);break;case 19:Oe(We);break;case 10:Ig(r.type._context);break;case 22:case 23:Wg()}n=n.return}if(vt=t,lt=t=Ri(t.current,null),St=mn=e,dt=0,$l=null,zg=kd=Rs=0,nn=gl=null,vs!==null){for(e=0;e<vs.length;e++)if(n=vs[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}vs=null}return t}function ob(t,e){do{var n=lt;try{if(Tg(),Ku.current=Bh,Oh){for(var r=$e.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Oh=!1}if(Ds=0,gt=ht=$e=null,pl=!1,Ul=0,Vg.current=null,n===null||n.return===null){dt=1,$l=e,lt=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=St,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var m=ry(o);if(m!==null){m.flags&=-257,iy(m,o,a,s,e),m.mode&1&&ny(s,c,e),e=m,l=c;var x=e.updateQueue;if(x===null){var y=new Set;y.add(l),e.updateQueue=y}else x.add(l);break e}else{if(!(e&1)){ny(s,c,e),$g();break e}l=Error(Y(426))}}else if(je&&a.mode&1){var w=ry(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),iy(w,o,a,s,e),Ag(Ko(l,a));break e}}s=l=Ko(l,a),dt!==4&&(dt=2),gl===null?gl=[s]:gl.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=H4(s,l,e);Y1(s,v);break e;case 1:a=l;var g=s.type,_=s.stateNode;if(!(s.flags&128)&&(typeof g.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Pi===null||!Pi.has(_)))){s.flags|=65536,e&=-e,s.lanes|=e;var A=W4(s,a,e);Y1(s,A);break e}}s=s.return}while(s!==null)}cb(n)}catch(P){e=P,lt===n&&n!==null&&(lt=n=n.return);continue}break}while(!0)}function ab(){var t=Lh.current;return Lh.current=Bh,t===null?Bh:t}function $g(){(dt===0||dt===3||dt===2)&&(dt=4),vt===null||!(Rs&268435455)&&!(kd&268435455)||hi(vt,St)}function zh(t,e){var n=Ee;Ee|=2;var r=ab();(vt!==t||St!==e)&&(br=null,bs(t,e));do try{rI();break}catch(i){ob(t,i)}while(!0);if(Tg(),Ee=n,Lh.current=r,lt!==null)throw Error(Y(261));return vt=null,St=0,dt}function rI(){for(;lt!==null;)lb(lt)}function iI(){for(;lt!==null&&!k6();)lb(lt)}function lb(t){var e=hb(t.alternate,t,mn);t.memoizedProps=t.pendingProps,e===null?cb(t):lt=e,Vg.current=null}function cb(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=X8(n,e),n!==null){n.flags&=32767,lt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{dt=6,lt=null;return}}else if(n=Y8(n,e,mn),n!==null){lt=n;return}if(e=e.sibling,e!==null){lt=e;return}lt=e=t}while(e!==null);dt===0&&(dt=5)}function fs(t,e,n){var r=Se,i=kn.transition;try{kn.transition=null,Se=1,sI(t,e,n,r)}finally{kn.transition=i,Se=r}return null}function sI(t,e,n,r){do Mo();while(vi!==null);if(Ee&6)throw Error(Y(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Y(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(j6(t,s),t===vt&&(lt=vt=null,St=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||gu||(gu=!0,db(wh,function(){return Mo(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=kn.transition,kn.transition=null;var o=Se;Se=1;var a=Ee;Ee|=4,Vg.current=null,Z8(t,n),rb(n,t),A8(Lp),Ch=!!Bp,Lp=Bp=null,t.current=n,eI(n),P6(),Ee=a,Se=o,kn.transition=s}else t.current=n;if(gu&&(gu=!1,vi=t,Vh=i),s=t.pendingLanes,s===0&&(Pi=null),N6(n.stateNode),cn(t,st()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(jh)throw jh=!1,t=im,im=null,t;return Vh&1&&t.tag!==0&&Mo(),s=t.pendingLanes,s&1?t===sm?xl++:(xl=0,sm=t):xl=0,Qi(),null}function Mo(){if(vi!==null){var t=Hw(Vh),e=kn.transition,n=Se;try{if(kn.transition=null,Se=16>t?16:t,vi===null)var r=!1;else{if(t=vi,vi=null,Vh=0,Ee&6)throw Error(Y(331));var i=Ee;for(Ee|=4,te=t.current;te!==null;){var s=te,o=s.child;if(te.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(te=c;te!==null;){var u=te;switch(u.tag){case 0:case 11:case 15:ml(8,u,s)}var d=u.child;if(d!==null)d.return=u,te=d;else for(;te!==null;){u=te;var f=u.sibling,m=u.return;if(eb(u),u===c){te=null;break}if(f!==null){f.return=m,te=f;break}te=m}}}var x=s.alternate;if(x!==null){var y=x.child;if(y!==null){x.child=null;do{var w=y.sibling;y.sibling=null,y=w}while(y!==null)}}te=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,te=o;else e:for(;te!==null;){if(s=te,s.flags&2048)switch(s.tag){case 0:case 11:case 15:ml(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,te=v;break e}te=s.return}}var g=t.current;for(te=g;te!==null;){o=te;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,te=_;else e:for(o=g;te!==null;){if(a=te,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Id(9,a)}}catch(P){Ye(a,a.return,P)}if(a===o){te=null;break e}var A=a.sibling;if(A!==null){A.return=a.return,te=A;break e}te=a.return}}if(Ee=i,Qi(),sr&&typeof sr.onPostCommitFiberRoot=="function")try{sr.onPostCommitFiberRoot(_d,t)}catch{}r=!0}return r}finally{Se=n,kn.transition=e}}return!1}function xy(t,e,n){e=Ko(n,e),e=H4(t,e,1),t=ki(t,e,1),e=Kt(),t!==null&&(mc(t,1,e),cn(t,e))}function Ye(t,e,n){if(t.tag===3)xy(t,t,n);else for(;e!==null;){if(e.tag===3){xy(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Pi===null||!Pi.has(r))){t=Ko(n,t),t=W4(e,t,1),e=ki(e,t,1),t=Kt(),e!==null&&(mc(e,1,t),cn(e,t));break}}e=e.return}}function oI(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Kt(),t.pingedLanes|=t.suspendedLanes&n,vt===t&&(St&n)===n&&(dt===4||dt===3&&(St&130023424)===St&&500>st()-Ug?bs(t,0):zg|=n),cn(t,e)}function ub(t,e){e===0&&(t.mode&1?(e=ou,ou<<=1,!(ou&130023424)&&(ou=4194304)):e=1);var n=Kt();t=zr(t,e),t!==null&&(mc(t,e,n),cn(t,n))}function aI(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),ub(t,n)}function lI(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Y(314))}r!==null&&r.delete(e),ub(t,n)}var hb;hb=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||an.current)on=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return on=!1,Q8(t,e,n);on=!!(t.flags&131072)}else on=!1,je&&e.flags&1048576&&m4(e,Dh,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Qu(t,e),t=e.pendingProps;var i=Ho(e,zt.current);Fo(e,n),i=Mg(null,e,r,t,i,n);var s=Og();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ln(r)?(s=!0,kh(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Pg(e),i.updater=Td,e.stateNode=i,i._reactInternals=e,Kp(e,r,t,n),e=Yp(null,e,r,!0,s,n)):(e.tag=0,je&&s&&bg(e),$t(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Qu(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=uI(r),t=On(r,t),i){case 0:e=Qp(null,e,r,t,n);break e;case 1:e=ay(null,e,r,t,n);break e;case 11:e=sy(null,e,r,t,n);break e;case 14:e=oy(null,e,r,On(r.type,t),n);break e}throw Error(Y(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:On(r,i),Qp(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:On(r,i),ay(t,e,r,i,n);case 3:e:{if(G4(e),t===null)throw Error(Y(387));r=e.pendingProps,s=e.memoizedState,i=s.element,E4(t,e),Fh(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Ko(Error(Y(423)),e),e=ly(t,e,r,n,i);break e}else if(r!==i){i=Ko(Error(Y(424)),e),e=ly(t,e,r,n,i);break e}else for(xn=Ii(e.stateNode.containerInfo.firstChild),yn=e,je=!0,Ln=null,n=y4(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Wo(),r===i){e=Ur(t,e,n);break e}$t(t,e,r,n)}e=e.child}return e;case 5:return w4(e),t===null&&Wp(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,jp(r,i)?o=null:s!==null&&jp(r,s)&&(e.flags|=32),K4(t,e),$t(t,e,o,n),e.child;case 6:return t===null&&Wp(e),null;case 13:return Q4(t,e,n);case 4:return Dg(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=$o(e,null,r,n):$t(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:On(r,i),sy(t,e,r,i,n);case 7:return $t(t,e,e.pendingProps,n),e.child;case 8:return $t(t,e,e.pendingProps.children,n),e.child;case 12:return $t(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Re(Rh,r._currentValue),r._currentValue=o,s!==null)if(Wn(s.value,o)){if(s.children===i.children&&!an.current){e=Ur(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Or(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),$p(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Y(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),$p(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}$t(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Fo(e,n),i=Dn(i),r=r(i),e.flags|=1,$t(t,e,r,n),e.child;case 14:return r=e.type,i=On(r,e.pendingProps),i=On(r.type,i),oy(t,e,r,i,n);case 15:return $4(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:On(r,i),Qu(t,e),e.tag=1,ln(r)?(t=!0,kh(e)):t=!1,Fo(e,n),U4(e,r,i),Kp(e,r,i,n),Yp(null,e,r,!0,t,n);case 19:return Y4(t,e,n);case 22:return q4(t,e,n)}throw Error(Y(156,e.tag))};function db(t,e){return jw(t,e)}function cI(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function In(t,e,n,r){return new cI(t,e,n,r)}function qg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function uI(t){if(typeof t=="function")return qg(t)?1:0;if(t!=null){if(t=t.$$typeof,t===hg)return 11;if(t===dg)return 14}return 2}function Ri(t,e){var n=t.alternate;return n===null?(n=In(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ju(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")qg(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case vo:return Cs(n.children,i,s,e);case ug:o=8,i|=8;break;case xp:return t=In(12,n,e,i|2),t.elementType=xp,t.lanes=s,t;case vp:return t=In(13,n,e,i),t.elementType=vp,t.lanes=s,t;case yp:return t=In(19,n,e,i),t.elementType=yp,t.lanes=s,t;case ww:return Pd(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case _w:o=10;break e;case Ew:o=9;break e;case hg:o=11;break e;case dg:o=14;break e;case li:o=16,r=null;break e}throw Error(Y(130,t==null?t:typeof t,""))}return e=In(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Cs(t,e,n,r){return t=In(7,t,r,e),t.lanes=n,t}function Pd(t,e,n,r){return t=In(22,t,r,e),t.elementType=ww,t.lanes=n,t.stateNode={isHidden:!1},t}function i0(t,e,n){return t=In(6,t,null,e),t.lanes=n,t}function s0(t,e,n){return e=In(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function hI(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=jf(0),this.expirationTimes=jf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jf(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Kg(t,e,n,r,i,s,o,a,l){return t=new hI(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=In(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Pg(s),t}function dI(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:xo,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function fb(t){if(!t)return Vi;t=t._reactInternals;e:{if($s(t)!==t||t.tag!==1)throw Error(Y(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ln(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Y(171))}if(t.tag===1){var n=t.type;if(ln(n))return f4(t,n,e)}return e}function pb(t,e,n,r,i,s,o,a,l){return t=Kg(n,r,!0,t,i,s,o,a,l),t.context=fb(null),n=t.current,r=Kt(),i=Di(n),s=Or(r,i),s.callback=e??null,ki(n,s,i),t.current.lanes=i,mc(t,i,r),cn(t,r),t}function Dd(t,e,n,r){var i=e.current,s=Kt(),o=Di(i);return n=fb(n),e.context===null?e.context=n:e.pendingContext=n,e=Or(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ki(i,e,o),t!==null&&(zn(t,i,o,s),qu(t,i,o)),o}function Uh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function vy(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Gg(t,e){vy(t,e),(t=t.alternate)&&vy(t,e)}function fI(){return null}var mb=typeof reportError=="function"?reportError:function(t){console.error(t)};function Qg(t){this._internalRoot=t}Rd.prototype.render=Qg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Y(409));Dd(t,e,null,null)};Rd.prototype.unmount=Qg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ns(function(){Dd(null,t,null,null)}),e[Vr]=null}};function Rd(t){this._internalRoot=t}Rd.prototype.unstable_scheduleHydration=function(t){if(t){var e=qw();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ui.length&&e!==0&&e<ui[n].priority;n++);ui.splice(n,0,t),n===0&&Gw(t)}};function Yg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Nd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function yy(){}function pI(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Uh(o);s.call(c)}}var o=pb(e,r,t,0,null,!1,!1,"",yy);return t._reactRootContainer=o,t[Vr]=o.current,Bl(t.nodeType===8?t.parentNode:t),Ns(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Uh(l);a.call(c)}}var l=Kg(t,0,!1,null,null,!1,!1,"",yy);return t._reactRootContainer=l,t[Vr]=l.current,Bl(t.nodeType===8?t.parentNode:t),Ns(function(){Dd(e,l,n,r)}),l}function Fd(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Uh(o);a.call(l)}}Dd(e,o,t,i)}else o=pI(n,e,t,i,r);return Uh(o)}Ww=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Qa(e.pendingLanes);n!==0&&(mg(e,n|1),cn(e,st()),!(Ee&6)&&(Go=st()+500,Qi()))}break;case 13:Ns(function(){var r=zr(t,1);if(r!==null){var i=Kt();zn(r,t,1,i)}}),Gg(t,1)}};gg=function(t){if(t.tag===13){var e=zr(t,134217728);if(e!==null){var n=Kt();zn(e,t,134217728,n)}Gg(t,134217728)}};$w=function(t){if(t.tag===13){var e=Di(t),n=zr(t,e);if(n!==null){var r=Kt();zn(n,t,e,r)}Gg(t,e)}};qw=function(){return Se};Kw=function(t,e){var n=Se;try{return Se=t,e()}finally{Se=n}};kp=function(t,e,n){switch(e){case"input":if(wp(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Cd(r);if(!i)throw Error(Y(90));Cw(r),wp(r,i)}}}break;case"textarea":Sw(t,n);break;case"select":e=n.value,e!=null&&Po(t,!!n.multiple,e,!1)}};Nw=Hg;Fw=Ns;var mI={usingClientEntryPoint:!1,Events:[xc,wo,Cd,Dw,Rw,Hg]},ja={findFiberByHostInstance:xs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},gI={bundleType:ja.bundleType,version:ja.version,rendererPackageName:ja.rendererPackageName,rendererConfig:ja.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Qr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Bw(t),t===null?null:t.stateNode},findFiberByHostInstance:ja.findFiberByHostInstance||fI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xu.isDisabled&&xu.supportsFiber)try{_d=xu.inject(gI),sr=xu}catch{}}En.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mI;En.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Yg(e))throw Error(Y(200));return dI(t,e,null,n)};En.createRoot=function(t,e){if(!Yg(t))throw Error(Y(299));var n=!1,r="",i=mb;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Kg(t,1,!1,null,null,n,!1,r,i),t[Vr]=e.current,Bl(t.nodeType===8?t.parentNode:t),new Qg(e)};En.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Y(188)):(t=Object.keys(t).join(","),Error(Y(268,t)));return t=Bw(e),t=t===null?null:t.stateNode,t};En.flushSync=function(t){return Ns(t)};En.hydrate=function(t,e,n){if(!Nd(e))throw Error(Y(200));return Fd(null,t,e,!0,n)};En.hydrateRoot=function(t,e,n){if(!Yg(t))throw Error(Y(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=mb;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=pb(e,null,t,1,n??null,i,!1,s,o),t[Vr]=e.current,Bl(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Rd(e)};En.render=function(t,e,n){if(!Nd(e))throw Error(Y(200));return Fd(null,t,e,!1,n)};En.unmountComponentAtNode=function(t){if(!Nd(t))throw Error(Y(40));return t._reactRootContainer?(Ns(function(){Fd(null,null,t,!1,function(){t._reactRootContainer=null,t[Vr]=null})}),!0):!1};En.unstable_batchedUpdates=Hg;En.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Nd(n))throw Error(Y(200));if(t==null||t._reactInternals===void 0)throw Error(Y(38));return Fd(t,e,n,!1,r)};En.version="18.3.1-next-f1338f8080-20240426";function gb(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(gb)}catch(t){console.error(t)}}gb(),gw.exports=En;var xI=gw.exports,_y=xI;mp.createRoot=_y.createRoot,mp.hydrateRoot=_y.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ql(){return ql=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ql.apply(this,arguments)}var yi;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(yi||(yi={}));const Ey="popstate";function vI(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return lm("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Hh(i)}return _I(e,n,null,t)}function qe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function xb(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function yI(){return Math.random().toString(36).substr(2,8)}function wy(t,e){return{usr:t.state,key:t.key,idx:e}}function lm(t,e,n,r){return n===void 0&&(n=null),ql({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ca(e):e,{state:n,key:e&&e.key||r||yI()})}function Hh(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ca(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function _I(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=yi.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(ql({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function d(){a=yi.Pop;let w=u(),v=w==null?null:w-c;c=w,l&&l({action:a,location:y.location,delta:v})}function f(w,v){a=yi.Push;let g=lm(y.location,w,v);c=u()+1;let _=wy(g,c),A=y.createHref(g);try{o.pushState(_,"",A)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;i.location.assign(A)}s&&l&&l({action:a,location:y.location,delta:1})}function m(w,v){a=yi.Replace;let g=lm(y.location,w,v);c=u();let _=wy(g,c),A=y.createHref(g);o.replaceState(_,"",A),s&&l&&l({action:a,location:y.location,delta:0})}function x(w){let v=i.location.origin!=="null"?i.location.origin:i.location.href,g=typeof w=="string"?w:Hh(w);return g=g.replace(/ $/,"%20"),qe(v,"No window.location.(origin|href) available to create URL for href: "+g),new URL(g,v)}let y={get action(){return a},get location(){return t(i,o)},listen(w){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(Ey,d),l=w,()=>{i.removeEventListener(Ey,d),l=null}},createHref(w){return e(i,w)},createURL:x,encodeLocation(w){let v=x(w);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:f,replace:m,go(w){return o.go(w)}};return y}var by;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(by||(by={}));function EI(t,e,n){return n===void 0&&(n="/"),wI(t,e,n)}function wI(t,e,n,r){let i=typeof e=="string"?ca(e):e,s=Qo(i.pathname||"/",n);if(s==null)return null;let o=vb(t);bI(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=FI(s);a=RI(o[l],c)}return a}function vb(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(qe(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Ni([r,l.relativePath]),u=n.concat(l);s.children&&s.children.length>0&&(qe(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),vb(s.children,e,u,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:PI(c,s.index),routesMeta:u})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of yb(s.path))i(s,o,l)}),e}function yb(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=yb(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function bI(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:DI(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const CI=/^:[\w-]+$/,AI=3,SI=2,TI=1,II=10,kI=-2,Cy=t=>t==="*";function PI(t,e){let n=t.split("/"),r=n.length;return n.some(Cy)&&(r+=kI),e&&(r+=SI),n.filter(i=>!Cy(i)).reduce((i,s)=>i+(CI.test(s)?AI:s===""?TI:II),r)}function DI(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function RI(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,u=s==="/"?e:e.slice(s.length)||"/",d=cm({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),f=l.route;if(!d)return null;Object.assign(i,d.params),o.push({params:i,pathname:Ni([s,d.pathname]),pathnameBase:LI(Ni([s,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(s=Ni([s,d.pathnameBase]))}return o}function cm(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=NI(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,u,d)=>{let{paramName:f,isOptional:m}=u;if(f==="*"){let y=a[d]||"";o=s.slice(0,s.length-y.length).replace(/(.)\/+$/,"$1")}const x=a[d];return m&&!x?c[f]=void 0:c[f]=(x||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function NI(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),xb(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function FI(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return xb(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Qo(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function MI(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?ca(t):t;return{pathname:n?n.startsWith("/")?n:OI(n,e):e,search:jI(r),hash:VI(i)}}function OI(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function o0(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function BI(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Xg(t,e){let n=BI(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Jg(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=ca(t):(i=ql({},t),qe(!i.pathname||!i.pathname.includes("?"),o0("?","pathname","search",i)),qe(!i.pathname||!i.pathname.includes("#"),o0("#","pathname","hash",i)),qe(!i.search||!i.search.includes("#"),o0("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;i.pathname=f.join("/")}a=d>=0?e[d]:"/"}let l=MI(i,a),c=o&&o!=="/"&&o.endsWith("/"),u=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const Ni=t=>t.join("/").replace(/\/\/+/g,"/"),LI=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),jI=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,VI=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function zI(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const _b=["post","put","patch","delete"];new Set(_b);const UI=["get",..._b];new Set(UI);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Kl(){return Kl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Kl.apply(this,arguments)}const Md=M.createContext(null),Eb=M.createContext(null),Yr=M.createContext(null),Od=M.createContext(null),Xr=M.createContext({outlet:null,matches:[],isDataRoute:!1}),wb=M.createContext(null);function HI(t,e){let{relative:n}=e===void 0?{}:e;ua()||qe(!1);let{basename:r,navigator:i}=M.useContext(Yr),{hash:s,pathname:o,search:a}=Bd(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Ni([r,o])),i.createHref({pathname:l,search:a,hash:s})}function ua(){return M.useContext(Od)!=null}function ha(){return ua()||qe(!1),M.useContext(Od).location}function bb(t){M.useContext(Yr).static||M.useLayoutEffect(t)}function Jr(){let{isDataRoute:t}=M.useContext(Xr);return t?r3():WI()}function WI(){ua()||qe(!1);let t=M.useContext(Md),{basename:e,future:n,navigator:r}=M.useContext(Yr),{matches:i}=M.useContext(Xr),{pathname:s}=ha(),o=JSON.stringify(Xg(i,n.v7_relativeSplatPath)),a=M.useRef(!1);return bb(()=>{a.current=!0}),M.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let d=Jg(c,JSON.parse(o),s,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Ni([e,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[e,r,o,s,t])}function $I(){let{matches:t}=M.useContext(Xr),e=t[t.length-1];return e?e.params:{}}function Bd(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=M.useContext(Yr),{matches:i}=M.useContext(Xr),{pathname:s}=ha(),o=JSON.stringify(Xg(i,r.v7_relativeSplatPath));return M.useMemo(()=>Jg(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function qI(t,e){return KI(t,e)}function KI(t,e,n,r){ua()||qe(!1);let{navigator:i,static:s}=M.useContext(Yr),{matches:o}=M.useContext(Xr),a=o[o.length-1],l=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let u=ha(),d;if(e){var f;let v=typeof e=="string"?ca(e):e;c==="/"||(f=v.pathname)!=null&&f.startsWith(c)||qe(!1),d=v}else d=u;let m=d.pathname||"/",x=m;if(c!=="/"){let v=c.replace(/^\//,"").split("/");x="/"+m.replace(/^\//,"").split("/").slice(v.length).join("/")}let y=EI(t,{pathname:x}),w=JI(y&&y.map(v=>Object.assign({},v,{params:Object.assign({},l,v.params),pathname:Ni([c,i.encodeLocation?i.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?c:Ni([c,i.encodeLocation?i.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),o,n,r);return e&&w?M.createElement(Od.Provider,{value:{location:Kl({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:yi.Pop}},w):w}function GI(){let t=n3(),e=zI(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},e),n?M.createElement("pre",{style:i},n):null,null)}const QI=M.createElement(GI,null);class YI extends M.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?M.createElement(Xr.Provider,{value:this.props.routeContext},M.createElement(wb.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function XI(t){let{routeContext:e,match:n,children:r}=t,i=M.useContext(Md);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),M.createElement(Xr.Provider,{value:e},r)}function JI(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let u=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);u>=0||qe(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let d=o[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=u),d.route.id){let{loaderData:f,errors:m}=n,x=d.route.loader&&f[d.route.id]===void 0&&(!m||m[d.route.id]===void 0);if(d.route.lazy||x){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,d,f)=>{let m,x=!1,y=null,w=null;n&&(m=a&&d.route.id?a[d.route.id]:void 0,y=d.route.errorElement||QI,l&&(c<0&&f===0?(i3("route-fallback"),x=!0,w=null):c===f&&(x=!0,w=d.route.hydrateFallbackElement||null)));let v=e.concat(o.slice(0,f+1)),g=()=>{let _;return m?_=y:x?_=w:d.route.Component?_=M.createElement(d.route.Component,null):d.route.element?_=d.route.element:_=u,M.createElement(XI,{match:d,routeContext:{outlet:u,matches:v,isDataRoute:n!=null},children:_})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?M.createElement(YI,{location:n.location,revalidation:n.revalidation,component:y,error:m,children:g(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):g()},null)}var Cb=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Cb||{}),Ab=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Ab||{});function ZI(t){let e=M.useContext(Md);return e||qe(!1),e}function e3(t){let e=M.useContext(Eb);return e||qe(!1),e}function t3(t){let e=M.useContext(Xr);return e||qe(!1),e}function Sb(t){let e=t3(),n=e.matches[e.matches.length-1];return n.route.id||qe(!1),n.route.id}function n3(){var t;let e=M.useContext(wb),n=e3(),r=Sb();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function r3(){let{router:t}=ZI(Cb.UseNavigateStable),e=Sb(Ab.UseNavigateStable),n=M.useRef(!1);return bb(()=>{n.current=!0}),M.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Kl({fromRouteId:e},s)))},[t,e])}const Ay={};function i3(t,e,n){Ay[t]||(Ay[t]=!0)}function s3(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function o3(t){let{to:e,replace:n,state:r,relative:i}=t;ua()||qe(!1);let{future:s,static:o}=M.useContext(Yr),{matches:a}=M.useContext(Xr),{pathname:l}=ha(),c=Jr(),u=Jg(e,Xg(a,s.v7_relativeSplatPath),l,i==="path"),d=JSON.stringify(u);return M.useEffect(()=>c(JSON.parse(d),{replace:n,state:r,relative:i}),[c,d,i,n,r]),null}function tn(t){qe(!1)}function a3(t){let{basename:e="/",children:n=null,location:r,navigationType:i=yi.Pop,navigator:s,static:o=!1,future:a}=t;ua()&&qe(!1);let l=e.replace(/^\/*/,"/"),c=M.useMemo(()=>({basename:l,navigator:s,static:o,future:Kl({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=ca(r));let{pathname:u="/",search:d="",hash:f="",state:m=null,key:x="default"}=r,y=M.useMemo(()=>{let w=Qo(u,l);return w==null?null:{location:{pathname:w,search:d,hash:f,state:m,key:x},navigationType:i}},[l,u,d,f,m,x,i]);return y==null?null:M.createElement(Yr.Provider,{value:c},M.createElement(Od.Provider,{children:n,value:y}))}function l3(t){let{children:e,location:n}=t;return qI(um(e),n)}new Promise(()=>{});function um(t,e){e===void 0&&(e=[]);let n=[];return M.Children.forEach(t,(r,i)=>{if(!M.isValidElement(r))return;let s=[...e,i];if(r.type===M.Fragment){n.push.apply(n,um(r.props.children,s));return}r.type!==tn&&qe(!1),!r.props.index||!r.props.children||qe(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=um(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wh(){return Wh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Wh.apply(this,arguments)}function Tb(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function c3(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function u3(t,e){return t.button===0&&(!e||e==="_self")&&!c3(t)}const h3=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],d3=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],f3="6";try{window.__reactRouterVersion=f3}catch{}const p3=M.createContext({isTransitioning:!1}),m3="startTransition",Sy=o6[m3];function g3(t){let{basename:e,children:n,future:r,window:i}=t,s=M.useRef();s.current==null&&(s.current=vI({window:i,v5Compat:!0}));let o=s.current,[a,l]=M.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},u=M.useCallback(d=>{c&&Sy?Sy(()=>l(d)):l(d)},[l,c]);return M.useLayoutEffect(()=>o.listen(u),[o,u]),M.useEffect(()=>s3(r),[r]),M.createElement(a3,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const x3=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",v3=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,An=M.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:u,viewTransition:d}=e,f=Tb(e,h3),{basename:m}=M.useContext(Yr),x,y=!1;if(typeof c=="string"&&v3.test(c)&&(x=c,x3))try{let _=new URL(window.location.href),A=c.startsWith("//")?new URL(_.protocol+c):new URL(c),P=Qo(A.pathname,m);A.origin===_.origin&&P!=null?c=P+A.search+A.hash:y=!0}catch{}let w=HI(c,{relative:i}),v=_3(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:i,viewTransition:d});function g(_){r&&r(_),_.defaultPrevented||v(_)}return M.createElement("a",Wh({},f,{href:x||w,onClick:y||s?r:g,ref:n,target:l}))}),oi=M.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:i=!1,className:s="",end:o=!1,style:a,to:l,viewTransition:c,children:u}=e,d=Tb(e,d3),f=Bd(l,{relative:d.relative}),m=ha(),x=M.useContext(Eb),{navigator:y,basename:w}=M.useContext(Yr),v=x!=null&&E3(f)&&c===!0,g=y.encodeLocation?y.encodeLocation(f).pathname:f.pathname,_=m.pathname,A=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;i||(_=_.toLowerCase(),A=A?A.toLowerCase():null,g=g.toLowerCase()),A&&w&&(A=Qo(A,w)||A);const P=g!=="/"&&g.endsWith("/")?g.length-1:g.length;let D=_===g||!o&&_.startsWith(g)&&_.charAt(P)==="/",C=A!=null&&(A===g||!o&&A.startsWith(g)&&A.charAt(g.length)==="/"),b={isActive:D,isPending:C,isTransitioning:v},k=D?r:void 0,T;typeof s=="function"?T=s(b):T=[s,D?"active":null,C?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let I=typeof a=="function"?a(b):a;return M.createElement(An,Wh({},d,{"aria-current":k,className:T,ref:n,style:I,to:l,viewTransition:c}),typeof u=="function"?u(b):u)});var hm;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(hm||(hm={}));var Ty;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Ty||(Ty={}));function y3(t){let e=M.useContext(Md);return e||qe(!1),e}function _3(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=Jr(),c=ha(),u=Bd(t,{relative:o});return M.useCallback(d=>{if(u3(d,n)){d.preventDefault();let f=r!==void 0?r:Hh(c)===Hh(u);l(t,{replace:f,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[c,l,u,r,i,n,t,s,o,a])}function E3(t,e){e===void 0&&(e={});let n=M.useContext(p3);n==null&&qe(!1);let{basename:r}=y3(hm.useViewTransitionState),i=Bd(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=Qo(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Qo(n.nextLocation.pathname,r)||n.nextLocation.pathname;return cm(i.pathname,o)!=null||cm(i.pathname,s)!=null}var Iy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ib=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},w3=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},kb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,u=s>>2,d=(s&3)<<4|a>>4;let f=(a&15)<<2|c>>6,m=c&63;l||(m=64,o||(f=64)),r.push(n[u],n[d],n[f],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Ib(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):w3(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||d==null)throw new b3;const f=s<<2|a>>4;if(r.push(f),c!==64){const m=a<<4&240|c>>2;if(r.push(m),d!==64){const x=c<<6&192|d;r.push(x)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class b3 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const C3=function(t){const e=Ib(t);return kb.encodeByteArray(e,!0)},$h=function(t){return C3(t).replace(/\./g,"")},Pb=function(t){try{return kb.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A3(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S3=()=>A3().__FIREBASE_DEFAULTS__,T3=()=>{if(typeof process>"u"||typeof Iy>"u")return;const t=Iy.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},I3=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Pb(t[1]);return e&&JSON.parse(e)},Ld=()=>{try{return S3()||T3()||I3()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Db=t=>{var e,n;return(n=(e=Ld())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Rb=t=>{const e=Db(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Nb=()=>{var t;return(t=Ld())===null||t===void 0?void 0:t.config},Fb=t=>{var e;return(e=Ld())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k3{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mb(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[$h(JSON.stringify(n)),$h(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ut(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function P3(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ut())}function D3(){var t;const e=(t=Ld())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function R3(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function N3(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function F3(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function M3(){const t=Ut();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function O3(){return!D3()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function B3(){try{return typeof indexedDB=="object"}catch{return!1}}function L3(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j3="FirebaseError";class pr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=j3,Object.setPrototypeOf(this,pr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,yc.prototype.create)}}class yc{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?V3(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new pr(i,a,r)}}function V3(t,e){return t.replace(z3,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const z3=/\{\$([^}]+)}/g;function U3(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function qh(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(ky(s)&&ky(o)){if(!qh(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function ky(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _c(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Xa(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Ja(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function H3(t,e){const n=new W3(t,e);return n.subscribe.bind(n)}class W3{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");$3(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=a0),i.error===void 0&&(i.error=a0),i.complete===void 0&&(i.complete=a0);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function $3(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function a0(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ie(t){return t&&t._delegate?t._delegate:t}class zi{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ps="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q3{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new k3;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(G3(e))try{this.getOrInitializeService({instanceIdentifier:ps})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=ps){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ps){return this.instances.has(e)}getOptions(e=ps){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:K3(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ps){return this.component?this.component.multipleInstances?e:ps:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function K3(t){return t===ps?void 0:t}function G3(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q3{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new q3(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ve;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ve||(ve={}));const Y3={debug:ve.DEBUG,verbose:ve.VERBOSE,info:ve.INFO,warn:ve.WARN,error:ve.ERROR,silent:ve.SILENT},X3=ve.INFO,J3={[ve.DEBUG]:"log",[ve.VERBOSE]:"log",[ve.INFO]:"info",[ve.WARN]:"warn",[ve.ERROR]:"error"},Z3=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=J3[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Zg{constructor(e){this.name=e,this._logLevel=X3,this._logHandler=Z3,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ve))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Y3[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ve.DEBUG,...e),this._logHandler(this,ve.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ve.VERBOSE,...e),this._logHandler(this,ve.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ve.INFO,...e),this._logHandler(this,ve.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ve.WARN,...e),this._logHandler(this,ve.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ve.ERROR,...e),this._logHandler(this,ve.ERROR,...e)}}const ek=(t,e)=>e.some(n=>t instanceof n);let Py,Dy;function tk(){return Py||(Py=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function nk(){return Dy||(Dy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Ob=new WeakMap,dm=new WeakMap,Bb=new WeakMap,l0=new WeakMap,ex=new WeakMap;function rk(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Fi(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Ob.set(n,t)}).catch(()=>{}),ex.set(e,t),e}function ik(t){if(dm.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});dm.set(t,e)}let fm={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return dm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Bb.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Fi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function sk(t){fm=t(fm)}function ok(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(c0(this),e,...n);return Bb.set(r,e.sort?e.sort():[e]),Fi(r)}:nk().includes(t)?function(...e){return t.apply(c0(this),e),Fi(Ob.get(this))}:function(...e){return Fi(t.apply(c0(this),e))}}function ak(t){return typeof t=="function"?ok(t):(t instanceof IDBTransaction&&ik(t),ek(t,tk())?new Proxy(t,fm):t)}function Fi(t){if(t instanceof IDBRequest)return rk(t);if(l0.has(t))return l0.get(t);const e=ak(t);return e!==t&&(l0.set(t,e),ex.set(e,t)),e}const c0=t=>ex.get(t);function lk(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Fi(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Fi(o.result),l.oldVersion,l.newVersion,Fi(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const ck=["get","getKey","getAll","getAllKeys","count"],uk=["put","add","delete","clear"],u0=new Map;function Ry(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(u0.get(e))return u0.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=uk.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||ck.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return u0.set(e,s),s}sk(t=>({...t,get:(e,n,r)=>Ry(e,n)||t.get(e,n,r),has:(e,n)=>!!Ry(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hk{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(dk(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function dk(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const pm="@firebase/app",Ny="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hr=new Zg("@firebase/app"),fk="@firebase/app-compat",pk="@firebase/analytics-compat",mk="@firebase/analytics",gk="@firebase/app-check-compat",xk="@firebase/app-check",vk="@firebase/auth",yk="@firebase/auth-compat",_k="@firebase/database",Ek="@firebase/data-connect",wk="@firebase/database-compat",bk="@firebase/functions",Ck="@firebase/functions-compat",Ak="@firebase/installations",Sk="@firebase/installations-compat",Tk="@firebase/messaging",Ik="@firebase/messaging-compat",kk="@firebase/performance",Pk="@firebase/performance-compat",Dk="@firebase/remote-config",Rk="@firebase/remote-config-compat",Nk="@firebase/storage",Fk="@firebase/storage-compat",Mk="@firebase/firestore",Ok="@firebase/vertexai-preview",Bk="@firebase/firestore-compat",Lk="firebase",jk="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mm="[DEFAULT]",Vk={[pm]:"fire-core",[fk]:"fire-core-compat",[mk]:"fire-analytics",[pk]:"fire-analytics-compat",[xk]:"fire-app-check",[gk]:"fire-app-check-compat",[vk]:"fire-auth",[yk]:"fire-auth-compat",[_k]:"fire-rtdb",[Ek]:"fire-data-connect",[wk]:"fire-rtdb-compat",[bk]:"fire-fn",[Ck]:"fire-fn-compat",[Ak]:"fire-iid",[Sk]:"fire-iid-compat",[Tk]:"fire-fcm",[Ik]:"fire-fcm-compat",[kk]:"fire-perf",[Pk]:"fire-perf-compat",[Dk]:"fire-rc",[Rk]:"fire-rc-compat",[Nk]:"fire-gcs",[Fk]:"fire-gcs-compat",[Mk]:"fire-fst",[Bk]:"fire-fst-compat",[Ok]:"fire-vertex","fire-js":"fire-js",[Lk]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kh=new Map,zk=new Map,gm=new Map;function Fy(t,e){try{t.container.addComponent(e)}catch(n){Hr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Fs(t){const e=t.name;if(gm.has(e))return Hr.debug(`There were multiple attempts to register component ${e}.`),!1;gm.set(e,t);for(const n of Kh.values())Fy(n,t);for(const n of zk.values())Fy(n,t);return!0}function jd(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function rr(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uk={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Mi=new yc("app","Firebase",Uk);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hk{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new zi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Mi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qs=jk;function Lb(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:mm,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Mi.create("bad-app-name",{appName:String(i)});if(n||(n=Nb()),!n)throw Mi.create("no-options");const s=Kh.get(i);if(s){if(qh(n,s.options)&&qh(r,s.config))return s;throw Mi.create("duplicate-app",{appName:i})}const o=new Q3(i);for(const l of gm.values())o.addComponent(l);const a=new Hk(n,r,o);return Kh.set(i,a),a}function tx(t=mm){const e=Kh.get(t);if(!e&&t===mm&&Nb())return Lb();if(!e)throw Mi.create("no-app",{appName:t});return e}function ar(t,e,n){var r;let i=(r=Vk[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Hr.warn(a.join(" "));return}Fs(new zi(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wk="firebase-heartbeat-database",$k=1,Gl="firebase-heartbeat-store";let h0=null;function jb(){return h0||(h0=lk(Wk,$k,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Gl)}catch(n){console.warn(n)}}}}).catch(t=>{throw Mi.create("idb-open",{originalErrorMessage:t.message})})),h0}async function qk(t){try{const n=(await jb()).transaction(Gl),r=await n.objectStore(Gl).get(Vb(t));return await n.done,r}catch(e){if(e instanceof pr)Hr.warn(e.message);else{const n=Mi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Hr.warn(n.message)}}}async function My(t,e){try{const r=(await jb()).transaction(Gl,"readwrite");await r.objectStore(Gl).put(e,Vb(t)),await r.done}catch(n){if(n instanceof pr)Hr.warn(n.message);else{const r=Mi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Hr.warn(r.message)}}}function Vb(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kk=1024,Gk=30*24*60*60*1e3;class Qk{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Xk(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Oy();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=Gk}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Hr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Oy(),{heartbeatsToSend:r,unsentEntries:i}=Yk(this._heartbeatsCache.heartbeats),s=$h(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Hr.warn(n),""}}}function Oy(){return new Date().toISOString().substring(0,10)}function Yk(t,e=Kk){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),By(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),By(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Xk{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return B3()?L3().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await qk(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return My(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return My(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function By(t){return $h(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jk(t){Fs(new zi("platform-logger",e=>new hk(e),"PRIVATE")),Fs(new zi("heartbeat",e=>new Qk(e),"PRIVATE")),ar(pm,Ny,t),ar(pm,Ny,"esm2017"),ar("fire-js","")}Jk("");function nx(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function zb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Zk=zb,Ub=new yc("auth","Firebase",zb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gh=new Zg("@firebase/auth");function eP(t,...e){Gh.logLevel<=ve.WARN&&Gh.warn(`Auth (${qs}): ${t}`,...e)}function Zu(t,...e){Gh.logLevel<=ve.ERROR&&Gh.error(`Auth (${qs}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $n(t,...e){throw rx(t,...e)}function lr(t,...e){return rx(t,...e)}function Hb(t,e,n){const r=Object.assign(Object.assign({},Zk()),{[e]:n});return new yc("auth","Firebase",r).create(e,{appName:t.name})}function Br(t){return Hb(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function rx(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Ub.create(t,...e)}function oe(t,e,...n){if(!t)throw rx(e,...n)}function kr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Zu(e),new Error(e)}function Wr(t,e){t||kr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xm(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function tP(){return Ly()==="http:"||Ly()==="https:"}function Ly(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nP(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(tP()||N3()||"connection"in navigator)?navigator.onLine:!0}function rP(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec{constructor(e,n){this.shortDelay=e,this.longDelay=n,Wr(n>e,"Short delay should be less than long delay!"),this.isMobile=P3()||F3()}get(){return nP()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ix(t,e){Wr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wb{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;kr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;kr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;kr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sP=new Ec(3e4,6e4);function Yi(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function mr(t,e,n,r,i={}){return $b(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=_c(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},s);return R3()||(c.referrerPolicy="no-referrer"),Wb.fetch()(qb(t,t.config.apiHost,n,a),c)})}async function $b(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},iP),e);try{const i=new aP(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw vu(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw vu(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw vu(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw vu(t,"user-disabled",o);const u=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw Hb(t,u,c);$n(t,u)}}catch(i){if(i instanceof pr)throw i;$n(t,"network-request-failed",{message:String(i)})}}async function wc(t,e,n,r,i={}){const s=await mr(t,e,n,r,i);return"mfaPendingCredential"in s&&$n(t,"multi-factor-auth-required",{_serverResponse:s}),s}function qb(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?ix(t.config,i):`${t.config.apiScheme}://${i}`}function oP(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class aP{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(lr(this.auth,"network-request-failed")),sP.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function vu(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=lr(t,e,r);return i.customData._tokenResponse=n,i}function jy(t){return t!==void 0&&t.enterprise!==void 0}class lP{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return oP(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function cP(t,e){return mr(t,"GET","/v2/recaptchaConfig",Yi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uP(t,e){return mr(t,"POST","/v1/accounts:delete",e)}async function Kb(t,e){return mr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function hP(t,e=!1){const n=Ie(t),r=await n.getIdToken(e),i=sx(r);oe(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:vl(d0(i.auth_time)),issuedAtTime:vl(d0(i.iat)),expirationTime:vl(d0(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function d0(t){return Number(t)*1e3}function sx(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Zu("JWT malformed, contained fewer than 3 sections"),null;try{const i=Pb(n);return i?JSON.parse(i):(Zu("Failed to decode base64 JWT payload"),null)}catch(i){return Zu("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Vy(t){const e=sx(t);return oe(e,"internal-error"),oe(typeof e.exp<"u","internal-error"),oe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ms(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof pr&&dP(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function dP({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fP{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=vl(this.lastLoginAt),this.creationTime=vl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qh(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Ms(t,Kb(n,{idToken:r}));oe(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?Gb(s.providerUserInfo):[],a=mP(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),u=l?c:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new vm(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,d)}async function pP(t){const e=Ie(t);await Qh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function mP(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Gb(t){return t.map(e=>{var{providerId:n}=e,r=nx(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gP(t,e){const n=await $b(t,{},async()=>{const r=_c({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=qb(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Wb.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function xP(t,e){return mr(t,"POST","/v2/accounts:revokeToken",Yi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){oe(e.idToken,"internal-error"),oe(typeof e.idToken<"u","internal-error"),oe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Vy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){oe(e.length!==0,"internal-error");const n=Vy(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(oe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await gP(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Oo;return r&&(oe(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(oe(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(oe(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Oo,this.toJSON())}_performRefresh(){return kr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ai(t,e){oe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Pr{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=nx(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new fP(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new vm(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Ms(this,this.stsTokenManager.getToken(this.auth,e));return oe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return hP(this,e)}reload(){return pP(this)}_assign(e){this!==e&&(oe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Pr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Qh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(rr(this.auth.app))return Promise.reject(Br(this.auth));const e=await this.getIdToken();return await Ms(this,uP(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,c,u;const d=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(i=n.email)!==null&&i!==void 0?i:void 0,m=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,x=(o=n.photoURL)!==null&&o!==void 0?o:void 0,y=(a=n.tenantId)!==null&&a!==void 0?a:void 0,w=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,v=(c=n.createdAt)!==null&&c!==void 0?c:void 0,g=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:_,emailVerified:A,isAnonymous:P,providerData:D,stsTokenManager:C}=n;oe(_&&C,e,"internal-error");const b=Oo.fromJSON(this.name,C);oe(typeof _=="string",e,"internal-error"),ai(d,e.name),ai(f,e.name),oe(typeof A=="boolean",e,"internal-error"),oe(typeof P=="boolean",e,"internal-error"),ai(m,e.name),ai(x,e.name),ai(y,e.name),ai(w,e.name),ai(v,e.name),ai(g,e.name);const k=new Pr({uid:_,auth:e,email:f,emailVerified:A,displayName:d,isAnonymous:P,photoURL:x,phoneNumber:m,tenantId:y,stsTokenManager:b,createdAt:v,lastLoginAt:g});return D&&Array.isArray(D)&&(k.providerData=D.map(T=>Object.assign({},T))),w&&(k._redirectEventId=w),k}static async _fromIdTokenResponse(e,n,r=!1){const i=new Oo;i.updateFromServerResponse(n);const s=new Pr({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Qh(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];oe(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?Gb(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Oo;a.updateFromIdToken(r);const l=new Pr({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new vm(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zy=new Map;function Dr(t){Wr(t instanceof Function,"Expected a class definition");let e=zy.get(t);return e?(Wr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,zy.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Qb.type="NONE";const Uy=Qb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eh(t,e,n){return`firebase:${t}:${e}:${n}`}class Bo{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=eh(this.userKey,i.apiKey,s),this.fullPersistenceKey=eh("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Pr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Bo(Dr(Uy),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||Dr(Uy);const o=eh(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const u=await c._get(o);if(u){const d=Pr._fromJSON(e,u);c!==s&&(a=d),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Bo(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new Bo(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hy(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Zb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Yb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(tC(e))return"Blackberry";if(nC(e))return"Webos";if(Xb(e))return"Safari";if((e.includes("chrome/")||Jb(e))&&!e.includes("edge/"))return"Chrome";if(eC(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Yb(t=Ut()){return/firefox\//i.test(t)}function Xb(t=Ut()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Jb(t=Ut()){return/crios\//i.test(t)}function Zb(t=Ut()){return/iemobile/i.test(t)}function eC(t=Ut()){return/android/i.test(t)}function tC(t=Ut()){return/blackberry/i.test(t)}function nC(t=Ut()){return/webos/i.test(t)}function ox(t=Ut()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function vP(t=Ut()){var e;return ox(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function yP(){return M3()&&document.documentMode===10}function rC(t=Ut()){return ox(t)||eC(t)||nC(t)||tC(t)||/windows phone/i.test(t)||Zb(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iC(t,e=[]){let n;switch(t){case"Browser":n=Hy(Ut());break;case"Worker":n=`${Hy(Ut())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${qs}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _P{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EP(t,e={}){return mr(t,"GET","/v2/passwordPolicy",Yi(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wP=6;class bP{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:wP,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CP{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Wy(this),this.idTokenSubscription=new Wy(this),this.beforeStateQueue=new _P(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ub,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Dr(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Bo.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Kb(this,{idToken:e}),r=await Pr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(rr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return oe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Qh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=rP()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(rr(this.app))return Promise.reject(Br(this));const n=e?Ie(e):null;return n&&oe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&oe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return rr(this.app)?Promise.reject(Br(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return rr(this.app)?Promise.reject(Br(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Dr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await EP(this),n=new bP(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new yc("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await xP(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Dr(e)||this._popupRedirectResolver;oe(n,this,"argument-error"),this.redirectPersistenceManager=await Bo.create(this,[Dr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(oe(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=iC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&eP(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Ks(t){return Ie(t)}class Wy{constructor(e){this.auth=e,this.observer=null,this.addObserver=H3(n=>this.observer=n)}get next(){return oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function AP(t){Vd=t}function sC(t){return Vd.loadJS(t)}function SP(){return Vd.recaptchaEnterpriseScript}function TP(){return Vd.gapiScript}function IP(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const kP="recaptcha-enterprise",PP="NO_RECAPTCHA";class DP{constructor(e){this.type=kP,this.auth=Ks(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{cP(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new lP(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;jy(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(PP)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&jy(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=SP();l.length!==0&&(l+=a),sC(l).then(()=>{i(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function $y(t,e,n,r=!1){const i=new DP(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function ym(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await $y(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await $y(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RP(t,e){const n=jd(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(qh(s,e??{}))return i;$n(i,"already-initialized")}return n.initialize({options:e})}function NP(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Dr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function FP(t,e,n){const r=Ks(t);oe(r._canInitEmulator,r,"emulator-config-failed"),oe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=oC(e),{host:o,port:a}=MP(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),OP()}function oC(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function MP(t){const e=oC(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:qy(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:qy(o)}}}function qy(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function OP(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ax{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return kr("not implemented")}_getIdTokenResponse(e){return kr("not implemented")}_linkToIdToken(e,n){return kr("not implemented")}_getReauthenticationResolver(e){return kr("not implemented")}}async function BP(t,e){return mr(t,"POST","/v1/accounts:update",e)}async function LP(t,e){return mr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jP(t,e){return wc(t,"POST","/v1/accounts:signInWithPassword",Yi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VP(t,e){return wc(t,"POST","/v1/accounts:signInWithEmailLink",Yi(t,e))}async function zP(t,e){return wc(t,"POST","/v1/accounts:signInWithEmailLink",Yi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql extends ax{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Ql(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Ql(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ym(e,n,"signInWithPassword",jP);case"emailLink":return VP(e,{email:this._email,oobCode:this._password});default:$n(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ym(e,r,"signUpPassword",LP);case"emailLink":return zP(e,{idToken:n,email:this._email,oobCode:this._password});default:$n(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lo(t,e){return wc(t,"POST","/v1/accounts:signInWithIdp",Yi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UP="http://localhost";class Os extends ax{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Os(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):$n("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=nx(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Os(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Lo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Lo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Lo(e,n)}buildRequest(){const e={requestUri:UP,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=_c(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HP(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function WP(t){const e=Xa(Ja(t)).link,n=e?Xa(Ja(e)).deep_link_id:null,r=Xa(Ja(t)).deep_link_id;return(r?Xa(Ja(r)).link:null)||r||n||e||t}class lx{constructor(e){var n,r,i,s,o,a;const l=Xa(Ja(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,u=(r=l.oobCode)!==null&&r!==void 0?r:null,d=HP((i=l.mode)!==null&&i!==void 0?i:null);oe(c&&u&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=u,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=WP(e);try{return new lx(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{constructor(){this.providerId=Gs.PROVIDER_ID}static credential(e,n){return Ql._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=lx.parseLink(n);return oe(r,"argument-error"),Ql._fromEmailAndCode(e,r.code,r.tenantId)}}Gs.PROVIDER_ID="password";Gs.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Gs.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc extends aC{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di extends bc{constructor(){super("facebook.com")}static credential(e){return Os._fromParams({providerId:di.PROVIDER_ID,signInMethod:di.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return di.credentialFromTaggedObject(e)}static credentialFromError(e){return di.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return di.credential(e.oauthAccessToken)}catch{return null}}}di.FACEBOOK_SIGN_IN_METHOD="facebook.com";di.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi extends bc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Os._fromParams({providerId:fi.PROVIDER_ID,signInMethod:fi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return fi.credentialFromTaggedObject(e)}static credentialFromError(e){return fi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return fi.credential(n,r)}catch{return null}}}fi.GOOGLE_SIGN_IN_METHOD="google.com";fi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi extends bc{constructor(){super("github.com")}static credential(e){return Os._fromParams({providerId:pi.PROVIDER_ID,signInMethod:pi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return pi.credentialFromTaggedObject(e)}static credentialFromError(e){return pi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return pi.credential(e.oauthAccessToken)}catch{return null}}}pi.GITHUB_SIGN_IN_METHOD="github.com";pi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi extends bc{constructor(){super("twitter.com")}static credential(e,n){return Os._fromParams({providerId:mi.PROVIDER_ID,signInMethod:mi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return mi.credentialFromTaggedObject(e)}static credentialFromError(e){return mi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return mi.credential(n,r)}catch{return null}}}mi.TWITTER_SIGN_IN_METHOD="twitter.com";mi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $P(t,e){return wc(t,"POST","/v1/accounts:signUp",Yi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Pr._fromIdTokenResponse(e,r,i),o=Ky(r);return new Bs({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=Ky(r);return new Bs({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function Ky(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh extends pr{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Yh.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Yh(e,n,r,i)}}function lC(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Yh._fromErrorAndOperation(t,s,e,r):s})}async function qP(t,e,n=!1){const r=await Ms(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Bs._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cC(t,e,n=!1){const{auth:r}=t;if(rr(r.app))return Promise.reject(Br(r));const i="reauthenticate";try{const s=await Ms(t,lC(r,i,e,t),n);oe(s.idToken,r,"internal-error");const o=sx(s.idToken);oe(o,r,"internal-error");const{sub:a}=o;return oe(t.uid===a,r,"user-mismatch"),Bs._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&$n(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uC(t,e,n=!1){if(rr(t.app))return Promise.reject(Br(t));const r="signIn",i=await lC(t,r,e),s=await Bs._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function KP(t,e){return uC(Ks(t),e)}async function GP(t,e){return cC(Ie(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hC(t){const e=Ks(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function QP(t,e,n){if(rr(t.app))return Promise.reject(Br(t));const r=Ks(t),o=await ym(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",$P).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&hC(t),l}),a=await Bs._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function YP(t,e,n){return rr(t.app)?Promise.reject(Br(t)):KP(Ie(t),Gs.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&hC(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XP(t,e){return mr(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dC(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Ie(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Ms(r,XP(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function JP(t,e){return ZP(Ie(t),null,e)}async function ZP(t,e,n){const{auth:r}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(s.password=n);const o=await Ms(t,BP(r,s));await t._updateTokensIfNecessary(o,!0)}function e5(t,e,n,r){return Ie(t).onIdTokenChanged(e,n,r)}function t5(t,e,n){return Ie(t).beforeAuthStateChanged(e,n)}function n5(t,e,n,r){return Ie(t).onAuthStateChanged(e,n,r)}function r5(t){return Ie(t).signOut()}async function i5(t){return Ie(t).delete()}const Xh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Xh,"1"),this.storage.removeItem(Xh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s5=1e3,o5=10;class pC extends fC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=rC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);yP()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,o5):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},s5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}pC.type="LOCAL";const a5=pC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC extends fC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}mC.type="SESSION";const gC=mC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l5(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new zd(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await l5(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}zd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cx(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c5{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=cx("",20);i.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){const f=d;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(u),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cr(){return window}function u5(t){cr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xC(){return typeof cr().WorkerGlobalScope<"u"&&typeof cr().importScripts=="function"}async function h5(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function d5(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function f5(){return xC()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vC="firebaseLocalStorageDb",p5=1,Jh="firebaseLocalStorage",yC="fbase_key";class Cc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ud(t,e){return t.transaction([Jh],e?"readwrite":"readonly").objectStore(Jh)}function m5(){const t=indexedDB.deleteDatabase(vC);return new Cc(t).toPromise()}function _m(){const t=indexedDB.open(vC,p5);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Jh,{keyPath:yC})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Jh)?e(r):(r.close(),await m5(),e(await _m()))})})}async function Gy(t,e,n){const r=Ud(t,!0).put({[yC]:e,value:n});return new Cc(r).toPromise()}async function g5(t,e){const n=Ud(t,!1).get(e),r=await new Cc(n).toPromise();return r===void 0?null:r.value}function Qy(t,e){const n=Ud(t,!0).delete(e);return new Cc(n).toPromise()}const x5=800,v5=3;class _C{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await _m(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>v5)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return xC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=zd._getInstance(f5()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await h5(),!this.activeServiceWorker)return;this.sender=new c5(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||d5()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await _m();return await Gy(e,Xh,"1"),await Qy(e,Xh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Gy(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>g5(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Qy(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Ud(i,!1).getAll();return new Cc(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),x5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}_C.type="LOCAL";const y5=_C;new Ec(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _5(t,e){return e?Dr(e):(oe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux extends ax{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Lo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Lo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Lo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function E5(t){return uC(t.auth,new ux(t),t.bypassAuthState)}function w5(t){const{auth:e,user:n}=t;return oe(n,e,"internal-error"),cC(n,new ux(t),t.bypassAuthState)}async function b5(t){const{auth:e,user:n}=t;return oe(n,e,"internal-error"),qP(n,new ux(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return E5;case"linkViaPopup":case"linkViaRedirect":return b5;case"reauthViaPopup":case"reauthViaRedirect":return w5;default:$n(this.auth,"internal-error")}}resolve(e){Wr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Wr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C5=new Ec(2e3,1e4);class ko extends EC{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,ko.currentPopupAction&&ko.currentPopupAction.cancel(),ko.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return oe(e,this.auth,"internal-error"),e}async onExecution(){Wr(this.filter.length===1,"Popup operations only handle one event");const e=cx();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(lr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(lr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ko.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(lr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,C5.get())};e()}}ko.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A5="pendingRedirect",th=new Map;class S5 extends EC{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=th.get(this.auth._key());if(!e){try{const r=await T5(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}th.set(this.auth._key(),e)}return this.bypassAuthState||th.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function T5(t,e){const n=P5(e),r=k5(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function I5(t,e){th.set(t._key(),e)}function k5(t){return Dr(t._redirectPersistence)}function P5(t){return eh(A5,t.config.apiKey,t.name)}async function D5(t,e,n=!1){if(rr(t.app))return Promise.reject(Br(t));const r=Ks(t),i=_5(r,e),o=await new S5(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R5=10*60*1e3;class N5{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!F5(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!wC(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(lr(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=R5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Yy(e))}saveEventToCache(e){this.cachedEventUids.add(Yy(e)),this.lastProcessedEventTime=Date.now()}}function Yy(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function wC({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function F5(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return wC(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M5(t,e={}){return mr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O5=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,B5=/^https?/;async function L5(t){if(t.config.emulator)return;const{authorizedDomains:e}=await M5(t);for(const n of e)try{if(j5(n))return}catch{}$n(t,"unauthorized-domain")}function j5(t){const e=xm(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!B5.test(n))return!1;if(O5.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V5=new Ec(3e4,6e4);function Xy(){const t=cr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function z5(t){return new Promise((e,n)=>{var r,i,s;function o(){Xy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Xy(),n(lr(t,"network-request-failed"))},timeout:V5.get()})}if(!((i=(r=cr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=cr().gapi)===null||s===void 0)&&s.load)o();else{const a=IP("iframefcb");return cr()[a]=()=>{gapi.load?o():n(lr(t,"network-request-failed"))},sC(`${TP()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw nh=null,e})}let nh=null;function U5(t){return nh=nh||z5(t),nh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H5=new Ec(5e3,15e3),W5="__/auth/iframe",$5="emulator/auth/iframe",q5={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},K5=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function G5(t){const e=t.config;oe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?ix(e,$5):`https://${t.config.authDomain}/${W5}`,r={apiKey:e.apiKey,appName:t.name,v:qs},i=K5.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${_c(r).slice(1)}`}async function Q5(t){const e=await U5(t),n=cr().gapi;return oe(n,t,"internal-error"),e.open({where:document.body,url:G5(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:q5,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=lr(t,"network-request-failed"),a=cr().setTimeout(()=>{s(o)},H5.get());function l(){cr().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y5={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},X5=500,J5=600,Z5="_blank",eD="http://localhost";class Jy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function tD(t,e,n,r=X5,i=J5){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},Y5),{width:r.toString(),height:i.toString(),top:s,left:o}),c=Ut().toLowerCase();n&&(a=Jb(c)?Z5:n),Yb(c)&&(e=e||eD,l.scrollbars="yes");const u=Object.entries(l).reduce((f,[m,x])=>`${f}${m}=${x},`,"");if(vP(c)&&a!=="_self")return nD(e||"",a),new Jy(null);const d=window.open(e||"",a,u);oe(d,t,"popup-blocked");try{d.focus()}catch{}return new Jy(d)}function nD(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rD="__/auth/handler",iD="emulator/auth/handler",sD=encodeURIComponent("fac");async function Zy(t,e,n,r,i,s){oe(t.config.authDomain,t,"auth-domain-config-required"),oe(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:qs,eventId:i};if(e instanceof aC){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",U3(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,d]of Object.entries({}))o[u]=d}if(e instanceof bc){const u=e.getScopes().filter(d=>d!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const l=await t._getAppCheckToken(),c=l?`#${sD}=${encodeURIComponent(l)}`:"";return`${oD(t)}?${_c(a).slice(1)}${c}`}function oD({config:t}){return t.emulator?ix(t,iD):`https://${t.authDomain}/${rD}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f0="webStorageSupport";class aD{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=gC,this._completeRedirectFn=D5,this._overrideRedirectResult=I5}async _openPopup(e,n,r,i){var s;Wr((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await Zy(e,n,r,xm(),i);return tD(e,o,cx())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await Zy(e,n,r,xm(),i);return u5(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Wr(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await Q5(e),r=new N5(e);return n.register("authEvent",i=>(oe(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(f0,{type:f0},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[f0];o!==void 0&&n(!!o),$n(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=L5(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return rC()||Xb()||ox()}}const lD=aD;var e_="@firebase/auth",t_="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cD{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uD(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function hD(t){Fs(new zi("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;oe(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:iC(t)},c=new CP(r,i,s,l);return NP(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Fs(new zi("auth-internal",e=>{const n=Ks(e.getProvider("auth").getImmediate());return(r=>new cD(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ar(e_,t_,uD(t)),ar(e_,t_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dD=5*60,fD=Fb("authIdTokenMaxAge")||dD;let n_=null;const pD=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>fD)return;const i=n==null?void 0:n.token;n_!==i&&(n_=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function mD(t=tx()){const e=jd(t,"auth");if(e.isInitialized())return e.getImmediate();const n=RP(t,{popupRedirectResolver:lD,persistence:[y5,a5,gC]}),r=Fb("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=pD(s.toString());t5(n,o,()=>o(n.currentUser)),e5(n,a=>o(a))}}const i=Db("auth");return i&&FP(n,`http://${i}`),n}function gD(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}AP({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=lr("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",gD().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});hD("Browser");var xD="firebase",vD="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ar(xD,vD,"app");var r_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var As,bC;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,b){function k(){}k.prototype=b.prototype,C.D=b.prototype,C.prototype=new k,C.prototype.constructor=C,C.C=function(T,I,N){for(var R=Array(arguments.length-2),K=2;K<arguments.length;K++)R[K-2]=arguments[K];return b.prototype[I].apply(T,R)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(C,b,k){k||(k=0);var T=Array(16);if(typeof b=="string")for(var I=0;16>I;++I)T[I]=b.charCodeAt(k++)|b.charCodeAt(k++)<<8|b.charCodeAt(k++)<<16|b.charCodeAt(k++)<<24;else for(I=0;16>I;++I)T[I]=b[k++]|b[k++]<<8|b[k++]<<16|b[k++]<<24;b=C.g[0],k=C.g[1],I=C.g[2];var N=C.g[3],R=b+(N^k&(I^N))+T[0]+3614090360&4294967295;b=k+(R<<7&4294967295|R>>>25),R=N+(I^b&(k^I))+T[1]+3905402710&4294967295,N=b+(R<<12&4294967295|R>>>20),R=I+(k^N&(b^k))+T[2]+606105819&4294967295,I=N+(R<<17&4294967295|R>>>15),R=k+(b^I&(N^b))+T[3]+3250441966&4294967295,k=I+(R<<22&4294967295|R>>>10),R=b+(N^k&(I^N))+T[4]+4118548399&4294967295,b=k+(R<<7&4294967295|R>>>25),R=N+(I^b&(k^I))+T[5]+1200080426&4294967295,N=b+(R<<12&4294967295|R>>>20),R=I+(k^N&(b^k))+T[6]+2821735955&4294967295,I=N+(R<<17&4294967295|R>>>15),R=k+(b^I&(N^b))+T[7]+4249261313&4294967295,k=I+(R<<22&4294967295|R>>>10),R=b+(N^k&(I^N))+T[8]+1770035416&4294967295,b=k+(R<<7&4294967295|R>>>25),R=N+(I^b&(k^I))+T[9]+2336552879&4294967295,N=b+(R<<12&4294967295|R>>>20),R=I+(k^N&(b^k))+T[10]+4294925233&4294967295,I=N+(R<<17&4294967295|R>>>15),R=k+(b^I&(N^b))+T[11]+2304563134&4294967295,k=I+(R<<22&4294967295|R>>>10),R=b+(N^k&(I^N))+T[12]+1804603682&4294967295,b=k+(R<<7&4294967295|R>>>25),R=N+(I^b&(k^I))+T[13]+4254626195&4294967295,N=b+(R<<12&4294967295|R>>>20),R=I+(k^N&(b^k))+T[14]+2792965006&4294967295,I=N+(R<<17&4294967295|R>>>15),R=k+(b^I&(N^b))+T[15]+1236535329&4294967295,k=I+(R<<22&4294967295|R>>>10),R=b+(I^N&(k^I))+T[1]+4129170786&4294967295,b=k+(R<<5&4294967295|R>>>27),R=N+(k^I&(b^k))+T[6]+3225465664&4294967295,N=b+(R<<9&4294967295|R>>>23),R=I+(b^k&(N^b))+T[11]+643717713&4294967295,I=N+(R<<14&4294967295|R>>>18),R=k+(N^b&(I^N))+T[0]+3921069994&4294967295,k=I+(R<<20&4294967295|R>>>12),R=b+(I^N&(k^I))+T[5]+3593408605&4294967295,b=k+(R<<5&4294967295|R>>>27),R=N+(k^I&(b^k))+T[10]+38016083&4294967295,N=b+(R<<9&4294967295|R>>>23),R=I+(b^k&(N^b))+T[15]+3634488961&4294967295,I=N+(R<<14&4294967295|R>>>18),R=k+(N^b&(I^N))+T[4]+3889429448&4294967295,k=I+(R<<20&4294967295|R>>>12),R=b+(I^N&(k^I))+T[9]+568446438&4294967295,b=k+(R<<5&4294967295|R>>>27),R=N+(k^I&(b^k))+T[14]+3275163606&4294967295,N=b+(R<<9&4294967295|R>>>23),R=I+(b^k&(N^b))+T[3]+4107603335&4294967295,I=N+(R<<14&4294967295|R>>>18),R=k+(N^b&(I^N))+T[8]+1163531501&4294967295,k=I+(R<<20&4294967295|R>>>12),R=b+(I^N&(k^I))+T[13]+2850285829&4294967295,b=k+(R<<5&4294967295|R>>>27),R=N+(k^I&(b^k))+T[2]+4243563512&4294967295,N=b+(R<<9&4294967295|R>>>23),R=I+(b^k&(N^b))+T[7]+1735328473&4294967295,I=N+(R<<14&4294967295|R>>>18),R=k+(N^b&(I^N))+T[12]+2368359562&4294967295,k=I+(R<<20&4294967295|R>>>12),R=b+(k^I^N)+T[5]+4294588738&4294967295,b=k+(R<<4&4294967295|R>>>28),R=N+(b^k^I)+T[8]+2272392833&4294967295,N=b+(R<<11&4294967295|R>>>21),R=I+(N^b^k)+T[11]+1839030562&4294967295,I=N+(R<<16&4294967295|R>>>16),R=k+(I^N^b)+T[14]+4259657740&4294967295,k=I+(R<<23&4294967295|R>>>9),R=b+(k^I^N)+T[1]+2763975236&4294967295,b=k+(R<<4&4294967295|R>>>28),R=N+(b^k^I)+T[4]+1272893353&4294967295,N=b+(R<<11&4294967295|R>>>21),R=I+(N^b^k)+T[7]+4139469664&4294967295,I=N+(R<<16&4294967295|R>>>16),R=k+(I^N^b)+T[10]+3200236656&4294967295,k=I+(R<<23&4294967295|R>>>9),R=b+(k^I^N)+T[13]+681279174&4294967295,b=k+(R<<4&4294967295|R>>>28),R=N+(b^k^I)+T[0]+3936430074&4294967295,N=b+(R<<11&4294967295|R>>>21),R=I+(N^b^k)+T[3]+3572445317&4294967295,I=N+(R<<16&4294967295|R>>>16),R=k+(I^N^b)+T[6]+76029189&4294967295,k=I+(R<<23&4294967295|R>>>9),R=b+(k^I^N)+T[9]+3654602809&4294967295,b=k+(R<<4&4294967295|R>>>28),R=N+(b^k^I)+T[12]+3873151461&4294967295,N=b+(R<<11&4294967295|R>>>21),R=I+(N^b^k)+T[15]+530742520&4294967295,I=N+(R<<16&4294967295|R>>>16),R=k+(I^N^b)+T[2]+3299628645&4294967295,k=I+(R<<23&4294967295|R>>>9),R=b+(I^(k|~N))+T[0]+4096336452&4294967295,b=k+(R<<6&4294967295|R>>>26),R=N+(k^(b|~I))+T[7]+1126891415&4294967295,N=b+(R<<10&4294967295|R>>>22),R=I+(b^(N|~k))+T[14]+2878612391&4294967295,I=N+(R<<15&4294967295|R>>>17),R=k+(N^(I|~b))+T[5]+4237533241&4294967295,k=I+(R<<21&4294967295|R>>>11),R=b+(I^(k|~N))+T[12]+1700485571&4294967295,b=k+(R<<6&4294967295|R>>>26),R=N+(k^(b|~I))+T[3]+2399980690&4294967295,N=b+(R<<10&4294967295|R>>>22),R=I+(b^(N|~k))+T[10]+4293915773&4294967295,I=N+(R<<15&4294967295|R>>>17),R=k+(N^(I|~b))+T[1]+2240044497&4294967295,k=I+(R<<21&4294967295|R>>>11),R=b+(I^(k|~N))+T[8]+1873313359&4294967295,b=k+(R<<6&4294967295|R>>>26),R=N+(k^(b|~I))+T[15]+4264355552&4294967295,N=b+(R<<10&4294967295|R>>>22),R=I+(b^(N|~k))+T[6]+2734768916&4294967295,I=N+(R<<15&4294967295|R>>>17),R=k+(N^(I|~b))+T[13]+1309151649&4294967295,k=I+(R<<21&4294967295|R>>>11),R=b+(I^(k|~N))+T[4]+4149444226&4294967295,b=k+(R<<6&4294967295|R>>>26),R=N+(k^(b|~I))+T[11]+3174756917&4294967295,N=b+(R<<10&4294967295|R>>>22),R=I+(b^(N|~k))+T[2]+718787259&4294967295,I=N+(R<<15&4294967295|R>>>17),R=k+(N^(I|~b))+T[9]+3951481745&4294967295,C.g[0]=C.g[0]+b&4294967295,C.g[1]=C.g[1]+(I+(R<<21&4294967295|R>>>11))&4294967295,C.g[2]=C.g[2]+I&4294967295,C.g[3]=C.g[3]+N&4294967295}r.prototype.u=function(C,b){b===void 0&&(b=C.length);for(var k=b-this.blockSize,T=this.B,I=this.h,N=0;N<b;){if(I==0)for(;N<=k;)i(this,C,N),N+=this.blockSize;if(typeof C=="string"){for(;N<b;)if(T[I++]=C.charCodeAt(N++),I==this.blockSize){i(this,T),I=0;break}}else for(;N<b;)if(T[I++]=C[N++],I==this.blockSize){i(this,T),I=0;break}}this.h=I,this.o+=b},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var b=1;b<C.length-8;++b)C[b]=0;var k=8*this.o;for(b=C.length-8;b<C.length;++b)C[b]=k&255,k/=256;for(this.u(C),C=Array(16),b=k=0;4>b;++b)for(var T=0;32>T;T+=8)C[k++]=this.g[b]>>>T&255;return C};function s(C,b){var k=a;return Object.prototype.hasOwnProperty.call(k,C)?k[C]:k[C]=b(C)}function o(C,b){this.h=b;for(var k=[],T=!0,I=C.length-1;0<=I;I--){var N=C[I]|0;T&&N==b||(k[I]=N,T=!1)}this.g=k}var a={};function l(C){return-128<=C&&128>C?s(C,function(b){return new o([b|0],0>b?-1:0)}):new o([C|0],0>C?-1:0)}function c(C){if(isNaN(C)||!isFinite(C))return d;if(0>C)return w(c(-C));for(var b=[],k=1,T=0;C>=k;T++)b[T]=C/k|0,k*=4294967296;return new o(b,0)}function u(C,b){if(C.length==0)throw Error("number format error: empty string");if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(C.charAt(0)=="-")return w(u(C.substring(1),b));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=c(Math.pow(b,8)),T=d,I=0;I<C.length;I+=8){var N=Math.min(8,C.length-I),R=parseInt(C.substring(I,I+N),b);8>N?(N=c(Math.pow(b,N)),T=T.j(N).add(c(R))):(T=T.j(k),T=T.add(c(R)))}return T}var d=l(0),f=l(1),m=l(16777216);t=o.prototype,t.m=function(){if(y(this))return-w(this).m();for(var C=0,b=1,k=0;k<this.g.length;k++){var T=this.i(k);C+=(0<=T?T:4294967296+T)*b,b*=4294967296}return C},t.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(x(this))return"0";if(y(this))return"-"+w(this).toString(C);for(var b=c(Math.pow(C,6)),k=this,T="";;){var I=A(k,b).g;k=v(k,I.j(b));var N=((0<k.g.length?k.g[0]:k.h)>>>0).toString(C);if(k=I,x(k))return N+T;for(;6>N.length;)N="0"+N;T=N+T}},t.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function x(C){if(C.h!=0)return!1;for(var b=0;b<C.g.length;b++)if(C.g[b]!=0)return!1;return!0}function y(C){return C.h==-1}t.l=function(C){return C=v(this,C),y(C)?-1:x(C)?0:1};function w(C){for(var b=C.g.length,k=[],T=0;T<b;T++)k[T]=~C.g[T];return new o(k,~C.h).add(f)}t.abs=function(){return y(this)?w(this):this},t.add=function(C){for(var b=Math.max(this.g.length,C.g.length),k=[],T=0,I=0;I<=b;I++){var N=T+(this.i(I)&65535)+(C.i(I)&65535),R=(N>>>16)+(this.i(I)>>>16)+(C.i(I)>>>16);T=R>>>16,N&=65535,R&=65535,k[I]=R<<16|N}return new o(k,k[k.length-1]&-2147483648?-1:0)};function v(C,b){return C.add(w(b))}t.j=function(C){if(x(this)||x(C))return d;if(y(this))return y(C)?w(this).j(w(C)):w(w(this).j(C));if(y(C))return w(this.j(w(C)));if(0>this.l(m)&&0>C.l(m))return c(this.m()*C.m());for(var b=this.g.length+C.g.length,k=[],T=0;T<2*b;T++)k[T]=0;for(T=0;T<this.g.length;T++)for(var I=0;I<C.g.length;I++){var N=this.i(T)>>>16,R=this.i(T)&65535,K=C.i(I)>>>16,q=C.i(I)&65535;k[2*T+2*I]+=R*q,g(k,2*T+2*I),k[2*T+2*I+1]+=N*q,g(k,2*T+2*I+1),k[2*T+2*I+1]+=R*K,g(k,2*T+2*I+1),k[2*T+2*I+2]+=N*K,g(k,2*T+2*I+2)}for(T=0;T<b;T++)k[T]=k[2*T+1]<<16|k[2*T];for(T=b;T<2*b;T++)k[T]=0;return new o(k,0)};function g(C,b){for(;(C[b]&65535)!=C[b];)C[b+1]+=C[b]>>>16,C[b]&=65535,b++}function _(C,b){this.g=C,this.h=b}function A(C,b){if(x(b))throw Error("division by zero");if(x(C))return new _(d,d);if(y(C))return b=A(w(C),b),new _(w(b.g),w(b.h));if(y(b))return b=A(C,w(b)),new _(w(b.g),b.h);if(30<C.g.length){if(y(C)||y(b))throw Error("slowDivide_ only works with positive integers.");for(var k=f,T=b;0>=T.l(C);)k=P(k),T=P(T);var I=D(k,1),N=D(T,1);for(T=D(T,2),k=D(k,2);!x(T);){var R=N.add(T);0>=R.l(C)&&(I=I.add(k),N=R),T=D(T,1),k=D(k,1)}return b=v(C,I.j(b)),new _(I,b)}for(I=d;0<=C.l(b);){for(k=Math.max(1,Math.floor(C.m()/b.m())),T=Math.ceil(Math.log(k)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),N=c(k),R=N.j(b);y(R)||0<R.l(C);)k-=T,N=c(k),R=N.j(b);x(N)&&(N=f),I=I.add(N),C=v(C,R)}return new _(I,C)}t.A=function(C){return A(this,C).h},t.and=function(C){for(var b=Math.max(this.g.length,C.g.length),k=[],T=0;T<b;T++)k[T]=this.i(T)&C.i(T);return new o(k,this.h&C.h)},t.or=function(C){for(var b=Math.max(this.g.length,C.g.length),k=[],T=0;T<b;T++)k[T]=this.i(T)|C.i(T);return new o(k,this.h|C.h)},t.xor=function(C){for(var b=Math.max(this.g.length,C.g.length),k=[],T=0;T<b;T++)k[T]=this.i(T)^C.i(T);return new o(k,this.h^C.h)};function P(C){for(var b=C.g.length+1,k=[],T=0;T<b;T++)k[T]=C.i(T)<<1|C.i(T-1)>>>31;return new o(k,C.h)}function D(C,b){var k=b>>5;b%=32;for(var T=C.g.length-k,I=[],N=0;N<T;N++)I[N]=0<b?C.i(N+k)>>>b|C.i(N+k+1)<<32-b:C.i(N+k);return new o(I,C.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,bC=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=u,As=o}).apply(typeof r_<"u"?r_:typeof self<"u"?self:typeof window<"u"?window:{});var yu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var CC,Za,AC,rh,Em,SC,TC,IC;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,E,S){return h==Array.prototype||h==Object.prototype||(h[E]=S.value),h};function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof yu=="object"&&yu];for(var E=0;E<h.length;++E){var S=h[E];if(S&&S.Math==Math)return S}throw Error("Cannot find global object")}var r=n(this);function i(h,E){if(E)e:{var S=r;h=h.split(".");for(var F=0;F<h.length-1;F++){var O=h[F];if(!(O in S))break e;S=S[O]}h=h[h.length-1],F=S[h],E=E(F),E!=F&&E!=null&&e(S,h,{configurable:!0,writable:!0,value:E})}}function s(h,E){h instanceof String&&(h+="");var S=0,F=!1,O={next:function(){if(!F&&S<h.length){var z=S++;return{value:E(z,h[z]),done:!1}}return F=!0,{done:!0,value:void 0}}};return O[Symbol.iterator]=function(){return O},O}i("Array.prototype.values",function(h){return h||function(){return s(this,function(E,S){return S})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(h){var E=typeof h;return E=E!="object"?E:h?Array.isArray(h)?"array":E:"null",E=="array"||E=="object"&&typeof h.length=="number"}function c(h){var E=typeof h;return E=="object"&&h!=null||E=="function"}function u(h,E,S){return h.call.apply(h.bind,arguments)}function d(h,E,S){if(!h)throw Error();if(2<arguments.length){var F=Array.prototype.slice.call(arguments,2);return function(){var O=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(O,F),h.apply(E,O)}}return function(){return h.apply(E,arguments)}}function f(h,E,S){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:d,f.apply(null,arguments)}function m(h,E){var S=Array.prototype.slice.call(arguments,1);return function(){var F=S.slice();return F.push.apply(F,arguments),h.apply(this,F)}}function x(h,E){function S(){}S.prototype=E.prototype,h.aa=E.prototype,h.prototype=new S,h.prototype.constructor=h,h.Qb=function(F,O,z){for(var J=Array(arguments.length-2),Pe=2;Pe<arguments.length;Pe++)J[Pe-2]=arguments[Pe];return E.prototype[O].apply(F,J)}}function y(h){const E=h.length;if(0<E){const S=Array(E);for(let F=0;F<E;F++)S[F]=h[F];return S}return[]}function w(h,E){for(let S=1;S<arguments.length;S++){const F=arguments[S];if(l(F)){const O=h.length||0,z=F.length||0;h.length=O+z;for(let J=0;J<z;J++)h[O+J]=F[J]}else h.push(F)}}class v{constructor(E,S){this.i=E,this.j=S,this.h=0,this.g=null}get(){let E;return 0<this.h?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function g(h){return/^[\s\xa0]*$/.test(h)}function _(){var h=a.navigator;return h&&(h=h.userAgent)?h:""}function A(h){return A[" "](h),h}A[" "]=function(){};var P=_().indexOf("Gecko")!=-1&&!(_().toLowerCase().indexOf("webkit")!=-1&&_().indexOf("Edge")==-1)&&!(_().indexOf("Trident")!=-1||_().indexOf("MSIE")!=-1)&&_().indexOf("Edge")==-1;function D(h,E,S){for(const F in h)E.call(S,h[F],F,h)}function C(h,E){for(const S in h)E.call(void 0,h[S],S,h)}function b(h){const E={};for(const S in h)E[S]=h[S];return E}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(h,E){let S,F;for(let O=1;O<arguments.length;O++){F=arguments[O];for(S in F)h[S]=F[S];for(let z=0;z<k.length;z++)S=k[z],Object.prototype.hasOwnProperty.call(F,S)&&(h[S]=F[S])}}function I(h){var E=1;h=h.split(":");const S=[];for(;0<E&&h.length;)S.push(h.shift()),E--;return h.length&&S.push(h.join(":")),S}function N(h){a.setTimeout(()=>{throw h},0)}function R(){var h=W;let E=null;return h.g&&(E=h.g,h.g=h.g.next,h.g||(h.h=null),E.next=null),E}class K{constructor(){this.h=this.g=null}add(E,S){const F=q.get();F.set(E,S),this.h?this.h.next=F:this.g=F,this.h=F}}var q=new v(()=>new L,h=>h.reset());class L{constructor(){this.next=this.g=this.h=null}set(E,S){this.h=E,this.g=S,this.next=null}reset(){this.next=this.g=this.h=null}}let X,j=!1,W=new K,Q=()=>{const h=a.Promise.resolve(void 0);X=()=>{h.then(B)}};var B=()=>{for(var h;h=R();){try{h.h.call(h.g)}catch(S){N(S)}var E=q;E.j(h),100>E.h&&(E.h++,h.next=E.g,E.g=h)}j=!1};function V(){this.s=this.s,this.C=this.C}V.prototype.s=!1,V.prototype.ma=function(){this.s||(this.s=!0,this.N())},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function U(h,E){this.type=h,this.g=this.target=E,this.defaultPrevented=!1}U.prototype.h=function(){this.defaultPrevented=!0};var H=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var h=!1,E=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const S=()=>{};a.addEventListener("test",S,E),a.removeEventListener("test",S,E)}catch{}return h}();function re(h,E){if(U.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var S=this.type=h.type,F=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=E,E=h.relatedTarget){if(P){e:{try{A(E.nodeName);var O=!0;break e}catch{}O=!1}O||(E=null)}}else S=="mouseover"?E=h.fromElement:S=="mouseout"&&(E=h.toElement);this.relatedTarget=E,F?(this.clientX=F.clientX!==void 0?F.clientX:F.pageX,this.clientY=F.clientY!==void 0?F.clientY:F.pageY,this.screenX=F.screenX||0,this.screenY=F.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:ie[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&re.aa.h.call(this)}}x(re,U);var ie={2:"touch",3:"pen",4:"mouse"};re.prototype.h=function(){re.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var ke="closure_listenable_"+(1e6*Math.random()|0),ue=0;function et(h,E,S,F,O){this.listener=h,this.proxy=null,this.src=E,this.type=S,this.capture=!!F,this.ha=O,this.key=++ue,this.da=this.fa=!1}function tt(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Ce(h){this.src=h,this.g={},this.h=0}Ce.prototype.add=function(h,E,S,F,O){var z=h.toString();h=this.g[z],h||(h=this.g[z]=[],this.h++);var J=_t(h,E,F,O);return-1<J?(E=h[J],S||(E.fa=!1)):(E=new et(E,this.src,z,!!F,O),E.fa=S,h.push(E)),E};function dn(h,E){var S=E.type;if(S in h.g){var F=h.g[S],O=Array.prototype.indexOf.call(F,E,void 0),z;(z=0<=O)&&Array.prototype.splice.call(F,O,1),z&&(tt(E),h.g[S].length==0&&(delete h.g[S],h.h--))}}function _t(h,E,S,F){for(var O=0;O<h.length;++O){var z=h[O];if(!z.da&&z.listener==E&&z.capture==!!S&&z.ha==F)return O}return-1}var nt="closure_lm_"+(1e6*Math.random()|0),Qn={};function Zr(h,E,S,F,O){if(Array.isArray(E)){for(var z=0;z<E.length;z++)Zr(h,E[z],S,F,O);return null}return S=ga(S),h&&h[ke]?h.K(E,S,c(F)?!!F.capture:!1,O):eo(h,E,S,!1,F,O)}function eo(h,E,S,F,O,z){if(!E)throw Error("Invalid event type");var J=c(O)?!!O.capture:!!O,Pe=bn(h);if(Pe||(h[nt]=Pe=new Ce(h)),S=Pe.add(E,S,F,J,z),S.proxy)return S;if(F=ts(),S.proxy=F,F.src=h,F.listener=S,h.addEventListener)H||(O=J),O===void 0&&(O=!1),h.addEventListener(E.toString(),F,O);else if(h.attachEvent)h.attachEvent(Xt(E.toString()),F);else if(h.addListener&&h.removeListener)h.addListener(F);else throw Error("addEventListener and attachEvent are unavailable.");return S}function ts(){function h(S){return E.call(h.src,h.listener,S)}const E=Jt;return h}function to(h,E,S,F,O){if(Array.isArray(E))for(var z=0;z<E.length;z++)to(h,E[z],S,F,O);else F=c(F)?!!F.capture:!!F,S=ga(S),h&&h[ke]?(h=h.i,E=String(E).toString(),E in h.g&&(z=h.g[E],S=_t(z,S,F,O),-1<S&&(tt(z[S]),Array.prototype.splice.call(z,S,1),z.length==0&&(delete h.g[E],h.h--)))):h&&(h=bn(h))&&(E=h.g[E.toString()],h=-1,E&&(h=_t(E,S,F,O)),(S=-1<h?E[h]:null)&&gr(S))}function gr(h){if(typeof h!="number"&&h&&!h.da){var E=h.src;if(E&&E[ke])dn(E.i,h);else{var S=h.type,F=h.proxy;E.removeEventListener?E.removeEventListener(S,F,h.capture):E.detachEvent?E.detachEvent(Xt(S),F):E.addListener&&E.removeListener&&E.removeListener(F),(S=bn(E))?(dn(S,h),S.h==0&&(S.src=null,E[nt]=null)):tt(h)}}}function Xt(h){return h in Qn?Qn[h]:Qn[h]="on"+h}function Jt(h,E){if(h.da)h=!0;else{E=new re(E,this);var S=h.listener,F=h.ha||h.src;h.fa&&gr(h),h=S.call(F,E)}return h}function bn(h){return h=h[nt],h instanceof Ce?h:null}var ei="__closure_events_fn_"+(1e9*Math.random()>>>0);function ga(h){return typeof h=="function"?h:(h[ei]||(h[ei]=function(E){return h.handleEvent(E)}),h[ei])}function He(){V.call(this),this.i=new Ce(this),this.M=this,this.F=null}x(He,V),He.prototype[ke]=!0,He.prototype.removeEventListener=function(h,E,S,F){to(this,h,E,S,F)};function rt(h,E){var S,F=h.F;if(F)for(S=[];F;F=F.F)S.push(F);if(h=h.M,F=E.type||E,typeof E=="string")E=new U(E,h);else if(E instanceof U)E.target=E.target||h;else{var O=E;E=new U(F,h),T(E,O)}if(O=!0,S)for(var z=S.length-1;0<=z;z--){var J=E.g=S[z];O=no(J,F,!0,E)&&O}if(J=E.g=h,O=no(J,F,!0,E)&&O,O=no(J,F,!1,E)&&O,S)for(z=0;z<S.length;z++)J=E.g=S[z],O=no(J,F,!1,E)&&O}He.prototype.N=function(){if(He.aa.N.call(this),this.i){var h=this.i,E;for(E in h.g){for(var S=h.g[E],F=0;F<S.length;F++)tt(S[F]);delete h.g[E],h.h--}}this.F=null},He.prototype.K=function(h,E,S,F){return this.i.add(String(h),E,!1,S,F)},He.prototype.L=function(h,E,S,F){return this.i.add(String(h),E,!0,S,F)};function no(h,E,S,F){if(E=h.i.g[String(E)],!E)return!0;E=E.concat();for(var O=!0,z=0;z<E.length;++z){var J=E[z];if(J&&!J.da&&J.capture==S){var Pe=J.listener,wt=J.ha||J.src;J.fa&&dn(h.i,J),O=Pe.call(wt,F)!==!1&&O}}return O&&!F.defaultPrevented}function xa(h,E,S){if(typeof h=="function")S&&(h=f(h,S));else if(h&&typeof h.handleEvent=="function")h=f(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(E)?-1:a.setTimeout(h,E||0)}function va(h){h.g=xa(()=>{h.g=null,h.i&&(h.i=!1,va(h))},h.l);const E=h.h;h.h=null,h.m.apply(null,E)}class ti extends V{constructor(E,S){super(),this.m=E,this.l=S,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:va(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Nn(h){V.call(this),this.h=h,this.g={}}x(Nn,V);var Oc=[];function ya(h){D(h.g,function(E,S){this.g.hasOwnProperty(S)&&gr(E)},h),h.g={}}Nn.prototype.N=function(){Nn.aa.N.call(this),ya(this)},Nn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ro=a.JSON.stringify,yf=a.JSON.parse,_f=class{stringify(h){return a.JSON.stringify(h,void 0)}parse(h){return a.JSON.parse(h,void 0)}};function io(){}io.prototype.h=null;function Bc(h){return h.h||(h.h=h.i())}function _a(){}var ns={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function so(){U.call(this,"d")}x(so,U);function Ea(){U.call(this,"c")}x(Ea,U);var xr={},Lc=null;function rs(){return Lc=Lc||new He}xr.La="serverreachability";function jc(h){U.call(this,xr.La,h)}x(jc,U);function is(h){const E=rs();rt(E,new jc(E))}xr.STAT_EVENT="statevent";function wa(h,E){U.call(this,xr.STAT_EVENT,h),this.stat=E}x(wa,U);function Et(h){const E=rs();rt(E,new wa(E,h))}xr.Ma="timingevent";function ba(h,E){U.call(this,xr.Ma,h),this.size=E}x(ba,U);function ut(h,E){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){h()},E)}function Zt(){this.g=!0}Zt.prototype.xa=function(){this.g=!1};function Vc(h,E,S,F,O,z){h.info(function(){if(h.g)if(z)for(var J="",Pe=z.split("&"),wt=0;wt<Pe.length;wt++){var we=Pe[wt].split("=");if(1<we.length){var Pt=we[0];we=we[1];var Dt=Pt.split("_");J=2<=Dt.length&&Dt[1]=="type"?J+(Pt+"="+we+"&"):J+(Pt+"=redacted&")}}else J=null;else J=z;return"XMLHTTP REQ ("+F+") [attempt "+O+"]: "+E+`
`+S+`
`+J})}function Ef(h,E,S,F,O,z,J){h.info(function(){return"XMLHTTP RESP ("+F+") [ attempt "+O+"]: "+E+`
`+S+`
`+z+" "+J})}function oo(h,E,S,F){h.info(function(){return"XMLHTTP TEXT ("+E+"): "+ET(h,S)+(F?" "+F:"")})}function _T(h,E){h.info(function(){return"TIMEOUT: "+E})}Zt.prototype.info=function(){};function ET(h,E){if(!h.g)return E;if(!E)return null;try{var S=JSON.parse(E);if(S){for(h=0;h<S.length;h++)if(Array.isArray(S[h])){var F=S[h];if(!(2>F.length)){var O=F[1];if(Array.isArray(O)&&!(1>O.length)){var z=O[0];if(z!="noop"&&z!="stop"&&z!="close")for(var J=1;J<O.length;J++)O[J]=""}}}}return ro(S)}catch{return E}}var zc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Tv={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},wf;function Uc(){}x(Uc,io),Uc.prototype.g=function(){return new XMLHttpRequest},Uc.prototype.i=function(){return{}},wf=new Uc;function ni(h,E,S,F){this.j=h,this.i=E,this.l=S,this.R=F||1,this.U=new Nn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Iv}function Iv(){this.i=null,this.g="",this.h=!1}var kv={},bf={};function Cf(h,E,S){h.L=1,h.v=qc(vr(E)),h.m=S,h.P=!0,Pv(h,null)}function Pv(h,E){h.F=Date.now(),Hc(h),h.A=vr(h.v);var S=h.A,F=h.R;Array.isArray(F)||(F=[String(F)]),Wv(S.i,"t",F),h.C=0,S=h.j.J,h.h=new Iv,h.g=l1(h.j,S?E:null,!h.m),0<h.O&&(h.M=new ti(f(h.Y,h,h.g),h.O)),E=h.U,S=h.g,F=h.ca;var O="readystatechange";Array.isArray(O)||(O&&(Oc[0]=O.toString()),O=Oc);for(var z=0;z<O.length;z++){var J=Zr(S,O[z],F||E.handleEvent,!1,E.h||E);if(!J)break;E.g[J.key]=J}E=h.H?b(h.H):{},h.m?(h.u||(h.u="POST"),E["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,E)):(h.u="GET",h.g.ea(h.A,h.u,null,E)),is(),Vc(h.i,h.u,h.A,h.l,h.R,h.m)}ni.prototype.ca=function(h){h=h.target;const E=this.M;E&&yr(h)==3?E.j():this.Y(h)},ni.prototype.Y=function(h){try{if(h==this.g)e:{const Dt=yr(this.g);var E=this.g.Ba();const co=this.g.Z();if(!(3>Dt)&&(Dt!=3||this.g&&(this.h.h||this.g.oa()||Xv(this.g)))){this.J||Dt!=4||E==7||(E==8||0>=co?is(3):is(2)),Af(this);var S=this.g.Z();this.X=S;t:if(Dv(this)){var F=Xv(this.g);h="";var O=F.length,z=yr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ss(this),Ca(this);var J="";break t}this.h.i=new a.TextDecoder}for(E=0;E<O;E++)this.h.h=!0,h+=this.h.i.decode(F[E],{stream:!(z&&E==O-1)});F.length=0,this.h.g+=h,this.C=0,J=this.h.g}else J=this.g.oa();if(this.o=S==200,Ef(this.i,this.u,this.A,this.l,this.R,Dt,S),this.o){if(this.T&&!this.K){t:{if(this.g){var Pe,wt=this.g;if((Pe=wt.g?wt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!g(Pe)){var we=Pe;break t}}we=null}if(S=we)oo(this.i,this.l,S,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Sf(this,S);else{this.o=!1,this.s=3,Et(12),ss(this),Ca(this);break e}}if(this.P){S=!0;let Fn;for(;!this.J&&this.C<J.length;)if(Fn=wT(this,J),Fn==bf){Dt==4&&(this.s=4,Et(14),S=!1),oo(this.i,this.l,null,"[Incomplete Response]");break}else if(Fn==kv){this.s=4,Et(15),oo(this.i,this.l,J,"[Invalid Chunk]"),S=!1;break}else oo(this.i,this.l,Fn,null),Sf(this,Fn);if(Dv(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Dt!=4||J.length!=0||this.h.h||(this.s=1,Et(16),S=!1),this.o=this.o&&S,!S)oo(this.i,this.l,J,"[Invalid Chunked Response]"),ss(this),Ca(this);else if(0<J.length&&!this.W){this.W=!0;var Pt=this.j;Pt.g==this&&Pt.ba&&!Pt.M&&(Pt.j.info("Great, no buffering proxy detected. Bytes received: "+J.length),Rf(Pt),Pt.M=!0,Et(11))}}else oo(this.i,this.l,J,null),Sf(this,J);Dt==4&&ss(this),this.o&&!this.J&&(Dt==4?i1(this.j,this):(this.o=!1,Hc(this)))}else jT(this.g),S==400&&0<J.indexOf("Unknown SID")?(this.s=3,Et(12)):(this.s=0,Et(13)),ss(this),Ca(this)}}}catch{}finally{}};function Dv(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function wT(h,E){var S=h.C,F=E.indexOf(`
`,S);return F==-1?bf:(S=Number(E.substring(S,F)),isNaN(S)?kv:(F+=1,F+S>E.length?bf:(E=E.slice(F,F+S),h.C=F+S,E)))}ni.prototype.cancel=function(){this.J=!0,ss(this)};function Hc(h){h.S=Date.now()+h.I,Rv(h,h.I)}function Rv(h,E){if(h.B!=null)throw Error("WatchDog timer not null");h.B=ut(f(h.ba,h),E)}function Af(h){h.B&&(a.clearTimeout(h.B),h.B=null)}ni.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(_T(this.i,this.A),this.L!=2&&(is(),Et(17)),ss(this),this.s=2,Ca(this)):Rv(this,this.S-h)};function Ca(h){h.j.G==0||h.J||i1(h.j,h)}function ss(h){Af(h);var E=h.M;E&&typeof E.ma=="function"&&E.ma(),h.M=null,ya(h.U),h.g&&(E=h.g,h.g=null,E.abort(),E.ma())}function Sf(h,E){try{var S=h.j;if(S.G!=0&&(S.g==h||Tf(S.h,h))){if(!h.K&&Tf(S.h,h)&&S.G==3){try{var F=S.Da.g.parse(E)}catch{F=null}if(Array.isArray(F)&&F.length==3){var O=F;if(O[0]==0){e:if(!S.u){if(S.g)if(S.g.F+3e3<h.F)Jc(S),Yc(S);else break e;Df(S),Et(18)}}else S.za=O[1],0<S.za-S.T&&37500>O[2]&&S.F&&S.v==0&&!S.C&&(S.C=ut(f(S.Za,S),6e3));if(1>=Mv(S.h)&&S.ca){try{S.ca()}catch{}S.ca=void 0}}else as(S,11)}else if((h.K||S.g==h)&&Jc(S),!g(E))for(O=S.Da.g.parse(E),E=0;E<O.length;E++){let we=O[E];if(S.T=we[0],we=we[1],S.G==2)if(we[0]=="c"){S.K=we[1],S.ia=we[2];const Pt=we[3];Pt!=null&&(S.la=Pt,S.j.info("VER="+S.la));const Dt=we[4];Dt!=null&&(S.Aa=Dt,S.j.info("SVER="+S.Aa));const co=we[5];co!=null&&typeof co=="number"&&0<co&&(F=1.5*co,S.L=F,S.j.info("backChannelRequestTimeoutMs_="+F)),F=S;const Fn=h.g;if(Fn){const eu=Fn.g?Fn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(eu){var z=F.h;z.g||eu.indexOf("spdy")==-1&&eu.indexOf("quic")==-1&&eu.indexOf("h2")==-1||(z.j=z.l,z.g=new Set,z.h&&(If(z,z.h),z.h=null))}if(F.D){const Nf=Fn.g?Fn.g.getResponseHeader("X-HTTP-Session-Id"):null;Nf&&(F.ya=Nf,Ne(F.I,F.D,Nf))}}S.G=3,S.l&&S.l.ua(),S.ba&&(S.R=Date.now()-h.F,S.j.info("Handshake RTT: "+S.R+"ms")),F=S;var J=h;if(F.qa=a1(F,F.J?F.ia:null,F.W),J.K){Ov(F.h,J);var Pe=J,wt=F.L;wt&&(Pe.I=wt),Pe.B&&(Af(Pe),Hc(Pe)),F.g=J}else n1(F);0<S.i.length&&Xc(S)}else we[0]!="stop"&&we[0]!="close"||as(S,7);else S.G==3&&(we[0]=="stop"||we[0]=="close"?we[0]=="stop"?as(S,7):Pf(S):we[0]!="noop"&&S.l&&S.l.ta(we),S.v=0)}}is(4)}catch{}}var bT=class{constructor(h,E){this.g=h,this.map=E}};function Nv(h){this.l=h||10,a.PerformanceNavigationTiming?(h=a.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Fv(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Mv(h){return h.h?1:h.g?h.g.size:0}function Tf(h,E){return h.h?h.h==E:h.g?h.g.has(E):!1}function If(h,E){h.g?h.g.add(E):h.h=E}function Ov(h,E){h.h&&h.h==E?h.h=null:h.g&&h.g.has(E)&&h.g.delete(E)}Nv.prototype.cancel=function(){if(this.i=Bv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Bv(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let E=h.i;for(const S of h.g.values())E=E.concat(S.D);return E}return y(h.i)}function CT(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(l(h)){for(var E=[],S=h.length,F=0;F<S;F++)E.push(h[F]);return E}E=[],S=0;for(F in h)E[S++]=h[F];return E}function AT(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(l(h)||typeof h=="string"){var E=[];h=h.length;for(var S=0;S<h;S++)E.push(S);return E}E=[],S=0;for(const F in h)E[S++]=F;return E}}}function Lv(h,E){if(h.forEach&&typeof h.forEach=="function")h.forEach(E,void 0);else if(l(h)||typeof h=="string")Array.prototype.forEach.call(h,E,void 0);else for(var S=AT(h),F=CT(h),O=F.length,z=0;z<O;z++)E.call(void 0,F[z],S&&S[z],h)}var jv=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ST(h,E){if(h){h=h.split("&");for(var S=0;S<h.length;S++){var F=h[S].indexOf("="),O=null;if(0<=F){var z=h[S].substring(0,F);O=h[S].substring(F+1)}else z=h[S];E(z,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function os(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof os){this.h=h.h,Wc(this,h.j),this.o=h.o,this.g=h.g,$c(this,h.s),this.l=h.l;var E=h.i,S=new Ta;S.i=E.i,E.g&&(S.g=new Map(E.g),S.h=E.h),Vv(this,S),this.m=h.m}else h&&(E=String(h).match(jv))?(this.h=!1,Wc(this,E[1]||"",!0),this.o=Aa(E[2]||""),this.g=Aa(E[3]||"",!0),$c(this,E[4]),this.l=Aa(E[5]||"",!0),Vv(this,E[6]||"",!0),this.m=Aa(E[7]||"")):(this.h=!1,this.i=new Ta(null,this.h))}os.prototype.toString=function(){var h=[],E=this.j;E&&h.push(Sa(E,zv,!0),":");var S=this.g;return(S||E=="file")&&(h.push("//"),(E=this.o)&&h.push(Sa(E,zv,!0),"@"),h.push(encodeURIComponent(String(S)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),S=this.s,S!=null&&h.push(":",String(S))),(S=this.l)&&(this.g&&S.charAt(0)!="/"&&h.push("/"),h.push(Sa(S,S.charAt(0)=="/"?kT:IT,!0))),(S=this.i.toString())&&h.push("?",S),(S=this.m)&&h.push("#",Sa(S,DT)),h.join("")};function vr(h){return new os(h)}function Wc(h,E,S){h.j=S?Aa(E,!0):E,h.j&&(h.j=h.j.replace(/:$/,""))}function $c(h,E){if(E){if(E=Number(E),isNaN(E)||0>E)throw Error("Bad port number "+E);h.s=E}else h.s=null}function Vv(h,E,S){E instanceof Ta?(h.i=E,RT(h.i,h.h)):(S||(E=Sa(E,PT)),h.i=new Ta(E,h.h))}function Ne(h,E,S){h.i.set(E,S)}function qc(h){return Ne(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Aa(h,E){return h?E?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Sa(h,E,S){return typeof h=="string"?(h=encodeURI(h).replace(E,TT),S&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function TT(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var zv=/[#\/\?@]/g,IT=/[#\?:]/g,kT=/[#\?]/g,PT=/[#\?@]/g,DT=/#/g;function Ta(h,E){this.h=this.g=null,this.i=h||null,this.j=!!E}function ri(h){h.g||(h.g=new Map,h.h=0,h.i&&ST(h.i,function(E,S){h.add(decodeURIComponent(E.replace(/\+/g," ")),S)}))}t=Ta.prototype,t.add=function(h,E){ri(this),this.i=null,h=ao(this,h);var S=this.g.get(h);return S||this.g.set(h,S=[]),S.push(E),this.h+=1,this};function Uv(h,E){ri(h),E=ao(h,E),h.g.has(E)&&(h.i=null,h.h-=h.g.get(E).length,h.g.delete(E))}function Hv(h,E){return ri(h),E=ao(h,E),h.g.has(E)}t.forEach=function(h,E){ri(this),this.g.forEach(function(S,F){S.forEach(function(O){h.call(E,O,F,this)},this)},this)},t.na=function(){ri(this);const h=Array.from(this.g.values()),E=Array.from(this.g.keys()),S=[];for(let F=0;F<E.length;F++){const O=h[F];for(let z=0;z<O.length;z++)S.push(E[F])}return S},t.V=function(h){ri(this);let E=[];if(typeof h=="string")Hv(this,h)&&(E=E.concat(this.g.get(ao(this,h))));else{h=Array.from(this.g.values());for(let S=0;S<h.length;S++)E=E.concat(h[S])}return E},t.set=function(h,E){return ri(this),this.i=null,h=ao(this,h),Hv(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[E]),this.h+=1,this},t.get=function(h,E){return h?(h=this.V(h),0<h.length?String(h[0]):E):E};function Wv(h,E,S){Uv(h,E),0<S.length&&(h.i=null,h.g.set(ao(h,E),y(S)),h.h+=S.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],E=Array.from(this.g.keys());for(var S=0;S<E.length;S++){var F=E[S];const z=encodeURIComponent(String(F)),J=this.V(F);for(F=0;F<J.length;F++){var O=z;J[F]!==""&&(O+="="+encodeURIComponent(String(J[F]))),h.push(O)}}return this.i=h.join("&")};function ao(h,E){return E=String(E),h.j&&(E=E.toLowerCase()),E}function RT(h,E){E&&!h.j&&(ri(h),h.i=null,h.g.forEach(function(S,F){var O=F.toLowerCase();F!=O&&(Uv(this,F),Wv(this,O,S))},h)),h.j=E}function NT(h,E){const S=new Zt;if(a.Image){const F=new Image;F.onload=m(ii,S,"TestLoadImage: loaded",!0,E,F),F.onerror=m(ii,S,"TestLoadImage: error",!1,E,F),F.onabort=m(ii,S,"TestLoadImage: abort",!1,E,F),F.ontimeout=m(ii,S,"TestLoadImage: timeout",!1,E,F),a.setTimeout(function(){F.ontimeout&&F.ontimeout()},1e4),F.src=h}else E(!1)}function FT(h,E){const S=new Zt,F=new AbortController,O=setTimeout(()=>{F.abort(),ii(S,"TestPingServer: timeout",!1,E)},1e4);fetch(h,{signal:F.signal}).then(z=>{clearTimeout(O),z.ok?ii(S,"TestPingServer: ok",!0,E):ii(S,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(O),ii(S,"TestPingServer: error",!1,E)})}function ii(h,E,S,F,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),F(S)}catch{}}function MT(){this.g=new _f}function OT(h,E,S){const F=S||"";try{Lv(h,function(O,z){let J=O;c(O)&&(J=ro(O)),E.push(F+z+"="+encodeURIComponent(J))})}catch(O){throw E.push(F+"type="+encodeURIComponent("_badmap")),O}}function Kc(h){this.l=h.Ub||null,this.j=h.eb||!1}x(Kc,io),Kc.prototype.g=function(){return new Gc(this.l,this.j)},Kc.prototype.i=function(h){return function(){return h}}({});function Gc(h,E){He.call(this),this.D=h,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(Gc,He),t=Gc.prototype,t.open=function(h,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=E,this.readyState=1,ka(this)},t.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const E={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(E.body=h),(this.D||a).fetch(new Request(this.A,E)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ia(this)),this.readyState=0},t.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,ka(this)),this.g&&(this.readyState=3,ka(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;$v(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function $v(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}t.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var E=h.value?h.value:new Uint8Array(0);(E=this.v.decode(E,{stream:!h.done}))&&(this.response=this.responseText+=E)}h.done?Ia(this):ka(this),this.readyState==3&&$v(this)}},t.Ra=function(h){this.g&&(this.response=this.responseText=h,Ia(this))},t.Qa=function(h){this.g&&(this.response=h,Ia(this))},t.ga=function(){this.g&&Ia(this)};function Ia(h){h.readyState=4,h.l=null,h.j=null,h.v=null,ka(h)}t.setRequestHeader=function(h,E){this.u.append(h,E)},t.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],E=this.h.entries();for(var S=E.next();!S.done;)S=S.value,h.push(S[0]+": "+S[1]),S=E.next();return h.join(`\r
`)};function ka(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Gc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function qv(h){let E="";return D(h,function(S,F){E+=F,E+=":",E+=S,E+=`\r
`}),E}function kf(h,E,S){e:{for(F in S){var F=!1;break e}F=!0}F||(S=qv(S),typeof h=="string"?S!=null&&encodeURIComponent(String(S)):Ne(h,E,S))}function Qe(h){He.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(Qe,He);var BT=/^https?$/i,LT=["POST","PUT"];t=Qe.prototype,t.Ha=function(h){this.J=h},t.ea=function(h,E,S,F){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);E=E?E.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():wf.g(),this.v=this.o?Bc(this.o):Bc(wf),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(E,String(h),!0),this.B=!1}catch(z){Kv(this,z);return}if(h=S||"",S=new Map(this.headers),F)if(Object.getPrototypeOf(F)===Object.prototype)for(var O in F)S.set(O,F[O]);else if(typeof F.keys=="function"&&typeof F.get=="function")for(const z of F.keys())S.set(z,F.get(z));else throw Error("Unknown input type for opt_headers: "+String(F));F=Array.from(S.keys()).find(z=>z.toLowerCase()=="content-type"),O=a.FormData&&h instanceof a.FormData,!(0<=Array.prototype.indexOf.call(LT,E,void 0))||F||O||S.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[z,J]of S)this.g.setRequestHeader(z,J);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Yv(this),this.u=!0,this.g.send(h),this.u=!1}catch(z){Kv(this,z)}};function Kv(h,E){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=E,h.m=5,Gv(h),Qc(h)}function Gv(h){h.A||(h.A=!0,rt(h,"complete"),rt(h,"error"))}t.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,rt(this,"complete"),rt(this,"abort"),Qc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Qc(this,!0)),Qe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Qv(this):this.bb())},t.bb=function(){Qv(this)};function Qv(h){if(h.h&&typeof o<"u"&&(!h.v[1]||yr(h)!=4||h.Z()!=2)){if(h.u&&yr(h)==4)xa(h.Ea,0,h);else if(rt(h,"readystatechange"),yr(h)==4){h.h=!1;try{const J=h.Z();e:switch(J){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var S;if(!(S=E)){var F;if(F=J===0){var O=String(h.D).match(jv)[1]||null;!O&&a.self&&a.self.location&&(O=a.self.location.protocol.slice(0,-1)),F=!BT.test(O?O.toLowerCase():"")}S=F}if(S)rt(h,"complete"),rt(h,"success");else{h.m=6;try{var z=2<yr(h)?h.g.statusText:""}catch{z=""}h.l=z+" ["+h.Z()+"]",Gv(h)}}finally{Qc(h)}}}}function Qc(h,E){if(h.g){Yv(h);const S=h.g,F=h.v[0]?()=>{}:null;h.g=null,h.v=null,E||rt(h,"ready");try{S.onreadystatechange=F}catch{}}}function Yv(h){h.I&&(a.clearTimeout(h.I),h.I=null)}t.isActive=function(){return!!this.g};function yr(h){return h.g?h.g.readyState:0}t.Z=function(){try{return 2<yr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(h){if(this.g){var E=this.g.responseText;return h&&E.indexOf(h)==0&&(E=E.substring(h.length)),yf(E)}};function Xv(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function jT(h){const E={};h=(h.g&&2<=yr(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let F=0;F<h.length;F++){if(g(h[F]))continue;var S=I(h[F]);const O=S[0];if(S=S[1],typeof S!="string")continue;S=S.trim();const z=E[O]||[];E[O]=z,z.push(S)}C(E,function(F){return F.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Pa(h,E,S){return S&&S.internalChannelParams&&S.internalChannelParams[h]||E}function Jv(h){this.Aa=0,this.i=[],this.j=new Zt,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Pa("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Pa("baseRetryDelayMs",5e3,h),this.cb=Pa("retryDelaySeedMs",1e4,h),this.Wa=Pa("forwardChannelMaxRetries",2,h),this.wa=Pa("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new Nv(h&&h.concurrentRequestLimit),this.Da=new MT,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Jv.prototype,t.la=8,t.G=1,t.connect=function(h,E,S,F){Et(0),this.W=h,this.H=E||{},S&&F!==void 0&&(this.H.OSID=S,this.H.OAID=F),this.F=this.X,this.I=a1(this,null,this.W),Xc(this)};function Pf(h){if(Zv(h),h.G==3){var E=h.U++,S=vr(h.I);if(Ne(S,"SID",h.K),Ne(S,"RID",E),Ne(S,"TYPE","terminate"),Da(h,S),E=new ni(h,h.j,E),E.L=2,E.v=qc(vr(S)),S=!1,a.navigator&&a.navigator.sendBeacon)try{S=a.navigator.sendBeacon(E.v.toString(),"")}catch{}!S&&a.Image&&(new Image().src=E.v,S=!0),S||(E.g=l1(E.j,null),E.g.ea(E.v)),E.F=Date.now(),Hc(E)}o1(h)}function Yc(h){h.g&&(Rf(h),h.g.cancel(),h.g=null)}function Zv(h){Yc(h),h.u&&(a.clearTimeout(h.u),h.u=null),Jc(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&a.clearTimeout(h.s),h.s=null)}function Xc(h){if(!Fv(h.h)&&!h.s){h.s=!0;var E=h.Ga;X||Q(),j||(X(),j=!0),W.add(E,h),h.B=0}}function VT(h,E){return Mv(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=E.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=ut(f(h.Ga,h,E),s1(h,h.B)),h.B++,!0)}t.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const O=new ni(this,this.j,h);let z=this.o;if(this.S&&(z?(z=b(z),T(z,this.S)):z=this.S),this.m!==null||this.O||(O.H=z,z=null),this.P)e:{for(var E=0,S=0;S<this.i.length;S++){t:{var F=this.i[S];if("__data__"in F.map&&(F=F.map.__data__,typeof F=="string")){F=F.length;break t}F=void 0}if(F===void 0)break;if(E+=F,4096<E){E=S;break e}if(E===4096||S===this.i.length-1){E=S+1;break e}}E=1e3}else E=1e3;E=t1(this,O,E),S=vr(this.I),Ne(S,"RID",h),Ne(S,"CVER",22),this.D&&Ne(S,"X-HTTP-Session-Id",this.D),Da(this,S),z&&(this.O?E="headers="+encodeURIComponent(String(qv(z)))+"&"+E:this.m&&kf(S,this.m,z)),If(this.h,O),this.Ua&&Ne(S,"TYPE","init"),this.P?(Ne(S,"$req",E),Ne(S,"SID","null"),O.T=!0,Cf(O,S,null)):Cf(O,S,E),this.G=2}}else this.G==3&&(h?e1(this,h):this.i.length==0||Fv(this.h)||e1(this))};function e1(h,E){var S;E?S=E.l:S=h.U++;const F=vr(h.I);Ne(F,"SID",h.K),Ne(F,"RID",S),Ne(F,"AID",h.T),Da(h,F),h.m&&h.o&&kf(F,h.m,h.o),S=new ni(h,h.j,S,h.B+1),h.m===null&&(S.H=h.o),E&&(h.i=E.D.concat(h.i)),E=t1(h,S,1e3),S.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),If(h.h,S),Cf(S,F,E)}function Da(h,E){h.H&&D(h.H,function(S,F){Ne(E,F,S)}),h.l&&Lv({},function(S,F){Ne(E,F,S)})}function t1(h,E,S){S=Math.min(h.i.length,S);var F=h.l?f(h.l.Na,h.l,h):null;e:{var O=h.i;let z=-1;for(;;){const J=["count="+S];z==-1?0<S?(z=O[0].g,J.push("ofs="+z)):z=0:J.push("ofs="+z);let Pe=!0;for(let wt=0;wt<S;wt++){let we=O[wt].g;const Pt=O[wt].map;if(we-=z,0>we)z=Math.max(0,O[wt].g-100),Pe=!1;else try{OT(Pt,J,"req"+we+"_")}catch{F&&F(Pt)}}if(Pe){F=J.join("&");break e}}}return h=h.i.splice(0,S),E.D=h,F}function n1(h){if(!h.g&&!h.u){h.Y=1;var E=h.Fa;X||Q(),j||(X(),j=!0),W.add(E,h),h.v=0}}function Df(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=ut(f(h.Fa,h),s1(h,h.v)),h.v++,!0)}t.Fa=function(){if(this.u=null,r1(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=ut(f(this.ab,this),h)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Et(10),Yc(this),r1(this))};function Rf(h){h.A!=null&&(a.clearTimeout(h.A),h.A=null)}function r1(h){h.g=new ni(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var E=vr(h.qa);Ne(E,"RID","rpc"),Ne(E,"SID",h.K),Ne(E,"AID",h.T),Ne(E,"CI",h.F?"0":"1"),!h.F&&h.ja&&Ne(E,"TO",h.ja),Ne(E,"TYPE","xmlhttp"),Da(h,E),h.m&&h.o&&kf(E,h.m,h.o),h.L&&(h.g.I=h.L);var S=h.g;h=h.ia,S.L=1,S.v=qc(vr(E)),S.m=null,S.P=!0,Pv(S,h)}t.Za=function(){this.C!=null&&(this.C=null,Yc(this),Df(this),Et(19))};function Jc(h){h.C!=null&&(a.clearTimeout(h.C),h.C=null)}function i1(h,E){var S=null;if(h.g==E){Jc(h),Rf(h),h.g=null;var F=2}else if(Tf(h.h,E))S=E.D,Ov(h.h,E),F=1;else return;if(h.G!=0){if(E.o)if(F==1){S=E.m?E.m.length:0,E=Date.now()-E.F;var O=h.B;F=rs(),rt(F,new ba(F,S)),Xc(h)}else n1(h);else if(O=E.s,O==3||O==0&&0<E.X||!(F==1&&VT(h,E)||F==2&&Df(h)))switch(S&&0<S.length&&(E=h.h,E.i=E.i.concat(S)),O){case 1:as(h,5);break;case 4:as(h,10);break;case 3:as(h,6);break;default:as(h,2)}}}function s1(h,E){let S=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(S*=2),S*E}function as(h,E){if(h.j.info("Error code "+E),E==2){var S=f(h.fb,h),F=h.Xa;const O=!F;F=new os(F||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Wc(F,"https"),qc(F),O?NT(F.toString(),S):FT(F.toString(),S)}else Et(2);h.G=0,h.l&&h.l.sa(E),o1(h),Zv(h)}t.fb=function(h){h?(this.j.info("Successfully pinged google.com"),Et(2)):(this.j.info("Failed to ping google.com"),Et(1))};function o1(h){if(h.G=0,h.ka=[],h.l){const E=Bv(h.h);(E.length!=0||h.i.length!=0)&&(w(h.ka,E),w(h.ka,h.i),h.h.i.length=0,y(h.i),h.i.length=0),h.l.ra()}}function a1(h,E,S){var F=S instanceof os?vr(S):new os(S);if(F.g!="")E&&(F.g=E+"."+F.g),$c(F,F.s);else{var O=a.location;F=O.protocol,E=E?E+"."+O.hostname:O.hostname,O=+O.port;var z=new os(null);F&&Wc(z,F),E&&(z.g=E),O&&$c(z,O),S&&(z.l=S),F=z}return S=h.D,E=h.ya,S&&E&&Ne(F,S,E),Ne(F,"VER",h.la),Da(h,F),F}function l1(h,E,S){if(E&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return E=h.Ca&&!h.pa?new Qe(new Kc({eb:S})):new Qe(h.pa),E.Ha(h.J),E}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function c1(){}t=c1.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Zc(){}Zc.prototype.g=function(h,E){return new fn(h,E)};function fn(h,E){He.call(this),this.g=new Jv(E),this.l=h,this.h=E&&E.messageUrlParams||null,h=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(h?h["X-WebChannel-Content-Type"]=E.messageContentType:h={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.va&&(h?h["X-WebChannel-Client-Profile"]=E.va:h={"X-WebChannel-Client-Profile":E.va}),this.g.S=h,(h=E&&E.Sb)&&!g(h)&&(this.g.m=h),this.v=E&&E.supportsCrossDomainXhr||!1,this.u=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!g(E)&&(this.g.D=E,h=this.h,h!==null&&E in h&&(h=this.h,E in h&&delete h[E])),this.j=new lo(this)}x(fn,He),fn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},fn.prototype.close=function(){Pf(this.g)},fn.prototype.o=function(h){var E=this.g;if(typeof h=="string"){var S={};S.__data__=h,h=S}else this.u&&(S={},S.__data__=ro(h),h=S);E.i.push(new bT(E.Ya++,h)),E.G==3&&Xc(E)},fn.prototype.N=function(){this.g.l=null,delete this.j,Pf(this.g),delete this.g,fn.aa.N.call(this)};function u1(h){so.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var E=h.__sm__;if(E){e:{for(const S in E){h=S;break e}h=void 0}(this.i=h)&&(h=this.i,E=E!==null&&h in E?E[h]:void 0),this.data=E}else this.data=h}x(u1,so);function h1(){Ea.call(this),this.status=1}x(h1,Ea);function lo(h){this.g=h}x(lo,c1),lo.prototype.ua=function(){rt(this.g,"a")},lo.prototype.ta=function(h){rt(this.g,new u1(h))},lo.prototype.sa=function(h){rt(this.g,new h1)},lo.prototype.ra=function(){rt(this.g,"b")},Zc.prototype.createWebChannel=Zc.prototype.g,fn.prototype.send=fn.prototype.o,fn.prototype.open=fn.prototype.m,fn.prototype.close=fn.prototype.close,IC=function(){return new Zc},TC=function(){return rs()},SC=xr,Em={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},zc.NO_ERROR=0,zc.TIMEOUT=8,zc.HTTP_ERROR=6,rh=zc,Tv.COMPLETE="complete",AC=Tv,_a.EventType=ns,ns.OPEN="a",ns.CLOSE="b",ns.ERROR="c",ns.MESSAGE="d",He.prototype.listen=He.prototype.K,Za=_a,Qe.prototype.listenOnce=Qe.prototype.L,Qe.prototype.getLastError=Qe.prototype.Ka,Qe.prototype.getLastErrorCode=Qe.prototype.Ba,Qe.prototype.getStatus=Qe.prototype.Z,Qe.prototype.getResponseJson=Qe.prototype.Oa,Qe.prototype.getResponseText=Qe.prototype.oa,Qe.prototype.send=Qe.prototype.ea,Qe.prototype.setWithCredentials=Qe.prototype.Ha,CC=Qe}).apply(typeof yu<"u"?yu:typeof self<"u"?self:typeof window<"u"?window:{});const i_="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ot.UNAUTHENTICATED=new Ot(null),Ot.GOOGLE_CREDENTIALS=new Ot("google-credentials-uid"),Ot.FIRST_PARTY=new Ot("first-party-uid"),Ot.MOCK_USER=new Ot("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let da="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ls=new Zg("@firebase/firestore");function Va(){return Ls.logLevel}function ne(t,...e){if(Ls.logLevel<=ve.DEBUG){const n=e.map(hx);Ls.debug(`Firestore (${da}): ${t}`,...n)}}function $r(t,...e){if(Ls.logLevel<=ve.ERROR){const n=e.map(hx);Ls.error(`Firestore (${da}): ${t}`,...n)}}function Yo(t,...e){if(Ls.logLevel<=ve.WARN){const n=e.map(hx);Ls.warn(`Firestore (${da}): ${t}`,...n)}}function hx(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ae(t="Unexpected state"){const e=`FIRESTORE (${da}) INTERNAL ASSERTION FAILED: `+t;throw $r(e),new Error(e)}function Te(t,e){t||ae()}function ce(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ee extends pr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class yD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ot.UNAUTHENTICATED))}shutdown(){}}class _D{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class ED{constructor(e){this.t=e,this.currentUser=Ot.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Te(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new Lr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Lr,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Lr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Te(typeof r.accessToken=="string"),new kC(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Te(e===null||typeof e=="string"),new Ot(e)}}class wD{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Ot.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class bD{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new wD(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ot.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class CD{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class AD{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Te(this.o===void 0);const r=s=>{s.error!=null&&ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,ne("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Te(typeof n.token=="string"),this.R=n.token,new CD(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SD(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=SD(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function be(t,e){return t<e?-1:t>e?1:0}function Xo(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ee($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ee($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ee($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ee($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return pt.fromMillis(Date.now())}static fromDate(e){return pt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new pt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?be(this.nanoseconds,e.nanoseconds):be(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(e){this.timestamp=e}static fromTimestamp(e){return new le(e)}static min(){return new le(new pt(0,0))}static max(){return new le(new pt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl{constructor(e,n,r){n===void 0?n=0:n>e.length&&ae(),r===void 0?r=e.length-n:r>e.length-n&&ae(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Yl.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Yl?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Me extends Yl{construct(e,n,r){return new Me(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ee($.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Me(n)}static emptyPath(){return new Me([])}}const TD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class At extends Yl{construct(e,n,r){return new At(e,n,r)}static isValidIdentifier(e){return TD.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),At.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new At(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new ee($.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new ee($.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new ee($.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new ee($.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new At(n)}static emptyPath(){return new At([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.path=e}static fromPath(e){return new se(Me.fromString(e))}static fromName(e){return new se(Me.fromString(e).popFirst(5))}static empty(){return new se(Me.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Me.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Me.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new se(new Me(e.slice()))}}function ID(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=le.fromTimestamp(r===1e9?new pt(n+1,0):new pt(n,r));return new Ui(i,se.empty(),e)}function kD(t){return new Ui(t.readTime,t.key,-1)}class Ui{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ui(le.min(),se.empty(),-1)}static max(){return new Ui(le.max(),se.empty(),-1)}}function PD(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=se.comparator(t.documentKey,e.documentKey),n!==0?n:be(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class RD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ac(t){if(t.code!==$.FAILED_PRECONDITION||t.message!==DD)throw t;ne("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ae(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new G((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof G?n:G.resolve(n)}catch(n){return G.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):G.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):G.reject(n)}static resolve(e){return new G((n,r)=>{n(e)})}static reject(e){return new G((n,r)=>{r(e)})}static waitFor(e){return new G((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=G.resolve(!1);for(const r of e)n=n.next(i=>i?G.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new G((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(u=>{o[c]=u,++a,a===s&&r(o)},u=>i(u))}})}static doWhile(e,n){return new G((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function ND(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Sc(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}dx.oe=-1;function Hd(t){return t==null}function Zh(t){return t===0&&1/t==-1/0}function FD(t){return typeof t=="number"&&Number.isInteger(t)&&!Zh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s_(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Qs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function DC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(e,n){this.comparator=e,this.root=n||Ct.EMPTY}insert(e,n){return new Ge(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ct.BLACK,null,null))}remove(e){return new Ge(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ct.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new _u(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new _u(this.root,e,this.comparator,!1)}getReverseIterator(){return new _u(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new _u(this.root,e,this.comparator,!0)}}class _u{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ct{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Ct.RED,this.left=i??Ct.EMPTY,this.right=s??Ct.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Ct(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ct.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Ct.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ct.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ct.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ae();const e=this.left.check();if(e!==this.right.check())throw ae();return e+(this.isRed()?0:1)}}Ct.EMPTY=null,Ct.RED=!0,Ct.BLACK=!1;Ct.EMPTY=new class{constructor(){this.size=0}get key(){throw ae()}get value(){throw ae()}get color(){throw ae()}get left(){throw ae()}get right(){throw ae()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Ct(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e){this.comparator=e,this.data=new Ge(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new o_(this.data.getIterator())}getIteratorFrom(e){return new o_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Tt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Tt(this.comparator);return n.data=e,n}}class o_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this.fields=e,e.sort(At.comparator)}static empty(){return new vn([])}unionWith(e){let n=new Tt(At.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new vn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Xo(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new RC("Invalid base64 string: "+s):s}}(e);return new kt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new kt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return be(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}kt.EMPTY_BYTE_STRING=new kt("");const MD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Hi(t){if(Te(!!t),typeof t=="string"){let e=0;const n=MD.exec(t);if(Te(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:it(t.seconds),nanos:it(t.nanos)}}function it(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function js(t){return typeof t=="string"?kt.fromBase64String(t):kt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fx(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function px(t){const e=t.mapValue.fields.__previous_value__;return fx(e)?px(e):e}function Xl(t){const e=Hi(t.mapValue.fields.__local_write_time__.timestampValue);return new pt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OD{constructor(e,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Jl{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Jl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Jl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eu={mapValue:{}};function Vs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?fx(t)?4:LD(t)?9007199254740991:BD(t)?10:11:ae()}function fr(t,e){if(t===e)return!0;const n=Vs(t);if(n!==Vs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Xl(t).isEqual(Xl(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Hi(i.timestampValue),a=Hi(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return js(i.bytesValue).isEqual(js(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return it(i.geoPointValue.latitude)===it(s.geoPointValue.latitude)&&it(i.geoPointValue.longitude)===it(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return it(i.integerValue)===it(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=it(i.doubleValue),a=it(s.doubleValue);return o===a?Zh(o)===Zh(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Xo(t.arrayValue.values||[],e.arrayValue.values||[],fr);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(s_(o)!==s_(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!fr(o[l],a[l])))return!1;return!0}(t,e);default:return ae()}}function Zl(t,e){return(t.values||[]).find(n=>fr(n,e))!==void 0}function Jo(t,e){if(t===e)return 0;const n=Vs(t),r=Vs(e);if(n!==r)return be(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return be(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=it(s.integerValue||s.doubleValue),l=it(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return a_(t.timestampValue,e.timestampValue);case 4:return a_(Xl(t),Xl(e));case 5:return be(t.stringValue,e.stringValue);case 6:return function(s,o){const a=js(s),l=js(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=be(a[c],l[c]);if(u!==0)return u}return be(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=be(it(s.latitude),it(o.latitude));return a!==0?a:be(it(s.longitude),it(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return l_(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,c,u;const d=s.fields||{},f=o.fields||{},m=(a=d.value)===null||a===void 0?void 0:a.arrayValue,x=(l=f.value)===null||l===void 0?void 0:l.arrayValue,y=be(((c=m==null?void 0:m.values)===null||c===void 0?void 0:c.length)||0,((u=x==null?void 0:x.values)===null||u===void 0?void 0:u.length)||0);return y!==0?y:l_(m,x)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Eu.mapValue&&o===Eu.mapValue)return 0;if(s===Eu.mapValue)return 1;if(o===Eu.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let d=0;d<l.length&&d<u.length;++d){const f=be(l[d],u[d]);if(f!==0)return f;const m=Jo(a[l[d]],c[u[d]]);if(m!==0)return m}return be(l.length,u.length)}(t.mapValue,e.mapValue);default:throw ae()}}function a_(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return be(t,e);const n=Hi(t),r=Hi(e),i=be(n.seconds,r.seconds);return i!==0?i:be(n.nanos,r.nanos)}function l_(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Jo(n[i],r[i]);if(s)return s}return be(n.length,r.length)}function Zo(t){return wm(t)}function wm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Hi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return js(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return se.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=wm(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${wm(n.fields[o])}`;return i+"}"}(t.mapValue):ae()}function c_(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function bm(t){return!!t&&"integerValue"in t}function mx(t){return!!t&&"arrayValue"in t}function u_(t){return!!t&&"nullValue"in t}function h_(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ih(t){return!!t&&"mapValue"in t}function BD(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function yl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Qs(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=yl(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=yl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function LD(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this.value=e}static empty(){return new rn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!ih(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=yl(n)}setAll(e){let n=At.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=yl(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());ih(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return fr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];ih(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Qs(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new rn(yl(this.value))}}function NC(t){const e=[];return Qs(t.fields,(n,r)=>{const i=new At([n]);if(ih(r)){const s=NC(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new vn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Lt(e,0,le.min(),le.min(),le.min(),rn.empty(),0)}static newFoundDocument(e,n,r,i){return new Lt(e,1,n,le.min(),r,i,0)}static newNoDocument(e,n){return new Lt(e,2,n,le.min(),le.min(),rn.empty(),0)}static newUnknownDocument(e,n){return new Lt(e,3,n,le.min(),le.min(),rn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=rn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=rn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Lt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Lt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed{constructor(e,n){this.position=e,this.inclusive=n}}function d_(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=se.comparator(se.fromName(o.referenceValue),n.key):r=Jo(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function f_(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!fr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(e,n="asc"){this.field=e,this.dir=n}}function jD(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{}class ct extends FC{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new zD(e,n,r):n==="array-contains"?new WD(e,r):n==="in"?new $D(e,r):n==="not-in"?new qD(e,r):n==="array-contains-any"?new KD(e,r):new ct(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new UD(e,r):new HD(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Jo(n,this.value)):n!==null&&Vs(this.value)===Vs(n)&&this.matchesComparison(Jo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ae()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class qn extends FC{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new qn(e,n)}matches(e){return MC(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function MC(t){return t.op==="and"}function OC(t){return VD(t)&&MC(t)}function VD(t){for(const e of t.filters)if(e instanceof qn)return!1;return!0}function Cm(t){if(t instanceof ct)return t.field.canonicalString()+t.op.toString()+Zo(t.value);if(OC(t))return t.filters.map(e=>Cm(e)).join(",");{const e=t.filters.map(n=>Cm(n)).join(",");return`${t.op}(${e})`}}function BC(t,e){return t instanceof ct?function(r,i){return i instanceof ct&&r.op===i.op&&r.field.isEqual(i.field)&&fr(r.value,i.value)}(t,e):t instanceof qn?function(r,i){return i instanceof qn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&BC(o,i.filters[a]),!0):!1}(t,e):void ae()}function LC(t){return t instanceof ct?function(n){return`${n.field.canonicalString()} ${n.op} ${Zo(n.value)}`}(t):t instanceof qn?function(n){return n.op.toString()+" {"+n.getFilters().map(LC).join(" ,")+"}"}(t):"Filter"}class zD extends ct{constructor(e,n,r){super(e,n,r),this.key=se.fromName(r.referenceValue)}matches(e){const n=se.comparator(e.key,this.key);return this.matchesComparison(n)}}class UD extends ct{constructor(e,n){super(e,"in",n),this.keys=jC("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class HD extends ct{constructor(e,n){super(e,"not-in",n),this.keys=jC("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function jC(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>se.fromName(r.referenceValue))}class WD extends ct{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return mx(n)&&Zl(n.arrayValue,this.value)}}class $D extends ct{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Zl(this.value.arrayValue,n)}}class qD extends ct{constructor(e,n){super(e,"not-in",n)}matches(e){if(Zl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Zl(this.value.arrayValue,n)}}class KD extends ct{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!mx(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Zl(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GD{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function p_(t,e=null,n=[],r=[],i=null,s=null,o=null){return new GD(t,e,n,r,i,s,o)}function gx(t){const e=ce(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Cm(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Hd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Zo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Zo(r)).join(",")),e.ue=n}return e.ue}function xx(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!jD(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!BC(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!f_(t.startAt,e.startAt)&&f_(t.endAt,e.endAt)}function Am(t){return se.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function QD(t,e,n,r,i,s,o,a){return new fa(t,e,n,r,i,s,o,a)}function Wd(t){return new fa(t)}function m_(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function VC(t){return t.collectionGroup!==null}function _l(t){const e=ce(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Tt(At.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new ec(s,r))}),n.has(At.keyField().canonicalString())||e.ce.push(new ec(At.keyField(),r))}return e.ce}function ur(t){const e=ce(t);return e.le||(e.le=YD(e,_l(t))),e.le}function YD(t,e){if(t.limitType==="F")return p_(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new ec(i.field,s)});const n=t.endAt?new ed(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ed(t.startAt.position,t.startAt.inclusive):null;return p_(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Sm(t,e){const n=t.filters.concat([e]);return new fa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Tm(t,e,n){return new fa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function $d(t,e){return xx(ur(t),ur(e))&&t.limitType===e.limitType}function zC(t){return`${gx(ur(t))}|lt:${t.limitType}`}function po(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>LC(i)).join(", ")}]`),Hd(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Zo(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Zo(i)).join(",")),`Target(${r})`}(ur(t))}; limitType=${t.limitType})`}function qd(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):se.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of _l(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=d_(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,_l(r),i)||r.endAt&&!function(o,a,l){const c=d_(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,_l(r),i))}(t,e)}function XD(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function UC(t){return(e,n)=>{let r=!1;for(const i of _l(t)){const s=JD(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function JD(t,e,n){const r=t.field.isKeyField()?se.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?Jo(l,c):ae()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ae()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Qs(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return DC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZD=new Ge(se.comparator);function qr(){return ZD}const HC=new Ge(se.comparator);function el(...t){let e=HC;for(const n of t)e=e.insert(n.key,n);return e}function WC(t){let e=HC;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function _s(){return El()}function $C(){return El()}function El(){return new pa(t=>t.toString(),(t,e)=>t.isEqual(e))}const eR=new Ge(se.comparator),tR=new Tt(se.comparator);function ge(...t){let e=tR;for(const n of t)e=e.add(n);return e}const nR=new Tt(be);function rR(){return nR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vx(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Zh(e)?"-0":e}}function qC(t){return{integerValue:""+t}}function iR(t,e){return FD(e)?qC(e):vx(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(){this._=void 0}}function sR(t,e,n){return t instanceof tc?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&fx(s)&&(s=px(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof nc?GC(t,e):t instanceof rc?QC(t,e):function(i,s){const o=KC(i,s),a=g_(o)+g_(i.Pe);return bm(o)&&bm(i.Pe)?qC(a):vx(i.serializer,a)}(t,e)}function oR(t,e,n){return t instanceof nc?GC(t,e):t instanceof rc?QC(t,e):n}function KC(t,e){return t instanceof td?function(r){return bm(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class tc extends Kd{}class nc extends Kd{constructor(e){super(),this.elements=e}}function GC(t,e){const n=YC(e);for(const r of t.elements)n.some(i=>fr(i,r))||n.push(r);return{arrayValue:{values:n}}}class rc extends Kd{constructor(e){super(),this.elements=e}}function QC(t,e){let n=YC(e);for(const r of t.elements)n=n.filter(i=>!fr(i,r));return{arrayValue:{values:n}}}class td extends Kd{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function g_(t){return it(t.integerValue||t.doubleValue)}function YC(t){return mx(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(e,n){this.field=e,this.transform=n}}function lR(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof nc&&i instanceof nc||r instanceof rc&&i instanceof rc?Xo(r.elements,i.elements,fr):r instanceof td&&i instanceof td?fr(r.Pe,i.Pe):r instanceof tc&&i instanceof tc}(t.transform,e.transform)}class cR{constructor(e,n){this.version=e,this.transformResults=n}}class Pn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Pn}static exists(e){return new Pn(void 0,e)}static updateTime(e){return new Pn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function sh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Gd{}function XC(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new yx(t.key,Pn.none()):new Tc(t.key,t.data,Pn.none());{const n=t.data,r=rn.empty();let i=new Tt(At.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Xi(t.key,r,new vn(i.toArray()),Pn.none())}}function uR(t,e,n){t instanceof Tc?function(i,s,o){const a=i.value.clone(),l=v_(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Xi?function(i,s,o){if(!sh(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=v_(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(JC(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function wl(t,e,n,r){return t instanceof Tc?function(s,o,a,l){if(!sh(s.precondition,o))return a;const c=s.value.clone(),u=y_(s.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Xi?function(s,o,a,l){if(!sh(s.precondition,o))return a;const c=y_(s.fieldTransforms,l,o),u=o.data;return u.setAll(JC(s)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(s,o,a){return sh(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function hR(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=KC(r.transform,i||null);s!=null&&(n===null&&(n=rn.empty()),n.set(r.field,s))}return n||null}function x_(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Xo(r,i,(s,o)=>lR(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Tc extends Gd{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Xi extends Gd{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function JC(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function v_(t,e,n){const r=new Map;Te(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,oR(o,a,n[i]))}return r}function y_(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,sR(s,o,e))}return r}class yx extends Gd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class dR extends Gd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&uR(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=wl(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=wl(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=$C();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=XC(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(le.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ge())}isEqual(e){return this.batchId===e.batchId&&Xo(this.mutations,e.mutations,(n,r)=>x_(n,r))&&Xo(this.baseMutations,e.baseMutations,(n,r)=>x_(n,r))}}class _x{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Te(e.mutations.length===r.length);let i=function(){return eR}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new _x(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var at,_e;function gR(t){switch(t){default:return ae();case $.CANCELLED:case $.UNKNOWN:case $.DEADLINE_EXCEEDED:case $.RESOURCE_EXHAUSTED:case $.INTERNAL:case $.UNAVAILABLE:case $.UNAUTHENTICATED:return!1;case $.INVALID_ARGUMENT:case $.NOT_FOUND:case $.ALREADY_EXISTS:case $.PERMISSION_DENIED:case $.FAILED_PRECONDITION:case $.ABORTED:case $.OUT_OF_RANGE:case $.UNIMPLEMENTED:case $.DATA_LOSS:return!0}}function ZC(t){if(t===void 0)return $r("GRPC error has no .code"),$.UNKNOWN;switch(t){case at.OK:return $.OK;case at.CANCELLED:return $.CANCELLED;case at.UNKNOWN:return $.UNKNOWN;case at.DEADLINE_EXCEEDED:return $.DEADLINE_EXCEEDED;case at.RESOURCE_EXHAUSTED:return $.RESOURCE_EXHAUSTED;case at.INTERNAL:return $.INTERNAL;case at.UNAVAILABLE:return $.UNAVAILABLE;case at.UNAUTHENTICATED:return $.UNAUTHENTICATED;case at.INVALID_ARGUMENT:return $.INVALID_ARGUMENT;case at.NOT_FOUND:return $.NOT_FOUND;case at.ALREADY_EXISTS:return $.ALREADY_EXISTS;case at.PERMISSION_DENIED:return $.PERMISSION_DENIED;case at.FAILED_PRECONDITION:return $.FAILED_PRECONDITION;case at.ABORTED:return $.ABORTED;case at.OUT_OF_RANGE:return $.OUT_OF_RANGE;case at.UNIMPLEMENTED:return $.UNIMPLEMENTED;case at.DATA_LOSS:return $.DATA_LOSS;default:return ae()}}(_e=at||(at={}))[_e.OK=0]="OK",_e[_e.CANCELLED=1]="CANCELLED",_e[_e.UNKNOWN=2]="UNKNOWN",_e[_e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",_e[_e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",_e[_e.NOT_FOUND=5]="NOT_FOUND",_e[_e.ALREADY_EXISTS=6]="ALREADY_EXISTS",_e[_e.PERMISSION_DENIED=7]="PERMISSION_DENIED",_e[_e.UNAUTHENTICATED=16]="UNAUTHENTICATED",_e[_e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",_e[_e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",_e[_e.ABORTED=10]="ABORTED",_e[_e.OUT_OF_RANGE=11]="OUT_OF_RANGE",_e[_e.UNIMPLEMENTED=12]="UNIMPLEMENTED",_e[_e.INTERNAL=13]="INTERNAL",_e[_e.UNAVAILABLE=14]="UNAVAILABLE",_e[_e.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vR=new As([4294967295,4294967295],0);function __(t){const e=xR().encode(t),n=new bC;return n.update(e),new Uint8Array(n.digest())}function E_(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new As([n,r],0),new As([i,s],0)]}class Ex{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new tl(`Invalid padding: ${n}`);if(r<0)throw new tl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new tl(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new tl(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=As.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(As.fromNumber(r)));return i.compare(vR)===1&&(i=new As([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=__(e),[r,i]=E_(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Ex(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=__(e),[r,i]=E_(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class tl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Ic.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Qd(le.min(),i,new Ge(be),qr(),ge())}}class Ic{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ic(r,n,ge(),ge(),ge())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class eA{constructor(e,n){this.targetId=e,this.me=n}}class tA{constructor(e,n,r=kt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class w_{constructor(){this.fe=0,this.ge=C_(),this.pe=kt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ge(),n=ge(),r=ge();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ae()}}),new Ic(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=C_()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Te(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class yR{constructor(e){this.Le=e,this.Be=new Map,this.ke=qr(),this.qe=b_(),this.Qe=new Ge(be)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ae()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(Am(s))if(r===0){const o=new se(s.path);this.Ue(n,o,Lt.newNoDocument(o,le.min()))}else Te(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=js(r).toUint8Array()}catch(l){if(l instanceof RC)return Yo("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Ex(o,i,s)}catch(l){return Yo(l instanceof tl?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&Am(a.target)){const l=new se(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,Lt.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=ge();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new Qd(e,n,this.Qe,this.ke,r);return this.ke=qr(),this.qe=b_(),this.Qe=new Ge(be),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new w_,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Tt(be),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||ne("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new w_),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function b_(){return new Ge(se.comparator)}function C_(){return new Ge(se.comparator)}const _R={asc:"ASCENDING",desc:"DESCENDING"},ER={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},wR={and:"AND",or:"OR"};class bR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Im(t,e){return t.useProto3Json||Hd(e)?e:{value:e}}function nd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function nA(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function CR(t,e){return nd(t,e.toTimestamp())}function hr(t){return Te(!!t),le.fromTimestamp(function(n){const r=Hi(n);return new pt(r.seconds,r.nanos)}(t))}function wx(t,e){return km(t,e).canonicalString()}function km(t,e){const n=function(i){return new Me(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function rA(t){const e=Me.fromString(t);return Te(lA(e)),e}function Pm(t,e){return wx(t.databaseId,e.path)}function p0(t,e){const n=rA(e);if(n.get(1)!==t.databaseId.projectId)throw new ee($.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ee($.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new se(sA(n))}function iA(t,e){return wx(t.databaseId,e)}function AR(t){const e=rA(t);return e.length===4?Me.emptyPath():sA(e)}function Dm(t){return new Me(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function sA(t){return Te(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function A_(t,e,n){return{name:Pm(t,e),fields:n.value.mapValue.fields}}function SR(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ae()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,u){return c.useProto3Json?(Te(u===void 0||typeof u=="string"),kt.fromBase64String(u||"")):(Te(u===void 0||u instanceof Buffer||u instanceof Uint8Array),kt.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const u=c.code===void 0?$.UNKNOWN:ZC(c.code);return new ee(u,c.message||"")}(o);n=new tA(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=p0(t,r.document.name),s=hr(r.document.updateTime),o=r.document.createTime?hr(r.document.createTime):le.min(),a=new rn({mapValue:{fields:r.document.fields}}),l=Lt.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new oh(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=p0(t,r.document),s=r.readTime?hr(r.readTime):le.min(),o=Lt.newNoDocument(i,s),a=r.removedTargetIds||[];n=new oh([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=p0(t,r.document),s=r.removedTargetIds||[];n=new oh([],s,i,null)}else{if(!("filter"in e))return ae();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new mR(i,s),a=r.targetId;n=new eA(a,o)}}return n}function TR(t,e){let n;if(e instanceof Tc)n={update:A_(t,e.key,e.value)};else if(e instanceof yx)n={delete:Pm(t,e.key)};else if(e instanceof Xi)n={update:A_(t,e.key,e.data),updateMask:OR(e.fieldMask)};else{if(!(e instanceof dR))return ae();n={verify:Pm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof tc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof nc)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof rc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof td)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw ae()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:CR(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ae()}(t,e.precondition)),n}function IR(t,e){return t&&t.length>0?(Te(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?hr(i.updateTime):hr(s);return o.isEqual(le.min())&&(o=hr(s)),new cR(o,i.transformResults||[])}(n,e))):[]}function kR(t,e){return{documents:[iA(t,e.path)]}}function PR(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=iA(t,i);const s=function(c){if(c.length!==0)return aA(qn.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(u=>function(f){return{field:mo(f.field),direction:NR(f.dir)}}(u))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Im(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:i}}function DR(t){let e=AR(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Te(r===1);const u=n.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let s=[];n.where&&(s=function(d){const f=oA(d);return f instanceof qn&&OC(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(f=>function(x){return new ec(go(x.field),function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(d){let f;return f=typeof d=="object"?d.value:d,Hd(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(d){const f=!!d.before,m=d.values||[];return new ed(m,f)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const f=!d.before,m=d.values||[];return new ed(m,f)}(n.endAt)),QD(e,i,o,s,a,"F",l,c)}function RR(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ae()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function oA(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=go(n.unaryFilter.field);return ct.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=go(n.unaryFilter.field);return ct.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=go(n.unaryFilter.field);return ct.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=go(n.unaryFilter.field);return ct.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ae()}}(t):t.fieldFilter!==void 0?function(n){return ct.create(go(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ae()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return qn.create(n.compositeFilter.filters.map(r=>oA(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ae()}}(n.compositeFilter.op))}(t):ae()}function NR(t){return _R[t]}function FR(t){return ER[t]}function MR(t){return wR[t]}function mo(t){return{fieldPath:t.canonicalString()}}function go(t){return At.fromServerFormat(t.fieldPath)}function aA(t){return t instanceof ct?function(n){if(n.op==="=="){if(h_(n.value))return{unaryFilter:{field:mo(n.field),op:"IS_NAN"}};if(u_(n.value))return{unaryFilter:{field:mo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(h_(n.value))return{unaryFilter:{field:mo(n.field),op:"IS_NOT_NAN"}};if(u_(n.value))return{unaryFilter:{field:mo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:mo(n.field),op:FR(n.op),value:n.value}}}(t):t instanceof qn?function(n){const r=n.getFilters().map(i=>aA(i));return r.length===1?r[0]:{compositeFilter:{op:MR(n.op),filters:r}}}(t):ae()}function OR(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function lA(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(e,n,r,i,s=le.min(),o=le.min(),a=kt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new _i(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new _i(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new _i(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new _i(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(e){this.ct=e}}function LR(t){const e=DR({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Tm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR{constructor(){this.un=new VR}addToCollectionParentIndex(e,n){return this.un.add(n),G.resolve()}getCollectionParents(e,n){return G.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return G.resolve()}deleteFieldIndex(e,n){return G.resolve()}deleteAllFieldIndexes(e){return G.resolve()}createTargetIndexes(e,n){return G.resolve()}getDocumentsMatchingTarget(e,n){return G.resolve(null)}getIndexType(e,n){return G.resolve(0)}getFieldIndexes(e,n){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,n){return G.resolve(Ui.min())}getMinOffsetFromCollectionGroup(e,n){return G.resolve(Ui.min())}updateCollectionGroup(e,n,r){return G.resolve()}updateIndexEntries(e,n){return G.resolve()}}class VR{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Tt(Me.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Tt(Me.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new ea(0)}static kn(){return new ea(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(){this.changes=new pa(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Lt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?G.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&wl(r.mutation,i,vn.empty(),pt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ge()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ge()){const i=_s();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=el();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=_s();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ge()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=qr();const o=El(),a=function(){return El()}();return n.forEach((l,c)=>{const u=r.get(c.key);i.has(c.key)&&(u===void 0||u.mutation instanceof Xi)?s=s.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),wl(u.mutation,c,u.mutation.getFieldMask(),pt.now())):o.set(c.key,vn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,u)=>o.set(c,u)),n.forEach((c,u)=>{var d;return a.set(c,new UR(u,(d=o.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){const r=El();let i=new Ge((o,a)=>o-a),s=ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let u=r.get(l)||vn.empty();u=a.applyToLocalView(c,u),r.set(l,u);const d=(i.get(a.batchId)||ge()).add(l);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,d=$C();u.forEach(f=>{if(!s.has(f)){const m=XC(n.get(f),r.get(f));m!==null&&d.set(f,m),s=s.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return G.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return se.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):VC(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):G.resolve(_s());let a=-1,l=s;return o.next(c=>G.forEach(c,(u,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(u)?G.resolve():this.remoteDocumentCache.getEntry(e,u).next(f=>{l=l.insert(u,f)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,ge())).next(u=>({batchId:a,changes:WC(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new se(n)).next(r=>{let i=el();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=el();return this.indexManager.getCollectionParents(e,s).next(a=>G.forEach(a,l=>{const c=function(d,f){return new fa(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(u=>{u.forEach((d,f)=>{o=o.insert(d,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,c)=>{const u=c.getKey();o.get(u)===null&&(o=o.insert(u,Lt.newInvalidDocument(u)))});let a=el();return o.forEach((l,c)=>{const u=s.get(l);u!==void 0&&wl(u.mutation,c,vn.empty(),pt.now()),qd(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return G.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:hr(i.createTime)}}(n)),G.resolve()}getNamedQuery(e,n){return G.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:LR(i.bundledQuery),readTime:hr(i.readTime)}}(n)),G.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{constructor(){this.overlays=new Ge(se.comparator),this.Ir=new Map}getOverlay(e,n){return G.resolve(this.overlays.get(n))}getOverlays(e,n){const r=_s();return G.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),G.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),G.resolve()}getOverlaysForCollection(e,n,r){const i=_s(),s=n.length+1,o=new se(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return G.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ge((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let u=s.get(c.largestBatchId);u===null&&(u=_s(),s=s.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=_s(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=i)););return G.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new pR(n,r));let s=this.Ir.get(n);s===void 0&&(s=ge(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qR{constructor(){this.sessionToken=kt.EMPTY_BYTE_STRING}getSessionToken(e){return G.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,G.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bx{constructor(){this.Tr=new Tt(mt.Er),this.dr=new Tt(mt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new mt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new mt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new se(new Me([])),r=new mt(n,e),i=new mt(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new se(new Me([])),r=new mt(n,e),i=new mt(n,e+1);let s=ge();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new mt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class mt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return se.comparator(e.key,n.key)||be(e.wr,n.wr)}static Ar(e,n){return be(e.wr,n.wr)||se.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Tt(mt.Er)}checkEmpty(e){return G.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new fR(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new mt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return G.resolve(o)}lookupMutationBatch(e,n){return G.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return G.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new mt(n,0),i=new mt(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),G.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Tt(be);return n.forEach(i=>{const s=new mt(i,0),o=new mt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),G.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;se.isDocumentKey(s)||(s=s.child(""));const o=new mt(new se(s),0);let a=new Tt(be);return this.br.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.wr)),!0)},o),G.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Te(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return G.forEach(n.mutations,i=>{const s=new mt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new mt(n,0),i=this.br.firstAfterOrEqual(r);return G.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,G.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR{constructor(e){this.Mr=e,this.docs=function(){return new Ge(se.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return G.resolve(r?r.document.mutableCopy():Lt.newInvalidDocument(n))}getEntries(e,n){let r=qr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Lt.newInvalidDocument(i))}),G.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=qr();const o=n.path,a=new se(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||PD(kD(u),r)<=0||(i.has(u.key)||qd(n,u))&&(s=s.insert(u.key,u.mutableCopy()))}return G.resolve(s)}getAllFromCollectionGroup(e,n,r,i){ae()}Or(e,n){return G.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new QR(this)}getSize(e){return G.resolve(this.size)}}class QR extends zR{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),G.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YR{constructor(e){this.persistence=e,this.Nr=new pa(n=>gx(n),xx),this.lastRemoteSnapshotVersion=le.min(),this.highestTargetId=0,this.Lr=0,this.Br=new bx,this.targetCount=0,this.kr=ea.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),G.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new ea(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,G.resolve()}updateTargetData(e,n){return this.Kn(n),G.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),G.waitFor(s).next(()=>i)}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return G.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),G.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),G.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),G.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return G.resolve(r)}containsKey(e,n){return G.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(e,n){this.qr={},this.overlays={},this.Qr=new dx(0),this.Kr=!1,this.Kr=!0,this.$r=new qR,this.referenceDelegate=e(this),this.Ur=new YR(this),this.indexManager=new jR,this.remoteDocumentCache=function(i){return new GR(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new BR(n),this.Gr=new WR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new $R,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new KR(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){ne("MemoryPersistence","Starting transaction:",e);const i=new JR(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return G.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class JR extends RD{constructor(e){super(),this.currentSequenceNumber=e}}class Cx{constructor(e){this.persistence=e,this.Jr=new bx,this.Yr=null}static Zr(e){return new Cx(e)}get Xr(){if(this.Yr)return this.Yr;throw ae()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),G.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),G.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),G.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.Xr,r=>{const i=se.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,le.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return G.or([()=>G.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=ge(),i=ge();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Ax(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return O3()?8:ND(Ut())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new ZR;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Va()<=ve.DEBUG&&ne("QueryEngine","SDK will not create cache indexes for query:",po(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),G.resolve()):(Va()<=ve.DEBUG&&ne("QueryEngine","Query:",po(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Va()<=ve.DEBUG&&ne("QueryEngine","The SDK decides to create cache indexes for query:",po(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ur(n))):G.resolve())}Yi(e,n){if(m_(n))return G.resolve(null);let r=ur(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Tm(n,null,"F"),r=ur(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=ge(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ts(n,a);return this.ns(n,c,o,l.readTime)?this.Yi(e,Tm(n,null,"F")):this.rs(e,c,n,l)}))})))}Zi(e,n,r,i){return m_(n)||i.isEqual(le.min())?G.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?G.resolve(null):(Va()<=ve.DEBUG&&ne("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),po(n)),this.rs(e,o,n,ID(i,-1)).next(a=>a))})}ts(e,n){let r=new Tt(UC(e));return n.forEach((i,s)=>{qd(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return Va()<=ve.DEBUG&&ne("QueryEngine","Using full collection scan to execute query:",po(n)),this.Ji.getDocumentsMatchingQuery(e,n,Ui.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Ge(be),this._s=new pa(s=>gx(s),xx),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new HR(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function nN(t,e,n,r){return new tN(t,e,n,r)}async function cA(t,e){const n=ce(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=ge();for(const c of i){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of s){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(r,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function rN(t,e){const n=ce(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){const d=c.batch,f=d.keys();let m=G.resolve();return f.forEach(x=>{m=m.next(()=>u.getEntry(l,x)).next(y=>{const w=c.docVersions.get(x);Te(w!==null),y.version.compareTo(w)<0&&(d.applyToRemoteDocument(y,c),y.isValidDocument()&&(y.setReadTime(c.commitVersion),u.addEntry(y)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=ge();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function uA(t){const e=ce(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function iN(t,e){const n=ce(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];e.targetChanges.forEach((u,d)=>{const f=i.get(d);if(!f)return;a.push(n.Ur.removeMatchingKeys(s,u.removedDocuments,d).next(()=>n.Ur.addMatchingKeys(s,u.addedDocuments,d)));let m=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?m=m.withResumeToken(kt.EMPTY_BYTE_STRING,le.min()).withLastLimboFreeSnapshotVersion(le.min()):u.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(u.resumeToken,r)),i=i.insert(d,m),function(y,w,v){return y.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=3e8?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(f,m,u)&&a.push(n.Ur.updateTargetData(s,m))});let l=qr(),c=ge();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(sN(s,o,e.documentUpdates).next(u=>{l=u.Ps,c=u.Is})),!r.isEqual(le.min())){const u=n.Ur.getLastRemoteSnapshotVersion(s).next(d=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(u)}return G.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.os=i,s))}function sN(t,e,n){let r=ge(),i=ge();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=qr();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(le.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):ne("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:i}})}function oN(t,e){const n=ce(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function aN(t,e){const n=ce(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,G.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new _i(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Rm(t,e,n){const r=ce(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Sc(o))throw o;ne("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function S_(t,e,n){const r=ce(t);let i=le.min(),s=ge();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const d=ce(l),f=d._s.get(u);return f!==void 0?G.resolve(d.os.get(f)):d.Ur.getTargetData(c,u)}(r,o,ur(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:le.min(),n?s:ge())).next(a=>(lN(r,XD(e),a),{documents:a,Ts:s})))}function lN(t,e,n){let r=t.us.get(e)||le.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class T_{constructor(){this.activeTargetIds=rR()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class cN{constructor(){this.so=new T_,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new T_,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I_{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ne("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ne("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wu=null;function m0(){return wu===null?wu=function(){return 268435456+Math.round(2147483648*Math.random())}():wu++,"0x"+wu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ft="WebChannelConnection";class fN extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const a=m0(),l=this.xo(n,r.toUriEncodedString());ne("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,o),this.No(n,l,c,i).then(u=>(ne("RestConnection",`Received RPC '${n}' ${a}: `,u),u),u=>{throw Yo("RestConnection",`RPC '${n}' ${a} failed with error: `,u,"url: ",l,"request:",i),u})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+da}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=hN[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=m0();return new Promise((o,a)=>{const l=new CC;l.setWithCredentials(!0),l.listenOnce(AC.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case rh.NO_ERROR:const u=l.getResponseJson();ne(Ft,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(u)),o(u);break;case rh.TIMEOUT:ne(Ft,`RPC '${e}' ${s} timed out`),a(new ee($.DEADLINE_EXCEEDED,"Request time out"));break;case rh.HTTP_ERROR:const d=l.getStatus();if(ne(Ft,`RPC '${e}' ${s} failed with status:`,d,"response text:",l.getResponseText()),d>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);const m=f==null?void 0:f.error;if(m&&m.status&&m.message){const x=function(w){const v=w.toLowerCase().replace(/_/g,"-");return Object.values($).indexOf(v)>=0?v:$.UNKNOWN}(m.status);a(new ee(x,m.message))}else a(new ee($.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new ee($.UNAVAILABLE,"Connection failed."));break;default:ae()}}finally{ne(Ft,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);ne(Ft,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",c,r,15)})}Bo(e,n,r){const i=m0(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=IC(),a=TC(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const u=s.join("");ne(Ft,`Creating RPC '${e}' stream ${i}: ${u}`,l);const d=o.createWebChannel(u,l);let f=!1,m=!1;const x=new dN({Io:w=>{m?ne(Ft,`Not sending because RPC '${e}' stream ${i} is closed:`,w):(f||(ne(Ft,`Opening RPC '${e}' stream ${i} transport.`),d.open(),f=!0),ne(Ft,`RPC '${e}' stream ${i} sending:`,w),d.send(w))},To:()=>d.close()}),y=(w,v,g)=>{w.listen(v,_=>{try{g(_)}catch(A){setTimeout(()=>{throw A},0)}})};return y(d,Za.EventType.OPEN,()=>{m||(ne(Ft,`RPC '${e}' stream ${i} transport opened.`),x.yo())}),y(d,Za.EventType.CLOSE,()=>{m||(m=!0,ne(Ft,`RPC '${e}' stream ${i} transport closed`),x.So())}),y(d,Za.EventType.ERROR,w=>{m||(m=!0,Yo(Ft,`RPC '${e}' stream ${i} transport errored:`,w),x.So(new ee($.UNAVAILABLE,"The operation could not be completed")))}),y(d,Za.EventType.MESSAGE,w=>{var v;if(!m){const g=w.data[0];Te(!!g);const _=g,A=_.error||((v=_[0])===null||v===void 0?void 0:v.error);if(A){ne(Ft,`RPC '${e}' stream ${i} received error:`,A);const P=A.status;let D=function(k){const T=at[k];if(T!==void 0)return ZC(T)}(P),C=A.message;D===void 0&&(D=$.INTERNAL,C="Unknown error status: "+P+" with message "+A.message),m=!0,x.So(new ee(D,C)),d.close()}else ne(Ft,`RPC '${e}' stream ${i} received:`,g),x.bo(g)}}),y(a,SC.STAT_EVENT,w=>{w.stat===Em.PROXY?ne(Ft,`RPC '${e}' stream ${i} detected buffering proxy`):w.stat===Em.NOPROXY&&ne(Ft,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{x.wo()},0),x}}function g0(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yd(t){return new bR(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&ne("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(e,n,r,i,s,o,a,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new hA(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===$.RESOURCE_EXHAUSTED?($r(n.toString()),$r("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===$.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new ee($.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return ne("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(ne("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class pN extends dA{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=SR(this.serializer,e),r=function(s){if(!("targetChange"in s))return le.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?le.min():o.readTime?hr(o.readTime):le.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Dm(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=Am(l)?{documents:kR(s,l)}:{query:PR(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=nA(s,o.resumeToken);const c=Im(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(le.min())>0){a.readTime=nd(s,o.snapshotVersion.toTimestamp());const c=Im(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=RR(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Dm(this.serializer),n.removeTarget=e,this.a_(n)}}class mN extends dA{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Te(!!e.streamToken),this.lastStreamToken=e.streamToken,Te(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Te(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=IR(e.writeResults,e.commitTime),r=hr(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Dm(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>TR(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new ee($.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,km(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ee($.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,km(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ee($.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class xN{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?($r(n),this.D_=!1):ne("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vN{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{Ys(this)&&(ne("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=ce(l);c.L_.add(4),await kc(c),c.q_.set("Unknown"),c.L_.delete(4),await Xd(c)}(this))})}),this.q_=new xN(r,i)}}async function Xd(t){if(Ys(t))for(const e of t.B_)await e(!0)}async function kc(t){for(const e of t.B_)await e(!1)}function fA(t,e){const n=ce(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),kx(n)?Ix(n):ma(n).r_()&&Tx(n,e))}function Sx(t,e){const n=ce(t),r=ma(n);n.N_.delete(e),r.r_()&&pA(n,e),n.N_.size===0&&(r.r_()?r.o_():Ys(n)&&n.q_.set("Unknown"))}function Tx(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(le.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ma(t).A_(e)}function pA(t,e){t.Q_.xe(e),ma(t).R_(e)}function Ix(t){t.Q_=new yR({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),ma(t).start(),t.q_.v_()}function kx(t){return Ys(t)&&!ma(t).n_()&&t.N_.size>0}function Ys(t){return ce(t).L_.size===0}function mA(t){t.Q_=void 0}async function yN(t){t.q_.set("Online")}async function _N(t){t.N_.forEach((e,n)=>{Tx(t,e)})}async function EN(t,e){mA(t),kx(t)?(t.q_.M_(e),Ix(t)):t.q_.set("Unknown")}async function wN(t,e,n){if(t.q_.set("Online"),e instanceof tA&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.N_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))}(t,e)}catch(r){ne("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await rd(t,r)}else if(e instanceof oh?t.Q_.Ke(e):e instanceof eA?t.Q_.He(e):t.Q_.We(e),!n.isEqual(le.min()))try{const r=await uA(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=s.N_.get(c);u&&s.N_.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=s.N_.get(l);if(!u)return;s.N_.set(l,u.withResumeToken(kt.EMPTY_BYTE_STRING,u.snapshotVersion)),pA(s,l);const d=new _i(u.target,l,c,u.sequenceNumber);Tx(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){ne("RemoteStore","Failed to raise snapshot:",r),await rd(t,r)}}async function rd(t,e,n){if(!Sc(e))throw e;t.L_.add(1),await kc(t),t.q_.set("Offline"),n||(n=()=>uA(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ne("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Xd(t)})}function gA(t,e){return e().catch(n=>rd(t,n,e))}async function Jd(t){const e=ce(t),n=Wi(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;bN(e);)try{const i=await oN(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,CN(e,i)}catch(i){await rd(e,i)}xA(e)&&vA(e)}function bN(t){return Ys(t)&&t.O_.length<10}function CN(t,e){t.O_.push(e);const n=Wi(t);n.r_()&&n.V_&&n.m_(e.mutations)}function xA(t){return Ys(t)&&!Wi(t).n_()&&t.O_.length>0}function vA(t){Wi(t).start()}async function AN(t){Wi(t).p_()}async function SN(t){const e=Wi(t);for(const n of t.O_)e.m_(n.mutations)}async function TN(t,e,n){const r=t.O_.shift(),i=_x.from(r,e,n);await gA(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Jd(t)}async function IN(t,e){e&&Wi(t).V_&&await async function(r,i){if(function(o){return gR(o)&&o!==$.ABORTED}(i.code)){const s=r.O_.shift();Wi(r).s_(),await gA(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Jd(r)}}(t,e),xA(t)&&vA(t)}async function k_(t,e){const n=ce(t);n.asyncQueue.verifyOperationInProgress(),ne("RemoteStore","RemoteStore received new credentials");const r=Ys(n);n.L_.add(3),await kc(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Xd(n)}async function kN(t,e){const n=ce(t);e?(n.L_.delete(2),await Xd(n)):e||(n.L_.add(2),await kc(n),n.q_.set("Unknown"))}function ma(t){return t.K_||(t.K_=function(n,r,i){const s=ce(n);return s.w_(),new pN(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:yN.bind(null,t),Ro:_N.bind(null,t),mo:EN.bind(null,t),d_:wN.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),kx(t)?Ix(t):t.q_.set("Unknown")):(await t.K_.stop(),mA(t))})),t.K_}function Wi(t){return t.U_||(t.U_=function(n,r,i){const s=ce(n);return s.w_(),new mN(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:AN.bind(null,t),mo:IN.bind(null,t),f_:SN.bind(null,t),g_:TN.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Jd(t)):(await t.U_.stop(),t.O_.length>0&&(ne("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Lr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new Px(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ee($.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Dx(t,e){if($r("AsyncQueue",`${e}: ${t}`),Sc(t))return new ee($.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(e){this.comparator=e?(n,r)=>e(n,r)||se.comparator(n.key,r.key):(n,r)=>se.comparator(n.key,r.key),this.keyedMap=el(),this.sortedSet=new Ge(this.comparator)}static emptySet(e){return new jo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof jo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new jo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P_{constructor(){this.W_=new Ge(se.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ae():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class ta{constructor(e,n,r,i,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new ta(e,n,jo.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&$d(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class DN{constructor(){this.queries=D_(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=ce(n),s=i.queries;i.queries=D_(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new ee($.ABORTED,"Firestore shutting down"))}}function D_(){return new pa(t=>zC(t),$d)}async function Rx(t,e){const n=ce(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new PN,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=Dx(o,`Initialization of query '${po(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&Fx(n)}async function Nx(t,e){const n=ce(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function RN(t,e){const n=ce(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&Fx(n)}function NN(t,e,n){const r=ce(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function Fx(t){t.Y_.forEach(e=>{e.next()})}var Nm,R_;(R_=Nm||(Nm={})).ea="default",R_.Cache="cache";class Mx{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new ta(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=ta.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Nm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA{constructor(e){this.key=e}}class _A{constructor(e){this.key=e}}class FN{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ge(),this.mutatedKeys=ge(),this.Aa=UC(e),this.Ra=new jo(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new P_,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,d)=>{const f=i.get(u),m=qd(this.query,d)?d:null,x=!!f&&this.mutatedKeys.has(f.key),y=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let w=!1;f&&m?f.data.isEqual(m.data)?x!==y&&(r.track({type:3,doc:m}),w=!0):this.ga(f,m)||(r.track({type:2,doc:m}),w=!0,(l&&this.Aa(m,l)>0||c&&this.Aa(m,c)<0)&&(a=!0)):!f&&m?(r.track({type:0,doc:m}),w=!0):f&&!m&&(r.track({type:1,doc:f}),w=!0,(l||c)&&(a=!0)),w&&(m?(o=o.add(m),s=y?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),r.track({type:1,doc:u})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((u,d)=>function(m,x){const y=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ae()}};return y(m)-y(x)}(u.type,d.type)||this.Aa(u.doc,d.doc)),this.pa(r),i=i!=null&&i;const a=n&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,c=l!==this.Ea;return this.Ea=l,o.length!==0||c?{snapshot:new ta(this.query,e.Ra,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new P_,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ge(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new _A(r))}),this.da.forEach(r=>{e.has(r)||n.push(new yA(r))}),n}ba(e){this.Ta=e.Ts,this.da=ge();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return ta.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class MN{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class ON{constructor(e){this.key=e,this.va=!1}}class BN{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new pa(a=>zC(a),$d),this.Ma=new Map,this.xa=new Set,this.Oa=new Ge(se.comparator),this.Na=new Map,this.La=new bx,this.Ba={},this.ka=new Map,this.qa=ea.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function LN(t,e,n=!0){const r=SA(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await EA(r,e,n,!0),i}async function jN(t,e){const n=SA(t);await EA(n,e,!0,!1)}async function EA(t,e,n,r){const i=await aN(t.localStore,ur(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await VN(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&fA(t.remoteStore,i),a}async function VN(t,e,n,r,i){t.Ka=(d,f,m)=>async function(y,w,v,g){let _=w.view.ma(v);_.ns&&(_=await S_(y.localStore,w.query,!1).then(({documents:C})=>w.view.ma(C,_)));const A=g&&g.targetChanges.get(w.targetId),P=g&&g.targetMismatches.get(w.targetId)!=null,D=w.view.applyChanges(_,y.isPrimaryClient,A,P);return F_(y,w.targetId,D.wa),D.snapshot}(t,d,f,m);const s=await S_(t.localStore,e,!0),o=new FN(e,s.Ts),a=o.ma(s.documents),l=Ic.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,l);F_(t,n,c.wa);const u=new MN(e,n,o);return t.Fa.set(e,u),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function zN(t,e,n){const r=ce(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!$d(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Rm(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Sx(r.remoteStore,i.targetId),Fm(r,i.targetId)}).catch(Ac)):(Fm(r,i.targetId),await Rm(r.localStore,i.targetId,!0))}async function UN(t,e){const n=ce(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Sx(n.remoteStore,r.targetId))}async function HN(t,e,n){const r=YN(t);try{const i=await function(o,a){const l=ce(o),c=pt.now(),u=a.reduce((m,x)=>m.add(x.key),ge());let d,f;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let x=qr(),y=ge();return l.cs.getEntries(m,u).next(w=>{x=w,x.forEach((v,g)=>{g.isValidDocument()||(y=y.add(v))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,x)).next(w=>{d=w;const v=[];for(const g of a){const _=hR(g,d.get(g.key).overlayedDocument);_!=null&&v.push(new Xi(g.key,_,NC(_.value.mapValue),Pn.exists(!0)))}return l.mutationQueue.addMutationBatch(m,c,v,a)}).next(w=>{f=w;const v=w.applyToLocalDocumentSet(d,y);return l.documentOverlayCache.saveOverlays(m,w.batchId,v)})}).then(()=>({batchId:f.batchId,changes:WC(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new Ge(be)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(r,i.batchId,n),await Pc(r,i.changes),await Jd(r.remoteStore)}catch(i){const s=Dx(i,"Failed to persist write");n.reject(s)}}async function wA(t,e){const n=ce(t);try{const r=await iN(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(Te(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Te(o.va):i.removedDocuments.size>0&&(Te(o.va),o.va=!1))}),await Pc(n,r,e)}catch(r){await Ac(r)}}function N_(t,e,n){const r=ce(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=ce(o);l.onlineState=a;let c=!1;l.queries.forEach((u,d)=>{for(const f of d.j_)f.Z_(a)&&(c=!0)}),c&&Fx(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function WN(t,e,n){const r=ce(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new Ge(se.comparator);o=o.insert(s,Lt.newNoDocument(s,le.min()));const a=ge().add(s),l=new Qd(le.min(),new Map,new Ge(be),o,a);await wA(r,l),r.Oa=r.Oa.remove(s),r.Na.delete(e),Ox(r)}else await Rm(r.localStore,e,!1).then(()=>Fm(r,e,n)).catch(Ac)}async function $N(t,e){const n=ce(t),r=e.batch.batchId;try{const i=await rN(n.localStore,e);CA(n,r,null),bA(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Pc(n,i)}catch(i){await Ac(i)}}async function qN(t,e,n){const r=ce(t);try{const i=await function(o,a){const l=ce(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(d=>(Te(d!==null),u=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(r.localStore,e);CA(r,e,n),bA(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Pc(r,i)}catch(i){await Ac(i)}}function bA(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function CA(t,e,n){const r=ce(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Fm(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||AA(t,r)})}function AA(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Sx(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Ox(t))}function F_(t,e,n){for(const r of n)r instanceof yA?(t.La.addReference(r.key,e),KN(t,r)):r instanceof _A?(ne("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||AA(t,r.key)):ae()}function KN(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(ne("SyncEngine","New document in limbo: "+n),t.xa.add(r),Ox(t))}function Ox(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new se(Me.fromString(e)),r=t.qa.next();t.Na.set(r,new ON(n)),t.Oa=t.Oa.insert(n,r),fA(t.remoteStore,new _i(ur(Wd(n.path)),r,"TargetPurposeLimboResolution",dx.oe))}}async function Pc(t,e,n){const r=ce(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(c=>{var u;if((c||n)&&r.isPrimaryClient){const d=c?!c.fromCache:(u=n==null?void 0:n.targetChanges.get(l.targetId))===null||u===void 0?void 0:u.current;r.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){i.push(c);const d=Ax.Wi(l.targetId,c);s.push(d)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(l,c){const u=ce(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>G.forEach(c,f=>G.forEach(f.$i,m=>u.persistence.referenceDelegate.addReference(d,f.targetId,m)).next(()=>G.forEach(f.Ui,m=>u.persistence.referenceDelegate.removeReference(d,f.targetId,m)))))}catch(d){if(!Sc(d))throw d;ne("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const f=d.targetId;if(!d.fromCache){const m=u.os.get(f),x=m.snapshotVersion,y=m.withLastLimboFreeSnapshotVersion(x);u.os=u.os.insert(f,y)}}}(r.localStore,s))}async function GN(t,e){const n=ce(t);if(!n.currentUser.isEqual(e)){ne("SyncEngine","User change. New user:",e.toKey());const r=await cA(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new ee($.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Pc(n,r.hs)}}function QN(t,e){const n=ce(t),r=n.Na.get(e);if(r&&r.va)return ge().add(r.key);{let i=ge();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function SA(t){const e=ce(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=wA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=QN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=WN.bind(null,e),e.Ca.d_=RN.bind(null,e.eventManager),e.Ca.$a=NN.bind(null,e.eventManager),e}function YN(t){const e=ce(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=$N.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=qN.bind(null,e),e}class id{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Yd(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return nN(this.persistence,new eN,e.initialUser,this.serializer)}Ga(e){return new XR(Cx.Zr,this.serializer)}Wa(e){return new cN}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}id.provider={build:()=>new id};class Mm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>N_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=GN.bind(null,this.syncEngine),await kN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new DN}()}createDatastore(e){const n=Yd(e.databaseInfo.databaseId),r=function(s){return new fN(s)}(e.databaseInfo);return function(s,o,a,l){return new gN(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new vN(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>N_(this.syncEngine,n,0),function(){return I_.D()?new I_:new uN}())}createSyncEngine(e,n){return function(i,s,o,a,l,c,u){const d=new BN(i,s,o,a,l,c);return u&&(d.Qa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=ce(i);ne("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await kc(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Mm.provider={build:()=>new Mm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bx{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):$r("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ot.UNAUTHENTICATED,this.clientId=PC.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{ne("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(ne("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Lr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Dx(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function x0(t,e){t.asyncQueue.verifyOperationInProgress(),ne("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await cA(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function M_(t,e){t.asyncQueue.verifyOperationInProgress();const n=await JN(t);ne("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>k_(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>k_(e.remoteStore,i)),t._onlineComponents=e}async function JN(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ne("FirestoreClient","Using user provided OfflineComponentProvider");try{await x0(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===$.FAILED_PRECONDITION||i.code===$.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Yo("Error using user provided cache. Falling back to memory cache: "+n),await x0(t,new id)}}else ne("FirestoreClient","Using default OfflineComponentProvider"),await x0(t,new id);return t._offlineComponents}async function TA(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ne("FirestoreClient","Using user provided OnlineComponentProvider"),await M_(t,t._uninitializedComponentsProvider._online)):(ne("FirestoreClient","Using default OnlineComponentProvider"),await M_(t,new Mm))),t._onlineComponents}function ZN(t){return TA(t).then(e=>e.syncEngine)}async function sd(t){const e=await TA(t),n=e.eventManager;return n.onListen=LN.bind(null,e.syncEngine),n.onUnlisten=zN.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=jN.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=UN.bind(null,e.syncEngine),n}function e9(t,e,n={}){const r=new Lr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const u=new Bx({next:f=>{u.Za(),o.enqueueAndForget(()=>Nx(s,d));const m=f.docs.has(a);!m&&f.fromCache?c.reject(new ee($.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&f.fromCache&&l&&l.source==="server"?c.reject(new ee($.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),d=new Mx(Wd(a.path),u,{includeMetadataChanges:!0,_a:!0});return Rx(s,d)}(await sd(t),t.asyncQueue,e,n,r)),r.promise}function t9(t,e,n={}){const r=new Lr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const u=new Bx({next:f=>{u.Za(),o.enqueueAndForget(()=>Nx(s,d)),f.fromCache&&l.source==="server"?c.reject(new ee($.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),d=new Mx(a,u,{includeMetadataChanges:!0,_a:!0});return Rx(s,d)}(await sd(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IA(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kA(t,e,n){if(!n)throw new ee($.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function n9(t,e,n,r){if(e===!0&&r===!0)throw new ee($.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function B_(t){if(!se.isDocumentKey(t))throw new ee($.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function L_(t){if(se.isDocumentKey(t))throw new ee($.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Zd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ae()}function un(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ee($.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Zd(t);throw new ee($.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j_{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ee($.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ee($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}n9("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=IA((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ee($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ee($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ee($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ef{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new j_({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ee($.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ee($.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new j_(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new yD;switch(r.type){case"firstParty":return new bD(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ee($.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=O_.get(n);r&&(ne("ComponentProvider","Removing Datastore"),O_.delete(n),r.terminate())}(this),Promise.resolve()}}function r9(t,e,n,r={}){var i;const s=(t=un(t,ef))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Yo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=Ot.MOCK_USER;else{a=Mb(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new ee($.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Ot(c)}t._authCredentials=new _D(new kC(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ji(this.firestore,e,this._query)}}class Vt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Oi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Vt(this.firestore,e,this._key)}}class Oi extends Ji{constructor(e,n,r){super(e,n,Wd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Vt(this.firestore,null,new se(e))}withConverter(e){return new Oi(this.firestore,e,this._path)}}function Kn(t,e,...n){if(t=Ie(t),kA("collection","path",e),t instanceof ef){const r=Me.fromString(e,...n);return L_(r),new Oi(t,null,r)}{if(!(t instanceof Vt||t instanceof Oi))throw new ee($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Me.fromString(e,...n));return L_(r),new Oi(t.firestore,null,r)}}function hn(t,e,...n){if(t=Ie(t),arguments.length===1&&(e=PC.newId()),kA("doc","path",e),t instanceof ef){const r=Me.fromString(e,...n);return B_(r),new Vt(t,null,new se(r))}{if(!(t instanceof Vt||t instanceof Oi))throw new ee($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Me.fromString(e,...n));return B_(r),new Vt(t.firestore,t instanceof Oi?t.converter:null,new se(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V_{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new hA(this,"async_queue_retry"),this.Vu=()=>{const r=g0();r&&ne("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=g0();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=g0();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Lr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Sc(e))throw e;ne("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw $r("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=Px.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&ae()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function z_(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Kr extends ef{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new V_,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new V_(e),this._firestoreClient=void 0,await e}}}function i9(t,e){const n=typeof t=="object"?t:tx(),r=typeof t=="string"?t:"(default)",i=jd(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=Rb("firestore");s&&r9(i,...s)}return i}function tf(t){if(t._terminated)throw new ee($.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||s9(t),t._firestoreClient}function s9(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,c,u){return new OD(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,IA(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new XN(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(e){this._byteString=e}static fromBase64String(e){try{return new na(kt.fromBase64String(e))}catch(n){throw new ee($.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new na(kt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ee($.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new At(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lx{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ee($.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ee($.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return be(this._lat,e._lat)||be(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jx{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o9=/^__.*__$/;class a9{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Xi(e,this.data,this.fieldMask,n,this.fieldTransforms):new Tc(e,this.data,n,this.fieldTransforms)}}class PA{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Xi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function DA(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ae()}}class Vx{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Vx(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return od(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(DA(this.Cu)&&o9.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class l9{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Yd(e)}Qu(e,n,r,i=!1){return new Vx({Cu:e,methodName:n,qu:r,path:At.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function sf(t){const e=t._freezeSettings(),n=Yd(t._databaseId);return new l9(t._databaseId,!!e.ignoreUndefinedProperties,n)}function RA(t,e,n,r,i,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);Ux("Data must be an object, but it was:",o,r);const a=NA(r,o);let l,c;if(s.merge)l=new vn(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const u=[];for(const d of s.mergeFields){const f=Om(e,d,n);if(!o.contains(f))throw new ee($.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);MA(u,f)||u.push(f)}l=new vn(u),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new a9(new rn(a),l,c)}class of extends rf{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof of}}class zx extends rf{_toFieldTransform(e){return new aR(e.path,new tc)}isEqual(e){return e instanceof zx}}function c9(t,e,n,r){const i=t.Qu(1,e,n);Ux("Data must be an object, but it was:",i,r);const s=[],o=rn.empty();Qs(r,(l,c)=>{const u=Hx(e,l,n);c=Ie(c);const d=i.Nu(u);if(c instanceof of)s.push(u);else{const f=Dc(c,d);f!=null&&(s.push(u),o.set(u,f))}});const a=new vn(s);return new PA(o,a,i.fieldTransforms)}function u9(t,e,n,r,i,s){const o=t.Qu(1,e,n),a=[Om(e,r,n)],l=[i];if(s.length%2!=0)throw new ee($.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<s.length;f+=2)a.push(Om(e,s[f])),l.push(s[f+1]);const c=[],u=rn.empty();for(let f=a.length-1;f>=0;--f)if(!MA(c,a[f])){const m=a[f];let x=l[f];x=Ie(x);const y=o.Nu(m);if(x instanceof of)c.push(m);else{const w=Dc(x,y);w!=null&&(c.push(m),u.set(m,w))}}const d=new vn(c);return new PA(u,d,o.fieldTransforms)}function h9(t,e,n,r=!1){return Dc(n,t.Qu(r?4:3,e))}function Dc(t,e){if(FA(t=Ie(t)))return Ux("Unsupported field value:",e,t),NA(t,e);if(t instanceof rf)return function(r,i){if(!DA(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=Dc(a,i.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Ie(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return iR(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=pt.fromDate(r);return{timestampValue:nd(i.serializer,s)}}if(r instanceof pt){const s=new pt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:nd(i.serializer,s)}}if(r instanceof Lx)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof na)return{bytesValue:nA(i.serializer,r._byteString)};if(r instanceof Vt){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:wx(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof jx)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return vx(a.serializer,l)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Zd(r)}`)}(t,e)}function NA(t,e){const n={};return DC(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Qs(t,(r,i)=>{const s=Dc(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function FA(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof pt||t instanceof Lx||t instanceof na||t instanceof Vt||t instanceof rf||t instanceof jx)}function Ux(t,e,n){if(!FA(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Zd(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Om(t,e,n){if((e=Ie(e))instanceof nf)return e._internalPath;if(typeof e=="string")return Hx(t,e);throw od("Field path arguments must be of type string or ",t,!1,void 0,n)}const d9=new RegExp("[~\\*/\\[\\]]");function Hx(t,e,n){if(e.search(d9)>=0)throw od(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new nf(...e.split("."))._internalPath}catch{throw od(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function od(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new ee($.INVALID_ARGUMENT,a+t+l)}function MA(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OA{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Vt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new f9(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(af("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class f9 extends OA{data(){return super.data()}}function af(t,e){return typeof e=="string"?Hx(t,e):e instanceof nf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BA(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ee($.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Wx{}class LA extends Wx{}function Gr(t,e,...n){let r=[];e instanceof Wx&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof $x).length,a=s.filter(l=>l instanceof lf).length;if(o>1||o>0&&a>0)throw new ee($.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class lf extends LA{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new lf(e,n,r)}_apply(e){const n=this._parse(e);return VA(e._query,n),new Ji(e.firestore,e.converter,Sm(e._query,n))}_parse(e){const n=sf(e.firestore);return function(s,o,a,l,c,u,d){let f;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new ee($.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){H_(d,u);const m=[];for(const x of d)m.push(U_(l,s,x));f={arrayValue:{values:m}}}else f=U_(l,s,d)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||H_(d,u),f=h9(a,o,d,u==="in"||u==="not-in");return ct.create(c,u,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Un(t,e,n){const r=e,i=af("where",t);return lf._create(i,r,n)}class $x extends Wx{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new $x(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:qn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)VA(o,l),o=Sm(o,l)}(e._query,n),new Ji(e.firestore,e.converter,Sm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class qx extends LA{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new qx(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new ee($.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new ee($.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ec(s,o)}(e._query,this._field,this._direction);return new Ji(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new fa(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function jA(t,e="asc"){const n=e,r=af("orderBy",t);return qx._create(r,n)}function U_(t,e,n){if(typeof(n=Ie(n))=="string"){if(n==="")throw new ee($.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!VC(e)&&n.indexOf("/")!==-1)throw new ee($.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Me.fromString(n));if(!se.isDocumentKey(r))throw new ee($.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return c_(t,new se(r))}if(n instanceof Vt)return c_(t,n._key);throw new ee($.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Zd(n)}.`)}function H_(t,e){if(!Array.isArray(t)||t.length===0)throw new ee($.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function VA(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ee($.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ee($.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class p9{convertValue(e,n="none"){switch(Vs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return it(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(js(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ae()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Qs(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>it(o.doubleValue));return new jx(s)}convertGeoPoint(e){return new Lx(it(e.latitude),it(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=px(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Xl(e));default:return null}}convertTimestamp(e){const n=Hi(e);return new pt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Me.fromString(e);Te(lA(r));const i=new Jl(r.get(1),r.get(3)),s=new se(r.popFirst(5));return i.isEqual(n)||$r(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zA(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class UA extends OA{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ah(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(af("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class ah extends UA{data(e={}){return super.data(e)}}class HA{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new nl(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ah(this._firestore,this._userDataWriter,r.key,r,new nl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ee($.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new ah(i._firestore,i._userDataWriter,a.doc.key,a.doc,new nl(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new ah(i._firestore,i._userDataWriter,a.doc.key,a.doc,new nl(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,u=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:m9(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function m9(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ae()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kx(t){t=un(t,Vt);const e=un(t.firestore,Kr);return e9(tf(e),t._key).then(n=>qA(e,t,n))}class Gx extends p9{constructor(e){super(),this.firestore=e}convertBytes(e){return new na(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Vt(this.firestore,null,n)}}function ad(t){t=un(t,Ji);const e=un(t.firestore,Kr),n=tf(e),r=new Gx(e);return BA(t._query),t9(n,t._query).then(i=>new HA(e,r,t,i))}function WA(t,e,n){t=un(t,Vt);const r=un(t.firestore,Kr),i=zA(t.converter,e,n);return cf(r,[RA(sf(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Pn.none())])}function ic(t,e,n,...r){t=un(t,Vt);const i=un(t.firestore,Kr),s=sf(i);let o;return o=typeof(e=Ie(e))=="string"||e instanceof nf?u9(s,"updateDoc",t._key,e,n,r):c9(s,"updateDoc",t._key,e),cf(i,[o.toMutation(t._key,Pn.exists(!0))])}function lh(t){return cf(un(t.firestore,Kr),[new yx(t._key,Pn.none())])}function $A(t,e){const n=un(t.firestore,Kr),r=hn(t),i=zA(t.converter,e);return cf(n,[RA(sf(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Pn.exists(!1))]).then(()=>r)}function Rc(t,...e){var n,r,i;t=Ie(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||z_(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(z_(e[o])){const d=e[o];e[o]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[o+1]=(r=d.error)===null||r===void 0?void 0:r.bind(d),e[o+2]=(i=d.complete)===null||i===void 0?void 0:i.bind(d)}let l,c,u;if(t instanceof Vt)c=un(t.firestore,Kr),u=Wd(t._key.path),l={next:d=>{e[o]&&e[o](qA(c,t,d))},error:e[o+1],complete:e[o+2]};else{const d=un(t,Ji);c=un(d.firestore,Kr),u=d._query;const f=new Gx(c);l={next:m=>{e[o]&&e[o](new HA(c,f,d,m))},error:e[o+1],complete:e[o+2]},BA(t._query)}return function(f,m,x,y){const w=new Bx(y),v=new Mx(m,w,x);return f.asyncQueue.enqueueAndForget(async()=>Rx(await sd(f),v)),()=>{w.Za(),f.asyncQueue.enqueueAndForget(async()=>Nx(await sd(f),v))}}(tf(c),u,a,l)}function cf(t,e){return function(r,i){const s=new Lr;return r.asyncQueue.enqueueAndForget(async()=>HN(await ZN(r),i,s)),s.promise}(tf(t),e)}function qA(t,e,n){const r=n.docs.get(e._key),i=new Gx(t);return new UA(t,i,e._key,r,new nl(n.hasPendingWrites,n.fromCache),e.converter)}function Vo(){return new zx("serverTimestamp")}(function(e,n=!0){(function(i){da=i})(qs),Fs(new zi("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Kr(new ED(r.getProvider("auth-internal")),new AD(r.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new ee($.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Jl(c.options.projectId,u)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),ar(i_,"4.7.3",e),ar(i_,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KA="firebasestorage.googleapis.com",GA="storageBucket",g9=2*60*1e3,x9=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze extends pr{constructor(e,n,r=0){super(v0(e),`Firebase Storage: ${n} (${v0(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ze.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return v0(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Je;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Je||(Je={}));function v0(t){return"storage/"+t}function Qx(){const t="An unknown error occurred, please check the error payload for server response.";return new Ze(Je.UNKNOWN,t)}function v9(t){return new Ze(Je.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function y9(t){return new Ze(Je.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function _9(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ze(Je.UNAUTHENTICATED,t)}function E9(){return new Ze(Je.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function w9(t){return new Ze(Je.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function b9(){return new Ze(Je.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function C9(){return new Ze(Je.CANCELED,"User canceled the upload/download.")}function A9(t){return new Ze(Je.INVALID_URL,"Invalid URL '"+t+"'.")}function S9(t){return new Ze(Je.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function T9(){return new Ze(Je.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+GA+"' property when initializing the app?")}function I9(){return new Ze(Je.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function k9(){return new Ze(Je.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function P9(t){return new Ze(Je.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Bm(t){return new Ze(Je.INVALID_ARGUMENT,t)}function QA(){return new Ze(Je.APP_DELETED,"The Firebase app was deleted.")}function D9(t){return new Ze(Je.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function bl(t,e){return new Ze(Je.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function za(t){throw new Ze(Je.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=qt.makeFromUrl(e,n)}catch{return new qt(e,"")}if(r.path==="")return r;throw S9(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(A){A.path.charAt(A.path.length-1)==="/"&&(A.path_=A.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function c(A){A.path_=decodeURIComponent(A.path)}const u="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",m=new RegExp(`^https?://${d}/${u}/b/${i}/o${f}`,"i"),x={bucket:1,path:3},y=n===KA?"(?:storage.googleapis.com|storage.cloud.google.com)":n,w="([^?#]*)",v=new RegExp(`^https?://${y}/${i}/${w}`,"i"),_=[{regex:a,indices:l,postModify:s},{regex:m,indices:x,postModify:c},{regex:v,indices:{bucket:1,path:2},postModify:c}];for(let A=0;A<_.length;A++){const P=_[A],D=P.regex.exec(e);if(D){const C=D[P.indices.bucket];let b=D[P.indices.path];b||(b=""),r=new qt(C,b),P.postModify(r);break}}if(r==null)throw A9(e);return r}}class R9{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N9(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let c=!1;function u(...w){c||(c=!0,e.apply(null,w))}function d(w){i=setTimeout(()=>{i=null,t(m,l())},w)}function f(){s&&clearTimeout(s)}function m(w,...v){if(c){f();return}if(w){f(),u.call(null,w,...v);return}if(l()||o){f(),u.call(null,w,...v);return}r<64&&(r*=2);let _;a===1?(a=2,_=0):_=(r+Math.random())*1e3,d(_)}let x=!1;function y(w){x||(x=!0,f(),!c&&(i!==null?(w||(a=2),clearTimeout(i),d(0)):w||(a=1)))}return d(0),s=setTimeout(()=>{o=!0,y(!0)},n),y}function F9(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M9(t){return t!==void 0}function O9(t){return typeof t=="object"&&!Array.isArray(t)}function Yx(t){return typeof t=="string"||t instanceof String}function W_(t){return Xx()&&t instanceof Blob}function Xx(){return typeof Blob<"u"}function Lm(t,e,n,r){if(r<e)throw Bm(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Bm(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nc(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function YA(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var Ss;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Ss||(Ss={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B9(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L9{constructor(e,n,r,i,s,o,a,l,c,u,d,f=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=d,this.retry=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((m,x)=>{this.resolve_=m,this.reject_=x,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new bu(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===Ss.NO_ERROR,l=s.getStatus();if(!a||B9(l,this.additionalRetryCodes_)&&this.retry){const u=s.getErrorCode()===Ss.ABORT;r(!1,new bu(!1,null,u));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new bu(c,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());M9(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=Qx();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?QA():C9();o(l)}else{const l=b9();o(l)}};this.canceled_?n(!1,new bu(!1,null,!0)):this.backoffId_=N9(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&F9(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class bu{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function j9(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function V9(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function z9(t,e){e&&(t["X-Firebase-GMPID"]=e)}function U9(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function H9(t,e,n,r,i,s,o=!0){const a=YA(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return z9(c,e),j9(c,n),V9(c,s),U9(c,r),new L9(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W9(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function $9(...t){const e=W9();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Xx())return new Blob(t);throw new Ze(Je.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function q9(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K9(t){if(typeof atob>"u")throw P9("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ir={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class y0{constructor(e,n){this.data=e,this.contentType=n||null}}function G9(t,e){switch(t){case ir.RAW:return new y0(XA(e));case ir.BASE64:case ir.BASE64URL:return new y0(JA(t,e));case ir.DATA_URL:return new y0(Y9(e),X9(e))}throw Qx()}function XA(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function Q9(t){let e;try{e=decodeURIComponent(t)}catch{throw bl(ir.DATA_URL,"Malformed data URL.")}return XA(e)}function JA(t,e){switch(t){case ir.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw bl(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case ir.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw bl(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=K9(e)}catch(i){throw i.message.includes("polyfill")?i:bl(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class ZA{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw bl(ir.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=J9(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function Y9(t){const e=new ZA(t);return e.base64?JA(ir.BASE64,e.rest):Q9(e.rest)}function X9(t){return new ZA(t).contentType}function J9(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(e,n){let r=0,i="";W_(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(W_(this.data_)){const r=this.data_,i=q9(r,e,n);return i===null?null:new gi(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new gi(r,!0)}}static getBlob(...e){if(Xx()){const n=e.map(r=>r instanceof gi?r.data_:r);return new gi($9.apply(null,n))}else{const n=e.map(o=>Yx(o)?G9(ir.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new gi(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jx(t){let e;try{e=JSON.parse(t)}catch{return null}return O9(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z9(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function eF(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function eS(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tF(t,e){return e}class Wt{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||tF}}let Cu=null;function nF(t){return!Yx(t)||t.length<2?t:eS(t)}function tS(){if(Cu)return Cu;const t=[];t.push(new Wt("bucket")),t.push(new Wt("generation")),t.push(new Wt("metageneration")),t.push(new Wt("name","fullPath",!0));function e(s,o){return nF(o)}const n=new Wt("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new Wt("size");return i.xform=r,t.push(i),t.push(new Wt("timeCreated")),t.push(new Wt("updated")),t.push(new Wt("md5Hash",null,!0)),t.push(new Wt("cacheControl",null,!0)),t.push(new Wt("contentDisposition",null,!0)),t.push(new Wt("contentEncoding",null,!0)),t.push(new Wt("contentLanguage",null,!0)),t.push(new Wt("contentType",null,!0)),t.push(new Wt("metadata","customMetadata",!0)),Cu=t,Cu}function rF(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new qt(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function iF(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return rF(r,t),r}function nS(t,e,n){const r=Jx(e);return r===null?null:iF(t,r,n)}function sF(t,e,n,r){const i=Jx(e);if(i===null||!Yx(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(c=>{const u=t.bucket,d=t.fullPath,f="/b/"+o(u)+"/o/"+o(d),m=Nc(f,n,r),x=YA({alt:"media",token:c});return m+x})[0]}function oF(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $_="prefixes",q_="items";function aF(t,e,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[$_])for(const i of n[$_]){const s=i.replace(/\/$/,""),o=t._makeStorageReference(new qt(e,s));r.prefixes.push(o)}if(n[q_])for(const i of n[q_]){const s=t._makeStorageReference(new qt(e,i.name));r.items.push(s)}return r}function lF(t,e,n){const r=Jx(n);return r===null?null:aF(t,e,r)}class uf{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zx(t){if(!t)throw Qx()}function cF(t,e){function n(r,i){const s=nS(t,i,e);return Zx(s!==null),s}return n}function uF(t,e){function n(r,i){const s=lF(t,e,i);return Zx(s!==null),s}return n}function hF(t,e){function n(r,i){const s=nS(t,i,e);return Zx(s!==null),sF(s,i,t.host,t._protocol)}return n}function ev(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=E9():i=_9():n.getStatus()===402?i=y9(t.bucket):n.getStatus()===403?i=w9(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function rS(t){const e=ev(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=v9(t.path)),s.serverResponse=i.serverResponse,s}return n}function dF(t,e,n,r,i){const s={};e.isRoot?s.prefix="":s.prefix=e.path+"/",n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);const o=e.bucketOnlyServerUrl(),a=Nc(o,t.host,t._protocol),l="GET",c=t.maxOperationRetryTime,u=new uf(a,l,uF(t,e.bucket),c);return u.urlParams=s,u.errorHandler=ev(e),u}function fF(t,e,n){const r=e.fullServerUrl(),i=Nc(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new uf(i,s,hF(t,n),o);return a.errorHandler=rS(e),a}function pF(t,e){const n=e.fullServerUrl(),r=Nc(n,t.host,t._protocol),i="DELETE",s=t.maxOperationRetryTime;function o(l,c){}const a=new uf(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=rS(e),a}function mF(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function gF(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=mF(null,e)),r}function xF(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let _="";for(let A=0;A<2;A++)_=_+Math.random().toString().slice(2);return _}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=gF(e,r,i),u=oF(c,n),d="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+u+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,f=`\r
--`+l+"--",m=gi.getBlob(d,r,f);if(m===null)throw I9();const x={name:c.fullPath},y=Nc(s,t.host,t._protocol),w="POST",v=t.maxUploadRetryTime,g=new uf(y,w,cF(t,n),v);return g.urlParams=x,g.headers=o,g.body=m.uploadData(),g.errorHandler=ev(e),g}class vF{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ss.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ss.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ss.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw za("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw za("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw za("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw za("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw za("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class yF extends vF{initXhr(){this.xhr_.responseType="text"}}function hf(){return new yF}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(e,n){this._service=e,n instanceof qt?this._location=n:this._location=qt.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new zs(e,n)}get root(){const e=new qt(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return eS(this._location.path)}get storage(){return this._service}get parent(){const e=Z9(this._location.path);if(e===null)return null;const n=new qt(this._location.bucket,e);return new zs(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw D9(e)}}function _F(t,e,n){t._throwIfRoot("uploadBytes");const r=xF(t.storage,t._location,tS(),new gi(e,!0),n);return t.storage.makeRequestWithTokens(r,hf).then(i=>({metadata:i,ref:t}))}function EF(t){const e={prefixes:[],items:[]};return iS(t,e).then(()=>e)}async function iS(t,e,n){const i=await wF(t,{pageToken:n});e.prefixes.push(...i.prefixes),e.items.push(...i.items),i.nextPageToken!=null&&await iS(t,e,i.nextPageToken)}function wF(t,e){e!=null&&typeof e.maxResults=="number"&&Lm("options.maxResults",1,1e3,e.maxResults);const n=e||{},r=dF(t.storage,t._location,"/",n.pageToken,n.maxResults);return t.storage.makeRequestWithTokens(r,hf)}function bF(t){t._throwIfRoot("getDownloadURL");const e=fF(t.storage,t._location,tS());return t.storage.makeRequestWithTokens(e,hf).then(n=>{if(n===null)throw k9();return n})}function CF(t){t._throwIfRoot("deleteObject");const e=pF(t.storage,t._location);return t.storage.makeRequestWithTokens(e,hf)}function AF(t,e){const n=eF(t._location.path,e),r=new qt(t._location.bucket,n);return new zs(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SF(t){return/^[A-Za-z]+:\/\//.test(t)}function TF(t,e){return new zs(t,e)}function sS(t,e){if(t instanceof tv){const n=t;if(n._bucket==null)throw T9();const r=new zs(n,n._bucket);return e!=null?sS(r,e):r}else return e!==void 0?AF(t,e):t}function IF(t,e){if(e&&SF(e)){if(t instanceof tv)return TF(t,e);throw Bm("To use ref(service, url), the first argument must be a Storage instance.")}else return sS(t,e)}function K_(t,e){const n=e==null?void 0:e[GA];return n==null?null:qt.makeFromBucketSpec(n,t)}function kF(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:Mb(i,t.app.options.projectId))}class tv{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=KA,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=g9,this._maxUploadRetryTime=x9,this._requests=new Set,i!=null?this._bucket=qt.makeFromBucketSpec(i,this._host):this._bucket=K_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=qt.makeFromBucketSpec(this._url,e):this._bucket=K_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Lm("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Lm("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new zs(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new R9(QA());{const o=H9(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const G_="@firebase/storage",Q_="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oS="storage";function PF(t,e,n){return t=Ie(t),_F(t,e,n)}function Y_(t){return t=Ie(t),EF(t)}function DF(t){return t=Ie(t),bF(t)}function X_(t){return t=Ie(t),CF(t)}function jm(t,e){return t=Ie(t),IF(t,e)}function RF(t=tx(),e){t=Ie(t);const r=jd(t,oS).getImmediate({identifier:e}),i=Rb("storage");return i&&NF(r,...i),r}function NF(t,e,n,r={}){kF(t,e,n,r)}function FF(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new tv(n,r,i,e,qs)}function MF(){Fs(new zi(oS,FF,"PUBLIC").setMultipleInstances(!0)),ar(G_,Q_,""),ar(G_,Q_,"esm2017")}MF();const OF={apiKey:"AIzaSyCnKNX6SQQUvXs5pDtwMFLlNSTLkm7YvCw",authDomain:"retailease-a45f0.firebaseapp.com",projectId:"retailease-a45f0",storageBucket:"retailease-a45f0.firebasestorage.app",messagingSenderId:"943909405770",appId:"1:943909405770:web:e42ab60d5d266e70eb92b3"},nv=Lb(OF),Au=mD(nv),Ve=i9(nv),Vm=RF(nv),aS=M.createContext();function Yt(){return M.useContext(aS)}function BF({children:t}){const[e,n]=M.useState(null),[r,i]=M.useState(!0);function s(u,d){return QP(Au,u,d)}function o(u,d){return YP(Au,u,d)}function a(){return r5(Au)}function l(u,d){return dC(u,d)}M.useEffect(()=>n5(Au,d=>{n(d),i(!1)}),[]);const c={currentUser:e,signup:s,login:o,logout:a,updateUserProfile:l,loading:r};return p.jsx(aS.Provider,{value:c,children:t})}var lS={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},J_=Mr.createContext&&Mr.createContext(lS),Bi=function(){return Bi=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Bi.apply(this,arguments)},LF=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function cS(t){return t&&t.map(function(e,n){return Mr.createElement(e.tag,Bi({key:n},e.attr),cS(e.child))})}function fe(t){return function(e){return Mr.createElement(jF,Bi({attr:Bi({},t.attr)},e),cS(t.child))}}function jF(t){var e=function(n){var r=t.attr,i=t.size,s=t.title,o=LF(t,["attr","size","title"]),a=i||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),Mr.createElement("svg",Bi({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:l,style:Bi(Bi({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&Mr.createElement("title",null,s),t.children)};return J_!==void 0?Mr.createElement(J_.Consumer,null,function(n){return e(n)}):e(lS)}function uS(t){return fe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"}}]})(t)}function VF(t){return fe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M0 448V64h18v384H0zm26.857-.273V64H36v383.727h-9.143zm27.143 0V64h8.857v383.727H54zm44.857 0V64h8.857v383.727h-8.857zm36 0V64h17.714v383.727h-17.714zm44.857 0V64h8.857v383.727h-8.857zm18 0V64h8.857v383.727h-8.857zm18 0V64h8.857v383.727h-8.857zm35.715 0V64h18v383.727h-18zm44.857 0V64h18v383.727h-18zm35.999 0V64h18.001v383.727h-18.001zm36.001 0V64h18.001v383.727h-18.001zm26.857 0V64h18v383.727h-18zm45.143 0V64h26.857v383.727h-26.857zm35.714 0V64h9.143v383.727H476zm18 .273V64h18v384h-18z"}}]})(t)}function zF(t){return fe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"}}]})(t)}function UF(t){return fe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 512c35.32 0 63.97-28.65 63.97-64H160.03c0 35.35 28.65 64 63.97 64zm215.39-149.71c-19.32-20.76-55.47-51.99-55.47-154.29 0-77.7-54.48-139.9-127.94-155.16V32c0-17.67-14.32-32-31.98-32s-31.98 14.33-31.98 32v20.84C118.56 68.1 64.08 130.3 64.08 208c0 102.3-36.15 133.53-55.47 154.29-6 6.45-8.66 14.16-8.61 21.71.11 16.4 12.98 32 32.1 32h383.8c19.12 0 32-15.6 32.1-32 .05-7.55-2.61-15.27-8.61-21.71z"}}]})(t)}function rv(t){return fe({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M425.7 256c-16.9 0-32.8-9-41.4-23.4L320 126l-64.2 106.6c-8.7 14.5-24.6 23.5-41.5 23.5-4.5 0-9-.6-13.3-1.9L64 215v178c0 14.7 10 27.5 24.2 31l216.2 54.1c10.2 2.5 20.9 2.5 31 0L551.8 424c14.2-3.6 24.2-16.4 24.2-31V215l-137 39.1c-4.3 1.3-8.8 1.9-13.3 1.9zm212.6-112.2L586.8 41c-3.1-6.2-9.8-9.8-16.7-8.9L320 64l91.7 152.1c3.8 6.3 11.4 9.3 18.5 7.3l197.9-56.5c9.9-2.9 14.7-13.9 10.2-23.1zM53.2 41L1.7 143.8c-4.6 9.2.3 20.2 10.1 23l197.9 56.5c7.1 2 14.7-1 18.5-7.3L320 64 69.8 32.1c-6.9-.8-13.5 2.7-16.6 8.9z"}}]})(t)}function ld(t){return fe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M0 464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V192H0v272zm320-196c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM192 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM64 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zM400 64h-48V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H160V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H48C21.5 64 0 85.5 0 112v48h448v-48c0-26.5-21.5-48-48-48z"}}]})(t)}function hS(t){return fe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M512 144v288c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V144c0-26.5 21.5-48 48-48h88l12.3-32.9c7-18.7 24.9-31.1 44.9-31.1h125.5c20 0 37.9 12.4 44.9 31.1L376 96h88c26.5 0 48 21.5 48 48zM376 288c0-66.2-53.8-120-120-120s-120 53.8-120 120 53.8 120 120 120 120-53.8 120-120zm-32 0c0 48.5-39.5 88-88 88s-88-39.5-88-88 39.5-88 88-88 88 39.5 88 88z"}}]})(t)}function dS(t){return fe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M511.1 378.8l-26.7-160c-2.6-15.4-15.9-26.7-31.6-26.7H208v-64h96c8.8 0 16-7.2 16-16V16c0-8.8-7.2-16-16-16H48c-8.8 0-16 7.2-16 16v96c0 8.8 7.2 16 16 16h96v64H59.1c-15.6 0-29 11.3-31.6 26.7L.8 378.7c-.6 3.5-.9 7-.9 10.5V480c0 17.7 14.3 32 32 32h448c17.7 0 32-14.3 32-32v-90.7c.1-3.5-.2-7-.8-10.5zM280 248c0-8.8 7.2-16 16-16h16c8.8 0 16 7.2 16 16v16c0 8.8-7.2 16-16 16h-16c-8.8 0-16-7.2-16-16v-16zm-32 64h16c8.8 0 16 7.2 16 16v16c0 8.8-7.2 16-16 16h-16c-8.8 0-16-7.2-16-16v-16c0-8.8 7.2-16 16-16zm-32-80c8.8 0 16 7.2 16 16v16c0 8.8-7.2 16-16 16h-16c-8.8 0-16-7.2-16-16v-16c0-8.8 7.2-16 16-16h16zM80 80V48h192v32H80zm40 200h-16c-8.8 0-16-7.2-16-16v-16c0-8.8 7.2-16 16-16h16c8.8 0 16 7.2 16 16v16c0 8.8-7.2 16-16 16zm16 64v-16c0-8.8 7.2-16 16-16h16c8.8 0 16 7.2 16 16v16c0 8.8-7.2 16-16 16h-16c-8.8 0-16-7.2-16-16zm216 112c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h176c4.4 0 8 3.6 8 8v16zm24-112c0 8.8-7.2 16-16 16h-16c-8.8 0-16-7.2-16-16v-16c0-8.8 7.2-16 16-16h16c8.8 0 16 7.2 16 16v16zm48-80c0 8.8-7.2 16-16 16h-16c-8.8 0-16-7.2-16-16v-16c0-8.8 7.2-16 16-16h16c8.8 0 16 7.2 16 16v16z"}}]})(t)}function iv(t){return fe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M496 384H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16zM464 96H345.94c-21.38 0-32.09 25.85-16.97 40.97l32.4 32.4L288 242.75l-73.37-73.37c-12.5-12.5-32.76-12.5-45.25 0l-68.69 68.69c-6.25 6.25-6.25 16.38 0 22.63l22.62 22.62c6.25 6.25 16.38 6.25 22.63 0L192 237.25l73.37 73.37c12.5 12.5 32.76 12.5 45.25 0l96-96 32.4 32.4c15.12 15.12 40.97 4.41 40.97-16.97V112c.01-8.84-7.15-16-15.99-16z"}}]})(t)}function HF(t){return fe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"}}]})(t)}function fS(t){return fe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"}}]})(t)}function WF(t){return fe({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"}}]})(t)}function sc(t){return fe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"}}]})(t)}function pS(t){return fe({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"}}]})(t)}function _0(t){return fe({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M320 400c-75.85 0-137.25-58.71-142.9-133.11L72.2 185.82c-13.79 17.3-26.48 35.59-36.72 55.59a32.35 32.35 0 0 0 0 29.19C89.71 376.41 197.07 448 320 448c26.91 0 52.87-4 77.89-10.46L346 397.39a144.13 144.13 0 0 1-26 2.61zm313.82 58.1l-110.55-85.44a331.25 331.25 0 0 0 81.25-102.07 32.35 32.35 0 0 0 0-29.19C550.29 135.59 442.93 64 320 64a308.15 308.15 0 0 0-147.32 37.7L45.46 3.37A16 16 0 0 0 23 6.18L3.37 31.45A16 16 0 0 0 6.18 53.9l588.36 454.73a16 16 0 0 0 22.46-2.81l19.64-25.27a16 16 0 0 0-2.82-22.45zm-183.72-142l-39.3-30.38A94.75 94.75 0 0 0 416 256a94.76 94.76 0 0 0-121.31-92.21A47.65 47.65 0 0 1 304 192a46.64 46.64 0 0 1-1.54 10l-73.61-56.89A142.31 142.31 0 0 1 320 112a143.92 143.92 0 0 1 144 144c0 21.63-5.29 41.79-13.9 60.11z"}}]})(t)}function ch(t){return fe({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z"}}]})(t)}function $F(t){return fe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M32 448c0 17.7 14.3 32 32 32h160V320H32v128zm256 32h160c17.7 0 32-14.3 32-32V320H288v160zm192-320h-42.1c6.2-12.1 10.1-25.5 10.1-40 0-48.5-39.5-88-88-88-41.6 0-68.5 21.3-103 68.3-34.5-47-61.4-68.3-103-68.3-48.5 0-88 39.5-88 88 0 14.5 3.8 27.9 10.1 40H32c-17.7 0-32 14.3-32 32v80c0 8.8 7.2 16 16 16h480c8.8 0 16-7.2 16-16v-80c0-17.7-14.3-32-32-32zm-326.1 0c-22.1 0-40-17.9-40-40s17.9-40 40-40c19.9 0 34.6 3.3 86.1 80h-86.1zm206.1 0h-86.1c51.4-76.5 65.7-80 86.1-80 22.1 0 40 17.9 40 40s-17.9 40-40 40z"}}]})(t)}function mS(t){return fe({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M275.3 250.5c7 7.4 18.4 7.4 25.5 0l108.9-114.2c31.6-33.2 29.8-88.2-5.6-118.8-30.8-26.7-76.7-21.9-104.9 7.7L288 36.9l-11.1-11.6C248.7-4.4 202.8-9.2 172 17.5c-35.3 30.6-37.2 85.6-5.6 118.8l108.9 114.2zm290 77.6c-11.8-10.7-30.2-10-42.6 0L430.3 402c-11.3 9.1-25.4 14-40 14H272c-8.8 0-16-7.2-16-16s7.2-16 16-16h78.3c15.9 0 30.7-10.9 33.3-26.6 3.3-20-12.1-37.4-31.6-37.4H192c-27 0-53.1 9.3-74.1 26.3L71.4 384H16c-8.8 0-16 7.2-16 16v96c0 8.8 7.2 16 16 16h356.8c14.5 0 28.6-4.9 40-14L564 377c15.2-12.1 16.4-35.3 1.3-48.9z"}}]})(t)}function qF(t){return fe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"}}]})(t)}function KF(t){return fe({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M96.06 454.35c.01 6.29 1.87 12.45 5.36 17.69l17.09 25.69a31.99 31.99 0 0 0 26.64 14.28h61.71a31.99 31.99 0 0 0 26.64-14.28l17.09-25.69a31.989 31.989 0 0 0 5.36-17.69l.04-38.35H96.01l.05 38.35zM0 176c0 44.37 16.45 84.85 43.56 115.78 16.52 18.85 42.36 58.23 52.21 91.45.04.26.07.52.11.78h160.24c.04-.26.07-.51.11-.78 9.85-33.22 35.69-72.6 52.21-91.45C335.55 260.85 352 220.37 352 176 352 78.61 272.91-.3 175.45 0 73.44.31 0 82.97 0 176zm176-80c-44.11 0-80 35.89-80 80 0 8.84-7.16 16-16 16s-16-7.16-16-16c0-61.76 50.24-112 112-112 8.84 0 16 7.16 16 16s-7.16 16-16 16z"}}]})(t)}function cd(t){return fe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 224h-24v-72C376 68.2 307.8 0 224 0S72 68.2 72 152v72H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48zm-104 0H152v-72c0-39.7 32.3-72 72-72s72 32.3 72 72v72z"}}]})(t)}function GF(t){return fe({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M172.268 501.67C26.97 291.031 0 269.413 0 192 0 85.961 85.961 0 192 0s192 85.961 192 192c0 77.413-26.97 99.031-172.268 309.67-9.535 13.774-29.93 13.773-39.464 0zM192 272c44.183 0 80-35.817 80-80s-35.817-80-80-80-80 35.817-80 80 35.817 80 80 80z"}}]})(t)}function gS(t){return fe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"}}]})(t)}function QF(t){return fe({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M109.25 173.25c24.99-24.99 24.99-65.52 0-90.51-24.99-24.99-65.52-24.99-90.51 0-24.99 24.99-24.99 65.52 0 90.51 25 25 65.52 25 90.51 0zm256 165.49c-24.99-24.99-65.52-24.99-90.51 0-24.99 24.99-24.99 65.52 0 90.51 24.99 24.99 65.52 24.99 90.51 0 25-24.99 25-65.51 0-90.51zm-1.94-231.43l-22.62-22.62c-12.5-12.5-32.76-12.5-45.25 0L20.69 359.44c-12.5 12.5-12.5 32.76 0 45.25l22.62 22.62c12.5 12.5 32.76 12.5 45.25 0l274.75-274.75c12.5-12.49 12.5-32.75 0-45.25z"}}]})(t)}function Z_(t){return fe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M493.4 24.6l-104-24c-11.3-2.6-22.9 3.3-27.5 13.9l-48 112c-4.2 9.8-1.4 21.3 6.9 28l60.6 49.6c-36 76.7-98.9 140.5-177.2 177.2l-49.6-60.6c-6.8-8.3-18.2-11.1-28-6.9l-112 48C3.9 366.5-2 378.1.6 389.4l24 104C27.1 504.2 36.7 512 48 512c256.1 0 464-207.5 464-464 0-11.2-7.7-20.9-18.6-23.4z"}}]})(t)}function xS(t){return fe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"}}]})(t)}function sv(t){return fe({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M358.4 3.2L320 48 265.6 3.2a15.9 15.9 0 0 0-19.2 0L192 48 137.6 3.2a15.9 15.9 0 0 0-19.2 0L64 48 25.6 3.2C15-4.7 0 2.8 0 16v480c0 13.2 15 20.7 25.6 12.8L64 464l54.4 44.8a15.9 15.9 0 0 0 19.2 0L192 464l54.4 44.8a15.9 15.9 0 0 0 19.2 0L320 464l38.4 44.8c10.5 7.9 25.6.4 25.6-12.8V16c0-13.2-15-20.7-25.6-12.8zM320 360c0 4.4-3.6 8-8 8H72c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h240c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H72c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h240c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H72c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h240c4.4 0 8 3.6 8 8v16z"}}]})(t)}function vS(t){return fe({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M32,224H64V416H32A31.96166,31.96166,0,0,1,0,384V256A31.96166,31.96166,0,0,1,32,224Zm512-48V448a64.06328,64.06328,0,0,1-64,64H160a64.06328,64.06328,0,0,1-64-64V176a79.974,79.974,0,0,1,80-80H288V32a32,32,0,0,1,64,0V96H464A79.974,79.974,0,0,1,544,176ZM264,256a40,40,0,1,0-40,40A39.997,39.997,0,0,0,264,256Zm-8,128H192v32h64Zm96,0H288v32h64ZM456,256a40,40,0,1,0-40,40A39.997,39.997,0,0,0,456,256Zm-8,128H384v32h64ZM640,256V384a31.96166,31.96166,0,0,1-32,32H576V224h32A31.96166,31.96166,0,0,1,640,256Z"}}]})(t)}function YF(t){return fe({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M308 96c6.627 0 12-5.373 12-12V44c0-6.627-5.373-12-12-12H12C5.373 32 0 37.373 0 44v44.748c0 6.627 5.373 12 12 12h85.28c27.308 0 48.261 9.958 60.97 27.252H12c-6.627 0-12 5.373-12 12v40c0 6.627 5.373 12 12 12h158.757c-6.217 36.086-32.961 58.632-74.757 58.632H12c-6.627 0-12 5.373-12 12v53.012c0 3.349 1.4 6.546 3.861 8.818l165.052 152.356a12.001 12.001 0 0 0 8.139 3.182h82.562c10.924 0 16.166-13.408 8.139-20.818L116.871 319.906c76.499-2.34 131.144-53.395 138.318-127.906H308c6.627 0 12-5.373 12-12v-40c0-6.627-5.373-12-12-12h-58.69c-3.486-11.541-8.28-22.246-14.252-32H308z"}}]})(t)}function ov(t){return fe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"}}]})(t)}function Es(t){return fe({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M528.12 301.319l47.273-208C578.806 78.301 567.391 64 551.99 64H159.208l-9.166-44.81C147.758 8.021 137.93 0 126.529 0H24C10.745 0 0 10.745 0 24v16c0 13.255 10.745 24 24 24h69.883l70.248 343.435C147.325 417.1 136 435.222 136 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-15.674-6.447-29.835-16.824-40h209.647C430.447 426.165 424 440.326 424 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-22.172-12.888-41.332-31.579-50.405l5.517-24.276c3.413-15.018-8.002-29.319-23.403-29.319H218.117l-6.545-32h293.145c11.206 0 20.92-7.754 23.403-18.681z"}}]})(t)}function yS(t){return fe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"}}]})(t)}function _S(t){return fe({attr:{viewBox:"0 0 616 512"},child:[{tag:"path",attr:{d:"M602 118.6L537.1 15C531.3 5.7 521 0 510 0H106C95 0 84.7 5.7 78.9 15L14 118.6c-33.5 53.5-3.8 127.9 58.8 136.4 4.5.6 9.1.9 13.7.9 29.6 0 55.8-13 73.8-33.1 18 20.1 44.3 33.1 73.8 33.1 29.6 0 55.8-13 73.8-33.1 18 20.1 44.3 33.1 73.8 33.1 29.6 0 55.8-13 73.8-33.1 18.1 20.1 44.3 33.1 73.8 33.1 4.7 0 9.2-.3 13.7-.9 62.8-8.4 92.6-82.8 59-136.4zM529.5 288c-10 0-19.9-1.5-29.5-3.8V384H116v-99.8c-9.6 2.2-19.5 3.8-29.5 3.8-6 0-12.1-.4-18-1.2-5.6-.8-11.1-2.1-16.4-3.6V480c0 17.7 14.3 32 32 32h448c17.7 0 32-14.3 32-32V283.2c-5.4 1.6-10.8 2.9-16.4 3.6-6.1.8-12.1 1.2-18.2 1.2z"}}]})(t)}function XF(t){return fe({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"}}]})(t)}function JF(t){return fe({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M384 64H192C85.961 64 0 149.961 0 256s85.961 192 192 192h192c106.039 0 192-85.961 192-192S490.039 64 384 64zM64 256c0-70.741 57.249-128 128-128 70.741 0 128 57.249 128 128 0 70.741-57.249 128-128 128-70.741 0-128-57.249-128-128zm320 128h-48.905c65.217-72.858 65.236-183.12 0-256H384c70.741 0 128 57.249 128 128 0 70.74-57.249 128-128 128z"}}]})(t)}function ZF(t){return fe({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M384 64H192C86 64 0 150 0 256s86 192 192 192h192c106 0 192-86 192-192S490 64 384 64zm0 320c-70.8 0-128-57.3-128-128 0-70.8 57.3-128 128-128 70.8 0 128 57.3 128 128 0 70.8-57.3 128-128 128z"}}]})(t)}function ud(t){return fe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"}}]})(t)}function av(t){return fe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"}}]})(t)}const e7=()=>{const[t,e]=M.useState(!1);return M.useEffect(()=>{const n=setTimeout(()=>{e(!0)},2500);return()=>clearTimeout(n)},[]),p.jsx("div",{className:`splash-screen ${t?"fade-out":"fade-in"}`,children:p.jsxs("div",{className:"splash-content",children:[p.jsx("div",{className:"logo-container",children:p.jsx(Es,{className:"cart-icon"})}),p.jsx("h1",{className:"app-name",children:"Retail Ease"}),p.jsx("div",{className:"loading-bar",children:p.jsx("div",{className:"loading-progress"})})]})})},t7=()=>{const t=Jr();return p.jsx("div",{className:"landing-page",children:p.jsxs("div",{className:"landing-content",children:[p.jsx("div",{className:"logo-container",children:p.jsx(Es,{className:"cart-icon"})}),p.jsx("h1",{className:"app-title",children:"Welcome to Retail Ease"}),p.jsx("p",{className:"app-description",children:"Smart inventory management for Indian small businesses. Track items, get alerts, analyze sales."}),p.jsxs("div",{className:"button-group",children:[p.jsx("button",{className:"primary-btn register-btn",onClick:()=>t("/register"),children:"Register"}),p.jsx("button",{className:"secondary-btn login-btn",onClick:()=>t("/login"),children:"Login"})]}),p.jsxs("div",{className:"features-section",children:[p.jsxs("div",{className:"feature-card",children:[p.jsx("div",{className:"feature-icon",style:{backgroundColor:"var(--primary)"},children:p.jsx(Es,{})}),p.jsx("h3",{children:"Inventory Management"}),p.jsx("p",{children:"Track your stock levels and get alerts for low inventory"})]}),p.jsxs("div",{className:"feature-card",children:[p.jsx("div",{className:"feature-icon",style:{backgroundColor:"var(--secondary)"},children:p.jsx(Es,{})}),p.jsx("h3",{children:"Expiry Alerts"}),p.jsx("p",{children:"Never miss expiry dates with our smart notification system"})]}),p.jsxs("div",{className:"feature-card",children:[p.jsx("div",{className:"feature-icon",style:{backgroundColor:"var(--accent)"},children:p.jsx(Es,{})}),p.jsx("h3",{children:"Business Analytics"}),p.jsx("p",{children:"Gain insights into your sales and profit margins"})]})]})]})})},n7=()=>{const[t,e]=M.useState(""),[n,r]=M.useState(""),[i,s]=M.useState(""),[o,a]=M.useState(!1),{login:l}=Yt(),c=Jr(),u=async d=>{d.preventDefault();try{s(""),a(!0),await l(t,n),c("/dashboard")}catch(f){s("Failed to log in. Please check your credentials."),console.error(f)}a(!1)};return p.jsx("div",{className:"auth-container",children:p.jsxs("div",{className:"auth-card",children:[p.jsxs(An,{to:"/",className:"back-link",children:[p.jsx(uS,{})," Back to Home"]}),p.jsx("h2",{className:"auth-title",children:"Login to Retail Ease"}),i&&p.jsx("div",{className:"error-message",children:i}),p.jsxs("form",{onSubmit:u,className:"auth-form",children:[p.jsxs("div",{className:"form-group",children:[p.jsxs("label",{htmlFor:"email",children:[p.jsx(sc,{})," Email"]}),p.jsx("input",{type:"email",id:"email",value:t,onChange:d=>e(d.target.value),required:!0,placeholder:"Enter your email"})]}),p.jsxs("div",{className:"form-group",children:[p.jsxs("label",{htmlFor:"password",children:[p.jsx(cd,{})," Password"]}),p.jsx("input",{type:"password",id:"password",value:n,onChange:d=>r(d.target.value),required:!0,placeholder:"Enter your password"})]}),p.jsx("button",{type:"submit",className:"primary-btn auth-btn",disabled:o,children:o?"Logging in...":"Login"})]}),p.jsxs("p",{className:"auth-redirect",children:["Don't have an account? ",p.jsx(An,{to:"/register",children:"Register"})]})]})})},r7=()=>{const[t,e]=M.useState(""),[n,r]=M.useState(""),[i,s]=M.useState(""),[o,a]=M.useState(""),[l,c]=M.useState(""),[u,d]=M.useState(!1),{signup:f,updateUserProfile:m}=Yt(),x=Jr(),y=async w=>{if(w.preventDefault(),i!==o)return c("Passwords do not match");try{c(""),d(!0);const{user:v}=await f(n,i);await m(v,{displayName:t}),x("/dashboard")}catch(v){c("Failed to create an account"),console.error(v)}d(!1)};return p.jsx("div",{className:"auth-container",children:p.jsxs("div",{className:"auth-card",children:[p.jsxs(An,{to:"/",className:"back-link",children:[p.jsx(uS,{})," Back to Home"]}),p.jsx("h2",{className:"auth-title",children:"Register for Retail Ease"}),l&&p.jsx("div",{className:"error-message",children:l}),p.jsxs("form",{onSubmit:y,className:"auth-form",children:[p.jsxs("div",{className:"form-group",children:[p.jsxs("label",{htmlFor:"name",children:[p.jsx(av,{})," Full Name"]}),p.jsx("input",{type:"text",id:"name",value:t,onChange:w=>e(w.target.value),required:!0,placeholder:"Enter your full name"})]}),p.jsxs("div",{className:"form-group",children:[p.jsxs("label",{htmlFor:"email",children:[p.jsx(sc,{})," Email"]}),p.jsx("input",{type:"email",id:"email",value:n,onChange:w=>r(w.target.value),required:!0,placeholder:"Enter your email"})]}),p.jsxs("div",{className:"form-group",children:[p.jsxs("label",{htmlFor:"password",children:[p.jsx(cd,{})," Password"]}),p.jsx("input",{type:"password",id:"password",value:i,onChange:w=>s(w.target.value),required:!0,placeholder:"Create a password",minLength:"6"})]}),p.jsxs("div",{className:"form-group",children:[p.jsxs("label",{htmlFor:"confirmPassword",children:[p.jsx(cd,{})," Confirm Password"]}),p.jsx("input",{type:"password",id:"confirmPassword",value:o,onChange:w=>a(w.target.value),required:!0,placeholder:"Confirm your password",minLength:"6"})]}),p.jsx("button",{type:"submit",className:"primary-btn auth-btn",disabled:u,children:u?"Creating Account...":"Register"})]}),p.jsxs("p",{className:"auth-redirect",children:["Already have an account? ",p.jsx(An,{to:"/login",children:"Login"})]})]})})},i7=()=>{const{currentUser:t}=Yt(),[e,n]=M.useState({totalItems:0,lowStock:0,expiringItems:0,totalValue:0}),[r,i]=M.useState(!0);return M.useEffect(()=>{if(!t)return;const s=Kn(Ve,"inventory"),o=Gr(s,Un("userId","==",t.uid)),a=Rc(o,l=>{let c=0,u=0,d=0,f=0;l.forEach(m=>{const x=m.data();if(c++,x.quantity<5&&u++,x.expiryDate){const v=new Date(x.expiryDate.seconds*1e3)-new Date,g=Math.ceil(v/(1e3*60*60*24));g>0&&g<=30&&d++}f+=x.price*x.quantity}),n({totalItems:c,lowStock:u,expiringItems:d,totalValue:f}),i(!1)},l=>{console.error("Error fetching inventory stats:",l),i(!1)});return()=>a()},[t]),p.jsxs("div",{className:"dashboard",children:[p.jsx("h1",{className:"page-title",children:"Dashboard"}),p.jsxs("div",{className:"welcome-card",children:[p.jsxs("h2",{children:["Welcome, ",(t==null?void 0:t.displayName)||"User","!"]}),p.jsx("p",{children:"Manage your inventory and track your business performance with Retail Ease."})]}),p.jsxs("div",{className:"dashboard-stats",children:[p.jsxs("div",{className:"stat-card",children:[p.jsx("h3",{children:"Total Items"}),p.jsx("p",{className:"stat-value",children:r?"...":e.totalItems})]}),p.jsxs("div",{className:"stat-card",children:[p.jsx("h3",{children:"Low Stock"}),p.jsx("p",{className:"stat-value",children:r?"...":e.lowStock})]}),p.jsxs("div",{className:"stat-card",children:[p.jsx("h3",{children:"Expiring Soon"}),p.jsx("p",{className:"stat-value",children:r?"...":e.expiringItems})]}),p.jsxs("div",{className:"stat-card",children:[p.jsx("h3",{children:"Total Value"}),p.jsxs("p",{className:"stat-value",children:["₹",r?"...":e.totalValue.toLocaleString("en-IN")]})]})]}),p.jsxs("div",{className:"dashboard-actions",children:[p.jsxs(An,{to:"/inventory",className:"action-card",children:[p.jsx("div",{className:"action-icon",style:{backgroundColor:"var(--primary)"},children:p.jsx(rv,{})}),p.jsxs("div",{className:"action-content",children:[p.jsx("h3",{children:"Inventory"}),p.jsx("p",{children:"Manage your stock and items"})]})]}),p.jsxs(An,{to:"/billing",className:"action-card",children:[p.jsx("div",{className:"action-icon",style:{backgroundColor:"var(--secondary)"},children:p.jsx(dS,{})}),p.jsxs("div",{className:"action-content",children:[p.jsx("h3",{children:"Billing"}),p.jsx("p",{children:"Create bills and process sales"})]})]}),p.jsxs(An,{to:"/receipts",className:"action-card",children:[p.jsx("div",{className:"action-icon",style:{backgroundColor:"var(--accent)"},children:p.jsx(sv,{})}),p.jsxs("div",{className:"action-content",children:[p.jsx("h3",{children:"Receipts"}),p.jsx("p",{children:"View and manage sales receipts"})]})]}),p.jsxs(An,{to:"/expiry-insights",className:"action-card",children:[p.jsx("div",{className:"action-icon",style:{backgroundColor:"var(--primary)"},children:p.jsx(ld,{})}),p.jsxs("div",{className:"action-content",children:[p.jsx("h3",{children:"Expiry Insights"}),p.jsx("p",{children:"Manage products nearing expiry"})]})]}),p.jsxs(An,{to:"/profit-analysis",className:"action-card",children:[p.jsx("div",{className:"action-icon",style:{backgroundColor:"var(--highlight)"},children:p.jsx(iv,{})}),p.jsxs("div",{className:"action-content",children:[p.jsx("h3",{children:"Profit Analysis"}),p.jsx("p",{children:"Track your business performance"})]})]}),p.jsxs(An,{to:"/ai-business-help",className:"action-card",children:[p.jsx("div",{className:"action-icon",style:{backgroundColor:"var(--accent)"},children:p.jsx(vS,{})}),p.jsxs("div",{className:"action-content",children:[p.jsx("h3",{children:"AI Business Help"}),p.jsx("p",{children:"Get AI-powered business insights"})]})]}),p.jsxs(An,{to:"/settings/profile",className:"action-card",children:[p.jsx("div",{className:"action-icon",style:{backgroundColor:"var(--highlight)"},children:p.jsx(fS,{})}),p.jsxs("div",{className:"action-content",children:[p.jsx("h3",{children:"Settings"}),p.jsx("p",{children:"Configure your account"})]})]})]})]})},s7=({onSubmit:t,onUpdate:e,editItem:n,setEditItem:r,categories:i})=>{const[s,o]=M.useState({name:"",quantity:0,costPrice:0,sellingPrice:0,expiryDate:"",category:"",barcode:"",newCategory:""}),[a,l]=M.useState(null),[c,u]=M.useState(null),[d,f]=M.useState(!1),[m,x]=M.useState(""),[y,w]=M.useState("");M.useEffect(()=>{n&&(o({name:n.name||"",quantity:n.quantity||0,costPrice:n.costPrice||0,sellingPrice:n.sellingPrice||n.price||0,expiryDate:n.expiryDate?new Date(n.expiryDate.seconds*1e3).toISOString().split("T")[0]:"",category:n.category||"",barcode:n.barcode||"",newCategory:""}),n.imageUrl?u(n.imageUrl):u(null))},[n]);const v=D=>{const{name:C,value:b,type:k}=D.target;o(T=>({...T,[C]:k==="number"?Number.parseFloat(b)||0:b}))},g=D=>{const C=D.target.files[0];if(!C)return;l(C);const b=new FileReader;b.onloadend=()=>{u(b.result)},b.readAsDataURL(C)},_=async D=>{D.preventDefault(),x(""),w(""),f(!0);try{if(s.costPrice<=0){x("Cost price must be greater than zero"),f(!1);return}if(s.sellingPrice<=0){x("Selling price must be greater than zero"),f(!1);return}const C={name:s.name,quantity:s.quantity,costPrice:s.costPrice,sellingPrice:s.sellingPrice,price:s.sellingPrice,expiryDate:s.expiryDate?new Date(s.expiryDate):null,category:s.category==="new"?s.newCategory:s.category||"Uncategorized",barcode:s.barcode};if(n){a&&(f(!0),w("Uploading image..."));const b=await e(n.id,{...C,imageUrl:n.imageUrl},a);b.success?(w("Item updated successfully!"),A()):x(b.error||"Failed to update item")}else{a&&(f(!0),w("Uploading image..."));const b=await t(C,a);b.success?(w("Item added successfully!"),A()):x(b.error||"Failed to add item")}}catch(C){console.error("Error in form submission:",C),x("An unexpected error occurred")}f(!1)},A=()=>{o({name:"",quantity:0,costPrice:0,sellingPrice:0,expiryDate:"",category:"",barcode:"",newCategory:""}),l(null),u(null),r(null)},P=()=>{alert("Barcode scanner will be integrated with QuaggaJS in the future. This is a placeholder."),o(D=>({...D,barcode:"SCAN"+Math.floor(Math.random()*1e6)}))};return p.jsxs("div",{className:"inventory-form-container",children:[p.jsx("h2",{className:"form-title",children:n?"Edit Item":"Add New Item"}),m&&p.jsx("div",{className:"error-message",children:m}),y&&p.jsx("div",{className:"success-message",children:y}),p.jsxs("form",{onSubmit:_,className:"inventory-form",children:[p.jsxs("div",{className:"form-grid",children:[p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"name",children:"Item Name*"}),p.jsx("input",{type:"text",id:"name",name:"name",value:s.name,onChange:v,required:!0,placeholder:"Enter item name"})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"quantity",children:"Quantity*"}),p.jsx("input",{type:"number",id:"quantity",name:"quantity",value:s.quantity,onChange:v,required:!0,min:"0",step:"1"})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"costPrice",children:"Cost Price (₹)*"}),p.jsx("input",{type:"number",id:"costPrice",name:"costPrice",value:s.costPrice,onChange:v,required:!0,min:"0.01",step:"0.01",placeholder:"Purchase price"}),p.jsx("small",{className:"form-hint",children:"Price at which you purchased the item"})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"sellingPrice",children:"Selling Price (₹)*"}),p.jsx("input",{type:"number",id:"sellingPrice",name:"sellingPrice",value:s.sellingPrice,onChange:v,required:!0,min:"0.01",step:"0.01",placeholder:"Retail price"}),p.jsx("small",{className:"form-hint",children:"Price at which you sell to customers"})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"expiryDate",children:"Expiry Date (Optional)"}),p.jsx("input",{type:"date",id:"expiryDate",name:"expiryDate",value:s.expiryDate,onChange:v,placeholder:"Optional"}),p.jsx("small",{className:"form-hint",children:"Leave empty for items without expiry date"})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"category",children:"Category"}),p.jsxs("select",{id:"category",name:"category",value:s.category,onChange:v,children:[p.jsx("option",{value:"",children:"Select Category"}),i.map(D=>p.jsx("option",{value:D,children:D},D)),p.jsx("option",{value:"new",children:"+ Add New Category"})]})]}),s.category==="new"&&p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"newCategory",children:"New Category"}),p.jsx("input",{type:"text",id:"newCategory",name:"newCategory",value:s.newCategory,onChange:v,placeholder:"Enter new category name"})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"barcode",children:"Barcode"}),p.jsxs("button",{type:"button",className:"scan-barcode-btn",onClick:P,children:[p.jsx(VF,{className:"barcode-icon"}),p.jsx("span",{children:"Scan Barcode"})]}),s.barcode&&p.jsx("div",{className:"barcode-result",children:p.jsxs("span",{children:["Barcode: ",s.barcode]})})]}),p.jsxs("div",{className:"form-group image-upload-group",children:[p.jsx("label",{children:"Item Image"}),p.jsxs("div",{className:"image-upload",children:[p.jsx("input",{type:"file",id:"image",accept:"image/*",capture:"environment",onChange:g,className:"image-input"}),p.jsxs("label",{htmlFor:"image",className:"image-label",children:[p.jsx(hS,{className:"camera-icon"}),p.jsx("span",{children:a?"Change Image":"Upload Image / Take Photo"})]}),c&&p.jsx("div",{className:"image-preview",children:p.jsx("img",{src:c||"/placeholder.svg",alt:"Preview"})})]})]})]}),p.jsxs("div",{className:"form-actions",children:[n&&p.jsx("button",{type:"button",className:"outline-btn cancel-btn",onClick:A,children:"Cancel"}),p.jsx("button",{type:"submit",className:"primary-btn submit-btn",disabled:d,children:d?"Processing...":n?"Update Item":"Add Item"})]})]})]})},o7=({items:t,groupedItems:e,loading:n,onDelete:r,onEdit:i,onUpdateQuantity:s})=>{const o=c=>c?new Date(c.seconds*1e3).toLocaleDateString():"N/A",a=c=>{if(!c)return!1;const f=new Date(c.seconds*1e3)-new Date,m=Math.ceil(f/(1e3*60*60*24));return m>0&&m<=30},l=c=>c<5;return n?p.jsx("div",{className:"loading",children:"Loading inventory..."}):t.length===0?p.jsx("div",{className:"empty-inventory",children:p.jsx("p",{children:"No items found. Add your first item using the form above."})}):p.jsxs("div",{className:"inventory-list",children:[p.jsxs("h2",{className:"list-title",children:["Your Inventory (",t.length," items)"]}),Object.entries(e).map(([c,u])=>p.jsxs("div",{className:"category-section",children:[p.jsx("h3",{className:"category-title",children:c}),p.jsx("div",{className:"item-grid",children:u.map(d=>p.jsxs("div",{className:"item-card",children:[p.jsx("div",{className:"item-image",children:d.imageUrl?p.jsx("img",{src:d.imageUrl||"/placeholder.svg",alt:d.name}):p.jsx("div",{className:"no-image",children:"No Image"})}),p.jsxs("div",{className:"item-details",children:[p.jsx("h3",{className:"item-name",children:d.name}),p.jsxs("div",{className:"item-info",children:[p.jsx("div",{className:"info-row",children:p.jsxs("span",{className:"info-value price-tag",children:["₹",d.price.toFixed(2)]})}),p.jsx("div",{className:"info-row",children:p.jsxs("span",{className:`quantity-value ${l(d.quantity)?"low-stock":""}`,children:["Qty: ",d.quantity]})}),d.expiryDate&&p.jsx("div",{className:"info-row",children:p.jsxs("span",{className:`info-value ${a(d.expiryDate)?"expiring-soon":""}`,children:["Exp: ",o(d.expiryDate)]})})]}),p.jsxs("div",{className:"item-actions",children:[p.jsxs("div",{className:"quantity-control",children:[p.jsx("button",{className:"quantity-btn minus-btn",onClick:()=>s(d.id,d.quantity-1),disabled:d.quantity<=0,children:p.jsx(gS,{})}),p.jsx("button",{className:"quantity-btn plus-btn",onClick:()=>s(d.id,d.quantity+1),children:p.jsx(xS,{})})]}),p.jsxs("div",{className:"action-buttons",children:[p.jsx("button",{className:"action-btn edit-btn",onClick:()=>i(d),title:"Edit Item",children:p.jsx(WF,{})}),p.jsx("button",{className:"action-btn delete-btn",onClick:()=>r(d.id),title:"Delete Item",children:p.jsx(ud,{})})]})]})]})]},d.id))})]},c))]})},a7=()=>{const[t,e]=M.useState([]),[n,r]=M.useState(!0),[i,s]=M.useState(""),[o,a]=M.useState(""),[l,c]=M.useState("All"),[u,d]=M.useState(["All"]),[f,m]=M.useState(null),{currentUser:x}=Yt(),[y,w]=M.useState("category"),[v,g]=M.useState("asc");M.useEffect(()=>{if(!x)return;r(!0);const I=Gr(Kn(Ve,"inventory"),Un("userId","==",x.uid));return Rc(I,R=>{const K=[],q=new Set(["All"]);R.forEach(L=>{const X={id:L.id,...L.data()};K.push(X),X.category&&q.add(X.category)}),e(K),d(Array.from(q)),r(!1)},R=>{console.error("Error fetching inventory:",R),s("Failed to load inventory items"),r(!1)})},[x]);const _=async(I,N)=>{try{let R=null;return N&&(R=await T(N)),await $A(Kn(Ve,"inventory"),{...I,imageUrl:R,userId:x.uid,createdAt:Vo()}),{success:!0}}catch(R){return console.error("Error adding item:",R),{success:!1,error:"Failed to add item"}}},A=async(I,N,R)=>{try{let K=N.imageUrl;return R&&(K=await T(R)),await ic(hn(Ve,"inventory",I),{...N,imageUrl:K,updatedAt:Vo()}),m(null),{success:!0}}catch(K){return console.error("Error updating item:",K),{success:!1,error:"Failed to update item"}}},P=async I=>{if(window.confirm("Are you sure you want to delete this item?"))try{await lh(hn(Ve,"inventory",I))}catch(N){console.error("Error deleting item:",N),s("Failed to delete item")}},D=async(I,N)=>{if(!(N<0))try{await ic(hn(Ve,"inventory",I),{quantity:N,updatedAt:Vo()})}catch(R){console.error("Error updating quantity:",R),s("Failed to update quantity")}},C=I=>{const N=I.target.value;N==="price-asc"?(w("sellingPrice"),g("asc")):N==="price-desc"?(w("sellingPrice"),g("desc")):N==="expiry-asc"?(w("expiryDate"),g("asc")):(w(N),g("asc"))},b=t.filter(I=>{const N=I.name.toLowerCase().includes(o.toLowerCase()),R=l==="All"||I.category===l;return N&&R}).sort((I,N)=>{if(y==="sellingPrice"||y==="price"){const R=I.sellingPrice||I.price||0,K=N.sellingPrice||N.price||0;return v==="asc"?R-K:K-R}else{if(y==="expiryDate")return!I.expiryDate&&!N.expiryDate?0:I.expiryDate?N.expiryDate?v==="asc"?I.expiryDate.seconds-N.expiryDate.seconds:N.expiryDate.seconds-I.expiryDate.seconds:-1:1;if(y==="category"){const R=I.category||"Uncategorized",K=N.category||"Uncategorized";return R.localeCompare(K)}}return 0}),k=b.reduce((I,N)=>{const R=N.category||"Uncategorized";return I[R]||(I[R]=[]),I[R].push(N),I},{}),T=async I=>{try{const N=new FormData;N.append("file",I),N.append("upload_preset","retailease_unsigned");const R=await fetch("https://api.cloudinary.com/v1_1/dsqoz1bfm/image/upload",{method:"POST",body:N});if(!R.ok)throw new Error(`Upload failed with status: ${R.status}`);return(await R.json()).secure_url}catch(N){throw console.error("Cloudinary upload error:",N),new Error("Image upload failed. Please try again.")}};return p.jsxs("div",{className:"inventory-page",children:[p.jsx("h1",{className:"page-title",children:"Inventory Management"}),i&&p.jsx("div",{className:"error-message",children:i}),p.jsx(s7,{onSubmit:_,onUpdate:A,editItem:f,setEditItem:m,categories:u.filter(I=>I!=="All")}),p.jsxs("div",{className:"inventory-filters",children:[p.jsxs("div",{className:"search-container",children:[p.jsx(ov,{className:"search-icon"}),p.jsx("input",{type:"text",placeholder:"Search items...",value:o,onChange:I=>a(I.target.value),className:"search-input"})]}),p.jsxs("div",{className:"filter-options",children:[p.jsx("select",{value:l,onChange:I=>c(I.target.value),className:"category-filter",children:u.map(I=>p.jsx("option",{value:I,children:I},I))}),p.jsxs("select",{value:y==="sellingPrice"||y==="price"?`price-${v}`:y==="expiryDate"?"expiry-asc":y,onChange:C,className:"sort-filter",children:[p.jsx("option",{value:"category",children:"Sort by Category"}),p.jsx("option",{value:"price-asc",children:"Price: Low to High"}),p.jsx("option",{value:"price-desc",children:"Price: High to Low"}),p.jsx("option",{value:"expiry-asc",children:"Expiry: Sooner to Later"})]})]})]}),p.jsx(o7,{items:b,groupedItems:k,loading:n,onDelete:P,onEdit:m,onUpdateQuantity:D})]})},Su=({title:t,value:e,subvalue:n,icon:r,color:i,isCurrency:s=!1,imageUrl:o,altValue:a=null,altLabel:l=null})=>{const[c,u]=M.useState(!1);M.useEffect(()=>{const x=setTimeout(()=>{u(!0)},100);return()=>clearTimeout(x)},[]);const d=x=>typeof x!="number"?x:x>=1e5?`₹${(x/1e5).toFixed(2)} L`:x>=1e3?`₹${(x/1e3).toFixed(1)} K`:`₹${x.toFixed(2)}`,f=s?d(e):e,m=a!==null?s?d(a):a:null;return p.jsxs("div",{className:`metric-card ${i} ${c?"visible":""}`,children:[p.jsx("div",{className:"metric-icon",children:r}),p.jsxs("div",{className:"metric-content",children:[p.jsx("h3",{className:"metric-title",children:t}),p.jsxs("div",{className:"metric-value-container",children:[o?p.jsxs("div",{className:"metric-with-image",children:[p.jsx("img",{src:o||"/placeholder.svg",alt:e,className:"metric-image"}),p.jsxs("div",{children:[p.jsx("p",{className:"metric-value",children:f}),n&&p.jsx("p",{className:"metric-subvalue",children:n})]})]}):p.jsxs(p.Fragment,{children:[p.jsx("p",{className:"metric-value",children:f}),n&&p.jsx("p",{className:"metric-subvalue",children:n})]}),m!==null&&p.jsxs("div",{className:"metric-alt-value",children:[p.jsx("span",{className:"alt-label",children:l||"Alt"}),p.jsx("span",{className:"alt-value",children:m})]})]})]})]})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Fc(t){return t+.5|0}const Ei=(t,e,n)=>Math.max(Math.min(t,n),e);function rl(t){return Ei(Fc(t*2.55),0,255)}function Li(t){return Ei(Fc(t*255),0,255)}function Ar(t){return Ei(Fc(t/2.55)/100,0,1)}function e2(t){return Ei(Fc(t*100),0,100)}const Cn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},zm=[..."0123456789ABCDEF"],l7=t=>zm[t&15],c7=t=>zm[(t&240)>>4]+zm[t&15],Tu=t=>(t&240)>>4===(t&15),u7=t=>Tu(t.r)&&Tu(t.g)&&Tu(t.b)&&Tu(t.a);function h7(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&Cn[t[1]]*17,g:255&Cn[t[2]]*17,b:255&Cn[t[3]]*17,a:e===5?Cn[t[4]]*17:255}:(e===7||e===9)&&(n={r:Cn[t[1]]<<4|Cn[t[2]],g:Cn[t[3]]<<4|Cn[t[4]],b:Cn[t[5]]<<4|Cn[t[6]],a:e===9?Cn[t[7]]<<4|Cn[t[8]]:255})),n}const d7=(t,e)=>t<255?e(t):"";function f7(t){var e=u7(t)?l7:c7;return t?"#"+e(t.r)+e(t.g)+e(t.b)+d7(t.a,e):void 0}const p7=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function ES(t,e,n){const r=e*Math.min(n,1-n),i=(s,o=(s+t/30)%12)=>n-r*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function m7(t,e,n){const r=(i,s=(i+t/60)%6)=>n-n*e*Math.max(Math.min(s,4-s,1),0);return[r(5),r(3),r(1)]}function g7(t,e,n){const r=ES(t,1,.5);let i;for(e+n>1&&(i=1/(e+n),e*=i,n*=i),i=0;i<3;i++)r[i]*=1-e-n,r[i]+=e;return r}function x7(t,e,n,r,i){return t===i?(e-n)/r+(e<n?6:0):e===i?(n-t)/r+2:(t-e)/r+4}function lv(t){const n=t.r/255,r=t.g/255,i=t.b/255,s=Math.max(n,r,i),o=Math.min(n,r,i),a=(s+o)/2;let l,c,u;return s!==o&&(u=s-o,c=a>.5?u/(2-s-o):u/(s+o),l=x7(n,r,i,u,s),l=l*60+.5),[l|0,c||0,a]}function cv(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(Li)}function uv(t,e,n){return cv(ES,t,e,n)}function v7(t,e,n){return cv(g7,t,e,n)}function y7(t,e,n){return cv(m7,t,e,n)}function wS(t){return(t%360+360)%360}function _7(t){const e=p7.exec(t);let n=255,r;if(!e)return;e[5]!==r&&(n=e[6]?rl(+e[5]):Li(+e[5]));const i=wS(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=v7(i,s,o):e[1]==="hsv"?r=y7(i,s,o):r=uv(i,s,o),{r:r[0],g:r[1],b:r[2],a:n}}function E7(t,e){var n=lv(t);n[0]=wS(n[0]+e),n=uv(n),t.r=n[0],t.g=n[1],t.b=n[2]}function w7(t){if(!t)return;const e=lv(t),n=e[0],r=e2(e[1]),i=e2(e[2]);return t.a<255?`hsla(${n}, ${r}%, ${i}%, ${Ar(t.a)})`:`hsl(${n}, ${r}%, ${i}%)`}const t2={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},n2={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function b7(){const t={},e=Object.keys(n2),n=Object.keys(t2);let r,i,s,o,a;for(r=0;r<e.length;r++){for(o=a=e[r],i=0;i<n.length;i++)s=n[i],a=a.replace(s,t2[s]);s=parseInt(n2[o],16),t[a]=[s>>16&255,s>>8&255,s&255]}return t}let Iu;function C7(t){Iu||(Iu=b7(),Iu.transparent=[0,0,0,0]);const e=Iu[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const A7=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function S7(t){const e=A7.exec(t);let n=255,r,i,s;if(e){if(e[7]!==r){const o=+e[7];n=e[8]?rl(o):Ei(o*255,0,255)}return r=+e[1],i=+e[3],s=+e[5],r=255&(e[2]?rl(r):Ei(r,0,255)),i=255&(e[4]?rl(i):Ei(i,0,255)),s=255&(e[6]?rl(s):Ei(s,0,255)),{r,g:i,b:s,a:n}}}function T7(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Ar(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const E0=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,ho=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function I7(t,e,n){const r=ho(Ar(t.r)),i=ho(Ar(t.g)),s=ho(Ar(t.b));return{r:Li(E0(r+n*(ho(Ar(e.r))-r))),g:Li(E0(i+n*(ho(Ar(e.g))-i))),b:Li(E0(s+n*(ho(Ar(e.b))-s))),a:t.a+n*(e.a-t.a)}}function ku(t,e,n){if(t){let r=lv(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,e===0?360:1)),r=uv(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function bS(t,e){return t&&Object.assign(e||{},t)}function r2(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Li(t[3]))):(e=bS(t,{r:0,g:0,b:0,a:1}),e.a=Li(e.a)),e}function k7(t){return t.charAt(0)==="r"?S7(t):_7(t)}class oc{constructor(e){if(e instanceof oc)return e;const n=typeof e;let r;n==="object"?r=r2(e):n==="string"&&(r=h7(e)||C7(e)||k7(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=bS(this._rgb);return e&&(e.a=Ar(e.a)),e}set rgb(e){this._rgb=r2(e)}rgbString(){return this._valid?T7(this._rgb):void 0}hexString(){return this._valid?f7(this._rgb):void 0}hslString(){return this._valid?w7(this._rgb):void 0}mix(e,n){if(e){const r=this.rgb,i=e.rgb;let s;const o=n===s?.5:n,a=2*o-1,l=r.a-i.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-c,r.r=255&c*r.r+s*i.r+.5,r.g=255&c*r.g+s*i.g+.5,r.b=255&c*r.b+s*i.b+.5,r.a=o*r.a+(1-o)*i.a,this.rgb=r}return this}interpolate(e,n){return e&&(this._rgb=I7(this._rgb,e._rgb,n)),this}clone(){return new oc(this.rgb)}alpha(e){return this._rgb.a=Li(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=Fc(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return ku(this._rgb,2,e),this}darken(e){return ku(this._rgb,2,-e),this}saturate(e){return ku(this._rgb,1,e),this}desaturate(e){return ku(this._rgb,1,-e),this}rotate(e){return E7(this._rgb,e),this}}/*!
 * Chart.js v4.4.8
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function _r(){}const P7=(()=>{let t=0;return()=>t++})();function pe(t){return t==null}function ze(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function xe(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function Xe(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function pn(t,e){return Xe(t)?t:e}function he(t,e){return typeof t>"u"?e:t}const D7=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,CS=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function De(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function Ae(t,e,n,r){let i,s,o;if(ze(t))for(s=t.length,i=0;i<s;i++)e.call(n,t[i],i);else if(xe(t))for(o=Object.keys(t),s=o.length,i=0;i<s;i++)e.call(n,t[o[i]],o[i])}function hd(t,e){let n,r,i,s;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(i=t[n],s=e[n],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function dd(t){if(ze(t))return t.map(dd);if(xe(t)){const e=Object.create(null),n=Object.keys(t),r=n.length;let i=0;for(;i<r;++i)e[n[i]]=dd(t[n[i]]);return e}return t}function AS(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function R7(t,e,n,r){if(!AS(t))return;const i=e[t],s=n[t];xe(i)&&xe(s)?ac(i,s,r):e[t]=dd(s)}function ac(t,e,n){const r=ze(e)?e:[e],i=r.length;if(!xe(t))return t;n=n||{};const s=n.merger||R7;let o;for(let a=0;a<i;++a){if(o=r[a],!xe(o))continue;const l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)s(l[c],t,o,n)}return t}function Cl(t,e){return ac(t,e,{merger:N7})}function N7(t,e,n){if(!AS(t))return;const r=e[t],i=n[t];xe(r)&&xe(i)?Cl(r,i):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=dd(i))}const i2={"":t=>t,x:t=>t.x,y:t=>t.y};function F7(t){const e=t.split("."),n=[];let r="";for(const i of e)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function M7(t){const e=F7(t);return n=>{for(const r of e){if(r==="")break;n=n&&n[r]}return n}}function $i(t,e){return(i2[e]||(i2[e]=M7(e)))(t)}function hv(t){return t.charAt(0).toUpperCase()+t.slice(1)}const lc=t=>typeof t<"u",qi=t=>typeof t=="function",s2=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function O7(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Le=Math.PI,Be=2*Le,B7=Be+Le,fd=Number.POSITIVE_INFINITY,L7=Le/180,ot=Le/2,ls=Le/4,o2=Le*2/3,wi=Math.log10,dr=Math.sign;function Al(t,e,n){return Math.abs(t-e)<n}function a2(t){const e=Math.round(t);t=Al(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(wi(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function j7(t){const e=[],n=Math.sqrt(t);let r;for(r=1;r<n;r++)t%r===0&&(e.push(r),e.push(t/r));return n===(n|0)&&e.push(n),e.sort((i,s)=>i-s).pop(),e}function V7(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function ra(t){return!V7(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function z7(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function SS(t,e,n){let r,i,s;for(r=0,i=t.length;r<i;r++)s=t[r][n],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function jn(t){return t*(Le/180)}function dv(t){return t*(180/Le)}function l2(t){if(!Xe(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function TS(t,e){const n=e.x-t.x,r=e.y-t.y,i=Math.sqrt(n*n+r*r);let s=Math.atan2(r,n);return s<-.5*Le&&(s+=Be),{angle:s,distance:i}}function Um(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function U7(t,e){return(t-e+B7)%Be-Le}function gn(t){return(t%Be+Be)%Be}function cc(t,e,n,r){const i=gn(t),s=gn(e),o=gn(n),a=gn(s-i),l=gn(o-i),c=gn(i-s),u=gn(i-o);return i===s||i===o||r&&s===o||a>l&&c<u}function xt(t,e,n){return Math.max(e,Math.min(n,t))}function H7(t){return xt(t,-32768,32767)}function Rr(t,e,n,r=1e-6){return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function fv(t,e,n){n=n||(o=>t[o]<e);let r=t.length-1,i=0,s;for(;r-i>1;)s=i+r>>1,n(s)?i=s:r=s;return{lo:i,hi:r}}const Nr=(t,e,n,r)=>fv(t,n,r?i=>{const s=t[i][e];return s<n||s===n&&t[i+1][e]===n}:i=>t[i][e]<n),W7=(t,e,n)=>fv(t,n,r=>t[r][e]>=n);function $7(t,e,n){let r=0,i=t.length;for(;r<i&&t[r]<e;)r++;for(;i>r&&t[i-1]>n;)i--;return r>0||i<t.length?t.slice(r,i):t}const IS=["push","pop","shift","splice","unshift"];function q7(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),IS.forEach(n=>{const r="_onData"+hv(n),i=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...s){const o=i.apply(this,s);return t._chartjs.listeners.forEach(a=>{typeof a[r]=="function"&&a[r](...s)}),o}})})}function c2(t,e){const n=t._chartjs;if(!n)return;const r=n.listeners,i=r.indexOf(e);i!==-1&&r.splice(i,1),!(r.length>0)&&(IS.forEach(s=>{delete t[s]}),delete t._chartjs)}function kS(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const PS=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function DS(t,e){let n=[],r=!1;return function(...i){n=i,r||(r=!0,PS.call(window,()=>{r=!1,t.apply(e,n)}))}}function K7(t,e){let n;return function(...r){return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}const pv=t=>t==="start"?"left":t==="end"?"right":"center",Mt=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,G7=(t,e,n,r)=>t===(r?"left":"right")?n:t==="center"?(e+n)/2:e;function RS(t,e,n){const r=e.length;let i=0,s=r;if(t._sorted){const{iScale:o,vScale:a,_parsed:l}=t,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,u=o.axis,{min:d,max:f,minDefined:m,maxDefined:x}=o.getUserBounds();if(m){if(i=Math.min(Nr(l,u,d).lo,n?r:Nr(e,u,o.getPixelForValue(d)).lo),c){const y=l.slice(0,i+1).reverse().findIndex(w=>!pe(w[a.axis]));i-=Math.max(0,y)}i=xt(i,0,r-1)}if(x){let y=Math.max(Nr(l,o.axis,f,!0).hi+1,n?0:Nr(e,u,o.getPixelForValue(f),!0).hi+1);if(c){const w=l.slice(y-1).findIndex(v=>!pe(v[a.axis]));y+=Math.max(0,w)}s=xt(y,i,r)-i}else s=r-i}return{start:i,count:s}}function NS(t){const{xScale:e,yScale:n,_scaleRanges:r}=t,i={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!r)return t._scaleRanges=i,!0;const s=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,i),s}const Pu=t=>t===0||t===1,u2=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Be/n)),h2=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*Be/n)+1,Sl={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*ot)+1,easeOutSine:t=>Math.sin(t*ot),easeInOutSine:t=>-.5*(Math.cos(Le*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Pu(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Pu(t)?t:u2(t,.075,.3),easeOutElastic:t=>Pu(t)?t:h2(t,.075,.3),easeInOutElastic(t){return Pu(t)?t:t<.5?.5*u2(t*2,.1125,.45):.5+.5*h2(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-Sl.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?Sl.easeInBounce(t*2)*.5:Sl.easeOutBounce(t*2-1)*.5+.5};function mv(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function d2(t){return mv(t)?t:new oc(t)}function w0(t){return mv(t)?t:new oc(t).saturate(.5).darken(.1).hexString()}const Q7=["x","y","borderWidth","radius","tension"],Y7=["color","borderColor","backgroundColor"];function X7(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:Y7},numbers:{type:"number",properties:Q7}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function J7(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const f2=new Map;function Z7(t,e){e=e||{};const n=t+JSON.stringify(e);let r=f2.get(n);return r||(r=new Intl.NumberFormat(t,e),f2.set(n,r)),r}function Mc(t,e,n){return Z7(e,n).format(t)}const FS={values(t){return ze(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const r=this.chart.options.locale;let i,s=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(i="scientific"),s=eM(t,n)}const o=wi(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),Mc(t,r,l)},logarithmic(t,e,n){if(t===0)return"0";const r=n[e].significand||t/Math.pow(10,Math.floor(wi(t)));return[1,2,3,5,10,15].includes(r)||e>.8*n.length?FS.numeric.call(this,t,e,n):""}};function eM(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var df={formatters:FS};function tM(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:df.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Us=Object.create(null),Hm=Object.create(null);function Tl(t,e){if(!e)return t;const n=e.split(".");for(let r=0,i=n.length;r<i;++r){const s=n[r];t=t[s]||(t[s]=Object.create(null))}return t}function b0(t,e,n){return typeof e=="string"?ac(Tl(t,e),n):ac(Tl(t,""),e)}class nM{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,i)=>w0(i.backgroundColor),this.hoverBorderColor=(r,i)=>w0(i.borderColor),this.hoverColor=(r,i)=>w0(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return b0(this,e,n)}get(e){return Tl(this,e)}describe(e,n){return b0(Hm,e,n)}override(e,n){return b0(Us,e,n)}route(e,n,r,i){const s=Tl(this,e),o=Tl(this,r),a="_"+n;Object.defineProperties(s,{[a]:{value:s[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[i];return xe(l)?Object.assign({},c,l):he(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var Ue=new nM({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[X7,J7,tM]);function rM(t){return!t||pe(t.size)||pe(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function pd(t,e,n,r,i){let s=e[i];return s||(s=e[i]=t.measureText(i).width,n.push(i)),s>r&&(r=s),r}function iM(t,e,n,r){r=r||{};let i=r.data=r.data||{},s=r.garbageCollect=r.garbageCollect||[];r.font!==e&&(i=r.data={},s=r.garbageCollect=[],r.font=e),t.save(),t.font=e;let o=0;const a=n.length;let l,c,u,d,f;for(l=0;l<a;l++)if(d=n[l],d!=null&&!ze(d))o=pd(t,i,s,o,d);else if(ze(d))for(c=0,u=d.length;c<u;c++)f=d[c],f!=null&&!ze(f)&&(o=pd(t,i,s,o,f));t.restore();const m=s.length/2;if(m>n.length){for(l=0;l<m;l++)delete i[s[l]];s.splice(0,m)}return o}function cs(t,e,n){const r=t.currentDevicePixelRatio,i=n!==0?Math.max(n/2,.5):0;return Math.round((e-i)*r)/r+i}function p2(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function Wm(t,e,n,r){MS(t,e,n,r,null)}function MS(t,e,n,r,i){let s,o,a,l,c,u,d,f;const m=e.pointStyle,x=e.rotation,y=e.radius;let w=(x||0)*L7;if(m&&typeof m=="object"&&(s=m.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){t.save(),t.translate(n,r),t.rotate(w),t.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),t.restore();return}if(!(isNaN(y)||y<=0)){switch(t.beginPath(),m){default:i?t.ellipse(n,r,i/2,y,0,0,Be):t.arc(n,r,y,0,Be),t.closePath();break;case"triangle":u=i?i/2:y,t.moveTo(n+Math.sin(w)*u,r-Math.cos(w)*y),w+=o2,t.lineTo(n+Math.sin(w)*u,r-Math.cos(w)*y),w+=o2,t.lineTo(n+Math.sin(w)*u,r-Math.cos(w)*y),t.closePath();break;case"rectRounded":c=y*.516,l=y-c,o=Math.cos(w+ls)*l,d=Math.cos(w+ls)*(i?i/2-c:l),a=Math.sin(w+ls)*l,f=Math.sin(w+ls)*(i?i/2-c:l),t.arc(n-d,r-a,c,w-Le,w-ot),t.arc(n+f,r-o,c,w-ot,w),t.arc(n+d,r+a,c,w,w+ot),t.arc(n-f,r+o,c,w+ot,w+Le),t.closePath();break;case"rect":if(!x){l=Math.SQRT1_2*y,u=i?i/2:l,t.rect(n-u,r-l,2*u,2*l);break}w+=ls;case"rectRot":d=Math.cos(w)*(i?i/2:y),o=Math.cos(w)*y,a=Math.sin(w)*y,f=Math.sin(w)*(i?i/2:y),t.moveTo(n-d,r-a),t.lineTo(n+f,r-o),t.lineTo(n+d,r+a),t.lineTo(n-f,r+o),t.closePath();break;case"crossRot":w+=ls;case"cross":d=Math.cos(w)*(i?i/2:y),o=Math.cos(w)*y,a=Math.sin(w)*y,f=Math.sin(w)*(i?i/2:y),t.moveTo(n-d,r-a),t.lineTo(n+d,r+a),t.moveTo(n+f,r-o),t.lineTo(n-f,r+o);break;case"star":d=Math.cos(w)*(i?i/2:y),o=Math.cos(w)*y,a=Math.sin(w)*y,f=Math.sin(w)*(i?i/2:y),t.moveTo(n-d,r-a),t.lineTo(n+d,r+a),t.moveTo(n+f,r-o),t.lineTo(n-f,r+o),w+=ls,d=Math.cos(w)*(i?i/2:y),o=Math.cos(w)*y,a=Math.sin(w)*y,f=Math.sin(w)*(i?i/2:y),t.moveTo(n-d,r-a),t.lineTo(n+d,r+a),t.moveTo(n+f,r-o),t.lineTo(n-f,r+o);break;case"line":o=i?i/2:Math.cos(w)*y,a=Math.sin(w)*y,t.moveTo(n-o,r-a),t.lineTo(n+o,r+a);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(w)*(i?i/2:y),r+Math.sin(w)*y);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Fr(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function ff(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function pf(t){t.restore()}function sM(t,e,n,r,i){if(!e)return t.lineTo(n.x,n.y);if(i==="middle"){const s=(e.x+n.x)/2;t.lineTo(s,e.y),t.lineTo(s,n.y)}else i==="after"!=!!r?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function oM(t,e,n,r){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function aM(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),pe(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function lM(t,e,n,r,i){if(i.strikethrough||i.underline){const s=t.measureText(r),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,u=i.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=i.decorationWidth||2,t.moveTo(o,u),t.lineTo(a,u),t.stroke()}}function cM(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function Hs(t,e,n,r,i,s={}){const o=ze(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="";let l,c;for(t.save(),t.font=i.string,aM(t,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&cM(t,s.backdrop),a&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),pe(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(c,n,r,s.maxWidth)),t.fillText(c,n,r,s.maxWidth),lM(t,n,r,c,s),r+=Number(i.lineHeight);t.restore()}function uc(t,e){const{x:n,y:r,w:i,h:s,radius:o}=e;t.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*Le,Le,!0),t.lineTo(n,r+s-o.bottomLeft),t.arc(n+o.bottomLeft,r+s-o.bottomLeft,o.bottomLeft,Le,ot,!0),t.lineTo(n+i-o.bottomRight,r+s),t.arc(n+i-o.bottomRight,r+s-o.bottomRight,o.bottomRight,ot,0,!0),t.lineTo(n+i,r+o.topRight),t.arc(n+i-o.topRight,r+o.topRight,o.topRight,0,-ot,!0),t.lineTo(n+o.topLeft,r)}const uM=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,hM=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function dM(t,e){const n=(""+t).match(uM);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const fM=t=>+t||0;function gv(t,e){const n={},r=xe(e),i=r?Object.keys(e):e,s=xe(t)?r?o=>he(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of i)n[o]=fM(s(o));return n}function OS(t){return gv(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Ts(t){return gv(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Ht(t){const e=OS(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function ft(t,e){t=t||{},e=e||Ue.font;let n=he(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let r=he(t.style,e.style);r&&!(""+r).match(hM)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:he(t.family,e.family),lineHeight:dM(he(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:he(t.weight,e.weight),string:""};return i.string=rM(i),i}function il(t,e,n,r){let i,s,o;for(i=0,s=t.length;i<s;++i)if(o=t[i],o!==void 0&&o!==void 0)return o}function pM(t,e,n){const{min:r,max:i}=t,s=CS(e,(i-r)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(r,-Math.abs(s)),max:o(i,s)}}function Zi(t,e){return Object.assign(Object.create(t),e)}function xv(t,e=[""],n,r,i=()=>t[0]){const s=n||t;typeof r>"u"&&(r=VS("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:s,_fallback:r,_getTarget:i,override:a=>xv([a,...t],e,s,r)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return LS(a,l,()=>wM(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return g2(a).includes(l)},ownKeys(a){return g2(a)},set(a,l,c){const u=a._storage||(a._storage=i());return a[l]=u[l]=c,delete a._keys,!0}})}function ia(t,e,n,r){const i={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:BS(t,r),setContext:s=>ia(t,s,n,r),override:s=>ia(t.override(s),e,n,r)};return new Proxy(i,{deleteProperty(s,o){return delete s[o],delete t[o],!0},get(s,o,a){return LS(s,o,()=>gM(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(s,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(s,o,a){return t[o]=a,delete s[o],!0}})}function BS(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:i=e.allKeys}=t;return{allKeys:i,scriptable:n,indexable:r,isScriptable:qi(n)?n:()=>n,isIndexable:qi(r)?r:()=>r}}const mM=(t,e)=>t?t+hv(e):e,vv=(t,e)=>xe(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function LS(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const r=n();return t[e]=r,r}function gM(t,e,n){const{_proxy:r,_context:i,_subProxy:s,_descriptors:o}=t;let a=r[e];return qi(a)&&o.isScriptable(e)&&(a=xM(e,a,t,n)),ze(a)&&a.length&&(a=vM(e,a,t,o.isIndexable)),vv(e,a)&&(a=ia(a,i,s&&s[e],o)),a}function xM(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(s,o||r);return a.delete(t),vv(t,l)&&(l=yv(i._scopes,i,t,l)),l}function vM(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_descriptors:a}=n;if(typeof s.index<"u"&&r(t))return e[s.index%e.length];if(xe(e[0])){const l=e,c=i._scopes.filter(u=>u!==l);e=[];for(const u of l){const d=yv(c,i,t,u);e.push(ia(d,s,o&&o[t],a))}}return e}function jS(t,e,n){return qi(t)?t(e,n):t}const yM=(t,e)=>t===!0?e:typeof t=="string"?$i(e,t):void 0;function _M(t,e,n,r,i){for(const s of e){const o=yM(n,s);if(o){t.add(o);const a=jS(o._fallback,n,i);if(typeof a<"u"&&a!==n&&a!==r)return a}else if(o===!1&&typeof r<"u"&&n!==r)return null}return!1}function yv(t,e,n,r){const i=e._rootScopes,s=jS(e._fallback,n,r),o=[...t,...i],a=new Set;a.add(r);let l=m2(a,o,n,s||n,r);return l===null||typeof s<"u"&&s!==n&&(l=m2(a,o,s,l,r),l===null)?!1:xv(Array.from(a),[""],i,s,()=>EM(e,n,r))}function m2(t,e,n,r,i){for(;n;)n=_M(t,e,n,r,i);return n}function EM(t,e,n){const r=t._getTarget();e in r||(r[e]={});const i=r[e];return ze(i)&&xe(n)?n:i||{}}function wM(t,e,n,r){let i;for(const s of e)if(i=VS(mM(s,t),n),typeof i<"u")return vv(t,i)?yv(n,r,t,i):i}function VS(t,e){for(const n of e){if(!n)continue;const r=n[t];if(typeof r<"u")return r}}function g2(t){let e=t._keys;return e||(e=t._keys=bM(t._scopes)),e}function bM(t){const e=new Set;for(const n of t)for(const r of Object.keys(n).filter(i=>!i.startsWith("_")))e.add(r);return Array.from(e)}function zS(t,e,n,r){const{iScale:i}=t,{key:s="r"}=this._parsing,o=new Array(r);let a,l,c,u;for(a=0,l=r;a<l;++a)c=a+n,u=e[c],o[a]={r:i.parse($i(u,s),c)};return o}const CM=Number.EPSILON||1e-14,sa=(t,e)=>e<t.length&&!t[e].skip&&t[e],US=t=>t==="x"?"y":"x";function AM(t,e,n,r){const i=t.skip?e:t,s=e,o=n.skip?e:n,a=Um(s,i),l=Um(o,s);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const d=r*c,f=r*u;return{previous:{x:s.x-d*(o.x-i.x),y:s.y-d*(o.y-i.y)},next:{x:s.x+f*(o.x-i.x),y:s.y+f*(o.y-i.y)}}}function SM(t,e,n){const r=t.length;let i,s,o,a,l,c=sa(t,0);for(let u=0;u<r-1;++u)if(l=c,c=sa(t,u+1),!(!l||!c)){if(Al(e[u],0,CM)){n[u]=n[u+1]=0;continue}i=n[u]/e[u],s=n[u+1]/e[u],a=Math.pow(i,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),n[u]=i*o*e[u],n[u+1]=s*o*e[u])}}function TM(t,e,n="x"){const r=US(n),i=t.length;let s,o,a,l=sa(t,0);for(let c=0;c<i;++c){if(o=a,a=l,l=sa(t,c+1),!a)continue;const u=a[n],d=a[r];o&&(s=(u-o[n])/3,a[`cp1${n}`]=u-s,a[`cp1${r}`]=d-s*e[c]),l&&(s=(l[n]-u)/3,a[`cp2${n}`]=u+s,a[`cp2${r}`]=d+s*e[c])}}function IM(t,e="x"){const n=US(e),r=t.length,i=Array(r).fill(0),s=Array(r);let o,a,l,c=sa(t,0);for(o=0;o<r;++o)if(a=l,l=c,c=sa(t,o+1),!!l){if(c){const u=c[e]-l[e];i[o]=u!==0?(c[n]-l[n])/u:0}s[o]=a?c?dr(i[o-1])!==dr(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}SM(t,i,s),TM(t,s,e)}function Du(t,e,n){return Math.max(Math.min(t,n),e)}function kM(t,e){let n,r,i,s,o,a=Fr(t[0],e);for(n=0,r=t.length;n<r;++n)o=s,s=a,a=n<r-1&&Fr(t[n+1],e),s&&(i=t[n],o&&(i.cp1x=Du(i.cp1x,e.left,e.right),i.cp1y=Du(i.cp1y,e.top,e.bottom)),a&&(i.cp2x=Du(i.cp2x,e.left,e.right),i.cp2y=Du(i.cp2y,e.top,e.bottom)))}function PM(t,e,n,r,i){let s,o,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")IM(t,i);else{let c=r?t[t.length-1]:t[0];for(s=0,o=t.length;s<o;++s)a=t[s],l=AM(c,a,t[Math.min(s+1,o-(r?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&kM(t,n)}function _v(){return typeof window<"u"&&typeof document<"u"}function Ev(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function md(t,e,n){let r;return typeof t=="string"?(r=parseInt(t,10),t.indexOf("%")!==-1&&(r=r/100*e.parentNode[n])):r=t,r}const mf=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function DM(t,e){return mf(t).getPropertyValue(e)}const RM=["top","right","bottom","left"];function Is(t,e,n){const r={};n=n?"-"+n:"";for(let i=0;i<4;i++){const s=RM[i];r[s]=parseFloat(t[e+"-"+s+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const NM=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function FM(t,e){const n=t.touches,r=n&&n.length?n[0]:t,{offsetX:i,offsetY:s}=r;let o=!1,a,l;if(NM(i,s,t.target))a=i,l=s;else{const c=e.getBoundingClientRect();a=r.clientX-c.left,l=r.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function ms(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:r}=e,i=mf(n),s=i.boxSizing==="border-box",o=Is(i,"padding"),a=Is(i,"border","width"),{x:l,y:c,box:u}=FM(t,n),d=o.left+(u&&a.left),f=o.top+(u&&a.top);let{width:m,height:x}=e;return s&&(m-=o.width+a.width,x-=o.height+a.height),{x:Math.round((l-d)/m*n.width/r),y:Math.round((c-f)/x*n.height/r)}}function MM(t,e,n){let r,i;if(e===void 0||n===void 0){const s=t&&Ev(t);if(!s)e=t.clientWidth,n=t.clientHeight;else{const o=s.getBoundingClientRect(),a=mf(s),l=Is(a,"border","width"),c=Is(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,r=md(a.maxWidth,s,"clientWidth"),i=md(a.maxHeight,s,"clientHeight")}}return{width:e,height:n,maxWidth:r||fd,maxHeight:i||fd}}const Ru=t=>Math.round(t*10)/10;function OM(t,e,n,r){const i=mf(t),s=Is(i,"margin"),o=md(i.maxWidth,t,"clientWidth")||fd,a=md(i.maxHeight,t,"clientHeight")||fd,l=MM(t,e,n);let{width:c,height:u}=l;if(i.boxSizing==="content-box"){const f=Is(i,"border","width"),m=Is(i,"padding");c-=m.width+f.width,u-=m.height+f.height}return c=Math.max(0,c-s.width),u=Math.max(0,r?c/r:u-s.height),c=Ru(Math.min(c,o,l.maxWidth)),u=Ru(Math.min(u,a,l.maxHeight)),c&&!u&&(u=Ru(c/2)),(e!==void 0||n!==void 0)&&r&&l.height&&u>l.height&&(u=l.height,c=Ru(Math.floor(u*r))),{width:c,height:u}}function x2(t,e,n){const r=e||1,i=Math.floor(t.height*r),s=Math.floor(t.width*r);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==r||o.height!==i||o.width!==s?(t.currentDevicePixelRatio=r,o.height=i,o.width=s,t.ctx.setTransform(r,0,0,r,0,0),!0):!1}const BM=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};_v()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function v2(t,e){const n=DM(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function gs(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function LM(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:r==="middle"?n<.5?t.y:e.y:r==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function jM(t,e,n,r){const i={x:t.cp2x,y:t.cp2y},s={x:e.cp1x,y:e.cp1y},o=gs(t,i,n),a=gs(i,s,n),l=gs(s,e,n),c=gs(o,a,n),u=gs(a,l,n);return gs(c,u,n)}const VM=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},zM=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function zo(t,e,n){return t?VM(e,n):zM()}function HS(t,e){let n,r;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function WS(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function $S(t){return t==="angle"?{between:cc,compare:U7,normalize:gn}:{between:Rr,compare:(e,n)=>e-n,normalize:e=>e}}function y2({start:t,end:e,count:n,loop:r,style:i}){return{start:t%n,end:e%n,loop:r&&(e-t+1)%n===0,style:i}}function UM(t,e,n){const{property:r,start:i,end:s}=n,{between:o,normalize:a}=$S(r),l=e.length;let{start:c,end:u,loop:d}=t,f,m;if(d){for(c+=l,u+=l,f=0,m=l;f<m&&o(a(e[c%l][r]),i,s);++f)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:d,style:t.style}}function qS(t,e,n){if(!n)return[t];const{property:r,start:i,end:s}=n,o=e.length,{compare:a,between:l,normalize:c}=$S(r),{start:u,end:d,loop:f,style:m}=UM(t,e,n),x=[];let y=!1,w=null,v,g,_;const A=()=>l(i,_,v)&&a(i,_)!==0,P=()=>a(s,v)===0||l(s,_,v),D=()=>y||A(),C=()=>!y||P();for(let b=u,k=u;b<=d;++b)g=e[b%o],!g.skip&&(v=c(g[r]),v!==_&&(y=l(v,i,s),w===null&&D()&&(w=a(v,i)===0?b:k),w!==null&&C()&&(x.push(y2({start:w,end:b,loop:f,count:o,style:m})),w=null),k=b,_=v));return w!==null&&x.push(y2({start:w,end:d,loop:f,count:o,style:m})),x}function KS(t,e){const n=[],r=t.segments;for(let i=0;i<r.length;i++){const s=qS(r[i],t.points,e);s.length&&n.push(...s)}return n}function HM(t,e,n,r){let i=0,s=e-1;if(n&&!r)for(;i<e&&!t[i].skip;)i++;for(;i<e&&t[i].skip;)i++;for(i%=e,n&&(s+=i);s>i&&t[s%e].skip;)s--;return s%=e,{start:i,end:s}}function WM(t,e,n,r){const i=t.length,s=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%i];c.skip||c.stop?a.skip||(r=!1,s.push({start:e%i,end:(l-1)%i,loop:r}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&s.push({start:e%i,end:o%i,loop:r}),s}function $M(t,e){const n=t.points,r=t.options.spanGaps,i=n.length;if(!i)return[];const s=!!t._loop,{start:o,end:a}=HM(n,i,s,r);if(r===!0)return _2(t,[{start:o,end:a,loop:s}],n,e);const l=a<o?a+i:a,c=!!t._fullLoop&&o===0&&a===i-1;return _2(t,WM(n,o,l,c),n,e)}function _2(t,e,n,r){return!r||!r.setContext||!n?e:qM(t,e,n,r)}function qM(t,e,n,r){const i=t._chart.getContext(),s=E2(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let u=s,d=e[0].start,f=d;function m(x,y,w,v){const g=a?-1:1;if(x!==y){for(x+=l;n[x%l].skip;)x-=g;for(;n[y%l].skip;)y+=g;x%l!==y%l&&(c.push({start:x%l,end:y%l,loop:w,style:v}),u=v,d=y%l)}}for(const x of e){d=a?d:x.start;let y=n[d%l],w;for(f=d+1;f<=x.end;f++){const v=n[f%l];w=E2(r.setContext(Zi(i,{type:"segment",p0:y,p1:v,p0DataIndex:(f-1)%l,p1DataIndex:f%l,datasetIndex:o}))),KM(w,u)&&m(d,f-1,x.loop,u),y=v,u=w}d<f-1&&m(d,f-1,x.loop,u)}return c}function E2(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function KM(t,e){if(!e)return!1;const n=[],r=function(i,s){return mv(s)?(n.includes(s)||n.push(s),n.indexOf(s)):s};return JSON.stringify(t,r)!==JSON.stringify(e,r)}/*!
 * Chart.js v4.4.8
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class GM{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,r,i){const s=n.listeners[i],o=n.duration;s.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(r-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=PS.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((r,i)=>{if(!r.running||!r.items.length)return;const s=r.items;let o=s.length-1,a=!1,l;for(;o>=0;--o)l=s[o],l._active?(l._total>r.duration&&(r.duration=l._total),l.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(i.draw(),this._notify(i,r,e,"progress")),s.length||(r.running=!1,this._notify(i,r,e,"complete"),r.initial=!1),n+=s.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let r=n.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,r)),r}listen(e,n,r){this._getAnims(e).listeners[n].push(r)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,i)=>Math.max(r,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const r=n.items;let i=r.length-1;for(;i>=0;--i)r[i].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Er=new GM;const w2="transparent",QM={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const r=d2(t||w2),i=r.valid&&d2(e||w2);return i&&i.valid?i.mix(r,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class YM{constructor(e,n,r,i){const s=n[r];i=il([e.to,i,s,e.from]);const o=il([e.from,s,i]);this._active=!0,this._fn=e.fn||QM[e.type||typeof o],this._easing=Sl[e.easing]||Sl.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=r,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(e,n,r){if(this._active){this._notify(!1);const i=this._target[this._prop],s=r-this._start,o=this._duration-s;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=il([e.to,n,i,e.from]),this._from=il([e.from,i,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,r=this._duration,i=this._prop,s=this._from,o=this._loop,a=this._to;let l;if(this._active=s!==a&&(o||n<r),!this._active){this._target[i]=a,this._notify(!0);return}if(n<0){this._target[i]=s;return}l=n/r%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[i]=this._fn(s,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,r)=>{e.push({res:n,rej:r})})}_notify(e){const n=e?"res":"rej",r=this._promises||[];for(let i=0;i<r.length;i++)r[i][n]()}}class GS{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!xe(e))return;const n=Object.keys(Ue.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const s=e[i];if(!xe(s))return;const o={};for(const a of n)o[a]=s[a];(ze(s.properties)&&s.properties||[i]).forEach(a=>{(a===i||!r.has(a))&&r.set(a,o)})})}_animateOptions(e,n){const r=n.options,i=JM(e,r);if(!i)return[];const s=this._createAnimations(i,r);return r.$shared&&XM(e.options.$animations,r).then(()=>{e.options=r},()=>{}),s}_createAnimations(e,n){const r=this._properties,i=[],s=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){i.push(...this._animateOptions(e,n));continue}const u=n[c];let d=s[c];const f=r.get(c);if(d)if(f&&d.active()){d.update(f,u,a);continue}else d.cancel();if(!f||!f.duration){e[c]=u;continue}s[c]=d=new YM(f,e,c,u),i.push(d)}return i}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const r=this._createAnimations(e,n);if(r.length)return Er.add(this._chart,r),!0}}function XM(t,e){const n=[],r=Object.keys(e);for(let i=0;i<r.length;i++){const s=t[r[i]];s&&s.active()&&n.push(s.wait())}return Promise.all(n)}function JM(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function b2(t,e){const n=t&&t.options||{},r=n.reverse,i=n.min===void 0?e:0,s=n.max===void 0?e:0;return{start:r?s:i,end:r?i:s}}function ZM(t,e,n){if(n===!1)return!1;const r=b2(t,n),i=b2(e,n);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}function eO(t){let e,n,r,i;return xe(t)?(e=t.top,n=t.right,r=t.bottom,i=t.left):e=n=r=i=t,{top:e,right:n,bottom:r,left:i,disabled:t===!1}}function QS(t,e){const n=[],r=t._getSortedDatasetMetas(e);let i,s;for(i=0,s=r.length;i<s;++i)n.push(r[i].index);return n}function C2(t,e,n,r={}){const i=t.keys,s=r.mode==="single";let o,a,l,c;if(e===null)return;let u=!1;for(o=0,a=i.length;o<a;++o){if(l=+i[o],l===n){if(u=!0,r.all)continue;break}c=t.values[l],Xe(c)&&(s||e===0||dr(e)===dr(c))&&(e+=c)}return!u&&!r.all?0:e}function tO(t,e){const{iScale:n,vScale:r}=e,i=n.axis==="x"?"x":"y",s=r.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[i]:u,[s]:t[u]};return a}function C0(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function nO(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function rO(t){const{min:e,max:n,minDefined:r,maxDefined:i}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}function iO(t,e,n){const r=t[e]||(t[e]={});return r[n]||(r[n]={})}function A2(t,e,n,r){for(const i of e.getMatchingVisibleMetas(r).reverse()){const s=t[i.index];if(n&&s>0||!n&&s<0)return i.index}return null}function S2(t,e){const{chart:n,_cachedMeta:r}=t,i=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=r,l=s.axis,c=o.axis,u=nO(s,o,r),d=e.length;let f;for(let m=0;m<d;++m){const x=e[m],{[l]:y,[c]:w}=x,v=x._stacks||(x._stacks={});f=v[c]=iO(i,u,y),f[a]=w,f._top=A2(f,o,!0,r.type),f._bottom=A2(f,o,!1,r.type);const g=f._visualValues||(f._visualValues={});g[a]=w}}function A0(t,e){const n=t.scales;return Object.keys(n).filter(r=>n[r].axis===e).shift()}function sO(t,e){return Zi(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function oO(t,e,n){return Zi(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function Ua(t,e){const n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const i of e){const s=i._stacks;if(!s||s[r]===void 0||s[r][n]===void 0)return;delete s[r][n],s[r]._visualValues!==void 0&&s[r]._visualValues[n]!==void 0&&delete s[r]._visualValues[n]}}}const S0=t=>t==="reset"||t==="none",T2=(t,e)=>e?t:Object.assign({},t),aO=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:QS(n,!0),values:null};class Hn{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=C0(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Ua(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,r=this.getDataset(),i=(d,f,m,x)=>d==="x"?f:d==="r"?x:m,s=n.xAxisID=he(r.xAxisID,A0(e,"x")),o=n.yAxisID=he(r.yAxisID,A0(e,"y")),a=n.rAxisID=he(r.rAxisID,A0(e,"r")),l=n.indexAxis,c=n.iAxisID=i(l,s,o,a),u=n.vAxisID=i(l,o,s,a);n.xScale=this.getScaleForId(s),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&c2(this._data,this),e._stacked&&Ua(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),r=this._data;if(xe(n)){const i=this._cachedMeta;this._data=tO(n,i)}else if(r!==n){if(r){c2(r,this);const i=this._cachedMeta;Ua(i),i._parsed=[]}n&&Object.isExtensible(n)&&q7(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,r=this.getDataset();let i=!1;this._dataCheck();const s=n._stacked;n._stacked=C0(n.vScale,n),n.stack!==r.stack&&(i=!0,Ua(n),n.stack=r.stack),this._resyncElements(e),(i||s!==n._stacked)&&(S2(this,n._parsed),n._stacked=C0(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:r,_data:i}=this,{iScale:s,_stacked:o}=r,a=s.axis;let l=e===0&&n===i.length?!0:r._sorted,c=e>0&&r._parsed[e-1],u,d,f;if(this._parsing===!1)r._parsed=i,r._sorted=!0,f=i;else{ze(i[e])?f=this.parseArrayData(r,i,e,n):xe(i[e])?f=this.parseObjectData(r,i,e,n):f=this.parsePrimitiveData(r,i,e,n);const m=()=>d[a]===null||c&&d[a]<c[a];for(u=0;u<n;++u)r._parsed[u+e]=d=f[u],l&&(m()&&(l=!1),c=d);r._sorted=l}o&&S2(this,f)}parsePrimitiveData(e,n,r,i){const{iScale:s,vScale:o}=e,a=s.axis,l=o.axis,c=s.getLabels(),u=s===o,d=new Array(i);let f,m,x;for(f=0,m=i;f<m;++f)x=f+r,d[f]={[a]:u||s.parse(c[x],x),[l]:o.parse(n[x],x)};return d}parseArrayData(e,n,r,i){const{xScale:s,yScale:o}=e,a=new Array(i);let l,c,u,d;for(l=0,c=i;l<c;++l)u=l+r,d=n[u],a[l]={x:s.parse(d[0],u),y:o.parse(d[1],u)};return a}parseObjectData(e,n,r,i){const{xScale:s,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(i);let u,d,f,m;for(u=0,d=i;u<d;++u)f=u+r,m=n[f],c[u]={x:s.parse($i(m,a),f),y:o.parse($i(m,l),f)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,r){const i=this.chart,s=this._cachedMeta,o=n[e.axis],a={keys:QS(i,!0),values:n._stacks[e.axis]._visualValues};return C2(a,o,s.index,{mode:r})}updateRangeFromParsed(e,n,r,i){const s=r[n.axis];let o=s===null?NaN:s;const a=i&&r._stacks[n.axis];i&&a&&(i.values=a,o=C2(i,s,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const r=this._cachedMeta,i=r._parsed,s=r._sorted&&e===r.iScale,o=i.length,a=this._getOtherScale(e),l=aO(n,r,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:d}=rO(a);let f,m;function x(){m=i[f];const y=m[a.axis];return!Xe(m[e.axis])||u>y||d<y}for(f=0;f<o&&!(!x()&&(this.updateRangeFromParsed(c,e,m,l),s));++f);if(s){for(f=o-1;f>=0;--f)if(!x()){this.updateRangeFromParsed(c,e,m,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,r=[];let i,s,o;for(i=0,s=n.length;i<s;++i)o=n[i][e.axis],Xe(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,r=n.iScale,i=n.vScale,s=this.getParsed(e);return{label:r?""+r.getLabelForValue(s[r.axis]):"",value:i?""+i.getLabelForValue(s[i.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=eO(he(this.options.clip,ZM(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,r=this._cachedMeta,i=r.data||[],s=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||i.length-a,c=this.options.drawActiveElementsOnTop;let u;for(r.dataset&&r.dataset.draw(e,s,a,l),u=a;u<a+l;++u){const d=i[u];d.hidden||(d.active&&c?o.push(d):d.draw(e,s))}for(u=0;u<o.length;++u)o[u].draw(e,s)}getStyle(e,n){const r=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,n,r){const i=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];s=o.$context||(o.$context=oO(this.getContext(),e,o)),s.parsed=this.getParsed(e),s.raw=i.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=sO(this.chart.getContext(),this.index)),s.dataset=i,s.index=s.datasetIndex=this.index;return s.active=!!n,s.mode=r,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",r){const i=n==="active",s=this._cachedDataOpts,o=e+"-"+n,a=s[o],l=this.enableOptionSharing&&lc(r);if(a)return T2(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,e),d=i?[`${e}Hover`,"hover",e,""]:[e,""],f=c.getOptionScopes(this.getDataset(),u),m=Object.keys(Ue.elements[e]),x=()=>this.getContext(r,i,n),y=c.resolveNamedOptions(f,m,x,d);return y.$shared&&(y.$shared=l,s[o]=Object.freeze(T2(y,l))),y}_resolveAnimations(e,n,r){const i=this.chart,s=this._cachedDataOpts,o=`animation-${n}`,a=s[o];if(a)return a;let l;if(i.options.animation!==!1){const u=this.chart.config,d=u.datasetAnimationScopeKeys(this._type,n),f=u.getOptionScopes(this.getDataset(),d);l=u.createResolver(f,this.getContext(e,r,n))}const c=new GS(i,l&&l.animations);return l&&l._cacheable&&(s[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||S0(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const r=this.resolveDataElementOptions(e,n),i=this._sharedOptions,s=this.getSharedOptions(r),o=this.includeOptions(n,s)||s!==i;return this.updateSharedOptions(s,n,r),{sharedOptions:s,includeOptions:o}}updateElement(e,n,r,i){S0(i)?Object.assign(e,r):this._resolveAnimations(n,i).update(e,r)}updateSharedOptions(e,n,r){e&&!S0(n)&&this._resolveAnimations(void 0,n).update(e,r)}_setStyle(e,n,r,i){e.active=i;const s=this.getStyle(n,i);this._resolveAnimations(n,r,i).update(e,{options:!i&&this.getSharedOptions(s)||s})}removeHoverStyle(e,n,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,n,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,r=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const i=r.length,s=n.length,o=Math.min(s,i);o&&this.parse(0,o),s>i?this._insertElements(i,s-i,e):s<i&&this._removeElements(s,i-s)}_insertElements(e,n,r=!0){const i=this._cachedMeta,s=i.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(s),a=e;a<o;++a)s[a]=new this.dataElementType;this._parsing&&l(i._parsed),this.parse(e,n),r&&this.updateElements(s,e,n,"reset")}updateElements(e,n,r,i){}_removeElements(e,n){const r=this._cachedMeta;if(this._parsing){const i=r._parsed.splice(e,n);r._stacked&&Ua(r,i)}r.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,r,i]=e;this[n](r,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}Z(Hn,"defaults",{}),Z(Hn,"datasetElementType",null),Z(Hn,"dataElementType",null);function lO(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let r=[];for(let i=0,s=n.length;i<s;i++)r=r.concat(n[i].controller.getAllParsedValues(t));t._cache.$bar=kS(r.sort((i,s)=>i-s))}return t._cache.$bar}function cO(t){const e=t.iScale,n=lO(e,t.type);let r=e._length,i,s,o,a;const l=()=>{o===32767||o===-32768||(lc(a)&&(r=Math.min(r,Math.abs(o-a)||r)),a=o)};for(i=0,s=n.length;i<s;++i)o=e.getPixelForValue(n[i]),l();for(a=void 0,i=0,s=e.ticks.length;i<s;++i)o=e.getPixelForTick(i),l();return r}function uO(t,e,n,r){const i=n.barThickness;let s,o;return pe(i)?(s=e.min*n.categoryPercentage,o=n.barPercentage):(s=i*r,o=1),{chunk:s/r,ratio:o,start:e.pixels[t]-s/2}}function hO(t,e,n,r){const i=e.pixels,s=i[t];let o=t>0?i[t-1]:null,a=t<i.length-1?i[t+1]:null;const l=n.categoryPercentage;o===null&&(o=s-(a===null?e.end-e.start:a-s)),a===null&&(a=s+s-o);const c=s-(s-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/r,ratio:n.barPercentage,start:c}}function dO(t,e,n,r){const i=n.parse(t[0],r),s=n.parse(t[1],r),o=Math.min(i,s),a=Math.max(i,s);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),e[n.axis]=c,e._custom={barStart:l,barEnd:c,start:i,end:s,min:o,max:a}}function YS(t,e,n,r){return ze(t)?dO(t,e,n,r):e[n.axis]=n.parse(t,r),e}function I2(t,e,n,r){const i=t.iScale,s=t.vScale,o=i.getLabels(),a=i===s,l=[];let c,u,d,f;for(c=n,u=n+r;c<u;++c)f=e[c],d={},d[i.axis]=a||i.parse(o[c],c),l.push(YS(f,d,s,c));return l}function T0(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function fO(t,e,n){return t!==0?dr(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function pO(t){let e,n,r,i,s;return t.horizontal?(e=t.base>t.x,n="left",r="right"):(e=t.base<t.y,n="bottom",r="top"),e?(i="end",s="start"):(i="start",s="end"),{start:n,end:r,reverse:e,top:i,bottom:s}}function mO(t,e,n,r){let i=e.borderSkipped;const s={};if(!i){t.borderSkipped=s;return}if(i===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:c,bottom:u}=pO(t);i==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===r?i=c:(n._bottom||0)===r?i=u:(s[k2(u,o,a,l)]=!0,i=c)),s[k2(i,o,a,l)]=!0,t.borderSkipped=s}function k2(t,e,n,r){return r?(t=gO(t,e,n),t=P2(t,n,e)):t=P2(t,e,n),t}function gO(t,e,n){return t===e?n:t===n?e:t}function P2(t,e,n){return t==="start"?e:t==="end"?n:t}function xO(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class uh extends Hn{parsePrimitiveData(e,n,r,i){return I2(e,n,r,i)}parseArrayData(e,n,r,i){return I2(e,n,r,i)}parseObjectData(e,n,r,i){const{iScale:s,vScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=s.axis==="x"?a:l,u=o.axis==="x"?a:l,d=[];let f,m,x,y;for(f=r,m=r+i;f<m;++f)y=n[f],x={},x[s.axis]=s.parse($i(y,c),f),d.push(YS($i(y,u),x,o,f));return d}updateRangeFromParsed(e,n,r,i){super.updateRangeFromParsed(e,n,r,i);const s=r._custom;s&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,s.min),e.max=Math.max(e.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:r,vScale:i}=n,s=this.getParsed(e),o=s._custom,a=T0(o)?"["+o.start+", "+o.end+"]":""+i.getLabelForValue(s[i.axis]);return{label:""+r.getLabelForValue(s[r.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,r,i){const s=i==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),u=this._getRuler(),{sharedOptions:d,includeOptions:f}=this._getSharedOptions(n,i);for(let m=n;m<n+r;m++){const x=this.getParsed(m),y=s||pe(x[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(m),w=this._calculateBarIndexPixels(m,u),v=(x._stacks||{})[a.axis],g={horizontal:c,base:y.base,enableBorderRadius:!v||T0(x._custom)||o===v._top||o===v._bottom,x:c?y.head:w.center,y:c?w.center:y.head,height:c?w.size:Math.abs(y.size),width:c?Math.abs(y.size):w.size};f&&(g.options=d||this.resolveDataElementOptions(m,e[m].active?"active":i));const _=g.options||e[m].options;mO(g,_,v,o),xO(g,_,u.ratio),this.updateElement(e[m],m,g,i)}}_getStacks(e,n){const{iScale:r}=this._cachedMeta,i=r.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),s=r.options.stacked,o=[],a=this._cachedMeta.controller.getParsed(n),l=a&&a[r.axis],c=u=>{const d=u._parsed.find(m=>m[r.axis]===l),f=d&&d[u.vScale.axis];if(pe(f)||isNaN(f))return!0};for(const u of i)if(!(n!==void 0&&c(u))&&((s===!1||o.indexOf(u.stack)===-1||s===void 0&&u.stack===void 0)&&o.push(u.stack),u.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,n,r){const i=this._getStacks(e,r),s=n!==void 0?i.indexOf(n):-1;return s===-1?i.length-1:s}_getRuler(){const e=this.options,n=this._cachedMeta,r=n.iScale,i=[];let s,o;for(s=0,o=n.data.length;s<o;++s)i.push(r.getPixelForValue(this.getParsed(s)[r.axis],s));const a=e.barThickness;return{min:a||cO(n),pixels:i,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:r,index:i},options:{base:s,minBarLength:o}}=this,a=s||0,l=this.getParsed(e),c=l._custom,u=T0(c);let d=l[n.axis],f=0,m=r?this.applyStack(n,l,r):d,x,y;m!==d&&(f=m-d,m=d),u&&(d=c.barStart,m=c.barEnd-c.barStart,d!==0&&dr(d)!==dr(c.barEnd)&&(f=0),f+=d);const w=!pe(s)&&!u?s:f;let v=n.getPixelForValue(w);if(this.chart.getDataVisibility(e)?x=n.getPixelForValue(f+m):x=v,y=x-v,Math.abs(y)<o){y=fO(y,n,a)*o,d===a&&(v-=y/2);const g=n.getPixelForDecimal(0),_=n.getPixelForDecimal(1),A=Math.min(g,_),P=Math.max(g,_);v=Math.max(Math.min(v,P),A),x=v+y,r&&!u&&(l._stacks[n.axis]._visualValues[i]=n.getValueForPixel(x)-n.getValueForPixel(v))}if(v===n.getPixelForValue(a)){const g=dr(y)*n.getLineWidthForValue(a)/2;v+=g,y-=g}return{size:y,base:v,head:x,center:x+y/2}}_calculateBarIndexPixels(e,n){const r=n.scale,i=this.options,s=i.skipNull,o=he(i.maxBarThickness,1/0);let a,l;if(n.grouped){const c=s?this._getStackCount(e):n.stackCount,u=i.barThickness==="flex"?hO(e,n,i,c):uO(e,n,i,c),d=this._getStackIndex(this.index,this._cachedMeta.stack,s?e:void 0);a=u.start+u.chunk*d+u.chunk/2,l=Math.min(o,u.chunk*u.ratio)}else a=r.getPixelForValue(this.getParsed(e)[r.axis],e),l=Math.min(o,n.min*n.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,n=e.vScale,r=e.data,i=r.length;let s=0;for(;s<i;++s)this.getParsed(s)[n.axis]!==null&&!r[s].hidden&&r[s].draw(this._ctx)}}Z(uh,"id","bar"),Z(uh,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),Z(uh,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class hh extends Hn{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,n,r,i){const s=super.parsePrimitiveData(e,n,r,i);for(let o=0;o<s.length;o++)s[o]._custom=this.resolveDataElementOptions(o+r).radius;return s}parseArrayData(e,n,r,i){const s=super.parseArrayData(e,n,r,i);for(let o=0;o<s.length;o++){const a=n[r+o];s[o]._custom=he(a[2],this.resolveDataElementOptions(o+r).radius)}return s}parseObjectData(e,n,r,i){const s=super.parseObjectData(e,n,r,i);for(let o=0;o<s.length;o++){const a=n[r+o];s[o]._custom=he(a&&a.r&&+a.r,this.resolveDataElementOptions(o+r).radius)}return s}getMaxOverflow(){const e=this._cachedMeta.data;let n=0;for(let r=e.length-1;r>=0;--r)n=Math.max(n,e[r].size(this.resolveDataElementOptions(r))/2);return n>0&&n}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart.data.labels||[],{xScale:i,yScale:s}=n,o=this.getParsed(e),a=i.getLabelForValue(o.x),l=s.getLabelForValue(o.y),c=o._custom;return{label:r[e]||"",value:"("+a+", "+l+(c?", "+c:"")+")"}}update(e){const n=this._cachedMeta.data;this.updateElements(n,0,n.length,e)}updateElements(e,n,r,i){const s=i==="reset",{iScale:o,vScale:a}=this._cachedMeta,{sharedOptions:l,includeOptions:c}=this._getSharedOptions(n,i),u=o.axis,d=a.axis;for(let f=n;f<n+r;f++){const m=e[f],x=!s&&this.getParsed(f),y={},w=y[u]=s?o.getPixelForDecimal(.5):o.getPixelForValue(x[u]),v=y[d]=s?a.getBasePixel():a.getPixelForValue(x[d]);y.skip=isNaN(w)||isNaN(v),c&&(y.options=l||this.resolveDataElementOptions(f,m.active?"active":i),s&&(y.options.radius=0)),this.updateElement(m,f,y,i)}}resolveDataElementOptions(e,n){const r=this.getParsed(e);let i=super.resolveDataElementOptions(e,n);i.$shared&&(i=Object.assign({},i,{$shared:!1}));const s=i.radius;return n!=="active"&&(i.radius=0),i.radius+=he(r&&r._custom,s),i}}Z(hh,"id","bubble"),Z(hh,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),Z(hh,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function vO(t,e,n){let r=1,i=1,s=0,o=0;if(e<Be){const a=t,l=a+e,c=Math.cos(a),u=Math.sin(a),d=Math.cos(l),f=Math.sin(l),m=(_,A,P)=>cc(_,a,l,!0)?1:Math.max(A,A*n,P,P*n),x=(_,A,P)=>cc(_,a,l,!0)?-1:Math.min(A,A*n,P,P*n),y=m(0,c,d),w=m(ot,u,f),v=x(Le,c,d),g=x(Le+ot,u,f);r=(y-v)/2,i=(w-g)/2,s=-(y+v)/2,o=-(w+g)/2}return{ratioX:r,ratioY:i,offsetX:s,offsetY:o}}class ws extends Hn{constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const r=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=r;else{let s=l=>+r[l];if(xe(r[e])){const{key:l="value"}=this._parsing;s=c=>+$i(r[c],l)}let o,a;for(o=e,a=e+n;o<a;++o)i._parsed[o]=s(o)}}_getRotation(){return jn(this.options.rotation-90)}_getCircumference(){return jn(this.options.circumference)}_getRotationExtents(){let e=Be,n=-Be;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const i=this.chart.getDatasetMeta(r).controller,s=i._getRotation(),o=i._getCircumference();e=Math.min(e,s),n=Math.max(n,s+o)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:r}=n,i=this._cachedMeta,s=i.data,o=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,a=Math.max((Math.min(r.width,r.height)-o)/2,0),l=Math.min(D7(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:u,rotation:d}=this._getRotationExtents(),{ratioX:f,ratioY:m,offsetX:x,offsetY:y}=vO(d,u,l),w=(r.width-o)/f,v=(r.height-o)/m,g=Math.max(Math.min(w,v)/2,0),_=CS(this.options.radius,g),A=Math.max(_*l,0),P=(_-A)/this._getVisibleDatasetWeightTotal();this.offsetX=x*_,this.offsetY=y*_,i.total=this.calculateTotal(),this.outerRadius=_-P*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-P*c,0),this.updateElements(s,0,s.length,e)}_circumference(e,n){const r=this.options,i=this._cachedMeta,s=this._getCircumference();return n&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||i._parsed[e]===null||i.data[e].hidden?0:this.calculateCircumference(i._parsed[e]*s/Be)}updateElements(e,n,r,i){const s=i==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,u=(a.left+a.right)/2,d=(a.top+a.bottom)/2,f=s&&c.animateScale,m=f?0:this.innerRadius,x=f?0:this.outerRadius,{sharedOptions:y,includeOptions:w}=this._getSharedOptions(n,i);let v=this._getRotation(),g;for(g=0;g<n;++g)v+=this._circumference(g,s);for(g=n;g<n+r;++g){const _=this._circumference(g,s),A=e[g],P={x:u+this.offsetX,y:d+this.offsetY,startAngle:v,endAngle:v+_,circumference:_,outerRadius:x,innerRadius:m};w&&(P.options=y||this.resolveDataElementOptions(g,A.active?"active":i)),v+=_,this.updateElement(A,g,P,i)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let r=0,i;for(i=0;i<n.length;i++){const s=e._parsed[i];s!==null&&!isNaN(s)&&this.chart.getDataVisibility(i)&&!n[i].hidden&&(r+=Math.abs(s))}return r}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?Be*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart,i=r.data.labels||[],s=Mc(n._parsed[e],r.options.locale);return{label:i[e]||"",value:s}}getMaxBorderWidth(e){let n=0;const r=this.chart;let i,s,o,a,l;if(!e){for(i=0,s=r.data.datasets.length;i<s;++i)if(r.isDatasetVisible(i)){o=r.getDatasetMeta(i),e=o.data,a=o.controller;break}}if(!e)return 0;for(i=0,s=e.length;i<s;++i)l=a.resolveDataElementOptions(i),l.borderAlign!=="inner"&&(n=Math.max(n,l.borderWidth||0,l.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let r=0,i=e.length;r<i;++r){const s=this.resolveDataElementOptions(r);n=Math.max(n,s.offset||0,s.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(n+=this._getRingWeight(r));return n}_getRingWeight(e){return Math.max(he(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}Z(ws,"id","doughnut"),Z(ws,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),Z(ws,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),Z(ws,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:r,color:i}}=e.legend.options;return n.labels.map((s,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:s,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:i,lineWidth:l.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,n,r){r.chart.toggleDataVisibility(n.index),r.chart.update()}}}});class dh extends Hn{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:r,data:i=[],_dataset:s}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=RS(n,i,o);this._drawStart=a,this._drawCount=l,NS(n)&&(a=0,l=i.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!s._decimated,r.points=i;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(r,void 0,{animated:!o,options:c},e),this.updateElements(i,a,l,e)}updateElements(e,n,r,i){const s=i==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:u,includeOptions:d}=this._getSharedOptions(n,i),f=o.axis,m=a.axis,{spanGaps:x,segment:y}=this.options,w=ra(x)?x:Number.POSITIVE_INFINITY,v=this.chart._animationsDisabled||s||i==="none",g=n+r,_=e.length;let A=n>0&&this.getParsed(n-1);for(let P=0;P<_;++P){const D=e[P],C=v?D:{};if(P<n||P>=g){C.skip=!0;continue}const b=this.getParsed(P),k=pe(b[m]),T=C[f]=o.getPixelForValue(b[f],P),I=C[m]=s||k?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,b,l):b[m],P);C.skip=isNaN(T)||isNaN(I)||k,C.stop=P>0&&Math.abs(b[f]-A[f])>w,y&&(C.parsed=b,C.raw=c.data[P]),d&&(C.options=u||this.resolveDataElementOptions(P,D.active?"active":i)),v||this.updateElement(D,P,C,i),A=b}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,r=n.options&&n.options.borderWidth||0,i=e.data||[];if(!i.length)return r;const s=i[0].size(this.resolveDataElementOptions(0)),o=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(r,s,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}Z(dh,"id","line"),Z(dh,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),Z(dh,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class Il extends Hn{constructor(e,n){super(e,n),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart,i=r.data.labels||[],s=Mc(n._parsed[e].r,r.options.locale);return{label:i[e]||"",value:s}}parseObjectData(e,n,r,i){return zS.bind(this)(e,n,r,i)}update(e){const n=this._cachedMeta.data;this._updateRadius(),this.updateElements(n,0,n.length,e)}getMinMax(){const e=this._cachedMeta,n={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((r,i)=>{const s=this.getParsed(i).r;!isNaN(s)&&this.chart.getDataVisibility(i)&&(s<n.min&&(n.min=s),s>n.max&&(n.max=s))}),n}_updateRadius(){const e=this.chart,n=e.chartArea,r=e.options,i=Math.min(n.right-n.left,n.bottom-n.top),s=Math.max(i/2,0),o=Math.max(r.cutoutPercentage?s/100*r.cutoutPercentage:1,0),a=(s-o)/e.getVisibleDatasetCount();this.outerRadius=s-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(e,n,r,i){const s=i==="reset",o=this.chart,l=o.options.animation,c=this._cachedMeta.rScale,u=c.xCenter,d=c.yCenter,f=c.getIndexAngle(0)-.5*Le;let m=f,x;const y=360/this.countVisibleElements();for(x=0;x<n;++x)m+=this._computeAngle(x,i,y);for(x=n;x<n+r;x++){const w=e[x];let v=m,g=m+this._computeAngle(x,i,y),_=o.getDataVisibility(x)?c.getDistanceFromCenterForValue(this.getParsed(x).r):0;m=g,s&&(l.animateScale&&(_=0),l.animateRotate&&(v=g=f));const A={x:u,y:d,innerRadius:0,outerRadius:_,startAngle:v,endAngle:g,options:this.resolveDataElementOptions(x,w.active?"active":i)};this.updateElement(w,x,A,i)}}countVisibleElements(){const e=this._cachedMeta;let n=0;return e.data.forEach((r,i)=>{!isNaN(this.getParsed(i).r)&&this.chart.getDataVisibility(i)&&n++}),n}_computeAngle(e,n,r){return this.chart.getDataVisibility(e)?jn(this.resolveDataElementOptions(e,n).angle||r):0}}Z(Il,"id","polarArea"),Z(Il,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),Z(Il,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:r,color:i}}=e.legend.options;return n.labels.map((s,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:s,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:i,lineWidth:l.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,n,r){r.chart.toggleDataVisibility(n.index),r.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class $m extends ws{}Z($m,"id","pie"),Z($m,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class fh extends Hn{getLabelAndValue(e){const n=this._cachedMeta.vScale,r=this.getParsed(e);return{label:n.getLabels()[e],value:""+n.getLabelForValue(r[n.axis])}}parseObjectData(e,n,r,i){return zS.bind(this)(e,n,r,i)}update(e){const n=this._cachedMeta,r=n.dataset,i=n.data||[],s=n.iScale.getLabels();if(r.points=i,e!=="resize"){const o=this.resolveDatasetElementOptions(e);this.options.showLine||(o.borderWidth=0);const a={_loop:!0,_fullLoop:s.length===i.length,options:o};this.updateElement(r,void 0,a,e)}this.updateElements(i,0,i.length,e)}updateElements(e,n,r,i){const s=this._cachedMeta.rScale,o=i==="reset";for(let a=n;a<n+r;a++){const l=e[a],c=this.resolveDataElementOptions(a,l.active?"active":i),u=s.getPointPositionForValue(a,this.getParsed(a).r),d=o?s.xCenter:u.x,f=o?s.yCenter:u.y,m={x:d,y:f,angle:u.angle,skip:isNaN(d)||isNaN(f),options:c};this.updateElement(l,a,m,i)}}}Z(fh,"id","radar"),Z(fh,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),Z(fh,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class ph extends Hn{getLabelAndValue(e){const n=this._cachedMeta,r=this.chart.data.labels||[],{xScale:i,yScale:s}=n,o=this.getParsed(e),a=i.getLabelForValue(o.x),l=s.getLabelForValue(o.y);return{label:r[e]||"",value:"("+a+", "+l+")"}}update(e){const n=this._cachedMeta,{data:r=[]}=n,i=this.chart._animationsDisabled;let{start:s,count:o}=RS(n,r,i);if(this._drawStart=s,this._drawCount=o,NS(n)&&(s=0,o=r.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:l}=n;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=r;const c=this.resolveDatasetElementOptions(e);c.segment=this.options.segment,this.updateElement(a,void 0,{animated:!i,options:c},e)}else this.datasetElementType&&(delete n.dataset,this.datasetElementType=!1);this.updateElements(r,s,o,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,n,r,i){const s=i==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,u=this.resolveDataElementOptions(n,i),d=this.getSharedOptions(u),f=this.includeOptions(i,d),m=o.axis,x=a.axis,{spanGaps:y,segment:w}=this.options,v=ra(y)?y:Number.POSITIVE_INFINITY,g=this.chart._animationsDisabled||s||i==="none";let _=n>0&&this.getParsed(n-1);for(let A=n;A<n+r;++A){const P=e[A],D=this.getParsed(A),C=g?P:{},b=pe(D[x]),k=C[m]=o.getPixelForValue(D[m],A),T=C[x]=s||b?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,D,l):D[x],A);C.skip=isNaN(k)||isNaN(T)||b,C.stop=A>0&&Math.abs(D[m]-_[m])>v,w&&(C.parsed=D,C.raw=c.data[A]),f&&(C.options=d||this.resolveDataElementOptions(A,P.active?"active":i)),g||this.updateElement(P,A,C,i),_=D}this.updateSharedOptions(d,i,u)}getMaxOverflow(){const e=this._cachedMeta,n=e.data||[];if(!this.options.showLine){let a=0;for(let l=n.length-1;l>=0;--l)a=Math.max(a,n[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}const r=e.dataset,i=r.options&&r.options.borderWidth||0;if(!n.length)return i;const s=n[0].size(this.resolveDataElementOptions(0)),o=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(i,s,o)/2}}Z(ph,"id","scatter"),Z(ph,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),Z(ph,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var yO=Object.freeze({__proto__:null,BarController:uh,BubbleController:hh,DoughnutController:ws,LineController:dh,PieController:$m,PolarAreaController:Il,RadarController:fh,ScatterController:ph});function us(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class wv{constructor(e){Z(this,"options");this.options=e||{}}static override(e){Object.assign(wv.prototype,e)}init(){}formats(){return us()}parse(){return us()}format(){return us()}add(){return us()}diff(){return us()}startOf(){return us()}endOf(){return us()}}var _O={_date:wv};function EO(t,e,n,r){const{controller:i,data:s,_sorted:o}=t,a=i._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&s.length){const c=a._reversePixels?W7:Nr;if(r){if(i._sharedOptions){const u=s[0],d=typeof u.getRange=="function"&&u.getRange(e);if(d){const f=c(s,e,n-d),m=c(s,e,n+d);return{lo:f.lo,hi:m.hi}}}}else{const u=c(s,e,n);if(l){const{vScale:d}=i._cachedMeta,{_parsed:f}=t,m=f.slice(0,u.lo+1).reverse().findIndex(y=>!pe(y[d.axis]));u.lo-=Math.max(0,m);const x=f.slice(u.hi).findIndex(y=>!pe(y[d.axis]));u.hi+=Math.max(0,x)}return u}}return{lo:0,hi:s.length-1}}function gf(t,e,n,r,i){const s=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=s.length;a<l;++a){const{index:c,data:u}=s[a],{lo:d,hi:f}=EO(s[a],e,o,i);for(let m=d;m<=f;++m){const x=u[m];x.skip||r(x,c,m)}}}function wO(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(r,i){const s=e?Math.abs(r.x-i.x):0,o=n?Math.abs(r.y-i.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function I0(t,e,n,r,i){const s=[];return!i&&!t.isPointInArea(e)||gf(t,n,e,function(a,l,c){!i&&!Fr(a,t.chartArea,0)||a.inRange(e.x,e.y,r)&&s.push({element:a,datasetIndex:l,index:c})},!0),s}function bO(t,e,n,r){let i=[];function s(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],r),{angle:d}=TS(o,{x:e.x,y:e.y});cc(d,c,u)&&i.push({element:o,datasetIndex:a,index:l})}return gf(t,n,e,s),i}function CO(t,e,n,r,i,s){let o=[];const a=wO(n);let l=Number.POSITIVE_INFINITY;function c(u,d,f){const m=u.inRange(e.x,e.y,i);if(r&&!m)return;const x=u.getCenterPoint(i);if(!(!!s||t.isPointInArea(x))&&!m)return;const w=a(e,x);w<l?(o=[{element:u,datasetIndex:d,index:f}],l=w):w===l&&o.push({element:u,datasetIndex:d,index:f})}return gf(t,n,e,c),o}function k0(t,e,n,r,i,s){return!s&&!t.isPointInArea(e)?[]:n==="r"&&!r?bO(t,e,n,i):CO(t,e,n,r,i,s)}function D2(t,e,n,r,i){const s=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return gf(t,n,e,(l,c,u)=>{l[o]&&l[o](e[n],i)&&(s.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(e.x,e.y,i))}),r&&!a?[]:s}var AO={modes:{index(t,e,n,r){const i=ms(e,t),s=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?I0(t,i,s,r,o):k0(t,i,s,!1,r,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,d=c.data[u];d&&!d.skip&&l.push({element:d,datasetIndex:c.index,index:u})}),l):[]},dataset(t,e,n,r){const i=ms(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?I0(t,i,s,r,o):k0(t,i,s,!1,r,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(t,e,n,r){const i=ms(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return I0(t,i,s,r,o)},nearest(t,e,n,r){const i=ms(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return k0(t,i,s,n.intersect,r,o)},x(t,e,n,r){const i=ms(e,t);return D2(t,i,"x",n.intersect,r)},y(t,e,n,r){const i=ms(e,t);return D2(t,i,"y",n.intersect,r)}}};const XS=["left","top","right","bottom"];function Ha(t,e){return t.filter(n=>n.pos===e)}function R2(t,e){return t.filter(n=>XS.indexOf(n.pos)===-1&&n.box.axis===e)}function Wa(t,e){return t.sort((n,r)=>{const i=e?r:n,s=e?n:r;return i.weight===s.weight?i.index-s.index:i.weight-s.weight})}function SO(t){const e=[];let n,r,i,s,o,a;for(n=0,r=(t||[]).length;n<r;++n)i=t[n],{position:s,options:{stack:o,stackWeight:a=1}}=i,e.push({index:n,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&s+o,stackWeight:a});return e}function TO(t){const e={};for(const n of t){const{stack:r,pos:i,stackWeight:s}=n;if(!r||!XS.includes(i))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function IO(t,e){const n=TO(t),{vBoxMaxWidth:r,hBoxMaxHeight:i}=e;let s,o,a;for(s=0,o=t.length;s<o;++s){a=t[s];const{fullSize:l}=a.box,c=n[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*r:l&&e.availableWidth,a.height=i):(a.width=r,a.height=u?u*i:l&&e.availableHeight)}return n}function kO(t){const e=SO(t),n=Wa(e.filter(c=>c.box.fullSize),!0),r=Wa(Ha(e,"left"),!0),i=Wa(Ha(e,"right")),s=Wa(Ha(e,"top"),!0),o=Wa(Ha(e,"bottom")),a=R2(e,"x"),l=R2(e,"y");return{fullSize:n,leftAndTop:r.concat(s),rightAndBottom:i.concat(l).concat(o).concat(a),chartArea:Ha(e,"chartArea"),vertical:r.concat(i).concat(l),horizontal:s.concat(o).concat(a)}}function N2(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function JS(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function PO(t,e,n,r){const{pos:i,box:s}=n,o=t.maxPadding;if(!xe(i)){n.size&&(t[i]-=n.size);const d=r[n.stack]||{size:0,count:1};d.size=Math.max(d.size,n.horizontal?s.height:s.width),n.size=d.size/d.count,t[i]+=n.size}s.getPadding&&JS(o,s.getPadding());const a=Math.max(0,e.outerWidth-N2(o,t,"left","right")),l=Math.max(0,e.outerHeight-N2(o,t,"top","bottom")),c=a!==t.w,u=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function DO(t){const e=t.maxPadding;function n(r){const i=Math.max(e[r]-t[r],0);return t[r]+=i,i}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function RO(t,e){const n=e.maxPadding;function r(i){const s={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{s[o]=Math.max(e[o],n[o])}),s}return r(t?["left","right"]:["top","bottom"])}function sl(t,e,n,r){const i=[];let s,o,a,l,c,u;for(s=0,o=t.length,c=0;s<o;++s){a=t[s],l=a.box,l.update(a.width||e.w,a.height||e.h,RO(a.horizontal,e));const{same:d,other:f}=PO(e,n,a,r);c|=d&&i.length,u=u||f,l.fullSize||i.push(a)}return c&&sl(i,e,n,r)||u}function Nu(t,e,n,r,i){t.top=n,t.left=e,t.right=e+r,t.bottom=n+i,t.width=r,t.height=i}function F2(t,e,n,r){const i=n.padding;let{x:s,y:o}=e;for(const a of t){const l=a.box,c=r[a.stack]||{placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const d=e.w*u,f=c.size||l.height;lc(c.start)&&(o=c.start),l.fullSize?Nu(l,i.left,o,n.outerWidth-i.right-i.left,f):Nu(l,e.left+c.placed,o,d,f),c.start=o,c.placed+=d,o=l.bottom}else{const d=e.h*u,f=c.size||l.width;lc(c.start)&&(s=c.start),l.fullSize?Nu(l,s,i.top,f,n.outerHeight-i.bottom-i.top):Nu(l,s,e.top+c.placed,f,d),c.start=s,c.placed+=d,s=l.right}}e.x=s,e.y=o}var jt={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;const i=Ht(t.options.layout.padding),s=Math.max(e-i.width,0),o=Math.max(n-i.height,0),a=kO(t.boxes),l=a.vertical,c=a.horizontal;Ae(t.boxes,y=>{typeof y.beforeLayout=="function"&&y.beforeLayout()});const u=l.reduce((y,w)=>w.box.options&&w.box.options.display===!1?y:y+1,0)||1,d=Object.freeze({outerWidth:e,outerHeight:n,padding:i,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/u,hBoxMaxHeight:o/2}),f=Object.assign({},i);JS(f,Ht(r));const m=Object.assign({maxPadding:f,w:s,h:o,x:i.left,y:i.top},i),x=IO(l.concat(c),d);sl(a.fullSize,m,d,x),sl(l,m,d,x),sl(c,m,d,x)&&sl(l,m,d,x),DO(m),F2(a.leftAndTop,m,d,x),m.x+=m.w,m.y+=m.h,F2(a.rightAndBottom,m,d,x),t.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},Ae(a.chartArea,y=>{const w=y.box;Object.assign(w,t.chartArea),w.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}};class ZS{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,r){}removeEventListener(e,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,r,i){return n=Math.max(0,n||e.width),r=r||e.height,{width:n,height:Math.max(0,i?Math.floor(n/i):r)}}isAttached(e){return!0}updateConfig(e){}}class NO extends ZS{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const mh="$chartjs",FO={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},M2=t=>t===null||t==="";function MO(t,e){const n=t.style,r=t.getAttribute("height"),i=t.getAttribute("width");if(t[mh]={initial:{height:r,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",M2(i)){const s=v2(t,"width");s!==void 0&&(t.width=s)}if(M2(r))if(t.style.height==="")t.height=t.width/(e||2);else{const s=v2(t,"height");s!==void 0&&(t.height=s)}return t}const eT=BM?{passive:!0}:!1;function OO(t,e,n){t&&t.addEventListener(e,n,eT)}function BO(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,eT)}function LO(t,e){const n=FO[t.type]||t.type,{x:r,y:i}=ms(t,e);return{type:n,chart:e,native:t,x:r!==void 0?r:null,y:i!==void 0?i:null}}function gd(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function jO(t,e,n){const r=t.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||gd(a.addedNodes,r),o=o&&!gd(a.removedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}function VO(t,e,n){const r=t.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||gd(a.removedNodes,r),o=o&&!gd(a.addedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}const hc=new Map;let O2=0;function tT(){const t=window.devicePixelRatio;t!==O2&&(O2=t,hc.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function zO(t,e){hc.size||window.addEventListener("resize",tT),hc.set(t,e)}function UO(t){hc.delete(t),hc.size||window.removeEventListener("resize",tT)}function HO(t,e,n){const r=t.canvas,i=r&&Ev(r);if(!i)return;const s=DS((a,l)=>{const c=i.clientWidth;n(a,l),c<i.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||s(c,u)});return o.observe(i),zO(t,s),o}function P0(t,e,n){n&&n.disconnect(),e==="resize"&&UO(t)}function WO(t,e,n){const r=t.canvas,i=DS(s=>{t.ctx!==null&&n(LO(s,t))},t);return OO(r,e,i),i}class $O extends ZS{acquireContext(e,n){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(MO(e,n),r):null}releaseContext(e){const n=e.canvas;if(!n[mh])return!1;const r=n[mh].initial;["height","width"].forEach(s=>{const o=r[s];pe(o)?n.removeAttribute(s):n.setAttribute(s,o)});const i=r.style||{};return Object.keys(i).forEach(s=>{n.style[s]=i[s]}),n.width=n.width,delete n[mh],!0}addEventListener(e,n,r){this.removeEventListener(e,n);const i=e.$proxies||(e.$proxies={}),o={attach:jO,detach:VO,resize:HO}[n]||WO;i[n]=o(e,n,r)}removeEventListener(e,n){const r=e.$proxies||(e.$proxies={}),i=r[n];if(!i)return;({attach:P0,detach:P0,resize:P0}[n]||BO)(e,n,i),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,r,i){return OM(e,n,r,i)}isAttached(e){const n=e&&Ev(e);return!!(n&&n.isConnected)}}function qO(t){return!_v()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?NO:$O}class Gn{constructor(){Z(this,"x");Z(this,"y");Z(this,"active",!1);Z(this,"options");Z(this,"$animations")}tooltipPosition(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}hasValue(){return ra(this.x)&&ra(this.y)}getProps(e,n){const r=this.$animations;if(!n||!r)return this;const i={};return e.forEach(s=>{i[s]=r[s]&&r[s].active()?r[s]._to:this[s]}),i}}Z(Gn,"defaults",{}),Z(Gn,"defaultRoutes");function KO(t,e){const n=t.options.ticks,r=GO(t),i=Math.min(n.maxTicksLimit||r,r),s=n.major.enabled?YO(e):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>i)return XO(e,c,s,o/i),c;const u=QO(s,e,i);if(o>0){let d,f;const m=o>1?Math.round((l-a)/(o-1)):null;for(Fu(e,c,u,pe(m)?0:a-m,a),d=0,f=o-1;d<f;d++)Fu(e,c,u,s[d],s[d+1]);return Fu(e,c,u,l,pe(m)?e.length:l+m),c}return Fu(e,c,u),c}function GO(t){const e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),i=t._maxLength/n;return Math.floor(Math.min(r,i))}function QO(t,e,n){const r=JO(t),i=e.length/n;if(!r)return Math.max(i,1);const s=j7(r);for(let o=0,a=s.length-1;o<a;o++){const l=s[o];if(l>i)return l}return Math.max(i,1)}function YO(t){const e=[];let n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}function XO(t,e,n,r){let i=0,s=n[0],o;for(r=Math.ceil(r),o=0;o<t.length;o++)o===s&&(e.push(t[o]),i++,s=n[i*r])}function Fu(t,e,n,r,i){const s=he(r,0),o=Math.min(he(i,t.length),t.length);let a=0,l,c,u;for(n=Math.ceil(n),i&&(l=i-r,n=l/Math.floor(l/n)),u=s;u<0;)a++,u=Math.round(s+a*n);for(c=Math.max(s,0);c<o;c++)c===u&&(e.push(t[c]),a++,u=Math.round(s+a*n))}function JO(t){const e=t.length;let n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}const ZO=t=>t==="left"?"right":t==="right"?"left":t,B2=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,L2=(t,e)=>Math.min(e||t,t);function j2(t,e){const n=[],r=t.length/e,i=t.length;let s=0;for(;s<i;s+=r)n.push(t[Math.floor(s)]);return n}function eB(t,e,n){const r=t.ticks.length,i=Math.min(e,r-1),s=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(i),c;if(!(n&&(r===1?c=Math.max(l-s,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(i-1))/2,l+=i<e?c:-c,l<s-a||l>o+a)))return l}function tB(t,e){Ae(t,n=>{const r=n.gc,i=r.length/2;let s;if(i>e){for(s=0;s<i;++s)delete n.data[r[s]];r.splice(0,i)}})}function $a(t){return t.drawTicks?t.tickLength:0}function V2(t,e){if(!t.display)return 0;const n=ft(t.font,e),r=Ht(t.padding);return(ze(t.text)?t.text.length:1)*n.lineHeight+r.height}function nB(t,e){return Zi(t,{scale:e,type:"scale"})}function rB(t,e,n){return Zi(t,{tick:n,index:e,type:"tick"})}function iB(t,e,n){let r=pv(t);return(n&&e!=="right"||!n&&e==="right")&&(r=ZO(r)),r}function sB(t,e,n,r){const{top:i,left:s,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:u}=l;let d=0,f,m,x;const y=o-i,w=a-s;if(t.isHorizontal()){if(m=Mt(r,s,a),xe(n)){const v=Object.keys(n)[0],g=n[v];x=u[v].getPixelForValue(g)+y-e}else n==="center"?x=(c.bottom+c.top)/2+y-e:x=B2(t,n,e);f=a-s}else{if(xe(n)){const v=Object.keys(n)[0],g=n[v];m=u[v].getPixelForValue(g)-w+e}else n==="center"?m=(c.left+c.right)/2-w+e:m=B2(t,n,e);x=Mt(r,o,i),d=n==="left"?-ot:ot}return{titleX:m,titleY:x,maxWidth:f,rotation:d}}class Xs extends Gn{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:r,_suggestedMax:i}=this;return e=pn(e,Number.POSITIVE_INFINITY),n=pn(n,Number.NEGATIVE_INFINITY),r=pn(r,Number.POSITIVE_INFINITY),i=pn(i,Number.NEGATIVE_INFINITY),{min:pn(e,r),max:pn(n,i),minDefined:Xe(e),maxDefined:Xe(n)}}getMinMax(e){let{min:n,max:r,minDefined:i,maxDefined:s}=this.getUserBounds(),o;if(i&&s)return{min:n,max:r};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),i||(n=Math.min(n,o.min)),s||(r=Math.max(r,o.max));return n=s&&n>r?r:n,r=i&&n>r?n:r,{min:pn(n,pn(r,n)),max:pn(r,pn(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){De(this.options.beforeUpdate,[this])}update(e,n,r){const{beginAtZero:i,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=pM(this,s,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?j2(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=KO(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,e=!e),this._startPixel=n,this._endPixel=r,this._reversePixels=e,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){De(this.options.afterUpdate,[this])}beforeSetDimensions(){De(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){De(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),De(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){De(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let r,i,s;for(r=0,i=e.length;r<i;r++)s=e[r],s.label=De(n.callback,[s.value,r,e],this)}afterTickToLabelConversion(){De(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){De(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,r=L2(this.ticks.length,e.ticks.maxTicksLimit),i=n.minRotation||0,s=n.maxRotation;let o=i,a,l,c;if(!this._isVisible()||!n.display||i>=s||r<=1||!this.isHorizontal()){this.labelRotation=i;return}const u=this._getLabelSizes(),d=u.widest.width,f=u.highest.height,m=xt(this.chart.width-d,0,this.maxWidth);a=e.offset?this.maxWidth/r:m/(r-1),d+6>a&&(a=m/(r-(e.offset?.5:1)),l=this.maxHeight-$a(e.grid)-n.padding-V2(e.title,this.chart.options.font),c=Math.sqrt(d*d+f*f),o=dv(Math.min(Math.asin(xt((u.highest.height+6)/a,-1,1)),Math.asin(xt(l/c,-1,1))-Math.asin(xt(f/c,-1,1)))),o=Math.max(i,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){De(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){De(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:r,title:i,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=V2(i,n.options.font);if(a?(e.width=this.maxWidth,e.height=$a(s)+l):(e.height=this.maxHeight,e.width=$a(s)+l),r.display&&this.ticks.length){const{first:c,last:u,widest:d,highest:f}=this._getLabelSizes(),m=r.padding*2,x=jn(this.labelRotation),y=Math.cos(x),w=Math.sin(x);if(a){const v=r.mirror?0:w*d.width+y*f.height;e.height=Math.min(this.maxHeight,e.height+v+m)}else{const v=r.mirror?0:y*d.width+w*f.height;e.width=Math.min(this.maxWidth,e.width+v+m)}this._calculatePadding(c,u,w,y)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,r,i){const{ticks:{align:s,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,m=0;l?c?(f=i*e.width,m=r*n.height):(f=r*e.height,m=i*n.width):s==="start"?m=n.width:s==="end"?f=e.width:s!=="inner"&&(f=e.width/2,m=n.width/2),this.paddingLeft=Math.max((f-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((m-d+o)*this.width/(this.width-d),0)}else{let u=n.height/2,d=e.height/2;s==="start"?(u=0,d=e.height):s==="end"&&(u=n.height,d=0),this.paddingTop=u+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){De(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,r;for(n=0,r=e.length;n<r;n++)pe(e[n].label)&&(e.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=j2(r,n)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,r){const{ctx:i,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(n/L2(n,r));let c=0,u=0,d,f,m,x,y,w,v,g,_,A,P;for(d=0;d<n;d+=l){if(x=e[d].label,y=this._resolveTickFontOptions(d),i.font=w=y.string,v=s[w]=s[w]||{data:{},gc:[]},g=y.lineHeight,_=A=0,!pe(x)&&!ze(x))_=pd(i,v.data,v.gc,_,x),A=g;else if(ze(x))for(f=0,m=x.length;f<m;++f)P=x[f],!pe(P)&&!ze(P)&&(_=pd(i,v.data,v.gc,_,P),A+=g);o.push(_),a.push(A),c=Math.max(_,c),u=Math.max(A,u)}tB(s,n);const D=o.indexOf(c),C=a.indexOf(u),b=k=>({width:o[k]||0,height:a[k]||0});return{first:b(0),last:b(n-1),widest:b(D),highest:b(C),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return H7(this._alignToPixels?cs(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const r=n[e];return r.$context||(r.$context=rB(this.getContext(),e,r))}return this.$context||(this.$context=nB(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=jn(this.labelRotation),r=Math.abs(Math.cos(n)),i=Math.abs(Math.sin(n)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*r>a*i?a/r:l/i:l*i<a*r?l/r:a/i}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,r=this.chart,i=this.options,{grid:s,position:o,border:a}=i,l=s.offset,c=this.isHorizontal(),d=this.ticks.length+(l?1:0),f=$a(s),m=[],x=a.setContext(this.getContext()),y=x.display?x.width:0,w=y/2,v=function(L){return cs(r,L,y)};let g,_,A,P,D,C,b,k,T,I,N,R;if(o==="top")g=v(this.bottom),C=this.bottom-f,k=g-w,I=v(e.top)+w,R=e.bottom;else if(o==="bottom")g=v(this.top),I=e.top,R=v(e.bottom)-w,C=g+w,k=this.top+f;else if(o==="left")g=v(this.right),D=this.right-f,b=g-w,T=v(e.left)+w,N=e.right;else if(o==="right")g=v(this.left),T=e.left,N=v(e.right)-w,D=g+w,b=this.left+f;else if(n==="x"){if(o==="center")g=v((e.top+e.bottom)/2+.5);else if(xe(o)){const L=Object.keys(o)[0],X=o[L];g=v(this.chart.scales[L].getPixelForValue(X))}I=e.top,R=e.bottom,C=g+w,k=C+f}else if(n==="y"){if(o==="center")g=v((e.left+e.right)/2);else if(xe(o)){const L=Object.keys(o)[0],X=o[L];g=v(this.chart.scales[L].getPixelForValue(X))}D=g-w,b=D-f,T=e.left,N=e.right}const K=he(i.ticks.maxTicksLimit,d),q=Math.max(1,Math.ceil(d/K));for(_=0;_<d;_+=q){const L=this.getContext(_),X=s.setContext(L),j=a.setContext(L),W=X.lineWidth,Q=X.color,B=j.dash||[],V=j.dashOffset,U=X.tickWidth,H=X.tickColor,re=X.tickBorderDash||[],ie=X.tickBorderDashOffset;A=eB(this,_,l),A!==void 0&&(P=cs(r,A,W),c?D=b=T=N=P:C=k=I=R=P,m.push({tx1:D,ty1:C,tx2:b,ty2:k,x1:T,y1:I,x2:N,y2:R,width:W,color:Q,borderDash:B,borderDashOffset:V,tickWidth:U,tickColor:H,tickBorderDash:re,tickBorderDashOffset:ie}))}return this._ticksLength=d,this._borderValue=g,m}_computeLabelItems(e){const n=this.axis,r=this.options,{position:i,ticks:s}=r,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:d}=s,f=$a(r.grid),m=f+u,x=d?-u:m,y=-jn(this.labelRotation),w=[];let v,g,_,A,P,D,C,b,k,T,I,N,R="middle";if(i==="top")D=this.bottom-x,C=this._getXAxisLabelAlignment();else if(i==="bottom")D=this.top+x,C=this._getXAxisLabelAlignment();else if(i==="left"){const q=this._getYAxisLabelAlignment(f);C=q.textAlign,P=q.x}else if(i==="right"){const q=this._getYAxisLabelAlignment(f);C=q.textAlign,P=q.x}else if(n==="x"){if(i==="center")D=(e.top+e.bottom)/2+m;else if(xe(i)){const q=Object.keys(i)[0],L=i[q];D=this.chart.scales[q].getPixelForValue(L)+m}C=this._getXAxisLabelAlignment()}else if(n==="y"){if(i==="center")P=(e.left+e.right)/2-m;else if(xe(i)){const q=Object.keys(i)[0],L=i[q];P=this.chart.scales[q].getPixelForValue(L)}C=this._getYAxisLabelAlignment(f).textAlign}n==="y"&&(l==="start"?R="top":l==="end"&&(R="bottom"));const K=this._getLabelSizes();for(v=0,g=a.length;v<g;++v){_=a[v],A=_.label;const q=s.setContext(this.getContext(v));b=this.getPixelForTick(v)+s.labelOffset,k=this._resolveTickFontOptions(v),T=k.lineHeight,I=ze(A)?A.length:1;const L=I/2,X=q.color,j=q.textStrokeColor,W=q.textStrokeWidth;let Q=C;o?(P=b,C==="inner"&&(v===g-1?Q=this.options.reverse?"left":"right":v===0?Q=this.options.reverse?"right":"left":Q="center"),i==="top"?c==="near"||y!==0?N=-I*T+T/2:c==="center"?N=-K.highest.height/2-L*T+T:N=-K.highest.height+T/2:c==="near"||y!==0?N=T/2:c==="center"?N=K.highest.height/2-L*T:N=K.highest.height-I*T,d&&(N*=-1),y!==0&&!q.showLabelBackdrop&&(P+=T/2*Math.sin(y))):(D=b,N=(1-I)*T/2);let B;if(q.showLabelBackdrop){const V=Ht(q.backdropPadding),U=K.heights[v],H=K.widths[v];let re=N-V.top,ie=0-V.left;switch(R){case"middle":re-=U/2;break;case"bottom":re-=U;break}switch(C){case"center":ie-=H/2;break;case"right":ie-=H;break;case"inner":v===g-1?ie-=H:v>0&&(ie-=H/2);break}B={left:ie,top:re,width:H+V.width,height:U+V.height,color:q.backdropColor}}w.push({label:A,font:k,textOffset:N,options:{rotation:y,color:X,strokeColor:j,strokeWidth:W,textAlign:Q,textBaseline:R,translation:[P,D],backdrop:B}})}return w}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-jn(this.labelRotation))return e==="top"?"left":"right";let i="center";return n.align==="start"?i="left":n.align==="end"?i="right":n.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:r,mirror:i,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,l=o.widest.width;let c,u;return n==="left"?i?(u=this.right+s,r==="near"?c="left":r==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,r==="near"?c="right":r==="center"?(c="center",u-=l/2):(c="left",u=this.left)):n==="right"?i?(u=this.left+s,r==="near"?c="right":r==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,r==="near"?c="left":r==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:r,top:i,width:s,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(r,i,s,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const i=this.ticks.findIndex(s=>s.value===e);return i>=0?n.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const n=this.options.grid,r=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const a=(l,c,u)=>{!u.width||!u.color||(r.save(),r.lineWidth=u.width,r.strokeStyle=u.color,r.setLineDash(u.borderDash||[]),r.lineDashOffset=u.borderDashOffset,r.beginPath(),r.moveTo(l.x,l.y),r.lineTo(c.x,c.y),r.stroke(),r.restore())};if(n.display)for(s=0,o=i.length;s<o;++s){const l=i[s];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:r,grid:i}}=this,s=r.setContext(this.getContext()),o=r.display?s.width:0;if(!o)return;const a=i.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,d,f;this.isHorizontal()?(c=cs(e,this.left,o)-o/2,u=cs(e,this.right,a)+a/2,d=f=l):(d=cs(e,this.top,o)-o/2,f=cs(e,this.bottom,a)+a/2,c=u=l),n.save(),n.lineWidth=s.width,n.strokeStyle=s.color,n.beginPath(),n.moveTo(c,d),n.lineTo(u,f),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,i=this._computeLabelArea();i&&ff(r,i);const s=this.getLabelItems(e);for(const o of s){const a=o.options,l=o.font,c=o.label,u=o.textOffset;Hs(r,c,0,u,l,a)}i&&pf(r)}drawTitle(){const{ctx:e,options:{position:n,title:r,reverse:i}}=this;if(!r.display)return;const s=ft(r.font),o=Ht(r.padding),a=r.align;let l=s.lineHeight/2;n==="bottom"||n==="center"||xe(n)?(l+=o.bottom,ze(r.text)&&(l+=s.lineHeight*(r.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:d,rotation:f}=sB(this,l,n,a);Hs(e,r.text,0,0,s,{color:r.color,maxWidth:d,rotation:f,textAlign:iB(a,n,i),textBaseline:"middle",translation:[c,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,r=he(e.grid&&e.grid.z,-1),i=he(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Xs.prototype.draw?[{z:n,draw:s=>{this.draw(s)}}]:[{z:r,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:n,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",i=[];let s,o;for(s=0,o=n.length;s<o;++s){const a=n[s];a[r]===this.id&&(!e||a.type===e)&&i.push(a)}return i}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return ft(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Mu{constructor(e,n,r){this.type=e,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let r;lB(n)&&(r=this.register(n));const i=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in i||(i[s]=e,oB(e,o,r),this.override&&Ue.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,r=e.id,i=this.scope;r in n&&delete n[r],i&&r in Ue[i]&&(delete Ue[i][r],this.override&&delete Us[r])}}function oB(t,e,n){const r=ac(Object.create(null),[n?Ue.get(n):{},Ue.get(e),t.defaults]);Ue.set(e,r),t.defaultRoutes&&aB(e,t.defaultRoutes),t.descriptors&&Ue.describe(e,t.descriptors)}function aB(t,e){Object.keys(e).forEach(n=>{const r=n.split("."),i=r.pop(),s=[t].concat(r).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");Ue.route(s,i,l,a)})}function lB(t){return"id"in t&&"defaults"in t}class cB{constructor(){this.controllers=new Mu(Hn,"datasets",!0),this.elements=new Mu(Gn,"elements"),this.plugins=new Mu(Object,"plugins"),this.scales=new Mu(Xs,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,r){[...n].forEach(i=>{const s=r||this._getRegistryForType(i);r||s.isForType(i)||s===this.plugins&&i.id?this._exec(e,s,i):Ae(i,o=>{const a=r||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,r){const i=hv(e);De(r["before"+i],[],r),n[e](r),De(r["after"+i],[],r)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(e))return r}return this.plugins}_get(e,n,r){const i=n.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return i}}var tr=new cB;class uB{constructor(){this._init=[]}notify(e,n,r,i){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const s=i?this._descriptors(e).filter(i):this._descriptors(e),o=this._notify(s,e,n,r);return n==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,r,i){i=i||{};for(const s of e){const o=s.plugin,a=o[r],l=[n,i,s.options];if(De(a,l,o)===!1&&i.cancelable)return!1}return!0}invalidate(){pe(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const r=e&&e.config,i=he(r.options&&r.options.plugins,{}),s=hB(r);return i===!1&&!n?[]:fB(e,s,i,n)}_notifyStateChanges(e){const n=this._oldCache||[],r=this._cache,i=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(i(n,r),e,"stop"),this._notify(i(r,n),e,"start")}}function hB(t){const e={},n=[],r=Object.keys(tr.plugins.items);for(let s=0;s<r.length;s++)n.push(tr.getPlugin(r[s]));const i=t.plugins||[];for(let s=0;s<i.length;s++){const o=i[s];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function dB(t,e){return!e&&t===!1?null:t===!0?{}:t}function fB(t,{plugins:e,localIds:n},r,i){const s=[],o=t.getContext();for(const a of e){const l=a.id,c=dB(r[l],i);c!==null&&s.push({plugin:a,options:pB(t.config,{plugin:a,local:n[l]},c,o)})}return s}function pB(t,{plugin:e,local:n},r,i){const s=t.pluginScopeKeys(e),o=t.getOptionScopes(r,s);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function qm(t,e){const n=Ue.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function mB(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function gB(t,e){return t===e?"_index_":"_value_"}function z2(t){if(t==="x"||t==="y"||t==="r")return t}function xB(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function Km(t,...e){if(z2(t))return t;for(const n of e){const r=n.axis||xB(n.position)||t.length>1&&z2(t[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function U2(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function vB(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(r=>r.xAxisID===t||r.yAxisID===t);if(n.length)return U2(t,"x",n[0])||U2(t,"y",n[0])}return{}}function yB(t,e){const n=Us[t.type]||{scales:{}},r=e.scales||{},i=qm(t.type,e),s=Object.create(null);return Object.keys(r).forEach(o=>{const a=r[o];if(!xe(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=Km(o,a,vB(o,t),Ue.scales[a.type]),c=gB(l,i),u=n.scales||{};s[o]=Cl(Object.create(null),[{axis:l},a,u[l],u[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||qm(a,e),u=(Us[a]||{}).scales||{};Object.keys(u).forEach(d=>{const f=mB(d,l),m=o[f+"AxisID"]||f;s[m]=s[m]||Object.create(null),Cl(s[m],[{axis:f},r[m],u[d]])})}),Object.keys(s).forEach(o=>{const a=s[o];Cl(a,[Ue.scales[a.type],Ue.scale])}),s}function nT(t){const e=t.options||(t.options={});e.plugins=he(e.plugins,{}),e.scales=yB(t,e)}function rT(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function _B(t){return t=t||{},t.data=rT(t.data),nT(t),t}const H2=new Map,iT=new Set;function Ou(t,e){let n=H2.get(t);return n||(n=e(),H2.set(t,n),iT.add(n)),n}const qa=(t,e,n)=>{const r=$i(e,n);r!==void 0&&t.add(r)};class EB{constructor(e){this._config=_B(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=rT(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),nT(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Ou(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return Ou(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return Ou(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,r=this.type;return Ou(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const r=this._scopeCache;let i=r.get(e);return(!i||n)&&(i=new Map,r.set(e,i)),i}getOptionScopes(e,n,r){const{options:i,type:s}=this,o=this._cachedScopes(e,r),a=o.get(n);if(a)return a;const l=new Set;n.forEach(u=>{e&&(l.add(e),u.forEach(d=>qa(l,e,d))),u.forEach(d=>qa(l,i,d)),u.forEach(d=>qa(l,Us[s]||{},d)),u.forEach(d=>qa(l,Ue,d)),u.forEach(d=>qa(l,Hm,d))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),iT.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,Us[n]||{},Ue.datasets[n]||{},{type:n},Ue,Hm]}resolveNamedOptions(e,n,r,i=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=W2(this._resolverCache,e,i);let l=o;if(bB(o,n)){s.$shared=!1,r=qi(r)?r():r;const c=this.createResolver(e,r,a);l=ia(o,r,c)}for(const c of n)s[c]=l[c];return s}createResolver(e,n,r=[""],i){const{resolver:s}=W2(this._resolverCache,e,r);return xe(n)?ia(s,n,void 0,i):s}}function W2(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));const i=n.join();let s=r.get(i);return s||(s={resolver:xv(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},r.set(i,s)),s}const wB=t=>xe(t)&&Object.getOwnPropertyNames(t).some(e=>qi(t[e]));function bB(t,e){const{isScriptable:n,isIndexable:r}=BS(t);for(const i of e){const s=n(i),o=r(i),a=(o||s)&&t[i];if(s&&(qi(a)||wB(a))||o&&ze(a))return!0}return!1}var CB="4.4.8";const AB=["top","bottom","left","right","chartArea"];function $2(t,e){return t==="top"||t==="bottom"||AB.indexOf(t)===-1&&e==="x"}function q2(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function K2(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),De(n&&n.onComplete,[t],e)}function SB(t){const e=t.chart,n=e.options.animation;De(n&&n.onProgress,[t],e)}function sT(t){return _v()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const gh={},G2=t=>{const e=sT(t);return Object.values(gh).filter(n=>n.canvas===e).pop()};function TB(t,e,n){const r=Object.keys(t);for(const i of r){const s=+i;if(s>=e){const o=t[i];delete t[i],(n>0||s>e)&&(t[s+n]=o)}}}function IB(t,e,n,r){return!n||t.type==="mouseout"?null:r?e:t}function Bu(t,e,n){return t.options.clip?t[n]:e[n]}function kB(t,e){const{xScale:n,yScale:r}=t;return n&&r?{left:Bu(n,e,"left"),right:Bu(n,e,"right"),top:Bu(r,e,"top"),bottom:Bu(r,e,"bottom")}:e}class Sr{static register(...e){tr.add(...e),Q2()}static unregister(...e){tr.remove(...e),Q2()}constructor(e,n){const r=this.config=new EB(n),i=sT(e),s=G2(i);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||qO(i)),this.platform.updateConfig(r);const a=this.platform.acquireContext(i,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=P7(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new uB,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=K7(d=>this.update(d),o.resizeDelay||0),this._dataChanges=[],gh[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Er.listen(this,"complete",K2),Er.listen(this,"progress",SB),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:r,height:i,_aspectRatio:s}=this;return pe(e)?n&&s?s:i?r/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return tr}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():x2(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return p2(this.canvas,this.ctx),this}stop(){return Er.stop(this),this}resize(e,n){Er.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const r=this.options,i=this.canvas,s=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(i,e,n,s),a=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,x2(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),De(r.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};Ae(n,(r,i)=>{r.id=i})}buildOrUpdateScales(){const e=this.options,n=e.scales,r=this.scales,i=Object.keys(r).reduce((o,a)=>(o[a]=!1,o),{});let s=[];n&&(s=s.concat(Object.keys(n).map(o=>{const a=n[o],l=Km(o,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),Ae(s,o=>{const a=o.options,l=a.id,c=Km(l,a),u=he(a.type,o.dtype);(a.position===void 0||$2(a.position,c)!==$2(o.dposition))&&(a.position=o.dposition),i[l]=!0;let d=null;if(l in r&&r[l].type===u)d=r[l];else{const f=tr.getScale(u);d=new f({id:l,type:u,ctx:this.ctx,chart:this}),r[d.id]=d}d.init(a,e)}),Ae(i,(o,a)=>{o||delete r[a]}),Ae(r,o=>{jt.configure(this,o,o.options),jt.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,r=e.length;if(e.sort((i,s)=>i.index-s.index),r>n){for(let i=n;i<r;++i)this._destroyDatasetMeta(i);e.splice(n,r-n)}this._sortedMetasets=e.slice(0).sort(q2("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((r,i)=>{n.filter(s=>s===r._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let r,i;for(this._removeUnreferencedMetasets(),r=0,i=n.length;r<i;r++){const s=n[r];let o=this.getDatasetMeta(r);const a=s.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=a,o.indexAxis=s.indexAxis||qm(a,this.options),o.order=s.order||0,o.index=r,o.label=""+s.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const l=tr.getController(a),{datasetElementType:c,dataElementType:u}=Ue.datasets[a];Object.assign(l,{dataElementType:tr.getElement(u),datasetElementType:c&&tr.getElement(c)}),o.controller=new l(this,r),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){Ae(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:d}=this.getDatasetMeta(c),f=!i&&s.indexOf(d)===-1;d.buildOrUpdateElements(f),o=Math.max(+d.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),i||Ae(s,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(q2("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Ae(this.scales,e=>{jt.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!s2(n,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:i,count:s}of n){const o=r==="_removeElements"?-s:s;TB(e,i,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=s=>new Set(e.filter(o=>o[0]===s).map((o,a)=>a+","+o.splice(1).join(","))),i=r(0);for(let s=1;s<n;s++)if(!s2(i,r(s)))return;return Array.from(i).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;jt.update(this,this.width,this.height,e);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],Ae(this.boxes,i=>{r&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,s)=>{i._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,qi(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const r=this.getDatasetMeta(e),i={meta:r,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(r.controller._update(n),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Er.has(this)?this.attached&&!Er.running(this)&&Er.start(this):(this.draw(),K2({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,r=[];let i,s;for(i=0,s=n.length;i<s;++i){const o=n[i];(!e||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,r=e._clip,i=!r.disabled,s=kB(e,this.chartArea),o={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",o)!==!1&&(i&&ff(n,{left:r.left===!1?0:s.left-r.left,right:r.right===!1?this.width:s.right+r.right,top:r.top===!1?0:s.top-r.top,bottom:r.bottom===!1?this.height:s.bottom+r.bottom}),e.controller.draw(),i&&pf(n),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(e){return Fr(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,r,i){const s=AO.modes[n];return typeof s=="function"?s(this,e,r,i):[]}getDatasetMeta(e){const n=this.data.datasets[e],r=this._metasets;let i=r.filter(s=>s&&s._dataset===n).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},r.push(i)),i}getContext(){return this.$context||(this.$context=Zi(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(e,n){const r=this.getDatasetMeta(e);r.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,r){const i=r?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,i);lc(n)?(s.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),o.update(s,{visible:r}),this.update(a=>a.datasetIndex===e?i:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),Er.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),p2(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete gh[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,r=(s,o)=>{n.addEventListener(this,s,o),e[s]=o},i=(s,o,a)=>{s.offsetX=o,s.offsetY=a,this._eventHandler(s)};Ae(this.options.events,s=>r(s,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,r=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},i=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},s=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{i("attach",a),this.attached=!0,this.resize(),r("resize",s),r("detach",o)};o=()=>{this.attached=!1,i("resize",s),this._stop(),this._resize(0,0),r("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){Ae(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},Ae(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,r){const i=r?"set":"remove";let s,o,a,l;for(n==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+i+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],r=e.map(({datasetIndex:s,index:o})=>{const a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[o],index:o}});!hd(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(e,n,r){return this._plugins.notify(this,e,n,r)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,r){const i=this.options.hover,s=(l,c)=>l.filter(u=>!c.some(d=>u.datasetIndex===d.datasetIndex&&u.index===d.index)),o=s(n,e),a=r?e:s(e,n);o.length&&this.updateHoverStyle(o,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(e,n){const r={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},i=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,i)===!1)return;const s=this._handleEvent(e,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,i),(s||r.changed)&&this.render(),this}_handleEvent(e,n,r){const{_active:i=[],options:s}=this,o=n,a=this._getActiveElements(e,i,r,o),l=O7(e),c=IB(e,this._lastEvent,r,l);r&&(this._lastEvent=null,De(s.onHover,[e,a,this],this),l&&De(s.onClick,[e,a,this],this));const u=!hd(a,i);return(u||n)&&(this._active=a,this._updateHoverStyles(a,i,n)),this._lastEvent=c,u}_getActiveElements(e,n,r,i){if(e.type==="mouseout")return[];if(!r)return n;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,i)}}Z(Sr,"defaults",Ue),Z(Sr,"instances",gh),Z(Sr,"overrides",Us),Z(Sr,"registry",tr),Z(Sr,"version",CB),Z(Sr,"getChart",G2);function Q2(){return Ae(Sr.instances,t=>t._plugins.invalidate())}function PB(t,e,n){const{startAngle:r,pixelMargin:i,x:s,y:o,outerRadius:a,innerRadius:l}=e;let c=i/a;t.beginPath(),t.arc(s,o,a,r-c,n+c),l>i?(c=i/l,t.arc(s,o,l,n+c,r-c,!0)):t.arc(s,o,i,n+ot,r-ot),t.closePath(),t.clip()}function DB(t){return gv(t,["outerStart","outerEnd","innerStart","innerEnd"])}function RB(t,e,n,r){const i=DB(t.options.borderRadius),s=(n-e)/2,o=Math.min(s,r*e/2),a=l=>{const c=(n-Math.min(s,l))*r/2;return xt(l,0,Math.min(s,c))};return{outerStart:a(i.outerStart),outerEnd:a(i.outerEnd),innerStart:xt(i.innerStart,0,o),innerEnd:xt(i.innerEnd,0,o)}}function fo(t,e,n,r){return{x:n+t*Math.cos(e),y:r+t*Math.sin(e)}}function xd(t,e,n,r,i,s){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:u}=e,d=Math.max(e.outerRadius+r+n-c,0),f=u>0?u+r+n+c:0;let m=0;const x=i-l;if(r){const q=u>0?u-r:0,L=d>0?d-r:0,X=(q+L)/2,j=X!==0?x*X/(X+r):x;m=(x-j)/2}const y=Math.max(.001,x*d-n/Le)/d,w=(x-y)/2,v=l+w+m,g=i-w-m,{outerStart:_,outerEnd:A,innerStart:P,innerEnd:D}=RB(e,f,d,g-v),C=d-_,b=d-A,k=v+_/C,T=g-A/b,I=f+P,N=f+D,R=v+P/I,K=g-D/N;if(t.beginPath(),s){const q=(k+T)/2;if(t.arc(o,a,d,k,q),t.arc(o,a,d,q,T),A>0){const W=fo(b,T,o,a);t.arc(W.x,W.y,A,T,g+ot)}const L=fo(N,g,o,a);if(t.lineTo(L.x,L.y),D>0){const W=fo(N,K,o,a);t.arc(W.x,W.y,D,g+ot,K+Math.PI)}const X=(g-D/f+(v+P/f))/2;if(t.arc(o,a,f,g-D/f,X,!0),t.arc(o,a,f,X,v+P/f,!0),P>0){const W=fo(I,R,o,a);t.arc(W.x,W.y,P,R+Math.PI,v-ot)}const j=fo(C,v,o,a);if(t.lineTo(j.x,j.y),_>0){const W=fo(C,k,o,a);t.arc(W.x,W.y,_,v-ot,k)}}else{t.moveTo(o,a);const q=Math.cos(k)*d+o,L=Math.sin(k)*d+a;t.lineTo(q,L);const X=Math.cos(T)*d+o,j=Math.sin(T)*d+a;t.lineTo(X,j)}t.closePath()}function NB(t,e,n,r,i){const{fullCircles:s,startAngle:o,circumference:a}=e;let l=e.endAngle;if(s){xd(t,e,n,r,l,i);for(let c=0;c<s;++c)t.fill();isNaN(a)||(l=o+(a%Be||Be))}return xd(t,e,n,r,l,i),t.fill(),l}function FB(t,e,n,r,i){const{fullCircles:s,startAngle:o,circumference:a,options:l}=e,{borderWidth:c,borderJoinStyle:u,borderDash:d,borderDashOffset:f}=l,m=l.borderAlign==="inner";if(!c)return;t.setLineDash(d||[]),t.lineDashOffset=f,m?(t.lineWidth=c*2,t.lineJoin=u||"round"):(t.lineWidth=c,t.lineJoin=u||"bevel");let x=e.endAngle;if(s){xd(t,e,n,r,x,i);for(let y=0;y<s;++y)t.stroke();isNaN(a)||(x=o+(a%Be||Be))}m&&PB(t,e,x),s||(xd(t,e,n,r,x,i),t.stroke())}class ol extends Gn{constructor(n){super();Z(this,"circumference");Z(this,"endAngle");Z(this,"fullCircles");Z(this,"innerRadius");Z(this,"outerRadius");Z(this,"pixelMargin");Z(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,r,i){const s=this.getProps(["x","y"],i),{angle:o,distance:a}=TS(s,{x:n,y:r}),{startAngle:l,endAngle:c,innerRadius:u,outerRadius:d,circumference:f}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),m=(this.options.spacing+this.options.borderWidth)/2,x=he(f,c-l),y=cc(o,l,c)&&l!==c,w=x>=Be||y,v=Rr(a,u+m,d+m);return w&&v}getCenterPoint(n){const{x:r,y:i,startAngle:s,endAngle:o,innerRadius:a,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:c,spacing:u}=this.options,d=(s+o)/2,f=(a+l+u+c)/2;return{x:r+Math.cos(d)*f,y:i+Math.sin(d)*f}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:r,circumference:i}=this,s=(r.offset||0)/4,o=(r.spacing||0)/2,a=r.circular;if(this.pixelMargin=r.borderAlign==="inner"?.33:0,this.fullCircles=i>Be?Math.floor(i/Be):0,i===0||this.innerRadius<0||this.outerRadius<0)return;n.save();const l=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(l)*s,Math.sin(l)*s);const c=1-Math.sin(Math.min(Le,i||0)),u=s*c;n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,NB(n,this,u,o,a),FB(n,this,u,o,a),n.restore()}}Z(ol,"id","arc"),Z(ol,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),Z(ol,"defaultRoutes",{backgroundColor:"backgroundColor"}),Z(ol,"descriptors",{_scriptable:!0,_indexable:n=>n!=="borderDash"});function oT(t,e,n=e){t.lineCap=he(n.borderCapStyle,e.borderCapStyle),t.setLineDash(he(n.borderDash,e.borderDash)),t.lineDashOffset=he(n.borderDashOffset,e.borderDashOffset),t.lineJoin=he(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=he(n.borderWidth,e.borderWidth),t.strokeStyle=he(n.borderColor,e.borderColor)}function MB(t,e,n){t.lineTo(n.x,n.y)}function OB(t){return t.stepped?sM:t.tension||t.cubicInterpolationMode==="monotone"?oM:MB}function aT(t,e,n={}){const r=t.length,{start:i=0,end:s=r-1}=n,{start:o,end:a}=e,l=Math.max(i,o),c=Math.min(s,a),u=i<o&&s<o||i>a&&s>a;return{count:r,start:l,loop:e.loop,ilen:c<l&&!u?r+c-l:c-l}}function BB(t,e,n,r){const{points:i,options:s}=e,{count:o,start:a,loop:l,ilen:c}=aT(i,n,r),u=OB(s);let{move:d=!0,reverse:f}=r||{},m,x,y;for(m=0;m<=c;++m)x=i[(a+(f?c-m:m))%o],!x.skip&&(d?(t.moveTo(x.x,x.y),d=!1):u(t,y,x,f,s.stepped),y=x);return l&&(x=i[(a+(f?c:0))%o],u(t,y,x,f,s.stepped)),!!l}function LB(t,e,n,r){const i=e.points,{count:s,start:o,ilen:a}=aT(i,n,r),{move:l=!0,reverse:c}=r||{};let u=0,d=0,f,m,x,y,w,v;const g=A=>(o+(c?a-A:A))%s,_=()=>{y!==w&&(t.lineTo(u,w),t.lineTo(u,y),t.lineTo(u,v))};for(l&&(m=i[g(0)],t.moveTo(m.x,m.y)),f=0;f<=a;++f){if(m=i[g(f)],m.skip)continue;const A=m.x,P=m.y,D=A|0;D===x?(P<y?y=P:P>w&&(w=P),u=(d*u+A)/++d):(_(),t.lineTo(A,P),x=D,d=0,y=w=P),v=P}_()}function Gm(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?LB:BB}function jB(t){return t.stepped?LM:t.tension||t.cubicInterpolationMode==="monotone"?jM:gs}function VB(t,e,n,r){let i=e._path;i||(i=e._path=new Path2D,e.path(i,n,r)&&i.closePath()),oT(t,e.options),t.stroke(i)}function zB(t,e,n,r){const{segments:i,options:s}=e,o=Gm(e);for(const a of i)oT(t,s,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+r-1})&&t.closePath(),t.stroke()}const UB=typeof Path2D=="function";function HB(t,e,n,r){UB&&!e.options.segment?VB(t,e,n,r):zB(t,e,n,r)}class bi extends Gn{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const i=r.spanGaps?this._loop:this._fullLoop;PM(this._points,r,e,i,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=$M(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,r=e.length;return r&&n[e[r-1].end]}interpolate(e,n){const r=this.options,i=e[n],s=this.points,o=KS(this,{property:n,start:i,end:i});if(!o.length)return;const a=[],l=jB(r);let c,u;for(c=0,u=o.length;c<u;++c){const{start:d,end:f}=o[c],m=s[d],x=s[f];if(m===x){a.push(m);continue}const y=Math.abs((i-m[n])/(x[n]-m[n])),w=l(m,x,y,r.stepped);w[n]=e[n],a.push(w)}return a.length===1?a[0]:a}pathSegment(e,n,r){return Gm(this)(e,this,n,r)}path(e,n,r){const i=this.segments,s=Gm(this);let o=this._loop;n=n||0,r=r||this.points.length-n;for(const a of i)o&=s(e,this,a,{start:n,end:n+r-1});return!!o}draw(e,n,r,i){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),HB(e,this,r,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}Z(bi,"id","line"),Z(bi,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),Z(bi,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),Z(bi,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function Y2(t,e,n,r){const i=t.options,{[n]:s}=t.getProps([n],r);return Math.abs(e-s)<i.radius+i.hitRadius}class xh extends Gn{constructor(n){super();Z(this,"parsed");Z(this,"skip");Z(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,r,i){const s=this.options,{x:o,y:a}=this.getProps(["x","y"],i);return Math.pow(n-o,2)+Math.pow(r-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(n,r){return Y2(this,n,"x",r)}inYRange(n,r){return Y2(this,n,"y",r)}getCenterPoint(n){const{x:r,y:i}=this.getProps(["x","y"],n);return{x:r,y:i}}size(n){n=n||this.options||{};let r=n.radius||0;r=Math.max(r,r&&n.hoverRadius||0);const i=r&&n.borderWidth||0;return(r+i)*2}draw(n,r){const i=this.options;this.skip||i.radius<.1||!Fr(this,r,this.size(i)/2)||(n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.fillStyle=i.backgroundColor,Wm(n,i,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}Z(xh,"id","point"),Z(xh,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),Z(xh,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function lT(t,e){const{x:n,y:r,base:i,width:s,height:o}=t.getProps(["x","y","base","width","height"],e);let a,l,c,u,d;return t.horizontal?(d=o/2,a=Math.min(n,i),l=Math.max(n,i),c=r-d,u=r+d):(d=s/2,a=n-d,l=n+d,c=Math.min(r,i),u=Math.max(r,i)),{left:a,top:c,right:l,bottom:u}}function Ci(t,e,n,r){return t?0:xt(e,n,r)}function WB(t,e,n){const r=t.options.borderWidth,i=t.borderSkipped,s=OS(r);return{t:Ci(i.top,s.top,0,n),r:Ci(i.right,s.right,0,e),b:Ci(i.bottom,s.bottom,0,n),l:Ci(i.left,s.left,0,e)}}function $B(t,e,n){const{enableBorderRadius:r}=t.getProps(["enableBorderRadius"]),i=t.options.borderRadius,s=Ts(i),o=Math.min(e,n),a=t.borderSkipped,l=r||xe(i);return{topLeft:Ci(!l||a.top||a.left,s.topLeft,0,o),topRight:Ci(!l||a.top||a.right,s.topRight,0,o),bottomLeft:Ci(!l||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:Ci(!l||a.bottom||a.right,s.bottomRight,0,o)}}function qB(t){const e=lT(t),n=e.right-e.left,r=e.bottom-e.top,i=WB(t,n/2,r/2),s=$B(t,n/2,r/2);return{outer:{x:e.left,y:e.top,w:n,h:r,radius:s},inner:{x:e.left+i.l,y:e.top+i.t,w:n-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,s.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(i.b,i.r))}}}}function D0(t,e,n,r){const i=e===null,s=n===null,a=t&&!(i&&s)&&lT(t,r);return a&&(i||Rr(e,a.left,a.right))&&(s||Rr(n,a.top,a.bottom))}function KB(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function GB(t,e){t.rect(e.x,e.y,e.w,e.h)}function R0(t,e,n={}){const r=t.x!==n.x?-e:0,i=t.y!==n.y?-e:0,s=(t.x+t.w!==n.x+n.w?e:0)-r,o=(t.y+t.h!==n.y+n.h?e:0)-i;return{x:t.x+r,y:t.y+i,w:t.w+s,h:t.h+o,radius:t.radius}}class vh extends Gn{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:r,backgroundColor:i}}=this,{inner:s,outer:o}=qB(this),a=KB(o.radius)?uc:GB;e.save(),(o.w!==s.w||o.h!==s.h)&&(e.beginPath(),a(e,R0(o,n,s)),e.clip(),a(e,R0(s,-n,o)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),a(e,R0(s,n)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,n,r){return D0(this,e,n,r)}inXRange(e,n){return D0(this,e,null,n)}inYRange(e,n){return D0(this,null,e,n)}getCenterPoint(e){const{x:n,y:r,base:i,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(n+i)/2:n,y:s?r:(r+i)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}Z(vh,"id","bar"),Z(vh,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),Z(vh,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var QB=Object.freeze({__proto__:null,ArcElement:ol,BarElement:vh,LineElement:bi,PointElement:xh});const Qm=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],X2=Qm.map(t=>t.replace("rgb(","rgba(").replace(")",", 0.5)"));function cT(t){return Qm[t%Qm.length]}function uT(t){return X2[t%X2.length]}function YB(t,e){return t.borderColor=cT(e),t.backgroundColor=uT(e),++e}function XB(t,e){return t.backgroundColor=t.data.map(()=>cT(e++)),e}function JB(t,e){return t.backgroundColor=t.data.map(()=>uT(e++)),e}function ZB(t){let e=0;return(n,r)=>{const i=t.getDatasetMeta(r).controller;i instanceof ws?e=XB(n,e):i instanceof Il?e=JB(n,e):i&&(e=YB(n,e))}}function J2(t){let e;for(e in t)if(t[e].borderColor||t[e].backgroundColor)return!0;return!1}function eL(t){return t&&(t.borderColor||t.backgroundColor)}function tL(){return Ue.borderColor!=="rgba(0,0,0,0.1)"||Ue.backgroundColor!=="rgba(0,0,0,0.1)"}var nL={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(t,e,n){if(!n.enabled)return;const{data:{datasets:r},options:i}=t.config,{elements:s}=i,o=J2(r)||eL(i)||s&&J2(s)||tL();if(!n.forceOverride&&o)return;const a=ZB(t);r.forEach(a)}};function rL(t,e,n,r,i){const s=i.samples||r;if(s>=n)return t.slice(e,e+n);const o=[],a=(n-2)/(s-2);let l=0;const c=e+n-1;let u=e,d,f,m,x,y;for(o[l++]=t[u],d=0;d<s-2;d++){let w=0,v=0,g;const _=Math.floor((d+1)*a)+1+e,A=Math.min(Math.floor((d+2)*a)+1,n)+e,P=A-_;for(g=_;g<A;g++)w+=t[g].x,v+=t[g].y;w/=P,v/=P;const D=Math.floor(d*a)+1+e,C=Math.min(Math.floor((d+1)*a)+1,n)+e,{x:b,y:k}=t[u];for(m=x=-1,g=D;g<C;g++)x=.5*Math.abs((b-w)*(t[g].y-k)-(b-t[g].x)*(v-k)),x>m&&(m=x,f=t[g],y=g);o[l++]=f,u=y}return o[l++]=t[c],o}function iL(t,e,n,r){let i=0,s=0,o,a,l,c,u,d,f,m,x,y;const w=[],v=e+n-1,g=t[e].x,A=t[v].x-g;for(o=e;o<e+n;++o){a=t[o],l=(a.x-g)/A*r,c=a.y;const P=l|0;if(P===u)c<x?(x=c,d=o):c>y&&(y=c,f=o),i=(s*i+a.x)/++s;else{const D=o-1;if(!pe(d)&&!pe(f)){const C=Math.min(d,f),b=Math.max(d,f);C!==m&&C!==D&&w.push({...t[C],x:i}),b!==m&&b!==D&&w.push({...t[b],x:i})}o>0&&D!==m&&w.push(t[D]),w.push(a),u=P,s=0,x=y=c,d=f=m=o}}return w}function hT(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function Z2(t){t.data.datasets.forEach(e=>{hT(e)})}function sL(t,e){const n=e.length;let r=0,i;const{iScale:s}=t,{min:o,max:a,minDefined:l,maxDefined:c}=s.getUserBounds();return l&&(r=xt(Nr(e,s.axis,o).lo,0,n-1)),c?i=xt(Nr(e,s.axis,a).hi+1,r,n)-r:i=n-r,{start:r,count:i}}var oL={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,n)=>{if(!n.enabled){Z2(t);return}const r=t.width;t.data.datasets.forEach((i,s)=>{const{_data:o,indexAxis:a}=i,l=t.getDatasetMeta(s),c=o||i.data;if(il([a,t.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;const u=t.scales[l.xAxisID];if(u.type!=="linear"&&u.type!=="time"||t.options.parsing)return;let{start:d,count:f}=sL(l,c);const m=n.threshold||4*r;if(f<=m){hT(i);return}pe(o)&&(i._data=c,delete i.data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(y){this._data=y}}));let x;switch(n.algorithm){case"lttb":x=rL(c,d,f,r,n);break;case"min-max":x=iL(c,d,f,r);break;default:throw new Error(`Unsupported decimation algorithm '${n.algorithm}'`)}i._decimated=x})},destroy(t){Z2(t)}};function aL(t,e,n){const r=t.segments,i=t.points,s=e.points,o=[];for(const a of r){let{start:l,end:c}=a;c=bv(l,c,i);const u=Ym(n,i[l],i[c],a.loop);if(!e.segments){o.push({source:a,target:u,start:i[l],end:i[c]});continue}const d=KS(e,u);for(const f of d){const m=Ym(n,s[f.start],s[f.end],f.loop),x=qS(a,i,m);for(const y of x)o.push({source:y,target:f,start:{[n]:eE(u,m,"start",Math.max)},end:{[n]:eE(u,m,"end",Math.min)}})}}return o}function Ym(t,e,n,r){if(r)return;let i=e[t],s=n[t];return t==="angle"&&(i=gn(i),s=gn(s)),{property:t,start:i,end:s}}function lL(t,e){const{x:n=null,y:r=null}=t||{},i=e.points,s=[];return e.segments.forEach(({start:o,end:a})=>{a=bv(o,a,i);const l=i[o],c=i[a];r!==null?(s.push({x:l.x,y:r}),s.push({x:c.x,y:r})):n!==null&&(s.push({x:n,y:l.y}),s.push({x:n,y:c.y}))}),s}function bv(t,e,n){for(;e>t;e--){const r=n[e];if(!isNaN(r.x)&&!isNaN(r.y))break}return e}function eE(t,e,n,r){return t&&e?r(t[n],e[n]):t?t[n]:e?e[n]:0}function dT(t,e){let n=[],r=!1;return ze(t)?(r=!0,n=t):n=lL(t,e),n.length?new bi({points:n,options:{tension:0},_loop:r,_fullLoop:r}):null}function tE(t){return t&&t.fill!==!1}function cL(t,e,n){let i=t[e].fill;const s=[e];let o;if(!n)return i;for(;i!==!1&&s.indexOf(i)===-1;){if(!Xe(i))return i;if(o=t[i],!o)return!1;if(o.visible)return i;s.push(i),i=o.fill}return!1}function uL(t,e,n){const r=pL(t);if(xe(r))return isNaN(r.value)?!1:r;let i=parseFloat(r);return Xe(i)&&Math.floor(i)===i?hL(r[0],e,i,n):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function hL(t,e,n,r){return(t==="-"||t==="+")&&(n=e+n),n===e||n<0||n>=r?!1:n}function dL(t,e){let n=null;return t==="start"?n=e.bottom:t==="end"?n=e.top:xe(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}function fL(t,e,n){let r;return t==="start"?r=n:t==="end"?r=e.options.reverse?e.min:e.max:xe(t)?r=t.value:r=e.getBaseValue(),r}function pL(t){const e=t.options,n=e.fill;let r=he(n&&n.target,n);return r===void 0&&(r=!!e.backgroundColor),r===!1||r===null?!1:r===!0?"origin":r}function mL(t){const{scale:e,index:n,line:r}=t,i=[],s=r.segments,o=r.points,a=gL(e,n);a.push(dT({x:null,y:e.bottom},r));for(let l=0;l<s.length;l++){const c=s[l];for(let u=c.start;u<=c.end;u++)xL(i,o[u],a)}return new bi({points:i,options:{}})}function gL(t,e){const n=[],r=t.getMatchingVisibleMetas("line");for(let i=0;i<r.length;i++){const s=r[i];if(s.index===e)break;s.hidden||n.unshift(s.dataset)}return n}function xL(t,e,n){const r=[];for(let i=0;i<n.length;i++){const s=n[i],{first:o,last:a,point:l}=vL(s,e,"x");if(!(!l||o&&a)){if(o)r.unshift(l);else if(t.push(l),!a)break}}t.push(...r)}function vL(t,e,n){const r=t.interpolate(e,n);if(!r)return{};const i=r[n],s=t.segments,o=t.points;let a=!1,l=!1;for(let c=0;c<s.length;c++){const u=s[c],d=o[u.start][n],f=o[u.end][n];if(Rr(i,d,f)){a=i===d,l=i===f;break}}return{first:a,last:l,point:r}}class fT{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,n,r){const{x:i,y:s,radius:o}=this;return n=n||{start:0,end:Be},e.arc(i,s,o,n.end,n.start,!0),!r.bounds}interpolate(e){const{x:n,y:r,radius:i}=this,s=e.angle;return{x:n+Math.cos(s)*i,y:r+Math.sin(s)*i,angle:s}}}function yL(t){const{chart:e,fill:n,line:r}=t;if(Xe(n))return _L(e,n);if(n==="stack")return mL(t);if(n==="shape")return!0;const i=EL(t);return i instanceof fT?i:dT(i,r)}function _L(t,e){const n=t.getDatasetMeta(e);return n&&t.isDatasetVisible(e)?n.dataset:null}function EL(t){return(t.scale||{}).getPointPositionForValue?bL(t):wL(t)}function wL(t){const{scale:e={},fill:n}=t,r=dL(n,e);if(Xe(r)){const i=e.isHorizontal();return{x:i?r:null,y:i?null:r}}return null}function bL(t){const{scale:e,fill:n}=t,r=e.options,i=e.getLabels().length,s=r.reverse?e.max:e.min,o=fL(n,e,s),a=[];if(r.grid.circular){const l=e.getPointPositionForValue(0,s);return new fT({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(o)})}for(let l=0;l<i;++l)a.push(e.getPointPositionForValue(l,o));return a}function N0(t,e,n){const r=yL(e),{line:i,scale:s,axis:o}=e,a=i.options,l=a.fill,c=a.backgroundColor,{above:u=c,below:d=c}=l||{};r&&i.points.length&&(ff(t,n),CL(t,{line:i,target:r,above:u,below:d,area:n,scale:s,axis:o}),pf(t))}function CL(t,e){const{line:n,target:r,above:i,below:s,area:o,scale:a}=e,l=n._loop?"angle":e.axis;t.save(),l==="x"&&s!==i&&(nE(t,r,o.top),rE(t,{line:n,target:r,color:i,scale:a,property:l}),t.restore(),t.save(),nE(t,r,o.bottom)),rE(t,{line:n,target:r,color:s,scale:a,property:l}),t.restore()}function nE(t,e,n){const{segments:r,points:i}=e;let s=!0,o=!1;t.beginPath();for(const a of r){const{start:l,end:c}=a,u=i[l],d=i[bv(l,c,i)];s?(t.moveTo(u.x,u.y),s=!1):(t.lineTo(u.x,n),t.lineTo(u.x,u.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(d.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function rE(t,e){const{line:n,target:r,property:i,color:s,scale:o}=e,a=aL(n,r,i);for(const{source:l,target:c,start:u,end:d}of a){const{style:{backgroundColor:f=s}={}}=l,m=r!==!0;t.save(),t.fillStyle=f,AL(t,o,m&&Ym(i,u,d)),t.beginPath();const x=!!n.pathSegment(t,l);let y;if(m){x?t.closePath():iE(t,r,d,i);const w=!!r.pathSegment(t,c,{move:x,reverse:!0});y=x&&w,y||iE(t,r,u,i)}t.closePath(),t.fill(y?"evenodd":"nonzero"),t.restore()}}function AL(t,e,n){const{top:r,bottom:i}=e.chart.chartArea,{property:s,start:o,end:a}=n||{};s==="x"&&(t.beginPath(),t.rect(o,r,a-o,i-r),t.clip())}function iE(t,e,n,r){const i=e.interpolate(n,r);i&&t.lineTo(i.x,i.y)}var SL={id:"filler",afterDatasetsUpdate(t,e,n){const r=(t.data.datasets||[]).length,i=[];let s,o,a,l;for(o=0;o<r;++o)s=t.getDatasetMeta(o),a=s.dataset,l=null,a&&a.options&&a instanceof bi&&(l={visible:t.isDatasetVisible(o),index:o,fill:uL(a,o,r),chart:t,axis:s.controller.options.indexAxis,scale:s.vScale,line:a}),s.$filler=l,i.push(l);for(o=0;o<r;++o)l=i[o],!(!l||l.fill===!1)&&(l.fill=cL(i,o,n.propagate))},beforeDraw(t,e,n){const r=n.drawTime==="beforeDraw",i=t.getSortedVisibleDatasetMetas(),s=t.chartArea;for(let o=i.length-1;o>=0;--o){const a=i[o].$filler;a&&(a.line.updateControlPoints(s,a.axis),r&&a.fill&&N0(t.ctx,a,s))}},beforeDatasetsDraw(t,e,n){if(n.drawTime!=="beforeDatasetsDraw")return;const r=t.getSortedVisibleDatasetMetas();for(let i=r.length-1;i>=0;--i){const s=r[i].$filler;tE(s)&&N0(t.ctx,s,t.chartArea)}},beforeDatasetDraw(t,e,n){const r=e.meta.$filler;!tE(r)||n.drawTime!=="beforeDatasetDraw"||N0(t.ctx,r,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const sE=(t,e)=>{let{boxHeight:n=e,boxWidth:r=e}=t;return t.usePointStyle&&(n=Math.min(n,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(e,n)}},TL=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class oE extends Gn{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,r){this.maxWidth=e,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=De(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(r=>e.filter(r,this.chart.data))),e.sort&&(n=n.sort((r,i)=>e.sort(r,i,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,i=ft(r.font),s=i.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=sE(r,s);let c,u;n.font=i.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,s,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,i,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,n,r,i){const{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=i+a;let d=e;s.textAlign="left",s.textBaseline="middle";let f=-1,m=-u;return this.legendItems.forEach((x,y)=>{const w=r+n/2+s.measureText(x.text).width;(y===0||c[c.length-1]+w+2*a>o)&&(d+=u,c[c.length-(y>0?0:1)]=0,m+=u,f++),l[y]={left:0,top:m,row:f,width:w,height:i},c[c.length-1]+=w+a}),d}_fitCols(e,n,r,i){const{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-e;let d=a,f=0,m=0,x=0,y=0;return this.legendItems.forEach((w,v)=>{const{itemWidth:g,itemHeight:_}=IL(r,n,s,w,i);v>0&&m+_+2*a>u&&(d+=f+a,c.push({width:f,height:m}),x+=f+a,y++,f=m=0),l[v]={left:x,top:m,col:y,width:g,height:_},f=Math.max(f,g),m+=_+a}),d+=f,c.push({width:f,height:m}),d}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:i},rtl:s}}=this,o=zo(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=Mt(r,this.left+i,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=Mt(r,this.left+i,this.right-this.lineWidths[a])),c.top+=this.top+e+i,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+i}else{let a=0,l=Mt(r,this.top+e+i,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=Mt(r,this.top+e+i,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+i,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;ff(e,this),this._draw(),pf(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:r,ctx:i}=this,{align:s,labels:o}=e,a=Ue.color,l=zo(e.rtl,this.left,this.width),c=ft(o.font),{padding:u}=o,d=c.size,f=d/2;let m;this.drawTitle(),i.textAlign=l.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=c.string;const{boxWidth:x,boxHeight:y,itemHeight:w}=sE(o,d),v=function(D,C,b){if(isNaN(x)||x<=0||isNaN(y)||y<0)return;i.save();const k=he(b.lineWidth,1);if(i.fillStyle=he(b.fillStyle,a),i.lineCap=he(b.lineCap,"butt"),i.lineDashOffset=he(b.lineDashOffset,0),i.lineJoin=he(b.lineJoin,"miter"),i.lineWidth=k,i.strokeStyle=he(b.strokeStyle,a),i.setLineDash(he(b.lineDash,[])),o.usePointStyle){const T={radius:y*Math.SQRT2/2,pointStyle:b.pointStyle,rotation:b.rotation,borderWidth:k},I=l.xPlus(D,x/2),N=C+f;MS(i,T,I,N,o.pointStyleWidth&&x)}else{const T=C+Math.max((d-y)/2,0),I=l.leftForLtr(D,x),N=Ts(b.borderRadius);i.beginPath(),Object.values(N).some(R=>R!==0)?uc(i,{x:I,y:T,w:x,h:y,radius:N}):i.rect(I,T,x,y),i.fill(),k!==0&&i.stroke()}i.restore()},g=function(D,C,b){Hs(i,b.text,D,C+w/2,c,{strikethrough:b.hidden,textAlign:l.textAlign(b.textAlign)})},_=this.isHorizontal(),A=this._computeTitleHeight();_?m={x:Mt(s,this.left+u,this.right-r[0]),y:this.top+u+A,line:0}:m={x:this.left+u,y:Mt(s,this.top+A+u,this.bottom-n[0].height),line:0},HS(this.ctx,e.textDirection);const P=w+u;this.legendItems.forEach((D,C)=>{i.strokeStyle=D.fontColor,i.fillStyle=D.fontColor;const b=i.measureText(D.text).width,k=l.textAlign(D.textAlign||(D.textAlign=o.textAlign)),T=x+f+b;let I=m.x,N=m.y;l.setWidth(this.width),_?C>0&&I+T+u>this.right&&(N=m.y+=P,m.line++,I=m.x=Mt(s,this.left+u,this.right-r[m.line])):C>0&&N+P>this.bottom&&(I=m.x=I+n[m.line].width+u,m.line++,N=m.y=Mt(s,this.top+A+u,this.bottom-n[m.line].height));const R=l.x(I);if(v(R,N,D),I=G7(k,I+x+f,_?I+T:this.right,e.rtl),g(l.x(I),N,D),_)m.x+=T+u;else if(typeof D.text!="string"){const K=c.lineHeight;m.y+=pT(D,K)+u}else m.y+=P}),WS(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,r=ft(n.font),i=Ht(n.padding);if(!n.display)return;const s=zo(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=r.size/2,c=i.top+l;let u,d=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),u=this.top+c,d=Mt(e.align,d,this.right-f);else{const x=this.columnSizes.reduce((y,w)=>Math.max(y,w.height),0);u=c+Mt(e.align,this.top,this.bottom-x-e.labels.padding-this._computeTitleHeight())}const m=Mt(a,d,d+f);o.textAlign=s.textAlign(pv(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=r.string,Hs(o,n.text,m,u,r)}_computeTitleHeight(){const e=this.options.title,n=ft(e.font),r=Ht(e.padding);return e.display?n.lineHeight+r.height:0}_getLegendItemAt(e,n){let r,i,s;if(Rr(e,this.left,this.right)&&Rr(n,this.top,this.bottom)){for(s=this.legendHitBoxes,r=0;r<s.length;++r)if(i=s[r],Rr(e,i.left,i.left+i.width)&&Rr(n,i.top,i.top+i.height))return this.legendItems[r]}return null}handleEvent(e){const n=this.options;if(!DL(e.type,n))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const i=this._hoveredItem,s=TL(i,r);i&&!s&&De(n.onLeave,[e,i,this],this),this._hoveredItem=r,r&&!s&&De(n.onHover,[e,r,this],this)}else r&&De(n.onClick,[e,r,this],this)}}function IL(t,e,n,r,i){const s=kL(r,t,e,n),o=PL(i,r,e.lineHeight);return{itemWidth:s,itemHeight:o}}function kL(t,e,n,r){let i=t.text;return i&&typeof i!="string"&&(i=i.reduce((s,o)=>s.length>o.length?s:o)),e+n.size/2+r.measureText(i).width}function PL(t,e,n){let r=t;return typeof e.text!="string"&&(r=pT(e,n)),r}function pT(t,e){const n=t.text?t.text.length:0;return e*n}function DL(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var RL={id:"legend",_element:oE,start(t,e,n){const r=t.legend=new oE({ctx:t.ctx,options:n,chart:t});jt.configure(t,r,n),jt.addBox(t,r)},stop(t){jt.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const r=t.legend;jt.configure(t,r,n),r.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const r=e.datasetIndex,i=n.chart;i.isDatasetVisible(r)?(i.hide(r),e.hidden=!0):(i.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:i,color:s,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),u=Ht(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:r||c.pointStyle,rotation:c.rotation,textAlign:i||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class Cv extends Gn{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const i=ze(r.text)?r.text.length:1;this._padding=Ht(r.padding);const s=i*ft(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:r,bottom:i,right:s,options:o}=this,a=o.align;let l=0,c,u,d;return this.isHorizontal()?(u=Mt(a,r,s),d=n+e,c=s-r):(o.position==="left"?(u=r+e,d=Mt(a,i,n),l=Le*-.5):(u=s-e,d=Mt(a,n,i),l=Le*.5),c=i-n),{titleX:u,titleY:d,maxWidth:c,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const r=ft(n.font),s=r.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(s);Hs(e,n.text,0,0,r,{color:n.color,maxWidth:l,rotation:c,textAlign:pv(n.align),textBaseline:"middle",translation:[o,a]})}}function NL(t,e){const n=new Cv({ctx:t.ctx,options:e,chart:t});jt.configure(t,n,e),jt.addBox(t,n),t.titleBlock=n}var FL={id:"title",_element:Cv,start(t,e,n){NL(t,n)},stop(t){const e=t.titleBlock;jt.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const r=t.titleBlock;jt.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Lu=new WeakMap;var ML={id:"subtitle",start(t,e,n){const r=new Cv({ctx:t.ctx,options:n,chart:t});jt.configure(t,r,n),jt.addBox(t,r),Lu.set(t,r)},stop(t){jt.removeBox(t,Lu.get(t)),Lu.delete(t)},beforeUpdate(t,e,n){const r=Lu.get(t);jt.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const al={average(t){if(!t.length)return!1;let e,n,r=new Set,i=0,s=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();r.add(l.x),i+=l.y,++s}}return s===0||r.size===0?!1:{x:[...r].reduce((a,l)=>a+l)/r.size,y:i/s}},nearest(t,e){if(!t.length)return!1;let n=e.x,r=e.y,i=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=t.length;s<o;++s){const l=t[s].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=Um(e,c);u<i&&(i=u,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,r=l.y}return{x:n,y:r}}};function Zn(t,e){return e&&(ze(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function wr(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function OL(t,e){const{element:n,datasetIndex:r,index:i}=e,s=t.getDatasetMeta(r).controller,{label:o,value:a}=s.getLabelAndValue(i);return{chart:t,label:o,parsed:s.getParsed(i),raw:t.data.datasets[r].data[i],formattedValue:a,dataset:s.getDataset(),dataIndex:i,datasetIndex:r,element:n}}function aE(t,e){const n=t.chart.ctx,{body:r,footer:i,title:s}=t,{boxWidth:o,boxHeight:a}=e,l=ft(e.bodyFont),c=ft(e.titleFont),u=ft(e.footerFont),d=s.length,f=i.length,m=r.length,x=Ht(e.padding);let y=x.height,w=0,v=r.reduce((A,P)=>A+P.before.length+P.lines.length+P.after.length,0);if(v+=t.beforeBody.length+t.afterBody.length,d&&(y+=d*c.lineHeight+(d-1)*e.titleSpacing+e.titleMarginBottom),v){const A=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;y+=m*A+(v-m)*l.lineHeight+(v-1)*e.bodySpacing}f&&(y+=e.footerMarginTop+f*u.lineHeight+(f-1)*e.footerSpacing);let g=0;const _=function(A){w=Math.max(w,n.measureText(A).width+g)};return n.save(),n.font=c.string,Ae(t.title,_),n.font=l.string,Ae(t.beforeBody.concat(t.afterBody),_),g=e.displayColors?o+2+e.boxPadding:0,Ae(r,A=>{Ae(A.before,_),Ae(A.lines,_),Ae(A.after,_)}),g=0,n.font=u.string,Ae(t.footer,_),n.restore(),w+=x.width,{width:w,height:y}}function BL(t,e){const{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}function LL(t,e,n,r){const{x:i,width:s}=r,o=n.caretSize+n.caretPadding;if(t==="left"&&i+s+o>e.width||t==="right"&&i-s-o<0)return!0}function jL(t,e,n,r){const{x:i,width:s}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return r==="center"?c=i<=(a+l)/2?"left":"right":i<=s/2?c="left":i>=o-s/2&&(c="right"),LL(c,t,e,n)&&(c="center"),c}function lE(t,e,n){const r=n.yAlign||e.yAlign||BL(t,n);return{xAlign:n.xAlign||e.xAlign||jL(t,e,n,r),yAlign:r}}function VL(t,e){let{x:n,width:r}=t;return e==="right"?n-=r:e==="center"&&(n-=r/2),n}function zL(t,e,n){let{y:r,height:i}=t;return e==="top"?r+=n:e==="bottom"?r-=i+n:r-=i/2,r}function cE(t,e,n,r){const{caretSize:i,caretPadding:s,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=i+s,{topLeft:u,topRight:d,bottomLeft:f,bottomRight:m}=Ts(o);let x=VL(e,a);const y=zL(e,l,c);return l==="center"?a==="left"?x+=c:a==="right"&&(x-=c):a==="left"?x-=Math.max(u,f)+i:a==="right"&&(x+=Math.max(d,m)+i),{x:xt(x,0,r.width-e.width),y:xt(y,0,r.height-e.height)}}function ju(t,e,n){const r=Ht(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-r.right:t.x+r.left}function uE(t){return Zn([],wr(t))}function UL(t,e,n){return Zi(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function hE(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const mT={beforeTitle:_r,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:_r,beforeBody:_r,beforeLabel:_r,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return pe(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:_r,afterBody:_r,beforeFooter:_r,footer:_r,afterFooter:_r};function en(t,e,n,r){const i=t[e].call(n,r);return typeof i>"u"?mT[e].call(n,r):i}class Xm extends Gn{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,r=this.options.setContext(this.getContext()),i=r.enabled&&n.options.animation&&r.animations,s=new GS(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=UL(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:r}=n,i=en(r,"beforeTitle",this,e),s=en(r,"title",this,e),o=en(r,"afterTitle",this,e);let a=[];return a=Zn(a,wr(i)),a=Zn(a,wr(s)),a=Zn(a,wr(o)),a}getBeforeBody(e,n){return uE(en(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:r}=n,i=[];return Ae(e,s=>{const o={before:[],lines:[],after:[]},a=hE(r,s);Zn(o.before,wr(en(a,"beforeLabel",this,s))),Zn(o.lines,en(a,"label",this,s)),Zn(o.after,wr(en(a,"afterLabel",this,s))),i.push(o)}),i}getAfterBody(e,n){return uE(en(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:r}=n,i=en(r,"beforeFooter",this,e),s=en(r,"footer",this,e),o=en(r,"afterFooter",this,e);let a=[];return a=Zn(a,wr(i)),a=Zn(a,wr(s)),a=Zn(a,wr(o)),a}_createItems(e){const n=this._active,r=this.chart.data,i=[],s=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(OL(this.chart,n[l]));return e.filter&&(a=a.filter((u,d,f)=>e.filter(u,d,f,r))),e.itemSort&&(a=a.sort((u,d)=>e.itemSort(u,d,r))),Ae(a,u=>{const d=hE(e.callbacks,u);i.push(en(d,"labelColor",this,u)),s.push(en(d,"labelPointStyle",this,u)),o.push(en(d,"labelTextColor",this,u))}),this.labelColors=i,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const r=this.options.setContext(this.getContext()),i=this._active;let s,o=[];if(!i.length)this.opacity!==0&&(s={opacity:0});else{const a=al[r.position].call(this,i,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const l=this._size=aE(this,r),c=Object.assign({},a,l),u=lE(this.chart,r,c),d=cE(r,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,s={opacity:1,x:d.x,y:d.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,r,i){const s=this.getCaretPosition(e,r,i);n.lineTo(s.x1,s.y1),n.lineTo(s.x2,s.y2),n.lineTo(s.x3,s.y3)}getCaretPosition(e,n,r){const{xAlign:i,yAlign:s}=this,{caretSize:o,cornerRadius:a}=r,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:d}=Ts(a),{x:f,y:m}=e,{width:x,height:y}=n;let w,v,g,_,A,P;return s==="center"?(A=m+y/2,i==="left"?(w=f,v=w-o,_=A+o,P=A-o):(w=f+x,v=w+o,_=A-o,P=A+o),g=w):(i==="left"?v=f+Math.max(l,u)+o:i==="right"?v=f+x-Math.max(c,d)-o:v=this.caretX,s==="top"?(_=m,A=_-o,w=v-o,g=v+o):(_=m+y,A=_+o,w=v+o,g=v-o),P=_),{x1:w,x2:v,x3:g,y1:_,y2:A,y3:P}}drawTitle(e,n,r){const i=this.title,s=i.length;let o,a,l;if(s){const c=zo(r.rtl,this.x,this.width);for(e.x=ju(this,r.titleAlign,r),n.textAlign=c.textAlign(r.titleAlign),n.textBaseline="middle",o=ft(r.titleFont),a=r.titleSpacing,n.fillStyle=r.titleColor,n.font=o.string,l=0;l<s;++l)n.fillText(i[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===s&&(e.y+=r.titleMarginBottom-a)}}_drawColorBox(e,n,r,i,s){const o=this.labelColors[r],a=this.labelPointStyles[r],{boxHeight:l,boxWidth:c}=s,u=ft(s.bodyFont),d=ju(this,"left",s),f=i.x(d),m=l<u.lineHeight?(u.lineHeight-l)/2:0,x=n.y+m;if(s.usePointStyle){const y={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},w=i.leftForLtr(f,c)+c/2,v=x+l/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,Wm(e,y,w,v),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,Wm(e,y,w,v)}else{e.lineWidth=xe(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const y=i.leftForLtr(f,c),w=i.leftForLtr(i.xPlus(f,1),c-2),v=Ts(o.borderRadius);Object.values(v).some(g=>g!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,uc(e,{x:y,y:x,w:c,h:l,radius:v}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),uc(e,{x:w,y:x+1,w:c-2,h:l-2,radius:v}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(y,x,c,l),e.strokeRect(y,x,c,l),e.fillStyle=o.backgroundColor,e.fillRect(w,x+1,c-2,l-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,n,r){const{body:i}=this,{bodySpacing:s,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=r,d=ft(r.bodyFont);let f=d.lineHeight,m=0;const x=zo(r.rtl,this.x,this.width),y=function(b){n.fillText(b,x.x(e.x+m),e.y+f/2),e.y+=f+s},w=x.textAlign(o);let v,g,_,A,P,D,C;for(n.textAlign=o,n.textBaseline="middle",n.font=d.string,e.x=ju(this,w,r),n.fillStyle=r.bodyColor,Ae(this.beforeBody,y),m=a&&w!=="right"?o==="center"?c/2+u:c+2+u:0,A=0,D=i.length;A<D;++A){for(v=i[A],g=this.labelTextColors[A],n.fillStyle=g,Ae(v.before,y),_=v.lines,a&&_.length&&(this._drawColorBox(n,e,A,x,r),f=Math.max(d.lineHeight,l)),P=0,C=_.length;P<C;++P)y(_[P]),f=d.lineHeight;Ae(v.after,y)}m=0,f=d.lineHeight,Ae(this.afterBody,y),e.y-=s}drawFooter(e,n,r){const i=this.footer,s=i.length;let o,a;if(s){const l=zo(r.rtl,this.x,this.width);for(e.x=ju(this,r.footerAlign,r),e.y+=r.footerMarginTop,n.textAlign=l.textAlign(r.footerAlign),n.textBaseline="middle",o=ft(r.footerFont),n.fillStyle=r.footerColor,n.font=o.string,a=0;a<s;++a)n.fillText(i[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+r.footerSpacing}}drawBackground(e,n,r,i){const{xAlign:s,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:u}=r,{topLeft:d,topRight:f,bottomLeft:m,bottomRight:x}=Ts(i.cornerRadius);n.fillStyle=i.backgroundColor,n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.beginPath(),n.moveTo(a+d,l),o==="top"&&this.drawCaret(e,n,r,i),n.lineTo(a+c-f,l),n.quadraticCurveTo(a+c,l,a+c,l+f),o==="center"&&s==="right"&&this.drawCaret(e,n,r,i),n.lineTo(a+c,l+u-x),n.quadraticCurveTo(a+c,l+u,a+c-x,l+u),o==="bottom"&&this.drawCaret(e,n,r,i),n.lineTo(a+m,l+u),n.quadraticCurveTo(a,l+u,a,l+u-m),o==="center"&&s==="left"&&this.drawCaret(e,n,r,i),n.lineTo(a,l+d),n.quadraticCurveTo(a,l,a+d,l),n.closePath(),n.fill(),i.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,r=this.$animations,i=r&&r.x,s=r&&r.y;if(i||s){const o=al[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=aE(this,e),l=Object.assign({},o,this._size),c=lE(n,e,l),u=cE(e,l,c,n);(i._to!==u.x||s._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const i={width:this.width,height:this.height},s={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=Ht(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=r,this.drawBackground(s,e,i,n),HS(e,n.textDirection),s.y+=o.top,this.drawTitle(s,e,n),this.drawBody(s,e,n),this.drawFooter(s,e,n),WS(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const r=this._active,i=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),s=!hd(r,i),o=this._positionChanged(i,n);(s||o)&&(this._active=i,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,s=this._active||[],o=this._getActiveElements(e,s,n,r),a=this._positionChanged(o,e),l=n||!hd(o,s)||a;return l&&(this._active=o,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,r,i){const s=this.options;if(e.type==="mouseout")return[];if(!i)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,s.mode,s,r);return s.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:r,caretY:i,options:s}=this,o=al[s.position].call(this,e,n);return o!==!1&&(r!==o.x||i!==o.y)}}Z(Xm,"positioners",al);var HL={id:"tooltip",_element:Xm,positioners:al,afterInit(t,e,n){n&&(t.tooltip=new Xm({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:mT},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},WL=Object.freeze({__proto__:null,Colors:nL,Decimation:oL,Filler:SL,Legend:RL,SubTitle:ML,Title:FL,Tooltip:HL});const $L=(t,e,n,r)=>(typeof e=="string"?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function qL(t,e,n,r){const i=t.indexOf(e);if(i===-1)return $L(t,e,n,r);const s=t.lastIndexOf(e);return i!==s?n:i}const KL=(t,e)=>t===null?null:xt(Math.round(t),0,e);function dE(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class Jm extends Xs{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const r=this.getLabels();for(const{index:i,label:s}of n)r[i]===s&&r.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(pe(e))return null;const r=this.getLabels();return n=isFinite(n)&&r[n]===e?n:qL(r,e,he(n,e),this._addedLabels),KL(n,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),n||(i=this.getLabels().length-1)),this.min=r,this.max=i}buildTicks(){const e=this.min,n=this.max,r=this.options.offset,i=[];let s=this.getLabels();s=e===0&&n===s.length-1?s:s.slice(e,n+1),this._valueRange=Math.max(s.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=e;o<=n;o++)i.push({value:o});return i}getLabelForValue(e){return dE.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}Z(Jm,"id","category"),Z(Jm,"defaults",{ticks:{callback:dE}});function GL(t,e){const n=[],{bounds:i,step:s,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:d,includeBounds:f}=t,m=s||1,x=u-1,{min:y,max:w}=e,v=!pe(o),g=!pe(a),_=!pe(c),A=(w-y)/(d+1);let P=a2((w-y)/x/m)*m,D,C,b,k;if(P<1e-14&&!v&&!g)return[{value:y},{value:w}];k=Math.ceil(w/P)-Math.floor(y/P),k>x&&(P=a2(k*P/x/m)*m),pe(l)||(D=Math.pow(10,l),P=Math.ceil(P*D)/D),i==="ticks"?(C=Math.floor(y/P)*P,b=Math.ceil(w/P)*P):(C=y,b=w),v&&g&&s&&z7((a-o)/s,P/1e3)?(k=Math.round(Math.min((a-o)/P,u)),P=(a-o)/k,C=o,b=a):_?(C=v?o:C,b=g?a:b,k=c-1,P=(b-C)/k):(k=(b-C)/P,Al(k,Math.round(k),P/1e3)?k=Math.round(k):k=Math.ceil(k));const T=Math.max(l2(P),l2(C));D=Math.pow(10,pe(l)?T:l),C=Math.round(C*D)/D,b=Math.round(b*D)/D;let I=0;for(v&&(f&&C!==o?(n.push({value:o}),C<o&&I++,Al(Math.round((C+I*P)*D)/D,o,fE(o,A,t))&&I++):C<o&&I++);I<k;++I){const N=Math.round((C+I*P)*D)/D;if(g&&N>a)break;n.push({value:N})}return g&&f&&b!==a?n.length&&Al(n[n.length-1].value,a,fE(a,A,t))?n[n.length-1].value=a:n.push({value:a}):(!g||b===a)&&n.push({value:b}),n}function fE(t,e,{horizontal:n,minRotation:r}){const i=jn(r),s=(n?Math.sin(i):Math.cos(i))||.001,o=.75*e*(""+t).length;return Math.min(e/s,o)}class vd extends Xs{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return pe(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds();let{min:i,max:s}=this;const o=l=>i=n?i:l,a=l=>s=r?s:l;if(e){const l=dr(i),c=dr(s);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(i===s){let l=s===0?1:Math.abs(s*.05);a(s+l),e||o(i-l)}this.min=i,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:r}=e,i;return r?(i=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),n=n||11),n&&(i=Math.min(n,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const i={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},s=this._range||this,o=GL(i,s);return e.bounds==="ticks"&&SS(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const i=(r-n)/Math.max(e.length-1,1)/2;n-=i,r+=i}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(e){return Mc(e,this.chart.options.locale,this.options.ticks.format)}}class Zm extends vd{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=Xe(e)?e:0,this.max=Xe(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,r=jn(this.options.ticks.minRotation),i=(e?Math.sin(r):Math.cos(r))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,s.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}Z(Zm,"id","linear"),Z(Zm,"defaults",{ticks:{callback:df.formatters.numeric}});const dc=t=>Math.floor(wi(t)),hs=(t,e)=>Math.pow(10,dc(t)+e);function pE(t){return t/Math.pow(10,dc(t))===1}function mE(t,e,n){const r=Math.pow(10,n),i=Math.floor(t/r);return Math.ceil(e/r)-i}function QL(t,e){const n=e-t;let r=dc(n);for(;mE(t,e,r)>10;)r++;for(;mE(t,e,r)<10;)r--;return Math.min(r,dc(t))}function YL(t,{min:e,max:n}){e=pn(t.min,e);const r=[],i=dc(e);let s=QL(e,n),o=s<0?Math.pow(10,Math.abs(s)):1;const a=Math.pow(10,s),l=i>s?Math.pow(10,i):0,c=Math.round((e-l)*o)/o,u=Math.floor((e-l)/a/10)*a*10;let d=Math.floor((c-u)/Math.pow(10,s)),f=pn(t.min,Math.round((l+u+d*Math.pow(10,s))*o)/o);for(;f<n;)r.push({value:f,major:pE(f),significand:d}),d>=10?d=d<15?15:20:d++,d>=20&&(s++,d=2,o=s>=0?1:o),f=Math.round((l+u+d*Math.pow(10,s))*o)/o;const m=pn(t.max,f);return r.push({value:m,major:pE(m),significand:d}),r}class eg extends Xs{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,n){const r=vd.prototype.parse.apply(this,[e,n]);if(r===0){this._zero=!0;return}return Xe(r)&&r>0?r:null}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=Xe(e)?Math.max(0,e):null,this.max=Xe(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Xe(this._userMin)&&(this.min=e===hs(this.min,0)?hs(this.min,-1):hs(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let r=this.min,i=this.max;const s=a=>r=e?r:a,o=a=>i=n?i:a;r===i&&(r<=0?(s(1),o(10)):(s(hs(r,-1)),o(hs(i,1)))),r<=0&&s(hs(i,-1)),i<=0&&o(hs(r,1)),this.min=r,this.max=i}buildTicks(){const e=this.options,n={min:this._userMin,max:this._userMax},r=YL(n,this);return e.bounds==="ticks"&&SS(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}getLabelForValue(e){return e===void 0?"0":Mc(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=wi(e),this._valueRange=wi(this.max)-wi(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(wi(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const n=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+n*this._valueRange)}}Z(eg,"id","logarithmic"),Z(eg,"defaults",{ticks:{callback:df.formatters.logarithmic,major:{enabled:!0}}});function tg(t){const e=t.ticks;if(e.display&&t.display){const n=Ht(e.backdropPadding);return he(e.font&&e.font.size,Ue.font.size)+n.height}return 0}function XL(t,e,n){return n=ze(n)?n:[n],{w:iM(t,e.string,n),h:n.length*e.lineHeight}}function gE(t,e,n,r,i){return t===r||t===i?{start:e-n/2,end:e+n/2}:t<r||t>i?{start:e-n,end:e}:{start:e,end:e+n}}function JL(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),r=[],i=[],s=t._pointLabels.length,o=t.options.pointLabels,a=o.centerPointLabels?Le/s:0;for(let l=0;l<s;l++){const c=o.setContext(t.getPointLabelContext(l));i[l]=c.padding;const u=t.getPointPosition(l,t.drawingArea+i[l],a),d=ft(c.font),f=XL(t.ctx,d,t._pointLabels[l]);r[l]=f;const m=gn(t.getIndexAngle(l)+a),x=Math.round(dv(m)),y=gE(x,u.x,f.w,0,180),w=gE(x,u.y,f.h,90,270);ZL(n,e,m,y,w)}t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=nj(t,r,i)}function ZL(t,e,n,r,i){const s=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n));let a=0,l=0;r.start<e.l?(a=(e.l-r.start)/s,t.l=Math.min(t.l,e.l-a)):r.end>e.r&&(a=(r.end-e.r)/s,t.r=Math.max(t.r,e.r+a)),i.start<e.t?(l=(e.t-i.start)/o,t.t=Math.min(t.t,e.t-l)):i.end>e.b&&(l=(i.end-e.b)/o,t.b=Math.max(t.b,e.b+l))}function ej(t,e,n){const r=t.drawingArea,{extra:i,additionalAngle:s,padding:o,size:a}=n,l=t.getPointPosition(e,r+i+o,s),c=Math.round(dv(gn(l.angle+ot))),u=sj(l.y,a.h,c),d=rj(c),f=ij(l.x,a.w,d);return{visible:!0,x:l.x,y:u,textAlign:d,left:f,top:u,right:f+a.w,bottom:u+a.h}}function tj(t,e){if(!e)return!0;const{left:n,top:r,right:i,bottom:s}=t;return!(Fr({x:n,y:r},e)||Fr({x:n,y:s},e)||Fr({x:i,y:r},e)||Fr({x:i,y:s},e))}function nj(t,e,n){const r=[],i=t._pointLabels.length,s=t.options,{centerPointLabels:o,display:a}=s.pointLabels,l={extra:tg(s)/2,additionalAngle:o?Le/i:0};let c;for(let u=0;u<i;u++){l.padding=n[u],l.size=e[u];const d=ej(t,u,l);r.push(d),a==="auto"&&(d.visible=tj(d,c),d.visible&&(c=d))}return r}function rj(t){return t===0||t===180?"center":t<180?"left":"right"}function ij(t,e,n){return n==="right"?t-=e:n==="center"&&(t-=e/2),t}function sj(t,e,n){return n===90||n===270?t-=e/2:(n>270||n<90)&&(t-=e),t}function oj(t,e,n){const{left:r,top:i,right:s,bottom:o}=n,{backdropColor:a}=e;if(!pe(a)){const l=Ts(e.borderRadius),c=Ht(e.backdropPadding);t.fillStyle=a;const u=r-c.left,d=i-c.top,f=s-r+c.width,m=o-i+c.height;Object.values(l).some(x=>x!==0)?(t.beginPath(),uc(t,{x:u,y:d,w:f,h:m,radius:l}),t.fill()):t.fillRect(u,d,f,m)}}function aj(t,e){const{ctx:n,options:{pointLabels:r}}=t;for(let i=e-1;i>=0;i--){const s=t._pointLabelItems[i];if(!s.visible)continue;const o=r.setContext(t.getPointLabelContext(i));oj(n,o,s);const a=ft(o.font),{x:l,y:c,textAlign:u}=s;Hs(n,t._pointLabels[i],l,c+a.lineHeight/2,a,{color:o.color,textAlign:u,textBaseline:"middle"})}}function gT(t,e,n,r){const{ctx:i}=t;if(n)i.arc(t.xCenter,t.yCenter,e,0,Be);else{let s=t.getPointPosition(0,e);i.moveTo(s.x,s.y);for(let o=1;o<r;o++)s=t.getPointPosition(o,e),i.lineTo(s.x,s.y)}}function lj(t,e,n,r,i){const s=t.ctx,o=e.circular,{color:a,lineWidth:l}=e;!o&&!r||!a||!l||n<0||(s.save(),s.strokeStyle=a,s.lineWidth=l,s.setLineDash(i.dash||[]),s.lineDashOffset=i.dashOffset,s.beginPath(),gT(t,n,o,r),s.closePath(),s.stroke(),s.restore())}function cj(t,e,n){return Zi(t,{label:n,index:e,type:"pointLabel"})}class ll extends vd{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=Ht(tg(this.options)/2),n=this.width=this.maxWidth-e.width,r=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+n/2+e.left),this.yCenter=Math.floor(this.top+r/2+e.top),this.drawingArea=Math.floor(Math.min(n,r)/2)}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!1);this.min=Xe(e)&&!isNaN(e)?e:0,this.max=Xe(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/tg(this.options))}generateTickLabels(e){vd.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((n,r)=>{const i=De(this.options.pointLabels.callback,[n,r],this);return i||i===0?i:""}).filter((n,r)=>this.chart.getDataVisibility(r))}fit(){const e=this.options;e.display&&e.pointLabels.display?JL(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,n,r,i){this.xCenter+=Math.floor((e-n)/2),this.yCenter+=Math.floor((r-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,n,r,i))}getIndexAngle(e){const n=Be/(this._pointLabels.length||1),r=this.options.startAngle||0;return gn(e*n+jn(r))}getDistanceFromCenterForValue(e){if(pe(e))return NaN;const n=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*n:(e-this.min)*n}getValueForDistanceFromCenter(e){if(pe(e))return NaN;const n=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-n:this.min+n}getPointLabelContext(e){const n=this._pointLabels||[];if(e>=0&&e<n.length){const r=n[e];return cj(this.getContext(),e,r)}}getPointPosition(e,n,r=0){const i=this.getIndexAngle(e)-ot+r;return{x:Math.cos(i)*n+this.xCenter,y:Math.sin(i)*n+this.yCenter,angle:i}}getPointPositionForValue(e,n){return this.getPointPosition(e,this.getDistanceFromCenterForValue(n))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:n,top:r,right:i,bottom:s}=this._pointLabelItems[e];return{left:n,top:r,right:i,bottom:s}}drawBackground(){const{backgroundColor:e,grid:{circular:n}}=this.options;if(e){const r=this.ctx;r.save(),r.beginPath(),gT(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),r.closePath(),r.fillStyle=e,r.fill(),r.restore()}}drawGrid(){const e=this.ctx,n=this.options,{angleLines:r,grid:i,border:s}=n,o=this._pointLabels.length;let a,l,c;if(n.pointLabels.display&&aj(this,o),i.display&&this.ticks.forEach((u,d)=>{if(d!==0||d===0&&this.min<0){l=this.getDistanceFromCenterForValue(u.value);const f=this.getContext(d),m=i.setContext(f),x=s.setContext(f);lj(this,m,l,o,x)}}),r.display){for(e.save(),a=o-1;a>=0;a--){const u=r.setContext(this.getPointLabelContext(a)),{color:d,lineWidth:f}=u;!f||!d||(e.lineWidth=f,e.strokeStyle=d,e.setLineDash(u.borderDash),e.lineDashOffset=u.borderDashOffset,l=this.getDistanceFromCenterForValue(n.reverse?this.min:this.max),c=this.getPointPosition(a,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(c.x,c.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,n=this.options,r=n.ticks;if(!r.display)return;const i=this.getIndexAngle(0);let s,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(i),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&this.min>=0&&!n.reverse)return;const c=r.setContext(this.getContext(l)),u=ft(c.font);if(s=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){e.font=u.string,o=e.measureText(a.label).width,e.fillStyle=c.backdropColor;const d=Ht(c.backdropPadding);e.fillRect(-o/2-d.left,-s-u.size/2-d.top,o+d.width,u.size+d.height)}Hs(e,a.label,0,-s,u,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),e.restore()}drawTitle(){}}Z(ll,"id","radialLinear"),Z(ll,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:df.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),Z(ll,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),Z(ll,"descriptors",{angleLines:{_fallback:"grid"}});const xf={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},sn=Object.keys(xf);function xE(t,e){return t-e}function vE(t,e){if(pe(e))return null;const n=t._adapter,{parser:r,round:i,isoWeekday:s}=t._parseOpts;let o=e;return typeof r=="function"&&(o=r(o)),Xe(o)||(o=typeof r=="string"?n.parse(o,r):n.parse(o)),o===null?null:(i&&(o=i==="week"&&(ra(s)||s===!0)?n.startOf(o,"isoWeek",s):n.startOf(o,i)),+o)}function yE(t,e,n,r){const i=sn.length;for(let s=sn.indexOf(t);s<i-1;++s){const o=xf[sn[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=r)return sn[s]}return sn[i-1]}function uj(t,e,n,r,i){for(let s=sn.length-1;s>=sn.indexOf(n);s--){const o=sn[s];if(xf[o].common&&t._adapter.diff(i,r,o)>=e-1)return o}return sn[n?sn.indexOf(n):0]}function hj(t){for(let e=sn.indexOf(t)+1,n=sn.length;e<n;++e)if(xf[sn[e]].common)return sn[e]}function _E(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:r,hi:i}=fv(n,e),s=n[r]>=e?n[r]:n[i];t[s]=!0}}function dj(t,e,n,r){const i=t._adapter,s=+i.startOf(e[0].value,r),o=e[e.length-1].value;let a,l;for(a=s;a<=o;a=+i.add(a,1,r))l=n[a],l>=0&&(e[l].major=!0);return e}function EE(t,e,n){const r=[],i={},s=e.length;let o,a;for(o=0;o<s;++o)a=e[o],i[a]=o,r.push({value:a,major:!1});return s===0||!n?r:dj(t,r,i,n)}class fc extends Xs{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const r=e.time||(e.time={}),i=this._adapter=new _O._date(e.adapters.date);i.init(n),Cl(r.displayFormats,i.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:vE(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,r=e.time.unit||"day";let{min:i,max:s,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(i=Math.min(i,c.min)),!a&&!isNaN(c.max)&&(s=Math.max(s,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),i=Xe(i)&&!isNaN(i)?i:+n.startOf(Date.now(),r),s=Xe(s)&&!isNaN(s)?s:+n.endOf(Date.now(),r)+1,this.min=Math.min(i,s-1),this.max=Math.max(i+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],r=e[e.length-1]),{min:n,max:r}}buildTicks(){const e=this.options,n=e.time,r=e.ticks,i=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const s=this.min,o=this.max,a=$7(i,s,o);return this._unit=n.unit||(r.autoSkip?yE(n.minUnit,this.min,this.max,this._getLabelCapacity(s)):uj(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:hj(this._unit),this.initOffsets(i),e.reverse&&a.reverse(),EE(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,r=0,i,s;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),e.length===1?n=1-i:n=(this.getDecimalForValue(e[1])-i)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?r=s:r=(s-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=xt(n,0,o),r=xt(r,0,o),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const e=this._adapter,n=this.min,r=this.max,i=this.options,s=i.time,o=s.unit||yE(s.minUnit,n,r,this._getLabelCapacity(n)),a=he(i.ticks.stepSize,1),l=o==="week"?s.isoWeekday:!1,c=ra(l)||l===!0,u={};let d=n,f,m;if(c&&(d=+e.startOf(d,"isoWeek",l)),d=+e.startOf(d,c?"day":o),e.diff(r,n,o)>1e5*a)throw new Error(n+" and "+r+" are too far apart with stepSize of "+a+" "+o);const x=i.ticks.source==="data"&&this.getDataTimestamps();for(f=d,m=0;f<r;f=+e.add(f,a,o),m++)_E(u,f,x);return(f===r||i.bounds==="ticks"||m===1)&&_E(u,f,x),Object.keys(u).sort(xE).map(y=>+y)}getLabelForValue(e){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(e,r.tooltipFormat):n.format(e,r.displayFormats.datetime)}format(e,n){const i=this.options.time.displayFormats,s=this._unit,o=n||i[s];return this._adapter.format(e,o)}_tickFormatFunction(e,n,r,i){const s=this.options,o=s.ticks.callback;if(o)return De(o,[e,n,r],this);const a=s.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],d=c&&a[c],f=r[n],m=c&&d&&f&&f.major;return this._adapter.format(e,i||(m?d:u))}generateTickLabels(e){let n,r,i;for(n=0,r=e.length;n<r;++n)i=e[n],i.label=this._tickFormatFunction(i.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,r=this.ctx.measureText(e).width,i=jn(this.isHorizontal()?n.maxRotation:n.minRotation),s=Math.cos(i),o=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:r*s+a*o,h:r*o+a*s}}_getLabelCapacity(e){const n=this.options.time,r=n.displayFormats,i=r[n.unit]||r.millisecond,s=this._tickFormatFunction(e,0,EE(this,[e],this._majorUnit),i),o=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,r;if(e.length)return e;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(n=0,r=i.length;n<r;++n)e=e.concat(i[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,r;if(e.length)return e;const i=this.getLabels();for(n=0,r=i.length;n<r;++n)e.push(vE(this,i[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return kS(e.sort(xE))}}Z(fc,"id","time"),Z(fc,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Vu(t,e,n){let r=0,i=t.length-1,s,o,a,l;n?(e>=t[r].pos&&e<=t[i].pos&&({lo:r,hi:i}=Nr(t,"pos",e)),{pos:s,time:a}=t[r],{pos:o,time:l}=t[i]):(e>=t[r].time&&e<=t[i].time&&({lo:r,hi:i}=Nr(t,"time",e)),{time:s,pos:a}=t[r],{time:o,pos:l}=t[i]);const c=o-s;return c?a+(l-a)*(e-s)/c:a}class ng extends fc{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=Vu(n,this.min),this._tableRange=Vu(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:r}=this,i=[],s=[];let o,a,l,c,u;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=r&&i.push(c);if(i.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(o=0,a=i.length;o<a;++o)u=i[o+1],l=i[o-1],c=i[o],Math.round((u+l)/2)!==c&&s.push({time:c,pos:o/(a-1)});return s}_generate(){const e=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((i,s)=>i-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?e=this.normalize(n.concat(r)):e=n.length?n:r,e=this._cache.all=e,e}getDecimalForValue(e){return(Vu(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return Vu(this._table,r*this._tableRange+this._minPos,!0)}}Z(ng,"id","timeseries"),Z(ng,"defaults",fc.defaults);var fj=Object.freeze({__proto__:null,CategoryScale:Jm,LinearScale:Zm,LogarithmicScale:eg,RadialLinearScale:ll,TimeScale:fc,TimeSeriesScale:ng});const pj=[yO,QB,WL,fj];Sr.register(...pj);const mj=({viewMode:t})=>{const e=M.useRef(null),n=M.useRef(null),r=()=>{const i=new Date,s=[];for(let o=6;o>=0;o--){const a=new Date(i);a.setDate(i.getDate()-o);const l=Math.floor(Math.random()*5e3)+2e3,c=Math.floor(l*(Math.random()*.2+.2));s.push({date:a,totalRevenue:l,totalProfit:c})}return s};return M.useEffect(()=>{const i=r();if(!i||i.length===0)return;const s=i.map(l=>l.date.toLocaleDateString("en-IN",{day:"2-digit",month:"short"})),o=i.map(l=>t==="revenue"?l.totalRevenue:l.totalProfit);n.current&&n.current.destroy();const a=e.current.getContext("2d");return n.current=new Sr(a,{type:"bar",data:{labels:s,datasets:[{label:t==="revenue"?"Revenue (₹)":"Profit (₹)",data:o,backgroundColor:t==="revenue"?"rgba(251, 165, 24, 0.7)":"rgba(168, 156, 41, 0.7)",borderColor:t==="revenue"?"rgb(251, 165, 24)":"rgb(168, 156, 41)",borderWidth:1,borderRadius:4}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0,position:"top"},tooltip:{callbacks:{label:l=>{let c=l.dataset.label||"";return c&&(c+=": "),l.parsed.y!==null&&(c+=new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(l.parsed.y)),c}}},title:{display:!0,text:"Last 7 Days Sales",font:{size:16}}},scales:{x:{grid:{display:!1},title:{display:!0,text:"Date"}},y:{beginAtZero:!0,ticks:{callback:l=>l>=1e3?"₹"+l/1e3+"K":"₹"+l},title:{display:!0,text:t==="revenue"?"Revenue (₹)":"Profit (₹)"}}}}}),()=>{n.current&&n.current.destroy()}},[t]),p.jsx("div",{className:"sales-chart-container",children:p.jsx("canvas",{ref:e})})},gj=({items:t,viewMode:e})=>{if(!t||t.length===0)return p.jsx("div",{className:"no-data",children:"No sales data available"});const n=Math.max(...t.map(r=>e==="revenue"?r.revenue:r.profit));return p.jsx("div",{className:"top-items-container",children:t.map((r,i)=>{const s=e==="revenue"?r.revenue:r.profit,o=s/n*100;return p.jsxs("div",{className:"top-item",children:[p.jsxs("div",{className:"item-info",children:[p.jsx("div",{className:"item-rank",children:i+1}),p.jsxs("div",{className:"item-details",children:[p.jsx("h4",{className:"item-name",children:r.name}),p.jsxs("p",{className:"item-sold",children:[r.quantitySold," units sold"]})]})]}),p.jsxs("div",{className:"item-value-container",children:[p.jsx("div",{className:"item-bar-container",children:p.jsx("div",{className:"item-bar",style:{width:`${o}%`,backgroundColor:e==="revenue"?"var(--secondary)":"var(--highlight)"}})}),p.jsxs("div",{className:"item-value",children:["₹",s.toFixed(0)]})]})]},r.itemId||i)})})},xj=({transactions:t})=>{if(!t||t.length===0)return p.jsx("div",{className:"no-data",children:"No transaction data available"});const e=i=>new Date(i).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}),n=i=>new Date(i).toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"}),r=i=>i.length===1?i[0].name:`${i[0].name} + ${i.length-1} more`;return p.jsx("div",{className:"transactions-table-container",children:p.jsxs("table",{className:"transactions-table",children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsx("th",{children:"Date & Time"}),p.jsx("th",{children:"Items"}),p.jsx("th",{children:"Type"}),p.jsx("th",{children:"Amount"})]})}),p.jsx("tbody",{children:t.map(i=>p.jsxs("tr",{className:i.type==="sale"?"sale-row":"restock-row",children:[p.jsx("td",{children:p.jsxs("div",{className:"date-time",children:[p.jsx("span",{className:"date",children:e(i.date)}),p.jsx("span",{className:"time",children:n(i.date)})]})}),p.jsx("td",{children:r(i.items)}),p.jsx("td",{children:p.jsx("span",{className:`transaction-type ${i.type}`,children:i.type==="sale"?"Sale":"Restock"})}),p.jsxs("td",{className:"amount",children:["₹",i.total.toFixed(2)]})]},i.id))})]})})},vj=({insights:t})=>{const[e,n]=M.useState(0);return M.useEffect(()=>{if(!t||t.length<=1)return;const r=setInterval(()=>{n(i=>(i+1)%t.length)},8e3);return()=>clearInterval(r)},[t]),!t||t.length===0?null:p.jsxs("div",{className:"business-insights",children:[p.jsx("div",{className:"insight-icon",children:p.jsx(KF,{})}),p.jsxs("div",{className:"insight-content",children:[p.jsx("p",{className:"insight-text",children:t[e]}),t.length>1&&p.jsx("div",{className:"insight-indicators",children:t.map((r,i)=>p.jsx("span",{className:`indicator ${i===e?"active":""}`,onClick:()=>n(i)},i))})]})]})},yj=({currentFilter:t,onFilterChange:e})=>p.jsxs("div",{className:"filter-controls",children:[p.jsx("button",{className:`filter-btn ${t==="week"?"active":""}`,onClick:()=>e("week"),children:"This Week"}),p.jsx("button",{className:`filter-btn ${t==="month"?"active":""}`,onClick:()=>e("month"),children:"This Month"}),p.jsx("button",{className:`filter-btn ${t==="quarter"?"active":""}`,onClick:()=>e("quarter"),children:"Last 3 Months"})]}),_j=()=>{const{currentUser:t}=Yt(),[e,n]=M.useState(!0),[r,i]=M.useState(""),[s,o]=M.useState("month"),[a,l]=M.useState("revenue"),[c,u]=M.useState([]),[d,f]=M.useState([]),[m,x]=M.useState([]),[y,w]=M.useState(0),[v,g]=M.useState(0),[_,A]=M.useState(null),[P,D]=M.useState(null),[C,b]=M.useState([]),[k,T]=M.useState([]),I=()=>{const q=new Date,L=q,X=new Date;return s==="week"?X.setDate(q.getDate()-7):s==="month"?X.setMonth(q.getMonth()-1):s==="quarter"&&X.setMonth(q.getMonth()-3),{start:X,end:L}};M.useEffect(()=>{if(!t)return;(async()=>{n(!0),i("");try{const{start:L}=I(),X=Kn(Ve,"inventory"),j=Gr(X,Un("userId","==",t.uid)),W=await ad(j),Q=[];W.forEach(et=>{Q.push({id:et.id,...et.data()})}),f(Q);const B=Kn(Ve,"receipts"),V=Gr(B,Un("userId","==",t.uid),Un("timestamp",">=",L),jA("timestamp","desc")),U=await ad(V),H=[];U.forEach(et=>{var Ce;const tt=et.data();H.push({id:et.id,...tt,timestamp:((Ce=tt.timestamp)==null?void 0:Ce.toDate())||new Date})});const re={},ie={},ke=[];H.forEach(et=>{const tt=et.timestamp.toISOString().split("T")[0];re[tt]||(re[tt]={date:new Date(tt),totalRevenue:0,totalProfit:0,itemsSold:[]}),re[tt].totalRevenue+=et.total,et.items.forEach(Ce=>{const dn=Q.find(Qn=>Qn.id===Ce.id),_t=(dn==null?void 0:dn.costPrice)||Ce.price*.7,nt=(Ce.price-_t)*Ce.quantity;re[tt].totalProfit+=nt,re[tt].itemsSold.push({itemId:Ce.id,name:Ce.name,quantitySold:Ce.quantity,revenue:Ce.subtotal,profit:nt}),ie[Ce.id]||(ie[Ce.id]={itemId:Ce.id,name:Ce.name,quantitySold:0,revenue:0,profit:0}),ie[Ce.id].quantitySold+=Ce.quantity,ie[Ce.id].revenue+=Ce.subtotal,ie[Ce.id].profit+=nt}),ke.push({id:et.id,date:et.timestamp,items:et.items,total:et.total,type:"sale"})});const ue=Object.values(re);u(ue),x(ke),N(ue,ie,Q)}catch(L){console.error("Error fetching data:",L),i("Failed to load analytics data")}n(!1)})()},[t,s]);const N=(q,L,X)=>{let j=0,W=0;q.forEach(B=>{j+=B.totalRevenue,W+=B.totalProfit}),w(j),g(W);const Q=Object.values(L);if(Q.length>0){const B=[...Q].sort((V,U)=>U.quantitySold-V.quantitySold);A(B[0]||null),D(B[B.length-1]||null),b(B.slice(0,5))}else A(null),D(null),b([]);R(q,Q,X)},R=(q,L,X)=>{const j=[];if(q.length>0){const Q=Math.floor(q.length/2),B=q.slice(0,Q),V=q.slice(Q),U=B.reduce((re,ie)=>re+ie.totalRevenue,0),H=V.reduce((re,ie)=>re+ie.totalRevenue,0);if(H>0){const re=(U-H)/H*100;re>0?j.push(`Your sales increased by ${re.toFixed(1)}% compared to the previous period.`):re<0?j.push(`Your sales decreased by ${Math.abs(re).toFixed(1)}% compared to the previous period.`):j.push("Your sales remained stable compared to the previous period.")}}_&&j.push(`${_.name} is your best-selling product with ${_.quantitySold} units sold.`);const W=X.filter(Q=>Q.quantity<5);if(W.length>0&&j.push(`You have ${W.length} items with low stock. Consider restocking soon.`),m.length>0){const Q=y/m.length;j.push(`Your average transaction value is ₹${Q.toFixed(2)}.`)}T(j)},K=()=>{l(a==="revenue"?"profit":"revenue")};return p.jsxs("div",{className:"profit-analysis-page",children:[p.jsxs("div",{className:"page-header",children:[p.jsx("h1",{className:"page-title",children:"Profit Analysis"}),p.jsxs("div",{className:"view-toggle",onClick:K,children:[p.jsxs("span",{children:["View: ",a==="revenue"?"Revenue":"Profit"]}),a==="revenue"?p.jsx(ZF,{className:"toggle-icon"}):p.jsx(JF,{className:"toggle-icon"})]})]}),r&&p.jsx("div",{className:"error-message",children:r}),p.jsx(yj,{currentFilter:s,onFilterChange:o}),e?p.jsxs("div",{className:"loading-container",children:[p.jsx("div",{className:"loading-spinner"}),p.jsx("p",{children:"Loading analytics data..."})]}):p.jsxs(p.Fragment,{children:[p.jsxs("section",{className:"metrics-section",children:[p.jsx(Su,{title:"Total Revenue",value:y,icon:p.jsx(YF,{}),color:"primary",isCurrency:!0,altValue:a==="profit"?v:null,altLabel:a==="profit"?"Profit":null}),p.jsx(Su,{title:"Estimated Profit",value:v,icon:p.jsx(iv,{}),color:"highlight",isCurrency:!0,altValue:a==="profit"?(v/y*100).toFixed(1)+"%":null,altLabel:a==="profit"?"Margin":null}),p.jsx(Su,{title:"Best-Selling Item",value:(_==null?void 0:_.name)||"N/A",subvalue:_?`${_.quantitySold} units`:"",icon:p.jsx(rv,{}),color:"secondary"}),p.jsx(Su,{title:"Slow-Moving Item",value:(P==null?void 0:P.name)||"N/A",subvalue:P?`${P.quantitySold} units`:"",icon:p.jsx(pS,{}),color:"accent"})]}),p.jsx(vj,{insights:k}),p.jsxs("section",{className:"charts-section",children:[p.jsxs("div",{className:"chart-container",children:[p.jsx("h2",{className:"section-title",children:"Sales Trends"}),p.jsx(mj,{salesData:c,viewMode:a})]}),p.jsxs("div",{className:"chart-container",children:[p.jsx("h2",{className:"section-title",children:"Top Selling Items"}),p.jsx(gj,{items:C,viewMode:a})]})]}),p.jsxs("section",{className:"transactions-section",children:[p.jsx("h2",{className:"section-title",children:"Recent Transactions"}),p.jsx(xj,{transactions:m})]})]})]})};var xT={exports:{}};function Ej(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var F0={exports:{}};const wj={},bj=Object.freeze(Object.defineProperty({__proto__:null,default:wj},Symbol.toStringTag,{value:"Module"})),Cj=WT(bj);var wE;function ye(){return wE||(wE=1,function(t,e){(function(n,r){t.exports=r()})(de,function(){var n=n||function(r,i){var s;if(typeof window<"u"&&window.crypto&&(s=window.crypto),typeof self<"u"&&self.crypto&&(s=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(s=globalThis.crypto),!s&&typeof window<"u"&&window.msCrypto&&(s=window.msCrypto),!s&&typeof de<"u"&&de.crypto&&(s=de.crypto),!s&&typeof Ej=="function")try{s=Cj}catch{}var o=function(){if(s){if(typeof s.getRandomValues=="function")try{return s.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof s.randomBytes=="function")try{return s.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},a=Object.create||function(){function g(){}return function(_){var A;return g.prototype=_,A=new g,g.prototype=null,A}}(),l={},c=l.lib={},u=c.Base=function(){return{extend:function(g){var _=a(this);return g&&_.mixIn(g),(!_.hasOwnProperty("init")||this.init===_.init)&&(_.init=function(){_.$super.init.apply(this,arguments)}),_.init.prototype=_,_.$super=this,_},create:function(){var g=this.extend();return g.init.apply(g,arguments),g},init:function(){},mixIn:function(g){for(var _ in g)g.hasOwnProperty(_)&&(this[_]=g[_]);g.hasOwnProperty("toString")&&(this.toString=g.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),d=c.WordArray=u.extend({init:function(g,_){g=this.words=g||[],_!=i?this.sigBytes=_:this.sigBytes=g.length*4},toString:function(g){return(g||m).stringify(this)},concat:function(g){var _=this.words,A=g.words,P=this.sigBytes,D=g.sigBytes;if(this.clamp(),P%4)for(var C=0;C<D;C++){var b=A[C>>>2]>>>24-C%4*8&255;_[P+C>>>2]|=b<<24-(P+C)%4*8}else for(var k=0;k<D;k+=4)_[P+k>>>2]=A[k>>>2];return this.sigBytes+=D,this},clamp:function(){var g=this.words,_=this.sigBytes;g[_>>>2]&=4294967295<<32-_%4*8,g.length=r.ceil(_/4)},clone:function(){var g=u.clone.call(this);return g.words=this.words.slice(0),g},random:function(g){for(var _=[],A=0;A<g;A+=4)_.push(o());return new d.init(_,g)}}),f=l.enc={},m=f.Hex={stringify:function(g){for(var _=g.words,A=g.sigBytes,P=[],D=0;D<A;D++){var C=_[D>>>2]>>>24-D%4*8&255;P.push((C>>>4).toString(16)),P.push((C&15).toString(16))}return P.join("")},parse:function(g){for(var _=g.length,A=[],P=0;P<_;P+=2)A[P>>>3]|=parseInt(g.substr(P,2),16)<<24-P%8*4;return new d.init(A,_/2)}},x=f.Latin1={stringify:function(g){for(var _=g.words,A=g.sigBytes,P=[],D=0;D<A;D++){var C=_[D>>>2]>>>24-D%4*8&255;P.push(String.fromCharCode(C))}return P.join("")},parse:function(g){for(var _=g.length,A=[],P=0;P<_;P++)A[P>>>2]|=(g.charCodeAt(P)&255)<<24-P%4*8;return new d.init(A,_)}},y=f.Utf8={stringify:function(g){try{return decodeURIComponent(escape(x.stringify(g)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(g){return x.parse(unescape(encodeURIComponent(g)))}},w=c.BufferedBlockAlgorithm=u.extend({reset:function(){this._data=new d.init,this._nDataBytes=0},_append:function(g){typeof g=="string"&&(g=y.parse(g)),this._data.concat(g),this._nDataBytes+=g.sigBytes},_process:function(g){var _,A=this._data,P=A.words,D=A.sigBytes,C=this.blockSize,b=C*4,k=D/b;g?k=r.ceil(k):k=r.max((k|0)-this._minBufferSize,0);var T=k*C,I=r.min(T*4,D);if(T){for(var N=0;N<T;N+=C)this._doProcessBlock(P,N);_=P.splice(0,T),A.sigBytes-=I}return new d.init(_,I)},clone:function(){var g=u.clone.call(this);return g._data=this._data.clone(),g},_minBufferSize:0});c.Hasher=w.extend({cfg:u.extend(),init:function(g){this.cfg=this.cfg.extend(g),this.reset()},reset:function(){w.reset.call(this),this._doReset()},update:function(g){return this._append(g),this._process(),this},finalize:function(g){g&&this._append(g);var _=this._doFinalize();return _},blockSize:16,_createHelper:function(g){return function(_,A){return new g.init(A).finalize(_)}},_createHmacHelper:function(g){return function(_,A){return new v.HMAC.init(g,A).finalize(_)}}});var v=l.algo={};return l}(Math);return n})}(F0)),F0.exports}var M0={exports:{}},bE;function vf(){return bE||(bE=1,function(t,e){(function(n,r){t.exports=r(ye())})(de,function(n){return function(r){var i=n,s=i.lib,o=s.Base,a=s.WordArray,l=i.x64={};l.Word=o.extend({init:function(c,u){this.high=c,this.low=u}}),l.WordArray=o.extend({init:function(c,u){c=this.words=c||[],u!=r?this.sigBytes=u:this.sigBytes=c.length*8},toX32:function(){for(var c=this.words,u=c.length,d=[],f=0;f<u;f++){var m=c[f];d.push(m.high),d.push(m.low)}return a.create(d,this.sigBytes)},clone:function(){for(var c=o.clone.call(this),u=c.words=this.words.slice(0),d=u.length,f=0;f<d;f++)u[f]=u[f].clone();return c}})}(),n})}(M0)),M0.exports}var O0={exports:{}},CE;function Aj(){return CE||(CE=1,function(t,e){(function(n,r){t.exports=r(ye())})(de,function(n){return function(){if(typeof ArrayBuffer=="function"){var r=n,i=r.lib,s=i.WordArray,o=s.init,a=s.init=function(l){if(l instanceof ArrayBuffer&&(l=new Uint8Array(l)),(l instanceof Int8Array||typeof Uint8ClampedArray<"u"&&l instanceof Uint8ClampedArray||l instanceof Int16Array||l instanceof Uint16Array||l instanceof Int32Array||l instanceof Uint32Array||l instanceof Float32Array||l instanceof Float64Array)&&(l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength)),l instanceof Uint8Array){for(var c=l.byteLength,u=[],d=0;d<c;d++)u[d>>>2]|=l[d]<<24-d%4*8;o.call(this,u,c)}else o.apply(this,arguments)};a.prototype=s}}(),n.lib.WordArray})}(O0)),O0.exports}var B0={exports:{}},AE;function Sj(){return AE||(AE=1,function(t,e){(function(n,r){t.exports=r(ye())})(de,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=r.enc;o.Utf16=o.Utf16BE={stringify:function(l){for(var c=l.words,u=l.sigBytes,d=[],f=0;f<u;f+=2){var m=c[f>>>2]>>>16-f%4*8&65535;d.push(String.fromCharCode(m))}return d.join("")},parse:function(l){for(var c=l.length,u=[],d=0;d<c;d++)u[d>>>1]|=l.charCodeAt(d)<<16-d%2*16;return s.create(u,c*2)}},o.Utf16LE={stringify:function(l){for(var c=l.words,u=l.sigBytes,d=[],f=0;f<u;f+=2){var m=a(c[f>>>2]>>>16-f%4*8&65535);d.push(String.fromCharCode(m))}return d.join("")},parse:function(l){for(var c=l.length,u=[],d=0;d<c;d++)u[d>>>1]|=a(l.charCodeAt(d)<<16-d%2*16);return s.create(u,c*2)}};function a(l){return l<<8&4278255360|l>>>8&16711935}}(),n.enc.Utf16})}(B0)),B0.exports}var L0={exports:{}},SE;function Js(){return SE||(SE=1,function(t,e){(function(n,r){t.exports=r(ye())})(de,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=r.enc;o.Base64={stringify:function(l){var c=l.words,u=l.sigBytes,d=this._map;l.clamp();for(var f=[],m=0;m<u;m+=3)for(var x=c[m>>>2]>>>24-m%4*8&255,y=c[m+1>>>2]>>>24-(m+1)%4*8&255,w=c[m+2>>>2]>>>24-(m+2)%4*8&255,v=x<<16|y<<8|w,g=0;g<4&&m+g*.75<u;g++)f.push(d.charAt(v>>>6*(3-g)&63));var _=d.charAt(64);if(_)for(;f.length%4;)f.push(_);return f.join("")},parse:function(l){var c=l.length,u=this._map,d=this._reverseMap;if(!d){d=this._reverseMap=[];for(var f=0;f<u.length;f++)d[u.charCodeAt(f)]=f}var m=u.charAt(64);if(m){var x=l.indexOf(m);x!==-1&&(c=x)}return a(l,c,d)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function a(l,c,u){for(var d=[],f=0,m=0;m<c;m++)if(m%4){var x=u[l.charCodeAt(m-1)]<<m%4*2,y=u[l.charCodeAt(m)]>>>6-m%4*2,w=x|y;d[f>>>2]|=w<<24-f%4*8,f++}return s.create(d,f)}}(),n.enc.Base64})}(L0)),L0.exports}var j0={exports:{}},TE;function Tj(){return TE||(TE=1,function(t,e){(function(n,r){t.exports=r(ye())})(de,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=r.enc;o.Base64url={stringify:function(l,c){c===void 0&&(c=!0);var u=l.words,d=l.sigBytes,f=c?this._safe_map:this._map;l.clamp();for(var m=[],x=0;x<d;x+=3)for(var y=u[x>>>2]>>>24-x%4*8&255,w=u[x+1>>>2]>>>24-(x+1)%4*8&255,v=u[x+2>>>2]>>>24-(x+2)%4*8&255,g=y<<16|w<<8|v,_=0;_<4&&x+_*.75<d;_++)m.push(f.charAt(g>>>6*(3-_)&63));var A=f.charAt(64);if(A)for(;m.length%4;)m.push(A);return m.join("")},parse:function(l,c){c===void 0&&(c=!0);var u=l.length,d=c?this._safe_map:this._map,f=this._reverseMap;if(!f){f=this._reverseMap=[];for(var m=0;m<d.length;m++)f[d.charCodeAt(m)]=m}var x=d.charAt(64);if(x){var y=l.indexOf(x);y!==-1&&(u=y)}return a(l,u,f)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function a(l,c,u){for(var d=[],f=0,m=0;m<c;m++)if(m%4){var x=u[l.charCodeAt(m-1)]<<m%4*2,y=u[l.charCodeAt(m)]>>>6-m%4*2,w=x|y;d[f>>>2]|=w<<24-f%4*8,f++}return s.create(d,f)}}(),n.enc.Base64url})}(j0)),j0.exports}var V0={exports:{}},IE;function Zs(){return IE||(IE=1,function(t,e){(function(n,r){t.exports=r(ye())})(de,function(n){return function(r){var i=n,s=i.lib,o=s.WordArray,a=s.Hasher,l=i.algo,c=[];(function(){for(var y=0;y<64;y++)c[y]=r.abs(r.sin(y+1))*4294967296|0})();var u=l.MD5=a.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(y,w){for(var v=0;v<16;v++){var g=w+v,_=y[g];y[g]=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360}var A=this._hash.words,P=y[w+0],D=y[w+1],C=y[w+2],b=y[w+3],k=y[w+4],T=y[w+5],I=y[w+6],N=y[w+7],R=y[w+8],K=y[w+9],q=y[w+10],L=y[w+11],X=y[w+12],j=y[w+13],W=y[w+14],Q=y[w+15],B=A[0],V=A[1],U=A[2],H=A[3];B=d(B,V,U,H,P,7,c[0]),H=d(H,B,V,U,D,12,c[1]),U=d(U,H,B,V,C,17,c[2]),V=d(V,U,H,B,b,22,c[3]),B=d(B,V,U,H,k,7,c[4]),H=d(H,B,V,U,T,12,c[5]),U=d(U,H,B,V,I,17,c[6]),V=d(V,U,H,B,N,22,c[7]),B=d(B,V,U,H,R,7,c[8]),H=d(H,B,V,U,K,12,c[9]),U=d(U,H,B,V,q,17,c[10]),V=d(V,U,H,B,L,22,c[11]),B=d(B,V,U,H,X,7,c[12]),H=d(H,B,V,U,j,12,c[13]),U=d(U,H,B,V,W,17,c[14]),V=d(V,U,H,B,Q,22,c[15]),B=f(B,V,U,H,D,5,c[16]),H=f(H,B,V,U,I,9,c[17]),U=f(U,H,B,V,L,14,c[18]),V=f(V,U,H,B,P,20,c[19]),B=f(B,V,U,H,T,5,c[20]),H=f(H,B,V,U,q,9,c[21]),U=f(U,H,B,V,Q,14,c[22]),V=f(V,U,H,B,k,20,c[23]),B=f(B,V,U,H,K,5,c[24]),H=f(H,B,V,U,W,9,c[25]),U=f(U,H,B,V,b,14,c[26]),V=f(V,U,H,B,R,20,c[27]),B=f(B,V,U,H,j,5,c[28]),H=f(H,B,V,U,C,9,c[29]),U=f(U,H,B,V,N,14,c[30]),V=f(V,U,H,B,X,20,c[31]),B=m(B,V,U,H,T,4,c[32]),H=m(H,B,V,U,R,11,c[33]),U=m(U,H,B,V,L,16,c[34]),V=m(V,U,H,B,W,23,c[35]),B=m(B,V,U,H,D,4,c[36]),H=m(H,B,V,U,k,11,c[37]),U=m(U,H,B,V,N,16,c[38]),V=m(V,U,H,B,q,23,c[39]),B=m(B,V,U,H,j,4,c[40]),H=m(H,B,V,U,P,11,c[41]),U=m(U,H,B,V,b,16,c[42]),V=m(V,U,H,B,I,23,c[43]),B=m(B,V,U,H,K,4,c[44]),H=m(H,B,V,U,X,11,c[45]),U=m(U,H,B,V,Q,16,c[46]),V=m(V,U,H,B,C,23,c[47]),B=x(B,V,U,H,P,6,c[48]),H=x(H,B,V,U,N,10,c[49]),U=x(U,H,B,V,W,15,c[50]),V=x(V,U,H,B,T,21,c[51]),B=x(B,V,U,H,X,6,c[52]),H=x(H,B,V,U,b,10,c[53]),U=x(U,H,B,V,q,15,c[54]),V=x(V,U,H,B,D,21,c[55]),B=x(B,V,U,H,R,6,c[56]),H=x(H,B,V,U,Q,10,c[57]),U=x(U,H,B,V,I,15,c[58]),V=x(V,U,H,B,j,21,c[59]),B=x(B,V,U,H,k,6,c[60]),H=x(H,B,V,U,L,10,c[61]),U=x(U,H,B,V,C,15,c[62]),V=x(V,U,H,B,K,21,c[63]),A[0]=A[0]+B|0,A[1]=A[1]+V|0,A[2]=A[2]+U|0,A[3]=A[3]+H|0},_doFinalize:function(){var y=this._data,w=y.words,v=this._nDataBytes*8,g=y.sigBytes*8;w[g>>>5]|=128<<24-g%32;var _=r.floor(v/4294967296),A=v;w[(g+64>>>9<<4)+15]=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360,w[(g+64>>>9<<4)+14]=(A<<8|A>>>24)&16711935|(A<<24|A>>>8)&4278255360,y.sigBytes=(w.length+1)*4,this._process();for(var P=this._hash,D=P.words,C=0;C<4;C++){var b=D[C];D[C]=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360}return P},clone:function(){var y=a.clone.call(this);return y._hash=this._hash.clone(),y}});function d(y,w,v,g,_,A,P){var D=y+(w&v|~w&g)+_+P;return(D<<A|D>>>32-A)+w}function f(y,w,v,g,_,A,P){var D=y+(w&g|v&~g)+_+P;return(D<<A|D>>>32-A)+w}function m(y,w,v,g,_,A,P){var D=y+(w^v^g)+_+P;return(D<<A|D>>>32-A)+w}function x(y,w,v,g,_,A,P){var D=y+(v^(w|~g))+_+P;return(D<<A|D>>>32-A)+w}i.MD5=a._createHelper(u),i.HmacMD5=a._createHmacHelper(u)}(Math),n.MD5})}(V0)),V0.exports}var z0={exports:{}},kE;function vT(){return kE||(kE=1,function(t,e){(function(n,r){t.exports=r(ye())})(de,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=i.Hasher,a=r.algo,l=[],c=a.SHA1=o.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(u,d){for(var f=this._hash.words,m=f[0],x=f[1],y=f[2],w=f[3],v=f[4],g=0;g<80;g++){if(g<16)l[g]=u[d+g]|0;else{var _=l[g-3]^l[g-8]^l[g-14]^l[g-16];l[g]=_<<1|_>>>31}var A=(m<<5|m>>>27)+v+l[g];g<20?A+=(x&y|~x&w)+1518500249:g<40?A+=(x^y^w)+1859775393:g<60?A+=(x&y|x&w|y&w)-1894007588:A+=(x^y^w)-899497514,v=w,w=y,y=x<<30|x>>>2,x=m,m=A}f[0]=f[0]+m|0,f[1]=f[1]+x|0,f[2]=f[2]+y|0,f[3]=f[3]+w|0,f[4]=f[4]+v|0},_doFinalize:function(){var u=this._data,d=u.words,f=this._nDataBytes*8,m=u.sigBytes*8;return d[m>>>5]|=128<<24-m%32,d[(m+64>>>9<<4)+14]=Math.floor(f/4294967296),d[(m+64>>>9<<4)+15]=f,u.sigBytes=d.length*4,this._process(),this._hash},clone:function(){var u=o.clone.call(this);return u._hash=this._hash.clone(),u}});r.SHA1=o._createHelper(c),r.HmacSHA1=o._createHmacHelper(c)}(),n.SHA1})}(z0)),z0.exports}var U0={exports:{}},PE;function Av(){return PE||(PE=1,function(t,e){(function(n,r){t.exports=r(ye())})(de,function(n){return function(r){var i=n,s=i.lib,o=s.WordArray,a=s.Hasher,l=i.algo,c=[],u=[];(function(){function m(v){for(var g=r.sqrt(v),_=2;_<=g;_++)if(!(v%_))return!1;return!0}function x(v){return(v-(v|0))*4294967296|0}for(var y=2,w=0;w<64;)m(y)&&(w<8&&(c[w]=x(r.pow(y,1/2))),u[w]=x(r.pow(y,1/3)),w++),y++})();var d=[],f=l.SHA256=a.extend({_doReset:function(){this._hash=new o.init(c.slice(0))},_doProcessBlock:function(m,x){for(var y=this._hash.words,w=y[0],v=y[1],g=y[2],_=y[3],A=y[4],P=y[5],D=y[6],C=y[7],b=0;b<64;b++){if(b<16)d[b]=m[x+b]|0;else{var k=d[b-15],T=(k<<25|k>>>7)^(k<<14|k>>>18)^k>>>3,I=d[b-2],N=(I<<15|I>>>17)^(I<<13|I>>>19)^I>>>10;d[b]=T+d[b-7]+N+d[b-16]}var R=A&P^~A&D,K=w&v^w&g^v&g,q=(w<<30|w>>>2)^(w<<19|w>>>13)^(w<<10|w>>>22),L=(A<<26|A>>>6)^(A<<21|A>>>11)^(A<<7|A>>>25),X=C+L+R+u[b]+d[b],j=q+K;C=D,D=P,P=A,A=_+X|0,_=g,g=v,v=w,w=X+j|0}y[0]=y[0]+w|0,y[1]=y[1]+v|0,y[2]=y[2]+g|0,y[3]=y[3]+_|0,y[4]=y[4]+A|0,y[5]=y[5]+P|0,y[6]=y[6]+D|0,y[7]=y[7]+C|0},_doFinalize:function(){var m=this._data,x=m.words,y=this._nDataBytes*8,w=m.sigBytes*8;return x[w>>>5]|=128<<24-w%32,x[(w+64>>>9<<4)+14]=r.floor(y/4294967296),x[(w+64>>>9<<4)+15]=y,m.sigBytes=x.length*4,this._process(),this._hash},clone:function(){var m=a.clone.call(this);return m._hash=this._hash.clone(),m}});i.SHA256=a._createHelper(f),i.HmacSHA256=a._createHmacHelper(f)}(Math),n.SHA256})}(U0)),U0.exports}var H0={exports:{}},DE;function Ij(){return DE||(DE=1,function(t,e){(function(n,r,i){t.exports=r(ye(),Av())})(de,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=r.algo,a=o.SHA256,l=o.SHA224=a.extend({_doReset:function(){this._hash=new s.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var c=a._doFinalize.call(this);return c.sigBytes-=4,c}});r.SHA224=a._createHelper(l),r.HmacSHA224=a._createHmacHelper(l)}(),n.SHA224})}(H0)),H0.exports}var W0={exports:{}},RE;function yT(){return RE||(RE=1,function(t,e){(function(n,r,i){t.exports=r(ye(),vf())})(de,function(n){return function(){var r=n,i=r.lib,s=i.Hasher,o=r.x64,a=o.Word,l=o.WordArray,c=r.algo;function u(){return a.create.apply(a,arguments)}var d=[u(1116352408,3609767458),u(1899447441,602891725),u(3049323471,3964484399),u(3921009573,2173295548),u(961987163,4081628472),u(1508970993,3053834265),u(2453635748,2937671579),u(2870763221,3664609560),u(3624381080,2734883394),u(310598401,1164996542),u(607225278,1323610764),u(1426881987,3590304994),u(1925078388,4068182383),u(2162078206,991336113),u(2614888103,633803317),u(3248222580,3479774868),u(3835390401,2666613458),u(4022224774,944711139),u(264347078,2341262773),u(604807628,2007800933),u(770255983,1495990901),u(1249150122,1856431235),u(1555081692,3175218132),u(1996064986,2198950837),u(2554220882,3999719339),u(2821834349,766784016),u(2952996808,2566594879),u(3210313671,3203337956),u(3336571891,1034457026),u(3584528711,2466948901),u(113926993,3758326383),u(338241895,168717936),u(666307205,1188179964),u(773529912,1546045734),u(1294757372,1522805485),u(1396182291,2643833823),u(1695183700,2343527390),u(1986661051,1014477480),u(2177026350,1206759142),u(2456956037,344077627),u(2730485921,1290863460),u(2820302411,3158454273),u(3259730800,3505952657),u(3345764771,106217008),u(3516065817,3606008344),u(3600352804,1432725776),u(4094571909,1467031594),u(275423344,851169720),u(430227734,3100823752),u(506948616,1363258195),u(659060556,3750685593),u(883997877,3785050280),u(958139571,3318307427),u(1322822218,3812723403),u(1537002063,2003034995),u(1747873779,3602036899),u(1955562222,1575990012),u(2024104815,1125592928),u(2227730452,2716904306),u(2361852424,442776044),u(2428436474,593698344),u(2756734187,3733110249),u(3204031479,2999351573),u(3329325298,3815920427),u(3391569614,3928383900),u(3515267271,566280711),u(3940187606,3454069534),u(4118630271,4000239992),u(116418474,1914138554),u(174292421,2731055270),u(289380356,3203993006),u(460393269,320620315),u(685471733,587496836),u(852142971,1086792851),u(1017036298,365543100),u(1126000580,2618297676),u(1288033470,3409855158),u(1501505948,4234509866),u(1607167915,987167468),u(1816402316,1246189591)],f=[];(function(){for(var x=0;x<80;x++)f[x]=u()})();var m=c.SHA512=s.extend({_doReset:function(){this._hash=new l.init([new a.init(1779033703,4089235720),new a.init(3144134277,2227873595),new a.init(1013904242,4271175723),new a.init(2773480762,1595750129),new a.init(1359893119,2917565137),new a.init(2600822924,725511199),new a.init(528734635,4215389547),new a.init(1541459225,327033209)])},_doProcessBlock:function(x,y){for(var w=this._hash.words,v=w[0],g=w[1],_=w[2],A=w[3],P=w[4],D=w[5],C=w[6],b=w[7],k=v.high,T=v.low,I=g.high,N=g.low,R=_.high,K=_.low,q=A.high,L=A.low,X=P.high,j=P.low,W=D.high,Q=D.low,B=C.high,V=C.low,U=b.high,H=b.low,re=k,ie=T,ke=I,ue=N,et=R,tt=K,Ce=q,dn=L,_t=X,nt=j,Qn=W,Zr=Q,eo=B,ts=V,to=U,gr=H,Xt=0;Xt<80;Xt++){var Jt,bn,ei=f[Xt];if(Xt<16)bn=ei.high=x[y+Xt*2]|0,Jt=ei.low=x[y+Xt*2+1]|0;else{var ga=f[Xt-15],He=ga.high,rt=ga.low,no=(He>>>1|rt<<31)^(He>>>8|rt<<24)^He>>>7,xa=(rt>>>1|He<<31)^(rt>>>8|He<<24)^(rt>>>7|He<<25),va=f[Xt-2],ti=va.high,Nn=va.low,Oc=(ti>>>19|Nn<<13)^(ti<<3|Nn>>>29)^ti>>>6,ya=(Nn>>>19|ti<<13)^(Nn<<3|ti>>>29)^(Nn>>>6|ti<<26),ro=f[Xt-7],yf=ro.high,_f=ro.low,io=f[Xt-16],Bc=io.high,_a=io.low;Jt=xa+_f,bn=no+yf+(Jt>>>0<xa>>>0?1:0),Jt=Jt+ya,bn=bn+Oc+(Jt>>>0<ya>>>0?1:0),Jt=Jt+_a,bn=bn+Bc+(Jt>>>0<_a>>>0?1:0),ei.high=bn,ei.low=Jt}var ns=_t&Qn^~_t&eo,so=nt&Zr^~nt&ts,Ea=re&ke^re&et^ke&et,xr=ie&ue^ie&tt^ue&tt,Lc=(re>>>28|ie<<4)^(re<<30|ie>>>2)^(re<<25|ie>>>7),rs=(ie>>>28|re<<4)^(ie<<30|re>>>2)^(ie<<25|re>>>7),jc=(_t>>>14|nt<<18)^(_t>>>18|nt<<14)^(_t<<23|nt>>>9),is=(nt>>>14|_t<<18)^(nt>>>18|_t<<14)^(nt<<23|_t>>>9),wa=d[Xt],Et=wa.high,ba=wa.low,ut=gr+is,Zt=to+jc+(ut>>>0<gr>>>0?1:0),ut=ut+so,Zt=Zt+ns+(ut>>>0<so>>>0?1:0),ut=ut+ba,Zt=Zt+Et+(ut>>>0<ba>>>0?1:0),ut=ut+Jt,Zt=Zt+bn+(ut>>>0<Jt>>>0?1:0),Vc=rs+xr,Ef=Lc+Ea+(Vc>>>0<rs>>>0?1:0);to=eo,gr=ts,eo=Qn,ts=Zr,Qn=_t,Zr=nt,nt=dn+ut|0,_t=Ce+Zt+(nt>>>0<dn>>>0?1:0)|0,Ce=et,dn=tt,et=ke,tt=ue,ke=re,ue=ie,ie=ut+Vc|0,re=Zt+Ef+(ie>>>0<ut>>>0?1:0)|0}T=v.low=T+ie,v.high=k+re+(T>>>0<ie>>>0?1:0),N=g.low=N+ue,g.high=I+ke+(N>>>0<ue>>>0?1:0),K=_.low=K+tt,_.high=R+et+(K>>>0<tt>>>0?1:0),L=A.low=L+dn,A.high=q+Ce+(L>>>0<dn>>>0?1:0),j=P.low=j+nt,P.high=X+_t+(j>>>0<nt>>>0?1:0),Q=D.low=Q+Zr,D.high=W+Qn+(Q>>>0<Zr>>>0?1:0),V=C.low=V+ts,C.high=B+eo+(V>>>0<ts>>>0?1:0),H=b.low=H+gr,b.high=U+to+(H>>>0<gr>>>0?1:0)},_doFinalize:function(){var x=this._data,y=x.words,w=this._nDataBytes*8,v=x.sigBytes*8;y[v>>>5]|=128<<24-v%32,y[(v+128>>>10<<5)+30]=Math.floor(w/4294967296),y[(v+128>>>10<<5)+31]=w,x.sigBytes=y.length*4,this._process();var g=this._hash.toX32();return g},clone:function(){var x=s.clone.call(this);return x._hash=this._hash.clone(),x},blockSize:1024/32});r.SHA512=s._createHelper(m),r.HmacSHA512=s._createHmacHelper(m)}(),n.SHA512})}(W0)),W0.exports}var $0={exports:{}},NE;function kj(){return NE||(NE=1,function(t,e){(function(n,r,i){t.exports=r(ye(),vf(),yT())})(de,function(n){return function(){var r=n,i=r.x64,s=i.Word,o=i.WordArray,a=r.algo,l=a.SHA512,c=a.SHA384=l.extend({_doReset:function(){this._hash=new o.init([new s.init(3418070365,3238371032),new s.init(1654270250,914150663),new s.init(2438529370,812702999),new s.init(355462360,4144912697),new s.init(1731405415,4290775857),new s.init(2394180231,1750603025),new s.init(3675008525,1694076839),new s.init(1203062813,3204075428)])},_doFinalize:function(){var u=l._doFinalize.call(this);return u.sigBytes-=16,u}});r.SHA384=l._createHelper(c),r.HmacSHA384=l._createHmacHelper(c)}(),n.SHA384})}($0)),$0.exports}var q0={exports:{}},FE;function Pj(){return FE||(FE=1,function(t,e){(function(n,r,i){t.exports=r(ye(),vf())})(de,function(n){return function(r){var i=n,s=i.lib,o=s.WordArray,a=s.Hasher,l=i.x64,c=l.Word,u=i.algo,d=[],f=[],m=[];(function(){for(var w=1,v=0,g=0;g<24;g++){d[w+5*v]=(g+1)*(g+2)/2%64;var _=v%5,A=(2*w+3*v)%5;w=_,v=A}for(var w=0;w<5;w++)for(var v=0;v<5;v++)f[w+5*v]=v+(2*w+3*v)%5*5;for(var P=1,D=0;D<24;D++){for(var C=0,b=0,k=0;k<7;k++){if(P&1){var T=(1<<k)-1;T<32?b^=1<<T:C^=1<<T-32}P&128?P=P<<1^113:P<<=1}m[D]=c.create(C,b)}})();var x=[];(function(){for(var w=0;w<25;w++)x[w]=c.create()})();var y=u.SHA3=a.extend({cfg:a.cfg.extend({outputLength:512}),_doReset:function(){for(var w=this._state=[],v=0;v<25;v++)w[v]=new c.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(w,v){for(var g=this._state,_=this.blockSize/2,A=0;A<_;A++){var P=w[v+2*A],D=w[v+2*A+1];P=(P<<8|P>>>24)&16711935|(P<<24|P>>>8)&4278255360,D=(D<<8|D>>>24)&16711935|(D<<24|D>>>8)&4278255360;var C=g[A];C.high^=D,C.low^=P}for(var b=0;b<24;b++){for(var k=0;k<5;k++){for(var T=0,I=0,N=0;N<5;N++){var C=g[k+5*N];T^=C.high,I^=C.low}var R=x[k];R.high=T,R.low=I}for(var k=0;k<5;k++)for(var K=x[(k+4)%5],q=x[(k+1)%5],L=q.high,X=q.low,T=K.high^(L<<1|X>>>31),I=K.low^(X<<1|L>>>31),N=0;N<5;N++){var C=g[k+5*N];C.high^=T,C.low^=I}for(var j=1;j<25;j++){var T,I,C=g[j],W=C.high,Q=C.low,B=d[j];B<32?(T=W<<B|Q>>>32-B,I=Q<<B|W>>>32-B):(T=Q<<B-32|W>>>64-B,I=W<<B-32|Q>>>64-B);var V=x[f[j]];V.high=T,V.low=I}var U=x[0],H=g[0];U.high=H.high,U.low=H.low;for(var k=0;k<5;k++)for(var N=0;N<5;N++){var j=k+5*N,C=g[j],re=x[j],ie=x[(k+1)%5+5*N],ke=x[(k+2)%5+5*N];C.high=re.high^~ie.high&ke.high,C.low=re.low^~ie.low&ke.low}var C=g[0],ue=m[b];C.high^=ue.high,C.low^=ue.low}},_doFinalize:function(){var w=this._data,v=w.words;this._nDataBytes*8;var g=w.sigBytes*8,_=this.blockSize*32;v[g>>>5]|=1<<24-g%32,v[(r.ceil((g+1)/_)*_>>>5)-1]|=128,w.sigBytes=v.length*4,this._process();for(var A=this._state,P=this.cfg.outputLength/8,D=P/8,C=[],b=0;b<D;b++){var k=A[b],T=k.high,I=k.low;T=(T<<8|T>>>24)&16711935|(T<<24|T>>>8)&4278255360,I=(I<<8|I>>>24)&16711935|(I<<24|I>>>8)&4278255360,C.push(I),C.push(T)}return new o.init(C,P)},clone:function(){for(var w=a.clone.call(this),v=w._state=this._state.slice(0),g=0;g<25;g++)v[g]=v[g].clone();return w}});i.SHA3=a._createHelper(y),i.HmacSHA3=a._createHmacHelper(y)}(Math),n.SHA3})}(q0)),q0.exports}var K0={exports:{}},ME;function Dj(){return ME||(ME=1,function(t,e){(function(n,r){t.exports=r(ye())})(de,function(n){/** @preserve
			(c) 2012 by Cédric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return function(r){var i=n,s=i.lib,o=s.WordArray,a=s.Hasher,l=i.algo,c=o.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),u=o.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),d=o.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),f=o.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),m=o.create([0,1518500249,1859775393,2400959708,2840853838]),x=o.create([1352829926,1548603684,1836072691,2053994217,0]),y=l.RIPEMD160=a.extend({_doReset:function(){this._hash=o.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(D,C){for(var b=0;b<16;b++){var k=C+b,T=D[k];D[k]=(T<<8|T>>>24)&16711935|(T<<24|T>>>8)&4278255360}var I=this._hash.words,N=m.words,R=x.words,K=c.words,q=u.words,L=d.words,X=f.words,j,W,Q,B,V,U,H,re,ie,ke;U=j=I[0],H=W=I[1],re=Q=I[2],ie=B=I[3],ke=V=I[4];for(var ue,b=0;b<80;b+=1)ue=j+D[C+K[b]]|0,b<16?ue+=w(W,Q,B)+N[0]:b<32?ue+=v(W,Q,B)+N[1]:b<48?ue+=g(W,Q,B)+N[2]:b<64?ue+=_(W,Q,B)+N[3]:ue+=A(W,Q,B)+N[4],ue=ue|0,ue=P(ue,L[b]),ue=ue+V|0,j=V,V=B,B=P(Q,10),Q=W,W=ue,ue=U+D[C+q[b]]|0,b<16?ue+=A(H,re,ie)+R[0]:b<32?ue+=_(H,re,ie)+R[1]:b<48?ue+=g(H,re,ie)+R[2]:b<64?ue+=v(H,re,ie)+R[3]:ue+=w(H,re,ie)+R[4],ue=ue|0,ue=P(ue,X[b]),ue=ue+ke|0,U=ke,ke=ie,ie=P(re,10),re=H,H=ue;ue=I[1]+Q+ie|0,I[1]=I[2]+B+ke|0,I[2]=I[3]+V+U|0,I[3]=I[4]+j+H|0,I[4]=I[0]+W+re|0,I[0]=ue},_doFinalize:function(){var D=this._data,C=D.words,b=this._nDataBytes*8,k=D.sigBytes*8;C[k>>>5]|=128<<24-k%32,C[(k+64>>>9<<4)+14]=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,D.sigBytes=(C.length+1)*4,this._process();for(var T=this._hash,I=T.words,N=0;N<5;N++){var R=I[N];I[N]=(R<<8|R>>>24)&16711935|(R<<24|R>>>8)&4278255360}return T},clone:function(){var D=a.clone.call(this);return D._hash=this._hash.clone(),D}});function w(D,C,b){return D^C^b}function v(D,C,b){return D&C|~D&b}function g(D,C,b){return(D|~C)^b}function _(D,C,b){return D&b|C&~b}function A(D,C,b){return D^(C|~b)}function P(D,C){return D<<C|D>>>32-C}i.RIPEMD160=a._createHelper(y),i.HmacRIPEMD160=a._createHmacHelper(y)}(),n.RIPEMD160})}(K0)),K0.exports}var G0={exports:{}},OE;function Sv(){return OE||(OE=1,function(t,e){(function(n,r){t.exports=r(ye())})(de,function(n){(function(){var r=n,i=r.lib,s=i.Base,o=r.enc,a=o.Utf8,l=r.algo;l.HMAC=s.extend({init:function(c,u){c=this._hasher=new c.init,typeof u=="string"&&(u=a.parse(u));var d=c.blockSize,f=d*4;u.sigBytes>f&&(u=c.finalize(u)),u.clamp();for(var m=this._oKey=u.clone(),x=this._iKey=u.clone(),y=m.words,w=x.words,v=0;v<d;v++)y[v]^=1549556828,w[v]^=909522486;m.sigBytes=x.sigBytes=f,this.reset()},reset:function(){var c=this._hasher;c.reset(),c.update(this._iKey)},update:function(c){return this._hasher.update(c),this},finalize:function(c){var u=this._hasher,d=u.finalize(c);u.reset();var f=u.finalize(this._oKey.clone().concat(d));return f}})})()})}(G0)),G0.exports}var Q0={exports:{}},BE;function Rj(){return BE||(BE=1,function(t,e){(function(n,r,i){t.exports=r(ye(),Av(),Sv())})(de,function(n){return function(){var r=n,i=r.lib,s=i.Base,o=i.WordArray,a=r.algo,l=a.SHA256,c=a.HMAC,u=a.PBKDF2=s.extend({cfg:s.extend({keySize:128/32,hasher:l,iterations:25e4}),init:function(d){this.cfg=this.cfg.extend(d)},compute:function(d,f){for(var m=this.cfg,x=c.create(m.hasher,d),y=o.create(),w=o.create([1]),v=y.words,g=w.words,_=m.keySize,A=m.iterations;v.length<_;){var P=x.update(f).finalize(w);x.reset();for(var D=P.words,C=D.length,b=P,k=1;k<A;k++){b=x.finalize(b),x.reset();for(var T=b.words,I=0;I<C;I++)D[I]^=T[I]}y.concat(P),g[0]++}return y.sigBytes=_*4,y}});r.PBKDF2=function(d,f,m){return u.create(m).compute(d,f)}}(),n.PBKDF2})}(Q0)),Q0.exports}var Y0={exports:{}},LE;function es(){return LE||(LE=1,function(t,e){(function(n,r,i){t.exports=r(ye(),vT(),Sv())})(de,function(n){return function(){var r=n,i=r.lib,s=i.Base,o=i.WordArray,a=r.algo,l=a.MD5,c=a.EvpKDF=s.extend({cfg:s.extend({keySize:128/32,hasher:l,iterations:1}),init:function(u){this.cfg=this.cfg.extend(u)},compute:function(u,d){for(var f,m=this.cfg,x=m.hasher.create(),y=o.create(),w=y.words,v=m.keySize,g=m.iterations;w.length<v;){f&&x.update(f),f=x.update(u).finalize(d),x.reset();for(var _=1;_<g;_++)f=x.finalize(f),x.reset();y.concat(f)}return y.sigBytes=v*4,y}});r.EvpKDF=function(u,d,f){return c.create(f).compute(u,d)}}(),n.EvpKDF})}(Y0)),Y0.exports}var X0={exports:{}},jE;function yt(){return jE||(jE=1,function(t,e){(function(n,r,i){t.exports=r(ye(),es())})(de,function(n){n.lib.Cipher||function(r){var i=n,s=i.lib,o=s.Base,a=s.WordArray,l=s.BufferedBlockAlgorithm,c=i.enc;c.Utf8;var u=c.Base64,d=i.algo,f=d.EvpKDF,m=s.Cipher=l.extend({cfg:o.extend(),createEncryptor:function(T,I){return this.create(this._ENC_XFORM_MODE,T,I)},createDecryptor:function(T,I){return this.create(this._DEC_XFORM_MODE,T,I)},init:function(T,I,N){this.cfg=this.cfg.extend(N),this._xformMode=T,this._key=I,this.reset()},reset:function(){l.reset.call(this),this._doReset()},process:function(T){return this._append(T),this._process()},finalize:function(T){T&&this._append(T);var I=this._doFinalize();return I},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function T(I){return typeof I=="string"?k:D}return function(I){return{encrypt:function(N,R,K){return T(R).encrypt(I,N,R,K)},decrypt:function(N,R,K){return T(R).decrypt(I,N,R,K)}}}}()});s.StreamCipher=m.extend({_doFinalize:function(){var T=this._process(!0);return T},blockSize:1});var x=i.mode={},y=s.BlockCipherMode=o.extend({createEncryptor:function(T,I){return this.Encryptor.create(T,I)},createDecryptor:function(T,I){return this.Decryptor.create(T,I)},init:function(T,I){this._cipher=T,this._iv=I}}),w=x.CBC=function(){var T=y.extend();T.Encryptor=T.extend({processBlock:function(N,R){var K=this._cipher,q=K.blockSize;I.call(this,N,R,q),K.encryptBlock(N,R),this._prevBlock=N.slice(R,R+q)}}),T.Decryptor=T.extend({processBlock:function(N,R){var K=this._cipher,q=K.blockSize,L=N.slice(R,R+q);K.decryptBlock(N,R),I.call(this,N,R,q),this._prevBlock=L}});function I(N,R,K){var q,L=this._iv;L?(q=L,this._iv=r):q=this._prevBlock;for(var X=0;X<K;X++)N[R+X]^=q[X]}return T}(),v=i.pad={},g=v.Pkcs7={pad:function(T,I){for(var N=I*4,R=N-T.sigBytes%N,K=R<<24|R<<16|R<<8|R,q=[],L=0;L<R;L+=4)q.push(K);var X=a.create(q,R);T.concat(X)},unpad:function(T){var I=T.words[T.sigBytes-1>>>2]&255;T.sigBytes-=I}};s.BlockCipher=m.extend({cfg:m.cfg.extend({mode:w,padding:g}),reset:function(){var T;m.reset.call(this);var I=this.cfg,N=I.iv,R=I.mode;this._xformMode==this._ENC_XFORM_MODE?T=R.createEncryptor:(T=R.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==T?this._mode.init(this,N&&N.words):(this._mode=T.call(R,this,N&&N.words),this._mode.__creator=T)},_doProcessBlock:function(T,I){this._mode.processBlock(T,I)},_doFinalize:function(){var T,I=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(I.pad(this._data,this.blockSize),T=this._process(!0)):(T=this._process(!0),I.unpad(T)),T},blockSize:128/32});var _=s.CipherParams=o.extend({init:function(T){this.mixIn(T)},toString:function(T){return(T||this.formatter).stringify(this)}}),A=i.format={},P=A.OpenSSL={stringify:function(T){var I,N=T.ciphertext,R=T.salt;return R?I=a.create([1398893684,1701076831]).concat(R).concat(N):I=N,I.toString(u)},parse:function(T){var I,N=u.parse(T),R=N.words;return R[0]==1398893684&&R[1]==1701076831&&(I=a.create(R.slice(2,4)),R.splice(0,4),N.sigBytes-=16),_.create({ciphertext:N,salt:I})}},D=s.SerializableCipher=o.extend({cfg:o.extend({format:P}),encrypt:function(T,I,N,R){R=this.cfg.extend(R);var K=T.createEncryptor(N,R),q=K.finalize(I),L=K.cfg;return _.create({ciphertext:q,key:N,iv:L.iv,algorithm:T,mode:L.mode,padding:L.padding,blockSize:T.blockSize,formatter:R.format})},decrypt:function(T,I,N,R){R=this.cfg.extend(R),I=this._parse(I,R.format);var K=T.createDecryptor(N,R).finalize(I.ciphertext);return K},_parse:function(T,I){return typeof T=="string"?I.parse(T,this):T}}),C=i.kdf={},b=C.OpenSSL={execute:function(T,I,N,R,K){if(R||(R=a.random(64/8)),K)var q=f.create({keySize:I+N,hasher:K}).compute(T,R);else var q=f.create({keySize:I+N}).compute(T,R);var L=a.create(q.words.slice(I),N*4);return q.sigBytes=I*4,_.create({key:q,iv:L,salt:R})}},k=s.PasswordBasedCipher=D.extend({cfg:D.cfg.extend({kdf:b}),encrypt:function(T,I,N,R){R=this.cfg.extend(R);var K=R.kdf.execute(N,T.keySize,T.ivSize,R.salt,R.hasher);R.iv=K.iv;var q=D.encrypt.call(this,T,I,K.key,R);return q.mixIn(K),q},decrypt:function(T,I,N,R){R=this.cfg.extend(R),I=this._parse(I,R.format);var K=R.kdf.execute(N,T.keySize,T.ivSize,I.salt,R.hasher);R.iv=K.iv;var q=D.decrypt.call(this,T,I,K.key,R);return q}})}()})}(X0)),X0.exports}var J0={exports:{}},VE;function Nj(){return VE||(VE=1,function(t,e){(function(n,r,i){t.exports=r(ye(),yt())})(de,function(n){return n.mode.CFB=function(){var r=n.lib.BlockCipherMode.extend();r.Encryptor=r.extend({processBlock:function(s,o){var a=this._cipher,l=a.blockSize;i.call(this,s,o,l,a),this._prevBlock=s.slice(o,o+l)}}),r.Decryptor=r.extend({processBlock:function(s,o){var a=this._cipher,l=a.blockSize,c=s.slice(o,o+l);i.call(this,s,o,l,a),this._prevBlock=c}});function i(s,o,a,l){var c,u=this._iv;u?(c=u.slice(0),this._iv=void 0):c=this._prevBlock,l.encryptBlock(c,0);for(var d=0;d<a;d++)s[o+d]^=c[d]}return r}(),n.mode.CFB})}(J0)),J0.exports}var Z0={exports:{}},zE;function Fj(){return zE||(zE=1,function(t,e){(function(n,r,i){t.exports=r(ye(),yt())})(de,function(n){return n.mode.CTR=function(){var r=n.lib.BlockCipherMode.extend(),i=r.Encryptor=r.extend({processBlock:function(s,o){var a=this._cipher,l=a.blockSize,c=this._iv,u=this._counter;c&&(u=this._counter=c.slice(0),this._iv=void 0);var d=u.slice(0);a.encryptBlock(d,0),u[l-1]=u[l-1]+1|0;for(var f=0;f<l;f++)s[o+f]^=d[f]}});return r.Decryptor=i,r}(),n.mode.CTR})}(Z0)),Z0.exports}var ep={exports:{}},UE;function Mj(){return UE||(UE=1,function(t,e){(function(n,r,i){t.exports=r(ye(),yt())})(de,function(n){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return n.mode.CTRGladman=function(){var r=n.lib.BlockCipherMode.extend();function i(a){if((a>>24&255)===255){var l=a>>16&255,c=a>>8&255,u=a&255;l===255?(l=0,c===255?(c=0,u===255?u=0:++u):++c):++l,a=0,a+=l<<16,a+=c<<8,a+=u}else a+=1<<24;return a}function s(a){return(a[0]=i(a[0]))===0&&(a[1]=i(a[1])),a}var o=r.Encryptor=r.extend({processBlock:function(a,l){var c=this._cipher,u=c.blockSize,d=this._iv,f=this._counter;d&&(f=this._counter=d.slice(0),this._iv=void 0),s(f);var m=f.slice(0);c.encryptBlock(m,0);for(var x=0;x<u;x++)a[l+x]^=m[x]}});return r.Decryptor=o,r}(),n.mode.CTRGladman})}(ep)),ep.exports}var tp={exports:{}},HE;function Oj(){return HE||(HE=1,function(t,e){(function(n,r,i){t.exports=r(ye(),yt())})(de,function(n){return n.mode.OFB=function(){var r=n.lib.BlockCipherMode.extend(),i=r.Encryptor=r.extend({processBlock:function(s,o){var a=this._cipher,l=a.blockSize,c=this._iv,u=this._keystream;c&&(u=this._keystream=c.slice(0),this._iv=void 0),a.encryptBlock(u,0);for(var d=0;d<l;d++)s[o+d]^=u[d]}});return r.Decryptor=i,r}(),n.mode.OFB})}(tp)),tp.exports}var np={exports:{}},WE;function Bj(){return WE||(WE=1,function(t,e){(function(n,r,i){t.exports=r(ye(),yt())})(de,function(n){return n.mode.ECB=function(){var r=n.lib.BlockCipherMode.extend();return r.Encryptor=r.extend({processBlock:function(i,s){this._cipher.encryptBlock(i,s)}}),r.Decryptor=r.extend({processBlock:function(i,s){this._cipher.decryptBlock(i,s)}}),r}(),n.mode.ECB})}(np)),np.exports}var rp={exports:{}},$E;function Lj(){return $E||($E=1,function(t,e){(function(n,r,i){t.exports=r(ye(),yt())})(de,function(n){return n.pad.AnsiX923={pad:function(r,i){var s=r.sigBytes,o=i*4,a=o-s%o,l=s+a-1;r.clamp(),r.words[l>>>2]|=a<<24-l%4*8,r.sigBytes+=a},unpad:function(r){var i=r.words[r.sigBytes-1>>>2]&255;r.sigBytes-=i}},n.pad.Ansix923})}(rp)),rp.exports}var ip={exports:{}},qE;function jj(){return qE||(qE=1,function(t,e){(function(n,r,i){t.exports=r(ye(),yt())})(de,function(n){return n.pad.Iso10126={pad:function(r,i){var s=i*4,o=s-r.sigBytes%s;r.concat(n.lib.WordArray.random(o-1)).concat(n.lib.WordArray.create([o<<24],1))},unpad:function(r){var i=r.words[r.sigBytes-1>>>2]&255;r.sigBytes-=i}},n.pad.Iso10126})}(ip)),ip.exports}var sp={exports:{}},KE;function Vj(){return KE||(KE=1,function(t,e){(function(n,r,i){t.exports=r(ye(),yt())})(de,function(n){return n.pad.Iso97971={pad:function(r,i){r.concat(n.lib.WordArray.create([2147483648],1)),n.pad.ZeroPadding.pad(r,i)},unpad:function(r){n.pad.ZeroPadding.unpad(r),r.sigBytes--}},n.pad.Iso97971})}(sp)),sp.exports}var op={exports:{}},GE;function zj(){return GE||(GE=1,function(t,e){(function(n,r,i){t.exports=r(ye(),yt())})(de,function(n){return n.pad.ZeroPadding={pad:function(r,i){var s=i*4;r.clamp(),r.sigBytes+=s-(r.sigBytes%s||s)},unpad:function(r){for(var i=r.words,s=r.sigBytes-1,s=r.sigBytes-1;s>=0;s--)if(i[s>>>2]>>>24-s%4*8&255){r.sigBytes=s+1;break}}},n.pad.ZeroPadding})}(op)),op.exports}var ap={exports:{}},QE;function Uj(){return QE||(QE=1,function(t,e){(function(n,r,i){t.exports=r(ye(),yt())})(de,function(n){return n.pad.NoPadding={pad:function(){},unpad:function(){}},n.pad.NoPadding})}(ap)),ap.exports}var lp={exports:{}},YE;function Hj(){return YE||(YE=1,function(t,e){(function(n,r,i){t.exports=r(ye(),yt())})(de,function(n){return function(r){var i=n,s=i.lib,o=s.CipherParams,a=i.enc,l=a.Hex,c=i.format;c.Hex={stringify:function(u){return u.ciphertext.toString(l)},parse:function(u){var d=l.parse(u);return o.create({ciphertext:d})}}}(),n.format.Hex})}(lp)),lp.exports}var cp={exports:{}},XE;function Wj(){return XE||(XE=1,function(t,e){(function(n,r,i){t.exports=r(ye(),Js(),Zs(),es(),yt())})(de,function(n){return function(){var r=n,i=r.lib,s=i.BlockCipher,o=r.algo,a=[],l=[],c=[],u=[],d=[],f=[],m=[],x=[],y=[],w=[];(function(){for(var _=[],A=0;A<256;A++)A<128?_[A]=A<<1:_[A]=A<<1^283;for(var P=0,D=0,A=0;A<256;A++){var C=D^D<<1^D<<2^D<<3^D<<4;C=C>>>8^C&255^99,a[P]=C,l[C]=P;var b=_[P],k=_[b],T=_[k],I=_[C]*257^C*16843008;c[P]=I<<24|I>>>8,u[P]=I<<16|I>>>16,d[P]=I<<8|I>>>24,f[P]=I;var I=T*16843009^k*65537^b*257^P*16843008;m[C]=I<<24|I>>>8,x[C]=I<<16|I>>>16,y[C]=I<<8|I>>>24,w[C]=I,P?(P=b^_[_[_[T^b]]],D^=_[_[D]]):P=D=1}})();var v=[0,1,2,4,8,16,32,64,128,27,54],g=o.AES=s.extend({_doReset:function(){var _;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var A=this._keyPriorReset=this._key,P=A.words,D=A.sigBytes/4,C=this._nRounds=D+6,b=(C+1)*4,k=this._keySchedule=[],T=0;T<b;T++)T<D?k[T]=P[T]:(_=k[T-1],T%D?D>6&&T%D==4&&(_=a[_>>>24]<<24|a[_>>>16&255]<<16|a[_>>>8&255]<<8|a[_&255]):(_=_<<8|_>>>24,_=a[_>>>24]<<24|a[_>>>16&255]<<16|a[_>>>8&255]<<8|a[_&255],_^=v[T/D|0]<<24),k[T]=k[T-D]^_);for(var I=this._invKeySchedule=[],N=0;N<b;N++){var T=b-N;if(N%4)var _=k[T];else var _=k[T-4];N<4||T<=4?I[N]=_:I[N]=m[a[_>>>24]]^x[a[_>>>16&255]]^y[a[_>>>8&255]]^w[a[_&255]]}}},encryptBlock:function(_,A){this._doCryptBlock(_,A,this._keySchedule,c,u,d,f,a)},decryptBlock:function(_,A){var P=_[A+1];_[A+1]=_[A+3],_[A+3]=P,this._doCryptBlock(_,A,this._invKeySchedule,m,x,y,w,l);var P=_[A+1];_[A+1]=_[A+3],_[A+3]=P},_doCryptBlock:function(_,A,P,D,C,b,k,T){for(var I=this._nRounds,N=_[A]^P[0],R=_[A+1]^P[1],K=_[A+2]^P[2],q=_[A+3]^P[3],L=4,X=1;X<I;X++){var j=D[N>>>24]^C[R>>>16&255]^b[K>>>8&255]^k[q&255]^P[L++],W=D[R>>>24]^C[K>>>16&255]^b[q>>>8&255]^k[N&255]^P[L++],Q=D[K>>>24]^C[q>>>16&255]^b[N>>>8&255]^k[R&255]^P[L++],B=D[q>>>24]^C[N>>>16&255]^b[R>>>8&255]^k[K&255]^P[L++];N=j,R=W,K=Q,q=B}var j=(T[N>>>24]<<24|T[R>>>16&255]<<16|T[K>>>8&255]<<8|T[q&255])^P[L++],W=(T[R>>>24]<<24|T[K>>>16&255]<<16|T[q>>>8&255]<<8|T[N&255])^P[L++],Q=(T[K>>>24]<<24|T[q>>>16&255]<<16|T[N>>>8&255]<<8|T[R&255])^P[L++],B=(T[q>>>24]<<24|T[N>>>16&255]<<16|T[R>>>8&255]<<8|T[K&255])^P[L++];_[A]=j,_[A+1]=W,_[A+2]=Q,_[A+3]=B},keySize:256/32});r.AES=s._createHelper(g)}(),n.AES})}(cp)),cp.exports}var up={exports:{}},JE;function $j(){return JE||(JE=1,function(t,e){(function(n,r,i){t.exports=r(ye(),Js(),Zs(),es(),yt())})(de,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=i.BlockCipher,a=r.algo,l=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],c=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],u=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],d=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],f=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],m=a.DES=o.extend({_doReset:function(){for(var v=this._key,g=v.words,_=[],A=0;A<56;A++){var P=l[A]-1;_[A]=g[P>>>5]>>>31-P%32&1}for(var D=this._subKeys=[],C=0;C<16;C++){for(var b=D[C]=[],k=u[C],A=0;A<24;A++)b[A/6|0]|=_[(c[A]-1+k)%28]<<31-A%6,b[4+(A/6|0)]|=_[28+(c[A+24]-1+k)%28]<<31-A%6;b[0]=b[0]<<1|b[0]>>>31;for(var A=1;A<7;A++)b[A]=b[A]>>>(A-1)*4+3;b[7]=b[7]<<5|b[7]>>>27}for(var T=this._invSubKeys=[],A=0;A<16;A++)T[A]=D[15-A]},encryptBlock:function(v,g){this._doCryptBlock(v,g,this._subKeys)},decryptBlock:function(v,g){this._doCryptBlock(v,g,this._invSubKeys)},_doCryptBlock:function(v,g,_){this._lBlock=v[g],this._rBlock=v[g+1],x.call(this,4,252645135),x.call(this,16,65535),y.call(this,2,858993459),y.call(this,8,16711935),x.call(this,1,1431655765);for(var A=0;A<16;A++){for(var P=_[A],D=this._lBlock,C=this._rBlock,b=0,k=0;k<8;k++)b|=d[k][((C^P[k])&f[k])>>>0];this._lBlock=C,this._rBlock=D^b}var T=this._lBlock;this._lBlock=this._rBlock,this._rBlock=T,x.call(this,1,1431655765),y.call(this,8,16711935),y.call(this,2,858993459),x.call(this,16,65535),x.call(this,4,252645135),v[g]=this._lBlock,v[g+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function x(v,g){var _=(this._lBlock>>>v^this._rBlock)&g;this._rBlock^=_,this._lBlock^=_<<v}function y(v,g){var _=(this._rBlock>>>v^this._lBlock)&g;this._lBlock^=_,this._rBlock^=_<<v}r.DES=o._createHelper(m);var w=a.TripleDES=o.extend({_doReset:function(){var v=this._key,g=v.words;if(g.length!==2&&g.length!==4&&g.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var _=g.slice(0,2),A=g.length<4?g.slice(0,2):g.slice(2,4),P=g.length<6?g.slice(0,2):g.slice(4,6);this._des1=m.createEncryptor(s.create(_)),this._des2=m.createEncryptor(s.create(A)),this._des3=m.createEncryptor(s.create(P))},encryptBlock:function(v,g){this._des1.encryptBlock(v,g),this._des2.decryptBlock(v,g),this._des3.encryptBlock(v,g)},decryptBlock:function(v,g){this._des3.decryptBlock(v,g),this._des2.encryptBlock(v,g),this._des1.decryptBlock(v,g)},keySize:192/32,ivSize:64/32,blockSize:64/32});r.TripleDES=o._createHelper(w)}(),n.TripleDES})}(up)),up.exports}var hp={exports:{}},ZE;function qj(){return ZE||(ZE=1,function(t,e){(function(n,r,i){t.exports=r(ye(),Js(),Zs(),es(),yt())})(de,function(n){return function(){var r=n,i=r.lib,s=i.StreamCipher,o=r.algo,a=o.RC4=s.extend({_doReset:function(){for(var u=this._key,d=u.words,f=u.sigBytes,m=this._S=[],x=0;x<256;x++)m[x]=x;for(var x=0,y=0;x<256;x++){var w=x%f,v=d[w>>>2]>>>24-w%4*8&255;y=(y+m[x]+v)%256;var g=m[x];m[x]=m[y],m[y]=g}this._i=this._j=0},_doProcessBlock:function(u,d){u[d]^=l.call(this)},keySize:256/32,ivSize:0});function l(){for(var u=this._S,d=this._i,f=this._j,m=0,x=0;x<4;x++){d=(d+1)%256,f=(f+u[d])%256;var y=u[d];u[d]=u[f],u[f]=y,m|=u[(u[d]+u[f])%256]<<24-x*8}return this._i=d,this._j=f,m}r.RC4=s._createHelper(a);var c=o.RC4Drop=a.extend({cfg:a.cfg.extend({drop:192}),_doReset:function(){a._doReset.call(this);for(var u=this.cfg.drop;u>0;u--)l.call(this)}});r.RC4Drop=s._createHelper(c)}(),n.RC4})}(hp)),hp.exports}var dp={exports:{}},ew;function Kj(){return ew||(ew=1,function(t,e){(function(n,r,i){t.exports=r(ye(),Js(),Zs(),es(),yt())})(de,function(n){return function(){var r=n,i=r.lib,s=i.StreamCipher,o=r.algo,a=[],l=[],c=[],u=o.Rabbit=s.extend({_doReset:function(){for(var f=this._key.words,m=this.cfg.iv,x=0;x<4;x++)f[x]=(f[x]<<8|f[x]>>>24)&16711935|(f[x]<<24|f[x]>>>8)&4278255360;var y=this._X=[f[0],f[3]<<16|f[2]>>>16,f[1],f[0]<<16|f[3]>>>16,f[2],f[1]<<16|f[0]>>>16,f[3],f[2]<<16|f[1]>>>16],w=this._C=[f[2]<<16|f[2]>>>16,f[0]&4294901760|f[1]&65535,f[3]<<16|f[3]>>>16,f[1]&4294901760|f[2]&65535,f[0]<<16|f[0]>>>16,f[2]&4294901760|f[3]&65535,f[1]<<16|f[1]>>>16,f[3]&4294901760|f[0]&65535];this._b=0;for(var x=0;x<4;x++)d.call(this);for(var x=0;x<8;x++)w[x]^=y[x+4&7];if(m){var v=m.words,g=v[0],_=v[1],A=(g<<8|g>>>24)&16711935|(g<<24|g>>>8)&4278255360,P=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360,D=A>>>16|P&4294901760,C=P<<16|A&65535;w[0]^=A,w[1]^=D,w[2]^=P,w[3]^=C,w[4]^=A,w[5]^=D,w[6]^=P,w[7]^=C;for(var x=0;x<4;x++)d.call(this)}},_doProcessBlock:function(f,m){var x=this._X;d.call(this),a[0]=x[0]^x[5]>>>16^x[3]<<16,a[1]=x[2]^x[7]>>>16^x[5]<<16,a[2]=x[4]^x[1]>>>16^x[7]<<16,a[3]=x[6]^x[3]>>>16^x[1]<<16;for(var y=0;y<4;y++)a[y]=(a[y]<<8|a[y]>>>24)&16711935|(a[y]<<24|a[y]>>>8)&4278255360,f[m+y]^=a[y]},blockSize:128/32,ivSize:64/32});function d(){for(var f=this._X,m=this._C,x=0;x<8;x++)l[x]=m[x];m[0]=m[0]+1295307597+this._b|0,m[1]=m[1]+3545052371+(m[0]>>>0<l[0]>>>0?1:0)|0,m[2]=m[2]+886263092+(m[1]>>>0<l[1]>>>0?1:0)|0,m[3]=m[3]+1295307597+(m[2]>>>0<l[2]>>>0?1:0)|0,m[4]=m[4]+3545052371+(m[3]>>>0<l[3]>>>0?1:0)|0,m[5]=m[5]+886263092+(m[4]>>>0<l[4]>>>0?1:0)|0,m[6]=m[6]+1295307597+(m[5]>>>0<l[5]>>>0?1:0)|0,m[7]=m[7]+3545052371+(m[6]>>>0<l[6]>>>0?1:0)|0,this._b=m[7]>>>0<l[7]>>>0?1:0;for(var x=0;x<8;x++){var y=f[x]+m[x],w=y&65535,v=y>>>16,g=((w*w>>>17)+w*v>>>15)+v*v,_=((y&4294901760)*y|0)+((y&65535)*y|0);c[x]=g^_}f[0]=c[0]+(c[7]<<16|c[7]>>>16)+(c[6]<<16|c[6]>>>16)|0,f[1]=c[1]+(c[0]<<8|c[0]>>>24)+c[7]|0,f[2]=c[2]+(c[1]<<16|c[1]>>>16)+(c[0]<<16|c[0]>>>16)|0,f[3]=c[3]+(c[2]<<8|c[2]>>>24)+c[1]|0,f[4]=c[4]+(c[3]<<16|c[3]>>>16)+(c[2]<<16|c[2]>>>16)|0,f[5]=c[5]+(c[4]<<8|c[4]>>>24)+c[3]|0,f[6]=c[6]+(c[5]<<16|c[5]>>>16)+(c[4]<<16|c[4]>>>16)|0,f[7]=c[7]+(c[6]<<8|c[6]>>>24)+c[5]|0}r.Rabbit=s._createHelper(u)}(),n.Rabbit})}(dp)),dp.exports}var fp={exports:{}},tw;function Gj(){return tw||(tw=1,function(t,e){(function(n,r,i){t.exports=r(ye(),Js(),Zs(),es(),yt())})(de,function(n){return function(){var r=n,i=r.lib,s=i.StreamCipher,o=r.algo,a=[],l=[],c=[],u=o.RabbitLegacy=s.extend({_doReset:function(){var f=this._key.words,m=this.cfg.iv,x=this._X=[f[0],f[3]<<16|f[2]>>>16,f[1],f[0]<<16|f[3]>>>16,f[2],f[1]<<16|f[0]>>>16,f[3],f[2]<<16|f[1]>>>16],y=this._C=[f[2]<<16|f[2]>>>16,f[0]&4294901760|f[1]&65535,f[3]<<16|f[3]>>>16,f[1]&4294901760|f[2]&65535,f[0]<<16|f[0]>>>16,f[2]&4294901760|f[3]&65535,f[1]<<16|f[1]>>>16,f[3]&4294901760|f[0]&65535];this._b=0;for(var w=0;w<4;w++)d.call(this);for(var w=0;w<8;w++)y[w]^=x[w+4&7];if(m){var v=m.words,g=v[0],_=v[1],A=(g<<8|g>>>24)&16711935|(g<<24|g>>>8)&4278255360,P=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360,D=A>>>16|P&4294901760,C=P<<16|A&65535;y[0]^=A,y[1]^=D,y[2]^=P,y[3]^=C,y[4]^=A,y[5]^=D,y[6]^=P,y[7]^=C;for(var w=0;w<4;w++)d.call(this)}},_doProcessBlock:function(f,m){var x=this._X;d.call(this),a[0]=x[0]^x[5]>>>16^x[3]<<16,a[1]=x[2]^x[7]>>>16^x[5]<<16,a[2]=x[4]^x[1]>>>16^x[7]<<16,a[3]=x[6]^x[3]>>>16^x[1]<<16;for(var y=0;y<4;y++)a[y]=(a[y]<<8|a[y]>>>24)&16711935|(a[y]<<24|a[y]>>>8)&4278255360,f[m+y]^=a[y]},blockSize:128/32,ivSize:64/32});function d(){for(var f=this._X,m=this._C,x=0;x<8;x++)l[x]=m[x];m[0]=m[0]+1295307597+this._b|0,m[1]=m[1]+3545052371+(m[0]>>>0<l[0]>>>0?1:0)|0,m[2]=m[2]+886263092+(m[1]>>>0<l[1]>>>0?1:0)|0,m[3]=m[3]+1295307597+(m[2]>>>0<l[2]>>>0?1:0)|0,m[4]=m[4]+3545052371+(m[3]>>>0<l[3]>>>0?1:0)|0,m[5]=m[5]+886263092+(m[4]>>>0<l[4]>>>0?1:0)|0,m[6]=m[6]+1295307597+(m[5]>>>0<l[5]>>>0?1:0)|0,m[7]=m[7]+3545052371+(m[6]>>>0<l[6]>>>0?1:0)|0,this._b=m[7]>>>0<l[7]>>>0?1:0;for(var x=0;x<8;x++){var y=f[x]+m[x],w=y&65535,v=y>>>16,g=((w*w>>>17)+w*v>>>15)+v*v,_=((y&4294901760)*y|0)+((y&65535)*y|0);c[x]=g^_}f[0]=c[0]+(c[7]<<16|c[7]>>>16)+(c[6]<<16|c[6]>>>16)|0,f[1]=c[1]+(c[0]<<8|c[0]>>>24)+c[7]|0,f[2]=c[2]+(c[1]<<16|c[1]>>>16)+(c[0]<<16|c[0]>>>16)|0,f[3]=c[3]+(c[2]<<8|c[2]>>>24)+c[1]|0,f[4]=c[4]+(c[3]<<16|c[3]>>>16)+(c[2]<<16|c[2]>>>16)|0,f[5]=c[5]+(c[4]<<8|c[4]>>>24)+c[3]|0,f[6]=c[6]+(c[5]<<16|c[5]>>>16)+(c[4]<<16|c[4]>>>16)|0,f[7]=c[7]+(c[6]<<8|c[6]>>>24)+c[5]|0}r.RabbitLegacy=s._createHelper(u)}(),n.RabbitLegacy})}(fp)),fp.exports}var pp={exports:{}},nw;function Qj(){return nw||(nw=1,function(t,e){(function(n,r,i){t.exports=r(ye(),Js(),Zs(),es(),yt())})(de,function(n){return function(){var r=n,i=r.lib,s=i.BlockCipher,o=r.algo;const a=16,l=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],c=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var u={pbox:[],sbox:[]};function d(w,v){let g=v>>24&255,_=v>>16&255,A=v>>8&255,P=v&255,D=w.sbox[0][g]+w.sbox[1][_];return D=D^w.sbox[2][A],D=D+w.sbox[3][P],D}function f(w,v,g){let _=v,A=g,P;for(let D=0;D<a;++D)_=_^w.pbox[D],A=d(w,_)^A,P=_,_=A,A=P;return P=_,_=A,A=P,A=A^w.pbox[a],_=_^w.pbox[a+1],{left:_,right:A}}function m(w,v,g){let _=v,A=g,P;for(let D=a+1;D>1;--D)_=_^w.pbox[D],A=d(w,_)^A,P=_,_=A,A=P;return P=_,_=A,A=P,A=A^w.pbox[1],_=_^w.pbox[0],{left:_,right:A}}function x(w,v,g){for(let C=0;C<4;C++){w.sbox[C]=[];for(let b=0;b<256;b++)w.sbox[C][b]=c[C][b]}let _=0;for(let C=0;C<a+2;C++)w.pbox[C]=l[C]^v[_],_++,_>=g&&(_=0);let A=0,P=0,D=0;for(let C=0;C<a+2;C+=2)D=f(w,A,P),A=D.left,P=D.right,w.pbox[C]=A,w.pbox[C+1]=P;for(let C=0;C<4;C++)for(let b=0;b<256;b+=2)D=f(w,A,P),A=D.left,P=D.right,w.sbox[C][b]=A,w.sbox[C][b+1]=P;return!0}var y=o.Blowfish=s.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var w=this._keyPriorReset=this._key,v=w.words,g=w.sigBytes/4;x(u,v,g)}},encryptBlock:function(w,v){var g=f(u,w[v],w[v+1]);w[v]=g.left,w[v+1]=g.right},decryptBlock:function(w,v){var g=m(u,w[v],w[v+1]);w[v]=g.left,w[v+1]=g.right},blockSize:64/32,keySize:128/32,ivSize:64/32});r.Blowfish=s._createHelper(y)}(),n.Blowfish})}(pp)),pp.exports}(function(t,e){(function(n,r,i){t.exports=r(ye(),vf(),Aj(),Sj(),Js(),Tj(),Zs(),vT(),Av(),Ij(),yT(),kj(),Pj(),Dj(),Sv(),Rj(),es(),yt(),Nj(),Fj(),Mj(),Oj(),Bj(),Lj(),jj(),Vj(),zj(),Uj(),Hj(),Wj(),$j(),qj(),Kj(),Gj(),Qj())})(de,function(n){return n})})(xT);var Yj=xT.exports;const Xj=iw(Yj),Jj=({currentUser:t})=>{const e=M.useRef(null);return M.useEffect(()=>{const n=(t==null?void 0:t.uid)||"guest_user",i=Xj.HmacSHA256(n,"dbjin8z9tdvktq2dkm661iecb1uxkcjn").toString(),s=document.getElementById("chatbase-frame");s&&s.remove();const o=document.createElement("iframe");o.src=`https://www.chatbase.co/chatbot-iframe/YqM2rVJeK1WB1LyvIDGy7?userId=${n}&signature=${i}`,o.width="100%",o.height="100%",o.style.border="none",o.id="chatbase-frame",e.current&&(e.current.innerHTML="",e.current.appendChild(o))},[t]),p.jsxs("div",{className:"ai-chat-fullscreen",children:[" ",p.jsx("h1",{className:"page-title",children:"AI Business Assistant "})," ",p.jsx("div",{ref:e,className:"chatbot-container"})," "]})},Zj=({user:t})=>{const{updateUserProfile:e}=Yt(),[n,r]=M.useState(!1),[i,s]=M.useState(""),[o,a]=M.useState(""),[l,c]=M.useState({displayName:"",email:"",phoneNumber:""}),[u,d]=M.useState(null),[f,m]=M.useState(null);M.useEffect(()=>{if(!t)return;c({displayName:t.displayName||"",email:t.email||"",phoneNumber:""}),t.photoURL&&m(t.photoURL),(async()=>{try{const g=await Kx(hn(Ve,"users",t.uid));if(g.exists()){const _=g.data();c(A=>({...A,phoneNumber:_.phoneNumber||""}))}}catch(g){console.error("Error fetching user data:",g)}})()},[t]);const x=v=>{const{name:g,value:_}=v.target;c(A=>({...A,[g]:_}))},y=v=>{const g=v.target.files[0];if(!g)return;d(g);const _=new FileReader;_.onloadend=()=>{m(_.result)},_.readAsDataURL(g)},w=async v=>{v.preventDefault(),r(!0),a(""),s("");try{let g=t.photoURL;if(u){const _=jm(Vm,`users/${t.uid}/profile-image`);await PF(_,u),g=await DF(_)}await dC(t,{displayName:l.displayName,photoURL:g}),await WA(hn(Ve,"users",t.uid),{displayName:l.displayName,phoneNumber:l.phoneNumber,photoURL:g,updatedAt:new Date},{merge:!0}),s("Profile updated successfully!")}catch(g){console.error("Error updating profile:",g),a("Failed to update profile. Please try again.")}r(!1)};return p.jsxs("div",{className:"profile-settings",children:[p.jsx("h2",{className:"section-title",children:"Profile Settings"}),o&&p.jsx("div",{className:"error-message",children:o}),i&&p.jsx("div",{className:"success-message",children:i}),p.jsxs("form",{onSubmit:w,className:"settings-form",children:[p.jsx("div",{className:"profile-image-upload",children:p.jsxs("div",{className:"profile-image-container",children:[f?p.jsx("img",{src:f||"/placeholder.svg",alt:"Profile",className:"profile-image"}):p.jsx("div",{className:"profile-placeholder",children:p.jsx(av,{})}),p.jsx("label",{htmlFor:"profile-image",className:"image-upload-label",children:p.jsx(hS,{})}),p.jsx("input",{type:"file",id:"profile-image",accept:"image/*",onChange:y,className:"image-upload-input"})]})}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"displayName",children:"Full Name"}),p.jsx("input",{type:"text",id:"displayName",name:"displayName",value:l.displayName,onChange:x,required:!0})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"email",children:"Email"}),p.jsx("input",{type:"email",id:"email",name:"email",value:l.email,disabled:!0,className:"disabled-input"}),p.jsx("small",{className:"input-note",children:"Email cannot be changed"})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"phoneNumber",children:"Phone Number"}),p.jsx("input",{type:"tel",id:"phoneNumber",name:"phoneNumber",value:l.phoneNumber,onChange:x,placeholder:"Enter your phone number"})]}),p.jsx("button",{type:"submit",className:"primary-btn save-btn",disabled:n,children:n?"Saving...":"Save Changes"})]})]})},eV=({user:t})=>{const[e,n]=M.useState(!1),[r,i]=M.useState(""),[s,o]=M.useState(""),[a,l]=M.useState({storeName:"",address:"",contactNumber:"",gstin:"",storeType:""}),c=["Kirana Store","Medical Store","Bookstore","Electronics","Clothing","Hardware","Stationery","Other"];M.useEffect(()=>{if(!t)return;(async()=>{try{const m=await Kx(hn(Ve,"stores",t.uid));m.exists()&&l(m.data())}catch(m){console.error("Error fetching store data:",m)}})()},[t]);const u=f=>{const{name:m,value:x}=f.target;l(y=>({...y,[m]:x}))},d=async f=>{f.preventDefault(),n(!0),o(""),i("");try{await WA(hn(Ve,"stores",t.uid),{...a,updatedAt:new Date},{merge:!0}),i("Store details updated successfully!")}catch(m){console.error("Error updating store details:",m),o("Failed to update store details. Please try again.")}n(!1)};return p.jsxs("div",{className:"store-details",children:[p.jsx("h2",{className:"section-title",children:"Store Details"}),s&&p.jsx("div",{className:"error-message",children:s}),r&&p.jsx("div",{className:"success-message",children:r}),p.jsxs("form",{onSubmit:d,className:"settings-form",children:[p.jsx("div",{className:"store-icon",children:p.jsx(_S,{})}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"storeName",children:"Store Name"}),p.jsx("input",{type:"text",id:"storeName",name:"storeName",value:a.storeName,onChange:u,required:!0,placeholder:"Enter your store name"})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"address",children:"Address"}),p.jsx("textarea",{id:"address",name:"address",value:a.address,onChange:u,rows:"3",placeholder:"Enter your store address"})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"contactNumber",children:"Contact Number"}),p.jsx("input",{type:"tel",id:"contactNumber",name:"contactNumber",value:a.contactNumber,onChange:u,placeholder:"Enter store contact number"})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"gstin",children:"GSTIN (Optional)"}),p.jsx("input",{type:"text",id:"gstin",name:"gstin",value:a.gstin,onChange:u,placeholder:"Enter your GSTIN"})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"storeType",children:"Store Type"}),p.jsxs("select",{id:"storeType",name:"storeType",value:a.storeType,onChange:u,required:!0,children:[p.jsx("option",{value:"",children:"Select Store Type"}),c.map(f=>p.jsx("option",{value:f,children:f},f))]})]}),p.jsx("button",{type:"submit",className:"primary-btn save-btn",disabled:e,children:e?"Saving...":"Save Store Details"})]})]})},tV=({user:t})=>{const{logout:e}=Yt(),n=Jr(),[r,i]=M.useState(!1),[s,o]=M.useState(""),[a,l]=M.useState(!1),[c,u]=M.useState({createdAt:null,plan:"Free Plan"});M.useEffect(()=>{if(!t)return;(async()=>{try{const y=await Kx(hn(Ve,"users",t.uid));if(y.exists()){const w=y.data();u({createdAt:t.metadata.creationTime,plan:w.plan||"Free Plan"})}else u({createdAt:t.metadata.creationTime,plan:"Free Plan"})}catch(y){console.error("Error fetching user metadata:",y)}})()},[t]);const d=async()=>{try{await e(),n("/")}catch(x){console.error("Error logging out:",x),o("Failed to log out. Please try again.")}},f=async()=>{i(!0),o("");try{const x=Kn(Ve,"inventory"),y=Gr(x,Un("userId","==",t.uid)),w=await ad(y),v=[];w.forEach(A=>{v.push(lh(A.ref))}),await Promise.all(v),await lh(hn(Ve,"stores",t.uid)),await lh(hn(Ve,"users",t.uid));const g=jm(Vm,`users/${t.uid}`),_=jm(Vm,`inventory/${t.uid}`);try{const P=(await Y_(g)).items.map(b=>X_(b));await Promise.all(P);const C=(await Y_(_)).items.map(b=>X_(b));await Promise.all(C)}catch(A){console.error("Error deleting storage files:",A)}await i5(t),n("/")}catch(x){console.error("Error deleting account:",x),o("Failed to delete account. Please try again."),i(!1)}},m=x=>x?new Date(x).toLocaleDateString("en-IN",{day:"2-digit",month:"long",year:"numeric"}):"Unknown";return p.jsxs("div",{className:"account-settings",children:[p.jsx("h2",{className:"section-title",children:"Account Settings"}),s&&p.jsx("div",{className:"error-message",children:s}),p.jsxs("div",{className:"account-info",children:[p.jsxs("div",{className:"info-item",children:[p.jsx("span",{className:"info-label",children:"Email"}),p.jsx("span",{className:"info-value",children:t==null?void 0:t.email})]}),p.jsxs("div",{className:"info-item",children:[p.jsx("span",{className:"info-label",children:"Account Created"}),p.jsx("span",{className:"info-value",children:m(c.createdAt)})]}),p.jsxs("div",{className:"info-item",children:[p.jsx("span",{className:"info-label",children:"Current Plan"}),p.jsx("span",{className:"info-value plan-badge",children:c.plan})]})]}),p.jsxs("div",{className:"account-actions",children:[p.jsxs("button",{className:"secondary-btn logout-btn",onClick:d,children:[p.jsx(yS,{className:"btn-icon"}),p.jsx("span",{children:"Log Out"})]}),a?p.jsxs("div",{className:"delete-confirmation",children:[p.jsxs("div",{className:"confirmation-message",children:[p.jsx(qF,{className:"warning-icon"}),p.jsx("p",{children:"Are you sure you want to delete your account? This action cannot be undone and will permanently delete all your data."})]}),p.jsxs("div",{className:"confirmation-actions",children:[p.jsx("button",{className:"outline-btn cancel-btn",onClick:()=>l(!1),children:"Cancel"}),p.jsx("button",{className:"danger-btn confirm-delete-btn",onClick:f,disabled:r,children:r?"Deleting...":"Yes, Delete My Account"})]})]}):p.jsxs("button",{className:"danger-btn delete-btn",onClick:()=>l(!0),children:[p.jsx(ud,{className:"btn-icon"}),p.jsx("span",{children:"Delete Account"})]})]})]})},nV=({user:t})=>{const[e,n]=M.useState(!1),[r,i]=M.useState(""),[s,o]=M.useState(""),[a,l]=M.useState(!1),[c,u]=M.useState(!1),[d,f]=M.useState(!1),[m,x]=M.useState({currentPassword:"",newPassword:"",confirmPassword:""}),y=g=>{const{name:_,value:A}=g.target;x(P=>({...P,[_]:A}))},w=g=>{switch(g){case"current":l(!a);break;case"new":u(!c);break;case"confirm":f(!d);break}},v=async g=>{if(g.preventDefault(),n(!0),o(""),i(""),m.newPassword!==m.confirmPassword){o("New passwords do not match"),n(!1);return}if(m.newPassword.length<6){o("New password must be at least 6 characters long"),n(!1);return}try{const _=Gs.credential(t.email,m.currentPassword);await GP(t,_),await JP(t,m.newPassword),x({currentPassword:"",newPassword:"",confirmPassword:""}),i("Password updated successfully!")}catch(_){console.error("Error updating password:",_),_.code==="auth/wrong-password"?o("Current password is incorrect"):o("Failed to update password. Please try again.")}n(!1)};return p.jsxs("div",{className:"password-settings",children:[p.jsx("h2",{className:"section-title",children:"Change Password"}),s&&p.jsx("div",{className:"error-message",children:s}),r&&p.jsx("div",{className:"success-message",children:r}),p.jsxs("form",{onSubmit:v,className:"settings-form",children:[p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"currentPassword",children:"Current Password"}),p.jsxs("div",{className:"password-input-container",children:[p.jsx("input",{type:a?"text":"password",id:"currentPassword",name:"currentPassword",value:m.currentPassword,onChange:y,required:!0}),p.jsx("button",{type:"button",className:"toggle-password-btn",onClick:()=>w("current"),tabIndex:"-1",children:a?p.jsx(_0,{}):p.jsx(ch,{})})]})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"newPassword",children:"New Password"}),p.jsxs("div",{className:"password-input-container",children:[p.jsx("input",{type:c?"text":"password",id:"newPassword",name:"newPassword",value:m.newPassword,onChange:y,required:!0,minLength:"6"}),p.jsx("button",{type:"button",className:"toggle-password-btn",onClick:()=>w("new"),tabIndex:"-1",children:c?p.jsx(_0,{}):p.jsx(ch,{})})]})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"confirmPassword",children:"Confirm New Password"}),p.jsxs("div",{className:"password-input-container",children:[p.jsx("input",{type:d?"text":"password",id:"confirmPassword",name:"confirmPassword",value:m.confirmPassword,onChange:y,required:!0,minLength:"6"}),p.jsx("button",{type:"button",className:"toggle-password-btn",onClick:()=>w("confirm"),tabIndex:"-1",children:d?p.jsx(_0,{}):p.jsx(ch,{})})]})]}),p.jsx("button",{type:"submit",className:"primary-btn save-btn",disabled:e,children:e?"Updating...":"Update Password"})]})]})},rw=()=>{const{section:t}=$I(),e=Jr(),[n,r]=M.useState("profile"),{currentUser:i}=Yt();M.useEffect(()=>{t?r(t):e("/settings/profile",{replace:!0})},[t,e]);const s=o=>{r(o),e(`/settings/${o}`)};return p.jsxs("div",{className:"settings-page",children:[p.jsx("h1",{className:"page-title",children:"Settings"}),p.jsxs("div",{className:"settings-container",children:[p.jsxs("div",{className:"settings-tabs",children:[p.jsxs("button",{className:`tab-button ${n==="profile"?"active":""}`,onClick:()=>s("profile"),children:[p.jsx(av,{className:"tab-icon"}),p.jsx("span",{children:"Profile"})]}),p.jsxs("button",{className:`tab-button ${n==="store"?"active":""}`,onClick:()=>s("store"),children:[p.jsx(_S,{className:"tab-icon"}),p.jsx("span",{children:"Store Details"})]}),p.jsxs("button",{className:`tab-button ${n==="account"?"active":""}`,onClick:()=>s("account"),children:[p.jsx(sc,{className:"tab-icon"}),p.jsx("span",{children:"Account"})]}),p.jsxs("button",{className:`tab-button ${n==="password"?"active":""}`,onClick:()=>s("password"),children:[p.jsx(cd,{className:"tab-icon"}),p.jsx("span",{children:"Password"})]})]}),p.jsxs("div",{className:"settings-content",children:[n==="profile"&&p.jsx(Zj,{user:i}),n==="store"&&p.jsx(eV,{user:i}),n==="account"&&p.jsx(tV,{user:i}),n==="password"&&p.jsx(nV,{user:i})]})]})]})},rV=()=>{const{currentUser:t}=Yt(),[e,n]=M.useState([]),[r,i]=M.useState(!0),[s,o]=M.useState(""),[a,l]=M.useState({}),[c,u]=M.useState({}),[d,f]=M.useState({});M.useEffect(()=>{if(!t)return;i(!0);const v=Kn(Ve,"inventory"),g=Gr(v,Un("userId","==",t.uid),Un("expiryDate","!=",null));return Rc(g,A=>{const P=[],D=new Date;A.forEach(b=>{const k={id:b.id,...b.data()};if(k.expiryDate){const T=k.expiryDate.toDate?k.expiryDate.toDate():new Date(k.expiryDate),I=Math.ceil((T-D)/(1e3*60*60*24));I<=14&&I>=0&&!k.donated&&P.push({...k,expiryDate:T,daysLeft:I,urgency:I<=3?"high":I<=7?"medium":"low",recommendedDiscount:I<=3?50:I<=7?30:10})}}),P.sort((b,k)=>b.daysLeft-k.daysLeft),n(P);const C={};P.forEach(b=>{C[b.id]=b.discountApplied||b.recommendedDiscount}),l(C),i(!1)},A=>{console.error("Error fetching expiring items:",A),o("Failed to load expiring items"),i(!1)})},[t]);const m=(v,g)=>{const _=Math.min(Math.max(Number.parseInt(g)||0,0),100);l(A=>({...A,[v]:_}))},x=async v=>{const g=a[v.id];if(g<0||g>100){o("Discount must be between 0% and 100%");return}u(_=>({..._,[v.id]:!0})),o("");try{const _=v.originalPrice||v.price,A=_*(1-g/100);await ic(hn(Ve,"inventory",v.id),{price:A,originalPrice:_,discountApplied:g,discountUpdatedAt:Vo()}),f(P=>({...P,[v.id]:`${g}% discount applied!`})),setTimeout(()=>{f(P=>{const D={...P};return delete D[v.id],D})},3e3)}catch(_){console.error("Error applying discount:",_),o("Failed to apply discount. Please try again.")}u(_=>{const A={..._};return delete A[v.id],A})},y=async v=>{u(g=>({...g,[v.id]:!0}));try{await ic(hn(Ve,"inventory",v.id),{donated:!0,donatedAt:Vo()}),f(g=>({...g,[v.id]:"Marked as donated!"})),setTimeout(()=>{f(g=>{const _={...g};return delete _[v.id],_})},3e3)}catch(g){console.error("Error marking as donated:",g),o("Failed to mark as donated. Please try again.")}u(g=>{const _={...g};return delete _[v.id],_})},w=v=>v.toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"});return p.jsxs("div",{className:"expiry-insights-page",children:[p.jsx("h1",{className:"page-title",children:"Expiry Insights"}),p.jsx("div",{className:"insights-header",children:p.jsx("p",{className:"insights-description",children:"Manage products nearing expiry with smart discount suggestions and donation recommendations."})}),s&&p.jsx("div",{className:"error-message",children:s}),r?p.jsxs("div",{className:"loading-container",children:[p.jsx("div",{className:"loading-spinner"}),p.jsx("p",{children:"Loading expiring items..."})]}):e.length===0?p.jsxs("div",{className:"no-items-container",children:[p.jsx(pS,{className:"no-items-icon"}),p.jsx("h2",{children:"No Expiring Items"}),p.jsx("p",{children:"You don't have any products expiring within the next 14 days."})]}):p.jsxs("div",{className:"expiring-items-container",children:[p.jsxs("div",{className:"expiry-legend",children:[p.jsxs("div",{className:"legend-item",children:[p.jsx("span",{className:"legend-color high"}),p.jsx("span",{children:"0-3 days left"})]}),p.jsxs("div",{className:"legend-item",children:[p.jsx("span",{className:"legend-color medium"}),p.jsx("span",{children:"4-7 days left"})]}),p.jsxs("div",{className:"legend-item",children:[p.jsx("span",{className:"legend-color low"}),p.jsx("span",{children:"8-14 days left"})]})]}),p.jsx("div",{className:"expiring-items-grid",children:e.map(v=>p.jsxs("div",{className:`expiry-item-card urgency-${v.urgency}`,children:[d[v.id]&&p.jsxs("div",{className:"success-badge",children:[p.jsx(HF,{})," ",d[v.id]]}),p.jsx("div",{className:"item-image",children:v.imageUrl?p.jsx("img",{src:v.imageUrl||"/placeholder.svg",alt:v.name}):p.jsx("div",{className:"no-image",children:"No Image"})}),p.jsxs("div",{className:"item-details",children:[p.jsx("h3",{className:"item-name",children:v.name}),p.jsxs("div",{className:"expiry-info",children:[p.jsxs("p",{className:"expiry-date",children:["Expires: ",p.jsx("span",{children:w(v.expiryDate)})]}),p.jsxs("p",{className:"days-left",children:[p.jsx("strong",{children:v.daysLeft})," ",v.daysLeft===1?"day":"days"," left"]})]}),p.jsxs("div",{className:"price-info",children:[p.jsxs("p",{className:"current-price",children:["Current Price: ",p.jsxs("span",{children:["₹",v.price.toFixed(2)]})]}),v.originalPrice&&p.jsxs("p",{className:"original-price",children:["Original: ",p.jsxs("span",{children:["₹",v.originalPrice.toFixed(2)]})]})]}),p.jsxs("div",{className:"discount-section",children:[p.jsxs("p",{className:"recommended-discount",children:["Recommended:"," ",p.jsxs("strong",{children:[v.recommendedDiscount,"% off"]})]}),p.jsxs("div",{className:"discount-input-group",children:[p.jsxs("div",{className:"discount-input-container",children:[p.jsx("input",{type:"number",min:"0",max:"100",value:a[v.id]||"",onChange:g=>m(v.id,g.target.value),disabled:c[v.id],className:"discount-input"}),p.jsx("span",{className:"discount-symbol",children:"%"})]}),p.jsx("button",{className:"apply-discount-btn",onClick:()=>x(v),disabled:c[v.id],children:c[v.id]?"Applying...":"Apply"})]}),v.discountApplied&&!d[v.id]&&p.jsxs("div",{className:"discount-applied-badge",children:[p.jsx(QF,{})," ",v.discountApplied,"% discount applied"]})]}),v.quantity>10&&v.daysLeft<=3&&p.jsxs("div",{className:"donation-section",children:[p.jsxs("div",{className:"donation-message",children:[p.jsx($F,{className:"donation-icon"}),p.jsx("p",{children:"Consider donating - high stock with very short expiry"})]}),p.jsx("button",{className:"donate-btn",onClick:()=>y(v),disabled:c[v.id],children:c[v.id]?"Processing...":"Mark as Donated"})]})]})]},v.id))})]})]})},iV=()=>{const t=[{id:1,name:"Helping Hands Foundation",address:"123 Charity Lane, Mumbai, Maharashtra 400001",phone:"+91 9876543210",email:"contact@helpinghands.org",type:"Food Bank",description:"Collects and distributes food to those in need. Accepts all types of non-perishable food items and fresh produce with at least 3 days of shelf life."},{id:2,name:"Sunshine Orphanage",address:"456 Hope Street, Delhi, Delhi 110001",phone:"+91 9876543211",email:"info@sunshineorphanage.org",type:"Orphanage",description:"Provides shelter, education, and care for orphaned children. Accepts food, clothing, books, and toys."},{id:3,name:"Golden Years Home",address:"789 Serenity Road, Bangalore, Karnataka 560001",phone:"+91 9876543212",email:"care@goldenyears.org",type:"Old Age Home",description:"Caring for elderly citizens who need assistance. Accepts food, medicines, clothing, and daily essentials."},{id:4,name:"New Life Shelter",address:"234 Harmony Avenue, Chennai, Tamil Nadu 600001",phone:"+91 9876543213",email:"donate@newlifeshelter.org",type:"Homeless Shelter",description:"Provides temporary shelter and meals for homeless individuals. Accepts food, clothing, toiletries, and bedding materials."},{id:5,name:"Green Earth Initiative",address:"567 Eco Path, Hyderabad, Telangana 500001",phone:"+91 9876543214",email:"green@earthinitiative.org",type:"Environmental NGO",description:"Works on sustainable food practices and reducing food waste. Accepts excess food from events and restaurants for redistribution."},{id:6,name:"Seva Community Kitchen",address:"890 Service Road, Kolkata, West Bengal 700001",phone:"+91 9876543215",email:"kitchen@seva.org",type:"Community Kitchen",description:"Prepares and serves meals to underprivileged communities. Accepts food donations, especially grains, vegetables, and spices."}],e=r=>{window.location.href=`tel:${r}`},n=r=>{window.location.href=`mailto:${r}`};return p.jsxs("div",{className:"nearby-ngos-page",children:[p.jsx("h1",{className:"page-title",children:"Nearby NGOs & Donation Centers"}),p.jsxs("div",{className:"page-description",children:[p.jsx(mS,{className:"description-icon"}),p.jsx("p",{children:"Connect with these organizations to donate your excess inventory or items nearing expiry. Help reduce waste and support those in need by reaching out to these nearby donation centers."})]}),p.jsx("div",{className:"ngos-grid",children:t.map(r=>p.jsxs("div",{className:"ngo-card",children:[p.jsxs("div",{className:"ngo-header",children:[p.jsx("h2",{className:"ngo-name",children:r.name}),p.jsx("span",{className:"ngo-type",children:r.type})]}),p.jsx("p",{className:"ngo-description",children:r.description}),p.jsxs("div",{className:"ngo-details",children:[p.jsxs("div",{className:"detail-item",children:[p.jsx(GF,{className:"detail-icon"}),p.jsx("p",{children:r.address})]}),p.jsxs("div",{className:"detail-item",children:[p.jsx(Z_,{className:"detail-icon"}),p.jsx("p",{children:r.phone})]}),r.email&&p.jsxs("div",{className:"detail-item",children:[p.jsx(sc,{className:"detail-icon"}),p.jsx("p",{children:r.email})]})]}),p.jsxs("div",{className:"ngo-actions",children:[p.jsxs("button",{className:"contact-btn phone-btn",onClick:()=>e(r.phone),children:[p.jsx(Z_,{})," Call"]}),r.email&&p.jsxs("button",{className:"contact-btn email-btn",onClick:()=>n(r.email),children:[p.jsx(sc,{})," Email"]})]})]},r.id))})]})},sV=()=>{const{currentUser:t}=Yt(),[e,n]=M.useState([]),[r,i]=M.useState([]),[s,o]=M.useState(""),[a,l]=M.useState([]),[c,u]=M.useState(!0),[d,f]=M.useState(""),[m,x]=M.useState(!1),[y,w]=M.useState(""),[v,g]=M.useState(""),[_,A]=M.useState(!1),[P,D]=M.useState(null);M.useEffect(()=>{if(!t)return;u(!0);const L=Gr(Kn(Ve,"inventory"),Un("userId","==",t.uid));return Rc(L,j=>{const W=[];j.forEach(Q=>{W.push({id:Q.id,...Q.data()})}),n(W),i(W),u(!1)},j=>{console.error("Error fetching inventory:",j),f("Failed to load inventory items"),u(!1)})},[t]),M.useEffect(()=>{if(s.trim()==="")i(e);else{const L=e.filter(X=>X.name.toLowerCase().includes(s.toLowerCase()));i(L)}},[s,e]);const C=a.reduce((L,X)=>L+X.price*X.quantity,0),b=L=>{const X=a.find(j=>j.id===L.id);X?X.quantity<L.availableQuantity?l(a.map(j=>j.id===L.id?{...j,quantity:j.quantity+1}:j)):(f(`Maximum available quantity for ${L.name} is ${L.availableQuantity}`),setTimeout(()=>f(""),3e3)):L.quantity>0?l([...a,{...L,quantity:1,availableQuantity:L.quantity}]):(f(`${L.name} is out of stock`),setTimeout(()=>f(""),3e3))},k=L=>{l(a.filter(X=>X.id!==L))},T=(L,X)=>{const j=a.find(W=>W.id===L);if(X<=0){k(L);return}if(X>j.availableQuantity){f(`Maximum available quantity for ${j.name} is ${j.availableQuantity}`),setTimeout(()=>f(""),3e3);return}l(a.map(W=>W.id===L?{...W,quantity:X}:W))},I=()=>{l([])},N=L=>{if(w(L),L==="upi"){alert("UPI payment is coming soon!");return}x(!0)},R=()=>(Number.parseFloat(v)||0)-C,K=async()=>{try{const L={userId:t.uid,items:a.map(W=>({id:W.id,name:W.name,quantity:W.quantity,price:W.price,subtotal:W.price*W.quantity})),total:C,paymentMethod:y,amountPaid:Number.parseFloat(v)||0,change:R(),timestamp:Vo()},X=await $A(Kn(Ve,"receipts"),L),j=a.map(W=>{const Q=W.availableQuantity-W.quantity;return ic(hn(Ve,"inventory",W.id),{quantity:Q})});await Promise.all(j),D({id:X.id,...L,timestamp:new Date}),A(!0),x(!1),l([]),g(""),w("")}catch(L){console.error("Error generating receipt:",L),f("Failed to generate receipt")}},q=()=>{A(!1),D(null)};return p.jsxs("div",{className:"billing-page",children:[p.jsx("h1",{className:"page-title",children:"Billing"}),d&&p.jsx("div",{className:"error-message",children:d}),p.jsxs("div",{className:"billing-container",children:[p.jsxs("div",{className:"inventory-section",children:[p.jsxs("div",{className:"search-container",children:[p.jsx(ov,{className:"search-icon"}),p.jsx("input",{type:"text",placeholder:"Search items...",value:s,onChange:L=>o(L.target.value),className:"search-input"})]}),c?p.jsx("div",{className:"loading",children:"Loading inventory..."}):p.jsx("div",{className:"inventory-grid",children:r.length===0?p.jsx("div",{className:"no-items",children:"No items found"}):r.map(L=>p.jsxs("div",{className:"inventory-item",children:[p.jsx("div",{className:"item-image",children:L.imageUrl?p.jsx("img",{src:L.imageUrl||"/placeholder.svg",alt:L.name}):p.jsx("div",{className:"no-image",children:"No Image"})}),p.jsxs("div",{className:"item-details",children:[p.jsx("h3",{className:"item-name",children:L.name}),p.jsxs("p",{className:"item-price",children:["₹",L.price.toFixed(2)]}),p.jsx("p",{className:"item-quantity",children:L.quantity>0?`${L.quantity} in stock`:"Out of stock"}),p.jsx("p",{className:"item-category",children:L.category||"Uncategorized"})]}),p.jsx("button",{className:"add-to-cart-btn",onClick:()=>b(L),disabled:L.quantity<=0,children:"Add to Cart"})]},L.id))})]}),p.jsxs("div",{className:"cart-section",children:[p.jsxs("div",{className:"cart-header",children:[p.jsxs("h2",{children:[p.jsx(Es,{})," Shopping Cart"]}),a.length>0&&p.jsxs("button",{className:"clear-cart-btn",onClick:I,children:[p.jsx(ud,{})," Clear"]})]}),a.length===0?p.jsx("div",{className:"empty-cart",children:"Your cart is empty"}):p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"cart-items",children:a.map(L=>p.jsxs("div",{className:"cart-item",children:[p.jsxs("div",{className:"cart-item-details",children:[p.jsx("h3",{children:L.name}),p.jsxs("p",{children:["₹",L.price.toFixed(2)," each"]})]}),p.jsxs("div",{className:"cart-item-quantity",children:[p.jsx("button",{className:"quantity-btn",onClick:()=>T(L.id,L.quantity-1),children:p.jsx(gS,{})}),p.jsx("span",{children:L.quantity}),p.jsx("button",{className:"quantity-btn",onClick:()=>T(L.id,L.quantity+1),children:p.jsx(xS,{})})]}),p.jsxs("div",{className:"cart-item-subtotal",children:["₹",(L.price*L.quantity).toFixed(2)]}),p.jsx("button",{className:"remove-btn",onClick:()=>k(L.id),children:p.jsx(ud,{})})]},L.id))}),p.jsx("div",{className:"cart-total",children:p.jsxs("h3",{children:["Total: ₹",C.toFixed(2)]})}),p.jsxs("div",{className:"payment-options",children:[p.jsx("button",{className:"payment-btn cash-btn",onClick:()=>N("cash"),children:"Cash Payment"}),p.jsx("button",{className:"payment-btn upi-btn",onClick:()=>N("upi"),children:"UPI Payment"})]})]})]})]}),m&&p.jsx("div",{className:"modal-overlay",children:p.jsxs("div",{className:"payment-modal",children:[p.jsx("h2",{children:"Cash Payment"}),p.jsxs("div",{className:"payment-details",children:[p.jsx("div",{className:"payment-info",children:p.jsxs("p",{children:["Total Amount: ₹",C.toFixed(2)]})}),p.jsxs("div",{className:"payment-form",children:[p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"amountPaid",children:"Amount Paid"}),p.jsx("input",{type:"number",id:"amountPaid",value:v,onChange:L=>g(L.target.value),min:C,step:"0.01",required:!0})]}),v&&Number.parseFloat(v)>=C&&p.jsx("div",{className:"change-amount",children:p.jsxs("p",{children:["Change to Return: ₹",R().toFixed(2)]})})]})]}),p.jsxs("div",{className:"modal-actions",children:[p.jsx("button",{className:"cancel-btn",onClick:()=>x(!1),children:"Cancel"}),p.jsx("button",{className:"confirm-btn",onClick:K,disabled:!v||Number.parseFloat(v)<C,children:"Confirm Payment"})]})]})}),_&&P&&p.jsx("div",{className:"modal-overlay",children:p.jsxs("div",{className:"receipt-modal",children:[p.jsx("h2",{children:"Receipt"}),p.jsxs("div",{className:"receipt-content",children:[p.jsxs("div",{className:"receipt-header",children:[p.jsxs("p",{children:["Receipt ID: ",P.id]}),p.jsxs("p",{children:["Date: ",P.timestamp.toLocaleDateString()," ",P.timestamp.toLocaleTimeString()]})]}),p.jsx("div",{className:"receipt-items",children:p.jsxs("table",{children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsx("th",{children:"Item"}),p.jsx("th",{children:"Qty"}),p.jsx("th",{children:"Price"}),p.jsx("th",{children:"Total"})]})}),p.jsx("tbody",{children:P.items.map((L,X)=>p.jsxs("tr",{children:[p.jsx("td",{children:L.name}),p.jsx("td",{children:L.quantity}),p.jsxs("td",{children:["₹",L.price.toFixed(2)]}),p.jsxs("td",{children:["₹",L.subtotal.toFixed(2)]})]},X))})]})}),p.jsxs("div",{className:"receipt-summary",children:[p.jsxs("p",{children:[p.jsx("strong",{children:"Total Amount:"})," ₹",P.total.toFixed(2)]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Payment Method:"})," ",P.paymentMethod==="cash"?"Cash":"UPI"]}),P.paymentMethod==="cash"&&p.jsxs(p.Fragment,{children:[p.jsxs("p",{children:[p.jsx("strong",{children:"Amount Paid:"})," ₹",P.amountPaid.toFixed(2)]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Change:"})," ₹",P.change.toFixed(2)]})]})]}),p.jsx("div",{className:"receipt-footer",children:p.jsx("p",{children:"Thank you for your purchase!"})})]}),p.jsx("div",{className:"modal-actions",children:p.jsx("button",{className:"confirm-btn",onClick:q,children:"Close"})})]})})]})},oV=()=>{const{currentUser:t}=Yt(),[e,n]=M.useState([]),[r,i]=M.useState([]),[s,o]=M.useState(!0),[a,l]=M.useState(""),[c,u]=M.useState(""),[d,f]=M.useState({start:"",end:""}),[m,x]=M.useState("all"),[y,w]=M.useState(null);M.useEffect(()=>{if(!t)return;(async()=>{o(!0);try{const C=Gr(Kn(Ve,"receipts"),Un("userId","==",t.uid),jA("timestamp","desc")),b=await ad(C),k=[];b.forEach(T=>{var N;const I=T.data();k.push({id:T.id,...I,timestamp:((N=I.timestamp)==null?void 0:N.toDate())||new Date})}),n(k),i(k),o(!1)}catch(C){console.error("Error fetching receipts:",C),l("Failed to load receipts"),o(!1)}})()},[t]),M.useEffect(()=>{let D=[...e];if(c&&(D=D.filter(C=>C.items.some(b=>b.name.toLowerCase().includes(c.toLowerCase())))),d.start){const C=new Date(d.start);C.setHours(0,0,0,0),D=D.filter(b=>b.timestamp>=C)}if(d.end){const C=new Date(d.end);C.setHours(23,59,59,999),D=D.filter(b=>b.timestamp<=C)}m!=="all"&&(D=D.filter(C=>C.paymentMethod===m)),i(D)},[c,d,m,e]);const v=D=>{const{name:C,value:b}=D.target;f(k=>({...k,[C]:b}))},g=D=>{w(D)},_=()=>{w(null)},A=D=>D.toLocaleDateString(),P=D=>D.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return p.jsxs("div",{className:"receipts-page",children:[p.jsx("h1",{className:"page-title",children:"Receipts"}),a&&p.jsx("div",{className:"error-message",children:a}),p.jsxs("div",{className:"receipts-filters",children:[p.jsxs("div",{className:"search-container",children:[p.jsx(ov,{className:"search-icon"}),p.jsx("input",{type:"text",placeholder:"Search items in receipts...",value:c,onChange:D=>u(D.target.value),className:"search-input"})]}),p.jsxs("div",{className:"filter-group",children:[p.jsxs("div",{className:"date-filters",children:[p.jsxs("div",{className:"date-filter",children:[p.jsxs("label",{htmlFor:"start",children:[p.jsx(ld,{})," From"]}),p.jsx("input",{type:"date",id:"start",name:"start",value:d.start,onChange:v})]}),p.jsxs("div",{className:"date-filter",children:[p.jsxs("label",{htmlFor:"end",children:[p.jsx(ld,{})," To"]}),p.jsx("input",{type:"date",id:"end",name:"end",value:d.end,onChange:v})]})]}),p.jsxs("div",{className:"payment-filter",children:[p.jsx("label",{htmlFor:"paymentFilter",children:"Payment Method"}),p.jsxs("select",{id:"paymentFilter",value:m,onChange:D=>x(D.target.value),children:[p.jsx("option",{value:"all",children:"All Methods"}),p.jsx("option",{value:"cash",children:"Cash"}),p.jsx("option",{value:"upi",children:"UPI"})]})]})]})]}),s?p.jsx("div",{className:"loading",children:"Loading receipts..."}):p.jsx("div",{className:"receipts-list",children:r.length===0?p.jsx("div",{className:"no-receipts",children:"No receipts found"}):r.map(D=>p.jsxs("div",{className:"receipt-card",children:[p.jsxs("div",{className:"receipt-header",children:[p.jsx("div",{className:"receipt-icon",children:p.jsx(sv,{})}),p.jsxs("div",{className:"receipt-info",children:[p.jsxs("h3",{children:["Receipt #",D.id.slice(-6)]}),p.jsxs("p",{className:"receipt-date",children:[A(D.timestamp)," at"," ",P(D.timestamp)]})]})]}),p.jsxs("div",{className:"receipt-summary",children:[p.jsxs("div",{className:"receipt-items-summary",children:[p.jsxs("p",{children:[D.items.length," item(s)"]}),p.jsxs("ul",{className:"items-preview",children:[D.items.slice(0,3).map((C,b)=>p.jsxs("li",{children:[C.quantity," x ",C.name]},b)),D.items.length>3&&p.jsxs("li",{children:["+ ",D.items.length-3," more"]})]})]}),p.jsxs("div",{className:"receipt-total",children:[p.jsxs("p",{className:"total-amount",children:["₹",D.total.toFixed(2)]}),p.jsx("p",{className:"payment-method",children:D.paymentMethod==="cash"?"Cash Payment":"UPI Payment"})]})]}),p.jsxs("button",{className:"view-details-btn",onClick:()=>g(D),children:[p.jsx(ch,{})," View Details"]})]},D.id))}),y&&p.jsx("div",{className:"modal-overlay",children:p.jsxs("div",{className:"receipt-details-modal",children:[p.jsx("h2",{children:"Receipt Details"}),p.jsxs("div",{className:"receipt-content",children:[p.jsxs("div",{className:"receipt-header",children:[p.jsxs("p",{children:["Receipt ID: ",y.id]}),p.jsxs("p",{children:["Date: ",A(y.timestamp)," ",P(y.timestamp)]})]}),p.jsx("div",{className:"receipt-items",children:p.jsxs("table",{children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsx("th",{children:"Item"}),p.jsx("th",{children:"Qty"}),p.jsx("th",{children:"Price"}),p.jsx("th",{children:"Total"})]})}),p.jsx("tbody",{children:y.items.map((D,C)=>p.jsxs("tr",{children:[p.jsx("td",{children:D.name}),p.jsx("td",{children:D.quantity}),p.jsxs("td",{children:["₹",D.price.toFixed(2)]}),p.jsxs("td",{children:["₹",D.subtotal.toFixed(2)]})]},C))})]})}),p.jsxs("div",{className:"receipt-summary",children:[p.jsxs("p",{children:[p.jsx("strong",{children:"Total Amount:"})," ₹",y.total.toFixed(2)]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Payment Method:"})," ",y.paymentMethod==="cash"?"Cash":"UPI"]}),y.paymentMethod==="cash"&&p.jsxs(p.Fragment,{children:[p.jsxs("p",{children:[p.jsx("strong",{children:"Amount Paid:"})," ₹",y.amountPaid.toFixed(2)]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Change:"})," ₹",y.change.toFixed(2)]})]})]}),p.jsx("div",{className:"receipt-footer",children:p.jsx("p",{children:"Thank you for your purchase!"})})]}),p.jsx("div",{className:"modal-actions",children:p.jsx("button",{className:"confirm-btn",onClick:_,children:"Close"})})]})})]})},aV=({toggleSidebar:t})=>{const{currentUser:e}=Yt(),n=Jr(),[r,i]=M.useState([]),[s,o]=M.useState(!1),a=M.useRef(null),l=()=>e!=null&&e.displayName?e.displayName.split(" ").map(f=>f[0]).join("").toUpperCase():"U",c=()=>{n("/settings/profile")},u=()=>{n("/dashboard")};M.useEffect(()=>{if(!e)return;const f=Kn(Ve,"inventory"),m=Gr(f,Un("userId","==",e.uid)),x=Rc(m,y=>{const w=[],v=new Date;y.forEach(g=>{const _=g.data();if(_.expiryDate){const A=new Date(_.expiryDate.seconds*1e3),P=Math.ceil((A-v)/(1e3*60*60*24));P<=7&&P>=0&&w.push({id:g.id,name:_.name,expiryDate:A,daysLeft:P})}}),i(w)});return()=>x()},[e]),M.useEffect(()=>{const f=m=>{a.current&&!a.current.contains(m.target)&&o(!1)};return document.addEventListener("mousedown",f),()=>{document.removeEventListener("mousedown",f)}},[]);const d=()=>{o(!s)};return p.jsx("nav",{className:"navbar",children:p.jsxs("div",{className:"navbar-container",children:[p.jsxs("div",{className:"navbar-left",children:[p.jsx("button",{className:"menu-button",onClick:t,children:p.jsx(zF,{})}),p.jsxs("div",{className:"navbar-logo",onClick:u,children:[p.jsx(Es,{className:"logo-icon"}),p.jsx("span",{className:"logo-text",children:"Retail Ease"})]})]}),p.jsxs("div",{className:"navbar-right",children:[e&&p.jsxs("div",{className:"notification-bell",ref:a,children:[p.jsxs("button",{className:"bell-button",onClick:d,children:[p.jsx(UF,{}),r.length>0&&p.jsx("span",{className:"notification-badge",children:r.length})]}),s&&p.jsxs("div",{className:"notification-dropdown",children:[p.jsx("div",{className:"notification-header",children:p.jsx("h3",{children:"Expiring Items"})}),p.jsx("div",{className:"notification-content",children:r.length===0?p.jsx("p",{className:"no-notifications",children:"No items expiring soon"}):p.jsx("ul",{className:"notification-list",children:r.map(f=>p.jsxs("li",{className:"notification-item",children:[p.jsx("span",{className:"item-name",children:f.name}),p.jsxs("span",{className:"expiry-info",children:["expires in ",p.jsx("strong",{children:f.daysLeft})," ",f.daysLeft===1?"day":"days"]})]},f.id))})})]})]}),p.jsx("div",{className:"user-profile",onClick:c,children:e!=null&&e.photoURL?p.jsx("img",{src:e.photoURL||"/placeholder.svg",alt:"User Profile",className:"profile-image"}):p.jsx("div",{className:"profile-initials",children:l()})})]})]})})},lV=({isOpen:t,toggleSidebar:e,onLogout:n})=>p.jsxs("div",{className:`sidebar ${t?"open":""}`,children:[p.jsx("div",{className:"sidebar-header",children:p.jsx("button",{className:"close-button",onClick:e,children:p.jsx(XF,{})})}),p.jsx("div",{className:"sidebar-content",children:p.jsxs("ul",{className:"sidebar-menu",children:[p.jsx("li",{className:"sidebar-item",children:p.jsxs(oi,{to:"/inventory",className:({isActive:r})=>r?"sidebar-link active":"sidebar-link",onClick:()=>e(),children:[p.jsx(rv,{className:"sidebar-icon"}),p.jsx("span",{children:"Inventory"})]})}),p.jsx("li",{className:"sidebar-item",children:p.jsxs(oi,{to:"/billing",className:({isActive:r})=>r?"sidebar-link active":"sidebar-link",onClick:()=>e(),children:[p.jsx(dS,{className:"sidebar-icon"}),p.jsx("span",{children:"Billing"})]})}),p.jsx("li",{className:"sidebar-item",children:p.jsxs(oi,{to:"/receipts",className:({isActive:r})=>r?"sidebar-link active":"sidebar-link",onClick:()=>e(),children:[p.jsx(sv,{className:"sidebar-icon"}),p.jsx("span",{children:"Receipts"})]})}),p.jsx("li",{className:"sidebar-item",children:p.jsxs(oi,{to:"/expiry-insights",className:({isActive:r})=>r?"sidebar-link active":"sidebar-link",onClick:()=>e(),children:[p.jsx(ld,{className:"sidebar-icon"}),p.jsx("span",{children:"Expiry Insights"})]})}),p.jsx("li",{className:"sidebar-item",children:p.jsxs(oi,{to:"/nearby-ngos",className:({isActive:r})=>r?"sidebar-link active":"sidebar-link",onClick:()=>e(),children:[p.jsx(mS,{className:"sidebar-icon"}),p.jsx("span",{children:"Nearby NGOs"})]})}),p.jsx("li",{className:"sidebar-item",children:p.jsxs(oi,{to:"/profit-analysis",className:({isActive:r})=>r?"sidebar-link active":"sidebar-link",onClick:()=>e(),children:[p.jsx(iv,{className:"sidebar-icon"}),p.jsx("span",{children:"Profit Analysis"})]})}),p.jsx("li",{className:"sidebar-item",children:p.jsxs(oi,{to:"/ai-business-help",className:({isActive:r})=>r?"sidebar-link active":"sidebar-link",onClick:()=>e(),children:[p.jsx(vS,{className:"sidebar-icon"}),p.jsx("span",{children:"AI Business Help"})]})}),p.jsx("li",{className:"sidebar-item",children:p.jsxs(oi,{to:"/settings/profile",className:({isActive:r})=>r?"sidebar-link active":"sidebar-link",onClick:()=>e(),children:[p.jsx(fS,{className:"sidebar-icon"}),p.jsx("span",{children:"Settings"})]})})]})}),p.jsx("div",{className:"sidebar-footer",children:p.jsxs("button",{className:"logout-button",onClick:n,children:[p.jsx(yS,{className:"sidebar-icon"}),p.jsx("span",{children:"Logout"})]})})]}),Xn=({children:t})=>{const[e,n]=M.useState(!1),{logout:r}=Yt(),i=Jr(),s=()=>{n(!e)},o=async()=>{try{await r(),i("/")}catch(a){console.error("Failed to log out",a)}};return p.jsxs("div",{className:"main-layout",children:[p.jsx(aV,{toggleSidebar:s}),p.jsxs("div",{className:"layout-container",children:[p.jsx(lV,{isOpen:e,toggleSidebar:s,onLogout:o}),p.jsx("main",{className:`main-content ${e?"sidebar-open":""}`,children:t})]})]})},Jn=({children:t})=>{const{currentUser:e,loading:n}=Yt();return n?p.jsx("div",{className:"loading",children:"Loading..."}):e?t:p.jsx(o3,{to:"/login"})};function cV(){const[t,e]=M.useState(!0);return M.useEffect(()=>{const n=setTimeout(()=>{e(!1)},3e3);return()=>clearTimeout(n)},[]),t?p.jsx(e7,{}):p.jsxs(l3,{children:[p.jsx(tn,{path:"/",element:p.jsx(t7,{})}),p.jsx(tn,{path:"/login",element:p.jsx(n7,{})}),p.jsx(tn,{path:"/register",element:p.jsx(r7,{})}),p.jsx(tn,{path:"/dashboard",element:p.jsx(Jn,{children:p.jsx(Xn,{children:p.jsx(i7,{})})})}),p.jsx(tn,{path:"/inventory",element:p.jsx(Jn,{children:p.jsx(Xn,{children:p.jsx(a7,{})})})}),p.jsx(tn,{path:"/profit-analysis",element:p.jsx(Jn,{children:p.jsx(Xn,{children:p.jsx(_j,{})})})}),p.jsx(tn,{path:"/expiry-insights",element:p.jsx(Jn,{children:p.jsx(Xn,{children:p.jsx(rV,{})})})}),p.jsx(tn,{path:"/ai-business-help",element:p.jsx(Jn,{children:p.jsx(Xn,{children:p.jsx(Jj,{currentUser:Yt().currentUser})})})}),p.jsx(tn,{path:"/settings",element:p.jsx(Jn,{children:p.jsx(Xn,{children:p.jsx(rw,{})})})}),p.jsx(tn,{path:"/nearby-ngos",element:p.jsx(Jn,{children:p.jsx(Xn,{children:p.jsx(iV,{})})})}),p.jsx(tn,{path:"/settings/:section",element:p.jsx(Jn,{children:p.jsx(Xn,{children:p.jsx(rw,{})})})}),p.jsx(tn,{path:"/billing",element:p.jsx(Jn,{children:p.jsx(Xn,{children:p.jsx(sV,{})})})}),p.jsx(tn,{path:"/receipts",element:p.jsx(Jn,{children:p.jsx(Xn,{children:p.jsx(oV,{})})})})]})}mp.createRoot(document.getElementById("root")).render(p.jsx(Mr.StrictMode,{children:p.jsx(g3,{children:p.jsx(BF,{children:p.jsx(cV,{})})})}));
