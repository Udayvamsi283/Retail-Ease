var tk=Object.defineProperty;var nk=(t,e,n)=>e in t?tk(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var H=(t,e,n)=>nk(t,typeof e!="symbol"?e+"":e,n);function ik(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function rk(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var yx={exports:{}},kh={},_x={exports:{}},ae={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sl=Symbol.for("react.element"),sk=Symbol.for("react.portal"),ok=Symbol.for("react.fragment"),ak=Symbol.for("react.strict_mode"),lk=Symbol.for("react.profiler"),ck=Symbol.for("react.provider"),uk=Symbol.for("react.context"),hk=Symbol.for("react.forward_ref"),dk=Symbol.for("react.suspense"),fk=Symbol.for("react.memo"),pk=Symbol.for("react.lazy"),ov=Symbol.iterator;function gk(t){return t===null||typeof t!="object"?null:(t=ov&&t[ov]||t["@@iterator"],typeof t=="function"?t:null)}var vx={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},wx=Object.assign,xx={};function xo(t,e,n){this.props=t,this.context=e,this.refs=xx,this.updater=n||vx}xo.prototype.isReactComponent={};xo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};xo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Ex(){}Ex.prototype=xo.prototype;function Ug(t,e,n){this.props=t,this.context=e,this.refs=xx,this.updater=n||vx}var zg=Ug.prototype=new Ex;zg.constructor=Ug;wx(zg,xo.prototype);zg.isPureReactComponent=!0;var av=Array.isArray,Tx=Object.prototype.hasOwnProperty,Bg={current:null},bx={key:!0,ref:!0,__self:!0,__source:!0};function Sx(t,e,n){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Tx.call(e,i)&&!bx.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:Sl,type:t,key:s,ref:o,props:r,_owner:Bg.current}}function mk(t,e){return{$$typeof:Sl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function $g(t){return typeof t=="object"&&t!==null&&t.$$typeof===Sl}function yk(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var lv=/\/+/g;function Qd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?yk(""+t.key):e.toString(36)}function Jc(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Sl:case sk:o=!0}}if(o)return o=t,r=r(o),t=i===""?"."+Qd(o,0):i,av(r)?(n="",t!=null&&(n=t.replace(lv,"$&/")+"/"),Jc(r,e,n,"",function(c){return c})):r!=null&&($g(r)&&(r=mk(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(lv,"$&/")+"/")+t)),e.push(r)),1;if(o=0,i=i===""?".":i+":",av(t))for(var a=0;a<t.length;a++){s=t[a];var l=i+Qd(s,a);o+=Jc(s,e,n,l,r)}else if(l=gk(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=i+Qd(s,a++),o+=Jc(s,e,n,l,r);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function hc(t,e,n){if(t==null)return t;var i=[],r=0;return Jc(t,i,"","",function(s){return e.call(n,s,r++)}),i}function _k(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Vt={current:null},Zc={transition:null},vk={ReactCurrentDispatcher:Vt,ReactCurrentBatchConfig:Zc,ReactCurrentOwner:Bg};function Ix(){throw Error("act(...) is not supported in production builds of React.")}ae.Children={map:hc,forEach:function(t,e,n){hc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return hc(t,function(){e++}),e},toArray:function(t){return hc(t,function(e){return e})||[]},only:function(t){if(!$g(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ae.Component=xo;ae.Fragment=ok;ae.Profiler=lk;ae.PureComponent=Ug;ae.StrictMode=ak;ae.Suspense=dk;ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vk;ae.act=Ix;ae.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=wx({},t.props),r=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Bg.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)Tx.call(e,l)&&!bx.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}return{$$typeof:Sl,type:t.type,key:r,ref:s,props:i,_owner:o}};ae.createContext=function(t){return t={$$typeof:uk,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:ck,_context:t},t.Consumer=t};ae.createElement=Sx;ae.createFactory=function(t){var e=Sx.bind(null,t);return e.type=t,e};ae.createRef=function(){return{current:null}};ae.forwardRef=function(t){return{$$typeof:hk,render:t}};ae.isValidElement=$g;ae.lazy=function(t){return{$$typeof:pk,_payload:{_status:-1,_result:t},_init:_k}};ae.memo=function(t,e){return{$$typeof:fk,type:t,compare:e===void 0?null:e}};ae.startTransition=function(t){var e=Zc.transition;Zc.transition={};try{t()}finally{Zc.transition=e}};ae.unstable_act=Ix;ae.useCallback=function(t,e){return Vt.current.useCallback(t,e)};ae.useContext=function(t){return Vt.current.useContext(t)};ae.useDebugValue=function(){};ae.useDeferredValue=function(t){return Vt.current.useDeferredValue(t)};ae.useEffect=function(t,e){return Vt.current.useEffect(t,e)};ae.useId=function(){return Vt.current.useId()};ae.useImperativeHandle=function(t,e,n){return Vt.current.useImperativeHandle(t,e,n)};ae.useInsertionEffect=function(t,e){return Vt.current.useInsertionEffect(t,e)};ae.useLayoutEffect=function(t,e){return Vt.current.useLayoutEffect(t,e)};ae.useMemo=function(t,e){return Vt.current.useMemo(t,e)};ae.useReducer=function(t,e,n){return Vt.current.useReducer(t,e,n)};ae.useRef=function(t){return Vt.current.useRef(t)};ae.useState=function(t){return Vt.current.useState(t)};ae.useSyncExternalStore=function(t,e,n){return Vt.current.useSyncExternalStore(t,e,n)};ae.useTransition=function(){return Vt.current.useTransition()};ae.version="18.3.1";_x.exports=ae;var L=_x.exports;const di=rk(L),wk=ik({__proto__:null,default:di},[L]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xk=L,Ek=Symbol.for("react.element"),Tk=Symbol.for("react.fragment"),bk=Object.prototype.hasOwnProperty,Sk=xk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ik={key:!0,ref:!0,__self:!0,__source:!0};function kx(t,e,n){var i,r={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)bk.call(e,i)&&!Ik.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:Ek,type:t,key:s,ref:o,props:r,_owner:Sk.current}}kh.Fragment=Tk;kh.jsx=kx;kh.jsxs=kx;yx.exports=kh;var m=yx.exports,Jf={},Px={exports:{}},rn={},Ax={exports:{}},Cx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,B){var G=U.length;U.push(B);e:for(;0<G;){var J=G-1>>>1,Q=U[J];if(0<r(Q,B))U[J]=B,U[G]=Q,G=J;else break e}}function n(U){return U.length===0?null:U[0]}function i(U){if(U.length===0)return null;var B=U[0],G=U.pop();if(G!==B){U[0]=G;e:for(var J=0,Q=U.length,Y=Q>>>1;J<Y;){var he=2*(J+1)-1,Te=U[he],_e=he+1,Gt=U[_e];if(0>r(Te,G))_e<Q&&0>r(Gt,Te)?(U[J]=Gt,U[_e]=G,J=_e):(U[J]=Te,U[he]=G,J=he);else if(_e<Q&&0>r(Gt,G))U[J]=Gt,U[_e]=G,J=_e;else break e}}return B}function r(U,B){var G=U.sortIndex-B.sortIndex;return G!==0?G:U.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,d=null,f=3,g=!1,y=!1,x=!1,T=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(U){for(var B=n(c);B!==null;){if(B.callback===null)i(c);else if(B.startTime<=U)i(c),B.sortIndex=B.expirationTime,e(l,B);else break;B=n(c)}}function A(U){if(x=!1,b(U),!y)if(n(l)!==null)y=!0,le(D);else{var B=n(c);B!==null&&Z(A,B.startTime-U)}}function D(U,B){y=!1,x&&(x=!1,v(E),E=-1),g=!0;var G=f;try{for(b(B),d=n(l);d!==null&&(!(d.expirationTime>B)||U&&!C());){var J=d.callback;if(typeof J=="function"){d.callback=null,f=d.priorityLevel;var Q=J(d.expirationTime<=B);B=t.unstable_now(),typeof Q=="function"?d.callback=Q:d===n(l)&&i(l),b(B)}else i(l);d=n(l)}if(d!==null)var Y=!0;else{var he=n(c);he!==null&&Z(A,he.startTime-B),Y=!1}return Y}finally{d=null,f=G,g=!1}}var M=!1,S=null,E=-1,P=5,k=-1;function C(){return!(t.unstable_now()-k<P)}function N(){if(S!==null){var U=t.unstable_now();k=U;var B=!0;try{B=S(!0,U)}finally{B?R():(M=!1,S=null)}}else M=!1}var R;if(typeof w=="function")R=function(){w(N)};else if(typeof MessageChannel<"u"){var fe=new MessageChannel,se=fe.port2;fe.port1.onmessage=N,R=function(){se.postMessage(null)}}else R=function(){T(N,0)};function le(U){S=U,M||(M=!0,R())}function Z(U,B){E=T(function(){U(t.unstable_now())},B)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){y||g||(y=!0,le(D))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(U){switch(f){case 1:case 2:case 3:var B=3;break;default:B=f}var G=f;f=B;try{return U()}finally{f=G}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,B){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var G=f;f=U;try{return B()}finally{f=G}},t.unstable_scheduleCallback=function(U,B,G){var J=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?J+G:J):G=J,U){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=G+Q,U={id:h++,callback:B,priorityLevel:U,startTime:G,expirationTime:Q,sortIndex:-1},G>J?(U.sortIndex=G,e(c,U),n(l)===null&&U===n(c)&&(x?(v(E),E=-1):x=!0,Z(A,G-J))):(U.sortIndex=Q,e(l,U),y||g||(y=!0,le(D))),U},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(U){var B=f;return function(){var G=f;f=B;try{return U.apply(this,arguments)}finally{f=G}}}})(Cx);Ax.exports=Cx;var kk=Ax.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pk=L,nn=kk;function z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Rx=new Set,Ua={};function us(t,e){no(t,e),no(t+"Capture",e)}function no(t,e){for(Ua[t]=e,t=0;t<e.length;t++)Rx.add(e[t])}var mi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Zf=Object.prototype.hasOwnProperty,Ak=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,cv={},uv={};function Ck(t){return Zf.call(uv,t)?!0:Zf.call(cv,t)?!1:Ak.test(t)?uv[t]=!0:(cv[t]=!0,!1)}function Rk(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Nk(t,e,n,i){if(e===null||typeof e>"u"||Rk(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ft(t,e,n,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var ft={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ft[t]=new Ft(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ft[e]=new Ft(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ft[t]=new Ft(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ft[t]=new Ft(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ft[t]=new Ft(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ft[t]=new Ft(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ft[t]=new Ft(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ft[t]=new Ft(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ft[t]=new Ft(t,5,!1,t.toLowerCase(),null,!1,!1)});var Hg=/[\-:]([a-z])/g;function Wg(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Hg,Wg);ft[e]=new Ft(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Hg,Wg);ft[e]=new Ft(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Hg,Wg);ft[e]=new Ft(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ft[t]=new Ft(t,1,!1,t.toLowerCase(),null,!1,!1)});ft.xlinkHref=new Ft("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ft[t]=new Ft(t,1,!1,t.toLowerCase(),null,!0,!0)});function qg(t,e,n,i){var r=ft.hasOwnProperty(e)?ft[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Nk(e,n,r,i)&&(n=null),i||r===null?Ck(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var Si=Pk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,dc=Symbol.for("react.element"),Rs=Symbol.for("react.portal"),Ns=Symbol.for("react.fragment"),Kg=Symbol.for("react.strict_mode"),ep=Symbol.for("react.profiler"),Nx=Symbol.for("react.provider"),Dx=Symbol.for("react.context"),Gg=Symbol.for("react.forward_ref"),tp=Symbol.for("react.suspense"),np=Symbol.for("react.suspense_list"),Qg=Symbol.for("react.memo"),Mi=Symbol.for("react.lazy"),Mx=Symbol.for("react.offscreen"),hv=Symbol.iterator;function $o(t){return t===null||typeof t!="object"?null:(t=hv&&t[hv]||t["@@iterator"],typeof t=="function"?t:null)}var Ue=Object.assign,Yd;function ra(t){if(Yd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Yd=e&&e[1]||""}return`
`+Yd+t}var Xd=!1;function Jd(t,e){if(!t||Xd)return"";Xd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){i=c}t.call(e.prototype)}else{try{throw Error()}catch(c){i=c}t()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var r=c.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Xd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ra(t):""}function Dk(t){switch(t.tag){case 5:return ra(t.type);case 16:return ra("Lazy");case 13:return ra("Suspense");case 19:return ra("SuspenseList");case 0:case 2:case 15:return t=Jd(t.type,!1),t;case 11:return t=Jd(t.type.render,!1),t;case 1:return t=Jd(t.type,!0),t;default:return""}}function ip(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ns:return"Fragment";case Rs:return"Portal";case ep:return"Profiler";case Kg:return"StrictMode";case tp:return"Suspense";case np:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Dx:return(t.displayName||"Context")+".Consumer";case Nx:return(t._context.displayName||"Context")+".Provider";case Gg:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Qg:return e=t.displayName||null,e!==null?e:ip(t.type)||"Memo";case Mi:e=t._payload,t=t._init;try{return ip(t(e))}catch{}}return null}function Mk(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ip(e);case 8:return e===Kg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function hr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ox(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Ok(t){var e=Ox(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function fc(t){t._valueTracker||(t._valueTracker=Ok(t))}function Lx(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=Ox(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Au(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function rp(t,e){var n=e.checked;return Ue({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function dv(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=hr(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Vx(t,e){e=e.checked,e!=null&&qg(t,"checked",e,!1)}function sp(t,e){Vx(t,e);var n=hr(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?op(t,e.type,n):e.hasOwnProperty("defaultValue")&&op(t,e.type,hr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function fv(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function op(t,e,n){(e!=="number"||Au(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var sa=Array.isArray;function Ws(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+hr(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function ap(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(z(91));return Ue({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function pv(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(z(92));if(sa(n)){if(1<n.length)throw Error(z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:hr(n)}}function Fx(t,e){var n=hr(e.value),i=hr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function gv(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function jx(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lp(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?jx(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var pc,Ux=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(pc=pc||document.createElement("div"),pc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=pc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function za(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var wa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Lk=["Webkit","ms","Moz","O"];Object.keys(wa).forEach(function(t){Lk.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),wa[e]=wa[t]})});function zx(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||wa.hasOwnProperty(t)&&wa[t]?(""+e).trim():e+"px"}function Bx(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=zx(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var Vk=Ue({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function cp(t,e){if(e){if(Vk[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(z(62))}}function up(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var hp=null;function Yg(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var dp=null,qs=null,Ks=null;function mv(t){if(t=Pl(t)){if(typeof dp!="function")throw Error(z(280));var e=t.stateNode;e&&(e=Nh(e),dp(t.stateNode,t.type,e))}}function $x(t){qs?Ks?Ks.push(t):Ks=[t]:qs=t}function Hx(){if(qs){var t=qs,e=Ks;if(Ks=qs=null,mv(t),e)for(t=0;t<e.length;t++)mv(e[t])}}function Wx(t,e){return t(e)}function qx(){}var Zd=!1;function Kx(t,e,n){if(Zd)return t(e,n);Zd=!0;try{return Wx(t,e,n)}finally{Zd=!1,(qs!==null||Ks!==null)&&(qx(),Hx())}}function Ba(t,e){var n=t.stateNode;if(n===null)return null;var i=Nh(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(z(231,e,typeof n));return n}var fp=!1;if(mi)try{var Ho={};Object.defineProperty(Ho,"passive",{get:function(){fp=!0}}),window.addEventListener("test",Ho,Ho),window.removeEventListener("test",Ho,Ho)}catch{fp=!1}function Fk(t,e,n,i,r,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var xa=!1,Cu=null,Ru=!1,pp=null,jk={onError:function(t){xa=!0,Cu=t}};function Uk(t,e,n,i,r,s,o,a,l){xa=!1,Cu=null,Fk.apply(jk,arguments)}function zk(t,e,n,i,r,s,o,a,l){if(Uk.apply(this,arguments),xa){if(xa){var c=Cu;xa=!1,Cu=null}else throw Error(z(198));Ru||(Ru=!0,pp=c)}}function hs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Gx(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function yv(t){if(hs(t)!==t)throw Error(z(188))}function Bk(t){var e=t.alternate;if(!e){if(e=hs(t),e===null)throw Error(z(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return yv(r),t;if(s===i)return yv(r),e;s=s.sibling}throw Error(z(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o)throw Error(z(189))}}if(n.alternate!==i)throw Error(z(190))}if(n.tag!==3)throw Error(z(188));return n.stateNode.current===n?t:e}function Qx(t){return t=Bk(t),t!==null?Yx(t):null}function Yx(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Yx(t);if(e!==null)return e;t=t.sibling}return null}var Xx=nn.unstable_scheduleCallback,_v=nn.unstable_cancelCallback,$k=nn.unstable_shouldYield,Hk=nn.unstable_requestPaint,Ge=nn.unstable_now,Wk=nn.unstable_getCurrentPriorityLevel,Xg=nn.unstable_ImmediatePriority,Jx=nn.unstable_UserBlockingPriority,Nu=nn.unstable_NormalPriority,qk=nn.unstable_LowPriority,Zx=nn.unstable_IdlePriority,Ph=null,Vn=null;function Kk(t){if(Vn&&typeof Vn.onCommitFiberRoot=="function")try{Vn.onCommitFiberRoot(Ph,t,void 0,(t.current.flags&128)===128)}catch{}}var wn=Math.clz32?Math.clz32:Yk,Gk=Math.log,Qk=Math.LN2;function Yk(t){return t>>>=0,t===0?32:31-(Gk(t)/Qk|0)|0}var gc=64,mc=4194304;function oa(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Du(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~r;a!==0?i=oa(a):(s&=o,s!==0&&(i=oa(s)))}else o=n&~r,o!==0?i=oa(o):s!==0&&(i=oa(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-wn(e),r=1<<n,i|=t[n],e&=~r;return i}function Xk(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Jk(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-wn(s),a=1<<o,l=r[o];l===-1?(!(a&n)||a&i)&&(r[o]=Xk(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function gp(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function eE(){var t=gc;return gc<<=1,!(gc&4194240)&&(gc=64),t}function ef(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Il(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-wn(e),t[e]=n}function Zk(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-wn(n),s=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~s}}function Jg(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-wn(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var we=0;function tE(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var nE,Zg,iE,rE,sE,mp=!1,yc=[],Xi=null,Ji=null,Zi=null,$a=new Map,Ha=new Map,Li=[],eP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function vv(t,e){switch(t){case"focusin":case"focusout":Xi=null;break;case"dragenter":case"dragleave":Ji=null;break;case"mouseover":case"mouseout":Zi=null;break;case"pointerover":case"pointerout":$a.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ha.delete(e.pointerId)}}function Wo(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=Pl(e),e!==null&&Zg(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function tP(t,e,n,i,r){switch(e){case"focusin":return Xi=Wo(Xi,t,e,n,i,r),!0;case"dragenter":return Ji=Wo(Ji,t,e,n,i,r),!0;case"mouseover":return Zi=Wo(Zi,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return $a.set(s,Wo($a.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Ha.set(s,Wo(Ha.get(s)||null,t,e,n,i,r)),!0}return!1}function oE(t){var e=Fr(t.target);if(e!==null){var n=hs(e);if(n!==null){if(e=n.tag,e===13){if(e=Gx(n),e!==null){t.blockedOn=e,sE(t.priority,function(){iE(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function eu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=yp(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);hp=i,n.target.dispatchEvent(i),hp=null}else return e=Pl(n),e!==null&&Zg(e),t.blockedOn=n,!1;e.shift()}return!0}function wv(t,e,n){eu(t)&&n.delete(e)}function nP(){mp=!1,Xi!==null&&eu(Xi)&&(Xi=null),Ji!==null&&eu(Ji)&&(Ji=null),Zi!==null&&eu(Zi)&&(Zi=null),$a.forEach(wv),Ha.forEach(wv)}function qo(t,e){t.blockedOn===e&&(t.blockedOn=null,mp||(mp=!0,nn.unstable_scheduleCallback(nn.unstable_NormalPriority,nP)))}function Wa(t){function e(r){return qo(r,t)}if(0<yc.length){qo(yc[0],t);for(var n=1;n<yc.length;n++){var i=yc[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Xi!==null&&qo(Xi,t),Ji!==null&&qo(Ji,t),Zi!==null&&qo(Zi,t),$a.forEach(e),Ha.forEach(e),n=0;n<Li.length;n++)i=Li[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Li.length&&(n=Li[0],n.blockedOn===null);)oE(n),n.blockedOn===null&&Li.shift()}var Gs=Si.ReactCurrentBatchConfig,Mu=!0;function iP(t,e,n,i){var r=we,s=Gs.transition;Gs.transition=null;try{we=1,em(t,e,n,i)}finally{we=r,Gs.transition=s}}function rP(t,e,n,i){var r=we,s=Gs.transition;Gs.transition=null;try{we=4,em(t,e,n,i)}finally{we=r,Gs.transition=s}}function em(t,e,n,i){if(Mu){var r=yp(t,e,n,i);if(r===null)hf(t,e,i,Ou,n),vv(t,i);else if(tP(r,t,e,n,i))i.stopPropagation();else if(vv(t,i),e&4&&-1<eP.indexOf(t)){for(;r!==null;){var s=Pl(r);if(s!==null&&nE(s),s=yp(t,e,n,i),s===null&&hf(t,e,i,Ou,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else hf(t,e,i,null,n)}}var Ou=null;function yp(t,e,n,i){if(Ou=null,t=Yg(i),t=Fr(t),t!==null)if(e=hs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Gx(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ou=t,null}function aE(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Wk()){case Xg:return 1;case Jx:return 4;case Nu:case qk:return 16;case Zx:return 536870912;default:return 16}default:return 16}}var $i=null,tm=null,tu=null;function lE(){if(tu)return tu;var t,e=tm,n=e.length,i,r="value"in $i?$i.value:$i.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(i=1;i<=o&&e[n-i]===r[s-i];i++);return tu=r.slice(t,1<i?1-i:void 0)}function nu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function _c(){return!0}function xv(){return!1}function sn(t){function e(n,i,r,s,o){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?_c:xv,this.isPropagationStopped=xv,this}return Ue(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=_c)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=_c)},persist:function(){},isPersistent:_c}),e}var Eo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nm=sn(Eo),kl=Ue({},Eo,{view:0,detail:0}),sP=sn(kl),tf,nf,Ko,Ah=Ue({},kl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:im,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ko&&(Ko&&t.type==="mousemove"?(tf=t.screenX-Ko.screenX,nf=t.screenY-Ko.screenY):nf=tf=0,Ko=t),tf)},movementY:function(t){return"movementY"in t?t.movementY:nf}}),Ev=sn(Ah),oP=Ue({},Ah,{dataTransfer:0}),aP=sn(oP),lP=Ue({},kl,{relatedTarget:0}),rf=sn(lP),cP=Ue({},Eo,{animationName:0,elapsedTime:0,pseudoElement:0}),uP=sn(cP),hP=Ue({},Eo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),dP=sn(hP),fP=Ue({},Eo,{data:0}),Tv=sn(fP),pP={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gP={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mP={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yP(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=mP[t])?!!e[t]:!1}function im(){return yP}var _P=Ue({},kl,{key:function(t){if(t.key){var e=pP[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=nu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?gP[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:im,charCode:function(t){return t.type==="keypress"?nu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?nu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),vP=sn(_P),wP=Ue({},Ah,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bv=sn(wP),xP=Ue({},kl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:im}),EP=sn(xP),TP=Ue({},Eo,{propertyName:0,elapsedTime:0,pseudoElement:0}),bP=sn(TP),SP=Ue({},Ah,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),IP=sn(SP),kP=[9,13,27,32],rm=mi&&"CompositionEvent"in window,Ea=null;mi&&"documentMode"in document&&(Ea=document.documentMode);var PP=mi&&"TextEvent"in window&&!Ea,cE=mi&&(!rm||Ea&&8<Ea&&11>=Ea),Sv=" ",Iv=!1;function uE(t,e){switch(t){case"keyup":return kP.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function hE(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ds=!1;function AP(t,e){switch(t){case"compositionend":return hE(e);case"keypress":return e.which!==32?null:(Iv=!0,Sv);case"textInput":return t=e.data,t===Sv&&Iv?null:t;default:return null}}function CP(t,e){if(Ds)return t==="compositionend"||!rm&&uE(t,e)?(t=lE(),tu=tm=$i=null,Ds=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return cE&&e.locale!=="ko"?null:e.data;default:return null}}var RP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function kv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!RP[t.type]:e==="textarea"}function dE(t,e,n,i){$x(i),e=Lu(e,"onChange"),0<e.length&&(n=new nm("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Ta=null,qa=null;function NP(t){TE(t,0)}function Ch(t){var e=Ls(t);if(Lx(e))return t}function DP(t,e){if(t==="change")return e}var fE=!1;if(mi){var sf;if(mi){var of="oninput"in document;if(!of){var Pv=document.createElement("div");Pv.setAttribute("oninput","return;"),of=typeof Pv.oninput=="function"}sf=of}else sf=!1;fE=sf&&(!document.documentMode||9<document.documentMode)}function Av(){Ta&&(Ta.detachEvent("onpropertychange",pE),qa=Ta=null)}function pE(t){if(t.propertyName==="value"&&Ch(qa)){var e=[];dE(e,qa,t,Yg(t)),Kx(NP,e)}}function MP(t,e,n){t==="focusin"?(Av(),Ta=e,qa=n,Ta.attachEvent("onpropertychange",pE)):t==="focusout"&&Av()}function OP(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ch(qa)}function LP(t,e){if(t==="click")return Ch(e)}function VP(t,e){if(t==="input"||t==="change")return Ch(e)}function FP(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var bn=typeof Object.is=="function"?Object.is:FP;function Ka(t,e){if(bn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!Zf.call(e,r)||!bn(t[r],e[r]))return!1}return!0}function Cv(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Rv(t,e){var n=Cv(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Cv(n)}}function gE(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?gE(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function mE(){for(var t=window,e=Au();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Au(t.document)}return e}function sm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function jP(t){var e=mE(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&gE(n.ownerDocument.documentElement,n)){if(i!==null&&sm(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!t.extend&&s>i&&(r=i,i=s,s=r),r=Rv(n,s);var o=Rv(n,i);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var UP=mi&&"documentMode"in document&&11>=document.documentMode,Ms=null,_p=null,ba=null,vp=!1;function Nv(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;vp||Ms==null||Ms!==Au(i)||(i=Ms,"selectionStart"in i&&sm(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),ba&&Ka(ba,i)||(ba=i,i=Lu(_p,"onSelect"),0<i.length&&(e=new nm("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=Ms)))}function vc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Os={animationend:vc("Animation","AnimationEnd"),animationiteration:vc("Animation","AnimationIteration"),animationstart:vc("Animation","AnimationStart"),transitionend:vc("Transition","TransitionEnd")},af={},yE={};mi&&(yE=document.createElement("div").style,"AnimationEvent"in window||(delete Os.animationend.animation,delete Os.animationiteration.animation,delete Os.animationstart.animation),"TransitionEvent"in window||delete Os.transitionend.transition);function Rh(t){if(af[t])return af[t];if(!Os[t])return t;var e=Os[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in yE)return af[t]=e[n];return t}var _E=Rh("animationend"),vE=Rh("animationiteration"),wE=Rh("animationstart"),xE=Rh("transitionend"),EE=new Map,Dv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function vr(t,e){EE.set(t,e),us(e,[t])}for(var lf=0;lf<Dv.length;lf++){var cf=Dv[lf],zP=cf.toLowerCase(),BP=cf[0].toUpperCase()+cf.slice(1);vr(zP,"on"+BP)}vr(_E,"onAnimationEnd");vr(vE,"onAnimationIteration");vr(wE,"onAnimationStart");vr("dblclick","onDoubleClick");vr("focusin","onFocus");vr("focusout","onBlur");vr(xE,"onTransitionEnd");no("onMouseEnter",["mouseout","mouseover"]);no("onMouseLeave",["mouseout","mouseover"]);no("onPointerEnter",["pointerout","pointerover"]);no("onPointerLeave",["pointerout","pointerover"]);us("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));us("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));us("onBeforeInput",["compositionend","keypress","textInput","paste"]);us("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));us("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));us("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var aa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$P=new Set("cancel close invalid load scroll toggle".split(" ").concat(aa));function Mv(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,zk(i,e,void 0,t),t.currentTarget=null}function TE(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;Mv(r,a,c),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;Mv(r,a,c),s=l}}}if(Ru)throw t=pp,Ru=!1,pp=null,t}function Ae(t,e){var n=e[bp];n===void 0&&(n=e[bp]=new Set);var i=t+"__bubble";n.has(i)||(bE(e,t,2,!1),n.add(i))}function uf(t,e,n){var i=0;e&&(i|=4),bE(n,t,i,e)}var wc="_reactListening"+Math.random().toString(36).slice(2);function Ga(t){if(!t[wc]){t[wc]=!0,Rx.forEach(function(n){n!=="selectionchange"&&($P.has(n)||uf(n,!1,t),uf(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[wc]||(e[wc]=!0,uf("selectionchange",!1,e))}}function bE(t,e,n,i){switch(aE(e)){case 1:var r=iP;break;case 4:r=rP;break;default:r=em}n=r.bind(null,e,n,t),r=void 0,!fp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function hf(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=Fr(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}Kx(function(){var c=s,h=Yg(n),d=[];e:{var f=EE.get(t);if(f!==void 0){var g=nm,y=t;switch(t){case"keypress":if(nu(n)===0)break e;case"keydown":case"keyup":g=vP;break;case"focusin":y="focus",g=rf;break;case"focusout":y="blur",g=rf;break;case"beforeblur":case"afterblur":g=rf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Ev;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=aP;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=EP;break;case _E:case vE:case wE:g=uP;break;case xE:g=bP;break;case"scroll":g=sP;break;case"wheel":g=IP;break;case"copy":case"cut":case"paste":g=dP;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=bv}var x=(e&4)!==0,T=!x&&t==="scroll",v=x?f!==null?f+"Capture":null:f;x=[];for(var w=c,b;w!==null;){b=w;var A=b.stateNode;if(b.tag===5&&A!==null&&(b=A,v!==null&&(A=Ba(w,v),A!=null&&x.push(Qa(w,A,b)))),T)break;w=w.return}0<x.length&&(f=new g(f,y,null,n,h),d.push({event:f,listeners:x}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",f&&n!==hp&&(y=n.relatedTarget||n.fromElement)&&(Fr(y)||y[yi]))break e;if((g||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,g?(y=n.relatedTarget||n.toElement,g=c,y=y?Fr(y):null,y!==null&&(T=hs(y),y!==T||y.tag!==5&&y.tag!==6)&&(y=null)):(g=null,y=c),g!==y)){if(x=Ev,A="onMouseLeave",v="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(x=bv,A="onPointerLeave",v="onPointerEnter",w="pointer"),T=g==null?f:Ls(g),b=y==null?f:Ls(y),f=new x(A,w+"leave",g,n,h),f.target=T,f.relatedTarget=b,A=null,Fr(h)===c&&(x=new x(v,w+"enter",y,n,h),x.target=b,x.relatedTarget=T,A=x),T=A,g&&y)t:{for(x=g,v=y,w=0,b=x;b;b=Ts(b))w++;for(b=0,A=v;A;A=Ts(A))b++;for(;0<w-b;)x=Ts(x),w--;for(;0<b-w;)v=Ts(v),b--;for(;w--;){if(x===v||v!==null&&x===v.alternate)break t;x=Ts(x),v=Ts(v)}x=null}else x=null;g!==null&&Ov(d,f,g,x,!1),y!==null&&T!==null&&Ov(d,T,y,x,!0)}}e:{if(f=c?Ls(c):window,g=f.nodeName&&f.nodeName.toLowerCase(),g==="select"||g==="input"&&f.type==="file")var D=DP;else if(kv(f))if(fE)D=VP;else{D=OP;var M=MP}else(g=f.nodeName)&&g.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(D=LP);if(D&&(D=D(t,c))){dE(d,D,n,h);break e}M&&M(t,f,c),t==="focusout"&&(M=f._wrapperState)&&M.controlled&&f.type==="number"&&op(f,"number",f.value)}switch(M=c?Ls(c):window,t){case"focusin":(kv(M)||M.contentEditable==="true")&&(Ms=M,_p=c,ba=null);break;case"focusout":ba=_p=Ms=null;break;case"mousedown":vp=!0;break;case"contextmenu":case"mouseup":case"dragend":vp=!1,Nv(d,n,h);break;case"selectionchange":if(UP)break;case"keydown":case"keyup":Nv(d,n,h)}var S;if(rm)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Ds?uE(t,n)&&(E="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(cE&&n.locale!=="ko"&&(Ds||E!=="onCompositionStart"?E==="onCompositionEnd"&&Ds&&(S=lE()):($i=h,tm="value"in $i?$i.value:$i.textContent,Ds=!0)),M=Lu(c,E),0<M.length&&(E=new Tv(E,t,null,n,h),d.push({event:E,listeners:M}),S?E.data=S:(S=hE(n),S!==null&&(E.data=S)))),(S=PP?AP(t,n):CP(t,n))&&(c=Lu(c,"onBeforeInput"),0<c.length&&(h=new Tv("onBeforeInput","beforeinput",null,n,h),d.push({event:h,listeners:c}),h.data=S))}TE(d,e)})}function Qa(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Lu(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=Ba(t,n),s!=null&&i.unshift(Qa(t,s,r)),s=Ba(t,e),s!=null&&i.push(Qa(t,s,r))),t=t.return}return i}function Ts(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Ov(t,e,n,i,r){for(var s=e._reactName,o=[];n!==null&&n!==i;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&c!==null&&(a=c,r?(l=Ba(n,s),l!=null&&o.unshift(Qa(n,l,a))):r||(l=Ba(n,s),l!=null&&o.push(Qa(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var HP=/\r\n?/g,WP=/\u0000|\uFFFD/g;function Lv(t){return(typeof t=="string"?t:""+t).replace(HP,`
`).replace(WP,"")}function xc(t,e,n){if(e=Lv(e),Lv(t)!==e&&n)throw Error(z(425))}function Vu(){}var wp=null,xp=null;function Ep(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Tp=typeof setTimeout=="function"?setTimeout:void 0,qP=typeof clearTimeout=="function"?clearTimeout:void 0,Vv=typeof Promise=="function"?Promise:void 0,KP=typeof queueMicrotask=="function"?queueMicrotask:typeof Vv<"u"?function(t){return Vv.resolve(null).then(t).catch(GP)}:Tp;function GP(t){setTimeout(function(){throw t})}function df(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),Wa(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);Wa(e)}function er(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Fv(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var To=Math.random().toString(36).slice(2),Mn="__reactFiber$"+To,Ya="__reactProps$"+To,yi="__reactContainer$"+To,bp="__reactEvents$"+To,QP="__reactListeners$"+To,YP="__reactHandles$"+To;function Fr(t){var e=t[Mn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[yi]||n[Mn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Fv(t);t!==null;){if(n=t[Mn])return n;t=Fv(t)}return e}t=n,n=t.parentNode}return null}function Pl(t){return t=t[Mn]||t[yi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ls(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(z(33))}function Nh(t){return t[Ya]||null}var Sp=[],Vs=-1;function wr(t){return{current:t}}function Re(t){0>Vs||(t.current=Sp[Vs],Sp[Vs]=null,Vs--)}function ke(t,e){Vs++,Sp[Vs]=t.current,t.current=e}var dr={},kt=wr(dr),Ht=wr(!1),Qr=dr;function io(t,e){var n=t.type.contextTypes;if(!n)return dr;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in n)r[s]=e[s];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function Wt(t){return t=t.childContextTypes,t!=null}function Fu(){Re(Ht),Re(kt)}function jv(t,e,n){if(kt.current!==dr)throw Error(z(168));ke(kt,e),ke(Ht,n)}function SE(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(z(108,Mk(t)||"Unknown",r));return Ue({},n,i)}function ju(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||dr,Qr=kt.current,ke(kt,t),ke(Ht,Ht.current),!0}function Uv(t,e,n){var i=t.stateNode;if(!i)throw Error(z(169));n?(t=SE(t,e,Qr),i.__reactInternalMemoizedMergedChildContext=t,Re(Ht),Re(kt),ke(kt,t)):Re(Ht),ke(Ht,n)}var ei=null,Dh=!1,ff=!1;function IE(t){ei===null?ei=[t]:ei.push(t)}function XP(t){Dh=!0,IE(t)}function xr(){if(!ff&&ei!==null){ff=!0;var t=0,e=we;try{var n=ei;for(we=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}ei=null,Dh=!1}catch(r){throw ei!==null&&(ei=ei.slice(t+1)),Xx(Xg,xr),r}finally{we=e,ff=!1}}return null}var Fs=[],js=0,Uu=null,zu=0,an=[],ln=0,Yr=null,ii=1,ri="";function Dr(t,e){Fs[js++]=zu,Fs[js++]=Uu,Uu=t,zu=e}function kE(t,e,n){an[ln++]=ii,an[ln++]=ri,an[ln++]=Yr,Yr=t;var i=ii;t=ri;var r=32-wn(i)-1;i&=~(1<<r),n+=1;var s=32-wn(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,ii=1<<32-wn(e)+r|n<<r|i,ri=s+t}else ii=1<<s|n<<r|i,ri=t}function om(t){t.return!==null&&(Dr(t,1),kE(t,1,0))}function am(t){for(;t===Uu;)Uu=Fs[--js],Fs[js]=null,zu=Fs[--js],Fs[js]=null;for(;t===Yr;)Yr=an[--ln],an[ln]=null,ri=an[--ln],an[ln]=null,ii=an[--ln],an[ln]=null}var tn=null,Zt=null,Me=!1,_n=null;function PE(t,e){var n=cn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function zv(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,tn=t,Zt=er(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,tn=t,Zt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Yr!==null?{id:ii,overflow:ri}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=cn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,tn=t,Zt=null,!0):!1;default:return!1}}function Ip(t){return(t.mode&1)!==0&&(t.flags&128)===0}function kp(t){if(Me){var e=Zt;if(e){var n=e;if(!zv(t,e)){if(Ip(t))throw Error(z(418));e=er(n.nextSibling);var i=tn;e&&zv(t,e)?PE(i,n):(t.flags=t.flags&-4097|2,Me=!1,tn=t)}}else{if(Ip(t))throw Error(z(418));t.flags=t.flags&-4097|2,Me=!1,tn=t}}}function Bv(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;tn=t}function Ec(t){if(t!==tn)return!1;if(!Me)return Bv(t),Me=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ep(t.type,t.memoizedProps)),e&&(e=Zt)){if(Ip(t))throw AE(),Error(z(418));for(;e;)PE(t,e),e=er(e.nextSibling)}if(Bv(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Zt=er(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Zt=null}}else Zt=tn?er(t.stateNode.nextSibling):null;return!0}function AE(){for(var t=Zt;t;)t=er(t.nextSibling)}function ro(){Zt=tn=null,Me=!1}function lm(t){_n===null?_n=[t]:_n.push(t)}var JP=Si.ReactCurrentBatchConfig;function Go(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(z(309));var i=n.stateNode}if(!i)throw Error(z(147,t));var r=i,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(z(284));if(!n._owner)throw Error(z(290,t))}return t}function Tc(t,e){throw t=Object.prototype.toString.call(e),Error(z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function $v(t){var e=t._init;return e(t._payload)}function CE(t){function e(v,w){if(t){var b=v.deletions;b===null?(v.deletions=[w],v.flags|=16):b.push(w)}}function n(v,w){if(!t)return null;for(;w!==null;)e(v,w),w=w.sibling;return null}function i(v,w){for(v=new Map;w!==null;)w.key!==null?v.set(w.key,w):v.set(w.index,w),w=w.sibling;return v}function r(v,w){return v=rr(v,w),v.index=0,v.sibling=null,v}function s(v,w,b){return v.index=b,t?(b=v.alternate,b!==null?(b=b.index,b<w?(v.flags|=2,w):b):(v.flags|=2,w)):(v.flags|=1048576,w)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,w,b,A){return w===null||w.tag!==6?(w=wf(b,v.mode,A),w.return=v,w):(w=r(w,b),w.return=v,w)}function l(v,w,b,A){var D=b.type;return D===Ns?h(v,w,b.props.children,A,b.key):w!==null&&(w.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Mi&&$v(D)===w.type)?(A=r(w,b.props),A.ref=Go(v,w,b),A.return=v,A):(A=cu(b.type,b.key,b.props,null,v.mode,A),A.ref=Go(v,w,b),A.return=v,A)}function c(v,w,b,A){return w===null||w.tag!==4||w.stateNode.containerInfo!==b.containerInfo||w.stateNode.implementation!==b.implementation?(w=xf(b,v.mode,A),w.return=v,w):(w=r(w,b.children||[]),w.return=v,w)}function h(v,w,b,A,D){return w===null||w.tag!==7?(w=Hr(b,v.mode,A,D),w.return=v,w):(w=r(w,b),w.return=v,w)}function d(v,w,b){if(typeof w=="string"&&w!==""||typeof w=="number")return w=wf(""+w,v.mode,b),w.return=v,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case dc:return b=cu(w.type,w.key,w.props,null,v.mode,b),b.ref=Go(v,null,w),b.return=v,b;case Rs:return w=xf(w,v.mode,b),w.return=v,w;case Mi:var A=w._init;return d(v,A(w._payload),b)}if(sa(w)||$o(w))return w=Hr(w,v.mode,b,null),w.return=v,w;Tc(v,w)}return null}function f(v,w,b,A){var D=w!==null?w.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return D!==null?null:a(v,w,""+b,A);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case dc:return b.key===D?l(v,w,b,A):null;case Rs:return b.key===D?c(v,w,b,A):null;case Mi:return D=b._init,f(v,w,D(b._payload),A)}if(sa(b)||$o(b))return D!==null?null:h(v,w,b,A,null);Tc(v,b)}return null}function g(v,w,b,A,D){if(typeof A=="string"&&A!==""||typeof A=="number")return v=v.get(b)||null,a(w,v,""+A,D);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case dc:return v=v.get(A.key===null?b:A.key)||null,l(w,v,A,D);case Rs:return v=v.get(A.key===null?b:A.key)||null,c(w,v,A,D);case Mi:var M=A._init;return g(v,w,b,M(A._payload),D)}if(sa(A)||$o(A))return v=v.get(b)||null,h(w,v,A,D,null);Tc(w,A)}return null}function y(v,w,b,A){for(var D=null,M=null,S=w,E=w=0,P=null;S!==null&&E<b.length;E++){S.index>E?(P=S,S=null):P=S.sibling;var k=f(v,S,b[E],A);if(k===null){S===null&&(S=P);break}t&&S&&k.alternate===null&&e(v,S),w=s(k,w,E),M===null?D=k:M.sibling=k,M=k,S=P}if(E===b.length)return n(v,S),Me&&Dr(v,E),D;if(S===null){for(;E<b.length;E++)S=d(v,b[E],A),S!==null&&(w=s(S,w,E),M===null?D=S:M.sibling=S,M=S);return Me&&Dr(v,E),D}for(S=i(v,S);E<b.length;E++)P=g(S,v,E,b[E],A),P!==null&&(t&&P.alternate!==null&&S.delete(P.key===null?E:P.key),w=s(P,w,E),M===null?D=P:M.sibling=P,M=P);return t&&S.forEach(function(C){return e(v,C)}),Me&&Dr(v,E),D}function x(v,w,b,A){var D=$o(b);if(typeof D!="function")throw Error(z(150));if(b=D.call(b),b==null)throw Error(z(151));for(var M=D=null,S=w,E=w=0,P=null,k=b.next();S!==null&&!k.done;E++,k=b.next()){S.index>E?(P=S,S=null):P=S.sibling;var C=f(v,S,k.value,A);if(C===null){S===null&&(S=P);break}t&&S&&C.alternate===null&&e(v,S),w=s(C,w,E),M===null?D=C:M.sibling=C,M=C,S=P}if(k.done)return n(v,S),Me&&Dr(v,E),D;if(S===null){for(;!k.done;E++,k=b.next())k=d(v,k.value,A),k!==null&&(w=s(k,w,E),M===null?D=k:M.sibling=k,M=k);return Me&&Dr(v,E),D}for(S=i(v,S);!k.done;E++,k=b.next())k=g(S,v,E,k.value,A),k!==null&&(t&&k.alternate!==null&&S.delete(k.key===null?E:k.key),w=s(k,w,E),M===null?D=k:M.sibling=k,M=k);return t&&S.forEach(function(N){return e(v,N)}),Me&&Dr(v,E),D}function T(v,w,b,A){if(typeof b=="object"&&b!==null&&b.type===Ns&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case dc:e:{for(var D=b.key,M=w;M!==null;){if(M.key===D){if(D=b.type,D===Ns){if(M.tag===7){n(v,M.sibling),w=r(M,b.props.children),w.return=v,v=w;break e}}else if(M.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Mi&&$v(D)===M.type){n(v,M.sibling),w=r(M,b.props),w.ref=Go(v,M,b),w.return=v,v=w;break e}n(v,M);break}else e(v,M);M=M.sibling}b.type===Ns?(w=Hr(b.props.children,v.mode,A,b.key),w.return=v,v=w):(A=cu(b.type,b.key,b.props,null,v.mode,A),A.ref=Go(v,w,b),A.return=v,v=A)}return o(v);case Rs:e:{for(M=b.key;w!==null;){if(w.key===M)if(w.tag===4&&w.stateNode.containerInfo===b.containerInfo&&w.stateNode.implementation===b.implementation){n(v,w.sibling),w=r(w,b.children||[]),w.return=v,v=w;break e}else{n(v,w);break}else e(v,w);w=w.sibling}w=xf(b,v.mode,A),w.return=v,v=w}return o(v);case Mi:return M=b._init,T(v,w,M(b._payload),A)}if(sa(b))return y(v,w,b,A);if($o(b))return x(v,w,b,A);Tc(v,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,w!==null&&w.tag===6?(n(v,w.sibling),w=r(w,b),w.return=v,v=w):(n(v,w),w=wf(b,v.mode,A),w.return=v,v=w),o(v)):n(v,w)}return T}var so=CE(!0),RE=CE(!1),Bu=wr(null),$u=null,Us=null,cm=null;function um(){cm=Us=$u=null}function hm(t){var e=Bu.current;Re(Bu),t._currentValue=e}function Pp(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Qs(t,e){$u=t,cm=Us=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&($t=!0),t.firstContext=null)}function dn(t){var e=t._currentValue;if(cm!==t)if(t={context:t,memoizedValue:e,next:null},Us===null){if($u===null)throw Error(z(308));Us=t,$u.dependencies={lanes:0,firstContext:t}}else Us=Us.next=t;return e}var jr=null;function dm(t){jr===null?jr=[t]:jr.push(t)}function NE(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,dm(e)):(n.next=r.next,r.next=n),e.interleaved=n,_i(t,i)}function _i(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Oi=!1;function fm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function DE(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function fi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function tr(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,ge&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,_i(t,n)}return r=i.interleaved,r===null?(e.next=e,dm(i)):(e.next=r.next,r.next=e),i.interleaved=e,_i(t,n)}function iu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Jg(t,n)}}function Hv(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?r=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Hu(t,e,n,i){var r=t.updateQueue;Oi=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(s!==null){var d=r.baseState;o=0,h=c=l=null,a=s;do{var f=a.lane,g=a.eventTime;if((i&f)===f){h!==null&&(h=h.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=t,x=a;switch(f=e,g=n,x.tag){case 1:if(y=x.payload,typeof y=="function"){d=y.call(g,d,f);break e}d=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=x.payload,f=typeof y=="function"?y.call(g,d,f):y,f==null)break e;d=Ue({},d,f);break e;case 2:Oi=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=r.effects,f===null?r.effects=[a]:f.push(a))}else g={eventTime:g,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=g,l=d):h=h.next=g,o|=f;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;f=a,a=f.next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}while(!0);if(h===null&&(l=d),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=h,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);Jr|=o,t.lanes=o,t.memoizedState=d}}function Wv(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(z(191,r));r.call(i)}}}var Al={},Fn=wr(Al),Xa=wr(Al),Ja=wr(Al);function Ur(t){if(t===Al)throw Error(z(174));return t}function pm(t,e){switch(ke(Ja,e),ke(Xa,t),ke(Fn,Al),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:lp(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=lp(e,t)}Re(Fn),ke(Fn,e)}function oo(){Re(Fn),Re(Xa),Re(Ja)}function ME(t){Ur(Ja.current);var e=Ur(Fn.current),n=lp(e,t.type);e!==n&&(ke(Xa,t),ke(Fn,n))}function gm(t){Xa.current===t&&(Re(Fn),Re(Xa))}var Ve=wr(0);function Wu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var pf=[];function mm(){for(var t=0;t<pf.length;t++)pf[t]._workInProgressVersionPrimary=null;pf.length=0}var ru=Si.ReactCurrentDispatcher,gf=Si.ReactCurrentBatchConfig,Xr=0,Fe=null,Ze=null,rt=null,qu=!1,Sa=!1,Za=0,ZP=0;function _t(){throw Error(z(321))}function ym(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!bn(t[n],e[n]))return!1;return!0}function _m(t,e,n,i,r,s){if(Xr=s,Fe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ru.current=t===null||t.memoizedState===null?iA:rA,t=n(i,r),Sa){s=0;do{if(Sa=!1,Za=0,25<=s)throw Error(z(301));s+=1,rt=Ze=null,e.updateQueue=null,ru.current=sA,t=n(i,r)}while(Sa)}if(ru.current=Ku,e=Ze!==null&&Ze.next!==null,Xr=0,rt=Ze=Fe=null,qu=!1,e)throw Error(z(300));return t}function vm(){var t=Za!==0;return Za=0,t}function Nn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rt===null?Fe.memoizedState=rt=t:rt=rt.next=t,rt}function fn(){if(Ze===null){var t=Fe.alternate;t=t!==null?t.memoizedState:null}else t=Ze.next;var e=rt===null?Fe.memoizedState:rt.next;if(e!==null)rt=e,Ze=t;else{if(t===null)throw Error(z(310));Ze=t,t={memoizedState:Ze.memoizedState,baseState:Ze.baseState,baseQueue:Ze.baseQueue,queue:Ze.queue,next:null},rt===null?Fe.memoizedState=rt=t:rt=rt.next=t}return rt}function el(t,e){return typeof e=="function"?e(t):e}function mf(t){var e=fn(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var i=Ze,r=i.baseQueue,s=n.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,n.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,c=s;do{var h=c.lane;if((Xr&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:t(i,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=i):l=l.next=d,Fe.lanes|=h,Jr|=h}c=c.next}while(c!==null&&c!==s);l===null?o=i:l.next=a,bn(i,e.memoizedState)||($t=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do s=r.lane,Fe.lanes|=s,Jr|=s,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function yf(t){var e=fn(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do s=t(s,o.action),o=o.next;while(o!==r);bn(s,e.memoizedState)||($t=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function OE(){}function LE(t,e){var n=Fe,i=fn(),r=e(),s=!bn(i.memoizedState,r);if(s&&(i.memoizedState=r,$t=!0),i=i.queue,wm(jE.bind(null,n,i,t),[t]),i.getSnapshot!==e||s||rt!==null&&rt.memoizedState.tag&1){if(n.flags|=2048,tl(9,FE.bind(null,n,i,r,e),void 0,null),ot===null)throw Error(z(349));Xr&30||VE(n,e,r)}return r}function VE(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Fe.updateQueue,e===null?(e={lastEffect:null,stores:null},Fe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function FE(t,e,n,i){e.value=n,e.getSnapshot=i,UE(e)&&zE(t)}function jE(t,e,n){return n(function(){UE(e)&&zE(t)})}function UE(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!bn(t,n)}catch{return!0}}function zE(t){var e=_i(t,1);e!==null&&xn(e,t,1,-1)}function qv(t){var e=Nn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:el,lastRenderedState:t},e.queue=t,t=t.dispatch=nA.bind(null,Fe,t),[e.memoizedState,t]}function tl(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=Fe.updateQueue,e===null?(e={lastEffect:null,stores:null},Fe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function BE(){return fn().memoizedState}function su(t,e,n,i){var r=Nn();Fe.flags|=t,r.memoizedState=tl(1|e,n,void 0,i===void 0?null:i)}function Mh(t,e,n,i){var r=fn();i=i===void 0?null:i;var s=void 0;if(Ze!==null){var o=Ze.memoizedState;if(s=o.destroy,i!==null&&ym(i,o.deps)){r.memoizedState=tl(e,n,s,i);return}}Fe.flags|=t,r.memoizedState=tl(1|e,n,s,i)}function Kv(t,e){return su(8390656,8,t,e)}function wm(t,e){return Mh(2048,8,t,e)}function $E(t,e){return Mh(4,2,t,e)}function HE(t,e){return Mh(4,4,t,e)}function WE(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function qE(t,e,n){return n=n!=null?n.concat([t]):null,Mh(4,4,WE.bind(null,e,t),n)}function xm(){}function KE(t,e){var n=fn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&ym(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function GE(t,e){var n=fn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&ym(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function QE(t,e,n){return Xr&21?(bn(n,e)||(n=eE(),Fe.lanes|=n,Jr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,$t=!0),t.memoizedState=n)}function eA(t,e){var n=we;we=n!==0&&4>n?n:4,t(!0);var i=gf.transition;gf.transition={};try{t(!1),e()}finally{we=n,gf.transition=i}}function YE(){return fn().memoizedState}function tA(t,e,n){var i=ir(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},XE(t))JE(e,n);else if(n=NE(t,e,n,i),n!==null){var r=Lt();xn(n,t,i,r),ZE(n,e,i)}}function nA(t,e,n){var i=ir(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(XE(t))JE(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,bn(a,o)){var l=e.interleaved;l===null?(r.next=r,dm(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}n=NE(t,e,r,i),n!==null&&(r=Lt(),xn(n,t,i,r),ZE(n,e,i))}}function XE(t){var e=t.alternate;return t===Fe||e!==null&&e===Fe}function JE(t,e){Sa=qu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function ZE(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Jg(t,n)}}var Ku={readContext:dn,useCallback:_t,useContext:_t,useEffect:_t,useImperativeHandle:_t,useInsertionEffect:_t,useLayoutEffect:_t,useMemo:_t,useReducer:_t,useRef:_t,useState:_t,useDebugValue:_t,useDeferredValue:_t,useTransition:_t,useMutableSource:_t,useSyncExternalStore:_t,useId:_t,unstable_isNewReconciler:!1},iA={readContext:dn,useCallback:function(t,e){return Nn().memoizedState=[t,e===void 0?null:e],t},useContext:dn,useEffect:Kv,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,su(4194308,4,WE.bind(null,e,t),n)},useLayoutEffect:function(t,e){return su(4194308,4,t,e)},useInsertionEffect:function(t,e){return su(4,2,t,e)},useMemo:function(t,e){var n=Nn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Nn();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=tA.bind(null,Fe,t),[i.memoizedState,t]},useRef:function(t){var e=Nn();return t={current:t},e.memoizedState=t},useState:qv,useDebugValue:xm,useDeferredValue:function(t){return Nn().memoizedState=t},useTransition:function(){var t=qv(!1),e=t[0];return t=eA.bind(null,t[1]),Nn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=Fe,r=Nn();if(Me){if(n===void 0)throw Error(z(407));n=n()}else{if(n=e(),ot===null)throw Error(z(349));Xr&30||VE(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,Kv(jE.bind(null,i,s,t),[t]),i.flags|=2048,tl(9,FE.bind(null,i,s,n,e),void 0,null),n},useId:function(){var t=Nn(),e=ot.identifierPrefix;if(Me){var n=ri,i=ii;n=(i&~(1<<32-wn(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=Za++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=ZP++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},rA={readContext:dn,useCallback:KE,useContext:dn,useEffect:wm,useImperativeHandle:qE,useInsertionEffect:$E,useLayoutEffect:HE,useMemo:GE,useReducer:mf,useRef:BE,useState:function(){return mf(el)},useDebugValue:xm,useDeferredValue:function(t){var e=fn();return QE(e,Ze.memoizedState,t)},useTransition:function(){var t=mf(el)[0],e=fn().memoizedState;return[t,e]},useMutableSource:OE,useSyncExternalStore:LE,useId:YE,unstable_isNewReconciler:!1},sA={readContext:dn,useCallback:KE,useContext:dn,useEffect:wm,useImperativeHandle:qE,useInsertionEffect:$E,useLayoutEffect:HE,useMemo:GE,useReducer:yf,useRef:BE,useState:function(){return yf(el)},useDebugValue:xm,useDeferredValue:function(t){var e=fn();return Ze===null?e.memoizedState=t:QE(e,Ze.memoizedState,t)},useTransition:function(){var t=yf(el)[0],e=fn().memoizedState;return[t,e]},useMutableSource:OE,useSyncExternalStore:LE,useId:YE,unstable_isNewReconciler:!1};function mn(t,e){if(t&&t.defaultProps){e=Ue({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Ap(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Ue({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Oh={isMounted:function(t){return(t=t._reactInternals)?hs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Lt(),r=ir(t),s=fi(i,r);s.payload=e,n!=null&&(s.callback=n),e=tr(t,s,r),e!==null&&(xn(e,t,r,i),iu(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Lt(),r=ir(t),s=fi(i,r);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=tr(t,s,r),e!==null&&(xn(e,t,r,i),iu(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Lt(),i=ir(t),r=fi(n,i);r.tag=2,e!=null&&(r.callback=e),e=tr(t,r,i),e!==null&&(xn(e,t,i,n),iu(e,t,i))}};function Gv(t,e,n,i,r,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!Ka(n,i)||!Ka(r,s):!0}function eT(t,e,n){var i=!1,r=dr,s=e.contextType;return typeof s=="object"&&s!==null?s=dn(s):(r=Wt(e)?Qr:kt.current,i=e.contextTypes,s=(i=i!=null)?io(t,r):dr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Oh,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function Qv(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Oh.enqueueReplaceState(e,e.state,null)}function Cp(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},fm(t);var s=e.contextType;typeof s=="object"&&s!==null?r.context=dn(s):(s=Wt(e)?Qr:kt.current,r.context=io(t,s)),r.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Ap(t,e,s,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Oh.enqueueReplaceState(r,r.state,null),Hu(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function ao(t,e){try{var n="",i=e;do n+=Dk(i),i=i.return;while(i);var r=n}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:r,digest:null}}function _f(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Rp(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var oA=typeof WeakMap=="function"?WeakMap:Map;function tT(t,e,n){n=fi(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Qu||(Qu=!0,zp=i),Rp(t,e)},n}function nT(t,e,n){n=fi(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){Rp(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Rp(t,e),typeof i!="function"&&(nr===null?nr=new Set([this]):nr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Yv(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new oA;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=wA.bind(null,t,e,n),e.then(t,t))}function Xv(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Jv(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=fi(-1,1),e.tag=2,tr(n,e,1))),n.lanes|=1),t)}var aA=Si.ReactCurrentOwner,$t=!1;function Dt(t,e,n,i){e.child=t===null?RE(e,null,n,i):so(e,t.child,n,i)}function Zv(t,e,n,i,r){n=n.render;var s=e.ref;return Qs(e,r),i=_m(t,e,n,i,s,r),n=vm(),t!==null&&!$t?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,vi(t,e,r)):(Me&&n&&om(e),e.flags|=1,Dt(t,e,i,r),e.child)}function e0(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!Am(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,iT(t,e,s,i,r)):(t=cu(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&r)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Ka,n(o,i)&&t.ref===e.ref)return vi(t,e,r)}return e.flags|=1,t=rr(s,i),t.ref=e.ref,t.return=e,e.child=t}function iT(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(Ka(s,i)&&t.ref===e.ref)if($t=!1,e.pendingProps=i=s,(t.lanes&r)!==0)t.flags&131072&&($t=!0);else return e.lanes=t.lanes,vi(t,e,r)}return Np(t,e,n,i,r)}function rT(t,e,n){var i=e.pendingProps,r=i.children,s=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ke(Bs,Xt),Xt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ke(Bs,Xt),Xt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:n,ke(Bs,Xt),Xt|=i}else s!==null?(i=s.baseLanes|n,e.memoizedState=null):i=n,ke(Bs,Xt),Xt|=i;return Dt(t,e,r,n),e.child}function sT(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Np(t,e,n,i,r){var s=Wt(n)?Qr:kt.current;return s=io(e,s),Qs(e,r),n=_m(t,e,n,i,s,r),i=vm(),t!==null&&!$t?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,vi(t,e,r)):(Me&&i&&om(e),e.flags|=1,Dt(t,e,n,r),e.child)}function t0(t,e,n,i,r){if(Wt(n)){var s=!0;ju(e)}else s=!1;if(Qs(e,r),e.stateNode===null)ou(t,e),eT(e,n,i),Cp(e,n,i,r),i=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=dn(c):(c=Wt(n)?Qr:kt.current,c=io(e,c));var h=n.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==c)&&Qv(e,o,i,c),Oi=!1;var f=e.memoizedState;o.state=f,Hu(e,i,o,r),l=e.memoizedState,a!==i||f!==l||Ht.current||Oi?(typeof h=="function"&&(Ap(e,n,h,i),l=e.memoizedState),(a=Oi||Gv(e,n,a,i,f,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,DE(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:mn(e.type,a),o.props=c,d=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=dn(l):(l=Wt(n)?Qr:kt.current,l=io(e,l));var g=n.getDerivedStateFromProps;(h=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&Qv(e,o,i,l),Oi=!1,f=e.memoizedState,o.state=f,Hu(e,i,o,r);var y=e.memoizedState;a!==d||f!==y||Ht.current||Oi?(typeof g=="function"&&(Ap(e,n,g,i),y=e.memoizedState),(c=Oi||Gv(e,n,c,i,f,y,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,y,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=y),o.props=i,o.state=y,o.context=l,i=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),i=!1)}return Dp(t,e,n,i,s,r)}function Dp(t,e,n,i,r,s){sT(t,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&Uv(e,n,!1),vi(t,e,s);i=e.stateNode,aA.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&o?(e.child=so(e,t.child,null,s),e.child=so(e,null,a,s)):Dt(t,e,a,s),e.memoizedState=i.state,r&&Uv(e,n,!0),e.child}function oT(t){var e=t.stateNode;e.pendingContext?jv(t,e.pendingContext,e.pendingContext!==e.context):e.context&&jv(t,e.context,!1),pm(t,e.containerInfo)}function n0(t,e,n,i,r){return ro(),lm(r),e.flags|=256,Dt(t,e,n,i),e.child}var Mp={dehydrated:null,treeContext:null,retryLane:0};function Op(t){return{baseLanes:t,cachePool:null,transitions:null}}function aT(t,e,n){var i=e.pendingProps,r=Ve.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),ke(Ve,r&1),t===null)return kp(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,t=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Fh(o,i,0,null),t=Hr(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Op(n),e.memoizedState=Mp,t):Em(e,o));if(r=t.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return lA(t,e,o,i,a,r,n);if(s){s=i.fallback,o=e.mode,r=t.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=rr(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=rr(a,s):(s=Hr(s,o,n,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=t.child.memoizedState,o=o===null?Op(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Mp,i}return s=t.child,t=s.sibling,i=rr(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function Em(t,e){return e=Fh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function bc(t,e,n,i){return i!==null&&lm(i),so(e,t.child,null,n),t=Em(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function lA(t,e,n,i,r,s,o){if(n)return e.flags&256?(e.flags&=-257,i=_f(Error(z(422))),bc(t,e,o,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=Fh({mode:"visible",children:i.children},r,0,null),s=Hr(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&so(e,t.child,null,o),e.child.memoizedState=Op(o),e.memoizedState=Mp,s);if(!(e.mode&1))return bc(t,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(z(419)),i=_f(s,i,void 0),bc(t,e,o,i)}if(a=(o&t.childLanes)!==0,$t||a){if(i=ot,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,_i(t,r),xn(i,t,r,-1))}return Pm(),i=_f(Error(z(421))),bc(t,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=xA.bind(null,t),r._reactRetry=e,null):(t=s.treeContext,Zt=er(r.nextSibling),tn=e,Me=!0,_n=null,t!==null&&(an[ln++]=ii,an[ln++]=ri,an[ln++]=Yr,ii=t.id,ri=t.overflow,Yr=e),e=Em(e,i.children),e.flags|=4096,e)}function i0(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Pp(t.return,e,n)}function vf(t,e,n,i,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function lT(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(Dt(t,e,i.children,n),i=Ve.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&i0(t,n,e);else if(t.tag===19)i0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(ke(Ve,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&Wu(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),vf(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&Wu(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}vf(e,!0,n,null,s);break;case"together":vf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ou(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function vi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Jr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(z(153));if(e.child!==null){for(t=e.child,n=rr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=rr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function cA(t,e,n){switch(e.tag){case 3:oT(e),ro();break;case 5:ME(e);break;case 1:Wt(e.type)&&ju(e);break;case 4:pm(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;ke(Bu,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(ke(Ve,Ve.current&1),e.flags|=128,null):n&e.child.childLanes?aT(t,e,n):(ke(Ve,Ve.current&1),t=vi(t,e,n),t!==null?t.sibling:null);ke(Ve,Ve.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return lT(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),ke(Ve,Ve.current),i)break;return null;case 22:case 23:return e.lanes=0,rT(t,e,n)}return vi(t,e,n)}var cT,Lp,uT,hT;cT=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Lp=function(){};uT=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,Ur(Fn.current);var s=null;switch(n){case"input":r=rp(t,r),i=rp(t,i),s=[];break;case"select":r=Ue({},r,{value:void 0}),i=Ue({},i,{value:void 0}),s=[];break;case"textarea":r=ap(t,r),i=ap(t,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=Vu)}cp(n,i);var o;n=null;for(c in r)if(!i.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var a=r[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Ua.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in i){var l=i[c];if(a=r!=null?r[c]:void 0,i.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Ua.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Ae("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};hT=function(t,e,n,i){n!==i&&(e.flags|=4)};function Qo(t,e){if(!Me)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function vt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function uA(t,e,n){var i=e.pendingProps;switch(am(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vt(e),null;case 1:return Wt(e.type)&&Fu(),vt(e),null;case 3:return i=e.stateNode,oo(),Re(Ht),Re(kt),mm(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(Ec(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,_n!==null&&(Hp(_n),_n=null))),Lp(t,e),vt(e),null;case 5:gm(e);var r=Ur(Ja.current);if(n=e.type,t!==null&&e.stateNode!=null)uT(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(z(166));return vt(e),null}if(t=Ur(Fn.current),Ec(e)){i=e.stateNode,n=e.type;var s=e.memoizedProps;switch(i[Mn]=e,i[Ya]=s,t=(e.mode&1)!==0,n){case"dialog":Ae("cancel",i),Ae("close",i);break;case"iframe":case"object":case"embed":Ae("load",i);break;case"video":case"audio":for(r=0;r<aa.length;r++)Ae(aa[r],i);break;case"source":Ae("error",i);break;case"img":case"image":case"link":Ae("error",i),Ae("load",i);break;case"details":Ae("toggle",i);break;case"input":dv(i,s),Ae("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Ae("invalid",i);break;case"textarea":pv(i,s),Ae("invalid",i)}cp(n,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&xc(i.textContent,a,t),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&xc(i.textContent,a,t),r=["children",""+a]):Ua.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ae("scroll",i)}switch(n){case"input":fc(i),fv(i,s,!0);break;case"textarea":fc(i),gv(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=Vu)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=jx(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=o.createElement(n,{is:i.is}):(t=o.createElement(n),n==="select"&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,n),t[Mn]=e,t[Ya]=i,cT(t,e,!1,!1),e.stateNode=t;e:{switch(o=up(n,i),n){case"dialog":Ae("cancel",t),Ae("close",t),r=i;break;case"iframe":case"object":case"embed":Ae("load",t),r=i;break;case"video":case"audio":for(r=0;r<aa.length;r++)Ae(aa[r],t);r=i;break;case"source":Ae("error",t),r=i;break;case"img":case"image":case"link":Ae("error",t),Ae("load",t),r=i;break;case"details":Ae("toggle",t),r=i;break;case"input":dv(t,i),r=rp(t,i),Ae("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=Ue({},i,{value:void 0}),Ae("invalid",t);break;case"textarea":pv(t,i),r=ap(t,i),Ae("invalid",t);break;default:r=i}cp(n,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?Bx(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Ux(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&za(t,l):typeof l=="number"&&za(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ua.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Ae("scroll",t):l!=null&&qg(t,s,l,o))}switch(n){case"input":fc(t),fv(t,i,!1);break;case"textarea":fc(t),gv(t);break;case"option":i.value!=null&&t.setAttribute("value",""+hr(i.value));break;case"select":t.multiple=!!i.multiple,s=i.value,s!=null?Ws(t,!!i.multiple,s,!1):i.defaultValue!=null&&Ws(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=Vu)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return vt(e),null;case 6:if(t&&e.stateNode!=null)hT(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(z(166));if(n=Ur(Ja.current),Ur(Fn.current),Ec(e)){if(i=e.stateNode,n=e.memoizedProps,i[Mn]=e,(s=i.nodeValue!==n)&&(t=tn,t!==null))switch(t.tag){case 3:xc(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&xc(i.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Mn]=e,e.stateNode=i}return vt(e),null;case 13:if(Re(Ve),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Me&&Zt!==null&&e.mode&1&&!(e.flags&128))AE(),ro(),e.flags|=98560,s=!1;else if(s=Ec(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(z(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(z(317));s[Mn]=e}else ro(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;vt(e),s=!1}else _n!==null&&(Hp(_n),_n=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||Ve.current&1?et===0&&(et=3):Pm())),e.updateQueue!==null&&(e.flags|=4),vt(e),null);case 4:return oo(),Lp(t,e),t===null&&Ga(e.stateNode.containerInfo),vt(e),null;case 10:return hm(e.type._context),vt(e),null;case 17:return Wt(e.type)&&Fu(),vt(e),null;case 19:if(Re(Ve),s=e.memoizedState,s===null)return vt(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)Qo(s,!1);else{if(et!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Wu(t),o!==null){for(e.flags|=128,Qo(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)s=n,t=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ke(Ve,Ve.current&1|2),e.child}t=t.sibling}s.tail!==null&&Ge()>lo&&(e.flags|=128,i=!0,Qo(s,!1),e.lanes=4194304)}else{if(!i)if(t=Wu(o),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Qo(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Me)return vt(e),null}else 2*Ge()-s.renderingStartTime>lo&&n!==1073741824&&(e.flags|=128,i=!0,Qo(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Ge(),e.sibling=null,n=Ve.current,ke(Ve,i?n&1|2:n&1),e):(vt(e),null);case 22:case 23:return km(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Xt&1073741824&&(vt(e),e.subtreeFlags&6&&(e.flags|=8192)):vt(e),null;case 24:return null;case 25:return null}throw Error(z(156,e.tag))}function hA(t,e){switch(am(e),e.tag){case 1:return Wt(e.type)&&Fu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return oo(),Re(Ht),Re(kt),mm(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return gm(e),null;case 13:if(Re(Ve),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(z(340));ro()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Re(Ve),null;case 4:return oo(),null;case 10:return hm(e.type._context),null;case 22:case 23:return km(),null;case 24:return null;default:return null}}var Sc=!1,Tt=!1,dA=typeof WeakSet=="function"?WeakSet:Set,W=null;function zs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){$e(t,e,i)}else n.current=null}function Vp(t,e,n){try{n()}catch(i){$e(t,e,i)}}var r0=!1;function fA(t,e){if(wp=Mu,t=mE(),sm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,h=0,d=t,f=null;t:for(;;){for(var g;d!==n||r!==0&&d.nodeType!==3||(a=o+r),d!==s||i!==0&&d.nodeType!==3||(l=o+i),d.nodeType===3&&(o+=d.nodeValue.length),(g=d.firstChild)!==null;)f=d,d=g;for(;;){if(d===t)break t;if(f===n&&++c===r&&(a=o),f===s&&++h===i&&(l=o),(g=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=g}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(xp={focusedElem:t,selectionRange:n},Mu=!1,W=e;W!==null;)if(e=W,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,W=t;else for(;W!==null;){e=W;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var x=y.memoizedProps,T=y.memoizedState,v=e.stateNode,w=v.getSnapshotBeforeUpdate(e.elementType===e.type?x:mn(e.type,x),T);v.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(A){$e(e,e.return,A)}if(t=e.sibling,t!==null){t.return=e.return,W=t;break}W=e.return}return y=r0,r0=!1,y}function Ia(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,s!==void 0&&Vp(e,n,s)}r=r.next}while(r!==i)}}function Lh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function Fp(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function dT(t){var e=t.alternate;e!==null&&(t.alternate=null,dT(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Mn],delete e[Ya],delete e[bp],delete e[QP],delete e[YP])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function fT(t){return t.tag===5||t.tag===3||t.tag===4}function s0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||fT(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function jp(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Vu));else if(i!==4&&(t=t.child,t!==null))for(jp(t,e,n),t=t.sibling;t!==null;)jp(t,e,n),t=t.sibling}function Up(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(Up(t,e,n),t=t.sibling;t!==null;)Up(t,e,n),t=t.sibling}var lt=null,yn=!1;function Ni(t,e,n){for(n=n.child;n!==null;)pT(t,e,n),n=n.sibling}function pT(t,e,n){if(Vn&&typeof Vn.onCommitFiberUnmount=="function")try{Vn.onCommitFiberUnmount(Ph,n)}catch{}switch(n.tag){case 5:Tt||zs(n,e);case 6:var i=lt,r=yn;lt=null,Ni(t,e,n),lt=i,yn=r,lt!==null&&(yn?(t=lt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):lt.removeChild(n.stateNode));break;case 18:lt!==null&&(yn?(t=lt,n=n.stateNode,t.nodeType===8?df(t.parentNode,n):t.nodeType===1&&df(t,n),Wa(t)):df(lt,n.stateNode));break;case 4:i=lt,r=yn,lt=n.stateNode.containerInfo,yn=!0,Ni(t,e,n),lt=i,yn=r;break;case 0:case 11:case 14:case 15:if(!Tt&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Vp(n,e,o),r=r.next}while(r!==i)}Ni(t,e,n);break;case 1:if(!Tt&&(zs(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){$e(n,e,a)}Ni(t,e,n);break;case 21:Ni(t,e,n);break;case 22:n.mode&1?(Tt=(i=Tt)||n.memoizedState!==null,Ni(t,e,n),Tt=i):Ni(t,e,n);break;default:Ni(t,e,n)}}function o0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new dA),e.forEach(function(i){var r=EA.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function gn(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:lt=a.stateNode,yn=!1;break e;case 3:lt=a.stateNode.containerInfo,yn=!0;break e;case 4:lt=a.stateNode.containerInfo,yn=!0;break e}a=a.return}if(lt===null)throw Error(z(160));pT(s,o,r),lt=null,yn=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(c){$e(r,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)gT(e,t),e=e.sibling}function gT(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(gn(e,t),An(t),i&4){try{Ia(3,t,t.return),Lh(3,t)}catch(x){$e(t,t.return,x)}try{Ia(5,t,t.return)}catch(x){$e(t,t.return,x)}}break;case 1:gn(e,t),An(t),i&512&&n!==null&&zs(n,n.return);break;case 5:if(gn(e,t),An(t),i&512&&n!==null&&zs(n,n.return),t.flags&32){var r=t.stateNode;try{za(r,"")}catch(x){$e(t,t.return,x)}}if(i&4&&(r=t.stateNode,r!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&Vx(r,s),up(a,o);var c=up(a,s);for(o=0;o<l.length;o+=2){var h=l[o],d=l[o+1];h==="style"?Bx(r,d):h==="dangerouslySetInnerHTML"?Ux(r,d):h==="children"?za(r,d):qg(r,h,d,c)}switch(a){case"input":sp(r,s);break;case"textarea":Fx(r,s);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?Ws(r,!!s.multiple,g,!1):f!==!!s.multiple&&(s.defaultValue!=null?Ws(r,!!s.multiple,s.defaultValue,!0):Ws(r,!!s.multiple,s.multiple?[]:"",!1))}r[Ya]=s}catch(x){$e(t,t.return,x)}}break;case 6:if(gn(e,t),An(t),i&4){if(t.stateNode===null)throw Error(z(162));r=t.stateNode,s=t.memoizedProps;try{r.nodeValue=s}catch(x){$e(t,t.return,x)}}break;case 3:if(gn(e,t),An(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Wa(e.containerInfo)}catch(x){$e(t,t.return,x)}break;case 4:gn(e,t),An(t);break;case 13:gn(e,t),An(t),r=t.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(Sm=Ge())),i&4&&o0(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Tt=(c=Tt)||h,gn(e,t),Tt=c):gn(e,t),An(t),i&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(W=t,h=t.child;h!==null;){for(d=W=h;W!==null;){switch(f=W,g=f.child,f.tag){case 0:case 11:case 14:case 15:Ia(4,f,f.return);break;case 1:zs(f,f.return);var y=f.stateNode;if(typeof y.componentWillUnmount=="function"){i=f,n=f.return;try{e=i,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(x){$e(i,n,x)}}break;case 5:zs(f,f.return);break;case 22:if(f.memoizedState!==null){l0(d);continue}}g!==null?(g.return=f,W=g):l0(d)}h=h.sibling}e:for(h=null,d=t;;){if(d.tag===5){if(h===null){h=d;try{r=d.stateNode,c?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=zx("display",o))}catch(x){$e(t,t.return,x)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(x){$e(t,t.return,x)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:gn(e,t),An(t),i&4&&o0(t);break;case 21:break;default:gn(e,t),An(t)}}function An(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(fT(n)){var i=n;break e}n=n.return}throw Error(z(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(za(r,""),i.flags&=-33);var s=s0(t);Up(t,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=s0(t);jp(t,a,o);break;default:throw Error(z(161))}}catch(l){$e(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function pA(t,e,n){W=t,mT(t)}function mT(t,e,n){for(var i=(t.mode&1)!==0;W!==null;){var r=W,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||Sc;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||Tt;a=Sc;var c=Tt;if(Sc=o,(Tt=l)&&!c)for(W=r;W!==null;)o=W,l=o.child,o.tag===22&&o.memoizedState!==null?c0(r):l!==null?(l.return=o,W=l):c0(r);for(;s!==null;)W=s,mT(s),s=s.sibling;W=r,Sc=a,Tt=c}a0(t)}else r.subtreeFlags&8772&&s!==null?(s.return=r,W=s):a0(t)}}function a0(t){for(;W!==null;){var e=W;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Tt||Lh(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Tt)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:mn(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Wv(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Wv(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&Wa(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}Tt||e.flags&512&&Fp(e)}catch(f){$e(e,e.return,f)}}if(e===t){W=null;break}if(n=e.sibling,n!==null){n.return=e.return,W=n;break}W=e.return}}function l0(t){for(;W!==null;){var e=W;if(e===t){W=null;break}var n=e.sibling;if(n!==null){n.return=e.return,W=n;break}W=e.return}}function c0(t){for(;W!==null;){var e=W;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Lh(4,e)}catch(l){$e(e,n,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){$e(e,r,l)}}var s=e.return;try{Fp(e)}catch(l){$e(e,s,l)}break;case 5:var o=e.return;try{Fp(e)}catch(l){$e(e,o,l)}}}catch(l){$e(e,e.return,l)}if(e===t){W=null;break}var a=e.sibling;if(a!==null){a.return=e.return,W=a;break}W=e.return}}var gA=Math.ceil,Gu=Si.ReactCurrentDispatcher,Tm=Si.ReactCurrentOwner,un=Si.ReactCurrentBatchConfig,ge=0,ot=null,Xe=null,ht=0,Xt=0,Bs=wr(0),et=0,nl=null,Jr=0,Vh=0,bm=0,ka=null,Ut=null,Sm=0,lo=1/0,Zn=null,Qu=!1,zp=null,nr=null,Ic=!1,Hi=null,Yu=0,Pa=0,Bp=null,au=-1,lu=0;function Lt(){return ge&6?Ge():au!==-1?au:au=Ge()}function ir(t){return t.mode&1?ge&2&&ht!==0?ht&-ht:JP.transition!==null?(lu===0&&(lu=eE()),lu):(t=we,t!==0||(t=window.event,t=t===void 0?16:aE(t.type)),t):1}function xn(t,e,n,i){if(50<Pa)throw Pa=0,Bp=null,Error(z(185));Il(t,n,i),(!(ge&2)||t!==ot)&&(t===ot&&(!(ge&2)&&(Vh|=n),et===4&&Vi(t,ht)),qt(t,i),n===1&&ge===0&&!(e.mode&1)&&(lo=Ge()+500,Dh&&xr()))}function qt(t,e){var n=t.callbackNode;Jk(t,e);var i=Du(t,t===ot?ht:0);if(i===0)n!==null&&_v(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&_v(n),e===1)t.tag===0?XP(u0.bind(null,t)):IE(u0.bind(null,t)),KP(function(){!(ge&6)&&xr()}),n=null;else{switch(tE(i)){case 1:n=Xg;break;case 4:n=Jx;break;case 16:n=Nu;break;case 536870912:n=Zx;break;default:n=Nu}n=bT(n,yT.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function yT(t,e){if(au=-1,lu=0,ge&6)throw Error(z(327));var n=t.callbackNode;if(Ys()&&t.callbackNode!==n)return null;var i=Du(t,t===ot?ht:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=Xu(t,i);else{e=i;var r=ge;ge|=2;var s=vT();(ot!==t||ht!==e)&&(Zn=null,lo=Ge()+500,$r(t,e));do try{_A();break}catch(a){_T(t,a)}while(!0);um(),Gu.current=s,ge=r,Xe!==null?e=0:(ot=null,ht=0,e=et)}if(e!==0){if(e===2&&(r=gp(t),r!==0&&(i=r,e=$p(t,r))),e===1)throw n=nl,$r(t,0),Vi(t,i),qt(t,Ge()),n;if(e===6)Vi(t,i);else{if(r=t.current.alternate,!(i&30)&&!mA(r)&&(e=Xu(t,i),e===2&&(s=gp(t),s!==0&&(i=s,e=$p(t,s))),e===1))throw n=nl,$r(t,0),Vi(t,i),qt(t,Ge()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(z(345));case 2:Mr(t,Ut,Zn);break;case 3:if(Vi(t,i),(i&130023424)===i&&(e=Sm+500-Ge(),10<e)){if(Du(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){Lt(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=Tp(Mr.bind(null,t,Ut,Zn),e);break}Mr(t,Ut,Zn);break;case 4:if(Vi(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var o=31-wn(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=Ge()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*gA(i/1960))-i,10<i){t.timeoutHandle=Tp(Mr.bind(null,t,Ut,Zn),i);break}Mr(t,Ut,Zn);break;case 5:Mr(t,Ut,Zn);break;default:throw Error(z(329))}}}return qt(t,Ge()),t.callbackNode===n?yT.bind(null,t):null}function $p(t,e){var n=ka;return t.current.memoizedState.isDehydrated&&($r(t,e).flags|=256),t=Xu(t,e),t!==2&&(e=Ut,Ut=n,e!==null&&Hp(e)),t}function Hp(t){Ut===null?Ut=t:Ut.push.apply(Ut,t)}function mA(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!bn(s(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Vi(t,e){for(e&=~bm,e&=~Vh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-wn(e),i=1<<n;t[n]=-1,e&=~i}}function u0(t){if(ge&6)throw Error(z(327));Ys();var e=Du(t,0);if(!(e&1))return qt(t,Ge()),null;var n=Xu(t,e);if(t.tag!==0&&n===2){var i=gp(t);i!==0&&(e=i,n=$p(t,i))}if(n===1)throw n=nl,$r(t,0),Vi(t,e),qt(t,Ge()),n;if(n===6)throw Error(z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Mr(t,Ut,Zn),qt(t,Ge()),null}function Im(t,e){var n=ge;ge|=1;try{return t(e)}finally{ge=n,ge===0&&(lo=Ge()+500,Dh&&xr())}}function Zr(t){Hi!==null&&Hi.tag===0&&!(ge&6)&&Ys();var e=ge;ge|=1;var n=un.transition,i=we;try{if(un.transition=null,we=1,t)return t()}finally{we=i,un.transition=n,ge=e,!(ge&6)&&xr()}}function km(){Xt=Bs.current,Re(Bs)}function $r(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,qP(n)),Xe!==null)for(n=Xe.return;n!==null;){var i=n;switch(am(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Fu();break;case 3:oo(),Re(Ht),Re(kt),mm();break;case 5:gm(i);break;case 4:oo();break;case 13:Re(Ve);break;case 19:Re(Ve);break;case 10:hm(i.type._context);break;case 22:case 23:km()}n=n.return}if(ot=t,Xe=t=rr(t.current,null),ht=Xt=e,et=0,nl=null,bm=Vh=Jr=0,Ut=ka=null,jr!==null){for(e=0;e<jr.length;e++)if(n=jr[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,s=n.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}n.pending=i}jr=null}return t}function _T(t,e){do{var n=Xe;try{if(um(),ru.current=Ku,qu){for(var i=Fe.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}qu=!1}if(Xr=0,rt=Ze=Fe=null,Sa=!1,Za=0,Tm.current=null,n===null||n.return===null){et=1,nl=e,Xe=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=ht,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var g=Xv(o);if(g!==null){g.flags&=-257,Jv(g,o,a,s,e),g.mode&1&&Yv(s,c,e),e=g,l=c;var y=e.updateQueue;if(y===null){var x=new Set;x.add(l),e.updateQueue=x}else y.add(l);break e}else{if(!(e&1)){Yv(s,c,e),Pm();break e}l=Error(z(426))}}else if(Me&&a.mode&1){var T=Xv(o);if(T!==null){!(T.flags&65536)&&(T.flags|=256),Jv(T,o,a,s,e),lm(ao(l,a));break e}}s=l=ao(l,a),et!==4&&(et=2),ka===null?ka=[s]:ka.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=tT(s,l,e);Hv(s,v);break e;case 1:a=l;var w=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(nr===null||!nr.has(b)))){s.flags|=65536,e&=-e,s.lanes|=e;var A=nT(s,a,e);Hv(s,A);break e}}s=s.return}while(s!==null)}xT(n)}catch(D){e=D,Xe===n&&n!==null&&(Xe=n=n.return);continue}break}while(!0)}function vT(){var t=Gu.current;return Gu.current=Ku,t===null?Ku:t}function Pm(){(et===0||et===3||et===2)&&(et=4),ot===null||!(Jr&268435455)&&!(Vh&268435455)||Vi(ot,ht)}function Xu(t,e){var n=ge;ge|=2;var i=vT();(ot!==t||ht!==e)&&(Zn=null,$r(t,e));do try{yA();break}catch(r){_T(t,r)}while(!0);if(um(),ge=n,Gu.current=i,Xe!==null)throw Error(z(261));return ot=null,ht=0,et}function yA(){for(;Xe!==null;)wT(Xe)}function _A(){for(;Xe!==null&&!$k();)wT(Xe)}function wT(t){var e=TT(t.alternate,t,Xt);t.memoizedProps=t.pendingProps,e===null?xT(t):Xe=e,Tm.current=null}function xT(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=hA(n,e),n!==null){n.flags&=32767,Xe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{et=6,Xe=null;return}}else if(n=uA(n,e,Xt),n!==null){Xe=n;return}if(e=e.sibling,e!==null){Xe=e;return}Xe=e=t}while(e!==null);et===0&&(et=5)}function Mr(t,e,n){var i=we,r=un.transition;try{un.transition=null,we=1,vA(t,e,n,i)}finally{un.transition=r,we=i}return null}function vA(t,e,n,i){do Ys();while(Hi!==null);if(ge&6)throw Error(z(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(z(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(Zk(t,s),t===ot&&(Xe=ot=null,ht=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ic||(Ic=!0,bT(Nu,function(){return Ys(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=un.transition,un.transition=null;var o=we;we=1;var a=ge;ge|=4,Tm.current=null,fA(t,n),gT(n,t),jP(xp),Mu=!!wp,xp=wp=null,t.current=n,pA(n),Hk(),ge=a,we=o,un.transition=s}else t.current=n;if(Ic&&(Ic=!1,Hi=t,Yu=r),s=t.pendingLanes,s===0&&(nr=null),Kk(n.stateNode),qt(t,Ge()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Qu)throw Qu=!1,t=zp,zp=null,t;return Yu&1&&t.tag!==0&&Ys(),s=t.pendingLanes,s&1?t===Bp?Pa++:(Pa=0,Bp=t):Pa=0,xr(),null}function Ys(){if(Hi!==null){var t=tE(Yu),e=un.transition,n=we;try{if(un.transition=null,we=16>t?16:t,Hi===null)var i=!1;else{if(t=Hi,Hi=null,Yu=0,ge&6)throw Error(z(331));var r=ge;for(ge|=4,W=t.current;W!==null;){var s=W,o=s.child;if(W.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(W=c;W!==null;){var h=W;switch(h.tag){case 0:case 11:case 15:Ia(8,h,s)}var d=h.child;if(d!==null)d.return=h,W=d;else for(;W!==null;){h=W;var f=h.sibling,g=h.return;if(dT(h),h===c){W=null;break}if(f!==null){f.return=g,W=f;break}W=g}}}var y=s.alternate;if(y!==null){var x=y.child;if(x!==null){y.child=null;do{var T=x.sibling;x.sibling=null,x=T}while(x!==null)}}W=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,W=o;else e:for(;W!==null;){if(s=W,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Ia(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,W=v;break e}W=s.return}}var w=t.current;for(W=w;W!==null;){o=W;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,W=b;else e:for(o=w;W!==null;){if(a=W,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Lh(9,a)}}catch(D){$e(a,a.return,D)}if(a===o){W=null;break e}var A=a.sibling;if(A!==null){A.return=a.return,W=A;break e}W=a.return}}if(ge=r,xr(),Vn&&typeof Vn.onPostCommitFiberRoot=="function")try{Vn.onPostCommitFiberRoot(Ph,t)}catch{}i=!0}return i}finally{we=n,un.transition=e}}return!1}function h0(t,e,n){e=ao(n,e),e=tT(t,e,1),t=tr(t,e,1),e=Lt(),t!==null&&(Il(t,1,e),qt(t,e))}function $e(t,e,n){if(t.tag===3)h0(t,t,n);else for(;e!==null;){if(e.tag===3){h0(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(nr===null||!nr.has(i))){t=ao(n,t),t=nT(e,t,1),e=tr(e,t,1),t=Lt(),e!==null&&(Il(e,1,t),qt(e,t));break}}e=e.return}}function wA(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=Lt(),t.pingedLanes|=t.suspendedLanes&n,ot===t&&(ht&n)===n&&(et===4||et===3&&(ht&130023424)===ht&&500>Ge()-Sm?$r(t,0):bm|=n),qt(t,e)}function ET(t,e){e===0&&(t.mode&1?(e=mc,mc<<=1,!(mc&130023424)&&(mc=4194304)):e=1);var n=Lt();t=_i(t,e),t!==null&&(Il(t,e,n),qt(t,n))}function xA(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),ET(t,n)}function EA(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(z(314))}i!==null&&i.delete(e),ET(t,n)}var TT;TT=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ht.current)$t=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return $t=!1,cA(t,e,n);$t=!!(t.flags&131072)}else $t=!1,Me&&e.flags&1048576&&kE(e,zu,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;ou(t,e),t=e.pendingProps;var r=io(e,kt.current);Qs(e,n),r=_m(null,e,i,t,r,n);var s=vm();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Wt(i)?(s=!0,ju(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,fm(e),r.updater=Oh,e.stateNode=r,r._reactInternals=e,Cp(e,i,t,n),e=Dp(null,e,i,!0,s,n)):(e.tag=0,Me&&s&&om(e),Dt(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(ou(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=bA(i),t=mn(i,t),r){case 0:e=Np(null,e,i,t,n);break e;case 1:e=t0(null,e,i,t,n);break e;case 11:e=Zv(null,e,i,t,n);break e;case 14:e=e0(null,e,i,mn(i.type,t),n);break e}throw Error(z(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:mn(i,r),Np(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:mn(i,r),t0(t,e,i,r,n);case 3:e:{if(oT(e),t===null)throw Error(z(387));i=e.pendingProps,s=e.memoizedState,r=s.element,DE(t,e),Hu(e,i,null,n);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=ao(Error(z(423)),e),e=n0(t,e,i,n,r);break e}else if(i!==r){r=ao(Error(z(424)),e),e=n0(t,e,i,n,r);break e}else for(Zt=er(e.stateNode.containerInfo.firstChild),tn=e,Me=!0,_n=null,n=RE(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ro(),i===r){e=vi(t,e,n);break e}Dt(t,e,i,n)}e=e.child}return e;case 5:return ME(e),t===null&&kp(e),i=e.type,r=e.pendingProps,s=t!==null?t.memoizedProps:null,o=r.children,Ep(i,r)?o=null:s!==null&&Ep(i,s)&&(e.flags|=32),sT(t,e),Dt(t,e,o,n),e.child;case 6:return t===null&&kp(e),null;case 13:return aT(t,e,n);case 4:return pm(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=so(e,null,i,n):Dt(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:mn(i,r),Zv(t,e,i,r,n);case 7:return Dt(t,e,e.pendingProps,n),e.child;case 8:return Dt(t,e,e.pendingProps.children,n),e.child;case 12:return Dt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,ke(Bu,i._currentValue),i._currentValue=o,s!==null)if(bn(s.value,o)){if(s.children===r.children&&!Ht.current){e=vi(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=fi(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Pp(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(z(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Pp(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Dt(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Qs(e,n),r=dn(r),i=i(r),e.flags|=1,Dt(t,e,i,n),e.child;case 14:return i=e.type,r=mn(i,e.pendingProps),r=mn(i.type,r),e0(t,e,i,r,n);case 15:return iT(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:mn(i,r),ou(t,e),e.tag=1,Wt(i)?(t=!0,ju(e)):t=!1,Qs(e,n),eT(e,i,r),Cp(e,i,r,n),Dp(null,e,i,!0,t,n);case 19:return lT(t,e,n);case 22:return rT(t,e,n)}throw Error(z(156,e.tag))};function bT(t,e){return Xx(t,e)}function TA(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function cn(t,e,n,i){return new TA(t,e,n,i)}function Am(t){return t=t.prototype,!(!t||!t.isReactComponent)}function bA(t){if(typeof t=="function")return Am(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Gg)return 11;if(t===Qg)return 14}return 2}function rr(t,e){var n=t.alternate;return n===null?(n=cn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function cu(t,e,n,i,r,s){var o=2;if(i=t,typeof t=="function")Am(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ns:return Hr(n.children,r,s,e);case Kg:o=8,r|=8;break;case ep:return t=cn(12,n,e,r|2),t.elementType=ep,t.lanes=s,t;case tp:return t=cn(13,n,e,r),t.elementType=tp,t.lanes=s,t;case np:return t=cn(19,n,e,r),t.elementType=np,t.lanes=s,t;case Mx:return Fh(n,r,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Nx:o=10;break e;case Dx:o=9;break e;case Gg:o=11;break e;case Qg:o=14;break e;case Mi:o=16,i=null;break e}throw Error(z(130,t==null?t:typeof t,""))}return e=cn(o,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function Hr(t,e,n,i){return t=cn(7,t,i,e),t.lanes=n,t}function Fh(t,e,n,i){return t=cn(22,t,i,e),t.elementType=Mx,t.lanes=n,t.stateNode={isHidden:!1},t}function wf(t,e,n){return t=cn(6,t,null,e),t.lanes=n,t}function xf(t,e,n){return e=cn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function SA(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ef(0),this.expirationTimes=ef(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ef(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Cm(t,e,n,i,r,s,o,a,l){return t=new SA(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=cn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},fm(s),t}function IA(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Rs,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function ST(t){if(!t)return dr;t=t._reactInternals;e:{if(hs(t)!==t||t.tag!==1)throw Error(z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Wt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(z(171))}if(t.tag===1){var n=t.type;if(Wt(n))return SE(t,n,e)}return e}function IT(t,e,n,i,r,s,o,a,l){return t=Cm(n,i,!0,t,r,s,o,a,l),t.context=ST(null),n=t.current,i=Lt(),r=ir(n),s=fi(i,r),s.callback=e??null,tr(n,s,r),t.current.lanes=r,Il(t,r,i),qt(t,i),t}function jh(t,e,n,i){var r=e.current,s=Lt(),o=ir(r);return n=ST(n),e.context===null?e.context=n:e.pendingContext=n,e=fi(s,o),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=tr(r,e,o),t!==null&&(xn(t,r,o,s),iu(t,r,o)),o}function Ju(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function d0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Rm(t,e){d0(t,e),(t=t.alternate)&&d0(t,e)}function kA(){return null}var kT=typeof reportError=="function"?reportError:function(t){console.error(t)};function Nm(t){this._internalRoot=t}Uh.prototype.render=Nm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(z(409));jh(t,e,null,null)};Uh.prototype.unmount=Nm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Zr(function(){jh(null,t,null,null)}),e[yi]=null}};function Uh(t){this._internalRoot=t}Uh.prototype.unstable_scheduleHydration=function(t){if(t){var e=rE();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Li.length&&e!==0&&e<Li[n].priority;n++);Li.splice(n,0,t),n===0&&oE(t)}};function Dm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function zh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function f0(){}function PA(t,e,n,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var c=Ju(o);s.call(c)}}var o=IT(e,i,t,0,null,!1,!1,"",f0);return t._reactRootContainer=o,t[yi]=o.current,Ga(t.nodeType===8?t.parentNode:t),Zr(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var c=Ju(l);a.call(c)}}var l=Cm(t,0,!1,null,null,!1,!1,"",f0);return t._reactRootContainer=l,t[yi]=l.current,Ga(t.nodeType===8?t.parentNode:t),Zr(function(){jh(e,l,n,i)}),l}function Bh(t,e,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=Ju(o);a.call(l)}}jh(e,o,t,r)}else o=PA(n,e,t,r,i);return Ju(o)}nE=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=oa(e.pendingLanes);n!==0&&(Jg(e,n|1),qt(e,Ge()),!(ge&6)&&(lo=Ge()+500,xr()))}break;case 13:Zr(function(){var i=_i(t,1);if(i!==null){var r=Lt();xn(i,t,1,r)}}),Rm(t,1)}};Zg=function(t){if(t.tag===13){var e=_i(t,134217728);if(e!==null){var n=Lt();xn(e,t,134217728,n)}Rm(t,134217728)}};iE=function(t){if(t.tag===13){var e=ir(t),n=_i(t,e);if(n!==null){var i=Lt();xn(n,t,e,i)}Rm(t,e)}};rE=function(){return we};sE=function(t,e){var n=we;try{return we=t,e()}finally{we=n}};dp=function(t,e,n){switch(e){case"input":if(sp(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=Nh(i);if(!r)throw Error(z(90));Lx(i),sp(i,r)}}}break;case"textarea":Fx(t,n);break;case"select":e=n.value,e!=null&&Ws(t,!!n.multiple,e,!1)}};Wx=Im;qx=Zr;var AA={usingClientEntryPoint:!1,Events:[Pl,Ls,Nh,$x,Hx,Im]},Yo={findFiberByHostInstance:Fr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},CA={bundleType:Yo.bundleType,version:Yo.version,rendererPackageName:Yo.rendererPackageName,rendererConfig:Yo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Si.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Qx(t),t===null?null:t.stateNode},findFiberByHostInstance:Yo.findFiberByHostInstance||kA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var kc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!kc.isDisabled&&kc.supportsFiber)try{Ph=kc.inject(CA),Vn=kc}catch{}}rn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=AA;rn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Dm(e))throw Error(z(200));return IA(t,e,null,n)};rn.createRoot=function(t,e){if(!Dm(t))throw Error(z(299));var n=!1,i="",r=kT;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=Cm(t,1,!1,null,null,n,!1,i,r),t[yi]=e.current,Ga(t.nodeType===8?t.parentNode:t),new Nm(e)};rn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(z(188)):(t=Object.keys(t).join(","),Error(z(268,t)));return t=Qx(e),t=t===null?null:t.stateNode,t};rn.flushSync=function(t){return Zr(t)};rn.hydrate=function(t,e,n){if(!zh(e))throw Error(z(200));return Bh(null,t,e,!0,n)};rn.hydrateRoot=function(t,e,n){if(!Dm(t))throw Error(z(405));var i=n!=null&&n.hydratedSources||null,r=!1,s="",o=kT;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=IT(e,null,t,1,n??null,r,!1,s,o),t[yi]=e.current,Ga(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new Uh(e)};rn.render=function(t,e,n){if(!zh(e))throw Error(z(200));return Bh(null,t,e,!1,n)};rn.unmountComponentAtNode=function(t){if(!zh(t))throw Error(z(40));return t._reactRootContainer?(Zr(function(){Bh(null,null,t,!1,function(){t._reactRootContainer=null,t[yi]=null})}),!0):!1};rn.unstable_batchedUpdates=Im;rn.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!zh(n))throw Error(z(200));if(t==null||t._reactInternals===void 0)throw Error(z(38));return Bh(t,e,n,!1,i)};rn.version="18.3.1-next-f1338f8080-20240426";function PT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(PT)}catch(t){console.error(t)}}PT(),Px.exports=rn;var RA=Px.exports,p0=RA;Jf.createRoot=p0.createRoot,Jf.hydrateRoot=p0.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function il(){return il=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},il.apply(this,arguments)}var Wi;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Wi||(Wi={}));const g0="popstate";function NA(t){t===void 0&&(t={});function e(i,r){let{pathname:s,search:o,hash:a}=i.location;return Wp("",{pathname:s,search:o,hash:a},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(i,r){return typeof r=="string"?r:Zu(r)}return MA(e,n,null,t)}function je(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function AT(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function DA(){return Math.random().toString(36).substr(2,8)}function m0(t,e){return{usr:t.state,key:t.key,idx:e}}function Wp(t,e,n,i){return n===void 0&&(n=null),il({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?bo(e):e,{state:n,key:e&&e.key||i||DA()})}function Zu(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function bo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function MA(t,e,n,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:s=!1}=i,o=r.history,a=Wi.Pop,l=null,c=h();c==null&&(c=0,o.replaceState(il({},o.state,{idx:c}),""));function h(){return(o.state||{idx:null}).idx}function d(){a=Wi.Pop;let T=h(),v=T==null?null:T-c;c=T,l&&l({action:a,location:x.location,delta:v})}function f(T,v){a=Wi.Push;let w=Wp(x.location,T,v);c=h()+1;let b=m0(w,c),A=x.createHref(w);try{o.pushState(b,"",A)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;r.location.assign(A)}s&&l&&l({action:a,location:x.location,delta:1})}function g(T,v){a=Wi.Replace;let w=Wp(x.location,T,v);c=h();let b=m0(w,c),A=x.createHref(w);o.replaceState(b,"",A),s&&l&&l({action:a,location:x.location,delta:0})}function y(T){let v=r.location.origin!=="null"?r.location.origin:r.location.href,w=typeof T=="string"?T:Zu(T);return w=w.replace(/ $/,"%20"),je(v,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,v)}let x={get action(){return a},get location(){return t(r,o)},listen(T){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(g0,d),l=T,()=>{r.removeEventListener(g0,d),l=null}},createHref(T){return e(r,T)},createURL:y,encodeLocation(T){let v=y(T);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:f,replace:g,go(T){return o.go(T)}};return x}var y0;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(y0||(y0={}));function OA(t,e,n){return n===void 0&&(n="/"),LA(t,e,n)}function LA(t,e,n,i){let r=typeof e=="string"?bo(e):e,s=co(r.pathname||"/",n);if(s==null)return null;let o=CT(t);VA(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=GA(s);a=qA(o[l],c)}return a}function CT(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let r=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(je(l.relativePath.startsWith(i),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(i.length));let c=sr([i,l.relativePath]),h=n.concat(l);s.children&&s.children.length>0&&(je(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),CT(s.children,e,h,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:HA(c,s.index),routesMeta:h})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))r(s,o);else for(let l of RT(s.path))r(s,o,l)}),e}function RT(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),s=n.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let o=RT(i.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),r&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function VA(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:WA(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const FA=/^:[\w-]+$/,jA=3,UA=2,zA=1,BA=10,$A=-2,_0=t=>t==="*";function HA(t,e){let n=t.split("/"),i=n.length;return n.some(_0)&&(i+=$A),e&&(i+=UA),n.filter(r=>!_0(r)).reduce((r,s)=>r+(FA.test(s)?jA:s===""?zA:BA),i)}function WA(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function qA(t,e,n){let{routesMeta:i}=t,r={},s="/",o=[];for(let a=0;a<i.length;++a){let l=i[a],c=a===i.length-1,h=s==="/"?e:e.slice(s.length)||"/",d=qp({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},h),f=l.route;if(!d)return null;Object.assign(r,d.params),o.push({params:r,pathname:sr([s,d.pathname]),pathnameBase:JA(sr([s,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(s=sr([s,d.pathnameBase]))}return o}function qp(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=KA(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let s=r[0],o=s.replace(/(.)\/+$/,"$1"),a=r.slice(1);return{params:i.reduce((c,h,d)=>{let{paramName:f,isOptional:g}=h;if(f==="*"){let x=a[d]||"";o=s.slice(0,s.length-x.length).replace(/(.)\/+$/,"$1")}const y=a[d];return g&&!y?c[f]=void 0:c[f]=(y||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function KA(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),AT(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(i.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function GA(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return AT(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function co(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function QA(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?bo(t):t;return{pathname:n?n.startsWith("/")?n:YA(n,e):e,search:ZA(i),hash:eC(r)}}function YA(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function Ef(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function XA(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Mm(t,e){let n=XA(t);return e?n.map((i,r)=>r===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function Om(t,e,n,i){i===void 0&&(i=!1);let r;typeof t=="string"?r=bo(t):(r=il({},t),je(!r.pathname||!r.pathname.includes("?"),Ef("?","pathname","search",r)),je(!r.pathname||!r.pathname.includes("#"),Ef("#","pathname","hash",r)),je(!r.search||!r.search.includes("#"),Ef("#","search","hash",r)));let s=t===""||r.pathname==="",o=s?"/":r.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!i&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;r.pathname=f.join("/")}a=d>=0?e[d]:"/"}let l=QA(r,a),c=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||h)&&(l.pathname+="/"),l}const sr=t=>t.join("/").replace(/\/\/+/g,"/"),JA=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),ZA=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,eC=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function tC(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const NT=["post","put","patch","delete"];new Set(NT);const nC=["get",...NT];new Set(nC);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function rl(){return rl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},rl.apply(this,arguments)}const $h=L.createContext(null),DT=L.createContext(null),Ii=L.createContext(null),Hh=L.createContext(null),ki=L.createContext({outlet:null,matches:[],isDataRoute:!1}),MT=L.createContext(null);function iC(t,e){let{relative:n}=e===void 0?{}:e;So()||je(!1);let{basename:i,navigator:r}=L.useContext(Ii),{hash:s,pathname:o,search:a}=Wh(t,{relative:n}),l=o;return i!=="/"&&(l=o==="/"?i:sr([i,o])),r.createHref({pathname:l,search:a,hash:s})}function So(){return L.useContext(Hh)!=null}function Io(){return So()||je(!1),L.useContext(Hh).location}function OT(t){L.useContext(Ii).static||L.useLayoutEffect(t)}function Pi(){let{isDataRoute:t}=L.useContext(ki);return t?yC():rC()}function rC(){So()||je(!1);let t=L.useContext($h),{basename:e,future:n,navigator:i}=L.useContext(Ii),{matches:r}=L.useContext(ki),{pathname:s}=Io(),o=JSON.stringify(Mm(r,n.v7_relativeSplatPath)),a=L.useRef(!1);return OT(()=>{a.current=!0}),L.useCallback(function(c,h){if(h===void 0&&(h={}),!a.current)return;if(typeof c=="number"){i.go(c);return}let d=Om(c,JSON.parse(o),s,h.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:sr([e,d.pathname])),(h.replace?i.replace:i.push)(d,h.state,h)},[e,i,o,s,t])}function sC(){let{matches:t}=L.useContext(ki),e=t[t.length-1];return e?e.params:{}}function Wh(t,e){let{relative:n}=e===void 0?{}:e,{future:i}=L.useContext(Ii),{matches:r}=L.useContext(ki),{pathname:s}=Io(),o=JSON.stringify(Mm(r,i.v7_relativeSplatPath));return L.useMemo(()=>Om(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function oC(t,e){return aC(t,e)}function aC(t,e,n,i){So()||je(!1);let{navigator:r,static:s}=L.useContext(Ii),{matches:o}=L.useContext(ki),a=o[o.length-1],l=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let h=Io(),d;if(e){var f;let v=typeof e=="string"?bo(e):e;c==="/"||(f=v.pathname)!=null&&f.startsWith(c)||je(!1),d=v}else d=h;let g=d.pathname||"/",y=g;if(c!=="/"){let v=c.replace(/^\//,"").split("/");y="/"+g.replace(/^\//,"").split("/").slice(v.length).join("/")}let x=OA(t,{pathname:y}),T=dC(x&&x.map(v=>Object.assign({},v,{params:Object.assign({},l,v.params),pathname:sr([c,r.encodeLocation?r.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?c:sr([c,r.encodeLocation?r.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),o,n,i);return e&&T?L.createElement(Hh.Provider,{value:{location:rl({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Wi.Pop}},T):T}function lC(){let t=mC(),e=tC(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return L.createElement(L.Fragment,null,L.createElement("h2",null,"Unexpected Application Error!"),L.createElement("h3",{style:{fontStyle:"italic"}},e),n?L.createElement("pre",{style:r},n):null,null)}const cC=L.createElement(lC,null);class uC extends L.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?L.createElement(ki.Provider,{value:this.props.routeContext},L.createElement(MT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function hC(t){let{routeContext:e,match:n,children:i}=t,r=L.useContext($h);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),L.createElement(ki.Provider,{value:e},i)}function dC(t,e,n,i){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),i===void 0&&(i=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=i)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(r=n)==null?void 0:r.errors;if(a!=null){let h=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);h>=0||je(!1),o=o.slice(0,Math.min(o.length,h+1))}let l=!1,c=-1;if(n&&i&&i.v7_partialHydration)for(let h=0;h<o.length;h++){let d=o[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=h),d.route.id){let{loaderData:f,errors:g}=n,y=d.route.loader&&f[d.route.id]===void 0&&(!g||g[d.route.id]===void 0);if(d.route.lazy||y){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((h,d,f)=>{let g,y=!1,x=null,T=null;n&&(g=a&&d.route.id?a[d.route.id]:void 0,x=d.route.errorElement||cC,l&&(c<0&&f===0?(_C("route-fallback"),y=!0,T=null):c===f&&(y=!0,T=d.route.hydrateFallbackElement||null)));let v=e.concat(o.slice(0,f+1)),w=()=>{let b;return g?b=x:y?b=T:d.route.Component?b=L.createElement(d.route.Component,null):d.route.element?b=d.route.element:b=h,L.createElement(hC,{match:d,routeContext:{outlet:h,matches:v,isDataRoute:n!=null},children:b})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?L.createElement(uC,{location:n.location,revalidation:n.revalidation,component:x,error:g,children:w(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):w()},null)}var LT=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(LT||{}),VT=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(VT||{});function fC(t){let e=L.useContext($h);return e||je(!1),e}function pC(t){let e=L.useContext(DT);return e||je(!1),e}function gC(t){let e=L.useContext(ki);return e||je(!1),e}function FT(t){let e=gC(),n=e.matches[e.matches.length-1];return n.route.id||je(!1),n.route.id}function mC(){var t;let e=L.useContext(MT),n=pC(),i=FT();return e!==void 0?e:(t=n.errors)==null?void 0:t[i]}function yC(){let{router:t}=fC(LT.UseNavigateStable),e=FT(VT.UseNavigateStable),n=L.useRef(!1);return OT(()=>{n.current=!0}),L.useCallback(function(r,s){s===void 0&&(s={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,rl({fromRouteId:e},s)))},[t,e])}const v0={};function _C(t,e,n){v0[t]||(v0[t]=!0)}function vC(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function wC(t){let{to:e,replace:n,state:i,relative:r}=t;So()||je(!1);let{future:s,static:o}=L.useContext(Ii),{matches:a}=L.useContext(ki),{pathname:l}=Io(),c=Pi(),h=Om(e,Mm(a,s.v7_relativeSplatPath),l,r==="path"),d=JSON.stringify(h);return L.useEffect(()=>c(JSON.parse(d),{replace:n,state:i,relative:r}),[c,d,r,n,i]),null}function Cn(t){je(!1)}function xC(t){let{basename:e="/",children:n=null,location:i,navigationType:r=Wi.Pop,navigator:s,static:o=!1,future:a}=t;So()&&je(!1);let l=e.replace(/^\/*/,"/"),c=L.useMemo(()=>({basename:l,navigator:s,static:o,future:rl({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof i=="string"&&(i=bo(i));let{pathname:h="/",search:d="",hash:f="",state:g=null,key:y="default"}=i,x=L.useMemo(()=>{let T=co(h,l);return T==null?null:{location:{pathname:T,search:d,hash:f,state:g,key:y},navigationType:r}},[l,h,d,f,g,y,r]);return x==null?null:L.createElement(Ii.Provider,{value:c},L.createElement(Hh.Provider,{children:n,value:x}))}function EC(t){let{children:e,location:n}=t;return oC(Kp(e),n)}new Promise(()=>{});function Kp(t,e){e===void 0&&(e=[]);let n=[];return L.Children.forEach(t,(i,r)=>{if(!L.isValidElement(i))return;let s=[...e,r];if(i.type===L.Fragment){n.push.apply(n,Kp(i.props.children,s));return}i.type!==Cn&&je(!1),!i.props.index||!i.props.children||je(!1);let o={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(o.children=Kp(i.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function eh(){return eh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},eh.apply(this,arguments)}function jT(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function TC(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function bC(t,e){return t.button===0&&(!e||e==="_self")&&!TC(t)}const SC=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],IC=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],kC="6";try{window.__reactRouterVersion=kC}catch{}const PC=L.createContext({isTransitioning:!1}),AC="startTransition",w0=wk[AC];function CC(t){let{basename:e,children:n,future:i,window:r}=t,s=L.useRef();s.current==null&&(s.current=NA({window:r,v5Compat:!0}));let o=s.current,[a,l]=L.useState({action:o.action,location:o.location}),{v7_startTransition:c}=i||{},h=L.useCallback(d=>{c&&w0?w0(()=>l(d)):l(d)},[l,c]);return L.useLayoutEffect(()=>o.listen(h),[o,h]),L.useEffect(()=>vC(i),[i]),L.createElement(xC,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:i})}const RC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",NC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,si=L.forwardRef(function(e,n){let{onClick:i,relative:r,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:h,viewTransition:d}=e,f=jT(e,SC),{basename:g}=L.useContext(Ii),y,x=!1;if(typeof c=="string"&&NC.test(c)&&(y=c,RC))try{let b=new URL(window.location.href),A=c.startsWith("//")?new URL(b.protocol+c):new URL(c),D=co(A.pathname,g);A.origin===b.origin&&D!=null?c=D+A.search+A.hash:x=!0}catch{}let T=iC(c,{relative:r}),v=MC(c,{replace:o,state:a,target:l,preventScrollReset:h,relative:r,viewTransition:d});function w(b){i&&i(b),b.defaultPrevented||v(b)}return L.createElement("a",eh({},f,{href:y||T,onClick:x||s?i:w,ref:n,target:l}))}),Pc=L.forwardRef(function(e,n){let{"aria-current":i="page",caseSensitive:r=!1,className:s="",end:o=!1,style:a,to:l,viewTransition:c,children:h}=e,d=jT(e,IC),f=Wh(l,{relative:d.relative}),g=Io(),y=L.useContext(DT),{navigator:x,basename:T}=L.useContext(Ii),v=y!=null&&OC(f)&&c===!0,w=x.encodeLocation?x.encodeLocation(f).pathname:f.pathname,b=g.pathname,A=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;r||(b=b.toLowerCase(),A=A?A.toLowerCase():null,w=w.toLowerCase()),A&&T&&(A=co(A,T)||A);const D=w!=="/"&&w.endsWith("/")?w.length-1:w.length;let M=b===w||!o&&b.startsWith(w)&&b.charAt(D)==="/",S=A!=null&&(A===w||!o&&A.startsWith(w)&&A.charAt(w.length)==="/"),E={isActive:M,isPending:S,isTransitioning:v},P=M?i:void 0,k;typeof s=="function"?k=s(E):k=[s,M?"active":null,S?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let C=typeof a=="function"?a(E):a;return L.createElement(si,eh({},d,{"aria-current":P,className:k,ref:n,style:C,to:l,viewTransition:c}),typeof h=="function"?h(E):h)});var Gp;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Gp||(Gp={}));var x0;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(x0||(x0={}));function DC(t){let e=L.useContext($h);return e||je(!1),e}function MC(t,e){let{target:n,replace:i,state:r,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=Pi(),c=Io(),h=Wh(t,{relative:o});return L.useCallback(d=>{if(bC(d,n)){d.preventDefault();let f=i!==void 0?i:Zu(c)===Zu(h);l(t,{replace:f,state:r,preventScrollReset:s,relative:o,viewTransition:a})}},[c,l,h,i,r,n,t,s,o,a])}function OC(t,e){e===void 0&&(e={});let n=L.useContext(PC);n==null&&je(!1);let{basename:i}=DC(Gp.useViewTransitionState),r=Wh(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=co(n.currentLocation.pathname,i)||n.currentLocation.pathname,o=co(n.nextLocation.pathname,i)||n.nextLocation.pathname;return qp(r.pathname,o)!=null||qp(r.pathname,s)!=null}var E0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UT=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},LC=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=t[n++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=t[n++],o=t[n++],a=t[n++],l=((r&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[i++]=String.fromCharCode(55296+(l>>10)),e[i++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return e.join("")},zT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const s=t[r],o=r+1<t.length,a=o?t[r+1]:0,l=r+2<t.length,c=l?t[r+2]:0,h=s>>2,d=(s&3)<<4|a>>4;let f=(a&15)<<2|c>>6,g=c&63;l||(g=64,o||(f=64)),i.push(n[h],n[d],n[f],n[g])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(UT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):LC(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const s=n[t.charAt(r++)],a=r<t.length?n[t.charAt(r)]:0;++r;const c=r<t.length?n[t.charAt(r)]:64;++r;const d=r<t.length?n[t.charAt(r)]:64;if(++r,s==null||a==null||c==null||d==null)throw new VC;const f=s<<2|a>>4;if(i.push(f),c!==64){const g=a<<4&240|c>>2;if(i.push(g),d!==64){const y=c<<6&192|d;i.push(y)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class VC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const FC=function(t){const e=UT(t);return zT.encodeByteArray(e,!0)},th=function(t){return FC(t).replace(/\./g,"")},BT=function(t){try{return zT.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UC=()=>jC().__FIREBASE_DEFAULTS__,zC=()=>{if(typeof process>"u"||typeof E0>"u")return;const t=E0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},BC=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&BT(t[1]);return e&&JSON.parse(e)},qh=()=>{try{return UC()||zC()||BC()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},$T=t=>{var e,n;return(n=(e=qh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},HT=t=>{const e=$T(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},WT=()=>{var t;return(t=qh())===null||t===void 0?void 0:t.config},qT=t=>{var e;return(e=qh())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KT(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[th(JSON.stringify(n)),th(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function HC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Pt())}function WC(){var t;const e=(t=qh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function qC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function KC(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function GC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function QC(){const t=Pt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function YC(){return!WC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function XC(){try{return typeof indexedDB=="object"}catch{return!1}}function JC(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;e(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZC="FirebaseError";class qn extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=ZC,Object.setPrototypeOf(this,qn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Cl.prototype.create)}}class Cl{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,s=this.errors[e],o=s?eR(s,i):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new qn(r,a,i)}}function eR(t,e){return t.replace(tR,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const tR=/\{\$([^}]+)}/g;function nR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function nh(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const s=t[r],o=e[r];if(T0(s)&&T0(o)){if(!nh(s,o))return!1}else if(s!==o)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function T0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rl(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function la(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,s]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(s)}}),e}function ca(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function iR(t,e){const n=new rR(t,e);return n.subscribe.bind(n)}class rR{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");sR(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=Tf),r.error===void 0&&(r.error=Tf),r.complete===void 0&&(r.complete=Tf);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function sR(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Tf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ee(t){return t&&t._delegate?t._delegate:t}class fr{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Or="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new $C;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(lR(e))try{this.getOrInitializeService({instanceIdentifier:Or})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=Or){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Or){return this.instances.has(e)}getOptions(e=Or){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);i===a&&o.resolve(r)}return r}onInit(e,n){var i;const r=this.normalizeInstanceIdentifier(n),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:aR(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Or){return this.component?this.component.multipleInstances?e:Or:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function aR(t){return t===Or?void 0:t}function lR(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new oR(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var de;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(de||(de={}));const uR={debug:de.DEBUG,verbose:de.VERBOSE,info:de.INFO,warn:de.WARN,error:de.ERROR,silent:de.SILENT},hR=de.INFO,dR={[de.DEBUG]:"log",[de.VERBOSE]:"log",[de.INFO]:"info",[de.WARN]:"warn",[de.ERROR]:"error"},fR=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=dR[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Lm{constructor(e){this.name=e,this._logLevel=hR,this._logHandler=fR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in de))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?uR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,de.DEBUG,...e),this._logHandler(this,de.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,de.VERBOSE,...e),this._logHandler(this,de.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,de.INFO,...e),this._logHandler(this,de.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,de.WARN,...e),this._logHandler(this,de.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,de.ERROR,...e),this._logHandler(this,de.ERROR,...e)}}const pR=(t,e)=>e.some(n=>t instanceof n);let b0,S0;function gR(){return b0||(b0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function mR(){return S0||(S0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const GT=new WeakMap,Qp=new WeakMap,QT=new WeakMap,bf=new WeakMap,Vm=new WeakMap;function yR(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(or(t.result)),r()},o=()=>{i(t.error),r()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&GT.set(n,t)}).catch(()=>{}),Vm.set(e,t),e}function _R(t){if(Qp.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),r()},o=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Qp.set(t,e)}let Yp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Qp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||QT.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return or(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function vR(t){Yp=t(Yp)}function wR(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Sf(this),e,...n);return QT.set(i,e.sort?e.sort():[e]),or(i)}:mR().includes(t)?function(...e){return t.apply(Sf(this),e),or(GT.get(this))}:function(...e){return or(t.apply(Sf(this),e))}}function xR(t){return typeof t=="function"?wR(t):(t instanceof IDBTransaction&&_R(t),pR(t,gR())?new Proxy(t,Yp):t)}function or(t){if(t instanceof IDBRequest)return yR(t);if(bf.has(t))return bf.get(t);const e=xR(t);return e!==t&&(bf.set(t,e),Vm.set(e,t)),e}const Sf=t=>Vm.get(t);function ER(t,e,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(t,e),a=or(o);return i&&o.addEventListener("upgradeneeded",l=>{i(or(o.result),l.oldVersion,l.newVersion,or(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),r&&l.addEventListener("versionchange",c=>r(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const TR=["get","getKey","getAll","getAllKeys","count"],bR=["put","add","delete","clear"],If=new Map;function I0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(If.get(e))return If.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=bR.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||TR.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,r?"readwrite":"readonly");let c=l.store;return i&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),r&&l.done]))[0]};return If.set(e,s),s}vR(t=>({...t,get:(e,n,i)=>I0(e,n)||t.get(e,n,i),has:(e,n)=>!!I0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(IR(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function IR(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Xp="@firebase/app",k0="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wi=new Lm("@firebase/app"),kR="@firebase/app-compat",PR="@firebase/analytics-compat",AR="@firebase/analytics",CR="@firebase/app-check-compat",RR="@firebase/app-check",NR="@firebase/auth",DR="@firebase/auth-compat",MR="@firebase/database",OR="@firebase/data-connect",LR="@firebase/database-compat",VR="@firebase/functions",FR="@firebase/functions-compat",jR="@firebase/installations",UR="@firebase/installations-compat",zR="@firebase/messaging",BR="@firebase/messaging-compat",$R="@firebase/performance",HR="@firebase/performance-compat",WR="@firebase/remote-config",qR="@firebase/remote-config-compat",KR="@firebase/storage",GR="@firebase/storage-compat",QR="@firebase/firestore",YR="@firebase/vertexai-preview",XR="@firebase/firestore-compat",JR="firebase",ZR="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jp="[DEFAULT]",eN={[Xp]:"fire-core",[kR]:"fire-core-compat",[AR]:"fire-analytics",[PR]:"fire-analytics-compat",[RR]:"fire-app-check",[CR]:"fire-app-check-compat",[NR]:"fire-auth",[DR]:"fire-auth-compat",[MR]:"fire-rtdb",[OR]:"fire-data-connect",[LR]:"fire-rtdb-compat",[VR]:"fire-fn",[FR]:"fire-fn-compat",[jR]:"fire-iid",[UR]:"fire-iid-compat",[zR]:"fire-fcm",[BR]:"fire-fcm-compat",[$R]:"fire-perf",[HR]:"fire-perf-compat",[WR]:"fire-rc",[qR]:"fire-rc-compat",[KR]:"fire-gcs",[GR]:"fire-gcs-compat",[QR]:"fire-fst",[XR]:"fire-fst-compat",[YR]:"fire-vertex","fire-js":"fire-js",[JR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ih=new Map,tN=new Map,Zp=new Map;function P0(t,e){try{t.container.addComponent(e)}catch(n){wi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function es(t){const e=t.name;if(Zp.has(e))return wi.debug(`There were multiple attempts to register component ${e}.`),!1;Zp.set(e,t);for(const n of ih.values())P0(n,t);for(const n of tN.values())P0(n,t);return!0}function Kh(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function On(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ar=new Cl("app","Firebase",nN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iN{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new fr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ar.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ds=ZR;function YT(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Jp,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw ar.create("bad-app-name",{appName:String(r)});if(n||(n=WT()),!n)throw ar.create("no-options");const s=ih.get(r);if(s){if(nh(n,s.options)&&nh(i,s.config))return s;throw ar.create("duplicate-app",{appName:r})}const o=new cR(r);for(const l of Zp.values())o.addComponent(l);const a=new iN(n,i,o);return ih.set(r,a),a}function Fm(t=Jp){const e=ih.get(t);if(!e&&t===Jp&&WT())return YT();if(!e)throw ar.create("no-app",{appName:t});return e}function jn(t,e,n){var i;let r=(i=eN[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),wi.warn(a.join(" "));return}es(new fr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rN="firebase-heartbeat-database",sN=1,sl="firebase-heartbeat-store";let kf=null;function XT(){return kf||(kf=ER(rN,sN,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(sl)}catch(n){console.warn(n)}}}}).catch(t=>{throw ar.create("idb-open",{originalErrorMessage:t.message})})),kf}async function oN(t){try{const n=(await XT()).transaction(sl),i=await n.objectStore(sl).get(JT(t));return await n.done,i}catch(e){if(e instanceof qn)wi.warn(e.message);else{const n=ar.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});wi.warn(n.message)}}}async function A0(t,e){try{const i=(await XT()).transaction(sl,"readwrite");await i.objectStore(sl).put(e,JT(t)),await i.done}catch(n){if(n instanceof qn)wi.warn(n.message);else{const i=ar.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});wi.warn(i.message)}}}function JT(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aN=1024,lN=30*24*60*60*1e3;class cN{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new hN(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=C0();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=lN}),this._storage.overwrite(this._heartbeatsCache))}catch(i){wi.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=C0(),{heartbeatsToSend:i,unsentEntries:r}=uN(this._heartbeatsCache.heartbeats),s=th(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return wi.warn(n),""}}}function C0(){return new Date().toISOString().substring(0,10)}function uN(t,e=aN){const n=[];let i=t.slice();for(const r of t){const s=n.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),R0(n)>e){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),R0(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class hN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return XC()?JC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await oN(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return A0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return A0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function R0(t){return th(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dN(t){es(new fr("platform-logger",e=>new SR(e),"PRIVATE")),es(new fr("heartbeat",e=>new cN(e),"PRIVATE")),jn(Xp,k0,t),jn(Xp,k0,"esm2017"),jn("fire-js","")}dN("");function jm(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function ZT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const fN=ZT,eb=new Cl("auth","Firebase",ZT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rh=new Lm("@firebase/auth");function pN(t,...e){rh.logLevel<=de.WARN&&rh.warn(`Auth (${ds}): ${t}`,...e)}function uu(t,...e){rh.logLevel<=de.ERROR&&rh.error(`Auth (${ds}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sn(t,...e){throw Um(t,...e)}function Un(t,...e){return Um(t,...e)}function tb(t,e,n){const i=Object.assign(Object.assign({},fN()),{[e]:n});return new Cl("auth","Firebase",i).create(e,{appName:t.name})}function pi(t){return tb(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Um(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return eb.create(t,...e)}function ee(t,e,...n){if(!t)throw Um(e,...n)}function oi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw uu(e),new Error(e)}function xi(t,e){t||oi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function gN(){return N0()==="http:"||N0()==="https:"}function N0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(gN()||KC()||"connection"in navigator)?navigator.onLine:!0}function yN(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{constructor(e,n){this.shortDelay=e,this.longDelay=n,xi(n>e,"Short delay should be less than long delay!"),this.isMobile=HC()||GC()}get(){return mN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zm(t,e){xi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;oi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;oi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;oi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _N={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vN=new Nl(3e4,6e4);function Er(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Kn(t,e,n,i,r={}){return ib(t,r,async()=>{let s={},o={};i&&(e==="GET"?o=i:s={body:JSON.stringify(i)});const a=Rl(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},s);return qC()||(c.referrerPolicy="no-referrer"),nb.fetch()(rb(t,t.config.apiHost,n,a),c)})}async function ib(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},_N),e);try{const r=new xN(t),s=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Ac(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ac(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Ac(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Ac(t,"user-disabled",o);const h=i[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw tb(t,h,c);Sn(t,h)}}catch(r){if(r instanceof qn)throw r;Sn(t,"network-request-failed",{message:String(r)})}}async function Dl(t,e,n,i,r={}){const s=await Kn(t,e,n,i,r);return"mfaPendingCredential"in s&&Sn(t,"multi-factor-auth-required",{_serverResponse:s}),s}function rb(t,e,n,i){const r=`${e}${n}?${i}`;return t.config.emulator?zm(t.config,r):`${t.config.apiScheme}://${r}`}function wN(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class xN{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Un(this.auth,"network-request-failed")),vN.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ac(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Un(t,e,i);return r.customData._tokenResponse=n,r}function D0(t){return t!==void 0&&t.enterprise!==void 0}class EN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return wN(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function TN(t,e){return Kn(t,"GET","/v2/recaptchaConfig",Er(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bN(t,e){return Kn(t,"POST","/v1/accounts:delete",e)}async function sb(t,e){return Kn(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aa(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function SN(t,e=!1){const n=Ee(t),i=await n.getIdToken(e),r=Bm(i);ee(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:Aa(Pf(r.auth_time)),issuedAtTime:Aa(Pf(r.iat)),expirationTime:Aa(Pf(r.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Pf(t){return Number(t)*1e3}function Bm(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return uu("JWT malformed, contained fewer than 3 sections"),null;try{const r=BT(n);return r?JSON.parse(r):(uu("Failed to decode base64 JWT payload"),null)}catch(r){return uu("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function M0(t){const e=Bm(t);return ee(e,"internal-error"),ee(typeof e.exp<"u","internal-error"),ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ts(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof qn&&IN(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function IN({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Aa(this.lastLoginAt),this.creationTime=Aa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sh(t){var e;const n=t.auth,i=await t.getIdToken(),r=await ts(t,sb(n,{idToken:i}));ee(r==null?void 0:r.users.length,n,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?ob(s.providerUserInfo):[],a=AN(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),h=l?c:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new tg(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,d)}async function PN(t){const e=Ee(t);await sh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function AN(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function ob(t){return t.map(e=>{var{providerId:n}=e,i=jm(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CN(t,e){const n=await ib(t,{},async()=>{const i=Rl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=t.config,o=rb(t,r,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",nb.fetch()(o,{method:"POST",headers:a,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function RN(t,e){return Kn(t,"POST","/v2/accounts:revokeToken",Er(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ee(e.idToken,"internal-error"),ee(typeof e.idToken<"u","internal-error"),ee(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):M0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ee(e.length!==0,"internal-error");const n=M0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:s}=await CN(e,n);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:s}=n,o=new Xs;return i&&(ee(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),r&&(ee(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),s&&(ee(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Xs,this.toJSON())}_performRefresh(){return oi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Di(t,e){ee(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ai{constructor(e){var{uid:n,auth:i,stsTokenManager:r}=e,s=jm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new kN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new tg(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await ts(this,this.stsTokenManager.getToken(this.auth,e));return ee(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return SN(this,e)}reload(){return PN(this)}_assign(e){this!==e&&(ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ai(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await sh(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(On(this.auth.app))return Promise.reject(pi(this.auth));const e=await this.getIdToken();return await ts(this,bN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,r,s,o,a,l,c,h;const d=(i=n.displayName)!==null&&i!==void 0?i:void 0,f=(r=n.email)!==null&&r!==void 0?r:void 0,g=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,y=(o=n.photoURL)!==null&&o!==void 0?o:void 0,x=(a=n.tenantId)!==null&&a!==void 0?a:void 0,T=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,v=(c=n.createdAt)!==null&&c!==void 0?c:void 0,w=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:b,emailVerified:A,isAnonymous:D,providerData:M,stsTokenManager:S}=n;ee(b&&S,e,"internal-error");const E=Xs.fromJSON(this.name,S);ee(typeof b=="string",e,"internal-error"),Di(d,e.name),Di(f,e.name),ee(typeof A=="boolean",e,"internal-error"),ee(typeof D=="boolean",e,"internal-error"),Di(g,e.name),Di(y,e.name),Di(x,e.name),Di(T,e.name),Di(v,e.name),Di(w,e.name);const P=new ai({uid:b,auth:e,email:f,emailVerified:A,displayName:d,isAnonymous:D,photoURL:y,phoneNumber:g,tenantId:x,stsTokenManager:E,createdAt:v,lastLoginAt:w});return M&&Array.isArray(M)&&(P.providerData=M.map(k=>Object.assign({},k))),T&&(P._redirectEventId=T),P}static async _fromIdTokenResponse(e,n,i=!1){const r=new Xs;r.updateFromServerResponse(n);const s=new ai({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await sh(s),s}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];ee(r.localId!==void 0,"internal-error");const s=r.providerUserInfo!==void 0?ob(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!(s!=null&&s.length),a=new Xs;a.updateFromIdToken(i);const l=new ai({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new tg(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O0=new Map;function li(t){xi(t instanceof Function,"Expected a class definition");let e=O0.get(t);return e?(xi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,O0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ab{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}ab.type="NONE";const L0=ab;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hu(t,e,n){return`firebase:${t}:${e}:${n}`}class Js{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=hu(this.userKey,r.apiKey,s),this.fullPersistenceKey=hu("persistence",r.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ai._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Js(li(L0),e,i);const r=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=r[0]||li(L0);const o=hu(i,e.config.apiKey,e.name);let a=null;for(const c of n)try{const h=await c._get(o);if(h){const d=ai._fromJSON(e,h);c!==s&&(a=d),s=c;break}}catch{}const l=r.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Js(s,e,i):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new Js(s,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(hb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(lb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(fb(e))return"Blackberry";if(pb(e))return"Webos";if(cb(e))return"Safari";if((e.includes("chrome/")||ub(e))&&!e.includes("edge/"))return"Chrome";if(db(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function lb(t=Pt()){return/firefox\//i.test(t)}function cb(t=Pt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ub(t=Pt()){return/crios\//i.test(t)}function hb(t=Pt()){return/iemobile/i.test(t)}function db(t=Pt()){return/android/i.test(t)}function fb(t=Pt()){return/blackberry/i.test(t)}function pb(t=Pt()){return/webos/i.test(t)}function $m(t=Pt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function NN(t=Pt()){var e;return $m(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function DN(){return QC()&&document.documentMode===10}function gb(t=Pt()){return $m(t)||db(t)||pb(t)||fb(t)||/windows phone/i.test(t)||hb(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mb(t,e=[]){let n;switch(t){case"Browser":n=V0(Pt());break;case"Worker":n=`${V0(Pt())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ds}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ON(t,e={}){return Kn(t,"GET","/v2/passwordPolicy",Er(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LN=6;class VN{constructor(e){var n,i,r,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:LN,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,r,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(i=l.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(r=l.containsLowercaseLetter)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FN{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new F0(this),this.idTokenSubscription=new F0(this),this.beforeStateQueue=new MN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=eb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=li(n)),this._initializationPromise=this.queue(async()=>{var i,r;if(!this._deleted&&(this.persistenceManager=await Js.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await sb(this,{idToken:e}),i=await ai._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(On(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ee(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await sh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=yN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(On(this.app))return Promise.reject(pi(this));const n=e?Ee(e):null;return n&&ee(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return On(this.app)?Promise.reject(pi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return On(this.app)?Promise.reject(pi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(li(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await ON(this),n=new VN(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Cl("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await RN(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&li(e)||this._popupRedirectResolver;ee(n,this,"argument-error"),this.redirectPersistenceManager=await Js.create(this,[li(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ee(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,i,r);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=mb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&pN(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function fs(t){return Ee(t)}class F0{constructor(e){this.auth=e,this.observer=null,this.addObserver=iR(n=>this.observer=n)}get next(){return ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function jN(t){Gh=t}function yb(t){return Gh.loadJS(t)}function UN(){return Gh.recaptchaEnterpriseScript}function zN(){return Gh.gapiScript}function BN(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const $N="recaptcha-enterprise",HN="NO_RECAPTCHA";class WN{constructor(e){this.type=$N,this.auth=fs(e)}async verify(e="verify",n=!1){async function i(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{TN(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new EN(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function r(s,o,a){const l=window.grecaptcha;D0(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(HN)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{i(this.auth).then(a=>{if(!n&&D0(window.grecaptcha))r(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=UN();l.length!==0&&(l+=a),yb(l).then(()=>{r(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function j0(t,e,n,i=!1){const r=new WN(t);let s;try{s=await r.verify(n)}catch{s=await r.verify(n,!0)}const o=Object.assign({},e);return i?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function ng(t,e,n,i){var r;if(!((r=t._getRecaptchaConfig())===null||r===void 0)&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await j0(t,e,n,n==="getOobCode");return i(t,s)}else return i(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await j0(t,e,n,n==="getOobCode");return i(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qN(t,e){const n=Kh(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),s=n.getOptions();if(nh(s,e??{}))return r;Sn(r,"already-initialized")}return n.initialize({options:e})}function KN(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(li);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function GN(t,e,n){const i=fs(t);ee(i._canInitEmulator,i,"emulator-config-failed"),ee(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,s=_b(e),{host:o,port:a}=QN(e),l=a===null?"":`:${a}`;i.config.emulator={url:`${s}//${o}${l}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),YN()}function _b(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function QN(t){const e=_b(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const s=r[1];return{host:s,port:U0(i.substr(s.length+1))}}else{const[s,o]=i.split(":");return{host:s,port:U0(o)}}}function U0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function YN(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return oi("not implemented")}_getIdTokenResponse(e){return oi("not implemented")}_linkToIdToken(e,n){return oi("not implemented")}_getReauthenticationResolver(e){return oi("not implemented")}}async function XN(t,e){return Kn(t,"POST","/v1/accounts:update",e)}async function JN(t,e){return Kn(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZN(t,e){return Dl(t,"POST","/v1/accounts:signInWithPassword",Er(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eD(t,e){return Dl(t,"POST","/v1/accounts:signInWithEmailLink",Er(t,e))}async function tD(t,e){return Dl(t,"POST","/v1/accounts:signInWithEmailLink",Er(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol extends Hm{constructor(e,n,i,r=null){super("password",i),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new ol(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new ol(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ng(e,n,"signInWithPassword",ZN);case"emailLink":return eD(e,{email:this._email,oobCode:this._password});default:Sn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ng(e,i,"signUpPassword",JN);case"emailLink":return tD(e,{idToken:n,email:this._email,oobCode:this._password});default:Sn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zs(t,e){return Dl(t,"POST","/v1/accounts:signInWithIdp",Er(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nD="http://localhost";class ns extends Hm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ns(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Sn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=n,s=jm(n,["providerId","signInMethod"]);if(!i||!r)return null;const o=new ns(i,r);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Zs(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Zs(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Zs(e,n)}buildRequest(){const e={requestUri:nD,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Rl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iD(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function rD(t){const e=la(ca(t)).link,n=e?la(ca(e)).deep_link_id:null,i=la(ca(t)).deep_link_id;return(i?la(ca(i)).link:null)||i||n||e||t}class Wm{constructor(e){var n,i,r,s,o,a;const l=la(ca(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,h=(i=l.oobCode)!==null&&i!==void 0?i:null,d=iD((r=l.mode)!==null&&r!==void 0?r:null);ee(c&&h&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=h,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=rD(e);try{return new Wm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(){this.providerId=ps.PROVIDER_ID}static credential(e,n){return ol._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=Wm.parseLink(n);return ee(i,"argument-error"),ol._fromEmailAndCode(e,i.code,i.tenantId)}}ps.PROVIDER_ID="password";ps.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ps.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vb{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml extends vb{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi extends Ml{constructor(){super("facebook.com")}static credential(e){return ns._fromParams({providerId:Fi.PROVIDER_ID,signInMethod:Fi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Fi.credentialFromTaggedObject(e)}static credentialFromError(e){return Fi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Fi.credential(e.oauthAccessToken)}catch{return null}}}Fi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Fi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji extends Ml{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ns._fromParams({providerId:ji.PROVIDER_ID,signInMethod:ji.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ji.credentialFromTaggedObject(e)}static credentialFromError(e){return ji.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return ji.credential(n,i)}catch{return null}}}ji.GOOGLE_SIGN_IN_METHOD="google.com";ji.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui extends Ml{constructor(){super("github.com")}static credential(e){return ns._fromParams({providerId:Ui.PROVIDER_ID,signInMethod:Ui.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ui.credentialFromTaggedObject(e)}static credentialFromError(e){return Ui.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ui.credential(e.oauthAccessToken)}catch{return null}}}Ui.GITHUB_SIGN_IN_METHOD="github.com";Ui.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi extends Ml{constructor(){super("twitter.com")}static credential(e,n){return ns._fromParams({providerId:zi.PROVIDER_ID,signInMethod:zi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return zi.credentialFromTaggedObject(e)}static credentialFromError(e){return zi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return zi.credential(n,i)}catch{return null}}}zi.TWITTER_SIGN_IN_METHOD="twitter.com";zi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sD(t,e){return Dl(t,"POST","/v1/accounts:signUp",Er(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const s=await ai._fromIdTokenResponse(e,i,r),o=z0(i);return new is({user:s,providerId:o,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=z0(i);return new is({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function z0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh extends qn{constructor(e,n,i,r){var s;super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,oh.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new oh(e,n,i,r)}}function wb(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?oh._fromErrorAndOperation(t,s,e,i):s})}async function oD(t,e,n=!1){const i=await ts(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return is._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xb(t,e,n=!1){const{auth:i}=t;if(On(i.app))return Promise.reject(pi(i));const r="reauthenticate";try{const s=await ts(t,wb(i,r,e,t),n);ee(s.idToken,i,"internal-error");const o=Bm(s.idToken);ee(o,i,"internal-error");const{sub:a}=o;return ee(t.uid===a,i,"user-mismatch"),is._forOperation(t,r,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Sn(i,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Eb(t,e,n=!1){if(On(t.app))return Promise.reject(pi(t));const i="signIn",r=await wb(t,i,e),s=await is._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(s.user),s}async function aD(t,e){return Eb(fs(t),e)}async function lD(t,e){return xb(Ee(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tb(t){const e=fs(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function cD(t,e,n){if(On(t.app))return Promise.reject(pi(t));const i=fs(t),o=await ng(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",sD).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&Tb(t),l}),a=await is._fromIdTokenResponse(i,"signIn",o);return await i._updateCurrentUser(a.user),a}function uD(t,e,n){return On(t.app)?Promise.reject(pi(t)):aD(Ee(t),ps.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&Tb(t),i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hD(t,e){return Kn(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bb(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const i=Ee(t),s={idToken:await i.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await ts(i,hD(i.auth,s));i.displayName=o.displayName||null,i.photoURL=o.photoUrl||null;const a=i.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=i.displayName,a.photoURL=i.photoURL),await i._updateTokensIfNecessary(o)}function dD(t,e){return fD(Ee(t),null,e)}async function fD(t,e,n){const{auth:i}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(s.password=n);const o=await ts(t,XN(i,s));await t._updateTokensIfNecessary(o,!0)}function pD(t,e,n,i){return Ee(t).onIdTokenChanged(e,n,i)}function gD(t,e,n){return Ee(t).beforeAuthStateChanged(e,n)}function mD(t,e,n,i){return Ee(t).onAuthStateChanged(e,n,i)}function yD(t){return Ee(t).signOut()}async function _D(t){return Ee(t).delete()}const ah="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sb{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ah,"1"),this.storage.removeItem(ah),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vD=1e3,wD=10;class Ib extends Sb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=gb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const i=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(i);!n&&this.localCache[i]===o||this.notifyListeners(i,o)},s=this.storage.getItem(i);DN()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,wD):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},vD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Ib.type="LOCAL";const xD=Ib;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kb extends Sb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}kb.type="SESSION";const Pb=kb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ED(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new Qh(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:s}=n.data,o=this.handlersMap[r];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await ED(a);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Qh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qm(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=qm("",20);r.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},i);o={messageChannel:r,onMessage(d){const f=d;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zn(){return window}function bD(t){zn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ab(){return typeof zn().WorkerGlobalScope<"u"&&typeof zn().importScripts=="function"}async function SD(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function ID(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function kD(){return Ab()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cb="firebaseLocalStorageDb",PD=1,lh="firebaseLocalStorage",Rb="fbase_key";class Ol{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Yh(t,e){return t.transaction([lh],e?"readwrite":"readonly").objectStore(lh)}function AD(){const t=indexedDB.deleteDatabase(Cb);return new Ol(t).toPromise()}function ig(){const t=indexedDB.open(Cb,PD);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(lh,{keyPath:Rb})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(lh)?e(i):(i.close(),await AD(),e(await ig()))})})}async function B0(t,e,n){const i=Yh(t,!0).put({[Rb]:e,value:n});return new Ol(i).toPromise()}async function CD(t,e){const n=Yh(t,!1).get(e),i=await new Ol(n).toPromise();return i===void 0?null:i.value}function $0(t,e){const n=Yh(t,!0).delete(e);return new Ol(n).toPromise()}const RD=800,ND=3;class Nb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ig(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>ND)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ab()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Qh._getInstance(kD()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await SD(),!this.activeServiceWorker)return;this.sender=new TD(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||ID()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ig();return await B0(e,ah,"1"),await $0(e,ah),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>B0(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>CD(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>$0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const s=Yh(r,!1).getAll();return new Ol(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:s}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),RD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Nb.type="LOCAL";const DD=Nb;new Nl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MD(t,e){return e?li(e):(ee(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km extends Hm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Zs(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Zs(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Zs(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function OD(t){return Eb(t.auth,new Km(t),t.bypassAuthState)}function LD(t){const{auth:e,user:n}=t;return ee(n,e,"internal-error"),xb(n,new Km(t),t.bypassAuthState)}async function VD(t){const{auth:e,user:n}=t;return ee(n,e,"internal-error"),oD(n,new Km(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Db{constructor(e,n,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return OD;case"linkViaPopup":case"linkViaRedirect":return VD;case"reauthViaPopup":case"reauthViaRedirect":return LD;default:Sn(this.auth,"internal-error")}}resolve(e){xi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){xi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FD=new Nl(2e3,1e4);class $s extends Db{constructor(e,n,i,r,s){super(e,n,r,s),this.provider=i,this.authWindow=null,this.pollId=null,$s.currentPopupAction&&$s.currentPopupAction.cancel(),$s.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ee(e,this.auth,"internal-error"),e}async onExecution(){xi(this.filter.length===1,"Popup operations only handle one event");const e=qm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Un(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Un(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,$s.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Un(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,FD.get())};e()}}$s.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jD="pendingRedirect",du=new Map;class UD extends Db{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=du.get(this.auth._key());if(!e){try{const i=await zD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}du.set(this.auth._key(),e)}return this.bypassAuthState||du.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function zD(t,e){const n=HD(e),i=$D(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function BD(t,e){du.set(t._key(),e)}function $D(t){return li(t._redirectPersistence)}function HD(t){return hu(jD,t.config.apiKey,t.name)}async function WD(t,e,n=!1){if(On(t.app))return Promise.reject(pi(t));const i=fs(t),r=MD(i,e),o=await new UD(i,r,n).execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qD=10*60*1e3;class KD{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!GD(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!Mb(e)){const r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(Un(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=qD&&this.cachedEventUids.clear(),this.cachedEventUids.has(H0(e))}saveEventToCache(e){this.cachedEventUids.add(H0(e)),this.lastProcessedEventTime=Date.now()}}function H0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Mb({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function GD(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Mb(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QD(t,e={}){return Kn(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,XD=/^https?/;async function JD(t){if(t.config.emulator)return;const{authorizedDomains:e}=await QD(t);for(const n of e)try{if(ZD(n))return}catch{}Sn(t,"unauthorized-domain")}function ZD(t){const e=eg(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===i}if(!XD.test(n))return!1;if(YD.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eM=new Nl(3e4,6e4);function W0(){const t=zn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function tM(t){return new Promise((e,n)=>{var i,r,s;function o(){W0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{W0(),n(Un(t,"network-request-failed"))},timeout:eM.get()})}if(!((r=(i=zn().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((s=zn().gapi)===null||s===void 0)&&s.load)o();else{const a=BN("iframefcb");return zn()[a]=()=>{gapi.load?o():n(Un(t,"network-request-failed"))},yb(`${zN()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw fu=null,e})}let fu=null;function nM(t){return fu=fu||tM(t),fu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iM=new Nl(5e3,15e3),rM="__/auth/iframe",sM="emulator/auth/iframe",oM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},aM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function lM(t){const e=t.config;ee(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?zm(e,sM):`https://${t.config.authDomain}/${rM}`,i={apiKey:e.apiKey,appName:t.name,v:ds},r=aM.get(t.config.apiHost);r&&(i.eid=r);const s=t._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${Rl(i).slice(1)}`}async function cM(t){const e=await nM(t),n=zn().gapi;return ee(n,t,"internal-error"),e.open({where:document.body,url:lM(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:oM,dontclear:!0},i=>new Promise(async(r,s)=>{await i.restyle({setHideOnLeave:!1});const o=Un(t,"network-request-failed"),a=zn().setTimeout(()=>{s(o)},iM.get());function l(){zn().clearTimeout(a),r(i)}i.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},hM=500,dM=600,fM="_blank",pM="http://localhost";class q0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function gM(t,e,n,i=hM,r=dM){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const l=Object.assign(Object.assign({},uM),{width:i.toString(),height:r.toString(),top:s,left:o}),c=Pt().toLowerCase();n&&(a=ub(c)?fM:n),lb(c)&&(e=e||pM,l.scrollbars="yes");const h=Object.entries(l).reduce((f,[g,y])=>`${f}${g}=${y},`,"");if(NN(c)&&a!=="_self")return mM(e||"",a),new q0(null);const d=window.open(e||"",a,h);ee(d,t,"popup-blocked");try{d.focus()}catch{}return new q0(d)}function mM(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yM="__/auth/handler",_M="emulator/auth/handler",vM=encodeURIComponent("fac");async function K0(t,e,n,i,r,s){ee(t.config.authDomain,t,"auth-domain-config-required"),ee(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:ds,eventId:r};if(e instanceof vb){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",nR(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries({}))o[h]=d}if(e instanceof Ml){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),c=l?`#${vM}=${encodeURIComponent(l)}`:"";return`${wM(t)}?${Rl(a).slice(1)}${c}`}function wM({config:t}){return t.emulator?zm(t,_M):`https://${t.authDomain}/${yM}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Af="webStorageSupport";class xM{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Pb,this._completeRedirectFn=WD,this._overrideRedirectResult=BD}async _openPopup(e,n,i,r){var s;xi((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await K0(e,n,i,eg(),r);return gM(e,o,qm())}async _openRedirect(e,n,i,r){await this._originValidation(e);const s=await K0(e,n,i,eg(),r);return bD(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:s}=this.eventManagers[n];return r?Promise.resolve(r):(xi(s,"If manager is not set, promise should be"),s)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await cM(e),i=new KD(e);return n.register("authEvent",r=>(ee(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Af,{type:Af},r=>{var s;const o=(s=r==null?void 0:r[0])===null||s===void 0?void 0:s[Af];o!==void 0&&n(!!o),Sn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=JD(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return gb()||cb()||$m()}}const EM=xM;var G0="@firebase/auth",Q0="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TM{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bM(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function SM(t){es(new fr("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;ee(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:mb(t)},c=new FN(i,r,s,l);return KN(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),es(new fr("auth-internal",e=>{const n=fs(e.getProvider("auth").getImmediate());return(i=>new TM(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),jn(G0,Q0,bM(t)),jn(G0,Q0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IM=5*60,kM=qT("authIdTokenMaxAge")||IM;let Y0=null;const PM=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>kM)return;const r=n==null?void 0:n.token;Y0!==r&&(Y0=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function AM(t=Fm()){const e=Kh(t,"auth");if(e.isInitialized())return e.getImmediate();const n=qN(t,{popupRedirectResolver:EM,persistence:[DD,xD,Pb]}),i=qT("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(i,location.origin);if(location.origin===s.origin){const o=PM(s.toString());gD(n,o,()=>o(n.currentUser)),pD(n,a=>o(a))}}const r=$T("auth");return r&&GN(n,`http://${r}`),n}function CM(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}jN({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const s=Un("internal-error");s.customData=r,n(s)},i.type="text/javascript",i.charset="UTF-8",CM().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});SM("Browser");var RM="firebase",NM="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */jn(RM,NM,"app");var X0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Wr,Ob;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,E){function P(){}P.prototype=E.prototype,S.D=E.prototype,S.prototype=new P,S.prototype.constructor=S,S.C=function(k,C,N){for(var R=Array(arguments.length-2),fe=2;fe<arguments.length;fe++)R[fe-2]=arguments[fe];return E.prototype[C].apply(k,R)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(S,E,P){P||(P=0);var k=Array(16);if(typeof E=="string")for(var C=0;16>C;++C)k[C]=E.charCodeAt(P++)|E.charCodeAt(P++)<<8|E.charCodeAt(P++)<<16|E.charCodeAt(P++)<<24;else for(C=0;16>C;++C)k[C]=E[P++]|E[P++]<<8|E[P++]<<16|E[P++]<<24;E=S.g[0],P=S.g[1],C=S.g[2];var N=S.g[3],R=E+(N^P&(C^N))+k[0]+3614090360&4294967295;E=P+(R<<7&4294967295|R>>>25),R=N+(C^E&(P^C))+k[1]+3905402710&4294967295,N=E+(R<<12&4294967295|R>>>20),R=C+(P^N&(E^P))+k[2]+606105819&4294967295,C=N+(R<<17&4294967295|R>>>15),R=P+(E^C&(N^E))+k[3]+3250441966&4294967295,P=C+(R<<22&4294967295|R>>>10),R=E+(N^P&(C^N))+k[4]+4118548399&4294967295,E=P+(R<<7&4294967295|R>>>25),R=N+(C^E&(P^C))+k[5]+1200080426&4294967295,N=E+(R<<12&4294967295|R>>>20),R=C+(P^N&(E^P))+k[6]+2821735955&4294967295,C=N+(R<<17&4294967295|R>>>15),R=P+(E^C&(N^E))+k[7]+4249261313&4294967295,P=C+(R<<22&4294967295|R>>>10),R=E+(N^P&(C^N))+k[8]+1770035416&4294967295,E=P+(R<<7&4294967295|R>>>25),R=N+(C^E&(P^C))+k[9]+2336552879&4294967295,N=E+(R<<12&4294967295|R>>>20),R=C+(P^N&(E^P))+k[10]+4294925233&4294967295,C=N+(R<<17&4294967295|R>>>15),R=P+(E^C&(N^E))+k[11]+2304563134&4294967295,P=C+(R<<22&4294967295|R>>>10),R=E+(N^P&(C^N))+k[12]+1804603682&4294967295,E=P+(R<<7&4294967295|R>>>25),R=N+(C^E&(P^C))+k[13]+4254626195&4294967295,N=E+(R<<12&4294967295|R>>>20),R=C+(P^N&(E^P))+k[14]+2792965006&4294967295,C=N+(R<<17&4294967295|R>>>15),R=P+(E^C&(N^E))+k[15]+1236535329&4294967295,P=C+(R<<22&4294967295|R>>>10),R=E+(C^N&(P^C))+k[1]+4129170786&4294967295,E=P+(R<<5&4294967295|R>>>27),R=N+(P^C&(E^P))+k[6]+3225465664&4294967295,N=E+(R<<9&4294967295|R>>>23),R=C+(E^P&(N^E))+k[11]+643717713&4294967295,C=N+(R<<14&4294967295|R>>>18),R=P+(N^E&(C^N))+k[0]+3921069994&4294967295,P=C+(R<<20&4294967295|R>>>12),R=E+(C^N&(P^C))+k[5]+3593408605&4294967295,E=P+(R<<5&4294967295|R>>>27),R=N+(P^C&(E^P))+k[10]+38016083&4294967295,N=E+(R<<9&4294967295|R>>>23),R=C+(E^P&(N^E))+k[15]+3634488961&4294967295,C=N+(R<<14&4294967295|R>>>18),R=P+(N^E&(C^N))+k[4]+3889429448&4294967295,P=C+(R<<20&4294967295|R>>>12),R=E+(C^N&(P^C))+k[9]+568446438&4294967295,E=P+(R<<5&4294967295|R>>>27),R=N+(P^C&(E^P))+k[14]+3275163606&4294967295,N=E+(R<<9&4294967295|R>>>23),R=C+(E^P&(N^E))+k[3]+4107603335&4294967295,C=N+(R<<14&4294967295|R>>>18),R=P+(N^E&(C^N))+k[8]+1163531501&4294967295,P=C+(R<<20&4294967295|R>>>12),R=E+(C^N&(P^C))+k[13]+2850285829&4294967295,E=P+(R<<5&4294967295|R>>>27),R=N+(P^C&(E^P))+k[2]+4243563512&4294967295,N=E+(R<<9&4294967295|R>>>23),R=C+(E^P&(N^E))+k[7]+1735328473&4294967295,C=N+(R<<14&4294967295|R>>>18),R=P+(N^E&(C^N))+k[12]+2368359562&4294967295,P=C+(R<<20&4294967295|R>>>12),R=E+(P^C^N)+k[5]+4294588738&4294967295,E=P+(R<<4&4294967295|R>>>28),R=N+(E^P^C)+k[8]+2272392833&4294967295,N=E+(R<<11&4294967295|R>>>21),R=C+(N^E^P)+k[11]+1839030562&4294967295,C=N+(R<<16&4294967295|R>>>16),R=P+(C^N^E)+k[14]+4259657740&4294967295,P=C+(R<<23&4294967295|R>>>9),R=E+(P^C^N)+k[1]+2763975236&4294967295,E=P+(R<<4&4294967295|R>>>28),R=N+(E^P^C)+k[4]+1272893353&4294967295,N=E+(R<<11&4294967295|R>>>21),R=C+(N^E^P)+k[7]+4139469664&4294967295,C=N+(R<<16&4294967295|R>>>16),R=P+(C^N^E)+k[10]+3200236656&4294967295,P=C+(R<<23&4294967295|R>>>9),R=E+(P^C^N)+k[13]+681279174&4294967295,E=P+(R<<4&4294967295|R>>>28),R=N+(E^P^C)+k[0]+3936430074&4294967295,N=E+(R<<11&4294967295|R>>>21),R=C+(N^E^P)+k[3]+3572445317&4294967295,C=N+(R<<16&4294967295|R>>>16),R=P+(C^N^E)+k[6]+76029189&4294967295,P=C+(R<<23&4294967295|R>>>9),R=E+(P^C^N)+k[9]+3654602809&4294967295,E=P+(R<<4&4294967295|R>>>28),R=N+(E^P^C)+k[12]+3873151461&4294967295,N=E+(R<<11&4294967295|R>>>21),R=C+(N^E^P)+k[15]+530742520&4294967295,C=N+(R<<16&4294967295|R>>>16),R=P+(C^N^E)+k[2]+3299628645&4294967295,P=C+(R<<23&4294967295|R>>>9),R=E+(C^(P|~N))+k[0]+4096336452&4294967295,E=P+(R<<6&4294967295|R>>>26),R=N+(P^(E|~C))+k[7]+1126891415&4294967295,N=E+(R<<10&4294967295|R>>>22),R=C+(E^(N|~P))+k[14]+2878612391&4294967295,C=N+(R<<15&4294967295|R>>>17),R=P+(N^(C|~E))+k[5]+4237533241&4294967295,P=C+(R<<21&4294967295|R>>>11),R=E+(C^(P|~N))+k[12]+1700485571&4294967295,E=P+(R<<6&4294967295|R>>>26),R=N+(P^(E|~C))+k[3]+2399980690&4294967295,N=E+(R<<10&4294967295|R>>>22),R=C+(E^(N|~P))+k[10]+4293915773&4294967295,C=N+(R<<15&4294967295|R>>>17),R=P+(N^(C|~E))+k[1]+2240044497&4294967295,P=C+(R<<21&4294967295|R>>>11),R=E+(C^(P|~N))+k[8]+1873313359&4294967295,E=P+(R<<6&4294967295|R>>>26),R=N+(P^(E|~C))+k[15]+4264355552&4294967295,N=E+(R<<10&4294967295|R>>>22),R=C+(E^(N|~P))+k[6]+2734768916&4294967295,C=N+(R<<15&4294967295|R>>>17),R=P+(N^(C|~E))+k[13]+1309151649&4294967295,P=C+(R<<21&4294967295|R>>>11),R=E+(C^(P|~N))+k[4]+4149444226&4294967295,E=P+(R<<6&4294967295|R>>>26),R=N+(P^(E|~C))+k[11]+3174756917&4294967295,N=E+(R<<10&4294967295|R>>>22),R=C+(E^(N|~P))+k[2]+718787259&4294967295,C=N+(R<<15&4294967295|R>>>17),R=P+(N^(C|~E))+k[9]+3951481745&4294967295,S.g[0]=S.g[0]+E&4294967295,S.g[1]=S.g[1]+(C+(R<<21&4294967295|R>>>11))&4294967295,S.g[2]=S.g[2]+C&4294967295,S.g[3]=S.g[3]+N&4294967295}i.prototype.u=function(S,E){E===void 0&&(E=S.length);for(var P=E-this.blockSize,k=this.B,C=this.h,N=0;N<E;){if(C==0)for(;N<=P;)r(this,S,N),N+=this.blockSize;if(typeof S=="string"){for(;N<E;)if(k[C++]=S.charCodeAt(N++),C==this.blockSize){r(this,k),C=0;break}}else for(;N<E;)if(k[C++]=S[N++],C==this.blockSize){r(this,k),C=0;break}}this.h=C,this.o+=E},i.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var E=1;E<S.length-8;++E)S[E]=0;var P=8*this.o;for(E=S.length-8;E<S.length;++E)S[E]=P&255,P/=256;for(this.u(S),S=Array(16),E=P=0;4>E;++E)for(var k=0;32>k;k+=8)S[P++]=this.g[E]>>>k&255;return S};function s(S,E){var P=a;return Object.prototype.hasOwnProperty.call(P,S)?P[S]:P[S]=E(S)}function o(S,E){this.h=E;for(var P=[],k=!0,C=S.length-1;0<=C;C--){var N=S[C]|0;k&&N==E||(P[C]=N,k=!1)}this.g=P}var a={};function l(S){return-128<=S&&128>S?s(S,function(E){return new o([E|0],0>E?-1:0)}):new o([S|0],0>S?-1:0)}function c(S){if(isNaN(S)||!isFinite(S))return d;if(0>S)return T(c(-S));for(var E=[],P=1,k=0;S>=P;k++)E[k]=S/P|0,P*=4294967296;return new o(E,0)}function h(S,E){if(S.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(S.charAt(0)=="-")return T(h(S.substring(1),E));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var P=c(Math.pow(E,8)),k=d,C=0;C<S.length;C+=8){var N=Math.min(8,S.length-C),R=parseInt(S.substring(C,C+N),E);8>N?(N=c(Math.pow(E,N)),k=k.j(N).add(c(R))):(k=k.j(P),k=k.add(c(R)))}return k}var d=l(0),f=l(1),g=l(16777216);t=o.prototype,t.m=function(){if(x(this))return-T(this).m();for(var S=0,E=1,P=0;P<this.g.length;P++){var k=this.i(P);S+=(0<=k?k:4294967296+k)*E,E*=4294967296}return S},t.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(y(this))return"0";if(x(this))return"-"+T(this).toString(S);for(var E=c(Math.pow(S,6)),P=this,k="";;){var C=A(P,E).g;P=v(P,C.j(E));var N=((0<P.g.length?P.g[0]:P.h)>>>0).toString(S);if(P=C,y(P))return N+k;for(;6>N.length;)N="0"+N;k=N+k}},t.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function y(S){if(S.h!=0)return!1;for(var E=0;E<S.g.length;E++)if(S.g[E]!=0)return!1;return!0}function x(S){return S.h==-1}t.l=function(S){return S=v(this,S),x(S)?-1:y(S)?0:1};function T(S){for(var E=S.g.length,P=[],k=0;k<E;k++)P[k]=~S.g[k];return new o(P,~S.h).add(f)}t.abs=function(){return x(this)?T(this):this},t.add=function(S){for(var E=Math.max(this.g.length,S.g.length),P=[],k=0,C=0;C<=E;C++){var N=k+(this.i(C)&65535)+(S.i(C)&65535),R=(N>>>16)+(this.i(C)>>>16)+(S.i(C)>>>16);k=R>>>16,N&=65535,R&=65535,P[C]=R<<16|N}return new o(P,P[P.length-1]&-2147483648?-1:0)};function v(S,E){return S.add(T(E))}t.j=function(S){if(y(this)||y(S))return d;if(x(this))return x(S)?T(this).j(T(S)):T(T(this).j(S));if(x(S))return T(this.j(T(S)));if(0>this.l(g)&&0>S.l(g))return c(this.m()*S.m());for(var E=this.g.length+S.g.length,P=[],k=0;k<2*E;k++)P[k]=0;for(k=0;k<this.g.length;k++)for(var C=0;C<S.g.length;C++){var N=this.i(k)>>>16,R=this.i(k)&65535,fe=S.i(C)>>>16,se=S.i(C)&65535;P[2*k+2*C]+=R*se,w(P,2*k+2*C),P[2*k+2*C+1]+=N*se,w(P,2*k+2*C+1),P[2*k+2*C+1]+=R*fe,w(P,2*k+2*C+1),P[2*k+2*C+2]+=N*fe,w(P,2*k+2*C+2)}for(k=0;k<E;k++)P[k]=P[2*k+1]<<16|P[2*k];for(k=E;k<2*E;k++)P[k]=0;return new o(P,0)};function w(S,E){for(;(S[E]&65535)!=S[E];)S[E+1]+=S[E]>>>16,S[E]&=65535,E++}function b(S,E){this.g=S,this.h=E}function A(S,E){if(y(E))throw Error("division by zero");if(y(S))return new b(d,d);if(x(S))return E=A(T(S),E),new b(T(E.g),T(E.h));if(x(E))return E=A(S,T(E)),new b(T(E.g),E.h);if(30<S.g.length){if(x(S)||x(E))throw Error("slowDivide_ only works with positive integers.");for(var P=f,k=E;0>=k.l(S);)P=D(P),k=D(k);var C=M(P,1),N=M(k,1);for(k=M(k,2),P=M(P,2);!y(k);){var R=N.add(k);0>=R.l(S)&&(C=C.add(P),N=R),k=M(k,1),P=M(P,1)}return E=v(S,C.j(E)),new b(C,E)}for(C=d;0<=S.l(E);){for(P=Math.max(1,Math.floor(S.m()/E.m())),k=Math.ceil(Math.log(P)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),N=c(P),R=N.j(E);x(R)||0<R.l(S);)P-=k,N=c(P),R=N.j(E);y(N)&&(N=f),C=C.add(N),S=v(S,R)}return new b(C,S)}t.A=function(S){return A(this,S).h},t.and=function(S){for(var E=Math.max(this.g.length,S.g.length),P=[],k=0;k<E;k++)P[k]=this.i(k)&S.i(k);return new o(P,this.h&S.h)},t.or=function(S){for(var E=Math.max(this.g.length,S.g.length),P=[],k=0;k<E;k++)P[k]=this.i(k)|S.i(k);return new o(P,this.h|S.h)},t.xor=function(S){for(var E=Math.max(this.g.length,S.g.length),P=[],k=0;k<E;k++)P[k]=this.i(k)^S.i(k);return new o(P,this.h^S.h)};function D(S){for(var E=S.g.length+1,P=[],k=0;k<E;k++)P[k]=S.i(k)<<1|S.i(k-1)>>>31;return new o(P,S.h)}function M(S,E){var P=E>>5;E%=32;for(var k=S.g.length-P,C=[],N=0;N<k;N++)C[N]=0<E?S.i(N+P)>>>E|S.i(N+P+1)<<32-E:S.i(N+P);return new o(C,S.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,Ob=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,Wr=o}).apply(typeof X0<"u"?X0:typeof self<"u"?self:typeof window<"u"?window:{});var Cc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Lb,ua,Vb,pu,rg,Fb,jb,Ub;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,p,_){return u==Array.prototype||u==Object.prototype||(u[p]=_.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Cc=="object"&&Cc];for(var p=0;p<u.length;++p){var _=u[p];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var i=n(this);function r(u,p){if(p)e:{var _=i;u=u.split(".");for(var I=0;I<u.length-1;I++){var O=u[I];if(!(O in _))break e;_=_[O]}u=u[u.length-1],I=_[u],p=p(I),p!=I&&p!=null&&e(_,u,{configurable:!0,writable:!0,value:p})}}function s(u,p){u instanceof String&&(u+="");var _=0,I=!1,O={next:function(){if(!I&&_<u.length){var V=_++;return{value:p(V,u[V]),done:!1}}return I=!0,{done:!0,value:void 0}}};return O[Symbol.iterator]=function(){return O},O}r("Array.prototype.values",function(u){return u||function(){return s(this,function(p,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var p=typeof u;return p=p!="object"?p:u?Array.isArray(u)?"array":p:"null",p=="array"||p=="object"&&typeof u.length=="number"}function c(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function h(u,p,_){return u.call.apply(u.bind,arguments)}function d(u,p,_){if(!u)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var O=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(O,I),u.apply(p,O)}}return function(){return u.apply(p,arguments)}}function f(u,p,_){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:d,f.apply(null,arguments)}function g(u,p){var _=Array.prototype.slice.call(arguments,1);return function(){var I=_.slice();return I.push.apply(I,arguments),u.apply(this,I)}}function y(u,p){function _(){}_.prototype=p.prototype,u.aa=p.prototype,u.prototype=new _,u.prototype.constructor=u,u.Qb=function(I,O,V){for(var $=Array(arguments.length-2),Se=2;Se<arguments.length;Se++)$[Se-2]=arguments[Se];return p.prototype[O].apply(I,$)}}function x(u){const p=u.length;if(0<p){const _=Array(p);for(let I=0;I<p;I++)_[I]=u[I];return _}return[]}function T(u,p){for(let _=1;_<arguments.length;_++){const I=arguments[_];if(l(I)){const O=u.length||0,V=I.length||0;u.length=O+V;for(let $=0;$<V;$++)u[O+$]=I[$]}else u.push(I)}}class v{constructor(p,_){this.i=p,this.j=_,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function w(u){return/^[\s\xa0]*$/.test(u)}function b(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function A(u){return A[" "](u),u}A[" "]=function(){};var D=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function M(u,p,_){for(const I in u)p.call(_,u[I],I,u)}function S(u,p){for(const _ in u)p.call(void 0,u[_],_,u)}function E(u){const p={};for(const _ in u)p[_]=u[_];return p}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(u,p){let _,I;for(let O=1;O<arguments.length;O++){I=arguments[O];for(_ in I)u[_]=I[_];for(let V=0;V<P.length;V++)_=P[V],Object.prototype.hasOwnProperty.call(I,_)&&(u[_]=I[_])}}function C(u){var p=1;u=u.split(":");const _=[];for(;0<p&&u.length;)_.push(u.shift()),p--;return u.length&&_.push(u.join(":")),_}function N(u){a.setTimeout(()=>{throw u},0)}function R(){var u=B;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class fe{constructor(){this.h=this.g=null}add(p,_){const I=se.get();I.set(p,_),this.h?this.h.next=I:this.g=I,this.h=I}}var se=new v(()=>new le,u=>u.reset());class le{constructor(){this.next=this.g=this.h=null}set(p,_){this.h=p,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let Z,U=!1,B=new fe,G=()=>{const u=a.Promise.resolve(void 0);Z=()=>{u.then(J)}};var J=()=>{for(var u;u=R();){try{u.h.call(u.g)}catch(_){N(_)}var p=se;p.j(u),100>p.h&&(p.h++,u.next=p.g,p.g=u)}U=!1};function Q(){this.s=this.s,this.C=this.C}Q.prototype.s=!1,Q.prototype.ma=function(){this.s||(this.s=!0,this.N())},Q.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Y(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}Y.prototype.h=function(){this.defaultPrevented=!0};var he=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};a.addEventListener("test",_,p),a.removeEventListener("test",_,p)}catch{}return u}();function Te(u,p){if(Y.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var _=this.type=u.type,I=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget){if(D){e:{try{A(p.nodeName);var O=!0;break e}catch{}O=!1}O||(p=null)}}else _=="mouseover"?p=u.fromElement:_=="mouseout"&&(p=u.toElement);this.relatedTarget=p,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:_e[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Te.aa.h.call(this)}}y(Te,Y);var _e={2:"touch",3:"pen",4:"mouse"};Te.prototype.h=function(){Te.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Gt="closure_listenable_"+(1e6*Math.random()|0),b2=0;function S2(u,p,_,I,O){this.listener=u,this.proxy=null,this.src=p,this.type=_,this.capture=!!I,this.ha=O,this.key=++b2,this.da=this.fa=!1}function Kl(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Gl(u){this.src=u,this.g={},this.h=0}Gl.prototype.add=function(u,p,_,I,O){var V=u.toString();u=this.g[V],u||(u=this.g[V]=[],this.h++);var $=kd(u,p,I,O);return-1<$?(p=u[$],_||(p.fa=!1)):(p=new S2(p,this.src,V,!!I,O),p.fa=_,u.push(p)),p};function Id(u,p){var _=p.type;if(_ in u.g){var I=u.g[_],O=Array.prototype.indexOf.call(I,p,void 0),V;(V=0<=O)&&Array.prototype.splice.call(I,O,1),V&&(Kl(p),u.g[_].length==0&&(delete u.g[_],u.h--))}}function kd(u,p,_,I){for(var O=0;O<u.length;++O){var V=u[O];if(!V.da&&V.listener==p&&V.capture==!!_&&V.ha==I)return O}return-1}var Pd="closure_lm_"+(1e6*Math.random()|0),Ad={};function a_(u,p,_,I,O){if(Array.isArray(p)){for(var V=0;V<p.length;V++)a_(u,p[V],_,I,O);return null}return _=u_(_),u&&u[Gt]?u.K(p,_,c(I)?!!I.capture:!1,O):I2(u,p,_,!1,I,O)}function I2(u,p,_,I,O,V){if(!p)throw Error("Invalid event type");var $=c(O)?!!O.capture:!!O,Se=Rd(u);if(Se||(u[Pd]=Se=new Gl(u)),_=Se.add(p,_,I,$,V),_.proxy)return _;if(I=k2(),_.proxy=I,I.src=u,I.listener=_,u.addEventListener)he||(O=$),O===void 0&&(O=!1),u.addEventListener(p.toString(),I,O);else if(u.attachEvent)u.attachEvent(c_(p.toString()),I);else if(u.addListener&&u.removeListener)u.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return _}function k2(){function u(_){return p.call(u.src,u.listener,_)}const p=P2;return u}function l_(u,p,_,I,O){if(Array.isArray(p))for(var V=0;V<p.length;V++)l_(u,p[V],_,I,O);else I=c(I)?!!I.capture:!!I,_=u_(_),u&&u[Gt]?(u=u.i,p=String(p).toString(),p in u.g&&(V=u.g[p],_=kd(V,_,I,O),-1<_&&(Kl(V[_]),Array.prototype.splice.call(V,_,1),V.length==0&&(delete u.g[p],u.h--)))):u&&(u=Rd(u))&&(p=u.g[p.toString()],u=-1,p&&(u=kd(p,_,I,O)),(_=-1<u?p[u]:null)&&Cd(_))}function Cd(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[Gt])Id(p.i,u);else{var _=u.type,I=u.proxy;p.removeEventListener?p.removeEventListener(_,I,u.capture):p.detachEvent?p.detachEvent(c_(_),I):p.addListener&&p.removeListener&&p.removeListener(I),(_=Rd(p))?(Id(_,u),_.h==0&&(_.src=null,p[Pd]=null)):Kl(u)}}}function c_(u){return u in Ad?Ad[u]:Ad[u]="on"+u}function P2(u,p){if(u.da)u=!0;else{p=new Te(p,this);var _=u.listener,I=u.ha||u.src;u.fa&&Cd(u),u=_.call(I,p)}return u}function Rd(u){return u=u[Pd],u instanceof Gl?u:null}var Nd="__closure_events_fn_"+(1e9*Math.random()>>>0);function u_(u){return typeof u=="function"?u:(u[Nd]||(u[Nd]=function(p){return u.handleEvent(p)}),u[Nd])}function gt(){Q.call(this),this.i=new Gl(this),this.M=this,this.F=null}y(gt,Q),gt.prototype[Gt]=!0,gt.prototype.removeEventListener=function(u,p,_,I){l_(this,u,p,_,I)};function Ct(u,p){var _,I=u.F;if(I)for(_=[];I;I=I.F)_.push(I);if(u=u.M,I=p.type||p,typeof p=="string")p=new Y(p,u);else if(p instanceof Y)p.target=p.target||u;else{var O=p;p=new Y(I,u),k(p,O)}if(O=!0,_)for(var V=_.length-1;0<=V;V--){var $=p.g=_[V];O=Ql($,I,!0,p)&&O}if($=p.g=u,O=Ql($,I,!0,p)&&O,O=Ql($,I,!1,p)&&O,_)for(V=0;V<_.length;V++)$=p.g=_[V],O=Ql($,I,!1,p)&&O}gt.prototype.N=function(){if(gt.aa.N.call(this),this.i){var u=this.i,p;for(p in u.g){for(var _=u.g[p],I=0;I<_.length;I++)Kl(_[I]);delete u.g[p],u.h--}}this.F=null},gt.prototype.K=function(u,p,_,I){return this.i.add(String(u),p,!1,_,I)},gt.prototype.L=function(u,p,_,I){return this.i.add(String(u),p,!0,_,I)};function Ql(u,p,_,I){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();for(var O=!0,V=0;V<p.length;++V){var $=p[V];if($&&!$.da&&$.capture==_){var Se=$.listener,at=$.ha||$.src;$.fa&&Id(u.i,$),O=Se.call(at,I)!==!1&&O}}return O&&!I.defaultPrevented}function h_(u,p,_){if(typeof u=="function")_&&(u=f(u,_));else if(u&&typeof u.handleEvent=="function")u=f(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:a.setTimeout(u,p||0)}function d_(u){u.g=h_(()=>{u.g=null,u.i&&(u.i=!1,d_(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class A2 extends Q{constructor(p,_){super(),this.m=p,this.l=_,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:d_(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Co(u){Q.call(this),this.h=u,this.g={}}y(Co,Q);var f_=[];function p_(u){M(u.g,function(p,_){this.g.hasOwnProperty(_)&&Cd(p)},u),u.g={}}Co.prototype.N=function(){Co.aa.N.call(this),p_(this)},Co.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Dd=a.JSON.stringify,C2=a.JSON.parse,R2=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function Md(){}Md.prototype.h=null;function g_(u){return u.h||(u.h=u.i())}function m_(){}var Ro={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Od(){Y.call(this,"d")}y(Od,Y);function Ld(){Y.call(this,"c")}y(Ld,Y);var Sr={},y_=null;function Yl(){return y_=y_||new gt}Sr.La="serverreachability";function __(u){Y.call(this,Sr.La,u)}y(__,Y);function No(u){const p=Yl();Ct(p,new __(p))}Sr.STAT_EVENT="statevent";function v_(u,p){Y.call(this,Sr.STAT_EVENT,u),this.stat=p}y(v_,Y);function Rt(u){const p=Yl();Ct(p,new v_(p,u))}Sr.Ma="timingevent";function w_(u,p){Y.call(this,Sr.Ma,u),this.size=p}y(w_,Y);function Do(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},p)}function Mo(){this.g=!0}Mo.prototype.xa=function(){this.g=!1};function N2(u,p,_,I,O,V){u.info(function(){if(u.g)if(V)for(var $="",Se=V.split("&"),at=0;at<Se.length;at++){var me=Se[at].split("=");if(1<me.length){var mt=me[0];me=me[1];var yt=mt.split("_");$=2<=yt.length&&yt[1]=="type"?$+(mt+"="+me+"&"):$+(mt+"=redacted&")}}else $=null;else $=V;return"XMLHTTP REQ ("+I+") [attempt "+O+"]: "+p+`
`+_+`
`+$})}function D2(u,p,_,I,O,V,$){u.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+O+"]: "+p+`
`+_+`
`+V+" "+$})}function vs(u,p,_,I){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+O2(u,_)+(I?" "+I:"")})}function M2(u,p){u.info(function(){return"TIMEOUT: "+p})}Mo.prototype.info=function(){};function O2(u,p){if(!u.g)return p;if(!p)return null;try{var _=JSON.parse(p);if(_){for(u=0;u<_.length;u++)if(Array.isArray(_[u])){var I=_[u];if(!(2>I.length)){var O=I[1];if(Array.isArray(O)&&!(1>O.length)){var V=O[0];if(V!="noop"&&V!="stop"&&V!="close")for(var $=1;$<O.length;$++)O[$]=""}}}}return Dd(_)}catch{return p}}var Xl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},x_={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Vd;function Jl(){}y(Jl,Md),Jl.prototype.g=function(){return new XMLHttpRequest},Jl.prototype.i=function(){return{}},Vd=new Jl;function Ai(u,p,_,I){this.j=u,this.i=p,this.l=_,this.R=I||1,this.U=new Co(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new E_}function E_(){this.i=null,this.g="",this.h=!1}var T_={},Fd={};function jd(u,p,_){u.L=1,u.v=nc(Gn(p)),u.m=_,u.P=!0,b_(u,null)}function b_(u,p){u.F=Date.now(),Zl(u),u.A=Gn(u.v);var _=u.A,I=u.R;Array.isArray(I)||(I=[String(I)]),F_(_.i,"t",I),u.C=0,_=u.j.J,u.h=new E_,u.g=nv(u.j,_?p:null,!u.m),0<u.O&&(u.M=new A2(f(u.Y,u,u.g),u.O)),p=u.U,_=u.g,I=u.ca;var O="readystatechange";Array.isArray(O)||(O&&(f_[0]=O.toString()),O=f_);for(var V=0;V<O.length;V++){var $=a_(_,O[V],I||p.handleEvent,!1,p.h||p);if(!$)break;p.g[$.key]=$}p=u.H?E(u.H):{},u.m?(u.u||(u.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,p)):(u.u="GET",u.g.ea(u.A,u.u,null,p)),No(),N2(u.i,u.u,u.A,u.l,u.R,u.m)}Ai.prototype.ca=function(u){u=u.target;const p=this.M;p&&Qn(u)==3?p.j():this.Y(u)},Ai.prototype.Y=function(u){try{if(u==this.g)e:{const yt=Qn(this.g);var p=this.g.Ba();const Es=this.g.Z();if(!(3>yt)&&(yt!=3||this.g&&(this.h.h||this.g.oa()||W_(this.g)))){this.J||yt!=4||p==7||(p==8||0>=Es?No(3):No(2)),Ud(this);var _=this.g.Z();this.X=_;t:if(S_(this)){var I=W_(this.g);u="";var O=I.length,V=Qn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ir(this),Oo(this);var $="";break t}this.h.i=new a.TextDecoder}for(p=0;p<O;p++)this.h.h=!0,u+=this.h.i.decode(I[p],{stream:!(V&&p==O-1)});I.length=0,this.h.g+=u,this.C=0,$=this.h.g}else $=this.g.oa();if(this.o=_==200,D2(this.i,this.u,this.A,this.l,this.R,yt,_),this.o){if(this.T&&!this.K){t:{if(this.g){var Se,at=this.g;if((Se=at.g?at.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(Se)){var me=Se;break t}}me=null}if(_=me)vs(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,zd(this,_);else{this.o=!1,this.s=3,Rt(12),Ir(this),Oo(this);break e}}if(this.P){_=!0;let pn;for(;!this.J&&this.C<$.length;)if(pn=L2(this,$),pn==Fd){yt==4&&(this.s=4,Rt(14),_=!1),vs(this.i,this.l,null,"[Incomplete Response]");break}else if(pn==T_){this.s=4,Rt(15),vs(this.i,this.l,$,"[Invalid Chunk]"),_=!1;break}else vs(this.i,this.l,pn,null),zd(this,pn);if(S_(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),yt!=4||$.length!=0||this.h.h||(this.s=1,Rt(16),_=!1),this.o=this.o&&_,!_)vs(this.i,this.l,$,"[Invalid Chunked Response]"),Ir(this),Oo(this);else if(0<$.length&&!this.W){this.W=!0;var mt=this.j;mt.g==this&&mt.ba&&!mt.M&&(mt.j.info("Great, no buffering proxy detected. Bytes received: "+$.length),Kd(mt),mt.M=!0,Rt(11))}}else vs(this.i,this.l,$,null),zd(this,$);yt==4&&Ir(this),this.o&&!this.J&&(yt==4?J_(this.j,this):(this.o=!1,Zl(this)))}else Z2(this.g),_==400&&0<$.indexOf("Unknown SID")?(this.s=3,Rt(12)):(this.s=0,Rt(13)),Ir(this),Oo(this)}}}catch{}finally{}};function S_(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function L2(u,p){var _=u.C,I=p.indexOf(`
`,_);return I==-1?Fd:(_=Number(p.substring(_,I)),isNaN(_)?T_:(I+=1,I+_>p.length?Fd:(p=p.slice(I,I+_),u.C=I+_,p)))}Ai.prototype.cancel=function(){this.J=!0,Ir(this)};function Zl(u){u.S=Date.now()+u.I,I_(u,u.I)}function I_(u,p){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Do(f(u.ba,u),p)}function Ud(u){u.B&&(a.clearTimeout(u.B),u.B=null)}Ai.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(M2(this.i,this.A),this.L!=2&&(No(),Rt(17)),Ir(this),this.s=2,Oo(this)):I_(this,this.S-u)};function Oo(u){u.j.G==0||u.J||J_(u.j,u)}function Ir(u){Ud(u);var p=u.M;p&&typeof p.ma=="function"&&p.ma(),u.M=null,p_(u.U),u.g&&(p=u.g,u.g=null,p.abort(),p.ma())}function zd(u,p){try{var _=u.j;if(_.G!=0&&(_.g==u||Bd(_.h,u))){if(!u.K&&Bd(_.h,u)&&_.G==3){try{var I=_.Da.g.parse(p)}catch{I=null}if(Array.isArray(I)&&I.length==3){var O=I;if(O[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<u.F)lc(_),oc(_);else break e;qd(_),Rt(18)}}else _.za=O[1],0<_.za-_.T&&37500>O[2]&&_.F&&_.v==0&&!_.C&&(_.C=Do(f(_.Za,_),6e3));if(1>=A_(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Pr(_,11)}else if((u.K||_.g==u)&&lc(_),!w(p))for(O=_.Da.g.parse(p),p=0;p<O.length;p++){let me=O[p];if(_.T=me[0],me=me[1],_.G==2)if(me[0]=="c"){_.K=me[1],_.ia=me[2];const mt=me[3];mt!=null&&(_.la=mt,_.j.info("VER="+_.la));const yt=me[4];yt!=null&&(_.Aa=yt,_.j.info("SVER="+_.Aa));const Es=me[5];Es!=null&&typeof Es=="number"&&0<Es&&(I=1.5*Es,_.L=I,_.j.info("backChannelRequestTimeoutMs_="+I)),I=_;const pn=u.g;if(pn){const uc=pn.g?pn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(uc){var V=I.h;V.g||uc.indexOf("spdy")==-1&&uc.indexOf("quic")==-1&&uc.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&($d(V,V.h),V.h=null))}if(I.D){const Gd=pn.g?pn.g.getResponseHeader("X-HTTP-Session-Id"):null;Gd&&(I.ya=Gd,Pe(I.I,I.D,Gd))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-u.F,_.j.info("Handshake RTT: "+_.R+"ms")),I=_;var $=u;if(I.qa=tv(I,I.J?I.ia:null,I.W),$.K){C_(I.h,$);var Se=$,at=I.L;at&&(Se.I=at),Se.B&&(Ud(Se),Zl(Se)),I.g=$}else Y_(I);0<_.i.length&&ac(_)}else me[0]!="stop"&&me[0]!="close"||Pr(_,7);else _.G==3&&(me[0]=="stop"||me[0]=="close"?me[0]=="stop"?Pr(_,7):Wd(_):me[0]!="noop"&&_.l&&_.l.ta(me),_.v=0)}}No(4)}catch{}}var V2=class{constructor(u,p){this.g=u,this.map=p}};function k_(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function P_(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function A_(u){return u.h?1:u.g?u.g.size:0}function Bd(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function $d(u,p){u.g?u.g.add(p):u.h=p}function C_(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}k_.prototype.cancel=function(){if(this.i=R_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function R_(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const _ of u.g.values())p=p.concat(_.D);return p}return x(u.i)}function F2(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var p=[],_=u.length,I=0;I<_;I++)p.push(u[I]);return p}p=[],_=0;for(I in u)p[_++]=u[I];return p}function j2(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var p=[];u=u.length;for(var _=0;_<u;_++)p.push(_);return p}p=[],_=0;for(const I in u)p[_++]=I;return p}}}function N_(u,p){if(u.forEach&&typeof u.forEach=="function")u.forEach(p,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,p,void 0);else for(var _=j2(u),I=F2(u),O=I.length,V=0;V<O;V++)p.call(void 0,I[V],_&&_[V],u)}var D_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function U2(u,p){if(u){u=u.split("&");for(var _=0;_<u.length;_++){var I=u[_].indexOf("="),O=null;if(0<=I){var V=u[_].substring(0,I);O=u[_].substring(I+1)}else V=u[_];p(V,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function kr(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof kr){this.h=u.h,ec(this,u.j),this.o=u.o,this.g=u.g,tc(this,u.s),this.l=u.l;var p=u.i,_=new Fo;_.i=p.i,p.g&&(_.g=new Map(p.g),_.h=p.h),M_(this,_),this.m=u.m}else u&&(p=String(u).match(D_))?(this.h=!1,ec(this,p[1]||"",!0),this.o=Lo(p[2]||""),this.g=Lo(p[3]||"",!0),tc(this,p[4]),this.l=Lo(p[5]||"",!0),M_(this,p[6]||"",!0),this.m=Lo(p[7]||"")):(this.h=!1,this.i=new Fo(null,this.h))}kr.prototype.toString=function(){var u=[],p=this.j;p&&u.push(Vo(p,O_,!0),":");var _=this.g;return(_||p=="file")&&(u.push("//"),(p=this.o)&&u.push(Vo(p,O_,!0),"@"),u.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&u.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(Vo(_,_.charAt(0)=="/"?$2:B2,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",Vo(_,W2)),u.join("")};function Gn(u){return new kr(u)}function ec(u,p,_){u.j=_?Lo(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function tc(u,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);u.s=p}else u.s=null}function M_(u,p,_){p instanceof Fo?(u.i=p,q2(u.i,u.h)):(_||(p=Vo(p,H2)),u.i=new Fo(p,u.h))}function Pe(u,p,_){u.i.set(p,_)}function nc(u){return Pe(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Lo(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Vo(u,p,_){return typeof u=="string"?(u=encodeURI(u).replace(p,z2),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function z2(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var O_=/[#\/\?@]/g,B2=/[#\?:]/g,$2=/[#\?]/g,H2=/[#\?@]/g,W2=/#/g;function Fo(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function Ci(u){u.g||(u.g=new Map,u.h=0,u.i&&U2(u.i,function(p,_){u.add(decodeURIComponent(p.replace(/\+/g," ")),_)}))}t=Fo.prototype,t.add=function(u,p){Ci(this),this.i=null,u=ws(this,u);var _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(p),this.h+=1,this};function L_(u,p){Ci(u),p=ws(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function V_(u,p){return Ci(u),p=ws(u,p),u.g.has(p)}t.forEach=function(u,p){Ci(this),this.g.forEach(function(_,I){_.forEach(function(O){u.call(p,O,I,this)},this)},this)},t.na=function(){Ci(this);const u=Array.from(this.g.values()),p=Array.from(this.g.keys()),_=[];for(let I=0;I<p.length;I++){const O=u[I];for(let V=0;V<O.length;V++)_.push(p[I])}return _},t.V=function(u){Ci(this);let p=[];if(typeof u=="string")V_(this,u)&&(p=p.concat(this.g.get(ws(this,u))));else{u=Array.from(this.g.values());for(let _=0;_<u.length;_++)p=p.concat(u[_])}return p},t.set=function(u,p){return Ci(this),this.i=null,u=ws(this,u),V_(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},t.get=function(u,p){return u?(u=this.V(u),0<u.length?String(u[0]):p):p};function F_(u,p,_){L_(u,p),0<_.length&&(u.i=null,u.g.set(ws(u,p),x(_)),u.h+=_.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(var _=0;_<p.length;_++){var I=p[_];const V=encodeURIComponent(String(I)),$=this.V(I);for(I=0;I<$.length;I++){var O=V;$[I]!==""&&(O+="="+encodeURIComponent(String($[I]))),u.push(O)}}return this.i=u.join("&")};function ws(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function q2(u,p){p&&!u.j&&(Ci(u),u.i=null,u.g.forEach(function(_,I){var O=I.toLowerCase();I!=O&&(L_(this,I),F_(this,O,_))},u)),u.j=p}function K2(u,p){const _=new Mo;if(a.Image){const I=new Image;I.onload=g(Ri,_,"TestLoadImage: loaded",!0,p,I),I.onerror=g(Ri,_,"TestLoadImage: error",!1,p,I),I.onabort=g(Ri,_,"TestLoadImage: abort",!1,p,I),I.ontimeout=g(Ri,_,"TestLoadImage: timeout",!1,p,I),a.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=u}else p(!1)}function G2(u,p){const _=new Mo,I=new AbortController,O=setTimeout(()=>{I.abort(),Ri(_,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:I.signal}).then(V=>{clearTimeout(O),V.ok?Ri(_,"TestPingServer: ok",!0,p):Ri(_,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(O),Ri(_,"TestPingServer: error",!1,p)})}function Ri(u,p,_,I,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),I(_)}catch{}}function Q2(){this.g=new R2}function Y2(u,p,_){const I=_||"";try{N_(u,function(O,V){let $=O;c(O)&&($=Dd(O)),p.push(I+V+"="+encodeURIComponent($))})}catch(O){throw p.push(I+"type="+encodeURIComponent("_badmap")),O}}function ic(u){this.l=u.Ub||null,this.j=u.eb||!1}y(ic,Md),ic.prototype.g=function(){return new rc(this.l,this.j)},ic.prototype.i=function(u){return function(){return u}}({});function rc(u,p){gt.call(this),this.D=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}y(rc,gt),t=rc.prototype,t.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=p,this.readyState=1,Uo(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(p.body=u),(this.D||a).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,jo(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Uo(this)),this.g&&(this.readyState=3,Uo(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;j_(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function j_(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?jo(this):Uo(this),this.readyState==3&&j_(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,jo(this))},t.Qa=function(u){this.g&&(this.response=u,jo(this))},t.ga=function(){this.g&&jo(this)};function jo(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Uo(u)}t.setRequestHeader=function(u,p){this.u.append(u,p)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var _=p.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=p.next();return u.join(`\r
`)};function Uo(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(rc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function U_(u){let p="";return M(u,function(_,I){p+=I,p+=":",p+=_,p+=`\r
`}),p}function Hd(u,p,_){e:{for(I in _){var I=!1;break e}I=!0}I||(_=U_(_),typeof u=="string"?_!=null&&encodeURIComponent(String(_)):Pe(u,p,_))}function Be(u){gt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}y(Be,gt);var X2=/^https?$/i,J2=["POST","PUT"];t=Be.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,p,_,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Vd.g(),this.v=this.o?g_(this.o):g_(Vd),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(V){z_(this,V);return}if(u=_||"",_=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var O in I)_.set(O,I[O]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const V of I.keys())_.set(V,I.get(V));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(_.keys()).find(V=>V.toLowerCase()=="content-type"),O=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(J2,p,void 0))||I||O||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,$]of _)this.g.setRequestHeader(V,$);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{H_(this),this.u=!0,this.g.send(u),this.u=!1}catch(V){z_(this,V)}};function z_(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.m=5,B_(u),sc(u)}function B_(u){u.A||(u.A=!0,Ct(u,"complete"),Ct(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Ct(this,"complete"),Ct(this,"abort"),sc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),sc(this,!0)),Be.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?$_(this):this.bb())},t.bb=function(){$_(this)};function $_(u){if(u.h&&typeof o<"u"&&(!u.v[1]||Qn(u)!=4||u.Z()!=2)){if(u.u&&Qn(u)==4)h_(u.Ea,0,u);else if(Ct(u,"readystatechange"),Qn(u)==4){u.h=!1;try{const $=u.Z();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var _;if(!(_=p)){var I;if(I=$===0){var O=String(u.D).match(D_)[1]||null;!O&&a.self&&a.self.location&&(O=a.self.location.protocol.slice(0,-1)),I=!X2.test(O?O.toLowerCase():"")}_=I}if(_)Ct(u,"complete"),Ct(u,"success");else{u.m=6;try{var V=2<Qn(u)?u.g.statusText:""}catch{V=""}u.l=V+" ["+u.Z()+"]",B_(u)}}finally{sc(u)}}}}function sc(u,p){if(u.g){H_(u);const _=u.g,I=u.v[0]?()=>{}:null;u.g=null,u.v=null,p||Ct(u,"ready");try{_.onreadystatechange=I}catch{}}}function H_(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function Qn(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<Qn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),C2(p)}};function W_(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Z2(u){const p={};u=(u.g&&2<=Qn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<u.length;I++){if(w(u[I]))continue;var _=C(u[I]);const O=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const V=p[O]||[];p[O]=V,V.push(_)}S(p,function(I){return I.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function zo(u,p,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||p}function q_(u){this.Aa=0,this.i=[],this.j=new Mo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=zo("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=zo("baseRetryDelayMs",5e3,u),this.cb=zo("retryDelaySeedMs",1e4,u),this.Wa=zo("forwardChannelMaxRetries",2,u),this.wa=zo("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new k_(u&&u.concurrentRequestLimit),this.Da=new Q2,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=q_.prototype,t.la=8,t.G=1,t.connect=function(u,p,_,I){Rt(0),this.W=u,this.H=p||{},_&&I!==void 0&&(this.H.OSID=_,this.H.OAID=I),this.F=this.X,this.I=tv(this,null,this.W),ac(this)};function Wd(u){if(K_(u),u.G==3){var p=u.U++,_=Gn(u.I);if(Pe(_,"SID",u.K),Pe(_,"RID",p),Pe(_,"TYPE","terminate"),Bo(u,_),p=new Ai(u,u.j,p),p.L=2,p.v=nc(Gn(_)),_=!1,a.navigator&&a.navigator.sendBeacon)try{_=a.navigator.sendBeacon(p.v.toString(),"")}catch{}!_&&a.Image&&(new Image().src=p.v,_=!0),_||(p.g=nv(p.j,null),p.g.ea(p.v)),p.F=Date.now(),Zl(p)}ev(u)}function oc(u){u.g&&(Kd(u),u.g.cancel(),u.g=null)}function K_(u){oc(u),u.u&&(a.clearTimeout(u.u),u.u=null),lc(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function ac(u){if(!P_(u.h)&&!u.s){u.s=!0;var p=u.Ga;Z||G(),U||(Z(),U=!0),B.add(p,u),u.B=0}}function ek(u,p){return A_(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=p.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Do(f(u.Ga,u,p),Z_(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const O=new Ai(this,this.j,u);let V=this.o;if(this.S&&(V?(V=E(V),k(V,this.S)):V=this.S),this.m!==null||this.O||(O.H=V,V=null),this.P)e:{for(var p=0,_=0;_<this.i.length;_++){t:{var I=this.i[_];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(p+=I,4096<p){p=_;break e}if(p===4096||_===this.i.length-1){p=_+1;break e}}p=1e3}else p=1e3;p=Q_(this,O,p),_=Gn(this.I),Pe(_,"RID",u),Pe(_,"CVER",22),this.D&&Pe(_,"X-HTTP-Session-Id",this.D),Bo(this,_),V&&(this.O?p="headers="+encodeURIComponent(String(U_(V)))+"&"+p:this.m&&Hd(_,this.m,V)),$d(this.h,O),this.Ua&&Pe(_,"TYPE","init"),this.P?(Pe(_,"$req",p),Pe(_,"SID","null"),O.T=!0,jd(O,_,null)):jd(O,_,p),this.G=2}}else this.G==3&&(u?G_(this,u):this.i.length==0||P_(this.h)||G_(this))};function G_(u,p){var _;p?_=p.l:_=u.U++;const I=Gn(u.I);Pe(I,"SID",u.K),Pe(I,"RID",_),Pe(I,"AID",u.T),Bo(u,I),u.m&&u.o&&Hd(I,u.m,u.o),_=new Ai(u,u.j,_,u.B+1),u.m===null&&(_.H=u.o),p&&(u.i=p.D.concat(u.i)),p=Q_(u,_,1e3),_.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),$d(u.h,_),jd(_,I,p)}function Bo(u,p){u.H&&M(u.H,function(_,I){Pe(p,I,_)}),u.l&&N_({},function(_,I){Pe(p,I,_)})}function Q_(u,p,_){_=Math.min(u.i.length,_);var I=u.l?f(u.l.Na,u.l,u):null;e:{var O=u.i;let V=-1;for(;;){const $=["count="+_];V==-1?0<_?(V=O[0].g,$.push("ofs="+V)):V=0:$.push("ofs="+V);let Se=!0;for(let at=0;at<_;at++){let me=O[at].g;const mt=O[at].map;if(me-=V,0>me)V=Math.max(0,O[at].g-100),Se=!1;else try{Y2(mt,$,"req"+me+"_")}catch{I&&I(mt)}}if(Se){I=$.join("&");break e}}}return u=u.i.splice(0,_),p.D=u,I}function Y_(u){if(!u.g&&!u.u){u.Y=1;var p=u.Fa;Z||G(),U||(Z(),U=!0),B.add(p,u),u.v=0}}function qd(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Do(f(u.Fa,u),Z_(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,X_(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Do(f(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Rt(10),oc(this),X_(this))};function Kd(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function X_(u){u.g=new Ai(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var p=Gn(u.qa);Pe(p,"RID","rpc"),Pe(p,"SID",u.K),Pe(p,"AID",u.T),Pe(p,"CI",u.F?"0":"1"),!u.F&&u.ja&&Pe(p,"TO",u.ja),Pe(p,"TYPE","xmlhttp"),Bo(u,p),u.m&&u.o&&Hd(p,u.m,u.o),u.L&&(u.g.I=u.L);var _=u.g;u=u.ia,_.L=1,_.v=nc(Gn(p)),_.m=null,_.P=!0,b_(_,u)}t.Za=function(){this.C!=null&&(this.C=null,oc(this),qd(this),Rt(19))};function lc(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function J_(u,p){var _=null;if(u.g==p){lc(u),Kd(u),u.g=null;var I=2}else if(Bd(u.h,p))_=p.D,C_(u.h,p),I=1;else return;if(u.G!=0){if(p.o)if(I==1){_=p.m?p.m.length:0,p=Date.now()-p.F;var O=u.B;I=Yl(),Ct(I,new w_(I,_)),ac(u)}else Y_(u);else if(O=p.s,O==3||O==0&&0<p.X||!(I==1&&ek(u,p)||I==2&&qd(u)))switch(_&&0<_.length&&(p=u.h,p.i=p.i.concat(_)),O){case 1:Pr(u,5);break;case 4:Pr(u,10);break;case 3:Pr(u,6);break;default:Pr(u,2)}}}function Z_(u,p){let _=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(_*=2),_*p}function Pr(u,p){if(u.j.info("Error code "+p),p==2){var _=f(u.fb,u),I=u.Xa;const O=!I;I=new kr(I||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||ec(I,"https"),nc(I),O?K2(I.toString(),_):G2(I.toString(),_)}else Rt(2);u.G=0,u.l&&u.l.sa(p),ev(u),K_(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Rt(2)):(this.j.info("Failed to ping google.com"),Rt(1))};function ev(u){if(u.G=0,u.ka=[],u.l){const p=R_(u.h);(p.length!=0||u.i.length!=0)&&(T(u.ka,p),T(u.ka,u.i),u.h.i.length=0,x(u.i),u.i.length=0),u.l.ra()}}function tv(u,p,_){var I=_ instanceof kr?Gn(_):new kr(_);if(I.g!="")p&&(I.g=p+"."+I.g),tc(I,I.s);else{var O=a.location;I=O.protocol,p=p?p+"."+O.hostname:O.hostname,O=+O.port;var V=new kr(null);I&&ec(V,I),p&&(V.g=p),O&&tc(V,O),_&&(V.l=_),I=V}return _=u.D,p=u.ya,_&&p&&Pe(I,_,p),Pe(I,"VER",u.la),Bo(u,I),I}function nv(u,p,_){if(p&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Ca&&!u.pa?new Be(new ic({eb:_})):new Be(u.pa),p.Ha(u.J),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function iv(){}t=iv.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function cc(){}cc.prototype.g=function(u,p){return new Qt(u,p)};function Qt(u,p){gt.call(this),this.g=new q_(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(u?u["X-WebChannel-Client-Profile"]=p.va:u={"X-WebChannel-Client-Profile":p.va}),this.g.S=u,(u=p&&p.Sb)&&!w(u)&&(this.g.m=u),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!w(p)&&(this.g.D=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new xs(this)}y(Qt,gt),Qt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Qt.prototype.close=function(){Wd(this.g)},Qt.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.u&&(_={},_.__data__=Dd(u),u=_);p.i.push(new V2(p.Ya++,u)),p.G==3&&ac(p)},Qt.prototype.N=function(){this.g.l=null,delete this.j,Wd(this.g),delete this.g,Qt.aa.N.call(this)};function rv(u){Od.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(const _ in p){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}y(rv,Od);function sv(){Ld.call(this),this.status=1}y(sv,Ld);function xs(u){this.g=u}y(xs,iv),xs.prototype.ua=function(){Ct(this.g,"a")},xs.prototype.ta=function(u){Ct(this.g,new rv(u))},xs.prototype.sa=function(u){Ct(this.g,new sv)},xs.prototype.ra=function(){Ct(this.g,"b")},cc.prototype.createWebChannel=cc.prototype.g,Qt.prototype.send=Qt.prototype.o,Qt.prototype.open=Qt.prototype.m,Qt.prototype.close=Qt.prototype.close,Ub=function(){return new cc},jb=function(){return Yl()},Fb=Sr,rg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Xl.NO_ERROR=0,Xl.TIMEOUT=8,Xl.HTTP_ERROR=6,pu=Xl,x_.COMPLETE="complete",Vb=x_,m_.EventType=Ro,Ro.OPEN="a",Ro.CLOSE="b",Ro.ERROR="c",Ro.MESSAGE="d",gt.prototype.listen=gt.prototype.K,ua=m_,Be.prototype.listenOnce=Be.prototype.L,Be.prototype.getLastError=Be.prototype.Ka,Be.prototype.getLastErrorCode=Be.prototype.Ba,Be.prototype.getStatus=Be.prototype.Z,Be.prototype.getResponseJson=Be.prototype.Oa,Be.prototype.getResponseText=Be.prototype.oa,Be.prototype.send=Be.prototype.ea,Be.prototype.setWithCredentials=Be.prototype.Ha,Lb=Be}).apply(typeof Cc<"u"?Cc:typeof self<"u"?self:typeof window<"u"?window:{});const J0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Et.UNAUTHENTICATED=new Et(null),Et.GOOGLE_CREDENTIALS=new Et("google-credentials-uid"),Et.FIRST_PARTY=new Et("first-party-uid"),Et.MOCK_USER=new Et("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ko="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rs=new Lm("@firebase/firestore");function Xo(){return rs.logLevel}function K(t,...e){if(rs.logLevel<=de.DEBUG){const n=e.map(Gm);rs.debug(`Firestore (${ko}): ${t}`,...n)}}function Ei(t,...e){if(rs.logLevel<=de.ERROR){const n=e.map(Gm);rs.error(`Firestore (${ko}): ${t}`,...n)}}function uo(t,...e){if(rs.logLevel<=de.WARN){const n=e.map(Gm);rs.warn(`Firestore (${ko}): ${t}`,...n)}}function Gm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function te(t="Unexpected state"){const e=`FIRESTORE (${ko}) INTERNAL ASSERTION FAILED: `+t;throw Ei(e),new Error(e)}function xe(t,e){t||te()}function ie(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class q extends qn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class DM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Et.UNAUTHENTICATED))}shutdown(){}}class MM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class OM{constructor(e){this.t=e,this.currentUser=Et.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){xe(this.o===void 0);let i=this.i;const r=l=>this.i!==i?(i=this.i,n(l)):Promise.resolve();let s=new gi;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new gi,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await r(this.currentUser)})},a=l=>{K("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(K("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new gi)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(K("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(xe(typeof i.accessToken=="string"),new zb(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return xe(e===null||typeof e=="string"),new Et(e)}}class LM{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=Et.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class VM{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new LM(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Et.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class FM{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class jM{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){xe(this.o===void 0);const i=s=>{s.error!=null&&K("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,K("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};const r=s=>{K("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?r(s):K("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(xe(typeof n.token=="string"),this.R=n.token,new FM(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UM(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const r=UM(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<n&&(i+=e.charAt(r[s]%e.length))}return i}}function ye(t,e){return t<e?-1:t>e?1:0}function ho(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new q(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new q(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new q(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new q(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return nt.fromMillis(Date.now())}static fromDate(e){return nt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new nt(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ye(this.nanoseconds,e.nanoseconds):ye(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ne(e)}static min(){return new ne(new nt(0,0))}static max(){return new ne(new nt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(e,n,i){n===void 0?n=0:n>e.length&&te(),i===void 0?i=e.length-n:i>e.length-n&&te(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return al.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof al?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const s=e.get(r),o=n.get(r);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ce extends al{construct(e,n,i){return new Ce(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new q(F.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new Ce(n)}static emptyPath(){return new Ce([])}}const zM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ut extends al{construct(e,n,i){return new ut(e,n,i)}static isValidIdentifier(e){return zM.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ut.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new ut(["__name__"])}static fromServerFormat(e){const n=[];let i="",r=0;const s=()=>{if(i.length===0)throw new q(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let o=!1;for(;r<e.length;){const a=e[r];if(a==="\\"){if(r+1===e.length)throw new q(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new q(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=l,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(i+=a,r++):(s(),r++)}if(s(),o)throw new q(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ut(n)}static emptyPath(){return new ut([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(e){this.path=e}static fromPath(e){return new X(Ce.fromString(e))}static fromName(e){return new X(Ce.fromString(e).popFirst(5))}static empty(){return new X(Ce.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ce.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ce.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new X(new Ce(e.slice()))}}function BM(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=ne.fromTimestamp(i===1e9?new nt(n+1,0):new nt(n,i));return new pr(r,X.empty(),e)}function $M(t){return new pr(t.readTime,t.key,-1)}class pr{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new pr(ne.min(),X.empty(),-1)}static max(){return new pr(ne.max(),X.empty(),-1)}}function HM(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=X.comparator(t.documentKey,e.documentKey),n!==0?n:ye(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class qM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ll(t){if(t.code!==F.FAILED_PRECONDITION||t.message!==WM)throw t;K("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&te(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new j((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(n,s).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof j?n:j.resolve(n)}catch(n){return j.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):j.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):j.reject(n)}static resolve(e){return new j((n,i)=>{n(e)})}static reject(e){return new j((n,i)=>{i(e)})}static waitFor(e){return new j((n,i)=>{let r=0,s=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++s,o&&s===r&&n()},l=>i(l))}),o=!0,s===r&&n()})}static or(e){let n=j.resolve(!1);for(const i of e)n=n.next(r=>r?j.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,s)=>{i.push(n.call(this,r,s))}),this.waitFor(i)}static mapArray(e,n){return new j((i,r)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(h=>{o[c]=h,++a,a===s&&i(o)},h=>r(h))}})}static doWhile(e,n){return new j((i,r)=>{const s=()=>{e()===!0?n().next(()=>{s()},r):i()};s()})}}function KM(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Vl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ie(i),this.se=i=>n.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Qm.oe=-1;function Xh(t){return t==null}function ch(t){return t===0&&1/t==-1/0}function GM(t){return typeof t=="number"&&Number.isInteger(t)&&!ch(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function gs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function $b(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(e,n){this.comparator=e,this.root=n||ct.EMPTY}insert(e,n){return new ze(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ct.BLACK,null,null))}remove(e){return new ze(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ct.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Rc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Rc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Rc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Rc(this.root,e,this.comparator,!0)}}class Rc{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?i(e.key,n):1,n&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ct{constructor(e,n,i,r,s){this.key=e,this.value=n,this.color=i??ct.RED,this.left=r??ct.EMPTY,this.right=s??ct.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,s){return new ct(e??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,n,i),null):s===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ct.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return ct.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ct.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ct.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw te();const e=this.left.check();if(e!==this.right.check())throw te();return e+(this.isRed()?0:1)}}ct.EMPTY=null,ct.RED=!0,ct.BLACK=!1;ct.EMPTY=new class{constructor(){this.size=0}get key(){throw te()}get value(){throw te()}get color(){throw te()}get left(){throw te()}get right(){throw te()}copy(e,n,i,r,s){return this}insert(e,n,i){return new ct(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e){this.comparator=e,this.data=new ze(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new ew(this.data.getIterator())}getIteratorFrom(e){return new ew(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof dt)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new dt(this.comparator);return n.data=e,n}}class ew{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.fields=e,e.sort(ut.comparator)}static empty(){return new en([])}unionWith(e){let n=new dt(ut.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new en(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ho(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Hb("Invalid base64 string: "+s):s}}(e);return new pt(n)}static fromUint8Array(e){const n=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(e);return new pt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ye(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}pt.EMPTY_BYTE_STRING=new pt("");const QM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gr(t){if(xe(!!t),typeof t=="string"){let e=0;const n=QM.exec(t);if(xe(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Ke(t.seconds),nanos:Ke(t.nanos)}}function Ke(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ss(t){return typeof t=="string"?pt.fromBase64String(t):pt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ym(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Xm(t){const e=t.mapValue.fields.__previous_value__;return Ym(e)?Xm(e):e}function ll(t){const e=gr(t.mapValue.fields.__local_write_time__.timestampValue);return new nt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YM{constructor(e,n,i,r,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class cl{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new cl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof cl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nc={mapValue:{}};function os(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ym(t)?4:JM(t)?9007199254740991:XM(t)?10:11:te()}function Wn(t,e){if(t===e)return!0;const n=os(t);if(n!==os(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ll(t).isEqual(ll(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const o=gr(r.timestampValue),a=gr(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,s){return ss(r.bytesValue).isEqual(ss(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,s){return Ke(r.geoPointValue.latitude)===Ke(s.geoPointValue.latitude)&&Ke(r.geoPointValue.longitude)===Ke(s.geoPointValue.longitude)}(t,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Ke(r.integerValue)===Ke(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const o=Ke(r.doubleValue),a=Ke(s.doubleValue);return o===a?ch(o)===ch(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return ho(t.arrayValue.values||[],e.arrayValue.values||[],Wn);case 10:case 11:return function(r,s){const o=r.mapValue.fields||{},a=s.mapValue.fields||{};if(Z0(o)!==Z0(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Wn(o[l],a[l])))return!1;return!0}(t,e);default:return te()}}function ul(t,e){return(t.values||[]).find(n=>Wn(n,e))!==void 0}function fo(t,e){if(t===e)return 0;const n=os(t),i=os(e);if(n!==i)return ye(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return ye(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Ke(s.integerValue||s.doubleValue),l=Ke(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return tw(t.timestampValue,e.timestampValue);case 4:return tw(ll(t),ll(e));case 5:return ye(t.stringValue,e.stringValue);case 6:return function(s,o){const a=ss(s),l=ss(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=ye(a[c],l[c]);if(h!==0)return h}return ye(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=ye(Ke(s.latitude),Ke(o.latitude));return a!==0?a:ye(Ke(s.longitude),Ke(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return nw(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,c,h;const d=s.fields||{},f=o.fields||{},g=(a=d.value)===null||a===void 0?void 0:a.arrayValue,y=(l=f.value)===null||l===void 0?void 0:l.arrayValue,x=ye(((c=g==null?void 0:g.values)===null||c===void 0?void 0:c.length)||0,((h=y==null?void 0:y.values)===null||h===void 0?void 0:h.length)||0);return x!==0?x:nw(g,y)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Nc.mapValue&&o===Nc.mapValue)return 0;if(s===Nc.mapValue)return 1;if(o===Nc.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let d=0;d<l.length&&d<h.length;++d){const f=ye(l[d],h[d]);if(f!==0)return f;const g=fo(a[l[d]],c[h[d]]);if(g!==0)return g}return ye(l.length,h.length)}(t.mapValue,e.mapValue);default:throw te()}}function tw(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ye(t,e);const n=gr(t),i=gr(e),r=ye(n.seconds,i.seconds);return r!==0?r:ye(n.nanos,i.nanos)}function nw(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const s=fo(n[r],i[r]);if(s)return s}return ye(n.length,i.length)}function po(t){return sg(t)}function sg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=gr(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ss(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return X.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(const s of n.values||[])r?r=!1:i+=",",i+=sg(s);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",s=!0;for(const o of i)s?s=!1:r+=",",r+=`${o}:${sg(n.fields[o])}`;return r+"}"}(t.mapValue):te()}function iw(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function og(t){return!!t&&"integerValue"in t}function Jm(t){return!!t&&"arrayValue"in t}function rw(t){return!!t&&"nullValue"in t}function sw(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function gu(t){return!!t&&"mapValue"in t}function XM(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Ca(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return gs(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=Ca(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ca(t.arrayValue.values[n]);return e}return Object.assign({},t)}function JM(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.value=e}static empty(){return new zt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!gu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ca(n)}setAll(e){let n=ut.emptyPath(),i={},r=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,i,r),i={},r=[],n=a.popLast()}o?i[a.lastSegment()]=Ca(o):r.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,i,r)}delete(e){const n=this.field(e.popLast());gu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Wn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];gu(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){gs(n,(r,s)=>e[r]=s);for(const r of i)delete e[r]}clone(){return new zt(Ca(this.value))}}function Wb(t){const e=[];return gs(t.fields,(n,i)=>{const r=new ut([n]);if(gu(i)){const s=Wb(i.mapValue).fields;if(s.length===0)e.push(r);else for(const o of s)e.push(r.child(o))}else e.push(r)}),new en(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e,n,i,r,s,o,a){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new bt(e,0,ne.min(),ne.min(),ne.min(),zt.empty(),0)}static newFoundDocument(e,n,i,r){return new bt(e,1,n,ne.min(),i,r,0)}static newNoDocument(e,n){return new bt(e,2,n,ne.min(),ne.min(),zt.empty(),0)}static newUnknownDocument(e,n){return new bt(e,3,n,ne.min(),ne.min(),zt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=zt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=zt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof bt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new bt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(e,n){this.position=e,this.inclusive=n}}function ow(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const s=e[r],o=t.position[r];if(s.field.isKeyField()?i=X.comparator(X.fromName(o.referenceValue),n.key):i=fo(o,n.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function aw(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Wn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{constructor(e,n="asc"){this.field=e,this.dir=n}}function ZM(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qb{}class Je extends qb{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new t4(e,n,i):n==="array-contains"?new r4(e,i):n==="in"?new s4(e,i):n==="not-in"?new o4(e,i):n==="array-contains-any"?new a4(e,i):new Je(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new n4(e,i):new i4(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(fo(n,this.value)):n!==null&&os(this.value)===os(n)&&this.matchesComparison(fo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return te()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class In extends qb{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new In(e,n)}matches(e){return Kb(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Kb(t){return t.op==="and"}function Gb(t){return e4(t)&&Kb(t)}function e4(t){for(const e of t.filters)if(e instanceof In)return!1;return!0}function ag(t){if(t instanceof Je)return t.field.canonicalString()+t.op.toString()+po(t.value);if(Gb(t))return t.filters.map(e=>ag(e)).join(",");{const e=t.filters.map(n=>ag(n)).join(",");return`${t.op}(${e})`}}function Qb(t,e){return t instanceof Je?function(i,r){return r instanceof Je&&i.op===r.op&&i.field.isEqual(r.field)&&Wn(i.value,r.value)}(t,e):t instanceof In?function(i,r){return r instanceof In&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,o,a)=>s&&Qb(o,r.filters[a]),!0):!1}(t,e):void te()}function Yb(t){return t instanceof Je?function(n){return`${n.field.canonicalString()} ${n.op} ${po(n.value)}`}(t):t instanceof In?function(n){return n.op.toString()+" {"+n.getFilters().map(Yb).join(" ,")+"}"}(t):"Filter"}class t4 extends Je{constructor(e,n,i){super(e,n,i),this.key=X.fromName(i.referenceValue)}matches(e){const n=X.comparator(e.key,this.key);return this.matchesComparison(n)}}class n4 extends Je{constructor(e,n){super(e,"in",n),this.keys=Xb("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class i4 extends Je{constructor(e,n){super(e,"not-in",n),this.keys=Xb("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Xb(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>X.fromName(i.referenceValue))}class r4 extends Je{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Jm(n)&&ul(n.arrayValue,this.value)}}class s4 extends Je{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ul(this.value.arrayValue,n)}}class o4 extends Je{constructor(e,n){super(e,"not-in",n)}matches(e){if(ul(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!ul(this.value.arrayValue,n)}}class a4 extends Je{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Jm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>ul(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l4{constructor(e,n=null,i=[],r=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function lw(t,e=null,n=[],i=[],r=null,s=null,o=null){return new l4(t,e,n,i,r,s,o)}function Zm(t){const e=ie(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>ag(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),Xh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>po(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>po(i)).join(",")),e.ue=n}return e.ue}function ey(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!ZM(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Qb(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!aw(t.startAt,e.startAt)&&aw(t.endAt,e.endAt)}function lg(t){return X.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl{constructor(e,n=null,i=[],r=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function c4(t,e,n,i,r,s,o,a){return new Fl(t,e,n,i,r,s,o,a)}function Jh(t){return new Fl(t)}function cw(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Jb(t){return t.collectionGroup!==null}function Ra(t){const e=ie(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new dt(ut.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new hh(s,i))}),n.has(ut.keyField().canonicalString())||e.ce.push(new hh(ut.keyField(),i))}return e.ce}function Bn(t){const e=ie(t);return e.le||(e.le=u4(e,Ra(t))),e.le}function u4(t,e){if(t.limitType==="F")return lw(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const s=r.dir==="desc"?"asc":"desc";return new hh(r.field,s)});const n=t.endAt?new uh(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new uh(t.startAt.position,t.startAt.inclusive):null;return lw(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function cg(t,e){const n=t.filters.concat([e]);return new Fl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function ug(t,e,n){return new Fl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Zh(t,e){return ey(Bn(t),Bn(e))&&t.limitType===e.limitType}function Zb(t){return`${Zm(Bn(t))}|lt:${t.limitType}`}function Ps(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>Yb(r)).join(", ")}]`),Xh(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>po(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>po(r)).join(",")),`Target(${i})`}(Bn(t))}; limitType=${t.limitType})`}function ed(t,e){return e.isFoundDocument()&&function(i,r){const s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):X.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(t,e)&&function(i,r){for(const s of Ra(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(t,e)&&function(i,r){for(const s of i.filters)if(!s.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(o,a,l){const c=ow(o,a,l);return o.inclusive?c<=0:c<0}(i.startAt,Ra(i),r)||i.endAt&&!function(o,a,l){const c=ow(o,a,l);return o.inclusive?c>=0:c>0}(i.endAt,Ra(i),r))}(t,e)}function h4(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function eS(t){return(e,n)=>{let i=!1;for(const r of Ra(t)){const s=d4(r,e,n);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function d4(t,e,n){const i=t.field.isKeyField()?X.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?fo(l,c):te()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return te()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){gs(this.inner,(n,i)=>{for(const[r,s]of i)e(r,s)})}isEmpty(){return $b(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f4=new ze(X.comparator);function Ti(){return f4}const tS=new ze(X.comparator);function ha(...t){let e=tS;for(const n of t)e=e.insert(n.key,n);return e}function nS(t){let e=tS;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function zr(){return Na()}function iS(){return Na()}function Na(){return new Po(t=>t.toString(),(t,e)=>t.isEqual(e))}const p4=new ze(X.comparator),g4=new dt(X.comparator);function ce(...t){let e=g4;for(const n of t)e=e.add(n);return e}const m4=new dt(ye);function y4(){return m4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ty(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ch(e)?"-0":e}}function rS(t){return{integerValue:""+t}}function _4(t,e){return GM(e)?rS(e):ty(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(){this._=void 0}}function v4(t,e,n){return t instanceof hl?function(r,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&Ym(s)&&(s=Xm(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof dl?oS(t,e):t instanceof fl?aS(t,e):function(r,s){const o=sS(r,s),a=uw(o)+uw(r.Pe);return og(o)&&og(r.Pe)?rS(a):ty(r.serializer,a)}(t,e)}function w4(t,e,n){return t instanceof dl?oS(t,e):t instanceof fl?aS(t,e):n}function sS(t,e){return t instanceof dh?function(i){return og(i)||function(s){return!!s&&"doubleValue"in s}(i)}(e)?e:{integerValue:0}:null}class hl extends td{}class dl extends td{constructor(e){super(),this.elements=e}}function oS(t,e){const n=lS(e);for(const i of t.elements)n.some(r=>Wn(r,i))||n.push(i);return{arrayValue:{values:n}}}class fl extends td{constructor(e){super(),this.elements=e}}function aS(t,e){let n=lS(e);for(const i of t.elements)n=n.filter(r=>!Wn(r,i));return{arrayValue:{values:n}}}class dh extends td{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function uw(t){return Ke(t.integerValue||t.doubleValue)}function lS(t){return Jm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x4{constructor(e,n){this.field=e,this.transform=n}}function E4(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof dl&&r instanceof dl||i instanceof fl&&r instanceof fl?ho(i.elements,r.elements,Wn):i instanceof dh&&r instanceof dh?Wn(i.Pe,r.Pe):i instanceof hl&&r instanceof hl}(t.transform,e.transform)}class T4{constructor(e,n){this.version=e,this.transformResults=n}}class hn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new hn}static exists(e){return new hn(void 0,e)}static updateTime(e){return new hn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function mu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class nd{}function cS(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new ny(t.key,hn.none()):new jl(t.key,t.data,hn.none());{const n=t.data,i=zt.empty();let r=new dt(ut.comparator);for(let s of e.fields)if(!r.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?i.delete(s):i.set(s,o),r=r.add(s)}return new Tr(t.key,i,new en(r.toArray()),hn.none())}}function b4(t,e,n){t instanceof jl?function(r,s,o){const a=r.value.clone(),l=dw(r.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Tr?function(r,s,o){if(!mu(r.precondition,s))return void s.convertToUnknownDocument(o.version);const a=dw(r.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(uS(r)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Da(t,e,n,i){return t instanceof jl?function(s,o,a,l){if(!mu(s.precondition,o))return a;const c=s.value.clone(),h=fw(s.fieldTransforms,l,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,i):t instanceof Tr?function(s,o,a,l){if(!mu(s.precondition,o))return a;const c=fw(s.fieldTransforms,l,o),h=o.data;return h.setAll(uS(s)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,i):function(s,o,a){return mu(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function S4(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),s=sS(i.transform,r||null);s!=null&&(n===null&&(n=zt.empty()),n.set(i.field,s))}return n||null}function hw(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&ho(i,r,(s,o)=>E4(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class jl extends nd{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Tr extends nd{constructor(e,n,i,r,s=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function uS(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function dw(t,e,n){const i=new Map;xe(t.length===n.length);for(let r=0;r<n.length;r++){const s=t[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,w4(o,a,n[r]))}return i}function fw(t,e,n){const i=new Map;for(const r of t){const s=r.transform,o=n.data.field(r.field);i.set(r.field,v4(s,o,e))}return i}class ny extends nd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class I4 extends nd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k4{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(e.key)&&b4(s,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=Da(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=Da(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=iS();return this.mutations.forEach(r=>{const s=e.get(r.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(r.key)?null:a;const l=cS(o,a);l!==null&&i.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(ne.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ce())}isEqual(e){return this.batchId===e.batchId&&ho(this.mutations,e.mutations,(n,i)=>hw(n,i))&&ho(this.baseMutations,e.baseMutations,(n,i)=>hw(n,i))}}class iy{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){xe(e.mutations.length===i.length);let r=function(){return p4}();const s=e.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,i[o].version);return new iy(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P4{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A4{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ye,pe;function C4(t){switch(t){default:return te();case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0}}function hS(t){if(t===void 0)return Ei("GRPC error has no .code"),F.UNKNOWN;switch(t){case Ye.OK:return F.OK;case Ye.CANCELLED:return F.CANCELLED;case Ye.UNKNOWN:return F.UNKNOWN;case Ye.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case Ye.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case Ye.INTERNAL:return F.INTERNAL;case Ye.UNAVAILABLE:return F.UNAVAILABLE;case Ye.UNAUTHENTICATED:return F.UNAUTHENTICATED;case Ye.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case Ye.NOT_FOUND:return F.NOT_FOUND;case Ye.ALREADY_EXISTS:return F.ALREADY_EXISTS;case Ye.PERMISSION_DENIED:return F.PERMISSION_DENIED;case Ye.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case Ye.ABORTED:return F.ABORTED;case Ye.OUT_OF_RANGE:return F.OUT_OF_RANGE;case Ye.UNIMPLEMENTED:return F.UNIMPLEMENTED;case Ye.DATA_LOSS:return F.DATA_LOSS;default:return te()}}(pe=Ye||(Ye={}))[pe.OK=0]="OK",pe[pe.CANCELLED=1]="CANCELLED",pe[pe.UNKNOWN=2]="UNKNOWN",pe[pe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",pe[pe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",pe[pe.NOT_FOUND=5]="NOT_FOUND",pe[pe.ALREADY_EXISTS=6]="ALREADY_EXISTS",pe[pe.PERMISSION_DENIED=7]="PERMISSION_DENIED",pe[pe.UNAUTHENTICATED=16]="UNAUTHENTICATED",pe[pe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",pe[pe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",pe[pe.ABORTED=10]="ABORTED",pe[pe.OUT_OF_RANGE=11]="OUT_OF_RANGE",pe[pe.UNIMPLEMENTED=12]="UNIMPLEMENTED",pe[pe.INTERNAL=13]="INTERNAL",pe[pe.UNAVAILABLE=14]="UNAVAILABLE",pe[pe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R4(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N4=new Wr([4294967295,4294967295],0);function pw(t){const e=R4().encode(t),n=new Ob;return n.update(e),new Uint8Array(n.digest())}function gw(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Wr([n,i],0),new Wr([r,s],0)]}class ry{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new da(`Invalid padding: ${n}`);if(i<0)throw new da(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new da(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new da(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Wr.fromNumber(this.Ie)}Ee(e,n,i){let r=e.add(n.multiply(Wr.fromNumber(i)));return r.compare(N4)===1&&(r=new Wr([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=pw(e),[i,r]=gw(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(i,r,s);if(!this.de(o))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new ry(s,r,n);return i.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=pw(e),[i,r]=gw(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(i,r,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class da extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(e,n,i,r,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,Ul.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new id(ne.min(),r,new ze(ye),Ti(),ce())}}class Ul{constructor(e,n,i,r,s){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Ul(i,n,ce(),ce(),ce())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu{constructor(e,n,i,r){this.Re=e,this.removedTargetIds=n,this.key=i,this.Ve=r}}class dS{constructor(e,n){this.targetId=e,this.me=n}}class fS{constructor(e,n,i=pt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class mw{constructor(){this.fe=0,this.ge=_w(),this.pe=pt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ce(),n=ce(),i=ce();return this.ge.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:te()}}),new Ul(this.pe,this.ye,e,n,i)}Ce(){this.we=!1,this.ge=_w()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,xe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class D4{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ti(),this.qe=yw(),this.Qe=new ze(ye)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const i=this.Ge(n);switch(e.state){case 0:this.ze(n)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),i.De(e.resumeToken));break;default:te()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((i,r)=>{this.ze(r)&&n(r)})}He(e){const n=e.targetId,i=e.me.count,r=this.Je(n);if(r){const s=r.target;if(lg(s))if(i===0){const o=new X(s.path);this.Ue(n,o,bt.newNoDocument(o,ne.min()))}else xe(i===1);else{const o=this.Ye(n);if(o!==i){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=n;let o,a;try{o=ss(i).toUint8Array()}catch(l){if(l instanceof Hb)return uo("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new ry(o,r,s)}catch(l){return uo(l instanceof da?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,i){return n.me.count===i-this.nt(e,n.targetId)?0:2}nt(e,n){const i=this.Le.getRemoteKeysForTarget(n);let r=0;return i.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),r++)}),r}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&lg(a.target)){const l=new X(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,bt.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let i=ce();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const r=new id(e,n,this.Qe,this.ke,i);return this.ke=Ti(),this.qe=yw(),this.Qe=new ze(ye),r}$e(e,n){if(!this.ze(e))return;const i=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,i),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,i){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,n)?r.Fe(n,1):r.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),i&&(this.ke=this.ke.insert(n,i))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new mw,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new dt(ye),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||K("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new mw),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function yw(){return new ze(X.comparator)}function _w(){return new ze(X.comparator)}const M4={asc:"ASCENDING",desc:"DESCENDING"},O4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},L4={and:"AND",or:"OR"};class V4{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function hg(t,e){return t.useProto3Json||Xh(e)?e:{value:e}}function fh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function pS(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function F4(t,e){return fh(t,e.toTimestamp())}function $n(t){return xe(!!t),ne.fromTimestamp(function(n){const i=gr(n);return new nt(i.seconds,i.nanos)}(t))}function sy(t,e){return dg(t,e).canonicalString()}function dg(t,e){const n=function(r){return new Ce(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function gS(t){const e=Ce.fromString(t);return xe(wS(e)),e}function fg(t,e){return sy(t.databaseId,e.path)}function Cf(t,e){const n=gS(e);if(n.get(1)!==t.databaseId.projectId)throw new q(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new q(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new X(yS(n))}function mS(t,e){return sy(t.databaseId,e)}function j4(t){const e=gS(t);return e.length===4?Ce.emptyPath():yS(e)}function pg(t){return new Ce(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function yS(t){return xe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function vw(t,e,n){return{name:fg(t,e),fields:n.value.mapValue.fields}}function U4(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:te()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(xe(h===void 0||typeof h=="string"),pt.fromBase64String(h||"")):(xe(h===void 0||h instanceof Buffer||h instanceof Uint8Array),pt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=c.code===void 0?F.UNKNOWN:hS(c.code);return new q(h,c.message||"")}(o);n=new fS(i,r,s,a||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=Cf(t,i.document.name),s=$n(i.document.updateTime),o=i.document.createTime?$n(i.document.createTime):ne.min(),a=new zt({mapValue:{fields:i.document.fields}}),l=bt.newFoundDocument(r,s,o,a),c=i.targetIds||[],h=i.removedTargetIds||[];n=new yu(c,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=Cf(t,i.document),s=i.readTime?$n(i.readTime):ne.min(),o=bt.newNoDocument(r,s),a=i.removedTargetIds||[];n=new yu([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=Cf(t,i.document),s=i.removedTargetIds||[];n=new yu([],s,r,null)}else{if(!("filter"in e))return te();{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:s}=i,o=new A4(r,s),a=i.targetId;n=new dS(a,o)}}return n}function z4(t,e){let n;if(e instanceof jl)n={update:vw(t,e.key,e.value)};else if(e instanceof ny)n={delete:fg(t,e.key)};else if(e instanceof Tr)n={update:vw(t,e.key,e.data),updateMask:Y4(e.fieldMask)};else{if(!(e instanceof I4))return te();n={verify:fg(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(s,o){const a=o.transform;if(a instanceof hl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof dl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof fl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof dh)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw te()}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:F4(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:te()}(t,e.precondition)),n}function B4(t,e){return t&&t.length>0?(xe(e!==void 0),t.map(n=>function(r,s){let o=r.updateTime?$n(r.updateTime):$n(s);return o.isEqual(ne.min())&&(o=$n(s)),new T4(o,r.transformResults||[])}(n,e))):[]}function $4(t,e){return{documents:[mS(t,e.path)]}}function H4(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=mS(t,r);const s=function(c){if(c.length!==0)return vS(In.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(h=>function(f){return{field:As(f.field),direction:K4(f.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=hg(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:r}}function W4(t){let e=j4(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){xe(i===1);const h=n.from[0];h.allDescendants?r=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(d){const f=_S(d);return f instanceof In&&Gb(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(f=>function(y){return new hh(Cs(y.field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(d){let f;return f=typeof d=="object"?d.value:d,Xh(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(d){const f=!!d.before,g=d.values||[];return new uh(g,f)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const f=!d.before,g=d.values||[];return new uh(g,f)}(n.endAt)),c4(e,r,o,s,a,"F",l,c)}function q4(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return te()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function _S(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Cs(n.unaryFilter.field);return Je.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=Cs(n.unaryFilter.field);return Je.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Cs(n.unaryFilter.field);return Je.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Cs(n.unaryFilter.field);return Je.create(o,"!=",{nullValue:"NULL_VALUE"});default:return te()}}(t):t.fieldFilter!==void 0?function(n){return Je.create(Cs(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return te()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return In.create(n.compositeFilter.filters.map(i=>_S(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return te()}}(n.compositeFilter.op))}(t):te()}function K4(t){return M4[t]}function G4(t){return O4[t]}function Q4(t){return L4[t]}function As(t){return{fieldPath:t.canonicalString()}}function Cs(t){return ut.fromServerFormat(t.fieldPath)}function vS(t){return t instanceof Je?function(n){if(n.op==="=="){if(sw(n.value))return{unaryFilter:{field:As(n.field),op:"IS_NAN"}};if(rw(n.value))return{unaryFilter:{field:As(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(sw(n.value))return{unaryFilter:{field:As(n.field),op:"IS_NOT_NAN"}};if(rw(n.value))return{unaryFilter:{field:As(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:As(n.field),op:G4(n.op),value:n.value}}}(t):t instanceof In?function(n){const i=n.getFilters().map(r=>vS(r));return i.length===1?i[0]:{compositeFilter:{op:Q4(n.op),filters:i}}}(t):te()}function Y4(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function wS(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(e,n,i,r,s=ne.min(),o=ne.min(),a=pt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new qi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new qi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new qi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new qi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X4{constructor(e){this.ct=e}}function J4(t){const e=W4({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?ug(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z4{constructor(){this.un=new eO}addToCollectionParentIndex(e,n){return this.un.add(n),j.resolve()}getCollectionParents(e,n){return j.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return j.resolve()}deleteFieldIndex(e,n){return j.resolve()}deleteAllFieldIndexes(e){return j.resolve()}createTargetIndexes(e,n){return j.resolve()}getDocumentsMatchingTarget(e,n){return j.resolve(null)}getIndexType(e,n){return j.resolve(0)}getFieldIndexes(e,n){return j.resolve([])}getNextCollectionGroupToUpdate(e){return j.resolve(null)}getMinOffset(e,n){return j.resolve(pr.min())}getMinOffsetFromCollectionGroup(e,n){return j.resolve(pr.min())}updateCollectionGroup(e,n,i){return j.resolve()}updateIndexEntries(e,n){return j.resolve()}}class eO{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new dt(Ce.comparator),s=!r.has(i);return this.index[n]=r.add(i),s}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new dt(Ce.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new go(0)}static kn(){return new go(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tO{constructor(){this.changes=new Po(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,bt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?j.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nO{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iO{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&Da(i.mutation,r,en.empty(),nt.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,ce()).next(()=>i))}getLocalViewOfDocuments(e,n,i=ce()){const r=zr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(s=>{let o=ha();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const i=zr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,ce()))}populateOverlays(e,n,i){const r=[];return i.forEach(s=>{n.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,i,r){let s=Ti();const o=Na(),a=function(){return Na()}();return n.forEach((l,c)=>{const h=i.get(c.key);r.has(c.key)&&(h===void 0||h.mutation instanceof Tr)?s=s.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),Da(h.mutation,c,h.mutation.getFieldMask(),nt.now())):o.set(c.key,en.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>{var d;return a.set(c,new nO(h,(d=o.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){const i=Na();let r=new ze((o,a)=>o-a),s=ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let h=i.get(l)||en.empty();h=a.applyToLocalView(c,h),i.set(l,h);const d=(r.get(a.batchId)||ce()).add(l);r=r.insert(a.batchId,d)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,d=iS();h.forEach(f=>{if(!s.has(f)){const g=cS(n.get(f),i.get(f));g!==null&&d.set(f,g),s=s.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return j.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(o){return X.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Jb(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(s=>{const o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-s.size):j.resolve(zr());let a=-1,l=s;return o.next(c=>j.forEach(c,(h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(h)?j.resolve():this.remoteDocumentCache.getEntry(e,h).next(f=>{l=l.insert(h,f)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,ce())).next(h=>({batchId:a,changes:nS(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new X(n)).next(i=>{let r=ha();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const s=n.collectionGroup;let o=ha();return this.indexManager.getCollectionParents(e,s).next(a=>j.forEach(a,l=>{const c=function(d,f){return new Fl(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,i,r).next(h=>{h.forEach((d,f)=>{o=o.insert(d,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,s,r))).next(o=>{s.forEach((l,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,bt.newInvalidDocument(h)))});let a=ha();return o.forEach((l,c)=>{const h=s.get(l);h!==void 0&&Da(h.mutation,c,en.empty(),nt.now()),ed(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rO{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return j.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:$n(r.createTime)}}(n)),j.resolve()}getNamedQuery(e,n){return j.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(r){return{name:r.name,query:J4(r.bundledQuery),readTime:$n(r.readTime)}}(n)),j.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sO{constructor(){this.overlays=new ze(X.comparator),this.Ir=new Map}getOverlay(e,n){return j.resolve(this.overlays.get(n))}getOverlays(e,n){const i=zr();return j.forEach(n,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,s)=>{this.ht(e,n,s)}),j.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.Ir.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(i)),j.resolve()}getOverlaysForCollection(e,n,i){const r=zr(),s=n.length+1,o=new X(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>i&&r.set(l.getKey(),l)}return j.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let s=new ze((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>i){let h=s.get(c.largestBatchId);h===null&&(h=zr(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=zr(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=r)););return j.resolve(a)}ht(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const o=this.Ir.get(r.largestBatchId).delete(i.key);this.Ir.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new P4(n,i));let s=this.Ir.get(n);s===void 0&&(s=ce(),this.Ir.set(n,s)),this.Ir.set(n,s.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oO{constructor(){this.sessionToken=pt.EMPTY_BYTE_STRING}getSessionToken(e){return j.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,j.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oy{constructor(){this.Tr=new dt(it.Er),this.dr=new dt(it.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const i=new it(e,n);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Vr(new it(e,n))}mr(e,n){e.forEach(i=>this.removeReference(i,n))}gr(e){const n=new X(new Ce([])),i=new it(n,e),r=new it(n,e+1),s=[];return this.dr.forEachInRange([i,r],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new X(new Ce([])),i=new it(n,e),r=new it(n,e+1);let s=ce();return this.dr.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new it(e,0),i=this.Tr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class it{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return X.comparator(e.key,n.key)||ye(e.wr,n.wr)}static Ar(e,n){return ye(e.wr,n.wr)||X.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aO{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new dt(it.Er)}checkEmpty(e){return j.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new k4(s,n,i,r);this.mutationQueue.push(o);for(const a of r)this.br=this.br.add(new it(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return j.resolve(o)}lookupMutationBatch(e,n){return j.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.vr(i),s=r<0?0:r;return j.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return j.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return j.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new it(n,0),r=new it(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([i,r],o=>{const a=this.Dr(o.wr);s.push(a)}),j.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new dt(ye);return n.forEach(r=>{const s=new it(r,0),o=new it(r,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{i=i.add(a.wr)})}),j.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let s=i;X.isDocumentKey(s)||(s=s.child(""));const o=new it(new X(s),0);let a=new dt(ye);return this.br.forEachWhile(l=>{const c=l.key.path;return!!i.isPrefixOf(c)&&(c.length===r&&(a=a.add(l.wr)),!0)},o),j.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(i=>{const r=this.Dr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){xe(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return j.forEach(n.mutations,r=>{const s=new it(r.key,n.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=i})}On(e){}containsKey(e,n){const i=new it(n,0),r=this.br.firstAfterOrEqual(i);return j.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,j.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lO{constructor(e){this.Mr=e,this.docs=function(){return new ze(X.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),s=r?r.size:0,o=this.Mr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return j.resolve(i?i.document.mutableCopy():bt.newInvalidDocument(n))}getEntries(e,n){let i=Ti();return n.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():bt.newInvalidDocument(r))}),j.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let s=Ti();const o=n.path,a=new X(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||HM($M(h),i)<=0||(r.has(h.key)||ed(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return j.resolve(s)}getAllFromCollectionGroup(e,n,i,r){te()}Or(e,n){return j.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new cO(this)}getSize(e){return j.resolve(this.size)}}class cO extends tO{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.cr.addEntry(e,r)):this.cr.removeEntry(i)}),j.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uO{constructor(e){this.persistence=e,this.Nr=new Po(n=>Zm(n),ey),this.lastRemoteSnapshotVersion=ne.min(),this.highestTargetId=0,this.Lr=0,this.Br=new oy,this.targetCount=0,this.kr=go.Bn()}forEachTarget(e,n){return this.Nr.forEach((i,r)=>n(r)),j.resolve()}getLastRemoteSnapshotVersion(e){return j.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return j.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),j.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Lr&&(this.Lr=n),j.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new go(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,j.resolve()}updateTargetData(e,n){return this.Kn(n),j.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,j.resolve()}removeTargets(e,n,i){let r=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&i.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),j.waitFor(s).next(()=>r)}getTargetCount(e){return j.resolve(this.targetCount)}getTargetData(e,n){const i=this.Nr.get(n)||null;return j.resolve(i)}addMatchingKeys(e,n,i){return this.Br.Rr(n,i),j.resolve()}removeMatchingKeys(e,n,i){this.Br.mr(n,i);const r=this.persistence.referenceDelegate,s=[];return r&&n.forEach(o=>{s.push(r.markPotentiallyOrphaned(e,o))}),j.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),j.resolve()}getMatchingKeysForTargetId(e,n){const i=this.Br.yr(n);return j.resolve(i)}containsKey(e,n){return j.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hO{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Qm(0),this.Kr=!1,this.Kr=!0,this.$r=new oO,this.referenceDelegate=e(this),this.Ur=new uO(this),this.indexManager=new Z4,this.remoteDocumentCache=function(r){return new lO(r)}(i=>this.referenceDelegate.Wr(i)),this.serializer=new X4(n),this.Gr=new rO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new sO,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.qr[e.toKey()];return i||(i=new aO(n,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,i){K("MemoryPersistence","Starting transaction:",e);const r=new dO(this.Qr.next());return this.referenceDelegate.zr(),i(r).next(s=>this.referenceDelegate.jr(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Hr(e,n){return j.or(Object.values(this.qr).map(i=>()=>i.containsKey(e,n)))}}class dO extends qM{constructor(e){super(),this.currentSequenceNumber=e}}class ay{constructor(e){this.persistence=e,this.Jr=new oy,this.Yr=null}static Zr(e){return new ay(e)}get Xr(){if(this.Yr)return this.Yr;throw te()}addReference(e,n,i){return this.Jr.addReference(i,n),this.Xr.delete(i.toString()),j.resolve()}removeReference(e,n,i){return this.Jr.removeReference(i,n),this.Xr.add(i.toString()),j.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),j.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(r=>this.Xr.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(s=>this.Xr.add(s.toString()))}).next(()=>i.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return j.forEach(this.Xr,i=>{const r=X.fromPath(i);return this.ei(e,r).next(s=>{s||n.removeEntry(r,ne.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(i=>{i?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return j.or([()=>j.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ly{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.$i=i,this.Ui=r}static Wi(e,n){let i=ce(),r=ce();for(const s of n.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new ly(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pO{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return YC()?8:KM(Pt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,i,r){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,r,i).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new fO;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,i,r){return i.documentReadCount<this.ji?(Xo()<=de.DEBUG&&K("QueryEngine","SDK will not create cache indexes for query:",Ps(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),j.resolve()):(Xo()<=de.DEBUG&&K("QueryEngine","Query:",Ps(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Hi*r?(Xo()<=de.DEBUG&&K("QueryEngine","The SDK decides to create cache indexes for query:",Ps(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Bn(n))):j.resolve())}Yi(e,n){if(cw(n))return j.resolve(null);let i=Bn(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=ug(n,null,"F"),i=Bn(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{const o=ce(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,i).next(l=>{const c=this.ts(n,a);return this.ns(n,c,o,l.readTime)?this.Yi(e,ug(n,null,"F")):this.rs(e,c,n,l)}))})))}Zi(e,n,i,r){return cw(n)||r.isEqual(ne.min())?j.resolve(null):this.Ji.getDocuments(e,i).next(s=>{const o=this.ts(n,s);return this.ns(n,o,i,r)?j.resolve(null):(Xo()<=de.DEBUG&&K("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Ps(n)),this.rs(e,o,n,BM(r,-1)).next(a=>a))})}ts(e,n){let i=new dt(eS(e));return n.forEach((r,s)=>{ed(e,s)&&(i=i.add(s))}),i}ns(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Xi(e,n,i){return Xo()<=de.DEBUG&&K("QueryEngine","Using full collection scan to execute query:",Ps(n)),this.Ji.getDocumentsMatchingQuery(e,n,pr.min(),i)}rs(e,n,i,r){return this.Ji.getDocumentsMatchingQuery(e,i,r).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gO{constructor(e,n,i,r){this.persistence=e,this.ss=n,this.serializer=r,this.os=new ze(ye),this._s=new Po(s=>Zm(s),ey),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new iO(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function mO(t,e,n,i){return new gO(t,e,n,i)}async function xS(t,e){const n=ie(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,n.ls(e),n.mutationQueue.getAllMutationBatches(i))).next(s=>{const o=[],a=[];let l=ce();for(const c of r){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of s){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(i,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function yO(t,e){const n=ie(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,h){const d=c.batch,f=d.keys();let g=j.resolve();return f.forEach(y=>{g=g.next(()=>h.getEntry(l,y)).next(x=>{const T=c.docVersions.get(y);xe(T!==null),x.version.compareTo(T)<0&&(d.applyToRemoteDocument(x,c),x.isValidDocument()&&(x.setReadTime(c.commitVersion),h.addEntry(x)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(n,i,e,s).next(()=>s.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let l=ce();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function ES(t){const e=ie(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function _O(t,e){const n=ie(t),i=e.snapshotVersion;let r=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});r=n.os;const a=[];e.targetChanges.forEach((h,d)=>{const f=r.get(d);if(!f)return;a.push(n.Ur.removeMatchingKeys(s,h.removedDocuments,d).next(()=>n.Ur.addMatchingKeys(s,h.addedDocuments,d)));let g=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?g=g.withResumeToken(pt.EMPTY_BYTE_STRING,ne.min()).withLastLimboFreeSnapshotVersion(ne.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,i)),r=r.insert(d,g),function(x,T,v){return x.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=3e8?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(f,g,h)&&a.push(n.Ur.updateTargetData(s,g))});let l=Ti(),c=ce();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(vO(s,o,e.documentUpdates).next(h=>{l=h.Ps,c=h.Is})),!i.isEqual(ne.min())){const h=n.Ur.getLastRemoteSnapshotVersion(s).next(d=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,i));a.push(h)}return j.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.os=r,s))}function vO(t,e,n){let i=ce(),r=ce();return n.forEach(s=>i=i.add(s)),e.getEntries(t,i).next(s=>{let o=Ti();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(ne.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):K("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:r}})}function wO(t,e){const n=ie(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function xO(t,e){const n=ie(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Ur.getTargetData(i,e).next(s=>s?(r=s,j.resolve(r)):n.Ur.allocateTargetId(i).next(o=>(r=new qi(e,o,"TargetPurposeListen",i.currentSequenceNumber),n.Ur.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.os.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.os=n.os.insert(i.targetId,i),n._s.set(e,i.targetId)),i})}async function gg(t,e,n){const i=ie(t),r=i.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!Vl(o))throw o;K("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}i.os=i.os.remove(e),i._s.delete(r.target)}function ww(t,e,n){const i=ie(t);let r=ne.min(),s=ce();return i.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,h){const d=ie(l),f=d._s.get(h);return f!==void 0?j.resolve(d.os.get(f)):d.Ur.getTargetData(c,h)}(i,o,Bn(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>i.ss.getDocumentsMatchingQuery(o,e,n?r:ne.min(),n?s:ce())).next(a=>(EO(i,h4(e),a),{documents:a,Ts:s})))}function EO(t,e,n){let i=t.us.get(e)||ne.min();n.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),t.us.set(e,i)}class xw{constructor(){this.activeTargetIds=y4()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class TO{constructor(){this.so=new xw,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,i){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new xw,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bO{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){K("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){K("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dc=null;function Rf(){return Dc===null?Dc=function(){return 268435456+Math.round(2147483648*Math.random())}():Dc++,"0x"+Dc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IO{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wt="WebChannelConnection";class kO extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const i=n.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+n.host,this.vo=`projects/${r}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${s}`}get Fo(){return!1}Mo(n,i,r,s,o){const a=Rf(),l=this.xo(n,i.toUriEncodedString());K("RestConnection",`Sending RPC '${n}' ${a}:`,l,r);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,o),this.No(n,l,c,r).then(h=>(K("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw uo("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",l,"request:",r),h})}Lo(n,i,r,s,o,a){return this.Mo(n,i,r,s,o)}Oo(n,i,r){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ko}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((s,o)=>n[o]=s),r&&r.headers.forEach((s,o)=>n[o]=s)}xo(n,i){const r=SO[n];return`${this.Do}/v1/${i}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,i,r){const s=Rf();return new Promise((o,a)=>{const l=new Lb;l.setWithCredentials(!0),l.listenOnce(Vb.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case pu.NO_ERROR:const h=l.getResponseJson();K(wt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case pu.TIMEOUT:K(wt,`RPC '${e}' ${s} timed out`),a(new q(F.DEADLINE_EXCEEDED,"Request time out"));break;case pu.HTTP_ERROR:const d=l.getStatus();if(K(wt,`RPC '${e}' ${s} failed with status:`,d,"response text:",l.getResponseText()),d>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);const g=f==null?void 0:f.error;if(g&&g.status&&g.message){const y=function(T){const v=T.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(v)>=0?v:F.UNKNOWN}(g.status);a(new q(y,g.message))}else a(new q(F.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new q(F.UNAVAILABLE,"Connection failed."));break;default:te()}}finally{K(wt,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(r);K(wt,`RPC '${e}' ${s} sending request:`,r),l.send(n,"POST",c,i,15)})}Bo(e,n,i){const r=Rf(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Ub(),a=jb(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,i),l.encodeInitMessageHeaders=!0;const h=s.join("");K(wt,`Creating RPC '${e}' stream ${r}: ${h}`,l);const d=o.createWebChannel(h,l);let f=!1,g=!1;const y=new IO({Io:T=>{g?K(wt,`Not sending because RPC '${e}' stream ${r} is closed:`,T):(f||(K(wt,`Opening RPC '${e}' stream ${r} transport.`),d.open(),f=!0),K(wt,`RPC '${e}' stream ${r} sending:`,T),d.send(T))},To:()=>d.close()}),x=(T,v,w)=>{T.listen(v,b=>{try{w(b)}catch(A){setTimeout(()=>{throw A},0)}})};return x(d,ua.EventType.OPEN,()=>{g||(K(wt,`RPC '${e}' stream ${r} transport opened.`),y.yo())}),x(d,ua.EventType.CLOSE,()=>{g||(g=!0,K(wt,`RPC '${e}' stream ${r} transport closed`),y.So())}),x(d,ua.EventType.ERROR,T=>{g||(g=!0,uo(wt,`RPC '${e}' stream ${r} transport errored:`,T),y.So(new q(F.UNAVAILABLE,"The operation could not be completed")))}),x(d,ua.EventType.MESSAGE,T=>{var v;if(!g){const w=T.data[0];xe(!!w);const b=w,A=b.error||((v=b[0])===null||v===void 0?void 0:v.error);if(A){K(wt,`RPC '${e}' stream ${r} received error:`,A);const D=A.status;let M=function(P){const k=Ye[P];if(k!==void 0)return hS(k)}(D),S=A.message;M===void 0&&(M=F.INTERNAL,S="Unknown error status: "+D+" with message "+A.message),g=!0,y.So(new q(M,S)),d.close()}else K(wt,`RPC '${e}' stream ${r} received:`,w),y.bo(w)}}),x(a,Fb.STAT_EVENT,T=>{T.stat===rg.PROXY?K(wt,`RPC '${e}' stream ${r} detected buffering proxy`):T.stat===rg.NOPROXY&&K(wt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{y.wo()},0),y}}function Nf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rd(t){return new V4(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{constructor(e,n,i=1e3,r=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=i,this.qo=r,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),r=Math.max(0,n-i);r>0&&K("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{constructor(e,n,i,r,s,o,a,l){this.ui=e,this.Ho=i,this.Jo=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new TS(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(Ei(n.toString()),Ei("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Yo===n&&this.P_(i,r)},i=>{e(()=>{const r=new q(F.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(r)})})}P_(e,n){const i=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(r=>{i(()=>this.I_(r))}),this.stream.onMessage(r=>{i(()=>++this.e_==1?this.E_(r):this.onNext(r))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return K("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(K("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class PO extends bS{constructor(e,n,i,r,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=U4(this.serializer,e),i=function(s){if(!("targetChange"in s))return ne.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ne.min():o.readTime?$n(o.readTime):ne.min()}(e);return this.listener.d_(n,i)}A_(e){const n={};n.database=pg(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=lg(l)?{documents:$4(s,l)}:{query:H4(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=pS(s,o.resumeToken);const c=hg(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(ne.min())>0){a.readTime=fh(s,o.snapshotVersion.toTimestamp());const c=hg(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const i=q4(this.serializer,e);i&&(n.labels=i),this.a_(n)}R_(e){const n={};n.database=pg(this.serializer),n.removeTarget=e,this.a_(n)}}class AO extends bS{constructor(e,n,i,r,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return xe(!!e.streamToken),this.lastStreamToken=e.streamToken,xe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){xe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=B4(e.writeResults,e.commitTime),i=$n(e.commitTime);return this.listener.g_(i,n)}p_(){const e={};e.database=pg(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>z4(this.serializer,i))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CO extends class{}{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new q(F.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,i,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,dg(n,i),r,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new q(F.UNKNOWN,s.toString())})}Lo(e,n,i,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,dg(n,i),r,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new q(F.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class RO{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Ei(n),this.D_=!1):K("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NO{constructor(e,n,i,r,s){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{i.enqueueAndForget(async()=>{ms(this)&&(K("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=ie(l);c.L_.add(4),await zl(c),c.q_.set("Unknown"),c.L_.delete(4),await sd(c)}(this))})}),this.q_=new RO(i,r)}}async function sd(t){if(ms(t))for(const e of t.B_)await e(!0)}async function zl(t){for(const e of t.B_)await e(!1)}function SS(t,e){const n=ie(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),dy(n)?hy(n):Ao(n).r_()&&uy(n,e))}function cy(t,e){const n=ie(t),i=Ao(n);n.N_.delete(e),i.r_()&&IS(n,e),n.N_.size===0&&(i.r_()?i.o_():ms(n)&&n.q_.set("Unknown"))}function uy(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ne.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ao(t).A_(e)}function IS(t,e){t.Q_.xe(e),Ao(t).R_(e)}function hy(t){t.Q_=new D4({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Ao(t).start(),t.q_.v_()}function dy(t){return ms(t)&&!Ao(t).n_()&&t.N_.size>0}function ms(t){return ie(t).L_.size===0}function kS(t){t.Q_=void 0}async function DO(t){t.q_.set("Online")}async function MO(t){t.N_.forEach((e,n)=>{uy(t,e)})}async function OO(t,e){kS(t),dy(t)?(t.q_.M_(e),hy(t)):t.q_.set("Unknown")}async function LO(t,e,n){if(t.q_.set("Online"),e instanceof fS&&e.state===2&&e.cause)try{await async function(r,s){const o=s.cause;for(const a of s.targetIds)r.N_.has(a)&&(await r.remoteSyncer.rejectListen(a,o),r.N_.delete(a),r.Q_.removeTarget(a))}(t,e)}catch(i){K("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await ph(t,i)}else if(e instanceof yu?t.Q_.Ke(e):e instanceof dS?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ne.min()))try{const i=await ES(t.localStore);n.compareTo(i)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.N_.get(c);h&&s.N_.set(c,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const h=s.N_.get(l);if(!h)return;s.N_.set(l,h.withResumeToken(pt.EMPTY_BYTE_STRING,h.snapshotVersion)),IS(s,l);const d=new qi(h.target,l,c,h.sequenceNumber);uy(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(i){K("RemoteStore","Failed to raise snapshot:",i),await ph(t,i)}}async function ph(t,e,n){if(!Vl(e))throw e;t.L_.add(1),await zl(t),t.q_.set("Offline"),n||(n=()=>ES(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{K("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await sd(t)})}function PS(t,e){return e().catch(n=>ph(t,n,e))}async function od(t){const e=ie(t),n=mr(e);let i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;VO(e);)try{const r=await wO(e.localStore,i);if(r===null){e.O_.length===0&&n.o_();break}i=r.batchId,FO(e,r)}catch(r){await ph(e,r)}AS(e)&&CS(e)}function VO(t){return ms(t)&&t.O_.length<10}function FO(t,e){t.O_.push(e);const n=mr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function AS(t){return ms(t)&&!mr(t).n_()&&t.O_.length>0}function CS(t){mr(t).start()}async function jO(t){mr(t).p_()}async function UO(t){const e=mr(t);for(const n of t.O_)e.m_(n.mutations)}async function zO(t,e,n){const i=t.O_.shift(),r=iy.from(i,e,n);await PS(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await od(t)}async function BO(t,e){e&&mr(t).V_&&await async function(i,r){if(function(o){return C4(o)&&o!==F.ABORTED}(r.code)){const s=i.O_.shift();mr(i).s_(),await PS(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),await od(i)}}(t,e),AS(t)&&CS(t)}async function Tw(t,e){const n=ie(t);n.asyncQueue.verifyOperationInProgress(),K("RemoteStore","RemoteStore received new credentials");const i=ms(n);n.L_.add(3),await zl(n),i&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await sd(n)}async function $O(t,e){const n=ie(t);e?(n.L_.delete(2),await sd(n)):e||(n.L_.add(2),await zl(n),n.q_.set("Unknown"))}function Ao(t){return t.K_||(t.K_=function(n,i,r){const s=ie(n);return s.w_(),new PO(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{Eo:DO.bind(null,t),Ro:MO.bind(null,t),mo:OO.bind(null,t),d_:LO.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),dy(t)?hy(t):t.q_.set("Unknown")):(await t.K_.stop(),kS(t))})),t.K_}function mr(t){return t.U_||(t.U_=function(n,i,r){const s=ie(n);return s.w_(),new AO(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:jO.bind(null,t),mo:BO.bind(null,t),f_:UO.bind(null,t),g_:zO.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await od(t)):(await t.U_.stop(),t.O_.length>0&&(K("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fy{constructor(e,n,i,r,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new gi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,s){const o=Date.now()+i,a=new fy(e,n,o,r,s);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new q(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function py(t,e){if(Ei("AsyncQueue",`${e}: ${t}`),Vl(t))return new q(F.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(e){this.comparator=e?(n,i)=>e(n,i)||X.comparator(n.key,i.key):(n,i)=>X.comparator(n.key,i.key),this.keyedMap=ha(),this.sortedSet=new ze(this.comparator)}static emptySet(e){return new eo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof eo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new eo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bw{constructor(){this.W_=new ze(X.comparator)}track(e){const n=e.doc.key,i=this.W_.get(n);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(n,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(n):e.type===1&&i.type===2?this.W_=this.W_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):te():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,i)=>{e.push(i)}),e}}class mo{constructor(e,n,i,r,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,i,r,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new mo(e,n,eo.emptySet(n),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Zh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HO{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class WO{constructor(){this.queries=Sw(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,i){const r=ie(n),s=r.queries;r.queries=Sw(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(i)})})(this,new q(F.ABORTED,"Firestore shutting down"))}}function Sw(){return new Po(t=>Zb(t),Zh)}async function gy(t,e){const n=ie(t);let i=3;const r=e.query;let s=n.queries.get(r);s?!s.H_()&&e.J_()&&(i=2):(s=new HO,i=e.J_()?0:1);try{switch(i){case 0:s.z_=await n.onListen(r,!0);break;case 1:s.z_=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(o){const a=py(o,`Initialization of query '${Ps(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&yy(n)}async function my(t,e){const n=ie(t),i=e.query;let r=3;const s=n.queries.get(i);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?r=e.J_()?0:1:!s.H_()&&e.J_()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function qO(t,e){const n=ie(t);let i=!1;for(const r of e){const s=r.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(r)&&(i=!0);o.z_=r}}i&&yy(n)}function KO(t,e,n){const i=ie(t),r=i.queries.get(e);if(r)for(const s of r.j_)s.onError(n);i.queries.delete(e)}function yy(t){t.Y_.forEach(e=>{e.next()})}var mg,Iw;(Iw=mg||(mg={})).ea="default",Iw.Cache="cache";class _y{constructor(e,n,i){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new mo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const i=n!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=mo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==mg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS{constructor(e){this.key=e}}class NS{constructor(e){this.key=e}}class GO{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ce(),this.mutatedKeys=ce(),this.Aa=eS(e),this.Ra=new eo(this.Aa)}get Va(){return this.Ta}ma(e,n){const i=n?n.fa:new bw,r=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=r,a=!1;const l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,c=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((h,d)=>{const f=r.get(h),g=ed(this.query,d)?d:null,y=!!f&&this.mutatedKeys.has(f.key),x=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let T=!1;f&&g?f.data.isEqual(g.data)?y!==x&&(i.track({type:3,doc:g}),T=!0):this.ga(f,g)||(i.track({type:2,doc:g}),T=!0,(l&&this.Aa(g,l)>0||c&&this.Aa(g,c)<0)&&(a=!0)):!f&&g?(i.track({type:0,doc:g}),T=!0):f&&!g&&(i.track({type:1,doc:f}),T=!0,(l||c)&&(a=!0)),T&&(g?(o=o.add(g),s=x?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),i.track({type:1,doc:h})}return{Ra:o,fa:i,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,d)=>function(g,y){const x=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return te()}};return x(g)-x(y)}(h.type,d.type)||this.Aa(h.doc,d.doc)),this.pa(i),r=r!=null&&r;const a=n&&!r?this.ya():[],l=this.da.size===0&&this.current&&!r?1:0,c=l!==this.Ea;return this.Ea=l,o.length!==0||c?{snapshot:new mo(this.query,e.Ra,s,o,e.mutatedKeys,l===0,c,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new bw,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ce(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});const n=[];return e.forEach(i=>{this.da.has(i)||n.push(new NS(i))}),this.da.forEach(i=>{e.has(i)||n.push(new RS(i))}),n}ba(e){this.Ta=e.Ts,this.da=ce();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return mo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class QO{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class YO{constructor(e){this.key=e,this.va=!1}}class XO{constructor(e,n,i,r,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Po(a=>Zb(a),Zh),this.Ma=new Map,this.xa=new Set,this.Oa=new ze(X.comparator),this.Na=new Map,this.La=new oy,this.Ba={},this.ka=new Map,this.qa=go.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function JO(t,e,n=!0){const i=FS(t);let r;const s=i.Fa.get(e);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.Da()):r=await DS(i,e,n,!0),r}async function ZO(t,e){const n=FS(t);await DS(n,e,!0,!1)}async function DS(t,e,n,i){const r=await xO(t.localStore,Bn(e)),s=r.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return i&&(a=await eL(t,e,s,o==="current",r.resumeToken)),t.isPrimaryClient&&n&&SS(t.remoteStore,r),a}async function eL(t,e,n,i,r){t.Ka=(d,f,g)=>async function(x,T,v,w){let b=T.view.ma(v);b.ns&&(b=await ww(x.localStore,T.query,!1).then(({documents:S})=>T.view.ma(S,b)));const A=w&&w.targetChanges.get(T.targetId),D=w&&w.targetMismatches.get(T.targetId)!=null,M=T.view.applyChanges(b,x.isPrimaryClient,A,D);return Pw(x,T.targetId,M.wa),M.snapshot}(t,d,f,g);const s=await ww(t.localStore,e,!0),o=new GO(e,s.Ts),a=o.ma(s.documents),l=Ul.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),c=o.applyChanges(a,t.isPrimaryClient,l);Pw(t,n,c.wa);const h=new QO(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function tL(t,e,n){const i=ie(t),r=i.Fa.get(e),s=i.Ma.get(r.targetId);if(s.length>1)return i.Ma.set(r.targetId,s.filter(o=>!Zh(o,e))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await gg(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&cy(i.remoteStore,r.targetId),yg(i,r.targetId)}).catch(Ll)):(yg(i,r.targetId),await gg(i.localStore,r.targetId,!0))}async function nL(t,e){const n=ie(t),i=n.Fa.get(e),r=n.Ma.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),cy(n.remoteStore,i.targetId))}async function iL(t,e,n){const i=uL(t);try{const r=await function(o,a){const l=ie(o),c=nt.now(),h=a.reduce((g,y)=>g.add(y.key),ce());let d,f;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let y=Ti(),x=ce();return l.cs.getEntries(g,h).next(T=>{y=T,y.forEach((v,w)=>{w.isValidDocument()||(x=x.add(v))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,y)).next(T=>{d=T;const v=[];for(const w of a){const b=S4(w,d.get(w.key).overlayedDocument);b!=null&&v.push(new Tr(w.key,b,Wb(b.value.mapValue),hn.exists(!0)))}return l.mutationQueue.addMutationBatch(g,c,v,a)}).next(T=>{f=T;const v=T.applyToLocalDocumentSet(d,x);return l.documentOverlayCache.saveOverlays(g,T.batchId,v)})}).then(()=>({batchId:f.batchId,changes:nS(d)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new ze(ye)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(i,r.batchId,n),await Bl(i,r.changes),await od(i.remoteStore)}catch(r){const s=py(r,"Failed to persist write");n.reject(s)}}async function MS(t,e){const n=ie(t);try{const i=await _O(n.localStore,e);e.targetChanges.forEach((r,s)=>{const o=n.Na.get(s);o&&(xe(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.va=!0:r.modifiedDocuments.size>0?xe(o.va):r.removedDocuments.size>0&&(xe(o.va),o.va=!1))}),await Bl(n,i,e)}catch(i){await Ll(i)}}function kw(t,e,n){const i=ie(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&r.push(a.snapshot)}),function(o,a){const l=ie(o);l.onlineState=a;let c=!1;l.queries.forEach((h,d)=>{for(const f of d.j_)f.Z_(a)&&(c=!0)}),c&&yy(l)}(i.eventManager,e),r.length&&i.Ca.d_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function rL(t,e,n){const i=ie(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Na.get(e),s=r&&r.key;if(s){let o=new ze(X.comparator);o=o.insert(s,bt.newNoDocument(s,ne.min()));const a=ce().add(s),l=new id(ne.min(),new Map,new ze(ye),o,a);await MS(i,l),i.Oa=i.Oa.remove(s),i.Na.delete(e),vy(i)}else await gg(i.localStore,e,!1).then(()=>yg(i,e,n)).catch(Ll)}async function sL(t,e){const n=ie(t),i=e.batch.batchId;try{const r=await yO(n.localStore,e);LS(n,i,null),OS(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Bl(n,r)}catch(r){await Ll(r)}}async function oL(t,e,n){const i=ie(t);try{const r=await function(o,a){const l=ie(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,a).next(d=>(xe(d!==null),h=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(i.localStore,e);LS(i,e,n),OS(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Bl(i,r)}catch(r){await Ll(r)}}function OS(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function LS(t,e,n){const i=ie(t);let r=i.Ba[i.currentUser.toKey()];if(r){const s=r.get(e);s&&(n?s.reject(n):s.resolve(),r=r.remove(e)),i.Ba[i.currentUser.toKey()]=r}}function yg(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Ma.get(e))t.Fa.delete(i),n&&t.Ca.$a(i,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(i=>{t.La.containsKey(i)||VS(t,i)})}function VS(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(cy(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),vy(t))}function Pw(t,e,n){for(const i of n)i instanceof RS?(t.La.addReference(i.key,e),aL(t,i)):i instanceof NS?(K("SyncEngine","Document no longer in limbo: "+i.key),t.La.removeReference(i.key,e),t.La.containsKey(i.key)||VS(t,i.key)):te()}function aL(t,e){const n=e.key,i=n.path.canonicalString();t.Oa.get(n)||t.xa.has(i)||(K("SyncEngine","New document in limbo: "+n),t.xa.add(i),vy(t))}function vy(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new X(Ce.fromString(e)),i=t.qa.next();t.Na.set(i,new YO(n)),t.Oa=t.Oa.insert(n,i),SS(t.remoteStore,new qi(Bn(Jh(n.path)),i,"TargetPurposeLimboResolution",Qm.oe))}}async function Bl(t,e,n){const i=ie(t),r=[],s=[],o=[];i.Fa.isEmpty()||(i.Fa.forEach((a,l)=>{o.push(i.Ka(l,e,n).then(c=>{var h;if((c||n)&&i.isPrimaryClient){const d=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;i.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){r.push(c);const d=ly.Wi(l.targetId,c);s.push(d)}}))}),await Promise.all(o),i.Ca.d_(r),await async function(l,c){const h=ie(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>j.forEach(c,f=>j.forEach(f.$i,g=>h.persistence.referenceDelegate.addReference(d,f.targetId,g)).next(()=>j.forEach(f.Ui,g=>h.persistence.referenceDelegate.removeReference(d,f.targetId,g)))))}catch(d){if(!Vl(d))throw d;K("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const f=d.targetId;if(!d.fromCache){const g=h.os.get(f),y=g.snapshotVersion,x=g.withLastLimboFreeSnapshotVersion(y);h.os=h.os.insert(f,x)}}}(i.localStore,s))}async function lL(t,e){const n=ie(t);if(!n.currentUser.isEqual(e)){K("SyncEngine","User change. New user:",e.toKey());const i=await xS(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new q(F.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Bl(n,i.hs)}}function cL(t,e){const n=ie(t),i=n.Na.get(e);if(i&&i.va)return ce().add(i.key);{let r=ce();const s=n.Ma.get(e);if(!s)return r;for(const o of s){const a=n.Fa.get(o);r=r.unionWith(a.view.Va)}return r}}function FS(t){const e=ie(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=MS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=cL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=rL.bind(null,e),e.Ca.d_=qO.bind(null,e.eventManager),e.Ca.$a=KO.bind(null,e.eventManager),e}function uL(t){const e=ie(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=sL.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=oL.bind(null,e),e}class gh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=rd(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return mO(this.persistence,new pO,e.initialUser,this.serializer)}Ga(e){return new hO(ay.Zr,this.serializer)}Wa(e){return new TO}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}gh.provider={build:()=>new gh};class _g{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>kw(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=lL.bind(null,this.syncEngine),await $O(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new WO}()}createDatastore(e){const n=rd(e.databaseInfo.databaseId),i=function(s){return new kO(s)}(e.databaseInfo);return function(s,o,a,l){return new CO(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,s,o,a){return new NO(i,r,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>kw(this.syncEngine,n,0),function(){return Ew.D()?new Ew:new bO}())}createSyncEngine(e,n){return function(r,s,o,a,l,c,h){const d=new XO(r,s,o,a,l,c);return h&&(d.Qa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const s=ie(r);K("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await zl(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}_g.provider={build:()=>new _g};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wy{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Ei("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hL{constructor(e,n,i,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=Et.UNAUTHENTICATED,this.clientId=Bb.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(i,async o=>{K("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(i,o=>(K("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new gi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=py(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Df(t,e){t.asyncQueue.verifyOperationInProgress(),K("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await xS(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Aw(t,e){t.asyncQueue.verifyOperationInProgress();const n=await dL(t);K("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>Tw(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>Tw(e.remoteStore,r)),t._onlineComponents=e}async function dL(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){K("FirestoreClient","Using user provided OfflineComponentProvider");try{await Df(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===F.FAILED_PRECONDITION||r.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;uo("Error using user provided cache. Falling back to memory cache: "+n),await Df(t,new gh)}}else K("FirestoreClient","Using default OfflineComponentProvider"),await Df(t,new gh);return t._offlineComponents}async function jS(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(K("FirestoreClient","Using user provided OnlineComponentProvider"),await Aw(t,t._uninitializedComponentsProvider._online)):(K("FirestoreClient","Using default OnlineComponentProvider"),await Aw(t,new _g))),t._onlineComponents}function fL(t){return jS(t).then(e=>e.syncEngine)}async function mh(t){const e=await jS(t),n=e.eventManager;return n.onListen=JO.bind(null,e.syncEngine),n.onUnlisten=tL.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=ZO.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=nL.bind(null,e.syncEngine),n}function pL(t,e,n={}){const i=new gi;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const h=new wy({next:f=>{h.Za(),o.enqueueAndForget(()=>my(s,d));const g=f.docs.has(a);!g&&f.fromCache?c.reject(new q(F.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&f.fromCache&&l&&l.source==="server"?c.reject(new q(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),d=new _y(Jh(a.path),h,{includeMetadataChanges:!0,_a:!0});return gy(s,d)}(await mh(t),t.asyncQueue,e,n,i)),i.promise}function gL(t,e,n={}){const i=new gi;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const h=new wy({next:f=>{h.Za(),o.enqueueAndForget(()=>my(s,d)),f.fromCache&&l.source==="server"?c.reject(new q(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),d=new _y(a,h,{includeMetadataChanges:!0,_a:!0});return gy(s,d)}(await mh(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function US(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cw=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zS(t,e,n){if(!n)throw new q(F.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function mL(t,e,n,i){if(e===!0&&i===!0)throw new q(F.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Rw(t){if(!X.isDocumentKey(t))throw new q(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Nw(t){if(X.isDocumentKey(t))throw new q(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function ad(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":te()}function Kt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new q(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ad(t);throw new q(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new q(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new q(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}mL("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=US((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new q(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new q(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new q(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ld{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Dw({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new q(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new q(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Dw(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new DM;switch(i.type){case"firstParty":return new VM(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new q(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=Cw.get(n);i&&(K("ComponentProvider","Removing Datastore"),Cw.delete(n),i.terminate())}(this),Promise.resolve()}}function yL(t,e,n,i={}){var r;const s=(t=Kt(t,ld))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&uo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let a,l;if(typeof i.mockUserToken=="string")a=i.mockUserToken,l=Et.MOCK_USER;else{a=KT(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new q(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Et(c)}t._authCredentials=new MM(new zb(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new ys(this.firestore,e,this._query)}}class It{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new lr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new It(this.firestore,e,this._key)}}class lr extends ys{constructor(e,n,i){super(e,n,Jh(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new It(this.firestore,null,new X(e))}withConverter(e){return new lr(this.firestore,e,this._path)}}function pl(t,e,...n){if(t=Ee(t),zS("collection","path",e),t instanceof ld){const i=Ce.fromString(e,...n);return Nw(i),new lr(t,null,i)}{if(!(t instanceof It||t instanceof lr))throw new q(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Ce.fromString(e,...n));return Nw(i),new lr(t.firestore,null,i)}}function En(t,e,...n){if(t=Ee(t),arguments.length===1&&(e=Bb.newId()),zS("doc","path",e),t instanceof ld){const i=Ce.fromString(e,...n);return Rw(i),new It(t,null,new X(i))}{if(!(t instanceof It||t instanceof lr))throw new q(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Ce.fromString(e,...n));return Rw(i),new It(t.firestore,t instanceof lr?t.converter:null,new X(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new TS(this,"async_queue_retry"),this.Vu=()=>{const i=Nf();i&&K("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;const n=Nf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Nf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new gi;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Vl(e))throw e;K("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(i=>{this.Eu=i,this.du=!1;const r=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(i);throw Ei("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.du=!1,i))));return this.mu=n,n}enqueueAfterDelay(e,n,i){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const r=fy.createAndSchedule(this,e,n,i,s=>this.yu(s));return this.Tu.push(r),r}fu(){this.Eu&&te()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function Ow(t){return function(n,i){if(typeof n!="object"||n===null)return!1;const r=n;for(const s of i)if(s in r&&typeof r[s]=="function")return!0;return!1}(t,["next","error","complete"])}class bi extends ld{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new Mw,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Mw(e),this._firestoreClient=void 0,await e}}}function _L(t,e){const n=typeof t=="object"?t:Fm(),i=typeof t=="string"?t:"(default)",r=Kh(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const s=HT("firestore");s&&yL(r,...s)}return r}function cd(t){if(t._terminated)throw new q(F.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||vL(t),t._firestoreClient}function vL(t){var e,n,i;const r=t._freezeSettings(),s=function(a,l,c,h){return new YM(a,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,US(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._componentsProvider||!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),t._firestoreClient=new hL(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new yo(pt.fromBase64String(e))}catch(n){throw new q(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new yo(pt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new q(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ut(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xy{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new q(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new q(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ye(this._lat,e._lat)||ye(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ey{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wL=/^__.*__$/;class xL{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Tr(e,this.data,this.fieldMask,n,this.fieldTransforms):new jl(e,this.data,n,this.fieldTransforms)}}class BS{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new Tr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function $S(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw te()}}class Ty{constructor(e,n,i,r,s,o){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Ty(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Fu({path:i,xu:!1});return r.Ou(e),r}Nu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Fu({path:i,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return yh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if($S(this.Cu)&&wL.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class EL{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||rd(e)}Qu(e,n,i,r=!1){return new Ty({Cu:e,methodName:n,qu:i,path:ut.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function dd(t){const e=t._freezeSettings(),n=rd(t._databaseId);return new EL(t._databaseId,!!e.ignoreUndefinedProperties,n)}function HS(t,e,n,i,r,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,r);Sy("Data must be an object, but it was:",o,i);const a=WS(i,o);let l,c;if(s.merge)l=new en(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const d of s.mergeFields){const f=vg(e,d,n);if(!o.contains(f))throw new q(F.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);KS(h,f)||h.push(f)}l=new en(h),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new xL(new zt(a),l,c)}class fd extends hd{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof fd}}class by extends hd{_toFieldTransform(e){return new x4(e.path,new hl)}isEqual(e){return e instanceof by}}function TL(t,e,n,i){const r=t.Qu(1,e,n);Sy("Data must be an object, but it was:",r,i);const s=[],o=zt.empty();gs(i,(l,c)=>{const h=Iy(e,l,n);c=Ee(c);const d=r.Nu(h);if(c instanceof fd)s.push(h);else{const f=$l(c,d);f!=null&&(s.push(h),o.set(h,f))}});const a=new en(s);return new BS(o,a,r.fieldTransforms)}function bL(t,e,n,i,r,s){const o=t.Qu(1,e,n),a=[vg(e,i,n)],l=[r];if(s.length%2!=0)throw new q(F.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<s.length;f+=2)a.push(vg(e,s[f])),l.push(s[f+1]);const c=[],h=zt.empty();for(let f=a.length-1;f>=0;--f)if(!KS(c,a[f])){const g=a[f];let y=l[f];y=Ee(y);const x=o.Nu(g);if(y instanceof fd)c.push(g);else{const T=$l(y,x);T!=null&&(c.push(g),h.set(g,T))}}const d=new en(c);return new BS(h,d,o.fieldTransforms)}function SL(t,e,n,i=!1){return $l(n,t.Qu(i?4:3,e))}function $l(t,e){if(qS(t=Ee(t)))return Sy("Unsupported field value:",e,t),WS(t,e);if(t instanceof hd)return function(i,r){if(!$S(r.Cu))throw r.Bu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Bu(`${i._methodName}() is not currently supported inside arrays`);const s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(i,r){const s=[];let o=0;for(const a of i){let l=$l(a,r.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(i,r){if((i=Ee(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return _4(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const s=nt.fromDate(i);return{timestampValue:fh(r.serializer,s)}}if(i instanceof nt){const s=new nt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:fh(r.serializer,s)}}if(i instanceof xy)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof yo)return{bytesValue:pS(r.serializer,i._byteString)};if(i instanceof It){const s=r.databaseId,o=i.firestore._databaseId;if(!o.isEqual(s))throw r.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:sy(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Ey)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return ty(a.serializer,l)})}}}}}}(i,r);throw r.Bu(`Unsupported field value: ${ad(i)}`)}(t,e)}function WS(t,e){const n={};return $b(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):gs(t,(i,r)=>{const s=$l(r,e.Mu(i));s!=null&&(n[i]=s)}),{mapValue:{fields:n}}}function qS(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof nt||t instanceof xy||t instanceof yo||t instanceof It||t instanceof hd||t instanceof Ey)}function Sy(t,e,n){if(!qS(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const i=ad(n);throw i==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+i)}}function vg(t,e,n){if((e=Ee(e))instanceof ud)return e._internalPath;if(typeof e=="string")return Iy(t,e);throw yh("Field path arguments must be of type string or ",t,!1,void 0,n)}const IL=new RegExp("[~\\*/\\[\\]]");function Iy(t,e,n){if(e.search(IL)>=0)throw yh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ud(...e.split("."))._internalPath}catch{throw yh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function yh(t,e,n,i,r){const s=i&&!i.isEmpty(),o=r!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${i}`),o&&(l+=` in document ${r}`),l+=")"),new q(F.INVALID_ARGUMENT,a+t+l)}function KS(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GS{constructor(e,n,i,r,s){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new It(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new kL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(ky("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class kL extends GS{data(){return super.data()}}function ky(t,e){return typeof e=="string"?Iy(t,e):e instanceof ud?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QS(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new q(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Py{}class PL extends Py{}function pd(t,e,...n){let i=[];e instanceof Py&&i.push(e),i=i.concat(n),function(s){const o=s.filter(l=>l instanceof Ay).length,a=s.filter(l=>l instanceof gd).length;if(o>1||o>0&&a>0)throw new q(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)t=r._apply(t);return t}class gd extends PL{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new gd(e,n,i)}_apply(e){const n=this._parse(e);return YS(e._query,n),new ys(e.firestore,e.converter,cg(e._query,n))}_parse(e){const n=dd(e.firestore);return function(s,o,a,l,c,h,d){let f;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new q(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){Vw(d,h);const g=[];for(const y of d)g.push(Lw(l,s,y));f={arrayValue:{values:g}}}else f=Lw(l,s,d)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||Vw(d,h),f=SL(a,o,d,h==="in"||h==="not-in");return Je.create(c,h,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function md(t,e,n){const i=e,r=ky("where",t);return gd._create(r,i,n)}class Ay extends Py{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Ay(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:In.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,s){let o=r;const a=s.getFlattenedFilters();for(const l of a)YS(o,l),o=cg(o,l)}(e._query,n),new ys(e.firestore,e.converter,cg(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Lw(t,e,n){if(typeof(n=Ee(n))=="string"){if(n==="")throw new q(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Jb(e)&&n.indexOf("/")!==-1)throw new q(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(Ce.fromString(n));if(!X.isDocumentKey(i))throw new q(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return iw(t,new X(i))}if(n instanceof It)return iw(t,n._key);throw new q(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ad(n)}.`)}function Vw(t,e){if(!Array.isArray(t)||t.length===0)throw new q(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function YS(t,e){const n=function(r,s){for(const o of r)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new q(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new q(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class AL{convertValue(e,n="none"){switch(os(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ke(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ss(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw te()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return gs(e,(r,s)=>{i[r]=this.convertValue(s,n)}),i}convertVectorValue(e){var n,i,r;const s=(r=(i=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(o=>Ke(o.doubleValue));return new Ey(s)}convertGeoPoint(e){return new xy(Ke(e.latitude),Ke(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=Xm(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(ll(e));default:return null}}convertTimestamp(e){const n=gr(e);return new nt(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Ce.fromString(e);xe(wS(i));const r=new cl(i.get(1),i.get(3)),s=new X(i.popFirst(5));return r.isEqual(n)||Ei(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XS(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class JS extends GS{constructor(e,n,i,r,s,o){super(e,n,i,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new _u(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(ky("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class _u extends JS{data(e={}){return super.data(e)}}class ZS{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new fa(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new _u(this._firestore,this._userDataWriter,i.key,i,new fa(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new q(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(a=>{const l=new _u(r._firestore,r._userDataWriter,a.doc.key,a.doc,new fa(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new _u(r._firestore,r._userDataWriter,a.doc.key,a.doc,new fa(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);let c=-1,h=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:CL(a.type),doc:l,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function CL(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return te()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cy(t){t=Kt(t,It);const e=Kt(t.firestore,bi);return pL(cd(e),t._key).then(n=>iI(e,t,n))}class Ry extends AL{constructor(e){super(),this.firestore=e}convertBytes(e){return new yo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new It(this.firestore,null,n)}}function eI(t){t=Kt(t,ys);const e=Kt(t.firestore,bi),n=cd(e),i=new Ry(e);return QS(t._query),gL(n,t._query).then(r=>new ZS(e,i,t,r))}function tI(t,e,n){t=Kt(t,It);const i=Kt(t.firestore,bi),r=XS(t.converter,e,n);return yd(i,[HS(dd(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,hn.none())])}function Fw(t,e,n,...i){t=Kt(t,It);const r=Kt(t.firestore,bi),s=dd(r);let o;return o=typeof(e=Ee(e))=="string"||e instanceof ud?bL(s,"updateDoc",t._key,e,n,i):TL(s,"updateDoc",t._key,e),yd(r,[o.toMutation(t._key,hn.exists(!0))])}function vu(t){return yd(Kt(t.firestore,bi),[new ny(t._key,hn.none())])}function RL(t,e){const n=Kt(t.firestore,bi),i=En(t),r=XS(t.converter,e);return yd(n,[HS(dd(t.firestore),"addDoc",i._key,r,t.converter!==null,{}).toMutation(i._key,hn.exists(!1))]).then(()=>i)}function nI(t,...e){var n,i,r;t=Ee(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||Ow(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Ow(e[o])){const d=e[o];e[o]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[o+1]=(i=d.error)===null||i===void 0?void 0:i.bind(d),e[o+2]=(r=d.complete)===null||r===void 0?void 0:r.bind(d)}let l,c,h;if(t instanceof It)c=Kt(t.firestore,bi),h=Jh(t._key.path),l={next:d=>{e[o]&&e[o](iI(c,t,d))},error:e[o+1],complete:e[o+2]};else{const d=Kt(t,ys);c=Kt(d.firestore,bi),h=d._query;const f=new Ry(c);l={next:g=>{e[o]&&e[o](new ZS(c,f,d,g))},error:e[o+1],complete:e[o+2]},QS(t._query)}return function(f,g,y,x){const T=new wy(x),v=new _y(g,T,y);return f.asyncQueue.enqueueAndForget(async()=>gy(await mh(f),v)),()=>{T.Za(),f.asyncQueue.enqueueAndForget(async()=>my(await mh(f),v))}}(cd(c),h,a,l)}function yd(t,e){return function(i,r){const s=new gi;return i.asyncQueue.enqueueAndForget(async()=>iL(await fL(i),r,s)),s.promise}(cd(t),e)}function iI(t,e,n){const i=n.docs.get(e._key),r=new Ry(t);return new JS(t,r,e._key,i,new fa(n.hasPendingWrites,n.fromCache),e.converter)}function Mf(){return new by("serverTimestamp")}(function(e,n=!0){(function(r){ko=r})(ds),es(new fr("firestore",(i,{instanceIdentifier:r,options:s})=>{const o=i.getProvider("app").getImmediate(),a=new bi(new OM(i.getProvider("auth-internal")),new jM(i.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new q(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new cl(c.options.projectId,h)}(o,r),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),jn(J0,"4.7.3",e),jn(J0,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rI="firebasestorage.googleapis.com",sI="storageBucket",NL=2*60*1e3,DL=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe extends qn{constructor(e,n,i=0){super(Of(e),`Firebase Storage: ${n} (${Of(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,qe.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Of(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var We;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(We||(We={}));function Of(t){return"storage/"+t}function Ny(){const t="An unknown error occurred, please check the error payload for server response.";return new qe(We.UNKNOWN,t)}function ML(t){return new qe(We.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function OL(t){return new qe(We.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function LL(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new qe(We.UNAUTHENTICATED,t)}function VL(){return new qe(We.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function FL(t){return new qe(We.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function jL(){return new qe(We.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function UL(){return new qe(We.CANCELED,"User canceled the upload/download.")}function zL(t){return new qe(We.INVALID_URL,"Invalid URL '"+t+"'.")}function BL(t){return new qe(We.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function $L(){return new qe(We.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+sI+"' property when initializing the app?")}function HL(){return new qe(We.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function WL(){return new qe(We.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function qL(t){return new qe(We.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function wg(t){return new qe(We.INVALID_ARGUMENT,t)}function oI(){return new qe(We.APP_DELETED,"The Firebase app was deleted.")}function KL(t){return new qe(We.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Ma(t,e){return new qe(We.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Jo(t){throw new qe(We.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=Ot.makeFromUrl(e,n)}catch{return new Ot(e,"")}if(i.path==="")return i;throw BL(e)}static makeFromUrl(e,n){let i=null;const r="([A-Za-z0-9.\\-_]+)";function s(A){A.path.charAt(A.path.length-1)==="/"&&(A.path_=A.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+r+o,"i"),l={bucket:1,path:3};function c(A){A.path_=decodeURIComponent(A.path)}const h="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",g=new RegExp(`^https?://${d}/${h}/b/${r}/o${f}`,"i"),y={bucket:1,path:3},x=n===rI?"(?:storage.googleapis.com|storage.cloud.google.com)":n,T="([^?#]*)",v=new RegExp(`^https?://${x}/${r}/${T}`,"i"),b=[{regex:a,indices:l,postModify:s},{regex:g,indices:y,postModify:c},{regex:v,indices:{bucket:1,path:2},postModify:c}];for(let A=0;A<b.length;A++){const D=b[A],M=D.regex.exec(e);if(M){const S=M[D.indices.bucket];let E=M[D.indices.path];E||(E=""),i=new Ot(S,E),D.postModify(i);break}}if(i==null)throw zL(e);return i}}class GL{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QL(t,e,n){let i=1,r=null,s=null,o=!1,a=0;function l(){return a===2}let c=!1;function h(...T){c||(c=!0,e.apply(null,T))}function d(T){r=setTimeout(()=>{r=null,t(g,l())},T)}function f(){s&&clearTimeout(s)}function g(T,...v){if(c){f();return}if(T){f(),h.call(null,T,...v);return}if(l()||o){f(),h.call(null,T,...v);return}i<64&&(i*=2);let b;a===1?(a=2,b=0):b=(i+Math.random())*1e3,d(b)}let y=!1;function x(T){y||(y=!0,f(),!c&&(r!==null?(T||(a=2),clearTimeout(r),d(0)):T||(a=1)))}return d(0),s=setTimeout(()=>{o=!0,x(!0)},n),x}function YL(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XL(t){return t!==void 0}function JL(t){return typeof t=="object"&&!Array.isArray(t)}function Dy(t){return typeof t=="string"||t instanceof String}function jw(t){return My()&&t instanceof Blob}function My(){return typeof Blob<"u"}function xg(t,e,n,i){if(i<e)throw wg(`Invalid value for '${t}'. Expected ${e} or greater.`);if(i>n)throw wg(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hl(t,e,n){let i=e;return n==null&&(i=`https://${e}`),`${n}://${i}/v0${t}`}function aI(t){const e=encodeURIComponent;let n="?";for(const i in t)if(t.hasOwnProperty(i)){const r=e(i)+"="+e(t[i]);n=n+r+"&"}return n=n.slice(0,-1),n}var qr;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(qr||(qr={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZL(t,e){const n=t>=500&&t<600,r=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||r||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e3{constructor(e,n,i,r,s,o,a,l,c,h,d,f=!0){this.url_=e,this.method_=n,this.headers_=i,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=h,this.connectionFactory_=d,this.retry=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((g,y)=>{this.resolve_=g,this.reject_=y,this.start_()})}start_(){const e=(i,r)=>{if(r){i(!1,new Mc(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===qr.NO_ERROR,l=s.getStatus();if(!a||ZL(l,this.additionalRetryCodes_)&&this.retry){const h=s.getErrorCode()===qr.ABORT;i(!1,new Mc(!1,null,h));return}const c=this.successCodes_.indexOf(l)!==-1;i(!0,new Mc(c,s))})},n=(i,r)=>{const s=this.resolve_,o=this.reject_,a=r.connection;if(r.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());XL(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=Ny();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(r.canceled){const l=this.appDelete_?oI():UL();o(l)}else{const l=jL();o(l)}};this.canceled_?n(!1,new Mc(!1,null,!0)):this.backoffId_=QL(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&YL(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Mc{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}}function t3(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function n3(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function i3(t,e){e&&(t["X-Firebase-GMPID"]=e)}function r3(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function s3(t,e,n,i,r,s,o=!0){const a=aI(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return i3(c,e),t3(c,n),n3(c,s),r3(c,i),new e3(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o3(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function a3(...t){const e=o3();if(e!==void 0){const n=new e;for(let i=0;i<t.length;i++)n.append(t[i]);return n.getBlob()}else{if(My())return new Blob(t);throw new qe(We.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function l3(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c3(t){if(typeof atob>"u")throw qL("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ln={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Lf{constructor(e,n){this.data=e,this.contentType=n||null}}function u3(t,e){switch(t){case Ln.RAW:return new Lf(lI(e));case Ln.BASE64:case Ln.BASE64URL:return new Lf(cI(t,e));case Ln.DATA_URL:return new Lf(d3(e),f3(e))}throw Ny()}function lI(t){const e=[];for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=i,o=t.charCodeAt(++n);i=65536|(s&1023)<<10|o&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function h3(t){let e;try{e=decodeURIComponent(t)}catch{throw Ma(Ln.DATA_URL,"Malformed data URL.")}return lI(e)}function cI(t,e){switch(t){case Ln.BASE64:{const r=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(r||s)throw Ma(t,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case Ln.BASE64URL:{const r=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(r||s)throw Ma(t,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=c3(e)}catch(r){throw r.message.includes("polyfill")?r:Ma(t,"Invalid character found")}const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}class uI{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Ma(Ln.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=n[1]||null;i!=null&&(this.base64=p3(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function d3(t){const e=new uI(t);return e.base64?cI(Ln.BASE64,e.rest):h3(e.rest)}function f3(t){return new uI(t).contentType}function p3(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(e,n){let i=0,r="";jw(e)?(this.data_=e,i=e.size,r=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,n){if(jw(this.data_)){const i=this.data_,r=l3(i,e,n);return r===null?null:new Bi(r)}else{const i=new Uint8Array(this.data_.buffer,e,n-e);return new Bi(i,!0)}}static getBlob(...e){if(My()){const n=e.map(i=>i instanceof Bi?i.data_:i);return new Bi(a3.apply(null,n))}else{const n=e.map(o=>Dy(o)?u3(Ln.RAW,o).data:o.data_);let i=0;n.forEach(o=>{i+=o.byteLength});const r=new Uint8Array(i);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)r[s++]=o[a]}),new Bi(r,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oy(t){let e;try{e=JSON.parse(t)}catch{return null}return JL(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g3(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function m3(t,e){const n=e.split("/").filter(i=>i.length>0).join("/");return t.length===0?n:t+"/"+n}function hI(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y3(t,e){return e}class Nt{constructor(e,n,i,r){this.server=e,this.local=n||e,this.writable=!!i,this.xform=r||y3}}let Oc=null;function _3(t){return!Dy(t)||t.length<2?t:hI(t)}function dI(){if(Oc)return Oc;const t=[];t.push(new Nt("bucket")),t.push(new Nt("generation")),t.push(new Nt("metageneration")),t.push(new Nt("name","fullPath",!0));function e(s,o){return _3(o)}const n=new Nt("name");n.xform=e,t.push(n);function i(s,o){return o!==void 0?Number(o):o}const r=new Nt("size");return r.xform=i,t.push(r),t.push(new Nt("timeCreated")),t.push(new Nt("updated")),t.push(new Nt("md5Hash",null,!0)),t.push(new Nt("cacheControl",null,!0)),t.push(new Nt("contentDisposition",null,!0)),t.push(new Nt("contentEncoding",null,!0)),t.push(new Nt("contentLanguage",null,!0)),t.push(new Nt("contentType",null,!0)),t.push(new Nt("metadata","customMetadata",!0)),Oc=t,Oc}function v3(t,e){function n(){const i=t.bucket,r=t.fullPath,s=new Ot(i,r);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function w3(t,e,n){const i={};i.type="file";const r=n.length;for(let s=0;s<r;s++){const o=n[s];i[o.local]=o.xform(i,e[o.server])}return v3(i,t),i}function fI(t,e,n){const i=Oy(e);return i===null?null:w3(t,i,n)}function x3(t,e,n,i){const r=Oy(e);if(r===null||!Dy(r.downloadTokens))return null;const s=r.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(c=>{const h=t.bucket,d=t.fullPath,f="/b/"+o(h)+"/o/"+o(d),g=Hl(f,n,i),y=aI({alt:"media",token:c});return g+y})[0]}function E3(t,e){const n={},i=e.length;for(let r=0;r<i;r++){const s=e[r];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uw="prefixes",zw="items";function T3(t,e,n){const i={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[Uw])for(const r of n[Uw]){const s=r.replace(/\/$/,""),o=t._makeStorageReference(new Ot(e,s));i.prefixes.push(o)}if(n[zw])for(const r of n[zw]){const s=t._makeStorageReference(new Ot(e,r.name));i.items.push(s)}return i}function b3(t,e,n){const i=Oy(n);return i===null?null:T3(t,e,i)}class _d{constructor(e,n,i,r){this.url=e,this.method=n,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ly(t){if(!t)throw Ny()}function S3(t,e){function n(i,r){const s=fI(t,r,e);return Ly(s!==null),s}return n}function I3(t,e){function n(i,r){const s=b3(t,e,r);return Ly(s!==null),s}return n}function k3(t,e){function n(i,r){const s=fI(t,r,e);return Ly(s!==null),x3(s,r,t.host,t._protocol)}return n}function Vy(t){function e(n,i){let r;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?r=VL():r=LL():n.getStatus()===402?r=OL(t.bucket):n.getStatus()===403?r=FL(t.path):r=i,r.status=n.getStatus(),r.serverResponse=i.serverResponse,r}return e}function pI(t){const e=Vy(t);function n(i,r){let s=e(i,r);return i.getStatus()===404&&(s=ML(t.path)),s.serverResponse=r.serverResponse,s}return n}function P3(t,e,n,i,r){const s={};e.isRoot?s.prefix="":s.prefix=e.path+"/",n.length>0&&(s.delimiter=n),i&&(s.pageToken=i),r&&(s.maxResults=r);const o=e.bucketOnlyServerUrl(),a=Hl(o,t.host,t._protocol),l="GET",c=t.maxOperationRetryTime,h=new _d(a,l,I3(t,e.bucket),c);return h.urlParams=s,h.errorHandler=Vy(e),h}function A3(t,e,n){const i=e.fullServerUrl(),r=Hl(i,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new _d(r,s,k3(t,n),o);return a.errorHandler=pI(e),a}function C3(t,e){const n=e.fullServerUrl(),i=Hl(n,t.host,t._protocol),r="DELETE",s=t.maxOperationRetryTime;function o(l,c){}const a=new _d(i,r,o,s);return a.successCodes=[200,204],a.errorHandler=pI(e),a}function R3(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function N3(t,e,n){const i=Object.assign({},n);return i.fullPath=t.path,i.size=e.size(),i.contentType||(i.contentType=R3(null,e)),i}function D3(t,e,n,i,r){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let b="";for(let A=0;A<2;A++)b=b+Math.random().toString().slice(2);return b}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=N3(e,i,r),h=E3(c,n),d="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,f=`\r
--`+l+"--",g=Bi.getBlob(d,i,f);if(g===null)throw HL();const y={name:c.fullPath},x=Hl(s,t.host,t._protocol),T="POST",v=t.maxUploadRetryTime,w=new _d(x,T,S3(t,n),v);return w.urlParams=y,w.headers=o,w.body=g.uploadData(),w.errorHandler=Vy(e),w}class M3{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=qr.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=qr.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=qr.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,i,r){if(this.sent_)throw Jo("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),r!==void 0)for(const s in r)r.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,r[s].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Jo("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Jo("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Jo("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Jo("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class O3 extends M3{initXhr(){this.xhr_.responseType="text"}}function vd(){return new O3}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(e,n){this._service=e,n instanceof Ot?this._location=n:this._location=Ot.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new as(e,n)}get root(){const e=new Ot(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return hI(this._location.path)}get storage(){return this._service}get parent(){const e=g3(this._location.path);if(e===null)return null;const n=new Ot(this._location.bucket,e);return new as(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw KL(e)}}function L3(t,e,n){t._throwIfRoot("uploadBytes");const i=D3(t.storage,t._location,dI(),new Bi(e,!0),n);return t.storage.makeRequestWithTokens(i,vd).then(r=>({metadata:r,ref:t}))}function V3(t){const e={prefixes:[],items:[]};return gI(t,e).then(()=>e)}async function gI(t,e,n){const r=await F3(t,{pageToken:n});e.prefixes.push(...r.prefixes),e.items.push(...r.items),r.nextPageToken!=null&&await gI(t,e,r.nextPageToken)}function F3(t,e){e!=null&&typeof e.maxResults=="number"&&xg("options.maxResults",1,1e3,e.maxResults);const n=e||{},i=P3(t.storage,t._location,"/",n.pageToken,n.maxResults);return t.storage.makeRequestWithTokens(i,vd)}function j3(t){t._throwIfRoot("getDownloadURL");const e=A3(t.storage,t._location,dI());return t.storage.makeRequestWithTokens(e,vd).then(n=>{if(n===null)throw WL();return n})}function U3(t){t._throwIfRoot("deleteObject");const e=C3(t.storage,t._location);return t.storage.makeRequestWithTokens(e,vd)}function z3(t,e){const n=m3(t._location.path,e),i=new Ot(t._location.bucket,n);return new as(t.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B3(t){return/^[A-Za-z]+:\/\//.test(t)}function $3(t,e){return new as(t,e)}function mI(t,e){if(t instanceof Fy){const n=t;if(n._bucket==null)throw $L();const i=new as(n,n._bucket);return e!=null?mI(i,e):i}else return e!==void 0?z3(t,e):t}function H3(t,e){if(e&&B3(e)){if(t instanceof Fy)return $3(t,e);throw wg("To use ref(service, url), the first argument must be a Storage instance.")}else return mI(t,e)}function Bw(t,e){const n=e==null?void 0:e[sI];return n==null?null:Ot.makeFromBucketSpec(n,t)}function W3(t,e,n,i={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:r}=i;r&&(t._overrideAuthToken=typeof r=="string"?r:KT(r,t.app.options.projectId))}class Fy{constructor(e,n,i,r,s){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=r,this._firebaseVersion=s,this._bucket=null,this._host=rI,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=NL,this._maxUploadRetryTime=DL,this._requests=new Set,r!=null?this._bucket=Ot.makeFromBucketSpec(r,this._host):this._bucket=Bw(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Ot.makeFromBucketSpec(this._url,e):this._bucket=Bw(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){xg("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){xg("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new as(this,e)}_makeRequest(e,n,i,r,s=!0){if(this._deleted)return new GL(oI());{const o=s3(e,this._appId,i,r,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[i,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,r).getPromise()}}const $w="@firebase/storage",Hw="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yI="storage";function Eg(t,e,n){return t=Ee(t),L3(t,e,n)}function Ww(t){return t=Ee(t),V3(t)}function Tg(t){return t=Ee(t),j3(t)}function qw(t){return t=Ee(t),U3(t)}function gl(t,e){return t=Ee(t),H3(t,e)}function q3(t=Fm(),e){t=Ee(t);const i=Kh(t,yI).getImmediate({identifier:e}),r=HT("storage");return r&&K3(i,...r),i}function K3(t,e,n,i={}){W3(t,e,n,i)}function G3(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return new Fy(n,i,r,e,ds)}function Q3(){es(new fr(yI,G3,"PUBLIC").setMultipleInstances(!0)),jn($w,Hw,""),jn($w,Hw,"esm2017")}Q3();const Y3={apiKey:"AIzaSyCnKNX6SQQUvXs5pDtwMFLlNSTLkm7YvCw",authDomain:"retailease-a45f0.firebaseapp.com",projectId:"retailease-a45f0",storageBucket:"retailease-a45f0.firebasestorage.app",messagingSenderId:"943909405770",appId:"1:943909405770:web:e42ab60d5d266e70eb92b3"},jy=YT(Y3),Lc=AM(jy),Mt=_L(jy),ml=q3(jy),_I=L.createContext();function Pn(){return L.useContext(_I)}function X3({children:t}){const[e,n]=L.useState(null),[i,r]=L.useState(!0);function s(h,d){return cD(Lc,h,d)}function o(h,d){return uD(Lc,h,d)}function a(){return yD(Lc)}function l(h,d){return bb(h,d)}L.useEffect(()=>mD(Lc,d=>{n(d),r(!1)}),[]);const c={currentUser:e,signup:s,login:o,logout:a,updateUserProfile:l,loading:i};return m.jsx(_I.Provider,{value:c,children:t})}var vI={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Kw=di.createContext&&di.createContext(vI),cr=function(){return cr=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},cr.apply(this,arguments)},J3=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n};function wI(t){return t&&t.map(function(e,n){return di.createElement(e.tag,cr({key:n},e.attr),wI(e.child))})}function be(t){return function(e){return di.createElement(Z3,cr({attr:cr({},t.attr)},e),wI(t.child))}}function Z3(t){var e=function(n){var i=t.attr,r=t.size,s=t.title,o=J3(t,["attr","size","title"]),a=r||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),di.createElement("svg",cr({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,i,o,{className:l,style:cr(cr({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&di.createElement("title",null,s),t.children)};return Kw!==void 0?di.createElement(Kw.Consumer,null,function(n){return e(n)}):e(vI)}function xI(t){return be({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"}}]})(t)}function eV(t){return be({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M0 448V64h18v384H0zm26.857-.273V64H36v383.727h-9.143zm27.143 0V64h8.857v383.727H54zm44.857 0V64h8.857v383.727h-8.857zm36 0V64h17.714v383.727h-17.714zm44.857 0V64h8.857v383.727h-8.857zm18 0V64h8.857v383.727h-8.857zm18 0V64h8.857v383.727h-8.857zm35.715 0V64h18v383.727h-18zm44.857 0V64h18v383.727h-18zm35.999 0V64h18.001v383.727h-18.001zm36.001 0V64h18.001v383.727h-18.001zm26.857 0V64h18v383.727h-18zm45.143 0V64h26.857v383.727h-26.857zm35.714 0V64h9.143v383.727H476zm18 .273V64h18v384h-18z"}}]})(t)}function tV(t){return be({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"}}]})(t)}function Uy(t){return be({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M425.7 256c-16.9 0-32.8-9-41.4-23.4L320 126l-64.2 106.6c-8.7 14.5-24.6 23.5-41.5 23.5-4.5 0-9-.6-13.3-1.9L64 215v178c0 14.7 10 27.5 24.2 31l216.2 54.1c10.2 2.5 20.9 2.5 31 0L551.8 424c14.2-3.6 24.2-16.4 24.2-31V215l-137 39.1c-4.3 1.3-8.8 1.9-13.3 1.9zm212.6-112.2L586.8 41c-3.1-6.2-9.8-9.8-16.7-8.9L320 64l91.7 152.1c3.8 6.3 11.4 9.3 18.5 7.3l197.9-56.5c9.9-2.9 14.7-13.9 10.2-23.1zM53.2 41L1.7 143.8c-4.6 9.2.3 20.2 10.1 23l197.9 56.5c7.1 2 14.7-1 18.5-7.3L320 64 69.8 32.1c-6.9-.8-13.5 2.7-16.6 8.9z"}}]})(t)}function EI(t){return be({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M512 144v288c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V144c0-26.5 21.5-48 48-48h88l12.3-32.9c7-18.7 24.9-31.1 44.9-31.1h125.5c20 0 37.9 12.4 44.9 31.1L376 96h88c26.5 0 48 21.5 48 48zM376 288c0-66.2-53.8-120-120-120s-120 53.8-120 120 53.8 120 120 120 120-53.8 120-120zm-32 0c0 48.5-39.5 88-88 88s-88-39.5-88-88 39.5-88 88-88 88 39.5 88 88z"}}]})(t)}function zy(t){return be({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M496 384H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16zM464 96H345.94c-21.38 0-32.09 25.85-16.97 40.97l32.4 32.4L288 242.75l-73.37-73.37c-12.5-12.5-32.76-12.5-45.25 0l-68.69 68.69c-6.25 6.25-6.25 16.38 0 22.63l22.62 22.62c6.25 6.25 16.38 6.25 22.63 0L192 237.25l73.37 73.37c12.5 12.5 32.76 12.5 45.25 0l96-96 32.4 32.4c15.12 15.12 40.97 4.41 40.97-16.97V112c.01-8.84-7.15-16-15.99-16z"}}]})(t)}function TI(t){return be({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"}}]})(t)}function nV(t){return be({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"}}]})(t)}function By(t){return be({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"}}]})(t)}function iV(t){return be({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"}}]})(t)}function Vf(t){return be({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M320 400c-75.85 0-137.25-58.71-142.9-133.11L72.2 185.82c-13.79 17.3-26.48 35.59-36.72 55.59a32.35 32.35 0 0 0 0 29.19C89.71 376.41 197.07 448 320 448c26.91 0 52.87-4 77.89-10.46L346 397.39a144.13 144.13 0 0 1-26 2.61zm313.82 58.1l-110.55-85.44a331.25 331.25 0 0 0 81.25-102.07 32.35 32.35 0 0 0 0-29.19C550.29 135.59 442.93 64 320 64a308.15 308.15 0 0 0-147.32 37.7L45.46 3.37A16 16 0 0 0 23 6.18L3.37 31.45A16 16 0 0 0 6.18 53.9l588.36 454.73a16 16 0 0 0 22.46-2.81l19.64-25.27a16 16 0 0 0-2.82-22.45zm-183.72-142l-39.3-30.38A94.75 94.75 0 0 0 416 256a94.76 94.76 0 0 0-121.31-92.21A47.65 47.65 0 0 1 304 192a46.64 46.64 0 0 1-1.54 10l-73.61-56.89A142.31 142.31 0 0 1 320 112a143.92 143.92 0 0 1 144 144c0 21.63-5.29 41.79-13.9 60.11z"}}]})(t)}function Ff(t){return be({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z"}}]})(t)}function rV(t){return be({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"}}]})(t)}function sV(t){return be({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M96.06 454.35c.01 6.29 1.87 12.45 5.36 17.69l17.09 25.69a31.99 31.99 0 0 0 26.64 14.28h61.71a31.99 31.99 0 0 0 26.64-14.28l17.09-25.69a31.989 31.989 0 0 0 5.36-17.69l.04-38.35H96.01l.05 38.35zM0 176c0 44.37 16.45 84.85 43.56 115.78 16.52 18.85 42.36 58.23 52.21 91.45.04.26.07.52.11.78h160.24c.04-.26.07-.51.11-.78 9.85-33.22 35.69-72.6 52.21-91.45C335.55 260.85 352 220.37 352 176 352 78.61 272.91-.3 175.45 0 73.44.31 0 82.97 0 176zm176-80c-44.11 0-80 35.89-80 80 0 8.84-7.16 16-16 16s-16-7.16-16-16c0-61.76 50.24-112 112-112 8.84 0 16 7.16 16 16s-7.16 16-16 16z"}}]})(t)}function _h(t){return be({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 224h-24v-72C376 68.2 307.8 0 224 0S72 68.2 72 152v72H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48zm-104 0H152v-72c0-39.7 32.3-72 72-72s72 32.3 72 72v72z"}}]})(t)}function oV(t){return be({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"}}]})(t)}function aV(t){return be({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"}}]})(t)}function bI(t){return be({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M32,224H64V416H32A31.96166,31.96166,0,0,1,0,384V256A31.96166,31.96166,0,0,1,32,224Zm512-48V448a64.06328,64.06328,0,0,1-64,64H160a64.06328,64.06328,0,0,1-64-64V176a79.974,79.974,0,0,1,80-80H288V32a32,32,0,0,1,64,0V96H464A79.974,79.974,0,0,1,544,176ZM264,256a40,40,0,1,0-40,40A39.997,39.997,0,0,0,264,256Zm-8,128H192v32h64Zm96,0H288v32h64ZM456,256a40,40,0,1,0-40,40A39.997,39.997,0,0,0,456,256Zm-8,128H384v32h64ZM640,256V384a31.96166,31.96166,0,0,1-32,32H576V224h32A31.96166,31.96166,0,0,1,640,256Z"}}]})(t)}function lV(t){return be({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M308 96c6.627 0 12-5.373 12-12V44c0-6.627-5.373-12-12-12H12C5.373 32 0 37.373 0 44v44.748c0 6.627 5.373 12 12 12h85.28c27.308 0 48.261 9.958 60.97 27.252H12c-6.627 0-12 5.373-12 12v40c0 6.627 5.373 12 12 12h158.757c-6.217 36.086-32.961 58.632-74.757 58.632H12c-6.627 0-12 5.373-12 12v53.012c0 3.349 1.4 6.546 3.861 8.818l165.052 152.356a12.001 12.001 0 0 0 8.139 3.182h82.562c10.924 0 16.166-13.408 8.139-20.818L116.871 319.906c76.499-2.34 131.144-53.395 138.318-127.906H308c6.627 0 12-5.373 12-12v-40c0-6.627-5.373-12-12-12h-58.69c-3.486-11.541-8.28-22.246-14.252-32H308z"}}]})(t)}function cV(t){return be({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"}}]})(t)}function Hs(t){return be({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M528.12 301.319l47.273-208C578.806 78.301 567.391 64 551.99 64H159.208l-9.166-44.81C147.758 8.021 137.93 0 126.529 0H24C10.745 0 0 10.745 0 24v16c0 13.255 10.745 24 24 24h69.883l70.248 343.435C147.325 417.1 136 435.222 136 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-15.674-6.447-29.835-16.824-40h209.647C430.447 426.165 424 440.326 424 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-22.172-12.888-41.332-31.579-50.405l5.517-24.276c3.413-15.018-8.002-29.319-23.403-29.319H218.117l-6.545-32h293.145c11.206 0 20.92-7.754 23.403-18.681z"}}]})(t)}function SI(t){return be({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"}}]})(t)}function II(t){return be({attr:{viewBox:"0 0 616 512"},child:[{tag:"path",attr:{d:"M602 118.6L537.1 15C531.3 5.7 521 0 510 0H106C95 0 84.7 5.7 78.9 15L14 118.6c-33.5 53.5-3.8 127.9 58.8 136.4 4.5.6 9.1.9 13.7.9 29.6 0 55.8-13 73.8-33.1 18 20.1 44.3 33.1 73.8 33.1 29.6 0 55.8-13 73.8-33.1 18 20.1 44.3 33.1 73.8 33.1 29.6 0 55.8-13 73.8-33.1 18.1 20.1 44.3 33.1 73.8 33.1 4.7 0 9.2-.3 13.7-.9 62.8-8.4 92.6-82.8 59-136.4zM529.5 288c-10 0-19.9-1.5-29.5-3.8V384H116v-99.8c-9.6 2.2-19.5 3.8-29.5 3.8-6 0-12.1-.4-18-1.2-5.6-.8-11.1-2.1-16.4-3.6V480c0 17.7 14.3 32 32 32h448c17.7 0 32-14.3 32-32V283.2c-5.4 1.6-10.8 2.9-16.4 3.6-6.1.8-12.1 1.2-18.2 1.2z"}}]})(t)}function uV(t){return be({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"}}]})(t)}function hV(t){return be({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M384 64H192C85.961 64 0 149.961 0 256s85.961 192 192 192h192c106.039 0 192-85.961 192-192S490.039 64 384 64zM64 256c0-70.741 57.249-128 128-128 70.741 0 128 57.249 128 128 0 70.741-57.249 128-128 128-70.741 0-128-57.249-128-128zm320 128h-48.905c65.217-72.858 65.236-183.12 0-256H384c70.741 0 128 57.249 128 128 0 70.74-57.249 128-128 128z"}}]})(t)}function dV(t){return be({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M384 64H192C86 64 0 150 0 256s86 192 192 192h192c106 0 192-86 192-192S490 64 384 64zm0 320c-70.8 0-128-57.3-128-128 0-70.8 57.3-128 128-128 70.8 0 128 57.3 128 128 0 70.8-57.3 128-128 128z"}}]})(t)}function kI(t){return be({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"}}]})(t)}function $y(t){return be({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"}}]})(t)}const fV=()=>{const[t,e]=L.useState(!1);return L.useEffect(()=>{const n=setTimeout(()=>{e(!0)},2500);return()=>clearTimeout(n)},[]),m.jsx("div",{className:`splash-screen ${t?"fade-out":"fade-in"}`,children:m.jsxs("div",{className:"splash-content",children:[m.jsx("div",{className:"logo-container",children:m.jsx(Hs,{className:"cart-icon"})}),m.jsx("h1",{className:"app-name",children:"Retail Ease"}),m.jsx("div",{className:"loading-bar",children:m.jsx("div",{className:"loading-progress"})})]})})},pV=()=>{const t=Pi();return m.jsx("div",{className:"landing-page",children:m.jsxs("div",{className:"landing-content",children:[m.jsx("div",{className:"logo-container",children:m.jsx(Hs,{className:"cart-icon"})}),m.jsx("h1",{className:"app-title",children:"Welcome to Retail Ease"}),m.jsx("p",{className:"app-description",children:"Smart inventory management for Indian small businesses. Track items, get alerts, analyze sales."}),m.jsxs("div",{className:"button-group",children:[m.jsx("button",{className:"primary-btn register-btn",onClick:()=>t("/register"),children:"Register"}),m.jsx("button",{className:"secondary-btn login-btn",onClick:()=>t("/login"),children:"Login"})]}),m.jsxs("div",{className:"features-section",children:[m.jsxs("div",{className:"feature-card",children:[m.jsx("div",{className:"feature-icon",style:{backgroundColor:"var(--primary)"},children:m.jsx(Hs,{})}),m.jsx("h3",{children:"Inventory Management"}),m.jsx("p",{children:"Track your stock levels and get alerts for low inventory"})]}),m.jsxs("div",{className:"feature-card",children:[m.jsx("div",{className:"feature-icon",style:{backgroundColor:"var(--secondary)"},children:m.jsx(Hs,{})}),m.jsx("h3",{children:"Expiry Alerts"}),m.jsx("p",{children:"Never miss expiry dates with our smart notification system"})]}),m.jsxs("div",{className:"feature-card",children:[m.jsx("div",{className:"feature-icon",style:{backgroundColor:"var(--accent)"},children:m.jsx(Hs,{})}),m.jsx("h3",{children:"Business Analytics"}),m.jsx("p",{children:"Gain insights into your sales and profit margins"})]})]})]})})},gV=()=>{const[t,e]=L.useState(""),[n,i]=L.useState(""),[r,s]=L.useState(""),[o,a]=L.useState(!1),{login:l}=Pn(),c=Pi(),h=async d=>{d.preventDefault();try{s(""),a(!0),await l(t,n),c("/dashboard")}catch(f){s("Failed to log in. Please check your credentials."),console.error(f)}a(!1)};return m.jsx("div",{className:"auth-container",children:m.jsxs("div",{className:"auth-card",children:[m.jsxs(si,{to:"/",className:"back-link",children:[m.jsx(xI,{})," Back to Home"]}),m.jsx("h2",{className:"auth-title",children:"Login to Retail Ease"}),r&&m.jsx("div",{className:"error-message",children:r}),m.jsxs("form",{onSubmit:h,className:"auth-form",children:[m.jsxs("div",{className:"form-group",children:[m.jsxs("label",{htmlFor:"email",children:[m.jsx(By,{})," Email"]}),m.jsx("input",{type:"email",id:"email",value:t,onChange:d=>e(d.target.value),required:!0,placeholder:"Enter your email"})]}),m.jsxs("div",{className:"form-group",children:[m.jsxs("label",{htmlFor:"password",children:[m.jsx(_h,{})," Password"]}),m.jsx("input",{type:"password",id:"password",value:n,onChange:d=>i(d.target.value),required:!0,placeholder:"Enter your password"})]}),m.jsx("button",{type:"submit",className:"primary-btn auth-btn",disabled:o,children:o?"Logging in...":"Login"})]}),m.jsxs("p",{className:"auth-redirect",children:["Don't have an account? ",m.jsx(si,{to:"/register",children:"Register"})]})]})})},mV=()=>{const[t,e]=L.useState(""),[n,i]=L.useState(""),[r,s]=L.useState(""),[o,a]=L.useState(""),[l,c]=L.useState(""),[h,d]=L.useState(!1),{signup:f,updateUserProfile:g}=Pn(),y=Pi(),x=async T=>{if(T.preventDefault(),r!==o)return c("Passwords do not match");try{c(""),d(!0);const{user:v}=await f(n,r);await g(v,{displayName:t}),y("/dashboard")}catch(v){c("Failed to create an account"),console.error(v)}d(!1)};return m.jsx("div",{className:"auth-container",children:m.jsxs("div",{className:"auth-card",children:[m.jsxs(si,{to:"/",className:"back-link",children:[m.jsx(xI,{})," Back to Home"]}),m.jsx("h2",{className:"auth-title",children:"Register for Retail Ease"}),l&&m.jsx("div",{className:"error-message",children:l}),m.jsxs("form",{onSubmit:x,className:"auth-form",children:[m.jsxs("div",{className:"form-group",children:[m.jsxs("label",{htmlFor:"name",children:[m.jsx($y,{})," Full Name"]}),m.jsx("input",{type:"text",id:"name",value:t,onChange:T=>e(T.target.value),required:!0,placeholder:"Enter your full name"})]}),m.jsxs("div",{className:"form-group",children:[m.jsxs("label",{htmlFor:"email",children:[m.jsx(By,{})," Email"]}),m.jsx("input",{type:"email",id:"email",value:n,onChange:T=>i(T.target.value),required:!0,placeholder:"Enter your email"})]}),m.jsxs("div",{className:"form-group",children:[m.jsxs("label",{htmlFor:"password",children:[m.jsx(_h,{})," Password"]}),m.jsx("input",{type:"password",id:"password",value:r,onChange:T=>s(T.target.value),required:!0,placeholder:"Create a password",minLength:"6"})]}),m.jsxs("div",{className:"form-group",children:[m.jsxs("label",{htmlFor:"confirmPassword",children:[m.jsx(_h,{})," Confirm Password"]}),m.jsx("input",{type:"password",id:"confirmPassword",value:o,onChange:T=>a(T.target.value),required:!0,placeholder:"Confirm your password",minLength:"6"})]}),m.jsx("button",{type:"submit",className:"primary-btn auth-btn",disabled:h,children:h?"Creating Account...":"Register"})]}),m.jsxs("p",{className:"auth-redirect",children:["Already have an account? ",m.jsx(si,{to:"/login",children:"Login"})]})]})})},yV=()=>{const{currentUser:t}=Pn(),[e,n]=L.useState({totalItems:0,lowStock:0,expiringItems:0,totalValue:0}),[i,r]=L.useState(!0);return L.useEffect(()=>{if(!t)return;const s=pl(Mt,"inventory"),o=pd(s,md("userId","==",t.uid)),a=nI(o,l=>{let c=0,h=0,d=0,f=0;l.forEach(g=>{const y=g.data();if(c++,y.quantity<5&&h++,y.expiryDate){const v=new Date(y.expiryDate.seconds*1e3)-new Date,w=Math.ceil(v/(1e3*60*60*24));w>0&&w<=30&&d++}f+=y.price*y.quantity}),n({totalItems:c,lowStock:h,expiringItems:d,totalValue:f}),r(!1)},l=>{console.error("Error fetching inventory stats:",l),r(!1)});return()=>a()},[t]),m.jsxs("div",{className:"dashboard",children:[m.jsx("h1",{className:"page-title",children:"Dashboard"}),m.jsxs("div",{className:"welcome-card",children:[m.jsxs("h2",{children:["Welcome, ",(t==null?void 0:t.displayName)||"User","!"]}),m.jsx("p",{children:"Manage your inventory and track your business performance with Retail Ease."})]}),m.jsxs("div",{className:"dashboard-stats",children:[m.jsxs("div",{className:"stat-card",children:[m.jsx("h3",{children:"Total Items"}),m.jsx("p",{className:"stat-value",children:i?"...":e.totalItems})]}),m.jsxs("div",{className:"stat-card",children:[m.jsx("h3",{children:"Low Stock"}),m.jsx("p",{className:"stat-value",children:i?"...":e.lowStock})]}),m.jsxs("div",{className:"stat-card",children:[m.jsx("h3",{children:"Expiring Soon"}),m.jsx("p",{className:"stat-value",children:i?"...":e.expiringItems})]}),m.jsxs("div",{className:"stat-card",children:[m.jsx("h3",{children:"Total Value"}),m.jsxs("p",{className:"stat-value",children:["",i?"...":e.totalValue.toLocaleString("en-IN")]})]})]}),m.jsxs("div",{className:"dashboard-actions",children:[m.jsxs(si,{to:"/inventory",className:"action-card",children:[m.jsx("div",{className:"action-icon",style:{backgroundColor:"var(--primary)"},children:m.jsx(Uy,{})}),m.jsxs("div",{className:"action-content",children:[m.jsx("h3",{children:"Inventory"}),m.jsx("p",{children:"Manage your stock and items"})]})]}),m.jsxs(si,{to:"/profit-analysis",className:"action-card",children:[m.jsx("div",{className:"action-icon",style:{backgroundColor:"var(--secondary)"},children:m.jsx(zy,{})}),m.jsxs("div",{className:"action-content",children:[m.jsx("h3",{children:"Profit Analysis"}),m.jsx("p",{children:"Track your business performance"})]})]}),m.jsxs(si,{to:"/ai-business-help",className:"action-card",children:[m.jsx("div",{className:"action-icon",style:{backgroundColor:"var(--accent)"},children:m.jsx(bI,{})}),m.jsxs("div",{className:"action-content",children:[m.jsx("h3",{children:"AI Business Help"}),m.jsx("p",{children:"Get AI-powered business insights"})]})]}),m.jsxs(si,{to:"/settings/profile",className:"action-card",children:[m.jsx("div",{className:"action-icon",style:{backgroundColor:"var(--highlight)"},children:m.jsx(TI,{})}),m.jsxs("div",{className:"action-content",children:[m.jsx("h3",{children:"Settings"}),m.jsx("p",{children:"Configure your account"})]})]})]})]})},_V=({onSubmit:t,onUpdate:e,editItem:n,setEditItem:i,categories:r})=>{const[s,o]=L.useState({name:"",quantity:0,price:0,expiryDate:"",category:"",barcode:"",newCategory:""}),[a,l]=L.useState(null),[c,h]=L.useState(null),[d,f]=L.useState(!1),[g,y]=L.useState(""),[x,T]=L.useState("");L.useEffect(()=>{n&&(o({name:n.name||"",quantity:n.quantity||0,price:n.price||0,expiryDate:n.expiryDate?new Date(n.expiryDate.seconds*1e3).toISOString().split("T")[0]:"",category:n.category||"",barcode:n.barcode||"",newCategory:""}),n.imageUrl?h(n.imageUrl):h(null))},[n]);const v=M=>{const{name:S,value:E,type:P}=M.target;o(k=>({...k,[S]:P==="number"?Number.parseFloat(E)||0:E}))},w=M=>{const S=M.target.files[0];if(!S)return;l(S);const E=new FileReader;E.onloadend=()=>{h(E.result)},E.readAsDataURL(S)},b=async M=>{M.preventDefault(),y(""),T(""),f(!0);try{const S={name:s.name,quantity:s.quantity,price:s.price,expiryDate:s.expiryDate?new Date(s.expiryDate):null,category:s.category==="new"?s.newCategory:s.category||"Uncategorized",barcode:s.barcode};if(n){const E=await e(n.id,{...S,imageUrl:n.imageUrl},a);E.success?(T("Item updated successfully!"),A()):y(E.error||"Failed to update item")}else{const E=await t(S,a);E.success?(T("Item added successfully!"),A()):y(E.error||"Failed to add item")}}catch(S){console.error("Error in form submission:",S),y("An unexpected error occurred")}f(!1)},A=()=>{o({name:"",quantity:0,price:0,expiryDate:"",category:"",barcode:"",newCategory:""}),l(null),h(null),i(null)},D=()=>{alert("Barcode scanner will be integrated with QuaggaJS in the future. This is a placeholder."),o(M=>({...M,barcode:"SCAN"+Math.floor(Math.random()*1e6)}))};return m.jsxs("div",{className:"inventory-form-container",children:[m.jsx("h2",{className:"form-title",children:n?"Edit Item":"Add New Item"}),g&&m.jsx("div",{className:"error-message",children:g}),x&&m.jsx("div",{className:"success-message",children:x}),m.jsxs("form",{onSubmit:b,className:"inventory-form",children:[m.jsxs("div",{className:"form-grid",children:[m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"name",children:"Item Name*"}),m.jsx("input",{type:"text",id:"name",name:"name",value:s.name,onChange:v,required:!0,placeholder:"Enter item name"})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"quantity",children:"Quantity*"}),m.jsx("input",{type:"number",id:"quantity",name:"quantity",value:s.quantity,onChange:v,required:!0,min:"0",step:"1"})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"price",children:"Price ()*"}),m.jsx("input",{type:"number",id:"price",name:"price",value:s.price,onChange:v,required:!0,min:"0",step:"0.01"})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"expiryDate",children:"Expiry Date"}),m.jsx("input",{type:"date",id:"expiryDate",name:"expiryDate",value:s.expiryDate,onChange:v})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"category",children:"Category"}),m.jsxs("select",{id:"category",name:"category",value:s.category,onChange:v,children:[m.jsx("option",{value:"",children:"Select Category"}),r.map(M=>m.jsx("option",{value:M,children:M},M)),m.jsx("option",{value:"new",children:"+ Add New Category"})]})]}),s.category==="new"&&m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"newCategory",children:"New Category"}),m.jsx("input",{type:"text",id:"newCategory",name:"newCategory",value:s.newCategory,onChange:v,placeholder:"Enter new category name"})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"barcode",children:"Barcode"}),m.jsxs("button",{type:"button",className:"scan-barcode-btn",onClick:D,children:[m.jsx(eV,{className:"barcode-icon"}),m.jsx("span",{children:"Scan Barcode"})]}),s.barcode&&m.jsx("div",{className:"barcode-result",children:m.jsxs("span",{children:["Barcode: ",s.barcode]})})]}),m.jsxs("div",{className:"form-group image-upload-group",children:[m.jsx("label",{children:"Item Image"}),m.jsxs("div",{className:"image-upload",children:[m.jsx("input",{type:"file",id:"image",accept:"image/*",onChange:w,className:"image-input"}),m.jsxs("label",{htmlFor:"image",className:"image-label",children:[m.jsx(EI,{className:"camera-icon"}),m.jsx("span",{children:a?"Change Image":"Upload Image"})]}),c&&m.jsx("div",{className:"image-preview",children:m.jsx("img",{src:c||"/placeholder.svg",alt:"Preview"})})]})]})]}),m.jsxs("div",{className:"form-actions",children:[n&&m.jsx("button",{type:"button",className:"outline-btn cancel-btn",onClick:A,children:"Cancel"}),m.jsx("button",{type:"submit",className:"primary-btn submit-btn",disabled:d,children:d?"Processing...":n?"Update Item":"Add Item"})]})]})]})},vV=({items:t,groupedItems:e,loading:n,onDelete:i,onEdit:r,onUpdateQuantity:s})=>{const o=c=>c?new Date(c.seconds*1e3).toLocaleDateString():"N/A",a=c=>{if(!c)return!1;const f=new Date(c.seconds*1e3)-new Date,g=Math.ceil(f/(1e3*60*60*24));return g>0&&g<=30},l=c=>c<5;return n?m.jsx("div",{className:"loading",children:"Loading inventory..."}):t.length===0?m.jsx("div",{className:"empty-inventory",children:m.jsx("p",{children:"No items found. Add your first item using the form above."})}):m.jsxs("div",{className:"inventory-list",children:[m.jsxs("h2",{className:"list-title",children:["Your Inventory (",t.length," items)"]}),Object.entries(e).map(([c,h])=>m.jsxs("div",{className:"category-section",children:[m.jsx("h3",{className:"category-title",children:c}),m.jsx("div",{className:"item-grid",children:h.map(d=>m.jsxs("div",{className:"item-card",children:[m.jsx("div",{className:"item-image",children:d.imageUrl?m.jsx("img",{src:d.imageUrl||"/placeholder.svg",alt:d.name}):m.jsx("div",{className:"no-image",children:"No Image"})}),m.jsxs("div",{className:"item-details",children:[m.jsx("h3",{className:"item-name",children:d.name}),m.jsxs("div",{className:"item-info",children:[m.jsx("div",{className:"info-row",children:m.jsxs("span",{className:"info-value price-tag",children:["",d.price.toFixed(2)]})}),m.jsx("div",{className:"info-row",children:m.jsxs("span",{className:`quantity-value ${l(d.quantity)?"low-stock":""}`,children:["Qty: ",d.quantity]})}),d.expiryDate&&m.jsx("div",{className:"info-row",children:m.jsxs("span",{className:`info-value ${a(d.expiryDate)?"expiring-soon":""}`,children:["Exp: ",o(d.expiryDate)]})})]}),m.jsxs("div",{className:"item-actions",children:[m.jsxs("div",{className:"quantity-control",children:[m.jsx("button",{className:"quantity-btn minus-btn",onClick:()=>s(d.id,d.quantity-1),disabled:d.quantity<=0,children:m.jsx(oV,{})}),m.jsx("button",{className:"quantity-btn plus-btn",onClick:()=>s(d.id,d.quantity+1),children:m.jsx(aV,{})})]}),m.jsxs("div",{className:"action-buttons",children:[m.jsx("button",{className:"action-btn edit-btn",onClick:()=>r(d),title:"Edit Item",children:m.jsx(nV,{})}),m.jsx("button",{className:"action-btn delete-btn",onClick:()=>i(d.id),title:"Delete Item",children:m.jsx(kI,{})})]})]})]})]},d.id))})]},c))]})},wV=()=>{const[t,e]=L.useState([]),[n,i]=L.useState(!0),[r,s]=L.useState(""),[o,a]=L.useState(""),[l,c]=L.useState("All"),[h,d]=L.useState(["All"]),[f,g]=L.useState(null),{currentUser:y}=Pn(),[x,T]=L.useState("category"),[v,w]=L.useState("asc");L.useEffect(()=>{if(!y)return;i(!0);const k=pd(pl(Mt,"inventory"),md("userId","==",y.uid));return nI(k,N=>{const R=[],fe=new Set(["All"]);N.forEach(se=>{const le={id:se.id,...se.data()};R.push(le),le.category&&fe.add(le.category)}),e(R),d(Array.from(fe)),i(!1)},N=>{console.error("Error fetching inventory:",N),s("Failed to load inventory items"),i(!1)})},[y]);const b=async(k,C)=>{try{let N=null;if(C){const R=gl(ml,`inventory/${y.uid}/${Date.now()}_${C.name}`);await Eg(R,C),N=await Tg(R)}return await RL(pl(Mt,"inventory"),{...k,imageUrl:N,userId:y.uid,createdAt:Mf()}),{success:!0}}catch(N){return console.error("Error adding item:",N),{success:!1,error:"Failed to add item"}}},A=async(k,C,N)=>{try{let R=C.imageUrl;if(N){const fe=gl(ml,`inventory/${y.uid}/${Date.now()}_${N.name}`);await Eg(fe,N),R=await Tg(fe)}return await Fw(En(Mt,"inventory",k),{...C,imageUrl:R,updatedAt:Mf()}),g(null),{success:!0}}catch(R){return console.error("Error updating item:",R),{success:!1,error:"Failed to update item"}}},D=async k=>{if(window.confirm("Are you sure you want to delete this item?"))try{await vu(En(Mt,"inventory",k))}catch(C){console.error("Error deleting item:",C),s("Failed to delete item")}},M=async(k,C)=>{if(!(C<0))try{await Fw(En(Mt,"inventory",k),{quantity:C,updatedAt:Mf()})}catch(N){console.error("Error updating quantity:",N),s("Failed to update quantity")}},S=k=>{const C=k.target.value;C==="price-asc"?(T("price"),w("asc")):C==="price-desc"?(T("price"),w("desc")):C==="expiry-asc"?(T("expiryDate"),w("asc")):(T(C),w("asc"))},E=t.filter(k=>{const C=k.name.toLowerCase().includes(o.toLowerCase()),N=l==="All"||k.category===l;return C&&N}).sort((k,C)=>{if(x==="price")return v==="asc"?k.price-C.price:C.price-k.price;if(x==="expiryDate")return!k.expiryDate&&!C.expiryDate?0:k.expiryDate?C.expiryDate?v==="asc"?k.expiryDate.seconds-C.expiryDate.seconds:C.expiryDate.seconds-k.expiryDate.seconds:-1:1;if(x==="category"){const N=k.category||"Uncategorized",R=C.category||"Uncategorized";return N.localeCompare(R)}return 0}),P=E.reduce((k,C)=>{const N=C.category||"Uncategorized";return k[N]||(k[N]=[]),k[N].push(C),k},{});return m.jsxs("div",{className:"inventory-page",children:[m.jsx("h1",{className:"page-title",children:"Inventory Management"}),r&&m.jsx("div",{className:"error-message",children:r}),m.jsx(_V,{onSubmit:b,onUpdate:A,editItem:f,setEditItem:g,categories:h.filter(k=>k!=="All")}),m.jsxs("div",{className:"inventory-filters",children:[m.jsxs("div",{className:"search-container",children:[m.jsx(cV,{className:"search-icon"}),m.jsx("input",{type:"text",placeholder:"Search items...",value:o,onChange:k=>a(k.target.value),className:"search-input"})]}),m.jsxs("div",{className:"filter-options",children:[m.jsx("select",{value:l,onChange:k=>c(k.target.value),className:"category-filter",children:h.map(k=>m.jsx("option",{value:k,children:k},k))}),m.jsxs("select",{value:x==="price"?`price-${v}`:x==="expiryDate"?"expiry-asc":x,onChange:S,className:"sort-filter",children:[m.jsx("option",{value:"category",children:"Sort by Category"}),m.jsx("option",{value:"price-asc",children:"Price: Low to High"}),m.jsx("option",{value:"price-desc",children:"Price: High to Low"}),m.jsx("option",{value:"expiry-asc",children:"Expiry: Sooner to Later"})]})]})]}),m.jsx(vV,{items:E,groupedItems:P,loading:n,onDelete:D,onEdit:g,onUpdateQuantity:M})]})},Vc=({title:t,value:e,subvalue:n,icon:i,color:r,isCurrency:s=!1,imageUrl:o,altValue:a=null,altLabel:l=null})=>{const[c,h]=L.useState(!1);L.useEffect(()=>{const y=setTimeout(()=>{h(!0)},100);return()=>clearTimeout(y)},[]);const d=y=>typeof y!="number"?y:y>=1e5?`${(y/1e5).toFixed(2)} L`:y>=1e3?`${(y/1e3).toFixed(1)} K`:`${y.toFixed(2)}`,f=s?d(e):e,g=a!==null?s?d(a):a:null;return m.jsxs("div",{className:`metric-card ${r} ${c?"visible":""}`,children:[m.jsx("div",{className:"metric-icon",children:i}),m.jsxs("div",{className:"metric-content",children:[m.jsx("h3",{className:"metric-title",children:t}),m.jsxs("div",{className:"metric-value-container",children:[o?m.jsxs("div",{className:"metric-with-image",children:[m.jsx("img",{src:o||"/placeholder.svg",alt:e,className:"metric-image"}),m.jsxs("div",{children:[m.jsx("p",{className:"metric-value",children:f}),n&&m.jsx("p",{className:"metric-subvalue",children:n})]})]}):m.jsxs(m.Fragment,{children:[m.jsx("p",{className:"metric-value",children:f}),n&&m.jsx("p",{className:"metric-subvalue",children:n})]}),g!==null&&m.jsxs("div",{className:"metric-alt-value",children:[m.jsx("span",{className:"alt-label",children:l||"Alt"}),m.jsx("span",{className:"alt-value",children:g})]})]})]})]})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Wl(t){return t+.5|0}const Ki=(t,e,n)=>Math.max(Math.min(t,n),e);function pa(t){return Ki(Wl(t*2.55),0,255)}function ur(t){return Ki(Wl(t*255),0,255)}function ti(t){return Ki(Wl(t/2.55)/100,0,1)}function Gw(t){return Ki(Wl(t*100),0,100)}const on={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},bg=[..."0123456789ABCDEF"],xV=t=>bg[t&15],EV=t=>bg[(t&240)>>4]+bg[t&15],Fc=t=>(t&240)>>4===(t&15),TV=t=>Fc(t.r)&&Fc(t.g)&&Fc(t.b)&&Fc(t.a);function bV(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&on[t[1]]*17,g:255&on[t[2]]*17,b:255&on[t[3]]*17,a:e===5?on[t[4]]*17:255}:(e===7||e===9)&&(n={r:on[t[1]]<<4|on[t[2]],g:on[t[3]]<<4|on[t[4]],b:on[t[5]]<<4|on[t[6]],a:e===9?on[t[7]]<<4|on[t[8]]:255})),n}const SV=(t,e)=>t<255?e(t):"";function IV(t){var e=TV(t)?xV:EV;return t?"#"+e(t.r)+e(t.g)+e(t.b)+SV(t.a,e):void 0}const kV=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function PI(t,e,n){const i=e*Math.min(n,1-n),r=(s,o=(s+t/30)%12)=>n-i*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function PV(t,e,n){const i=(r,s=(r+t/60)%6)=>n-n*e*Math.max(Math.min(s,4-s,1),0);return[i(5),i(3),i(1)]}function AV(t,e,n){const i=PI(t,1,.5);let r;for(e+n>1&&(r=1/(e+n),e*=r,n*=r),r=0;r<3;r++)i[r]*=1-e-n,i[r]+=e;return i}function CV(t,e,n,i,r){return t===r?(e-n)/i+(e<n?6:0):e===r?(n-t)/i+2:(t-e)/i+4}function Hy(t){const n=t.r/255,i=t.g/255,r=t.b/255,s=Math.max(n,i,r),o=Math.min(n,i,r),a=(s+o)/2;let l,c,h;return s!==o&&(h=s-o,c=a>.5?h/(2-s-o):h/(s+o),l=CV(n,i,r,h,s),l=l*60+.5),[l|0,c||0,a]}function Wy(t,e,n,i){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,i)).map(ur)}function qy(t,e,n){return Wy(PI,t,e,n)}function RV(t,e,n){return Wy(AV,t,e,n)}function NV(t,e,n){return Wy(PV,t,e,n)}function AI(t){return(t%360+360)%360}function DV(t){const e=kV.exec(t);let n=255,i;if(!e)return;e[5]!==i&&(n=e[6]?pa(+e[5]):ur(+e[5]));const r=AI(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?i=RV(r,s,o):e[1]==="hsv"?i=NV(r,s,o):i=qy(r,s,o),{r:i[0],g:i[1],b:i[2],a:n}}function MV(t,e){var n=Hy(t);n[0]=AI(n[0]+e),n=qy(n),t.r=n[0],t.g=n[1],t.b=n[2]}function OV(t){if(!t)return;const e=Hy(t),n=e[0],i=Gw(e[1]),r=Gw(e[2]);return t.a<255?`hsla(${n}, ${i}%, ${r}%, ${ti(t.a)})`:`hsl(${n}, ${i}%, ${r}%)`}const Qw={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Yw={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function LV(){const t={},e=Object.keys(Yw),n=Object.keys(Qw);let i,r,s,o,a;for(i=0;i<e.length;i++){for(o=a=e[i],r=0;r<n.length;r++)s=n[r],a=a.replace(s,Qw[s]);s=parseInt(Yw[o],16),t[a]=[s>>16&255,s>>8&255,s&255]}return t}let jc;function VV(t){jc||(jc=LV(),jc.transparent=[0,0,0,0]);const e=jc[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const FV=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function jV(t){const e=FV.exec(t);let n=255,i,r,s;if(e){if(e[7]!==i){const o=+e[7];n=e[8]?pa(o):Ki(o*255,0,255)}return i=+e[1],r=+e[3],s=+e[5],i=255&(e[2]?pa(i):Ki(i,0,255)),r=255&(e[4]?pa(r):Ki(r,0,255)),s=255&(e[6]?pa(s):Ki(s,0,255)),{r:i,g:r,b:s,a:n}}}function UV(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${ti(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const jf=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,bs=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function zV(t,e,n){const i=bs(ti(t.r)),r=bs(ti(t.g)),s=bs(ti(t.b));return{r:ur(jf(i+n*(bs(ti(e.r))-i))),g:ur(jf(r+n*(bs(ti(e.g))-r))),b:ur(jf(s+n*(bs(ti(e.b))-s))),a:t.a+n*(e.a-t.a)}}function Uc(t,e,n){if(t){let i=Hy(t);i[e]=Math.max(0,Math.min(i[e]+i[e]*n,e===0?360:1)),i=qy(i),t.r=i[0],t.g=i[1],t.b=i[2]}}function CI(t,e){return t&&Object.assign(e||{},t)}function Xw(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=ur(t[3]))):(e=CI(t,{r:0,g:0,b:0,a:1}),e.a=ur(e.a)),e}function BV(t){return t.charAt(0)==="r"?jV(t):DV(t)}class yl{constructor(e){if(e instanceof yl)return e;const n=typeof e;let i;n==="object"?i=Xw(e):n==="string"&&(i=bV(e)||VV(e)||BV(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=CI(this._rgb);return e&&(e.a=ti(e.a)),e}set rgb(e){this._rgb=Xw(e)}rgbString(){return this._valid?UV(this._rgb):void 0}hexString(){return this._valid?IV(this._rgb):void 0}hslString(){return this._valid?OV(this._rgb):void 0}mix(e,n){if(e){const i=this.rgb,r=e.rgb;let s;const o=n===s?.5:n,a=2*o-1,l=i.a-r.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-c,i.r=255&c*i.r+s*r.r+.5,i.g=255&c*i.g+s*r.g+.5,i.b=255&c*i.b+s*r.b+.5,i.a=o*i.a+(1-o)*r.a,this.rgb=i}return this}interpolate(e,n){return e&&(this._rgb=zV(this._rgb,e._rgb,n)),this}clone(){return new yl(this.rgb)}alpha(e){return this._rgb.a=ur(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=Wl(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Uc(this._rgb,2,e),this}darken(e){return Uc(this._rgb,2,-e),this}saturate(e){return Uc(this._rgb,1,e),this}desaturate(e){return Uc(this._rgb,1,-e),this}rotate(e){return MV(this._rgb,e),this}}/*!
 * Chart.js v4.4.8
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Yn(){}const $V=(()=>{let t=0;return()=>t++})();function oe(t){return t==null}function Oe(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function ue(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function He(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Yt(t,e){return He(t)?t:e}function re(t,e){return typeof t>"u"?e:t}const HV=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,RI=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Ie(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function ve(t,e,n,i){let r,s,o;if(Oe(t))for(s=t.length,r=0;r<s;r++)e.call(n,t[r],r);else if(ue(t))for(o=Object.keys(t),s=o.length,r=0;r<s;r++)e.call(n,t[o[r]],o[r])}function vh(t,e){let n,i,r,s;if(!t||!e||t.length!==e.length)return!1;for(n=0,i=t.length;n<i;++n)if(r=t[n],s=e[n],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function wh(t){if(Oe(t))return t.map(wh);if(ue(t)){const e=Object.create(null),n=Object.keys(t),i=n.length;let r=0;for(;r<i;++r)e[n[r]]=wh(t[n[r]]);return e}return t}function NI(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function WV(t,e,n,i){if(!NI(t))return;const r=e[t],s=n[t];ue(r)&&ue(s)?_l(r,s,i):e[t]=wh(s)}function _l(t,e,n){const i=Oe(e)?e:[e],r=i.length;if(!ue(t))return t;n=n||{};const s=n.merger||WV;let o;for(let a=0;a<r;++a){if(o=i[a],!ue(o))continue;const l=Object.keys(o);for(let c=0,h=l.length;c<h;++c)s(l[c],t,o,n)}return t}function Oa(t,e){return _l(t,e,{merger:qV})}function qV(t,e,n){if(!NI(t))return;const i=e[t],r=n[t];ue(i)&&ue(r)?Oa(i,r):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=wh(r))}const Jw={"":t=>t,x:t=>t.x,y:t=>t.y};function KV(t){const e=t.split("."),n=[];let i="";for(const r of e)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}function GV(t){const e=KV(t);return n=>{for(const i of e){if(i==="")break;n=n&&n[i]}return n}}function yr(t,e){return(Jw[e]||(Jw[e]=GV(e)))(t)}function Ky(t){return t.charAt(0).toUpperCase()+t.slice(1)}const vl=t=>typeof t<"u",_r=t=>typeof t=="function",Zw=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function QV(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const De=Math.PI,Ne=2*De,YV=Ne+De,xh=Number.POSITIVE_INFINITY,XV=De/180,Qe=De/2,Ar=De/4,e1=De*2/3,Gi=Math.log10,Hn=Math.sign;function La(t,e,n){return Math.abs(t-e)<n}function t1(t){const e=Math.round(t);t=La(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(Gi(t))),i=t/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function JV(t){const e=[],n=Math.sqrt(t);let i;for(i=1;i<n;i++)t%i===0&&(e.push(i),e.push(t/i));return n===(n|0)&&e.push(n),e.sort((r,s)=>r-s).pop(),e}function ZV(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function _o(t){return!ZV(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function e6(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function DI(t,e,n){let i,r,s;for(i=0,r=t.length;i<r;i++)s=t[i][n],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function vn(t){return t*(De/180)}function Gy(t){return t*(180/De)}function n1(t){if(!He(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function MI(t,e){const n=e.x-t.x,i=e.y-t.y,r=Math.sqrt(n*n+i*i);let s=Math.atan2(i,n);return s<-.5*De&&(s+=Ne),{angle:s,distance:r}}function Sg(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function t6(t,e){return(t-e+YV)%Ne-De}function Jt(t){return(t%Ne+Ne)%Ne}function wl(t,e,n,i){const r=Jt(t),s=Jt(e),o=Jt(n),a=Jt(s-r),l=Jt(o-r),c=Jt(r-s),h=Jt(r-o);return r===s||r===o||i&&s===o||a>l&&c<h}function st(t,e,n){return Math.max(e,Math.min(n,t))}function n6(t){return st(t,-32768,32767)}function ci(t,e,n,i=1e-6){return t>=Math.min(e,n)-i&&t<=Math.max(e,n)+i}function Qy(t,e,n){n=n||(o=>t[o]<e);let i=t.length-1,r=0,s;for(;i-r>1;)s=r+i>>1,n(s)?r=s:i=s;return{lo:r,hi:i}}const ui=(t,e,n,i)=>Qy(t,n,i?r=>{const s=t[r][e];return s<n||s===n&&t[r+1][e]===n}:r=>t[r][e]<n),i6=(t,e,n)=>Qy(t,n,i=>t[i][e]>=n);function r6(t,e,n){let i=0,r=t.length;for(;i<r&&t[i]<e;)i++;for(;r>i&&t[r-1]>n;)r--;return i>0||r<t.length?t.slice(i,r):t}const OI=["push","pop","shift","splice","unshift"];function s6(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),OI.forEach(n=>{const i="_onData"+Ky(n),r=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...s){const o=r.apply(this,s);return t._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...s)}),o}})})}function i1(t,e){const n=t._chartjs;if(!n)return;const i=n.listeners,r=i.indexOf(e);r!==-1&&i.splice(r,1),!(i.length>0)&&(OI.forEach(s=>{delete t[s]}),delete t._chartjs)}function LI(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const VI=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function FI(t,e){let n=[],i=!1;return function(...r){n=r,i||(i=!0,VI.call(window,()=>{i=!1,t.apply(e,n)}))}}function o6(t,e){let n;return function(...i){return e?(clearTimeout(n),n=setTimeout(t,e,i)):t.apply(this,i),e}}const Yy=t=>t==="start"?"left":t==="end"?"right":"center",xt=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,a6=(t,e,n,i)=>t===(i?"left":"right")?n:t==="center"?(e+n)/2:e;function jI(t,e,n){const i=e.length;let r=0,s=i;if(t._sorted){const{iScale:o,vScale:a,_parsed:l}=t,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,h=o.axis,{min:d,max:f,minDefined:g,maxDefined:y}=o.getUserBounds();if(g){if(r=Math.min(ui(l,h,d).lo,n?i:ui(e,h,o.getPixelForValue(d)).lo),c){const x=l.slice(0,r+1).reverse().findIndex(T=>!oe(T[a.axis]));r-=Math.max(0,x)}r=st(r,0,i-1)}if(y){let x=Math.max(ui(l,o.axis,f,!0).hi+1,n?0:ui(e,h,o.getPixelForValue(f),!0).hi+1);if(c){const T=l.slice(x-1).findIndex(v=>!oe(v[a.axis]));x+=Math.max(0,T)}s=st(x,r,i)-r}else s=i-r}return{start:r,count:s}}function UI(t){const{xScale:e,yScale:n,_scaleRanges:i}=t,r={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!i)return t._scaleRanges=r,!0;const s=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,r),s}const zc=t=>t===0||t===1,r1=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Ne/n)),s1=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*Ne/n)+1,Va={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Qe)+1,easeOutSine:t=>Math.sin(t*Qe),easeInOutSine:t=>-.5*(Math.cos(De*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>zc(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>zc(t)?t:r1(t,.075,.3),easeOutElastic:t=>zc(t)?t:s1(t,.075,.3),easeInOutElastic(t){return zc(t)?t:t<.5?.5*r1(t*2,.1125,.45):.5+.5*s1(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-Va.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?Va.easeInBounce(t*2)*.5:Va.easeOutBounce(t*2-1)*.5+.5};function Xy(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function o1(t){return Xy(t)?t:new yl(t)}function Uf(t){return Xy(t)?t:new yl(t).saturate(.5).darken(.1).hexString()}const l6=["x","y","borderWidth","radius","tension"],c6=["color","borderColor","backgroundColor"];function u6(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:c6},numbers:{type:"number",properties:l6}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function h6(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const a1=new Map;function d6(t,e){e=e||{};const n=t+JSON.stringify(e);let i=a1.get(n);return i||(i=new Intl.NumberFormat(t,e),a1.set(n,i)),i}function ql(t,e,n){return d6(e,n).format(t)}const zI={values(t){return Oe(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const i=this.chart.options.locale;let r,s=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(r="scientific"),s=f6(t,n)}const o=Gi(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),ql(t,i,l)},logarithmic(t,e,n){if(t===0)return"0";const i=n[e].significand||t/Math.pow(10,Math.floor(Gi(t)));return[1,2,3,5,10,15].includes(i)||e>.8*n.length?zI.numeric.call(this,t,e,n):""}};function f6(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var wd={formatters:zI};function p6(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:wd.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const ls=Object.create(null),Ig=Object.create(null);function Fa(t,e){if(!e)return t;const n=e.split(".");for(let i=0,r=n.length;i<r;++i){const s=n[i];t=t[s]||(t[s]=Object.create(null))}return t}function zf(t,e,n){return typeof e=="string"?_l(Fa(t,e),n):_l(Fa(t,""),e)}class g6{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,r)=>Uf(r.backgroundColor),this.hoverBorderColor=(i,r)=>Uf(r.borderColor),this.hoverColor=(i,r)=>Uf(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return zf(this,e,n)}get(e){return Fa(this,e)}describe(e,n){return zf(Ig,e,n)}override(e,n){return zf(ls,e,n)}route(e,n,i,r){const s=Fa(this,e),o=Fa(this,i),a="_"+n;Object.defineProperties(s,{[a]:{value:s[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[r];return ue(l)?Object.assign({},c,l):re(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var Le=new g6({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[u6,h6,p6]);function m6(t){return!t||oe(t.size)||oe(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function Eh(t,e,n,i,r){let s=e[r];return s||(s=e[r]=t.measureText(r).width,n.push(r)),s>i&&(i=s),i}function y6(t,e,n,i){i=i||{};let r=i.data=i.data||{},s=i.garbageCollect=i.garbageCollect||[];i.font!==e&&(r=i.data={},s=i.garbageCollect=[],i.font=e),t.save(),t.font=e;let o=0;const a=n.length;let l,c,h,d,f;for(l=0;l<a;l++)if(d=n[l],d!=null&&!Oe(d))o=Eh(t,r,s,o,d);else if(Oe(d))for(c=0,h=d.length;c<h;c++)f=d[c],f!=null&&!Oe(f)&&(o=Eh(t,r,s,o,f));t.restore();const g=s.length/2;if(g>n.length){for(l=0;l<g;l++)delete r[s[l]];s.splice(0,g)}return o}function Cr(t,e,n){const i=t.currentDevicePixelRatio,r=n!==0?Math.max(n/2,.5):0;return Math.round((e-r)*i)/i+r}function l1(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function kg(t,e,n,i){BI(t,e,n,i,null)}function BI(t,e,n,i,r){let s,o,a,l,c,h,d,f;const g=e.pointStyle,y=e.rotation,x=e.radius;let T=(y||0)*XV;if(g&&typeof g=="object"&&(s=g.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){t.save(),t.translate(n,i),t.rotate(T),t.drawImage(g,-g.width/2,-g.height/2,g.width,g.height),t.restore();return}if(!(isNaN(x)||x<=0)){switch(t.beginPath(),g){default:r?t.ellipse(n,i,r/2,x,0,0,Ne):t.arc(n,i,x,0,Ne),t.closePath();break;case"triangle":h=r?r/2:x,t.moveTo(n+Math.sin(T)*h,i-Math.cos(T)*x),T+=e1,t.lineTo(n+Math.sin(T)*h,i-Math.cos(T)*x),T+=e1,t.lineTo(n+Math.sin(T)*h,i-Math.cos(T)*x),t.closePath();break;case"rectRounded":c=x*.516,l=x-c,o=Math.cos(T+Ar)*l,d=Math.cos(T+Ar)*(r?r/2-c:l),a=Math.sin(T+Ar)*l,f=Math.sin(T+Ar)*(r?r/2-c:l),t.arc(n-d,i-a,c,T-De,T-Qe),t.arc(n+f,i-o,c,T-Qe,T),t.arc(n+d,i+a,c,T,T+Qe),t.arc(n-f,i+o,c,T+Qe,T+De),t.closePath();break;case"rect":if(!y){l=Math.SQRT1_2*x,h=r?r/2:l,t.rect(n-h,i-l,2*h,2*l);break}T+=Ar;case"rectRot":d=Math.cos(T)*(r?r/2:x),o=Math.cos(T)*x,a=Math.sin(T)*x,f=Math.sin(T)*(r?r/2:x),t.moveTo(n-d,i-a),t.lineTo(n+f,i-o),t.lineTo(n+d,i+a),t.lineTo(n-f,i+o),t.closePath();break;case"crossRot":T+=Ar;case"cross":d=Math.cos(T)*(r?r/2:x),o=Math.cos(T)*x,a=Math.sin(T)*x,f=Math.sin(T)*(r?r/2:x),t.moveTo(n-d,i-a),t.lineTo(n+d,i+a),t.moveTo(n+f,i-o),t.lineTo(n-f,i+o);break;case"star":d=Math.cos(T)*(r?r/2:x),o=Math.cos(T)*x,a=Math.sin(T)*x,f=Math.sin(T)*(r?r/2:x),t.moveTo(n-d,i-a),t.lineTo(n+d,i+a),t.moveTo(n+f,i-o),t.lineTo(n-f,i+o),T+=Ar,d=Math.cos(T)*(r?r/2:x),o=Math.cos(T)*x,a=Math.sin(T)*x,f=Math.sin(T)*(r?r/2:x),t.moveTo(n-d,i-a),t.lineTo(n+d,i+a),t.moveTo(n+f,i-o),t.lineTo(n-f,i+o);break;case"line":o=r?r/2:Math.cos(T)*x,a=Math.sin(T)*x,t.moveTo(n-o,i-a),t.lineTo(n+o,i+a);break;case"dash":t.moveTo(n,i),t.lineTo(n+Math.cos(T)*(r?r/2:x),i+Math.sin(T)*x);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function hi(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function xd(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Ed(t){t.restore()}function _6(t,e,n,i,r){if(!e)return t.lineTo(n.x,n.y);if(r==="middle"){const s=(e.x+n.x)/2;t.lineTo(s,e.y),t.lineTo(s,n.y)}else r==="after"!=!!i?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function v6(t,e,n,i){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function w6(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),oe(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function x6(t,e,n,i,r){if(r.strikethrough||r.underline){const s=t.measureText(i),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,h=r.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=r.decorationWidth||2,t.moveTo(o,h),t.lineTo(a,h),t.stroke()}}function E6(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function cs(t,e,n,i,r,s={}){const o=Oe(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="";let l,c;for(t.save(),t.font=r.string,w6(t,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&E6(t,s.backdrop),a&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),oe(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(c,n,i,s.maxWidth)),t.fillText(c,n,i,s.maxWidth),x6(t,n,i,c,s),i+=Number(r.lineHeight);t.restore()}function xl(t,e){const{x:n,y:i,w:r,h:s,radius:o}=e;t.arc(n+o.topLeft,i+o.topLeft,o.topLeft,1.5*De,De,!0),t.lineTo(n,i+s-o.bottomLeft),t.arc(n+o.bottomLeft,i+s-o.bottomLeft,o.bottomLeft,De,Qe,!0),t.lineTo(n+r-o.bottomRight,i+s),t.arc(n+r-o.bottomRight,i+s-o.bottomRight,o.bottomRight,Qe,0,!0),t.lineTo(n+r,i+o.topRight),t.arc(n+r-o.topRight,i+o.topRight,o.topRight,0,-Qe,!0),t.lineTo(n+o.topLeft,i)}const T6=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,b6=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function S6(t,e){const n=(""+t).match(T6);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const I6=t=>+t||0;function Jy(t,e){const n={},i=ue(e),r=i?Object.keys(e):e,s=ue(t)?i?o=>re(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of r)n[o]=I6(s(o));return n}function $I(t){return Jy(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Kr(t){return Jy(t,["topLeft","topRight","bottomLeft","bottomRight"])}function At(t){const e=$I(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function tt(t,e){t=t||{},e=e||Le.font;let n=re(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let i=re(t.style,e.style);i&&!(""+i).match(b6)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:re(t.family,e.family),lineHeight:S6(re(t.lineHeight,e.lineHeight),n),size:n,style:i,weight:re(t.weight,e.weight),string:""};return r.string=m6(r),r}function ga(t,e,n,i){let r,s,o;for(r=0,s=t.length;r<s;++r)if(o=t[r],o!==void 0&&o!==void 0)return o}function k6(t,e,n){const{min:i,max:r}=t,s=RI(e,(r-i)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(i,-Math.abs(s)),max:o(r,s)}}function br(t,e){return Object.assign(Object.create(t),e)}function Zy(t,e=[""],n,i,r=()=>t[0]){const s=n||t;typeof i>"u"&&(i=KI("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:s,_fallback:i,_getTarget:r,override:a=>Zy([a,...t],e,s,i)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return WI(a,l,()=>O6(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return u1(a).includes(l)},ownKeys(a){return u1(a)},set(a,l,c){const h=a._storage||(a._storage=r());return a[l]=h[l]=c,delete a._keys,!0}})}function vo(t,e,n,i){const r={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:HI(t,i),setContext:s=>vo(t,s,n,i),override:s=>vo(t.override(s),e,n,i)};return new Proxy(r,{deleteProperty(s,o){return delete s[o],delete t[o],!0},get(s,o,a){return WI(s,o,()=>A6(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(s,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(s,o,a){return t[o]=a,delete s[o],!0}})}function HI(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:i=e.indexable,_allKeys:r=e.allKeys}=t;return{allKeys:r,scriptable:n,indexable:i,isScriptable:_r(n)?n:()=>n,isIndexable:_r(i)?i:()=>i}}const P6=(t,e)=>t?t+Ky(e):e,e_=(t,e)=>ue(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function WI(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const i=n();return t[e]=i,i}function A6(t,e,n){const{_proxy:i,_context:r,_subProxy:s,_descriptors:o}=t;let a=i[e];return _r(a)&&o.isScriptable(e)&&(a=C6(e,a,t,n)),Oe(a)&&a.length&&(a=R6(e,a,t,o.isIndexable)),e_(e,a)&&(a=vo(a,r,s&&s[e],o)),a}function C6(t,e,n,i){const{_proxy:r,_context:s,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(s,o||i);return a.delete(t),e_(t,l)&&(l=t_(r._scopes,r,t,l)),l}function R6(t,e,n,i){const{_proxy:r,_context:s,_subProxy:o,_descriptors:a}=n;if(typeof s.index<"u"&&i(t))return e[s.index%e.length];if(ue(e[0])){const l=e,c=r._scopes.filter(h=>h!==l);e=[];for(const h of l){const d=t_(c,r,t,h);e.push(vo(d,s,o&&o[t],a))}}return e}function qI(t,e,n){return _r(t)?t(e,n):t}const N6=(t,e)=>t===!0?e:typeof t=="string"?yr(e,t):void 0;function D6(t,e,n,i,r){for(const s of e){const o=N6(n,s);if(o){t.add(o);const a=qI(o._fallback,n,r);if(typeof a<"u"&&a!==n&&a!==i)return a}else if(o===!1&&typeof i<"u"&&n!==i)return null}return!1}function t_(t,e,n,i){const r=e._rootScopes,s=qI(e._fallback,n,i),o=[...t,...r],a=new Set;a.add(i);let l=c1(a,o,n,s||n,i);return l===null||typeof s<"u"&&s!==n&&(l=c1(a,o,s,l,i),l===null)?!1:Zy(Array.from(a),[""],r,s,()=>M6(e,n,i))}function c1(t,e,n,i,r){for(;n;)n=D6(t,e,n,i,r);return n}function M6(t,e,n){const i=t._getTarget();e in i||(i[e]={});const r=i[e];return Oe(r)&&ue(n)?n:r||{}}function O6(t,e,n,i){let r;for(const s of e)if(r=KI(P6(s,t),n),typeof r<"u")return e_(t,r)?t_(n,i,t,r):r}function KI(t,e){for(const n of e){if(!n)continue;const i=n[t];if(typeof i<"u")return i}}function u1(t){let e=t._keys;return e||(e=t._keys=L6(t._scopes)),e}function L6(t){const e=new Set;for(const n of t)for(const i of Object.keys(n).filter(r=>!r.startsWith("_")))e.add(i);return Array.from(e)}function GI(t,e,n,i){const{iScale:r}=t,{key:s="r"}=this._parsing,o=new Array(i);let a,l,c,h;for(a=0,l=i;a<l;++a)c=a+n,h=e[c],o[a]={r:r.parse(yr(h,s),c)};return o}const V6=Number.EPSILON||1e-14,wo=(t,e)=>e<t.length&&!t[e].skip&&t[e],QI=t=>t==="x"?"y":"x";function F6(t,e,n,i){const r=t.skip?e:t,s=e,o=n.skip?e:n,a=Sg(s,r),l=Sg(o,s);let c=a/(a+l),h=l/(a+l);c=isNaN(c)?0:c,h=isNaN(h)?0:h;const d=i*c,f=i*h;return{previous:{x:s.x-d*(o.x-r.x),y:s.y-d*(o.y-r.y)},next:{x:s.x+f*(o.x-r.x),y:s.y+f*(o.y-r.y)}}}function j6(t,e,n){const i=t.length;let r,s,o,a,l,c=wo(t,0);for(let h=0;h<i-1;++h)if(l=c,c=wo(t,h+1),!(!l||!c)){if(La(e[h],0,V6)){n[h]=n[h+1]=0;continue}r=n[h]/e[h],s=n[h+1]/e[h],a=Math.pow(r,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),n[h]=r*o*e[h],n[h+1]=s*o*e[h])}}function U6(t,e,n="x"){const i=QI(n),r=t.length;let s,o,a,l=wo(t,0);for(let c=0;c<r;++c){if(o=a,a=l,l=wo(t,c+1),!a)continue;const h=a[n],d=a[i];o&&(s=(h-o[n])/3,a[`cp1${n}`]=h-s,a[`cp1${i}`]=d-s*e[c]),l&&(s=(l[n]-h)/3,a[`cp2${n}`]=h+s,a[`cp2${i}`]=d+s*e[c])}}function z6(t,e="x"){const n=QI(e),i=t.length,r=Array(i).fill(0),s=Array(i);let o,a,l,c=wo(t,0);for(o=0;o<i;++o)if(a=l,l=c,c=wo(t,o+1),!!l){if(c){const h=c[e]-l[e];r[o]=h!==0?(c[n]-l[n])/h:0}s[o]=a?c?Hn(r[o-1])!==Hn(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}j6(t,r,s),U6(t,s,e)}function Bc(t,e,n){return Math.max(Math.min(t,n),e)}function B6(t,e){let n,i,r,s,o,a=hi(t[0],e);for(n=0,i=t.length;n<i;++n)o=s,s=a,a=n<i-1&&hi(t[n+1],e),s&&(r=t[n],o&&(r.cp1x=Bc(r.cp1x,e.left,e.right),r.cp1y=Bc(r.cp1y,e.top,e.bottom)),a&&(r.cp2x=Bc(r.cp2x,e.left,e.right),r.cp2y=Bc(r.cp2y,e.top,e.bottom)))}function $6(t,e,n,i,r){let s,o,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")z6(t,r);else{let c=i?t[t.length-1]:t[0];for(s=0,o=t.length;s<o;++s)a=t[s],l=F6(c,a,t[Math.min(s+1,o-(i?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&B6(t,n)}function n_(){return typeof window<"u"&&typeof document<"u"}function i_(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Th(t,e,n){let i;return typeof t=="string"?(i=parseInt(t,10),t.indexOf("%")!==-1&&(i=i/100*e.parentNode[n])):i=t,i}const Td=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function H6(t,e){return Td(t).getPropertyValue(e)}const W6=["top","right","bottom","left"];function Gr(t,e,n){const i={};n=n?"-"+n:"";for(let r=0;r<4;r++){const s=W6[r];i[s]=parseFloat(t[e+"-"+s+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const q6=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function K6(t,e){const n=t.touches,i=n&&n.length?n[0]:t,{offsetX:r,offsetY:s}=i;let o=!1,a,l;if(q6(r,s,t.target))a=r,l=s;else{const c=e.getBoundingClientRect();a=i.clientX-c.left,l=i.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function Lr(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:i}=e,r=Td(n),s=r.boxSizing==="border-box",o=Gr(r,"padding"),a=Gr(r,"border","width"),{x:l,y:c,box:h}=K6(t,n),d=o.left+(h&&a.left),f=o.top+(h&&a.top);let{width:g,height:y}=e;return s&&(g-=o.width+a.width,y-=o.height+a.height),{x:Math.round((l-d)/g*n.width/i),y:Math.round((c-f)/y*n.height/i)}}function G6(t,e,n){let i,r;if(e===void 0||n===void 0){const s=t&&i_(t);if(!s)e=t.clientWidth,n=t.clientHeight;else{const o=s.getBoundingClientRect(),a=Td(s),l=Gr(a,"border","width"),c=Gr(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,i=Th(a.maxWidth,s,"clientWidth"),r=Th(a.maxHeight,s,"clientHeight")}}return{width:e,height:n,maxWidth:i||xh,maxHeight:r||xh}}const $c=t=>Math.round(t*10)/10;function Q6(t,e,n,i){const r=Td(t),s=Gr(r,"margin"),o=Th(r.maxWidth,t,"clientWidth")||xh,a=Th(r.maxHeight,t,"clientHeight")||xh,l=G6(t,e,n);let{width:c,height:h}=l;if(r.boxSizing==="content-box"){const f=Gr(r,"border","width"),g=Gr(r,"padding");c-=g.width+f.width,h-=g.height+f.height}return c=Math.max(0,c-s.width),h=Math.max(0,i?c/i:h-s.height),c=$c(Math.min(c,o,l.maxWidth)),h=$c(Math.min(h,a,l.maxHeight)),c&&!h&&(h=$c(c/2)),(e!==void 0||n!==void 0)&&i&&l.height&&h>l.height&&(h=l.height,c=$c(Math.floor(h*i))),{width:c,height:h}}function h1(t,e,n){const i=e||1,r=Math.floor(t.height*i),s=Math.floor(t.width*i);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==i||o.height!==r||o.width!==s?(t.currentDevicePixelRatio=i,o.height=r,o.width=s,t.ctx.setTransform(i,0,0,i,0,0),!0):!1}const Y6=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};n_()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function d1(t,e){const n=H6(t,e),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function Vr(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function X6(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:i==="middle"?n<.5?t.y:e.y:i==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function J6(t,e,n,i){const r={x:t.cp2x,y:t.cp2y},s={x:e.cp1x,y:e.cp1y},o=Vr(t,r,n),a=Vr(r,s,n),l=Vr(s,e,n),c=Vr(o,a,n),h=Vr(a,l,n);return Vr(c,h,n)}const Z6=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,i){return n-i},leftForLtr(n,i){return n-i}}},e5=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function to(t,e,n){return t?Z6(e,n):e5()}function YI(t,e){let n,i;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=i)}function XI(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function JI(t){return t==="angle"?{between:wl,compare:t6,normalize:Jt}:{between:ci,compare:(e,n)=>e-n,normalize:e=>e}}function f1({start:t,end:e,count:n,loop:i,style:r}){return{start:t%n,end:e%n,loop:i&&(e-t+1)%n===0,style:r}}function t5(t,e,n){const{property:i,start:r,end:s}=n,{between:o,normalize:a}=JI(i),l=e.length;let{start:c,end:h,loop:d}=t,f,g;if(d){for(c+=l,h+=l,f=0,g=l;f<g&&o(a(e[c%l][i]),r,s);++f)c--,h--;c%=l,h%=l}return h<c&&(h+=l),{start:c,end:h,loop:d,style:t.style}}function ZI(t,e,n){if(!n)return[t];const{property:i,start:r,end:s}=n,o=e.length,{compare:a,between:l,normalize:c}=JI(i),{start:h,end:d,loop:f,style:g}=t5(t,e,n),y=[];let x=!1,T=null,v,w,b;const A=()=>l(r,b,v)&&a(r,b)!==0,D=()=>a(s,v)===0||l(s,b,v),M=()=>x||A(),S=()=>!x||D();for(let E=h,P=h;E<=d;++E)w=e[E%o],!w.skip&&(v=c(w[i]),v!==b&&(x=l(v,r,s),T===null&&M()&&(T=a(v,r)===0?E:P),T!==null&&S()&&(y.push(f1({start:T,end:E,loop:f,count:o,style:g})),T=null),P=E,b=v));return T!==null&&y.push(f1({start:T,end:d,loop:f,count:o,style:g})),y}function e2(t,e){const n=[],i=t.segments;for(let r=0;r<i.length;r++){const s=ZI(i[r],t.points,e);s.length&&n.push(...s)}return n}function n5(t,e,n,i){let r=0,s=e-1;if(n&&!i)for(;r<e&&!t[r].skip;)r++;for(;r<e&&t[r].skip;)r++;for(r%=e,n&&(s+=r);s>r&&t[s%e].skip;)s--;return s%=e,{start:r,end:s}}function i5(t,e,n,i){const r=t.length,s=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%r];c.skip||c.stop?a.skip||(i=!1,s.push({start:e%r,end:(l-1)%r,loop:i}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&s.push({start:e%r,end:o%r,loop:i}),s}function r5(t,e){const n=t.points,i=t.options.spanGaps,r=n.length;if(!r)return[];const s=!!t._loop,{start:o,end:a}=n5(n,r,s,i);if(i===!0)return p1(t,[{start:o,end:a,loop:s}],n,e);const l=a<o?a+r:a,c=!!t._fullLoop&&o===0&&a===r-1;return p1(t,i5(n,o,l,c),n,e)}function p1(t,e,n,i){return!i||!i.setContext||!n?e:s5(t,e,n,i)}function s5(t,e,n,i){const r=t._chart.getContext(),s=g1(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let h=s,d=e[0].start,f=d;function g(y,x,T,v){const w=a?-1:1;if(y!==x){for(y+=l;n[y%l].skip;)y-=w;for(;n[x%l].skip;)x+=w;y%l!==x%l&&(c.push({start:y%l,end:x%l,loop:T,style:v}),h=v,d=x%l)}}for(const y of e){d=a?d:y.start;let x=n[d%l],T;for(f=d+1;f<=y.end;f++){const v=n[f%l];T=g1(i.setContext(br(r,{type:"segment",p0:x,p1:v,p0DataIndex:(f-1)%l,p1DataIndex:f%l,datasetIndex:o}))),o5(T,h)&&g(d,f-1,y.loop,h),x=v,h=T}d<f-1&&g(d,f-1,y.loop,h)}return c}function g1(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function o5(t,e){if(!e)return!1;const n=[],i=function(r,s){return Xy(s)?(n.includes(s)||n.push(s),n.indexOf(s)):s};return JSON.stringify(t,i)!==JSON.stringify(e,i)}/*!
 * Chart.js v4.4.8
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class a5{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,i,r){const s=n.listeners[r],o=n.duration;s.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(i-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=VI.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((i,r)=>{if(!i.running||!i.items.length)return;const s=i.items;let o=s.length-1,a=!1,l;for(;o>=0;--o)l=s[o],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(r.draw(),this._notify(r,i,e,"progress")),s.length||(i.running=!1,this._notify(r,i,e,"complete"),i.initial=!1),n+=s.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let i=n.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,i)),i}listen(e,n,i){this._getAnims(e).listeners[n].push(i)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((i,r)=>Math.max(i,r._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const i=n.items;let r=i.length-1;for(;r>=0;--r)i[r].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Xn=new a5;const m1="transparent",l5={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const i=o1(t||m1),r=i.valid&&o1(e||m1);return r&&r.valid?r.mix(i,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class c5{constructor(e,n,i,r){const s=n[i];r=ga([e.to,r,s,e.from]);const o=ga([e.from,s,r]);this._active=!0,this._fn=e.fn||l5[e.type||typeof o],this._easing=Va[e.easing]||Va.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=i,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(e,n,i){if(this._active){this._notify(!1);const r=this._target[this._prop],s=i-this._start,o=this._duration-s;this._start=i,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=ga([e.to,n,r,e.from]),this._from=ga([e.from,r,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,i=this._duration,r=this._prop,s=this._from,o=this._loop,a=this._to;let l;if(this._active=s!==a&&(o||n<i),!this._active){this._target[r]=a,this._notify(!0);return}if(n<0){this._target[r]=s;return}l=n/i%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[r]=this._fn(s,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,i)=>{e.push({res:n,rej:i})})}_notify(e){const n=e?"res":"rej",i=this._promises||[];for(let r=0;r<i.length;r++)i[r][n]()}}class t2{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!ue(e))return;const n=Object.keys(Le.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{const s=e[r];if(!ue(s))return;const o={};for(const a of n)o[a]=s[a];(Oe(s.properties)&&s.properties||[r]).forEach(a=>{(a===r||!i.has(a))&&i.set(a,o)})})}_animateOptions(e,n){const i=n.options,r=h5(e,i);if(!r)return[];const s=this._createAnimations(r,i);return i.$shared&&u5(e.options.$animations,i).then(()=>{e.options=i},()=>{}),s}_createAnimations(e,n){const i=this._properties,r=[],s=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){r.push(...this._animateOptions(e,n));continue}const h=n[c];let d=s[c];const f=i.get(c);if(d)if(f&&d.active()){d.update(f,h,a);continue}else d.cancel();if(!f||!f.duration){e[c]=h;continue}s[c]=d=new c5(f,e,c,h),r.push(d)}return r}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const i=this._createAnimations(e,n);if(i.length)return Xn.add(this._chart,i),!0}}function u5(t,e){const n=[],i=Object.keys(e);for(let r=0;r<i.length;r++){const s=t[i[r]];s&&s.active()&&n.push(s.wait())}return Promise.all(n)}function h5(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function y1(t,e){const n=t&&t.options||{},i=n.reverse,r=n.min===void 0?e:0,s=n.max===void 0?e:0;return{start:i?s:r,end:i?r:s}}function d5(t,e,n){if(n===!1)return!1;const i=y1(t,n),r=y1(e,n);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}function f5(t){let e,n,i,r;return ue(t)?(e=t.top,n=t.right,i=t.bottom,r=t.left):e=n=i=r=t,{top:e,right:n,bottom:i,left:r,disabled:t===!1}}function n2(t,e){const n=[],i=t._getSortedDatasetMetas(e);let r,s;for(r=0,s=i.length;r<s;++r)n.push(i[r].index);return n}function _1(t,e,n,i={}){const r=t.keys,s=i.mode==="single";let o,a,l,c;if(e===null)return;let h=!1;for(o=0,a=r.length;o<a;++o){if(l=+r[o],l===n){if(h=!0,i.all)continue;break}c=t.values[l],He(c)&&(s||e===0||Hn(e)===Hn(c))&&(e+=c)}return!h&&!i.all?0:e}function p5(t,e){const{iScale:n,vScale:i}=e,r=n.axis==="x"?"x":"y",s=i.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,c,h;for(l=0,c=o.length;l<c;++l)h=o[l],a[l]={[r]:h,[s]:t[h]};return a}function Bf(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function g5(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function m5(t){const{min:e,max:n,minDefined:i,maxDefined:r}=t.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}function y5(t,e,n){const i=t[e]||(t[e]={});return i[n]||(i[n]={})}function v1(t,e,n,i){for(const r of e.getMatchingVisibleMetas(i).reverse()){const s=t[r.index];if(n&&s>0||!n&&s<0)return r.index}return null}function w1(t,e){const{chart:n,_cachedMeta:i}=t,r=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=i,l=s.axis,c=o.axis,h=g5(s,o,i),d=e.length;let f;for(let g=0;g<d;++g){const y=e[g],{[l]:x,[c]:T}=y,v=y._stacks||(y._stacks={});f=v[c]=y5(r,h,x),f[a]=T,f._top=v1(f,o,!0,i.type),f._bottom=v1(f,o,!1,i.type);const w=f._visualValues||(f._visualValues={});w[a]=T}}function $f(t,e){const n=t.scales;return Object.keys(n).filter(i=>n[i].axis===e).shift()}function _5(t,e){return br(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function v5(t,e,n){return br(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function Zo(t,e){const n=t.controller.index,i=t.vScale&&t.vScale.axis;if(i){e=e||t._parsed;for(const r of e){const s=r._stacks;if(!s||s[i]===void 0||s[i][n]===void 0)return;delete s[i][n],s[i]._visualValues!==void 0&&s[i]._visualValues[n]!==void 0&&delete s[i]._visualValues[n]}}}const Hf=t=>t==="reset"||t==="none",x1=(t,e)=>e?t:Object.assign({},t),w5=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:n2(n,!0),values:null};class Tn{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Bf(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Zo(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,i=this.getDataset(),r=(d,f,g,y)=>d==="x"?f:d==="r"?y:g,s=n.xAxisID=re(i.xAxisID,$f(e,"x")),o=n.yAxisID=re(i.yAxisID,$f(e,"y")),a=n.rAxisID=re(i.rAxisID,$f(e,"r")),l=n.indexAxis,c=n.iAxisID=r(l,s,o,a),h=n.vAxisID=r(l,o,s,a);n.xScale=this.getScaleForId(s),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&i1(this._data,this),e._stacked&&Zo(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),i=this._data;if(ue(n)){const r=this._cachedMeta;this._data=p5(n,r)}else if(i!==n){if(i){i1(i,this);const r=this._cachedMeta;Zo(r),r._parsed=[]}n&&Object.isExtensible(n)&&s6(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,i=this.getDataset();let r=!1;this._dataCheck();const s=n._stacked;n._stacked=Bf(n.vScale,n),n.stack!==i.stack&&(r=!0,Zo(n),n.stack=i.stack),this._resyncElements(e),(r||s!==n._stacked)&&(w1(this,n._parsed),n._stacked=Bf(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:i,_data:r}=this,{iScale:s,_stacked:o}=i,a=s.axis;let l=e===0&&n===r.length?!0:i._sorted,c=e>0&&i._parsed[e-1],h,d,f;if(this._parsing===!1)i._parsed=r,i._sorted=!0,f=r;else{Oe(r[e])?f=this.parseArrayData(i,r,e,n):ue(r[e])?f=this.parseObjectData(i,r,e,n):f=this.parsePrimitiveData(i,r,e,n);const g=()=>d[a]===null||c&&d[a]<c[a];for(h=0;h<n;++h)i._parsed[h+e]=d=f[h],l&&(g()&&(l=!1),c=d);i._sorted=l}o&&w1(this,f)}parsePrimitiveData(e,n,i,r){const{iScale:s,vScale:o}=e,a=s.axis,l=o.axis,c=s.getLabels(),h=s===o,d=new Array(r);let f,g,y;for(f=0,g=r;f<g;++f)y=f+i,d[f]={[a]:h||s.parse(c[y],y),[l]:o.parse(n[y],y)};return d}parseArrayData(e,n,i,r){const{xScale:s,yScale:o}=e,a=new Array(r);let l,c,h,d;for(l=0,c=r;l<c;++l)h=l+i,d=n[h],a[l]={x:s.parse(d[0],h),y:o.parse(d[1],h)};return a}parseObjectData(e,n,i,r){const{xScale:s,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(r);let h,d,f,g;for(h=0,d=r;h<d;++h)f=h+i,g=n[f],c[h]={x:s.parse(yr(g,a),f),y:o.parse(yr(g,l),f)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,i){const r=this.chart,s=this._cachedMeta,o=n[e.axis],a={keys:n2(r,!0),values:n._stacks[e.axis]._visualValues};return _1(a,o,s.index,{mode:i})}updateRangeFromParsed(e,n,i,r){const s=i[n.axis];let o=s===null?NaN:s;const a=r&&i._stacks[n.axis];r&&a&&(r.values=a,o=_1(r,s,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const i=this._cachedMeta,r=i._parsed,s=i._sorted&&e===i.iScale,o=r.length,a=this._getOtherScale(e),l=w5(n,i,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:d}=m5(a);let f,g;function y(){g=r[f];const x=g[a.axis];return!He(g[e.axis])||h>x||d<x}for(f=0;f<o&&!(!y()&&(this.updateRangeFromParsed(c,e,g,l),s));++f);if(s){for(f=o-1;f>=0;--f)if(!y()){this.updateRangeFromParsed(c,e,g,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,i=[];let r,s,o;for(r=0,s=n.length;r<s;++r)o=n[r][e.axis],He(o)&&i.push(o);return i}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,i=n.iScale,r=n.vScale,s=this.getParsed(e);return{label:i?""+i.getLabelForValue(s[i.axis]):"",value:r?""+r.getLabelForValue(s[r.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=f5(re(this.options.clip,d5(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,i=this._cachedMeta,r=i.data||[],s=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||r.length-a,c=this.options.drawActiveElementsOnTop;let h;for(i.dataset&&i.dataset.draw(e,s,a,l),h=a;h<a+l;++h){const d=r[h];d.hidden||(d.active&&c?o.push(d):d.draw(e,s))}for(h=0;h<o.length;++h)o[h].draw(e,s)}getStyle(e,n){const i=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,n,i){const r=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];s=o.$context||(o.$context=v5(this.getContext(),e,o)),s.parsed=this.getParsed(e),s.raw=r.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=_5(this.chart.getContext(),this.index)),s.dataset=r,s.index=s.datasetIndex=this.index;return s.active=!!n,s.mode=i,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",i){const r=n==="active",s=this._cachedDataOpts,o=e+"-"+n,a=s[o],l=this.enableOptionSharing&&vl(i);if(a)return x1(a,l);const c=this.chart.config,h=c.datasetElementScopeKeys(this._type,e),d=r?[`${e}Hover`,"hover",e,""]:[e,""],f=c.getOptionScopes(this.getDataset(),h),g=Object.keys(Le.elements[e]),y=()=>this.getContext(i,r,n),x=c.resolveNamedOptions(f,g,y,d);return x.$shared&&(x.$shared=l,s[o]=Object.freeze(x1(x,l))),x}_resolveAnimations(e,n,i){const r=this.chart,s=this._cachedDataOpts,o=`animation-${n}`,a=s[o];if(a)return a;let l;if(r.options.animation!==!1){const h=this.chart.config,d=h.datasetAnimationScopeKeys(this._type,n),f=h.getOptionScopes(this.getDataset(),d);l=h.createResolver(f,this.getContext(e,i,n))}const c=new t2(r,l&&l.animations);return l&&l._cacheable&&(s[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||Hf(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const i=this.resolveDataElementOptions(e,n),r=this._sharedOptions,s=this.getSharedOptions(i),o=this.includeOptions(n,s)||s!==r;return this.updateSharedOptions(s,n,i),{sharedOptions:s,includeOptions:o}}updateElement(e,n,i,r){Hf(r)?Object.assign(e,i):this._resolveAnimations(n,r).update(e,i)}updateSharedOptions(e,n,i){e&&!Hf(n)&&this._resolveAnimations(void 0,n).update(e,i)}_setStyle(e,n,i,r){e.active=r;const s=this.getStyle(n,r);this._resolveAnimations(n,i,r).update(e,{options:!r&&this.getSharedOptions(s)||s})}removeHoverStyle(e,n,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,n,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,i=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const r=i.length,s=n.length,o=Math.min(s,r);o&&this.parse(0,o),s>r?this._insertElements(r,s-r,e):s<r&&this._removeElements(s,r-s)}_insertElements(e,n,i=!0){const r=this._cachedMeta,s=r.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(s),a=e;a<o;++a)s[a]=new this.dataElementType;this._parsing&&l(r._parsed),this.parse(e,n),i&&this.updateElements(s,e,n,"reset")}updateElements(e,n,i,r){}_removeElements(e,n){const i=this._cachedMeta;if(this._parsing){const r=i._parsed.splice(e,n);i._stacked&&Zo(i,r)}i.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,i,r]=e;this[n](i,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}H(Tn,"defaults",{}),H(Tn,"datasetElementType",null),H(Tn,"dataElementType",null);function x5(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let i=[];for(let r=0,s=n.length;r<s;r++)i=i.concat(n[r].controller.getAllParsedValues(t));t._cache.$bar=LI(i.sort((r,s)=>r-s))}return t._cache.$bar}function E5(t){const e=t.iScale,n=x5(e,t.type);let i=e._length,r,s,o,a;const l=()=>{o===32767||o===-32768||(vl(a)&&(i=Math.min(i,Math.abs(o-a)||i)),a=o)};for(r=0,s=n.length;r<s;++r)o=e.getPixelForValue(n[r]),l();for(a=void 0,r=0,s=e.ticks.length;r<s;++r)o=e.getPixelForTick(r),l();return i}function T5(t,e,n,i){const r=n.barThickness;let s,o;return oe(r)?(s=e.min*n.categoryPercentage,o=n.barPercentage):(s=r*i,o=1),{chunk:s/i,ratio:o,start:e.pixels[t]-s/2}}function b5(t,e,n,i){const r=e.pixels,s=r[t];let o=t>0?r[t-1]:null,a=t<r.length-1?r[t+1]:null;const l=n.categoryPercentage;o===null&&(o=s-(a===null?e.end-e.start:a-s)),a===null&&(a=s+s-o);const c=s-(s-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/i,ratio:n.barPercentage,start:c}}function S5(t,e,n,i){const r=n.parse(t[0],i),s=n.parse(t[1],i),o=Math.min(r,s),a=Math.max(r,s);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),e[n.axis]=c,e._custom={barStart:l,barEnd:c,start:r,end:s,min:o,max:a}}function i2(t,e,n,i){return Oe(t)?S5(t,e,n,i):e[n.axis]=n.parse(t,i),e}function E1(t,e,n,i){const r=t.iScale,s=t.vScale,o=r.getLabels(),a=r===s,l=[];let c,h,d,f;for(c=n,h=n+i;c<h;++c)f=e[c],d={},d[r.axis]=a||r.parse(o[c],c),l.push(i2(f,d,s,c));return l}function Wf(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function I5(t,e,n){return t!==0?Hn(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function k5(t){let e,n,i,r,s;return t.horizontal?(e=t.base>t.x,n="left",i="right"):(e=t.base<t.y,n="bottom",i="top"),e?(r="end",s="start"):(r="start",s="end"),{start:n,end:i,reverse:e,top:r,bottom:s}}function P5(t,e,n,i){let r=e.borderSkipped;const s={};if(!r){t.borderSkipped=s;return}if(r===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:c,bottom:h}=k5(t);r==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===i?r=c:(n._bottom||0)===i?r=h:(s[T1(h,o,a,l)]=!0,r=c)),s[T1(r,o,a,l)]=!0,t.borderSkipped=s}function T1(t,e,n,i){return i?(t=A5(t,e,n),t=b1(t,n,e)):t=b1(t,e,n),t}function A5(t,e,n){return t===e?n:t===n?e:t}function b1(t,e,n){return t==="start"?e:t==="end"?n:t}function C5(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class wu extends Tn{parsePrimitiveData(e,n,i,r){return E1(e,n,i,r)}parseArrayData(e,n,i,r){return E1(e,n,i,r)}parseObjectData(e,n,i,r){const{iScale:s,vScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=s.axis==="x"?a:l,h=o.axis==="x"?a:l,d=[];let f,g,y,x;for(f=i,g=i+r;f<g;++f)x=n[f],y={},y[s.axis]=s.parse(yr(x,c),f),d.push(i2(yr(x,h),y,o,f));return d}updateRangeFromParsed(e,n,i,r){super.updateRangeFromParsed(e,n,i,r);const s=i._custom;s&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,s.min),e.max=Math.max(e.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:i,vScale:r}=n,s=this.getParsed(e),o=s._custom,a=Wf(o)?"["+o.start+", "+o.end+"]":""+r.getLabelForValue(s[r.axis]);return{label:""+i.getLabelForValue(s[i.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,i,r){const s=r==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),h=this._getRuler(),{sharedOptions:d,includeOptions:f}=this._getSharedOptions(n,r);for(let g=n;g<n+i;g++){const y=this.getParsed(g),x=s||oe(y[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(g),T=this._calculateBarIndexPixels(g,h),v=(y._stacks||{})[a.axis],w={horizontal:c,base:x.base,enableBorderRadius:!v||Wf(y._custom)||o===v._top||o===v._bottom,x:c?x.head:T.center,y:c?T.center:x.head,height:c?T.size:Math.abs(x.size),width:c?Math.abs(x.size):T.size};f&&(w.options=d||this.resolveDataElementOptions(g,e[g].active?"active":r));const b=w.options||e[g].options;P5(w,b,v,o),C5(w,b,h.ratio),this.updateElement(e[g],g,w,r)}}_getStacks(e,n){const{iScale:i}=this._cachedMeta,r=i.getMatchingVisibleMetas(this._type).filter(h=>h.controller.options.grouped),s=i.options.stacked,o=[],a=this._cachedMeta.controller.getParsed(n),l=a&&a[i.axis],c=h=>{const d=h._parsed.find(g=>g[i.axis]===l),f=d&&d[h.vScale.axis];if(oe(f)||isNaN(f))return!0};for(const h of r)if(!(n!==void 0&&c(h))&&((s===!1||o.indexOf(h.stack)===-1||s===void 0&&h.stack===void 0)&&o.push(h.stack),h.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,n,i){const r=this._getStacks(e,i),s=n!==void 0?r.indexOf(n):-1;return s===-1?r.length-1:s}_getRuler(){const e=this.options,n=this._cachedMeta,i=n.iScale,r=[];let s,o;for(s=0,o=n.data.length;s<o;++s)r.push(i.getPixelForValue(this.getParsed(s)[i.axis],s));const a=e.barThickness;return{min:a||E5(n),pixels:r,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:i,index:r},options:{base:s,minBarLength:o}}=this,a=s||0,l=this.getParsed(e),c=l._custom,h=Wf(c);let d=l[n.axis],f=0,g=i?this.applyStack(n,l,i):d,y,x;g!==d&&(f=g-d,g=d),h&&(d=c.barStart,g=c.barEnd-c.barStart,d!==0&&Hn(d)!==Hn(c.barEnd)&&(f=0),f+=d);const T=!oe(s)&&!h?s:f;let v=n.getPixelForValue(T);if(this.chart.getDataVisibility(e)?y=n.getPixelForValue(f+g):y=v,x=y-v,Math.abs(x)<o){x=I5(x,n,a)*o,d===a&&(v-=x/2);const w=n.getPixelForDecimal(0),b=n.getPixelForDecimal(1),A=Math.min(w,b),D=Math.max(w,b);v=Math.max(Math.min(v,D),A),y=v+x,i&&!h&&(l._stacks[n.axis]._visualValues[r]=n.getValueForPixel(y)-n.getValueForPixel(v))}if(v===n.getPixelForValue(a)){const w=Hn(x)*n.getLineWidthForValue(a)/2;v+=w,x-=w}return{size:x,base:v,head:y,center:y+x/2}}_calculateBarIndexPixels(e,n){const i=n.scale,r=this.options,s=r.skipNull,o=re(r.maxBarThickness,1/0);let a,l;if(n.grouped){const c=s?this._getStackCount(e):n.stackCount,h=r.barThickness==="flex"?b5(e,n,r,c):T5(e,n,r,c),d=this._getStackIndex(this.index,this._cachedMeta.stack,s?e:void 0);a=h.start+h.chunk*d+h.chunk/2,l=Math.min(o,h.chunk*h.ratio)}else a=i.getPixelForValue(this.getParsed(e)[i.axis],e),l=Math.min(o,n.min*n.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,n=e.vScale,i=e.data,r=i.length;let s=0;for(;s<r;++s)this.getParsed(s)[n.axis]!==null&&!i[s].hidden&&i[s].draw(this._ctx)}}H(wu,"id","bar"),H(wu,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),H(wu,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class xu extends Tn{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,n,i,r){const s=super.parsePrimitiveData(e,n,i,r);for(let o=0;o<s.length;o++)s[o]._custom=this.resolveDataElementOptions(o+i).radius;return s}parseArrayData(e,n,i,r){const s=super.parseArrayData(e,n,i,r);for(let o=0;o<s.length;o++){const a=n[i+o];s[o]._custom=re(a[2],this.resolveDataElementOptions(o+i).radius)}return s}parseObjectData(e,n,i,r){const s=super.parseObjectData(e,n,i,r);for(let o=0;o<s.length;o++){const a=n[i+o];s[o]._custom=re(a&&a.r&&+a.r,this.resolveDataElementOptions(o+i).radius)}return s}getMaxOverflow(){const e=this._cachedMeta.data;let n=0;for(let i=e.length-1;i>=0;--i)n=Math.max(n,e[i].size(this.resolveDataElementOptions(i))/2);return n>0&&n}getLabelAndValue(e){const n=this._cachedMeta,i=this.chart.data.labels||[],{xScale:r,yScale:s}=n,o=this.getParsed(e),a=r.getLabelForValue(o.x),l=s.getLabelForValue(o.y),c=o._custom;return{label:i[e]||"",value:"("+a+", "+l+(c?", "+c:"")+")"}}update(e){const n=this._cachedMeta.data;this.updateElements(n,0,n.length,e)}updateElements(e,n,i,r){const s=r==="reset",{iScale:o,vScale:a}=this._cachedMeta,{sharedOptions:l,includeOptions:c}=this._getSharedOptions(n,r),h=o.axis,d=a.axis;for(let f=n;f<n+i;f++){const g=e[f],y=!s&&this.getParsed(f),x={},T=x[h]=s?o.getPixelForDecimal(.5):o.getPixelForValue(y[h]),v=x[d]=s?a.getBasePixel():a.getPixelForValue(y[d]);x.skip=isNaN(T)||isNaN(v),c&&(x.options=l||this.resolveDataElementOptions(f,g.active?"active":r),s&&(x.options.radius=0)),this.updateElement(g,f,x,r)}}resolveDataElementOptions(e,n){const i=this.getParsed(e);let r=super.resolveDataElementOptions(e,n);r.$shared&&(r=Object.assign({},r,{$shared:!1}));const s=r.radius;return n!=="active"&&(r.radius=0),r.radius+=re(i&&i._custom,s),r}}H(xu,"id","bubble"),H(xu,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),H(xu,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function R5(t,e,n){let i=1,r=1,s=0,o=0;if(e<Ne){const a=t,l=a+e,c=Math.cos(a),h=Math.sin(a),d=Math.cos(l),f=Math.sin(l),g=(b,A,D)=>wl(b,a,l,!0)?1:Math.max(A,A*n,D,D*n),y=(b,A,D)=>wl(b,a,l,!0)?-1:Math.min(A,A*n,D,D*n),x=g(0,c,d),T=g(Qe,h,f),v=y(De,c,d),w=y(De+Qe,h,f);i=(x-v)/2,r=(T-w)/2,s=-(x+v)/2,o=-(T+w)/2}return{ratioX:i,ratioY:r,offsetX:s,offsetY:o}}class Br extends Tn{constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const i=this.getDataset().data,r=this._cachedMeta;if(this._parsing===!1)r._parsed=i;else{let s=l=>+i[l];if(ue(i[e])){const{key:l="value"}=this._parsing;s=c=>+yr(i[c],l)}let o,a;for(o=e,a=e+n;o<a;++o)r._parsed[o]=s(o)}}_getRotation(){return vn(this.options.rotation-90)}_getCircumference(){return vn(this.options.circumference)}_getRotationExtents(){let e=Ne,n=-Ne;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const r=this.chart.getDatasetMeta(i).controller,s=r._getRotation(),o=r._getCircumference();e=Math.min(e,s),n=Math.max(n,s+o)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:i}=n,r=this._cachedMeta,s=r.data,o=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,a=Math.max((Math.min(i.width,i.height)-o)/2,0),l=Math.min(HV(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:h,rotation:d}=this._getRotationExtents(),{ratioX:f,ratioY:g,offsetX:y,offsetY:x}=R5(d,h,l),T=(i.width-o)/f,v=(i.height-o)/g,w=Math.max(Math.min(T,v)/2,0),b=RI(this.options.radius,w),A=Math.max(b*l,0),D=(b-A)/this._getVisibleDatasetWeightTotal();this.offsetX=y*b,this.offsetY=x*b,r.total=this.calculateTotal(),this.outerRadius=b-D*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-D*c,0),this.updateElements(s,0,s.length,e)}_circumference(e,n){const i=this.options,r=this._cachedMeta,s=this._getCircumference();return n&&i.animation.animateRotate||!this.chart.getDataVisibility(e)||r._parsed[e]===null||r.data[e].hidden?0:this.calculateCircumference(r._parsed[e]*s/Ne)}updateElements(e,n,i,r){const s=r==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,h=(a.left+a.right)/2,d=(a.top+a.bottom)/2,f=s&&c.animateScale,g=f?0:this.innerRadius,y=f?0:this.outerRadius,{sharedOptions:x,includeOptions:T}=this._getSharedOptions(n,r);let v=this._getRotation(),w;for(w=0;w<n;++w)v+=this._circumference(w,s);for(w=n;w<n+i;++w){const b=this._circumference(w,s),A=e[w],D={x:h+this.offsetX,y:d+this.offsetY,startAngle:v,endAngle:v+b,circumference:b,outerRadius:y,innerRadius:g};T&&(D.options=x||this.resolveDataElementOptions(w,A.active?"active":r)),v+=b,this.updateElement(A,w,D,r)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let i=0,r;for(r=0;r<n.length;r++){const s=e._parsed[r];s!==null&&!isNaN(s)&&this.chart.getDataVisibility(r)&&!n[r].hidden&&(i+=Math.abs(s))}return i}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?Ne*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,i=this.chart,r=i.data.labels||[],s=ql(n._parsed[e],i.options.locale);return{label:r[e]||"",value:s}}getMaxBorderWidth(e){let n=0;const i=this.chart;let r,s,o,a,l;if(!e){for(r=0,s=i.data.datasets.length;r<s;++r)if(i.isDatasetVisible(r)){o=i.getDatasetMeta(r),e=o.data,a=o.controller;break}}if(!e)return 0;for(r=0,s=e.length;r<s;++r)l=a.resolveDataElementOptions(r),l.borderAlign!=="inner"&&(n=Math.max(n,l.borderWidth||0,l.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let i=0,r=e.length;i<r;++i){const s=this.resolveDataElementOptions(i);n=Math.max(n,s.offset||0,s.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let i=0;i<e;++i)this.chart.isDatasetVisible(i)&&(n+=this._getRingWeight(i));return n}_getRingWeight(e){return Math.max(re(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}H(Br,"id","doughnut"),H(Br,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),H(Br,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),H(Br,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:i,color:r}}=e.legend.options;return n.labels.map((s,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:s,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:r,lineWidth:l.borderWidth,pointStyle:i,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,n,i){i.chart.toggleDataVisibility(n.index),i.chart.update()}}}});class Eu extends Tn{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:i,data:r=[],_dataset:s}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=jI(n,r,o);this._drawStart=a,this._drawCount=l,UI(n)&&(a=0,l=r.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!s._decimated,i.points=r;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(i,void 0,{animated:!o,options:c},e),this.updateElements(r,a,l,e)}updateElements(e,n,i,r){const s=r==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:h,includeOptions:d}=this._getSharedOptions(n,r),f=o.axis,g=a.axis,{spanGaps:y,segment:x}=this.options,T=_o(y)?y:Number.POSITIVE_INFINITY,v=this.chart._animationsDisabled||s||r==="none",w=n+i,b=e.length;let A=n>0&&this.getParsed(n-1);for(let D=0;D<b;++D){const M=e[D],S=v?M:{};if(D<n||D>=w){S.skip=!0;continue}const E=this.getParsed(D),P=oe(E[g]),k=S[f]=o.getPixelForValue(E[f],D),C=S[g]=s||P?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,E,l):E[g],D);S.skip=isNaN(k)||isNaN(C)||P,S.stop=D>0&&Math.abs(E[f]-A[f])>T,x&&(S.parsed=E,S.raw=c.data[D]),d&&(S.options=h||this.resolveDataElementOptions(D,M.active?"active":r)),v||this.updateElement(M,D,S,r),A=E}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,i=n.options&&n.options.borderWidth||0,r=e.data||[];if(!r.length)return i;const s=r[0].size(this.resolveDataElementOptions(0)),o=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(i,s,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}H(Eu,"id","line"),H(Eu,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),H(Eu,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class ja extends Tn{constructor(e,n){super(e,n),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const n=this._cachedMeta,i=this.chart,r=i.data.labels||[],s=ql(n._parsed[e].r,i.options.locale);return{label:r[e]||"",value:s}}parseObjectData(e,n,i,r){return GI.bind(this)(e,n,i,r)}update(e){const n=this._cachedMeta.data;this._updateRadius(),this.updateElements(n,0,n.length,e)}getMinMax(){const e=this._cachedMeta,n={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((i,r)=>{const s=this.getParsed(r).r;!isNaN(s)&&this.chart.getDataVisibility(r)&&(s<n.min&&(n.min=s),s>n.max&&(n.max=s))}),n}_updateRadius(){const e=this.chart,n=e.chartArea,i=e.options,r=Math.min(n.right-n.left,n.bottom-n.top),s=Math.max(r/2,0),o=Math.max(i.cutoutPercentage?s/100*i.cutoutPercentage:1,0),a=(s-o)/e.getVisibleDatasetCount();this.outerRadius=s-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(e,n,i,r){const s=r==="reset",o=this.chart,l=o.options.animation,c=this._cachedMeta.rScale,h=c.xCenter,d=c.yCenter,f=c.getIndexAngle(0)-.5*De;let g=f,y;const x=360/this.countVisibleElements();for(y=0;y<n;++y)g+=this._computeAngle(y,r,x);for(y=n;y<n+i;y++){const T=e[y];let v=g,w=g+this._computeAngle(y,r,x),b=o.getDataVisibility(y)?c.getDistanceFromCenterForValue(this.getParsed(y).r):0;g=w,s&&(l.animateScale&&(b=0),l.animateRotate&&(v=w=f));const A={x:h,y:d,innerRadius:0,outerRadius:b,startAngle:v,endAngle:w,options:this.resolveDataElementOptions(y,T.active?"active":r)};this.updateElement(T,y,A,r)}}countVisibleElements(){const e=this._cachedMeta;let n=0;return e.data.forEach((i,r)=>{!isNaN(this.getParsed(r).r)&&this.chart.getDataVisibility(r)&&n++}),n}_computeAngle(e,n,i){return this.chart.getDataVisibility(e)?vn(this.resolveDataElementOptions(e,n).angle||i):0}}H(ja,"id","polarArea"),H(ja,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),H(ja,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:i,color:r}}=e.legend.options;return n.labels.map((s,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:s,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:r,lineWidth:l.borderWidth,pointStyle:i,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,n,i){i.chart.toggleDataVisibility(n.index),i.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class Pg extends Br{}H(Pg,"id","pie"),H(Pg,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class Tu extends Tn{getLabelAndValue(e){const n=this._cachedMeta.vScale,i=this.getParsed(e);return{label:n.getLabels()[e],value:""+n.getLabelForValue(i[n.axis])}}parseObjectData(e,n,i,r){return GI.bind(this)(e,n,i,r)}update(e){const n=this._cachedMeta,i=n.dataset,r=n.data||[],s=n.iScale.getLabels();if(i.points=r,e!=="resize"){const o=this.resolveDatasetElementOptions(e);this.options.showLine||(o.borderWidth=0);const a={_loop:!0,_fullLoop:s.length===r.length,options:o};this.updateElement(i,void 0,a,e)}this.updateElements(r,0,r.length,e)}updateElements(e,n,i,r){const s=this._cachedMeta.rScale,o=r==="reset";for(let a=n;a<n+i;a++){const l=e[a],c=this.resolveDataElementOptions(a,l.active?"active":r),h=s.getPointPositionForValue(a,this.getParsed(a).r),d=o?s.xCenter:h.x,f=o?s.yCenter:h.y,g={x:d,y:f,angle:h.angle,skip:isNaN(d)||isNaN(f),options:c};this.updateElement(l,a,g,r)}}}H(Tu,"id","radar"),H(Tu,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),H(Tu,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class bu extends Tn{getLabelAndValue(e){const n=this._cachedMeta,i=this.chart.data.labels||[],{xScale:r,yScale:s}=n,o=this.getParsed(e),a=r.getLabelForValue(o.x),l=s.getLabelForValue(o.y);return{label:i[e]||"",value:"("+a+", "+l+")"}}update(e){const n=this._cachedMeta,{data:i=[]}=n,r=this.chart._animationsDisabled;let{start:s,count:o}=jI(n,i,r);if(this._drawStart=s,this._drawCount=o,UI(n)&&(s=0,o=i.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:l}=n;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=i;const c=this.resolveDatasetElementOptions(e);c.segment=this.options.segment,this.updateElement(a,void 0,{animated:!r,options:c},e)}else this.datasetElementType&&(delete n.dataset,this.datasetElementType=!1);this.updateElements(i,s,o,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,n,i,r){const s=r==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,h=this.resolveDataElementOptions(n,r),d=this.getSharedOptions(h),f=this.includeOptions(r,d),g=o.axis,y=a.axis,{spanGaps:x,segment:T}=this.options,v=_o(x)?x:Number.POSITIVE_INFINITY,w=this.chart._animationsDisabled||s||r==="none";let b=n>0&&this.getParsed(n-1);for(let A=n;A<n+i;++A){const D=e[A],M=this.getParsed(A),S=w?D:{},E=oe(M[y]),P=S[g]=o.getPixelForValue(M[g],A),k=S[y]=s||E?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,M,l):M[y],A);S.skip=isNaN(P)||isNaN(k)||E,S.stop=A>0&&Math.abs(M[g]-b[g])>v,T&&(S.parsed=M,S.raw=c.data[A]),f&&(S.options=d||this.resolveDataElementOptions(A,D.active?"active":r)),w||this.updateElement(D,A,S,r),b=M}this.updateSharedOptions(d,r,h)}getMaxOverflow(){const e=this._cachedMeta,n=e.data||[];if(!this.options.showLine){let a=0;for(let l=n.length-1;l>=0;--l)a=Math.max(a,n[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}const i=e.dataset,r=i.options&&i.options.borderWidth||0;if(!n.length)return r;const s=n[0].size(this.resolveDataElementOptions(0)),o=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(r,s,o)/2}}H(bu,"id","scatter"),H(bu,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),H(bu,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var N5=Object.freeze({__proto__:null,BarController:wu,BubbleController:xu,DoughnutController:Br,LineController:Eu,PieController:Pg,PolarAreaController:ja,RadarController:Tu,ScatterController:bu});function Rr(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class r_{constructor(e){H(this,"options");this.options=e||{}}static override(e){Object.assign(r_.prototype,e)}init(){}formats(){return Rr()}parse(){return Rr()}format(){return Rr()}add(){return Rr()}diff(){return Rr()}startOf(){return Rr()}endOf(){return Rr()}}var D5={_date:r_};function M5(t,e,n,i){const{controller:r,data:s,_sorted:o}=t,a=r._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&s.length){const c=a._reversePixels?i6:ui;if(i){if(r._sharedOptions){const h=s[0],d=typeof h.getRange=="function"&&h.getRange(e);if(d){const f=c(s,e,n-d),g=c(s,e,n+d);return{lo:f.lo,hi:g.hi}}}}else{const h=c(s,e,n);if(l){const{vScale:d}=r._cachedMeta,{_parsed:f}=t,g=f.slice(0,h.lo+1).reverse().findIndex(x=>!oe(x[d.axis]));h.lo-=Math.max(0,g);const y=f.slice(h.hi).findIndex(x=>!oe(x[d.axis]));h.hi+=Math.max(0,y)}return h}}return{lo:0,hi:s.length-1}}function bd(t,e,n,i,r){const s=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=s.length;a<l;++a){const{index:c,data:h}=s[a],{lo:d,hi:f}=M5(s[a],e,o,r);for(let g=d;g<=f;++g){const y=h[g];y.skip||i(y,c,g)}}}function O5(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(i,r){const s=e?Math.abs(i.x-r.x):0,o=n?Math.abs(i.y-r.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function qf(t,e,n,i,r){const s=[];return!r&&!t.isPointInArea(e)||bd(t,n,e,function(a,l,c){!r&&!hi(a,t.chartArea,0)||a.inRange(e.x,e.y,i)&&s.push({element:a,datasetIndex:l,index:c})},!0),s}function L5(t,e,n,i){let r=[];function s(o,a,l){const{startAngle:c,endAngle:h}=o.getProps(["startAngle","endAngle"],i),{angle:d}=MI(o,{x:e.x,y:e.y});wl(d,c,h)&&r.push({element:o,datasetIndex:a,index:l})}return bd(t,n,e,s),r}function V5(t,e,n,i,r,s){let o=[];const a=O5(n);let l=Number.POSITIVE_INFINITY;function c(h,d,f){const g=h.inRange(e.x,e.y,r);if(i&&!g)return;const y=h.getCenterPoint(r);if(!(!!s||t.isPointInArea(y))&&!g)return;const T=a(e,y);T<l?(o=[{element:h,datasetIndex:d,index:f}],l=T):T===l&&o.push({element:h,datasetIndex:d,index:f})}return bd(t,n,e,c),o}function Kf(t,e,n,i,r,s){return!s&&!t.isPointInArea(e)?[]:n==="r"&&!i?L5(t,e,n,r):V5(t,e,n,i,r,s)}function S1(t,e,n,i,r){const s=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return bd(t,n,e,(l,c,h)=>{l[o]&&l[o](e[n],r)&&(s.push({element:l,datasetIndex:c,index:h}),a=a||l.inRange(e.x,e.y,r))}),i&&!a?[]:s}var F5={modes:{index(t,e,n,i){const r=Lr(e,t),s=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?qf(t,r,s,i,o):Kf(t,r,s,!1,i,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const h=a[0].index,d=c.data[h];d&&!d.skip&&l.push({element:d,datasetIndex:c.index,index:h})}),l):[]},dataset(t,e,n,i){const r=Lr(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?qf(t,r,s,i,o):Kf(t,r,s,!1,i,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let h=0;h<c.length;++h)a.push({element:c[h],datasetIndex:l,index:h})}return a},point(t,e,n,i){const r=Lr(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return qf(t,r,s,i,o)},nearest(t,e,n,i){const r=Lr(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return Kf(t,r,s,n.intersect,i,o)},x(t,e,n,i){const r=Lr(e,t);return S1(t,r,"x",n.intersect,i)},y(t,e,n,i){const r=Lr(e,t);return S1(t,r,"y",n.intersect,i)}}};const r2=["left","top","right","bottom"];function ea(t,e){return t.filter(n=>n.pos===e)}function I1(t,e){return t.filter(n=>r2.indexOf(n.pos)===-1&&n.box.axis===e)}function ta(t,e){return t.sort((n,i)=>{const r=e?i:n,s=e?n:i;return r.weight===s.weight?r.index-s.index:r.weight-s.weight})}function j5(t){const e=[];let n,i,r,s,o,a;for(n=0,i=(t||[]).length;n<i;++n)r=t[n],{position:s,options:{stack:o,stackWeight:a=1}}=r,e.push({index:n,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&s+o,stackWeight:a});return e}function U5(t){const e={};for(const n of t){const{stack:i,pos:r,stackWeight:s}=n;if(!i||!r2.includes(r))continue;const o=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function z5(t,e){const n=U5(t),{vBoxMaxWidth:i,hBoxMaxHeight:r}=e;let s,o,a;for(s=0,o=t.length;s<o;++s){a=t[s];const{fullSize:l}=a.box,c=n[a.stack],h=c&&a.stackWeight/c.weight;a.horizontal?(a.width=h?h*i:l&&e.availableWidth,a.height=r):(a.width=i,a.height=h?h*r:l&&e.availableHeight)}return n}function B5(t){const e=j5(t),n=ta(e.filter(c=>c.box.fullSize),!0),i=ta(ea(e,"left"),!0),r=ta(ea(e,"right")),s=ta(ea(e,"top"),!0),o=ta(ea(e,"bottom")),a=I1(e,"x"),l=I1(e,"y");return{fullSize:n,leftAndTop:i.concat(s),rightAndBottom:r.concat(l).concat(o).concat(a),chartArea:ea(e,"chartArea"),vertical:i.concat(r).concat(l),horizontal:s.concat(o).concat(a)}}function k1(t,e,n,i){return Math.max(t[n],e[n])+Math.max(t[i],e[i])}function s2(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function $5(t,e,n,i){const{pos:r,box:s}=n,o=t.maxPadding;if(!ue(r)){n.size&&(t[r]-=n.size);const d=i[n.stack]||{size:0,count:1};d.size=Math.max(d.size,n.horizontal?s.height:s.width),n.size=d.size/d.count,t[r]+=n.size}s.getPadding&&s2(o,s.getPadding());const a=Math.max(0,e.outerWidth-k1(o,t,"left","right")),l=Math.max(0,e.outerHeight-k1(o,t,"top","bottom")),c=a!==t.w,h=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:h}:{same:h,other:c}}function H5(t){const e=t.maxPadding;function n(i){const r=Math.max(e[i]-t[i],0);return t[i]+=r,r}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function W5(t,e){const n=e.maxPadding;function i(r){const s={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{s[o]=Math.max(e[o],n[o])}),s}return i(t?["left","right"]:["top","bottom"])}function ma(t,e,n,i){const r=[];let s,o,a,l,c,h;for(s=0,o=t.length,c=0;s<o;++s){a=t[s],l=a.box,l.update(a.width||e.w,a.height||e.h,W5(a.horizontal,e));const{same:d,other:f}=$5(e,n,a,i);c|=d&&r.length,h=h||f,l.fullSize||r.push(a)}return c&&ma(r,e,n,i)||h}function Hc(t,e,n,i,r){t.top=n,t.left=e,t.right=e+i,t.bottom=n+r,t.width=i,t.height=r}function P1(t,e,n,i){const r=n.padding;let{x:s,y:o}=e;for(const a of t){const l=a.box,c=i[a.stack]||{placed:0,weight:1},h=a.stackWeight/c.weight||1;if(a.horizontal){const d=e.w*h,f=c.size||l.height;vl(c.start)&&(o=c.start),l.fullSize?Hc(l,r.left,o,n.outerWidth-r.right-r.left,f):Hc(l,e.left+c.placed,o,d,f),c.start=o,c.placed+=d,o=l.bottom}else{const d=e.h*h,f=c.size||l.width;vl(c.start)&&(s=c.start),l.fullSize?Hc(l,s,r.top,f,n.outerHeight-r.bottom-r.top):Hc(l,s,e.top+c.placed,f,d),c.start=s,c.placed+=d,s=l.right}}e.x=s,e.y=o}var St={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,i){if(!t)return;const r=At(t.options.layout.padding),s=Math.max(e-r.width,0),o=Math.max(n-r.height,0),a=B5(t.boxes),l=a.vertical,c=a.horizontal;ve(t.boxes,x=>{typeof x.beforeLayout=="function"&&x.beforeLayout()});const h=l.reduce((x,T)=>T.box.options&&T.box.options.display===!1?x:x+1,0)||1,d=Object.freeze({outerWidth:e,outerHeight:n,padding:r,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/h,hBoxMaxHeight:o/2}),f=Object.assign({},r);s2(f,At(i));const g=Object.assign({maxPadding:f,w:s,h:o,x:r.left,y:r.top},r),y=z5(l.concat(c),d);ma(a.fullSize,g,d,y),ma(l,g,d,y),ma(c,g,d,y)&&ma(l,g,d,y),H5(g),P1(a.leftAndTop,g,d,y),g.x+=g.w,g.y+=g.h,P1(a.rightAndBottom,g,d,y),t.chartArea={left:g.left,top:g.top,right:g.left+g.w,bottom:g.top+g.h,height:g.h,width:g.w},ve(a.chartArea,x=>{const T=x.box;Object.assign(T,t.chartArea),T.update(g.w,g.h,{left:0,top:0,right:0,bottom:0})})}};class o2{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,i){}removeEventListener(e,n,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,i,r){return n=Math.max(0,n||e.width),i=i||e.height,{width:n,height:Math.max(0,r?Math.floor(n/r):i)}}isAttached(e){return!0}updateConfig(e){}}class q5 extends o2{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Su="$chartjs",K5={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},A1=t=>t===null||t==="";function G5(t,e){const n=t.style,i=t.getAttribute("height"),r=t.getAttribute("width");if(t[Su]={initial:{height:i,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",A1(r)){const s=d1(t,"width");s!==void 0&&(t.width=s)}if(A1(i))if(t.style.height==="")t.height=t.width/(e||2);else{const s=d1(t,"height");s!==void 0&&(t.height=s)}return t}const a2=Y6?{passive:!0}:!1;function Q5(t,e,n){t&&t.addEventListener(e,n,a2)}function Y5(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,a2)}function X5(t,e){const n=K5[t.type]||t.type,{x:i,y:r}=Lr(t,e);return{type:n,chart:e,native:t,x:i!==void 0?i:null,y:r!==void 0?r:null}}function bh(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function J5(t,e,n){const i=t.canvas,r=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||bh(a.addedNodes,i),o=o&&!bh(a.removedNodes,i);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}function Z5(t,e,n){const i=t.canvas,r=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||bh(a.removedNodes,i),o=o&&!bh(a.addedNodes,i);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}const El=new Map;let C1=0;function l2(){const t=window.devicePixelRatio;t!==C1&&(C1=t,El.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function eF(t,e){El.size||window.addEventListener("resize",l2),El.set(t,e)}function tF(t){El.delete(t),El.size||window.removeEventListener("resize",l2)}function nF(t,e,n){const i=t.canvas,r=i&&i_(i);if(!r)return;const s=FI((a,l)=>{const c=r.clientWidth;n(a,l),c<r.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,h=l.contentRect.height;c===0&&h===0||s(c,h)});return o.observe(r),eF(t,s),o}function Gf(t,e,n){n&&n.disconnect(),e==="resize"&&tF(t)}function iF(t,e,n){const i=t.canvas,r=FI(s=>{t.ctx!==null&&n(X5(s,t))},t);return Q5(i,e,r),r}class rF extends o2{acquireContext(e,n){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(G5(e,n),i):null}releaseContext(e){const n=e.canvas;if(!n[Su])return!1;const i=n[Su].initial;["height","width"].forEach(s=>{const o=i[s];oe(o)?n.removeAttribute(s):n.setAttribute(s,o)});const r=i.style||{};return Object.keys(r).forEach(s=>{n.style[s]=r[s]}),n.width=n.width,delete n[Su],!0}addEventListener(e,n,i){this.removeEventListener(e,n);const r=e.$proxies||(e.$proxies={}),o={attach:J5,detach:Z5,resize:nF}[n]||iF;r[n]=o(e,n,i)}removeEventListener(e,n){const i=e.$proxies||(e.$proxies={}),r=i[n];if(!r)return;({attach:Gf,detach:Gf,resize:Gf}[n]||Y5)(e,n,r),i[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,i,r){return Q6(e,n,i,r)}isAttached(e){const n=e&&i_(e);return!!(n&&n.isConnected)}}function sF(t){return!n_()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?q5:rF}class kn{constructor(){H(this,"x");H(this,"y");H(this,"active",!1);H(this,"options");H(this,"$animations")}tooltipPosition(e){const{x:n,y:i}=this.getProps(["x","y"],e);return{x:n,y:i}}hasValue(){return _o(this.x)&&_o(this.y)}getProps(e,n){const i=this.$animations;if(!n||!i)return this;const r={};return e.forEach(s=>{r[s]=i[s]&&i[s].active()?i[s]._to:this[s]}),r}}H(kn,"defaults",{}),H(kn,"defaultRoutes");function oF(t,e){const n=t.options.ticks,i=aF(t),r=Math.min(n.maxTicksLimit||i,i),s=n.major.enabled?cF(e):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>r)return uF(e,c,s,o/r),c;const h=lF(s,e,r);if(o>0){let d,f;const g=o>1?Math.round((l-a)/(o-1)):null;for(Wc(e,c,h,oe(g)?0:a-g,a),d=0,f=o-1;d<f;d++)Wc(e,c,h,s[d],s[d+1]);return Wc(e,c,h,l,oe(g)?e.length:l+g),c}return Wc(e,c,h),c}function aF(t){const e=t.options.offset,n=t._tickSize(),i=t._length/n+(e?0:1),r=t._maxLength/n;return Math.floor(Math.min(i,r))}function lF(t,e,n){const i=hF(t),r=e.length/n;if(!i)return Math.max(r,1);const s=JV(i);for(let o=0,a=s.length-1;o<a;o++){const l=s[o];if(l>r)return l}return Math.max(r,1)}function cF(t){const e=[];let n,i;for(n=0,i=t.length;n<i;n++)t[n].major&&e.push(n);return e}function uF(t,e,n,i){let r=0,s=n[0],o;for(i=Math.ceil(i),o=0;o<t.length;o++)o===s&&(e.push(t[o]),r++,s=n[r*i])}function Wc(t,e,n,i,r){const s=re(i,0),o=Math.min(re(r,t.length),t.length);let a=0,l,c,h;for(n=Math.ceil(n),r&&(l=r-i,n=l/Math.floor(l/n)),h=s;h<0;)a++,h=Math.round(s+a*n);for(c=Math.max(s,0);c<o;c++)c===h&&(e.push(t[c]),a++,h=Math.round(s+a*n))}function hF(t){const e=t.length;let n,i;if(e<2)return!1;for(i=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==i)return!1;return i}const dF=t=>t==="left"?"right":t==="right"?"left":t,R1=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,N1=(t,e)=>Math.min(e||t,t);function D1(t,e){const n=[],i=t.length/e,r=t.length;let s=0;for(;s<r;s+=i)n.push(t[Math.floor(s)]);return n}function fF(t,e,n){const i=t.ticks.length,r=Math.min(e,i-1),s=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(r),c;if(!(n&&(i===1?c=Math.max(l-s,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(r-1))/2,l+=r<e?c:-c,l<s-a||l>o+a)))return l}function pF(t,e){ve(t,n=>{const i=n.gc,r=i.length/2;let s;if(r>e){for(s=0;s<r;++s)delete n.data[i[s]];i.splice(0,r)}})}function na(t){return t.drawTicks?t.tickLength:0}function M1(t,e){if(!t.display)return 0;const n=tt(t.font,e),i=At(t.padding);return(Oe(t.text)?t.text.length:1)*n.lineHeight+i.height}function gF(t,e){return br(t,{scale:e,type:"scale"})}function mF(t,e,n){return br(t,{tick:n,index:e,type:"tick"})}function yF(t,e,n){let i=Yy(t);return(n&&e!=="right"||!n&&e==="right")&&(i=dF(i)),i}function _F(t,e,n,i){const{top:r,left:s,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:h}=l;let d=0,f,g,y;const x=o-r,T=a-s;if(t.isHorizontal()){if(g=xt(i,s,a),ue(n)){const v=Object.keys(n)[0],w=n[v];y=h[v].getPixelForValue(w)+x-e}else n==="center"?y=(c.bottom+c.top)/2+x-e:y=R1(t,n,e);f=a-s}else{if(ue(n)){const v=Object.keys(n)[0],w=n[v];g=h[v].getPixelForValue(w)-T+e}else n==="center"?g=(c.left+c.right)/2-T+e:g=R1(t,n,e);y=xt(i,o,r),d=n==="left"?-Qe:Qe}return{titleX:g,titleY:y,maxWidth:f,rotation:d}}class _s extends kn{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:i,_suggestedMax:r}=this;return e=Yt(e,Number.POSITIVE_INFINITY),n=Yt(n,Number.NEGATIVE_INFINITY),i=Yt(i,Number.POSITIVE_INFINITY),r=Yt(r,Number.NEGATIVE_INFINITY),{min:Yt(e,i),max:Yt(n,r),minDefined:He(e),maxDefined:He(n)}}getMinMax(e){let{min:n,max:i,minDefined:r,maxDefined:s}=this.getUserBounds(),o;if(r&&s)return{min:n,max:i};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),r||(n=Math.min(n,o.min)),s||(i=Math.max(i,o.max));return n=s&&n>i?i:n,i=r&&n>i?n:i,{min:Yt(n,Yt(i,n)),max:Yt(i,Yt(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Ie(this.options.beforeUpdate,[this])}update(e,n,i){const{beginAtZero:r,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=k6(this,s,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?D1(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=oF(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,i;this.isHorizontal()?(n=this.left,i=this.right):(n=this.top,i=this.bottom,e=!e),this._startPixel=n,this._endPixel=i,this._reversePixels=e,this._length=i-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Ie(this.options.afterUpdate,[this])}beforeSetDimensions(){Ie(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Ie(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Ie(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Ie(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let i,r,s;for(i=0,r=e.length;i<r;i++)s=e[i],s.label=Ie(n.callback,[s.value,i,e],this)}afterTickToLabelConversion(){Ie(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Ie(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,i=N1(this.ticks.length,e.ticks.maxTicksLimit),r=n.minRotation||0,s=n.maxRotation;let o=r,a,l,c;if(!this._isVisible()||!n.display||r>=s||i<=1||!this.isHorizontal()){this.labelRotation=r;return}const h=this._getLabelSizes(),d=h.widest.width,f=h.highest.height,g=st(this.chart.width-d,0,this.maxWidth);a=e.offset?this.maxWidth/i:g/(i-1),d+6>a&&(a=g/(i-(e.offset?.5:1)),l=this.maxHeight-na(e.grid)-n.padding-M1(e.title,this.chart.options.font),c=Math.sqrt(d*d+f*f),o=Gy(Math.min(Math.asin(st((h.highest.height+6)/a,-1,1)),Math.asin(st(l/c,-1,1))-Math.asin(st(f/c,-1,1)))),o=Math.max(r,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){Ie(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Ie(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:i,title:r,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=M1(r,n.options.font);if(a?(e.width=this.maxWidth,e.height=na(s)+l):(e.height=this.maxHeight,e.width=na(s)+l),i.display&&this.ticks.length){const{first:c,last:h,widest:d,highest:f}=this._getLabelSizes(),g=i.padding*2,y=vn(this.labelRotation),x=Math.cos(y),T=Math.sin(y);if(a){const v=i.mirror?0:T*d.width+x*f.height;e.height=Math.min(this.maxHeight,e.height+v+g)}else{const v=i.mirror?0:x*d.width+T*f.height;e.width=Math.min(this.maxWidth,e.width+v+g)}this._calculatePadding(c,h,T,x)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,i,r){const{ticks:{align:s,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const h=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,g=0;l?c?(f=r*e.width,g=i*n.height):(f=i*e.height,g=r*n.width):s==="start"?g=n.width:s==="end"?f=e.width:s!=="inner"&&(f=e.width/2,g=n.width/2),this.paddingLeft=Math.max((f-h+o)*this.width/(this.width-h),0),this.paddingRight=Math.max((g-d+o)*this.width/(this.width-d),0)}else{let h=n.height/2,d=e.height/2;s==="start"?(h=0,d=e.height):s==="end"&&(h=n.height,d=0),this.paddingTop=h+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Ie(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,i;for(n=0,i=e.length;n<i;n++)oe(e[n].label)&&(e.splice(n,1),i--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let i=this.ticks;n<i.length&&(i=D1(i,n)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,i){const{ctx:r,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(n/N1(n,i));let c=0,h=0,d,f,g,y,x,T,v,w,b,A,D;for(d=0;d<n;d+=l){if(y=e[d].label,x=this._resolveTickFontOptions(d),r.font=T=x.string,v=s[T]=s[T]||{data:{},gc:[]},w=x.lineHeight,b=A=0,!oe(y)&&!Oe(y))b=Eh(r,v.data,v.gc,b,y),A=w;else if(Oe(y))for(f=0,g=y.length;f<g;++f)D=y[f],!oe(D)&&!Oe(D)&&(b=Eh(r,v.data,v.gc,b,D),A+=w);o.push(b),a.push(A),c=Math.max(b,c),h=Math.max(A,h)}pF(s,n);const M=o.indexOf(c),S=a.indexOf(h),E=P=>({width:o[P]||0,height:a[P]||0});return{first:E(0),last:E(n-1),widest:E(M),highest:E(S),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return n6(this._alignToPixels?Cr(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const i=n[e];return i.$context||(i.$context=mF(this.getContext(),e,i))}return this.$context||(this.$context=gF(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=vn(this.labelRotation),i=Math.abs(Math.cos(n)),r=Math.abs(Math.sin(n)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*i>a*r?a/i:l/r:l*r<a*i?l/i:a/r}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,i=this.chart,r=this.options,{grid:s,position:o,border:a}=r,l=s.offset,c=this.isHorizontal(),d=this.ticks.length+(l?1:0),f=na(s),g=[],y=a.setContext(this.getContext()),x=y.display?y.width:0,T=x/2,v=function(le){return Cr(i,le,x)};let w,b,A,D,M,S,E,P,k,C,N,R;if(o==="top")w=v(this.bottom),S=this.bottom-f,P=w-T,C=v(e.top)+T,R=e.bottom;else if(o==="bottom")w=v(this.top),C=e.top,R=v(e.bottom)-T,S=w+T,P=this.top+f;else if(o==="left")w=v(this.right),M=this.right-f,E=w-T,k=v(e.left)+T,N=e.right;else if(o==="right")w=v(this.left),k=e.left,N=v(e.right)-T,M=w+T,E=this.left+f;else if(n==="x"){if(o==="center")w=v((e.top+e.bottom)/2+.5);else if(ue(o)){const le=Object.keys(o)[0],Z=o[le];w=v(this.chart.scales[le].getPixelForValue(Z))}C=e.top,R=e.bottom,S=w+T,P=S+f}else if(n==="y"){if(o==="center")w=v((e.left+e.right)/2);else if(ue(o)){const le=Object.keys(o)[0],Z=o[le];w=v(this.chart.scales[le].getPixelForValue(Z))}M=w-T,E=M-f,k=e.left,N=e.right}const fe=re(r.ticks.maxTicksLimit,d),se=Math.max(1,Math.ceil(d/fe));for(b=0;b<d;b+=se){const le=this.getContext(b),Z=s.setContext(le),U=a.setContext(le),B=Z.lineWidth,G=Z.color,J=U.dash||[],Q=U.dashOffset,Y=Z.tickWidth,he=Z.tickColor,Te=Z.tickBorderDash||[],_e=Z.tickBorderDashOffset;A=fF(this,b,l),A!==void 0&&(D=Cr(i,A,B),c?M=E=k=N=D:S=P=C=R=D,g.push({tx1:M,ty1:S,tx2:E,ty2:P,x1:k,y1:C,x2:N,y2:R,width:B,color:G,borderDash:J,borderDashOffset:Q,tickWidth:Y,tickColor:he,tickBorderDash:Te,tickBorderDashOffset:_e}))}return this._ticksLength=d,this._borderValue=w,g}_computeLabelItems(e){const n=this.axis,i=this.options,{position:r,ticks:s}=i,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:h,mirror:d}=s,f=na(i.grid),g=f+h,y=d?-h:g,x=-vn(this.labelRotation),T=[];let v,w,b,A,D,M,S,E,P,k,C,N,R="middle";if(r==="top")M=this.bottom-y,S=this._getXAxisLabelAlignment();else if(r==="bottom")M=this.top+y,S=this._getXAxisLabelAlignment();else if(r==="left"){const se=this._getYAxisLabelAlignment(f);S=se.textAlign,D=se.x}else if(r==="right"){const se=this._getYAxisLabelAlignment(f);S=se.textAlign,D=se.x}else if(n==="x"){if(r==="center")M=(e.top+e.bottom)/2+g;else if(ue(r)){const se=Object.keys(r)[0],le=r[se];M=this.chart.scales[se].getPixelForValue(le)+g}S=this._getXAxisLabelAlignment()}else if(n==="y"){if(r==="center")D=(e.left+e.right)/2-g;else if(ue(r)){const se=Object.keys(r)[0],le=r[se];D=this.chart.scales[se].getPixelForValue(le)}S=this._getYAxisLabelAlignment(f).textAlign}n==="y"&&(l==="start"?R="top":l==="end"&&(R="bottom"));const fe=this._getLabelSizes();for(v=0,w=a.length;v<w;++v){b=a[v],A=b.label;const se=s.setContext(this.getContext(v));E=this.getPixelForTick(v)+s.labelOffset,P=this._resolveTickFontOptions(v),k=P.lineHeight,C=Oe(A)?A.length:1;const le=C/2,Z=se.color,U=se.textStrokeColor,B=se.textStrokeWidth;let G=S;o?(D=E,S==="inner"&&(v===w-1?G=this.options.reverse?"left":"right":v===0?G=this.options.reverse?"right":"left":G="center"),r==="top"?c==="near"||x!==0?N=-C*k+k/2:c==="center"?N=-fe.highest.height/2-le*k+k:N=-fe.highest.height+k/2:c==="near"||x!==0?N=k/2:c==="center"?N=fe.highest.height/2-le*k:N=fe.highest.height-C*k,d&&(N*=-1),x!==0&&!se.showLabelBackdrop&&(D+=k/2*Math.sin(x))):(M=E,N=(1-C)*k/2);let J;if(se.showLabelBackdrop){const Q=At(se.backdropPadding),Y=fe.heights[v],he=fe.widths[v];let Te=N-Q.top,_e=0-Q.left;switch(R){case"middle":Te-=Y/2;break;case"bottom":Te-=Y;break}switch(S){case"center":_e-=he/2;break;case"right":_e-=he;break;case"inner":v===w-1?_e-=he:v>0&&(_e-=he/2);break}J={left:_e,top:Te,width:he+Q.width,height:Y+Q.height,color:se.backdropColor}}T.push({label:A,font:P,textOffset:N,options:{rotation:x,color:Z,strokeColor:U,strokeWidth:B,textAlign:G,textBaseline:R,translation:[D,M],backdrop:J}})}return T}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-vn(this.labelRotation))return e==="top"?"left":"right";let r="center";return n.align==="start"?r="left":n.align==="end"?r="right":n.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:i,mirror:r,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,l=o.widest.width;let c,h;return n==="left"?r?(h=this.right+s,i==="near"?c="left":i==="center"?(c="center",h+=l/2):(c="right",h+=l)):(h=this.right-a,i==="near"?c="right":i==="center"?(c="center",h-=l/2):(c="left",h=this.left)):n==="right"?r?(h=this.left+s,i==="near"?c="right":i==="center"?(c="center",h-=l/2):(c="left",h-=l)):(h=this.left+a,i==="near"?c="left":i==="center"?(c="center",h+=l/2):(c="right",h=this.right)):c="right",{textAlign:c,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:i,top:r,width:s,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(i,r,s,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const r=this.ticks.findIndex(s=>s.value===e);return r>=0?n.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){const n=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const a=(l,c,h)=>{!h.width||!h.color||(i.save(),i.lineWidth=h.width,i.strokeStyle=h.color,i.setLineDash(h.borderDash||[]),i.lineDashOffset=h.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(c.x,c.y),i.stroke(),i.restore())};if(n.display)for(s=0,o=r.length;s<o;++s){const l=r[s];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:i,grid:r}}=this,s=i.setContext(this.getContext()),o=i.display?s.width:0;if(!o)return;const a=r.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,h,d,f;this.isHorizontal()?(c=Cr(e,this.left,o)-o/2,h=Cr(e,this.right,a)+a/2,d=f=l):(d=Cr(e,this.top,o)-o/2,f=Cr(e,this.bottom,a)+a/2,c=h=l),n.save(),n.lineWidth=s.width,n.strokeStyle=s.color,n.beginPath(),n.moveTo(c,d),n.lineTo(h,f),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const i=this.ctx,r=this._computeLabelArea();r&&xd(i,r);const s=this.getLabelItems(e);for(const o of s){const a=o.options,l=o.font,c=o.label,h=o.textOffset;cs(i,c,0,h,l,a)}r&&Ed(i)}drawTitle(){const{ctx:e,options:{position:n,title:i,reverse:r}}=this;if(!i.display)return;const s=tt(i.font),o=At(i.padding),a=i.align;let l=s.lineHeight/2;n==="bottom"||n==="center"||ue(n)?(l+=o.bottom,Oe(i.text)&&(l+=s.lineHeight*(i.text.length-1))):l+=o.top;const{titleX:c,titleY:h,maxWidth:d,rotation:f}=_F(this,l,n,a);cs(e,i.text,0,0,s,{color:i.color,maxWidth:d,rotation:f,textAlign:yF(a,n,r),textBaseline:"middle",translation:[c,h]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,i=re(e.grid&&e.grid.z,-1),r=re(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==_s.prototype.draw?[{z:n,draw:s=>{this.draw(s)}}]:[{z:i,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:n,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[];let s,o;for(s=0,o=n.length;s<o;++s){const a=n[s];a[i]===this.id&&(!e||a.type===e)&&r.push(a)}return r}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return tt(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class qc{constructor(e,n,i){this.type=e,this.scope=n,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let i;xF(n)&&(i=this.register(n));const r=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in r||(r[s]=e,vF(e,o,i),this.override&&Le.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,i=e.id,r=this.scope;i in n&&delete n[i],r&&i in Le[r]&&(delete Le[r][i],this.override&&delete ls[i])}}function vF(t,e,n){const i=_l(Object.create(null),[n?Le.get(n):{},Le.get(e),t.defaults]);Le.set(e,i),t.defaultRoutes&&wF(e,t.defaultRoutes),t.descriptors&&Le.describe(e,t.descriptors)}function wF(t,e){Object.keys(e).forEach(n=>{const i=n.split("."),r=i.pop(),s=[t].concat(i).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");Le.route(s,r,l,a)})}function xF(t){return"id"in t&&"defaults"in t}class EF{constructor(){this.controllers=new qc(Tn,"datasets",!0),this.elements=new qc(kn,"elements"),this.plugins=new qc(Object,"plugins"),this.scales=new qc(_s,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,i){[...n].forEach(r=>{const s=i||this._getRegistryForType(r);i||s.isForType(r)||s===this.plugins&&r.id?this._exec(e,s,r):ve(r,o=>{const a=i||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,i){const r=Ky(e);Ie(i["before"+r],[],i),n[e](i),Ie(i["after"+r],[],i)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const i=this._typedRegistries[n];if(i.isForType(e))return i}return this.plugins}_get(e,n,i){const r=n.get(e);if(r===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return r}}var Dn=new EF;class TF{constructor(){this._init=[]}notify(e,n,i,r){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const s=r?this._descriptors(e).filter(r):this._descriptors(e),o=this._notify(s,e,n,i);return n==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,i,r){r=r||{};for(const s of e){const o=s.plugin,a=o[i],l=[n,r,s.options];if(Ie(a,l,o)===!1&&r.cancelable)return!1}return!0}invalidate(){oe(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const i=e&&e.config,r=re(i.options&&i.options.plugins,{}),s=bF(i);return r===!1&&!n?[]:IF(e,s,r,n)}_notifyStateChanges(e){const n=this._oldCache||[],i=this._cache,r=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(r(n,i),e,"stop"),this._notify(r(i,n),e,"start")}}function bF(t){const e={},n=[],i=Object.keys(Dn.plugins.items);for(let s=0;s<i.length;s++)n.push(Dn.getPlugin(i[s]));const r=t.plugins||[];for(let s=0;s<r.length;s++){const o=r[s];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function SF(t,e){return!e&&t===!1?null:t===!0?{}:t}function IF(t,{plugins:e,localIds:n},i,r){const s=[],o=t.getContext();for(const a of e){const l=a.id,c=SF(i[l],r);c!==null&&s.push({plugin:a,options:kF(t.config,{plugin:a,local:n[l]},c,o)})}return s}function kF(t,{plugin:e,local:n},i,r){const s=t.pluginScopeKeys(e),o=t.getOptionScopes(i,s);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Ag(t,e){const n=Le.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function PF(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function AF(t,e){return t===e?"_index_":"_value_"}function O1(t){if(t==="x"||t==="y"||t==="r")return t}function CF(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function Cg(t,...e){if(O1(t))return t;for(const n of e){const i=n.axis||CF(n.position)||t.length>1&&O1(t[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function L1(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function RF(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(i=>i.xAxisID===t||i.yAxisID===t);if(n.length)return L1(t,"x",n[0])||L1(t,"y",n[0])}return{}}function NF(t,e){const n=ls[t.type]||{scales:{}},i=e.scales||{},r=Ag(t.type,e),s=Object.create(null);return Object.keys(i).forEach(o=>{const a=i[o];if(!ue(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=Cg(o,a,RF(o,t),Le.scales[a.type]),c=AF(l,r),h=n.scales||{};s[o]=Oa(Object.create(null),[{axis:l},a,h[l],h[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||Ag(a,e),h=(ls[a]||{}).scales||{};Object.keys(h).forEach(d=>{const f=PF(d,l),g=o[f+"AxisID"]||f;s[g]=s[g]||Object.create(null),Oa(s[g],[{axis:f},i[g],h[d]])})}),Object.keys(s).forEach(o=>{const a=s[o];Oa(a,[Le.scales[a.type],Le.scale])}),s}function c2(t){const e=t.options||(t.options={});e.plugins=re(e.plugins,{}),e.scales=NF(t,e)}function u2(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function DF(t){return t=t||{},t.data=u2(t.data),c2(t),t}const V1=new Map,h2=new Set;function Kc(t,e){let n=V1.get(t);return n||(n=e(),V1.set(t,n),h2.add(n)),n}const ia=(t,e,n)=>{const i=yr(e,n);i!==void 0&&t.add(i)};class MF{constructor(e){this._config=DF(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=u2(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),c2(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Kc(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return Kc(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return Kc(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,i=this.type;return Kc(`${i}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const i=this._scopeCache;let r=i.get(e);return(!r||n)&&(r=new Map,i.set(e,r)),r}getOptionScopes(e,n,i){const{options:r,type:s}=this,o=this._cachedScopes(e,i),a=o.get(n);if(a)return a;const l=new Set;n.forEach(h=>{e&&(l.add(e),h.forEach(d=>ia(l,e,d))),h.forEach(d=>ia(l,r,d)),h.forEach(d=>ia(l,ls[s]||{},d)),h.forEach(d=>ia(l,Le,d)),h.forEach(d=>ia(l,Ig,d))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),h2.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,ls[n]||{},Le.datasets[n]||{},{type:n},Le,Ig]}resolveNamedOptions(e,n,i,r=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=F1(this._resolverCache,e,r);let l=o;if(LF(o,n)){s.$shared=!1,i=_r(i)?i():i;const c=this.createResolver(e,i,a);l=vo(o,i,c)}for(const c of n)s[c]=l[c];return s}createResolver(e,n,i=[""],r){const{resolver:s}=F1(this._resolverCache,e,i);return ue(n)?vo(s,n,void 0,r):s}}function F1(t,e,n){let i=t.get(e);i||(i=new Map,t.set(e,i));const r=n.join();let s=i.get(r);return s||(s={resolver:Zy(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},i.set(r,s)),s}const OF=t=>ue(t)&&Object.getOwnPropertyNames(t).some(e=>_r(t[e]));function LF(t,e){const{isScriptable:n,isIndexable:i}=HI(t);for(const r of e){const s=n(r),o=i(r),a=(o||s)&&t[r];if(s&&(_r(a)||OF(a))||o&&Oe(a))return!0}return!1}var VF="4.4.8";const FF=["top","bottom","left","right","chartArea"];function j1(t,e){return t==="top"||t==="bottom"||FF.indexOf(t)===-1&&e==="x"}function U1(t,e){return function(n,i){return n[t]===i[t]?n[e]-i[e]:n[t]-i[t]}}function z1(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),Ie(n&&n.onComplete,[t],e)}function jF(t){const e=t.chart,n=e.options.animation;Ie(n&&n.onProgress,[t],e)}function d2(t){return n_()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Iu={},B1=t=>{const e=d2(t);return Object.values(Iu).filter(n=>n.canvas===e).pop()};function UF(t,e,n){const i=Object.keys(t);for(const r of i){const s=+r;if(s>=e){const o=t[r];delete t[r],(n>0||s>e)&&(t[s+n]=o)}}}function zF(t,e,n,i){return!n||t.type==="mouseout"?null:i?e:t}function Gc(t,e,n){return t.options.clip?t[n]:e[n]}function BF(t,e){const{xScale:n,yScale:i}=t;return n&&i?{left:Gc(n,e,"left"),right:Gc(n,e,"right"),top:Gc(i,e,"top"),bottom:Gc(i,e,"bottom")}:e}class ni{static register(...e){Dn.add(...e),$1()}static unregister(...e){Dn.remove(...e),$1()}constructor(e,n){const i=this.config=new MF(n),r=d2(e),s=B1(r);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||sF(r)),this.platform.updateConfig(i);const a=this.platform.acquireContext(r,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,h=l&&l.width;if(this.id=$V(),this.ctx=a,this.canvas=l,this.width=h,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new TF,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=o6(d=>this.update(d),o.resizeDelay||0),this._dataChanges=[],Iu[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Xn.listen(this,"complete",z1),Xn.listen(this,"progress",jF),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:i,height:r,_aspectRatio:s}=this;return oe(e)?n&&s?s:r?i/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Dn}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():h1(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return l1(this.canvas,this.ctx),this}stop(){return Xn.stop(this),this}resize(e,n){Xn.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const i=this.options,r=this.canvas,s=i.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,e,n,s),a=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,h1(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),Ie(i.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};ve(n,(i,r)=>{i.id=r})}buildOrUpdateScales(){const e=this.options,n=e.scales,i=this.scales,r=Object.keys(i).reduce((o,a)=>(o[a]=!1,o),{});let s=[];n&&(s=s.concat(Object.keys(n).map(o=>{const a=n[o],l=Cg(o,a),c=l==="r",h=l==="x";return{options:a,dposition:c?"chartArea":h?"bottom":"left",dtype:c?"radialLinear":h?"category":"linear"}}))),ve(s,o=>{const a=o.options,l=a.id,c=Cg(l,a),h=re(a.type,o.dtype);(a.position===void 0||j1(a.position,c)!==j1(o.dposition))&&(a.position=o.dposition),r[l]=!0;let d=null;if(l in i&&i[l].type===h)d=i[l];else{const f=Dn.getScale(h);d=new f({id:l,type:h,ctx:this.ctx,chart:this}),i[d.id]=d}d.init(a,e)}),ve(r,(o,a)=>{o||delete i[a]}),ve(i,o=>{St.configure(this,o,o.options),St.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,i=e.length;if(e.sort((r,s)=>r.index-s.index),i>n){for(let r=n;r<i;++r)this._destroyDatasetMeta(r);e.splice(n,i-n)}this._sortedMetasets=e.slice(0).sort(U1("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((i,r)=>{n.filter(s=>s===i._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let i,r;for(this._removeUnreferencedMetasets(),i=0,r=n.length;i<r;i++){const s=n[i];let o=this.getDatasetMeta(i);const a=s.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(i),o=this.getDatasetMeta(i)),o.type=a,o.indexAxis=s.indexAxis||Ag(a,this.options),o.order=s.order||0,o.index=i,o.label=""+s.label,o.visible=this.isDatasetVisible(i),o.controller)o.controller.updateIndex(i),o.controller.linkScales();else{const l=Dn.getController(a),{datasetElementType:c,dataElementType:h}=Le.datasets[a];Object.assign(l,{dataElementType:Dn.getElement(h),datasetElementType:c&&Dn.getElement(c)}),o.controller=new l(this,i),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){ve(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const i=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,h=this.data.datasets.length;c<h;c++){const{controller:d}=this.getDatasetMeta(c),f=!r&&s.indexOf(d)===-1;d.buildOrUpdateElements(f),o=Math.max(+d.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),r||ve(s,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(U1("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){ve(this.scales,e=>{St.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),i=new Set(e.events);(!Zw(n,i)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:i,start:r,count:s}of n){const o=i==="_removeElements"?-s:s;UF(e,r,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,i=s=>new Set(e.filter(o=>o[0]===s).map((o,a)=>a+","+o.splice(1).join(","))),r=i(0);for(let s=1;s<n;s++)if(!Zw(r,i(s)))return;return Array.from(r).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;St.update(this,this.width,this.height,e);const n=this.chartArea,i=n.width<=0||n.height<=0;this._layers=[],ve(this.boxes,r=>{i&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,s)=>{r._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,i=this.data.datasets.length;n<i;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,i=this.data.datasets.length;n<i;++n)this._updateDataset(n,_r(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const i=this.getDatasetMeta(e),r={meta:i,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(i.controller._update(n),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Xn.has(this)?this.attached&&!Xn.running(this)&&Xn.start(this):(this.draw(),z1({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:i,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,i=[];let r,s;for(r=0,s=n.length;r<s;++r){const o=n[r];(!e||o.visible)&&i.push(o)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,i=e._clip,r=!i.disabled,s=BF(e,this.chartArea),o={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",o)!==!1&&(r&&xd(n,{left:i.left===!1?0:s.left-i.left,right:i.right===!1?this.width:s.right+i.right,top:i.top===!1?0:s.top-i.top,bottom:i.bottom===!1?this.height:s.bottom+i.bottom}),e.controller.draw(),r&&Ed(n),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(e){return hi(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,i,r){const s=F5.modes[n];return typeof s=="function"?s(this,e,i,r):[]}getDatasetMeta(e){const n=this.data.datasets[e],i=this._metasets;let r=i.filter(s=>s&&s._dataset===n).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},i.push(r)),r}getContext(){return this.$context||(this.$context=br(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const i=this.getDatasetMeta(e);return typeof i.hidden=="boolean"?!i.hidden:!n.hidden}setDatasetVisibility(e,n){const i=this.getDatasetMeta(e);i.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,i){const r=i?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,r);vl(n)?(s.data[n].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),o.update(s,{visible:i}),this.update(a=>a.datasetIndex===e?r:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),Xn.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),l1(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Iu[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,i=(s,o)=>{n.addEventListener(this,s,o),e[s]=o},r=(s,o,a)=>{s.offsetX=o,s.offsetY=a,this._eventHandler(s)};ve(this.options.events,s=>i(s,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,i=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},r=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},s=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{r("attach",a),this.attached=!0,this.resize(),i("resize",s),i("detach",o)};o=()=>{this.attached=!1,r("resize",s),this._stop(),this._resize(0,0),i("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){ve(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},ve(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,i){const r=i?"set":"remove";let s,o,a,l;for(n==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+r+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],i=e.map(({datasetIndex:s,index:o})=>{const a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[o],index:o}});!vh(i,n)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,n))}notifyPlugins(e,n,i){return this._plugins.notify(this,e,n,i)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,i){const r=this.options.hover,s=(l,c)=>l.filter(h=>!c.some(d=>h.datasetIndex===d.datasetIndex&&h.index===d.index)),o=s(n,e),a=i?e:s(e,n);o.length&&this.updateHoverStyle(o,r.mode,!1),a.length&&r.mode&&this.updateHoverStyle(a,r.mode,!0)}_eventHandler(e,n){const i={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},r=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",i,r)===!1)return;const s=this._handleEvent(e,n,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,r),(s||i.changed)&&this.render(),this}_handleEvent(e,n,i){const{_active:r=[],options:s}=this,o=n,a=this._getActiveElements(e,r,i,o),l=QV(e),c=zF(e,this._lastEvent,i,l);i&&(this._lastEvent=null,Ie(s.onHover,[e,a,this],this),l&&Ie(s.onClick,[e,a,this],this));const h=!vh(a,r);return(h||n)&&(this._active=a,this._updateHoverStyles(a,r,n)),this._lastEvent=c,h}_getActiveElements(e,n,i,r){if(e.type==="mouseout")return[];if(!i)return n;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,r)}}H(ni,"defaults",Le),H(ni,"instances",Iu),H(ni,"overrides",ls),H(ni,"registry",Dn),H(ni,"version",VF),H(ni,"getChart",B1);function $1(){return ve(ni.instances,t=>t._plugins.invalidate())}function $F(t,e,n){const{startAngle:i,pixelMargin:r,x:s,y:o,outerRadius:a,innerRadius:l}=e;let c=r/a;t.beginPath(),t.arc(s,o,a,i-c,n+c),l>r?(c=r/l,t.arc(s,o,l,n+c,i-c,!0)):t.arc(s,o,r,n+Qe,i-Qe),t.closePath(),t.clip()}function HF(t){return Jy(t,["outerStart","outerEnd","innerStart","innerEnd"])}function WF(t,e,n,i){const r=HF(t.options.borderRadius),s=(n-e)/2,o=Math.min(s,i*e/2),a=l=>{const c=(n-Math.min(s,l))*i/2;return st(l,0,Math.min(s,c))};return{outerStart:a(r.outerStart),outerEnd:a(r.outerEnd),innerStart:st(r.innerStart,0,o),innerEnd:st(r.innerEnd,0,o)}}function Ss(t,e,n,i){return{x:n+t*Math.cos(e),y:i+t*Math.sin(e)}}function Sh(t,e,n,i,r,s){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:h}=e,d=Math.max(e.outerRadius+i+n-c,0),f=h>0?h+i+n+c:0;let g=0;const y=r-l;if(i){const se=h>0?h-i:0,le=d>0?d-i:0,Z=(se+le)/2,U=Z!==0?y*Z/(Z+i):y;g=(y-U)/2}const x=Math.max(.001,y*d-n/De)/d,T=(y-x)/2,v=l+T+g,w=r-T-g,{outerStart:b,outerEnd:A,innerStart:D,innerEnd:M}=WF(e,f,d,w-v),S=d-b,E=d-A,P=v+b/S,k=w-A/E,C=f+D,N=f+M,R=v+D/C,fe=w-M/N;if(t.beginPath(),s){const se=(P+k)/2;if(t.arc(o,a,d,P,se),t.arc(o,a,d,se,k),A>0){const B=Ss(E,k,o,a);t.arc(B.x,B.y,A,k,w+Qe)}const le=Ss(N,w,o,a);if(t.lineTo(le.x,le.y),M>0){const B=Ss(N,fe,o,a);t.arc(B.x,B.y,M,w+Qe,fe+Math.PI)}const Z=(w-M/f+(v+D/f))/2;if(t.arc(o,a,f,w-M/f,Z,!0),t.arc(o,a,f,Z,v+D/f,!0),D>0){const B=Ss(C,R,o,a);t.arc(B.x,B.y,D,R+Math.PI,v-Qe)}const U=Ss(S,v,o,a);if(t.lineTo(U.x,U.y),b>0){const B=Ss(S,P,o,a);t.arc(B.x,B.y,b,v-Qe,P)}}else{t.moveTo(o,a);const se=Math.cos(P)*d+o,le=Math.sin(P)*d+a;t.lineTo(se,le);const Z=Math.cos(k)*d+o,U=Math.sin(k)*d+a;t.lineTo(Z,U)}t.closePath()}function qF(t,e,n,i,r){const{fullCircles:s,startAngle:o,circumference:a}=e;let l=e.endAngle;if(s){Sh(t,e,n,i,l,r);for(let c=0;c<s;++c)t.fill();isNaN(a)||(l=o+(a%Ne||Ne))}return Sh(t,e,n,i,l,r),t.fill(),l}function KF(t,e,n,i,r){const{fullCircles:s,startAngle:o,circumference:a,options:l}=e,{borderWidth:c,borderJoinStyle:h,borderDash:d,borderDashOffset:f}=l,g=l.borderAlign==="inner";if(!c)return;t.setLineDash(d||[]),t.lineDashOffset=f,g?(t.lineWidth=c*2,t.lineJoin=h||"round"):(t.lineWidth=c,t.lineJoin=h||"bevel");let y=e.endAngle;if(s){Sh(t,e,n,i,y,r);for(let x=0;x<s;++x)t.stroke();isNaN(a)||(y=o+(a%Ne||Ne))}g&&$F(t,e,y),s||(Sh(t,e,n,i,y,r),t.stroke())}class ya extends kn{constructor(n){super();H(this,"circumference");H(this,"endAngle");H(this,"fullCircles");H(this,"innerRadius");H(this,"outerRadius");H(this,"pixelMargin");H(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,i,r){const s=this.getProps(["x","y"],r),{angle:o,distance:a}=MI(s,{x:n,y:i}),{startAngle:l,endAngle:c,innerRadius:h,outerRadius:d,circumference:f}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],r),g=(this.options.spacing+this.options.borderWidth)/2,y=re(f,c-l),x=wl(o,l,c)&&l!==c,T=y>=Ne||x,v=ci(a,h+g,d+g);return T&&v}getCenterPoint(n){const{x:i,y:r,startAngle:s,endAngle:o,innerRadius:a,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:c,spacing:h}=this.options,d=(s+o)/2,f=(a+l+h+c)/2;return{x:i+Math.cos(d)*f,y:r+Math.sin(d)*f}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:i,circumference:r}=this,s=(i.offset||0)/4,o=(i.spacing||0)/2,a=i.circular;if(this.pixelMargin=i.borderAlign==="inner"?.33:0,this.fullCircles=r>Ne?Math.floor(r/Ne):0,r===0||this.innerRadius<0||this.outerRadius<0)return;n.save();const l=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(l)*s,Math.sin(l)*s);const c=1-Math.sin(Math.min(De,r||0)),h=s*c;n.fillStyle=i.backgroundColor,n.strokeStyle=i.borderColor,qF(n,this,h,o,a),KF(n,this,h,o,a),n.restore()}}H(ya,"id","arc"),H(ya,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),H(ya,"defaultRoutes",{backgroundColor:"backgroundColor"}),H(ya,"descriptors",{_scriptable:!0,_indexable:n=>n!=="borderDash"});function f2(t,e,n=e){t.lineCap=re(n.borderCapStyle,e.borderCapStyle),t.setLineDash(re(n.borderDash,e.borderDash)),t.lineDashOffset=re(n.borderDashOffset,e.borderDashOffset),t.lineJoin=re(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=re(n.borderWidth,e.borderWidth),t.strokeStyle=re(n.borderColor,e.borderColor)}function GF(t,e,n){t.lineTo(n.x,n.y)}function QF(t){return t.stepped?_6:t.tension||t.cubicInterpolationMode==="monotone"?v6:GF}function p2(t,e,n={}){const i=t.length,{start:r=0,end:s=i-1}=n,{start:o,end:a}=e,l=Math.max(r,o),c=Math.min(s,a),h=r<o&&s<o||r>a&&s>a;return{count:i,start:l,loop:e.loop,ilen:c<l&&!h?i+c-l:c-l}}function YF(t,e,n,i){const{points:r,options:s}=e,{count:o,start:a,loop:l,ilen:c}=p2(r,n,i),h=QF(s);let{move:d=!0,reverse:f}=i||{},g,y,x;for(g=0;g<=c;++g)y=r[(a+(f?c-g:g))%o],!y.skip&&(d?(t.moveTo(y.x,y.y),d=!1):h(t,x,y,f,s.stepped),x=y);return l&&(y=r[(a+(f?c:0))%o],h(t,x,y,f,s.stepped)),!!l}function XF(t,e,n,i){const r=e.points,{count:s,start:o,ilen:a}=p2(r,n,i),{move:l=!0,reverse:c}=i||{};let h=0,d=0,f,g,y,x,T,v;const w=A=>(o+(c?a-A:A))%s,b=()=>{x!==T&&(t.lineTo(h,T),t.lineTo(h,x),t.lineTo(h,v))};for(l&&(g=r[w(0)],t.moveTo(g.x,g.y)),f=0;f<=a;++f){if(g=r[w(f)],g.skip)continue;const A=g.x,D=g.y,M=A|0;M===y?(D<x?x=D:D>T&&(T=D),h=(d*h+A)/++d):(b(),t.lineTo(A,D),y=M,d=0,x=T=D),v=D}b()}function Rg(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?XF:YF}function JF(t){return t.stepped?X6:t.tension||t.cubicInterpolationMode==="monotone"?J6:Vr}function ZF(t,e,n,i){let r=e._path;r||(r=e._path=new Path2D,e.path(r,n,i)&&r.closePath()),f2(t,e.options),t.stroke(r)}function ej(t,e,n,i){const{segments:r,options:s}=e,o=Rg(e);for(const a of r)f2(t,s,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+i-1})&&t.closePath(),t.stroke()}const tj=typeof Path2D=="function";function nj(t,e,n,i){tj&&!e.options.segment?ZF(t,e,n,i):ej(t,e,n,i)}class Qi extends kn{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const r=i.spanGaps?this._loop:this._fullLoop;$6(this._points,i,e,r,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=r5(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,i=e.length;return i&&n[e[i-1].end]}interpolate(e,n){const i=this.options,r=e[n],s=this.points,o=e2(this,{property:n,start:r,end:r});if(!o.length)return;const a=[],l=JF(i);let c,h;for(c=0,h=o.length;c<h;++c){const{start:d,end:f}=o[c],g=s[d],y=s[f];if(g===y){a.push(g);continue}const x=Math.abs((r-g[n])/(y[n]-g[n])),T=l(g,y,x,i.stepped);T[n]=e[n],a.push(T)}return a.length===1?a[0]:a}pathSegment(e,n,i){return Rg(this)(e,this,n,i)}path(e,n,i){const r=this.segments,s=Rg(this);let o=this._loop;n=n||0,i=i||this.points.length-n;for(const a of r)o&=s(e,this,a,{start:n,end:n+i-1});return!!o}draw(e,n,i,r){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),nj(e,this,i,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}H(Qi,"id","line"),H(Qi,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),H(Qi,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),H(Qi,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function H1(t,e,n,i){const r=t.options,{[n]:s}=t.getProps([n],i);return Math.abs(e-s)<r.radius+r.hitRadius}class ku extends kn{constructor(n){super();H(this,"parsed");H(this,"skip");H(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,i,r){const s=this.options,{x:o,y:a}=this.getProps(["x","y"],r);return Math.pow(n-o,2)+Math.pow(i-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(n,i){return H1(this,n,"x",i)}inYRange(n,i){return H1(this,n,"y",i)}getCenterPoint(n){const{x:i,y:r}=this.getProps(["x","y"],n);return{x:i,y:r}}size(n){n=n||this.options||{};let i=n.radius||0;i=Math.max(i,i&&n.hoverRadius||0);const r=i&&n.borderWidth||0;return(i+r)*2}draw(n,i){const r=this.options;this.skip||r.radius<.1||!hi(this,i,this.size(r)/2)||(n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.fillStyle=r.backgroundColor,kg(n,r,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}H(ku,"id","point"),H(ku,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),H(ku,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function g2(t,e){const{x:n,y:i,base:r,width:s,height:o}=t.getProps(["x","y","base","width","height"],e);let a,l,c,h,d;return t.horizontal?(d=o/2,a=Math.min(n,r),l=Math.max(n,r),c=i-d,h=i+d):(d=s/2,a=n-d,l=n+d,c=Math.min(i,r),h=Math.max(i,r)),{left:a,top:c,right:l,bottom:h}}function Yi(t,e,n,i){return t?0:st(e,n,i)}function ij(t,e,n){const i=t.options.borderWidth,r=t.borderSkipped,s=$I(i);return{t:Yi(r.top,s.top,0,n),r:Yi(r.right,s.right,0,e),b:Yi(r.bottom,s.bottom,0,n),l:Yi(r.left,s.left,0,e)}}function rj(t,e,n){const{enableBorderRadius:i}=t.getProps(["enableBorderRadius"]),r=t.options.borderRadius,s=Kr(r),o=Math.min(e,n),a=t.borderSkipped,l=i||ue(r);return{topLeft:Yi(!l||a.top||a.left,s.topLeft,0,o),topRight:Yi(!l||a.top||a.right,s.topRight,0,o),bottomLeft:Yi(!l||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:Yi(!l||a.bottom||a.right,s.bottomRight,0,o)}}function sj(t){const e=g2(t),n=e.right-e.left,i=e.bottom-e.top,r=ij(t,n/2,i/2),s=rj(t,n/2,i/2);return{outer:{x:e.left,y:e.top,w:n,h:i,radius:s},inner:{x:e.left+r.l,y:e.top+r.t,w:n-r.l-r.r,h:i-r.t-r.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,s.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(r.b,r.r))}}}}function Qf(t,e,n,i){const r=e===null,s=n===null,a=t&&!(r&&s)&&g2(t,i);return a&&(r||ci(e,a.left,a.right))&&(s||ci(n,a.top,a.bottom))}function oj(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function aj(t,e){t.rect(e.x,e.y,e.w,e.h)}function Yf(t,e,n={}){const i=t.x!==n.x?-e:0,r=t.y!==n.y?-e:0,s=(t.x+t.w!==n.x+n.w?e:0)-i,o=(t.y+t.h!==n.y+n.h?e:0)-r;return{x:t.x+i,y:t.y+r,w:t.w+s,h:t.h+o,radius:t.radius}}class Pu extends kn{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:i,backgroundColor:r}}=this,{inner:s,outer:o}=sj(this),a=oj(o.radius)?xl:aj;e.save(),(o.w!==s.w||o.h!==s.h)&&(e.beginPath(),a(e,Yf(o,n,s)),e.clip(),a(e,Yf(s,-n,o)),e.fillStyle=i,e.fill("evenodd")),e.beginPath(),a(e,Yf(s,n)),e.fillStyle=r,e.fill(),e.restore()}inRange(e,n,i){return Qf(this,e,n,i)}inXRange(e,n){return Qf(this,e,null,n)}inYRange(e,n){return Qf(this,null,e,n)}getCenterPoint(e){const{x:n,y:i,base:r,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(n+r)/2:n,y:s?i:(i+r)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}H(Pu,"id","bar"),H(Pu,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),H(Pu,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var lj=Object.freeze({__proto__:null,ArcElement:ya,BarElement:Pu,LineElement:Qi,PointElement:ku});const Ng=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],W1=Ng.map(t=>t.replace("rgb(","rgba(").replace(")",", 0.5)"));function m2(t){return Ng[t%Ng.length]}function y2(t){return W1[t%W1.length]}function cj(t,e){return t.borderColor=m2(e),t.backgroundColor=y2(e),++e}function uj(t,e){return t.backgroundColor=t.data.map(()=>m2(e++)),e}function hj(t,e){return t.backgroundColor=t.data.map(()=>y2(e++)),e}function dj(t){let e=0;return(n,i)=>{const r=t.getDatasetMeta(i).controller;r instanceof Br?e=uj(n,e):r instanceof ja?e=hj(n,e):r&&(e=cj(n,e))}}function q1(t){let e;for(e in t)if(t[e].borderColor||t[e].backgroundColor)return!0;return!1}function fj(t){return t&&(t.borderColor||t.backgroundColor)}function pj(){return Le.borderColor!=="rgba(0,0,0,0.1)"||Le.backgroundColor!=="rgba(0,0,0,0.1)"}var gj={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(t,e,n){if(!n.enabled)return;const{data:{datasets:i},options:r}=t.config,{elements:s}=r,o=q1(i)||fj(r)||s&&q1(s)||pj();if(!n.forceOverride&&o)return;const a=dj(t);i.forEach(a)}};function mj(t,e,n,i,r){const s=r.samples||i;if(s>=n)return t.slice(e,e+n);const o=[],a=(n-2)/(s-2);let l=0;const c=e+n-1;let h=e,d,f,g,y,x;for(o[l++]=t[h],d=0;d<s-2;d++){let T=0,v=0,w;const b=Math.floor((d+1)*a)+1+e,A=Math.min(Math.floor((d+2)*a)+1,n)+e,D=A-b;for(w=b;w<A;w++)T+=t[w].x,v+=t[w].y;T/=D,v/=D;const M=Math.floor(d*a)+1+e,S=Math.min(Math.floor((d+1)*a)+1,n)+e,{x:E,y:P}=t[h];for(g=y=-1,w=M;w<S;w++)y=.5*Math.abs((E-T)*(t[w].y-P)-(E-t[w].x)*(v-P)),y>g&&(g=y,f=t[w],x=w);o[l++]=f,h=x}return o[l++]=t[c],o}function yj(t,e,n,i){let r=0,s=0,o,a,l,c,h,d,f,g,y,x;const T=[],v=e+n-1,w=t[e].x,A=t[v].x-w;for(o=e;o<e+n;++o){a=t[o],l=(a.x-w)/A*i,c=a.y;const D=l|0;if(D===h)c<y?(y=c,d=o):c>x&&(x=c,f=o),r=(s*r+a.x)/++s;else{const M=o-1;if(!oe(d)&&!oe(f)){const S=Math.min(d,f),E=Math.max(d,f);S!==g&&S!==M&&T.push({...t[S],x:r}),E!==g&&E!==M&&T.push({...t[E],x:r})}o>0&&M!==g&&T.push(t[M]),T.push(a),h=D,s=0,y=x=c,d=f=g=o}}return T}function _2(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function K1(t){t.data.datasets.forEach(e=>{_2(e)})}function _j(t,e){const n=e.length;let i=0,r;const{iScale:s}=t,{min:o,max:a,minDefined:l,maxDefined:c}=s.getUserBounds();return l&&(i=st(ui(e,s.axis,o).lo,0,n-1)),c?r=st(ui(e,s.axis,a).hi+1,i,n)-i:r=n-i,{start:i,count:r}}var vj={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,n)=>{if(!n.enabled){K1(t);return}const i=t.width;t.data.datasets.forEach((r,s)=>{const{_data:o,indexAxis:a}=r,l=t.getDatasetMeta(s),c=o||r.data;if(ga([a,t.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;const h=t.scales[l.xAxisID];if(h.type!=="linear"&&h.type!=="time"||t.options.parsing)return;let{start:d,count:f}=_j(l,c);const g=n.threshold||4*i;if(f<=g){_2(r);return}oe(o)&&(r._data=c,delete r.data,Object.defineProperty(r,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(x){this._data=x}}));let y;switch(n.algorithm){case"lttb":y=mj(c,d,f,i,n);break;case"min-max":y=yj(c,d,f,i);break;default:throw new Error(`Unsupported decimation algorithm '${n.algorithm}'`)}r._decimated=y})},destroy(t){K1(t)}};function wj(t,e,n){const i=t.segments,r=t.points,s=e.points,o=[];for(const a of i){let{start:l,end:c}=a;c=s_(l,c,r);const h=Dg(n,r[l],r[c],a.loop);if(!e.segments){o.push({source:a,target:h,start:r[l],end:r[c]});continue}const d=e2(e,h);for(const f of d){const g=Dg(n,s[f.start],s[f.end],f.loop),y=ZI(a,r,g);for(const x of y)o.push({source:x,target:f,start:{[n]:G1(h,g,"start",Math.max)},end:{[n]:G1(h,g,"end",Math.min)}})}}return o}function Dg(t,e,n,i){if(i)return;let r=e[t],s=n[t];return t==="angle"&&(r=Jt(r),s=Jt(s)),{property:t,start:r,end:s}}function xj(t,e){const{x:n=null,y:i=null}=t||{},r=e.points,s=[];return e.segments.forEach(({start:o,end:a})=>{a=s_(o,a,r);const l=r[o],c=r[a];i!==null?(s.push({x:l.x,y:i}),s.push({x:c.x,y:i})):n!==null&&(s.push({x:n,y:l.y}),s.push({x:n,y:c.y}))}),s}function s_(t,e,n){for(;e>t;e--){const i=n[e];if(!isNaN(i.x)&&!isNaN(i.y))break}return e}function G1(t,e,n,i){return t&&e?i(t[n],e[n]):t?t[n]:e?e[n]:0}function v2(t,e){let n=[],i=!1;return Oe(t)?(i=!0,n=t):n=xj(t,e),n.length?new Qi({points:n,options:{tension:0},_loop:i,_fullLoop:i}):null}function Q1(t){return t&&t.fill!==!1}function Ej(t,e,n){let r=t[e].fill;const s=[e];let o;if(!n)return r;for(;r!==!1&&s.indexOf(r)===-1;){if(!He(r))return r;if(o=t[r],!o)return!1;if(o.visible)return r;s.push(r),r=o.fill}return!1}function Tj(t,e,n){const i=kj(t);if(ue(i))return isNaN(i.value)?!1:i;let r=parseFloat(i);return He(r)&&Math.floor(r)===r?bj(i[0],e,r,n):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function bj(t,e,n,i){return(t==="-"||t==="+")&&(n=e+n),n===e||n<0||n>=i?!1:n}function Sj(t,e){let n=null;return t==="start"?n=e.bottom:t==="end"?n=e.top:ue(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}function Ij(t,e,n){let i;return t==="start"?i=n:t==="end"?i=e.options.reverse?e.min:e.max:ue(t)?i=t.value:i=e.getBaseValue(),i}function kj(t){const e=t.options,n=e.fill;let i=re(n&&n.target,n);return i===void 0&&(i=!!e.backgroundColor),i===!1||i===null?!1:i===!0?"origin":i}function Pj(t){const{scale:e,index:n,line:i}=t,r=[],s=i.segments,o=i.points,a=Aj(e,n);a.push(v2({x:null,y:e.bottom},i));for(let l=0;l<s.length;l++){const c=s[l];for(let h=c.start;h<=c.end;h++)Cj(r,o[h],a)}return new Qi({points:r,options:{}})}function Aj(t,e){const n=[],i=t.getMatchingVisibleMetas("line");for(let r=0;r<i.length;r++){const s=i[r];if(s.index===e)break;s.hidden||n.unshift(s.dataset)}return n}function Cj(t,e,n){const i=[];for(let r=0;r<n.length;r++){const s=n[r],{first:o,last:a,point:l}=Rj(s,e,"x");if(!(!l||o&&a)){if(o)i.unshift(l);else if(t.push(l),!a)break}}t.push(...i)}function Rj(t,e,n){const i=t.interpolate(e,n);if(!i)return{};const r=i[n],s=t.segments,o=t.points;let a=!1,l=!1;for(let c=0;c<s.length;c++){const h=s[c],d=o[h.start][n],f=o[h.end][n];if(ci(r,d,f)){a=r===d,l=r===f;break}}return{first:a,last:l,point:i}}class w2{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,n,i){const{x:r,y:s,radius:o}=this;return n=n||{start:0,end:Ne},e.arc(r,s,o,n.end,n.start,!0),!i.bounds}interpolate(e){const{x:n,y:i,radius:r}=this,s=e.angle;return{x:n+Math.cos(s)*r,y:i+Math.sin(s)*r,angle:s}}}function Nj(t){const{chart:e,fill:n,line:i}=t;if(He(n))return Dj(e,n);if(n==="stack")return Pj(t);if(n==="shape")return!0;const r=Mj(t);return r instanceof w2?r:v2(r,i)}function Dj(t,e){const n=t.getDatasetMeta(e);return n&&t.isDatasetVisible(e)?n.dataset:null}function Mj(t){return(t.scale||{}).getPointPositionForValue?Lj(t):Oj(t)}function Oj(t){const{scale:e={},fill:n}=t,i=Sj(n,e);if(He(i)){const r=e.isHorizontal();return{x:r?i:null,y:r?null:i}}return null}function Lj(t){const{scale:e,fill:n}=t,i=e.options,r=e.getLabels().length,s=i.reverse?e.max:e.min,o=Ij(n,e,s),a=[];if(i.grid.circular){const l=e.getPointPositionForValue(0,s);return new w2({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(o)})}for(let l=0;l<r;++l)a.push(e.getPointPositionForValue(l,o));return a}function Xf(t,e,n){const i=Nj(e),{line:r,scale:s,axis:o}=e,a=r.options,l=a.fill,c=a.backgroundColor,{above:h=c,below:d=c}=l||{};i&&r.points.length&&(xd(t,n),Vj(t,{line:r,target:i,above:h,below:d,area:n,scale:s,axis:o}),Ed(t))}function Vj(t,e){const{line:n,target:i,above:r,below:s,area:o,scale:a}=e,l=n._loop?"angle":e.axis;t.save(),l==="x"&&s!==r&&(Y1(t,i,o.top),X1(t,{line:n,target:i,color:r,scale:a,property:l}),t.restore(),t.save(),Y1(t,i,o.bottom)),X1(t,{line:n,target:i,color:s,scale:a,property:l}),t.restore()}function Y1(t,e,n){const{segments:i,points:r}=e;let s=!0,o=!1;t.beginPath();for(const a of i){const{start:l,end:c}=a,h=r[l],d=r[s_(l,c,r)];s?(t.moveTo(h.x,h.y),s=!1):(t.lineTo(h.x,n),t.lineTo(h.x,h.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(d.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function X1(t,e){const{line:n,target:i,property:r,color:s,scale:o}=e,a=wj(n,i,r);for(const{source:l,target:c,start:h,end:d}of a){const{style:{backgroundColor:f=s}={}}=l,g=i!==!0;t.save(),t.fillStyle=f,Fj(t,o,g&&Dg(r,h,d)),t.beginPath();const y=!!n.pathSegment(t,l);let x;if(g){y?t.closePath():J1(t,i,d,r);const T=!!i.pathSegment(t,c,{move:y,reverse:!0});x=y&&T,x||J1(t,i,h,r)}t.closePath(),t.fill(x?"evenodd":"nonzero"),t.restore()}}function Fj(t,e,n){const{top:i,bottom:r}=e.chart.chartArea,{property:s,start:o,end:a}=n||{};s==="x"&&(t.beginPath(),t.rect(o,i,a-o,r-i),t.clip())}function J1(t,e,n,i){const r=e.interpolate(n,i);r&&t.lineTo(r.x,r.y)}var jj={id:"filler",afterDatasetsUpdate(t,e,n){const i=(t.data.datasets||[]).length,r=[];let s,o,a,l;for(o=0;o<i;++o)s=t.getDatasetMeta(o),a=s.dataset,l=null,a&&a.options&&a instanceof Qi&&(l={visible:t.isDatasetVisible(o),index:o,fill:Tj(a,o,i),chart:t,axis:s.controller.options.indexAxis,scale:s.vScale,line:a}),s.$filler=l,r.push(l);for(o=0;o<i;++o)l=r[o],!(!l||l.fill===!1)&&(l.fill=Ej(r,o,n.propagate))},beforeDraw(t,e,n){const i=n.drawTime==="beforeDraw",r=t.getSortedVisibleDatasetMetas(),s=t.chartArea;for(let o=r.length-1;o>=0;--o){const a=r[o].$filler;a&&(a.line.updateControlPoints(s,a.axis),i&&a.fill&&Xf(t.ctx,a,s))}},beforeDatasetsDraw(t,e,n){if(n.drawTime!=="beforeDatasetsDraw")return;const i=t.getSortedVisibleDatasetMetas();for(let r=i.length-1;r>=0;--r){const s=i[r].$filler;Q1(s)&&Xf(t.ctx,s,t.chartArea)}},beforeDatasetDraw(t,e,n){const i=e.meta.$filler;!Q1(i)||n.drawTime!=="beforeDatasetDraw"||Xf(t.ctx,i,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Z1=(t,e)=>{let{boxHeight:n=e,boxWidth:i=e}=t;return t.usePointStyle&&(n=Math.min(n,e),i=t.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(e,n)}},Uj=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class ex extends kn{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,i){this.maxWidth=e,this.maxHeight=n,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=Ie(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(i=>e.filter(i,this.chart.data))),e.sort&&(n=n.sort((i,r)=>e.sort(i,r,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const i=e.labels,r=tt(i.font),s=r.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=Z1(i,s);let c,h;n.font=r.string,this.isHorizontal()?(c=this.maxWidth,h=this._fitRows(o,s,a,l)+10):(h=this.maxHeight,c=this._fitCols(o,r,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(h,e.maxHeight||this.maxHeight)}_fitRows(e,n,i,r){const{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],h=r+a;let d=e;s.textAlign="left",s.textBaseline="middle";let f=-1,g=-h;return this.legendItems.forEach((y,x)=>{const T=i+n/2+s.measureText(y.text).width;(x===0||c[c.length-1]+T+2*a>o)&&(d+=h,c[c.length-(x>0?0:1)]=0,g+=h,f++),l[x]={left:0,top:g,row:f,width:T,height:r},c[c.length-1]+=T+a}),d}_fitCols(e,n,i,r){const{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],h=o-e;let d=a,f=0,g=0,y=0,x=0;return this.legendItems.forEach((T,v)=>{const{itemWidth:w,itemHeight:b}=zj(i,n,s,T,r);v>0&&g+b+2*a>h&&(d+=f+a,c.push({width:f,height:g}),y+=f+a,x++,f=g=0),l[v]={left:y,top:g,col:x,width:w,height:b},f=Math.max(f,w),g+=b+a}),d+=f,c.push({width:f,height:g}),d}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:i,labels:{padding:r},rtl:s}}=this,o=to(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=xt(i,this.left+r,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=xt(i,this.left+r,this.right-this.lineWidths[a])),c.top+=this.top+e+r,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+r}else{let a=0,l=xt(i,this.top+e+r,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=xt(i,this.top+e+r,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+r,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;xd(e,this),this._draw(),Ed(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:i,ctx:r}=this,{align:s,labels:o}=e,a=Le.color,l=to(e.rtl,this.left,this.width),c=tt(o.font),{padding:h}=o,d=c.size,f=d/2;let g;this.drawTitle(),r.textAlign=l.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=c.string;const{boxWidth:y,boxHeight:x,itemHeight:T}=Z1(o,d),v=function(M,S,E){if(isNaN(y)||y<=0||isNaN(x)||x<0)return;r.save();const P=re(E.lineWidth,1);if(r.fillStyle=re(E.fillStyle,a),r.lineCap=re(E.lineCap,"butt"),r.lineDashOffset=re(E.lineDashOffset,0),r.lineJoin=re(E.lineJoin,"miter"),r.lineWidth=P,r.strokeStyle=re(E.strokeStyle,a),r.setLineDash(re(E.lineDash,[])),o.usePointStyle){const k={radius:x*Math.SQRT2/2,pointStyle:E.pointStyle,rotation:E.rotation,borderWidth:P},C=l.xPlus(M,y/2),N=S+f;BI(r,k,C,N,o.pointStyleWidth&&y)}else{const k=S+Math.max((d-x)/2,0),C=l.leftForLtr(M,y),N=Kr(E.borderRadius);r.beginPath(),Object.values(N).some(R=>R!==0)?xl(r,{x:C,y:k,w:y,h:x,radius:N}):r.rect(C,k,y,x),r.fill(),P!==0&&r.stroke()}r.restore()},w=function(M,S,E){cs(r,E.text,M,S+T/2,c,{strikethrough:E.hidden,textAlign:l.textAlign(E.textAlign)})},b=this.isHorizontal(),A=this._computeTitleHeight();b?g={x:xt(s,this.left+h,this.right-i[0]),y:this.top+h+A,line:0}:g={x:this.left+h,y:xt(s,this.top+A+h,this.bottom-n[0].height),line:0},YI(this.ctx,e.textDirection);const D=T+h;this.legendItems.forEach((M,S)=>{r.strokeStyle=M.fontColor,r.fillStyle=M.fontColor;const E=r.measureText(M.text).width,P=l.textAlign(M.textAlign||(M.textAlign=o.textAlign)),k=y+f+E;let C=g.x,N=g.y;l.setWidth(this.width),b?S>0&&C+k+h>this.right&&(N=g.y+=D,g.line++,C=g.x=xt(s,this.left+h,this.right-i[g.line])):S>0&&N+D>this.bottom&&(C=g.x=C+n[g.line].width+h,g.line++,N=g.y=xt(s,this.top+A+h,this.bottom-n[g.line].height));const R=l.x(C);if(v(R,N,M),C=a6(P,C+y+f,b?C+k:this.right,e.rtl),w(l.x(C),N,M),b)g.x+=k+h;else if(typeof M.text!="string"){const fe=c.lineHeight;g.y+=x2(M,fe)+h}else g.y+=D}),XI(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,i=tt(n.font),r=At(n.padding);if(!n.display)return;const s=to(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=i.size/2,c=r.top+l;let h,d=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),h=this.top+c,d=xt(e.align,d,this.right-f);else{const y=this.columnSizes.reduce((x,T)=>Math.max(x,T.height),0);h=c+xt(e.align,this.top,this.bottom-y-e.labels.padding-this._computeTitleHeight())}const g=xt(a,d,d+f);o.textAlign=s.textAlign(Yy(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=i.string,cs(o,n.text,g,h,i)}_computeTitleHeight(){const e=this.options.title,n=tt(e.font),i=At(e.padding);return e.display?n.lineHeight+i.height:0}_getLegendItemAt(e,n){let i,r,s;if(ci(e,this.left,this.right)&&ci(n,this.top,this.bottom)){for(s=this.legendHitBoxes,i=0;i<s.length;++i)if(r=s[i],ci(e,r.left,r.left+r.width)&&ci(n,r.top,r.top+r.height))return this.legendItems[i]}return null}handleEvent(e){const n=this.options;if(!Hj(e.type,n))return;const i=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const r=this._hoveredItem,s=Uj(r,i);r&&!s&&Ie(n.onLeave,[e,r,this],this),this._hoveredItem=i,i&&!s&&Ie(n.onHover,[e,i,this],this)}else i&&Ie(n.onClick,[e,i,this],this)}}function zj(t,e,n,i,r){const s=Bj(i,t,e,n),o=$j(r,i,e.lineHeight);return{itemWidth:s,itemHeight:o}}function Bj(t,e,n,i){let r=t.text;return r&&typeof r!="string"&&(r=r.reduce((s,o)=>s.length>o.length?s:o)),e+n.size/2+i.measureText(r).width}function $j(t,e,n){let i=t;return typeof e.text!="string"&&(i=x2(e,n)),i}function x2(t,e){const n=t.text?t.text.length:0;return e*n}function Hj(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var Wj={id:"legend",_element:ex,start(t,e,n){const i=t.legend=new ex({ctx:t.ctx,options:n,chart:t});St.configure(t,i,n),St.addBox(t,i)},stop(t){St.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const i=t.legend;St.configure(t,i,n),i.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const i=e.datasetIndex,r=n.chart;r.isDatasetVisible(i)?(r.hide(i),e.hidden=!0):(r.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:r,color:s,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),h=At(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:c.borderColor,pointStyle:i||c.pointStyle,rotation:c.rotation,textAlign:r||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class o_ extends kn{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const r=Oe(i.text)?i.text.length:1;this._padding=At(i.padding);const s=r*tt(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:i,bottom:r,right:s,options:o}=this,a=o.align;let l=0,c,h,d;return this.isHorizontal()?(h=xt(a,i,s),d=n+e,c=s-i):(o.position==="left"?(h=i+e,d=xt(a,r,n),l=De*-.5):(h=s-e,d=xt(a,n,r),l=De*.5),c=r-n),{titleX:h,titleY:d,maxWidth:c,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const i=tt(n.font),s=i.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(s);cs(e,n.text,0,0,i,{color:n.color,maxWidth:l,rotation:c,textAlign:Yy(n.align),textBaseline:"middle",translation:[o,a]})}}function qj(t,e){const n=new o_({ctx:t.ctx,options:e,chart:t});St.configure(t,n,e),St.addBox(t,n),t.titleBlock=n}var Kj={id:"title",_element:o_,start(t,e,n){qj(t,n)},stop(t){const e=t.titleBlock;St.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const i=t.titleBlock;St.configure(t,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Qc=new WeakMap;var Gj={id:"subtitle",start(t,e,n){const i=new o_({ctx:t.ctx,options:n,chart:t});St.configure(t,i,n),St.addBox(t,i),Qc.set(t,i)},stop(t){St.removeBox(t,Qc.get(t)),Qc.delete(t)},beforeUpdate(t,e,n){const i=Qc.get(t);St.configure(t,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const _a={average(t){if(!t.length)return!1;let e,n,i=new Set,r=0,s=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();i.add(l.x),r+=l.y,++s}}return s===0||i.size===0?!1:{x:[...i].reduce((a,l)=>a+l)/i.size,y:r/s}},nearest(t,e){if(!t.length)return!1;let n=e.x,i=e.y,r=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=t.length;s<o;++s){const l=t[s].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),h=Sg(e,c);h<r&&(r=h,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,i=l.y}return{x:n,y:i}}};function Rn(t,e){return e&&(Oe(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Jn(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function Qj(t,e){const{element:n,datasetIndex:i,index:r}=e,s=t.getDatasetMeta(i).controller,{label:o,value:a}=s.getLabelAndValue(r);return{chart:t,label:o,parsed:s.getParsed(r),raw:t.data.datasets[i].data[r],formattedValue:a,dataset:s.getDataset(),dataIndex:r,datasetIndex:i,element:n}}function tx(t,e){const n=t.chart.ctx,{body:i,footer:r,title:s}=t,{boxWidth:o,boxHeight:a}=e,l=tt(e.bodyFont),c=tt(e.titleFont),h=tt(e.footerFont),d=s.length,f=r.length,g=i.length,y=At(e.padding);let x=y.height,T=0,v=i.reduce((A,D)=>A+D.before.length+D.lines.length+D.after.length,0);if(v+=t.beforeBody.length+t.afterBody.length,d&&(x+=d*c.lineHeight+(d-1)*e.titleSpacing+e.titleMarginBottom),v){const A=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;x+=g*A+(v-g)*l.lineHeight+(v-1)*e.bodySpacing}f&&(x+=e.footerMarginTop+f*h.lineHeight+(f-1)*e.footerSpacing);let w=0;const b=function(A){T=Math.max(T,n.measureText(A).width+w)};return n.save(),n.font=c.string,ve(t.title,b),n.font=l.string,ve(t.beforeBody.concat(t.afterBody),b),w=e.displayColors?o+2+e.boxPadding:0,ve(i,A=>{ve(A.before,b),ve(A.lines,b),ve(A.after,b)}),w=0,n.font=h.string,ve(t.footer,b),n.restore(),T+=y.width,{width:T,height:x}}function Yj(t,e){const{y:n,height:i}=e;return n<i/2?"top":n>t.height-i/2?"bottom":"center"}function Xj(t,e,n,i){const{x:r,width:s}=i,o=n.caretSize+n.caretPadding;if(t==="left"&&r+s+o>e.width||t==="right"&&r-s-o<0)return!0}function Jj(t,e,n,i){const{x:r,width:s}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return i==="center"?c=r<=(a+l)/2?"left":"right":r<=s/2?c="left":r>=o-s/2&&(c="right"),Xj(c,t,e,n)&&(c="center"),c}function nx(t,e,n){const i=n.yAlign||e.yAlign||Yj(t,n);return{xAlign:n.xAlign||e.xAlign||Jj(t,e,n,i),yAlign:i}}function Zj(t,e){let{x:n,width:i}=t;return e==="right"?n-=i:e==="center"&&(n-=i/2),n}function e9(t,e,n){let{y:i,height:r}=t;return e==="top"?i+=n:e==="bottom"?i-=r+n:i-=r/2,i}function ix(t,e,n,i){const{caretSize:r,caretPadding:s,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=r+s,{topLeft:h,topRight:d,bottomLeft:f,bottomRight:g}=Kr(o);let y=Zj(e,a);const x=e9(e,l,c);return l==="center"?a==="left"?y+=c:a==="right"&&(y-=c):a==="left"?y-=Math.max(h,f)+r:a==="right"&&(y+=Math.max(d,g)+r),{x:st(y,0,i.width-e.width),y:st(x,0,i.height-e.height)}}function Yc(t,e,n){const i=At(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-i.right:t.x+i.left}function rx(t){return Rn([],Jn(t))}function t9(t,e,n){return br(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function sx(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const E2={beforeTitle:Yn,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,i=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return n[e.dataIndex]}return""},afterTitle:Yn,beforeBody:Yn,beforeLabel:Yn,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return oe(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Yn,afterBody:Yn,beforeFooter:Yn,footer:Yn,afterFooter:Yn};function jt(t,e,n,i){const r=t[e].call(n,i);return typeof r>"u"?E2[e].call(n,i):r}class Mg extends kn{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,i=this.options.setContext(this.getContext()),r=i.enabled&&n.options.animation&&i.animations,s=new t2(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=t9(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:i}=n,r=jt(i,"beforeTitle",this,e),s=jt(i,"title",this,e),o=jt(i,"afterTitle",this,e);let a=[];return a=Rn(a,Jn(r)),a=Rn(a,Jn(s)),a=Rn(a,Jn(o)),a}getBeforeBody(e,n){return rx(jt(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:i}=n,r=[];return ve(e,s=>{const o={before:[],lines:[],after:[]},a=sx(i,s);Rn(o.before,Jn(jt(a,"beforeLabel",this,s))),Rn(o.lines,jt(a,"label",this,s)),Rn(o.after,Jn(jt(a,"afterLabel",this,s))),r.push(o)}),r}getAfterBody(e,n){return rx(jt(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:i}=n,r=jt(i,"beforeFooter",this,e),s=jt(i,"footer",this,e),o=jt(i,"afterFooter",this,e);let a=[];return a=Rn(a,Jn(r)),a=Rn(a,Jn(s)),a=Rn(a,Jn(o)),a}_createItems(e){const n=this._active,i=this.chart.data,r=[],s=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(Qj(this.chart,n[l]));return e.filter&&(a=a.filter((h,d,f)=>e.filter(h,d,f,i))),e.itemSort&&(a=a.sort((h,d)=>e.itemSort(h,d,i))),ve(a,h=>{const d=sx(e.callbacks,h);r.push(jt(d,"labelColor",this,h)),s.push(jt(d,"labelPointStyle",this,h)),o.push(jt(d,"labelTextColor",this,h))}),this.labelColors=r,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const i=this.options.setContext(this.getContext()),r=this._active;let s,o=[];if(!r.length)this.opacity!==0&&(s={opacity:0});else{const a=_a[i.position].call(this,r,this._eventPosition);o=this._createItems(i),this.title=this.getTitle(o,i),this.beforeBody=this.getBeforeBody(o,i),this.body=this.getBody(o,i),this.afterBody=this.getAfterBody(o,i),this.footer=this.getFooter(o,i);const l=this._size=tx(this,i),c=Object.assign({},a,l),h=nx(this.chart,i,c),d=ix(i,c,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,s={opacity:1,x:d.x,y:d.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,i,r){const s=this.getCaretPosition(e,i,r);n.lineTo(s.x1,s.y1),n.lineTo(s.x2,s.y2),n.lineTo(s.x3,s.y3)}getCaretPosition(e,n,i){const{xAlign:r,yAlign:s}=this,{caretSize:o,cornerRadius:a}=i,{topLeft:l,topRight:c,bottomLeft:h,bottomRight:d}=Kr(a),{x:f,y:g}=e,{width:y,height:x}=n;let T,v,w,b,A,D;return s==="center"?(A=g+x/2,r==="left"?(T=f,v=T-o,b=A+o,D=A-o):(T=f+y,v=T+o,b=A-o,D=A+o),w=T):(r==="left"?v=f+Math.max(l,h)+o:r==="right"?v=f+y-Math.max(c,d)-o:v=this.caretX,s==="top"?(b=g,A=b-o,T=v-o,w=v+o):(b=g+x,A=b+o,T=v+o,w=v-o),D=b),{x1:T,x2:v,x3:w,y1:b,y2:A,y3:D}}drawTitle(e,n,i){const r=this.title,s=r.length;let o,a,l;if(s){const c=to(i.rtl,this.x,this.width);for(e.x=Yc(this,i.titleAlign,i),n.textAlign=c.textAlign(i.titleAlign),n.textBaseline="middle",o=tt(i.titleFont),a=i.titleSpacing,n.fillStyle=i.titleColor,n.font=o.string,l=0;l<s;++l)n.fillText(r[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===s&&(e.y+=i.titleMarginBottom-a)}}_drawColorBox(e,n,i,r,s){const o=this.labelColors[i],a=this.labelPointStyles[i],{boxHeight:l,boxWidth:c}=s,h=tt(s.bodyFont),d=Yc(this,"left",s),f=r.x(d),g=l<h.lineHeight?(h.lineHeight-l)/2:0,y=n.y+g;if(s.usePointStyle){const x={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},T=r.leftForLtr(f,c)+c/2,v=y+l/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,kg(e,x,T,v),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,kg(e,x,T,v)}else{e.lineWidth=ue(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const x=r.leftForLtr(f,c),T=r.leftForLtr(r.xPlus(f,1),c-2),v=Kr(o.borderRadius);Object.values(v).some(w=>w!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,xl(e,{x,y,w:c,h:l,radius:v}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),xl(e,{x:T,y:y+1,w:c-2,h:l-2,radius:v}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(x,y,c,l),e.strokeRect(x,y,c,l),e.fillStyle=o.backgroundColor,e.fillRect(T,y+1,c-2,l-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,n,i){const{body:r}=this,{bodySpacing:s,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:h}=i,d=tt(i.bodyFont);let f=d.lineHeight,g=0;const y=to(i.rtl,this.x,this.width),x=function(E){n.fillText(E,y.x(e.x+g),e.y+f/2),e.y+=f+s},T=y.textAlign(o);let v,w,b,A,D,M,S;for(n.textAlign=o,n.textBaseline="middle",n.font=d.string,e.x=Yc(this,T,i),n.fillStyle=i.bodyColor,ve(this.beforeBody,x),g=a&&T!=="right"?o==="center"?c/2+h:c+2+h:0,A=0,M=r.length;A<M;++A){for(v=r[A],w=this.labelTextColors[A],n.fillStyle=w,ve(v.before,x),b=v.lines,a&&b.length&&(this._drawColorBox(n,e,A,y,i),f=Math.max(d.lineHeight,l)),D=0,S=b.length;D<S;++D)x(b[D]),f=d.lineHeight;ve(v.after,x)}g=0,f=d.lineHeight,ve(this.afterBody,x),e.y-=s}drawFooter(e,n,i){const r=this.footer,s=r.length;let o,a;if(s){const l=to(i.rtl,this.x,this.width);for(e.x=Yc(this,i.footerAlign,i),e.y+=i.footerMarginTop,n.textAlign=l.textAlign(i.footerAlign),n.textBaseline="middle",o=tt(i.footerFont),n.fillStyle=i.footerColor,n.font=o.string,a=0;a<s;++a)n.fillText(r[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+i.footerSpacing}}drawBackground(e,n,i,r){const{xAlign:s,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:h}=i,{topLeft:d,topRight:f,bottomLeft:g,bottomRight:y}=Kr(r.cornerRadius);n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.beginPath(),n.moveTo(a+d,l),o==="top"&&this.drawCaret(e,n,i,r),n.lineTo(a+c-f,l),n.quadraticCurveTo(a+c,l,a+c,l+f),o==="center"&&s==="right"&&this.drawCaret(e,n,i,r),n.lineTo(a+c,l+h-y),n.quadraticCurveTo(a+c,l+h,a+c-y,l+h),o==="bottom"&&this.drawCaret(e,n,i,r),n.lineTo(a+g,l+h),n.quadraticCurveTo(a,l+h,a,l+h-g),o==="center"&&s==="left"&&this.drawCaret(e,n,i,r),n.lineTo(a,l+d),n.quadraticCurveTo(a,l,a+d,l),n.closePath(),n.fill(),r.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,i=this.$animations,r=i&&i.x,s=i&&i.y;if(r||s){const o=_a[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=tx(this,e),l=Object.assign({},o,this._size),c=nx(n,e,l),h=ix(e,l,c,n);(r._to!==h.x||s._to!==h.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(n);const r={width:this.width,height:this.height},s={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const o=At(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=i,this.drawBackground(s,e,r,n),YI(e,n.textDirection),s.y+=o.top,this.drawTitle(s,e,n),this.drawBody(s,e,n),this.drawFooter(s,e,n),XI(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const i=this._active,r=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),s=!vh(i,r),o=this._positionChanged(r,n);(s||o)&&(this._active=r,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,i=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,s=this._active||[],o=this._getActiveElements(e,s,n,i),a=this._positionChanged(o,e),l=n||!vh(o,s)||a;return l&&(this._active=o,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,i,r){const s=this.options;if(e.type==="mouseout")return[];if(!r)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,s.mode,s,i);return s.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:i,caretY:r,options:s}=this,o=_a[s.position].call(this,e,n);return o!==!1&&(i!==o.x||r!==o.y)}}H(Mg,"positioners",_a);var n9={id:"tooltip",_element:Mg,positioners:_a,afterInit(t,e,n){n&&(t.tooltip=new Mg({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:E2},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},i9=Object.freeze({__proto__:null,Colors:gj,Decimation:vj,Filler:jj,Legend:Wj,SubTitle:Gj,Title:Kj,Tooltip:n9});const r9=(t,e,n,i)=>(typeof e=="string"?(n=t.push(e)-1,i.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function s9(t,e,n,i){const r=t.indexOf(e);if(r===-1)return r9(t,e,n,i);const s=t.lastIndexOf(e);return r!==s?n:r}const o9=(t,e)=>t===null?null:st(Math.round(t),0,e);function ox(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class Og extends _s{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const i=this.getLabels();for(const{index:r,label:s}of n)i[r]===s&&i.splice(r,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(oe(e))return null;const i=this.getLabels();return n=isFinite(n)&&i[n]===e?n:s9(i,e,re(n,e),this._addedLabels),o9(n,i.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:i,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(i=0),n||(r=this.getLabels().length-1)),this.min=i,this.max=r}buildTicks(){const e=this.min,n=this.max,i=this.options.offset,r=[];let s=this.getLabels();s=e===0&&n===s.length-1?s:s.slice(e,n+1),this._valueRange=Math.max(s.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let o=e;o<=n;o++)r.push({value:o});return r}getLabelForValue(e){return ox.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}H(Og,"id","category"),H(Og,"defaults",{ticks:{callback:ox}});function a9(t,e){const n=[],{bounds:r,step:s,min:o,max:a,precision:l,count:c,maxTicks:h,maxDigits:d,includeBounds:f}=t,g=s||1,y=h-1,{min:x,max:T}=e,v=!oe(o),w=!oe(a),b=!oe(c),A=(T-x)/(d+1);let D=t1((T-x)/y/g)*g,M,S,E,P;if(D<1e-14&&!v&&!w)return[{value:x},{value:T}];P=Math.ceil(T/D)-Math.floor(x/D),P>y&&(D=t1(P*D/y/g)*g),oe(l)||(M=Math.pow(10,l),D=Math.ceil(D*M)/M),r==="ticks"?(S=Math.floor(x/D)*D,E=Math.ceil(T/D)*D):(S=x,E=T),v&&w&&s&&e6((a-o)/s,D/1e3)?(P=Math.round(Math.min((a-o)/D,h)),D=(a-o)/P,S=o,E=a):b?(S=v?o:S,E=w?a:E,P=c-1,D=(E-S)/P):(P=(E-S)/D,La(P,Math.round(P),D/1e3)?P=Math.round(P):P=Math.ceil(P));const k=Math.max(n1(D),n1(S));M=Math.pow(10,oe(l)?k:l),S=Math.round(S*M)/M,E=Math.round(E*M)/M;let C=0;for(v&&(f&&S!==o?(n.push({value:o}),S<o&&C++,La(Math.round((S+C*D)*M)/M,o,ax(o,A,t))&&C++):S<o&&C++);C<P;++C){const N=Math.round((S+C*D)*M)/M;if(w&&N>a)break;n.push({value:N})}return w&&f&&E!==a?n.length&&La(n[n.length-1].value,a,ax(a,A,t))?n[n.length-1].value=a:n.push({value:a}):(!w||E===a)&&n.push({value:E}),n}function ax(t,e,{horizontal:n,minRotation:i}){const r=vn(i),s=(n?Math.sin(r):Math.cos(r))||.001,o=.75*e*(""+t).length;return Math.min(e/s,o)}class Ih extends _s{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return oe(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:i}=this.getUserBounds();let{min:r,max:s}=this;const o=l=>r=n?r:l,a=l=>s=i?s:l;if(e){const l=Hn(r),c=Hn(s);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(r===s){let l=s===0?1:Math.abs(s*.05);a(s+l),e||o(r-l)}this.min=r,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:i}=e,r;return i?(r=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),n=n||11),n&&(r=Math.min(n,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const r={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},s=this._range||this,o=a9(r,s);return e.bounds==="ticks"&&DI(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const r=(i-n)/Math.max(e.length-1,1)/2;n-=r,i+=r}this._startValue=n,this._endValue=i,this._valueRange=i-n}getLabelForValue(e){return ql(e,this.chart.options.locale,this.options.ticks.format)}}class Lg extends Ih{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=He(e)?e:0,this.max=He(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,i=vn(this.options.ticks.minRotation),r=(e?Math.sin(i):Math.cos(i))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,s.lineHeight/r))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}H(Lg,"id","linear"),H(Lg,"defaults",{ticks:{callback:wd.formatters.numeric}});const Tl=t=>Math.floor(Gi(t)),Nr=(t,e)=>Math.pow(10,Tl(t)+e);function lx(t){return t/Math.pow(10,Tl(t))===1}function cx(t,e,n){const i=Math.pow(10,n),r=Math.floor(t/i);return Math.ceil(e/i)-r}function l9(t,e){const n=e-t;let i=Tl(n);for(;cx(t,e,i)>10;)i++;for(;cx(t,e,i)<10;)i--;return Math.min(i,Tl(t))}function c9(t,{min:e,max:n}){e=Yt(t.min,e);const i=[],r=Tl(e);let s=l9(e,n),o=s<0?Math.pow(10,Math.abs(s)):1;const a=Math.pow(10,s),l=r>s?Math.pow(10,r):0,c=Math.round((e-l)*o)/o,h=Math.floor((e-l)/a/10)*a*10;let d=Math.floor((c-h)/Math.pow(10,s)),f=Yt(t.min,Math.round((l+h+d*Math.pow(10,s))*o)/o);for(;f<n;)i.push({value:f,major:lx(f),significand:d}),d>=10?d=d<15?15:20:d++,d>=20&&(s++,d=2,o=s>=0?1:o),f=Math.round((l+h+d*Math.pow(10,s))*o)/o;const g=Yt(t.max,f);return i.push({value:g,major:lx(g),significand:d}),i}class Vg extends _s{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,n){const i=Ih.prototype.parse.apply(this,[e,n]);if(i===0){this._zero=!0;return}return He(i)&&i>0?i:null}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=He(e)?Math.max(0,e):null,this.max=He(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!He(this._userMin)&&(this.min=e===Nr(this.min,0)?Nr(this.min,-1):Nr(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let i=this.min,r=this.max;const s=a=>i=e?i:a,o=a=>r=n?r:a;i===r&&(i<=0?(s(1),o(10)):(s(Nr(i,-1)),o(Nr(r,1)))),i<=0&&s(Nr(r,-1)),r<=0&&o(Nr(i,1)),this.min=i,this.max=r}buildTicks(){const e=this.options,n={min:this._userMin,max:this._userMax},i=c9(n,this);return e.bounds==="ticks"&&DI(i,this,"value"),e.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(e){return e===void 0?"0":ql(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=Gi(e),this._valueRange=Gi(this.max)-Gi(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(Gi(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const n=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+n*this._valueRange)}}H(Vg,"id","logarithmic"),H(Vg,"defaults",{ticks:{callback:wd.formatters.logarithmic,major:{enabled:!0}}});function Fg(t){const e=t.ticks;if(e.display&&t.display){const n=At(e.backdropPadding);return re(e.font&&e.font.size,Le.font.size)+n.height}return 0}function u9(t,e,n){return n=Oe(n)?n:[n],{w:y6(t,e.string,n),h:n.length*e.lineHeight}}function ux(t,e,n,i,r){return t===i||t===r?{start:e-n/2,end:e+n/2}:t<i||t>r?{start:e-n,end:e}:{start:e,end:e+n}}function h9(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),i=[],r=[],s=t._pointLabels.length,o=t.options.pointLabels,a=o.centerPointLabels?De/s:0;for(let l=0;l<s;l++){const c=o.setContext(t.getPointLabelContext(l));r[l]=c.padding;const h=t.getPointPosition(l,t.drawingArea+r[l],a),d=tt(c.font),f=u9(t.ctx,d,t._pointLabels[l]);i[l]=f;const g=Jt(t.getIndexAngle(l)+a),y=Math.round(Gy(g)),x=ux(y,h.x,f.w,0,180),T=ux(y,h.y,f.h,90,270);d9(n,e,g,x,T)}t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=g9(t,i,r)}function d9(t,e,n,i,r){const s=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n));let a=0,l=0;i.start<e.l?(a=(e.l-i.start)/s,t.l=Math.min(t.l,e.l-a)):i.end>e.r&&(a=(i.end-e.r)/s,t.r=Math.max(t.r,e.r+a)),r.start<e.t?(l=(e.t-r.start)/o,t.t=Math.min(t.t,e.t-l)):r.end>e.b&&(l=(r.end-e.b)/o,t.b=Math.max(t.b,e.b+l))}function f9(t,e,n){const i=t.drawingArea,{extra:r,additionalAngle:s,padding:o,size:a}=n,l=t.getPointPosition(e,i+r+o,s),c=Math.round(Gy(Jt(l.angle+Qe))),h=_9(l.y,a.h,c),d=m9(c),f=y9(l.x,a.w,d);return{visible:!0,x:l.x,y:h,textAlign:d,left:f,top:h,right:f+a.w,bottom:h+a.h}}function p9(t,e){if(!e)return!0;const{left:n,top:i,right:r,bottom:s}=t;return!(hi({x:n,y:i},e)||hi({x:n,y:s},e)||hi({x:r,y:i},e)||hi({x:r,y:s},e))}function g9(t,e,n){const i=[],r=t._pointLabels.length,s=t.options,{centerPointLabels:o,display:a}=s.pointLabels,l={extra:Fg(s)/2,additionalAngle:o?De/r:0};let c;for(let h=0;h<r;h++){l.padding=n[h],l.size=e[h];const d=f9(t,h,l);i.push(d),a==="auto"&&(d.visible=p9(d,c),d.visible&&(c=d))}return i}function m9(t){return t===0||t===180?"center":t<180?"left":"right"}function y9(t,e,n){return n==="right"?t-=e:n==="center"&&(t-=e/2),t}function _9(t,e,n){return n===90||n===270?t-=e/2:(n>270||n<90)&&(t-=e),t}function v9(t,e,n){const{left:i,top:r,right:s,bottom:o}=n,{backdropColor:a}=e;if(!oe(a)){const l=Kr(e.borderRadius),c=At(e.backdropPadding);t.fillStyle=a;const h=i-c.left,d=r-c.top,f=s-i+c.width,g=o-r+c.height;Object.values(l).some(y=>y!==0)?(t.beginPath(),xl(t,{x:h,y:d,w:f,h:g,radius:l}),t.fill()):t.fillRect(h,d,f,g)}}function w9(t,e){const{ctx:n,options:{pointLabels:i}}=t;for(let r=e-1;r>=0;r--){const s=t._pointLabelItems[r];if(!s.visible)continue;const o=i.setContext(t.getPointLabelContext(r));v9(n,o,s);const a=tt(o.font),{x:l,y:c,textAlign:h}=s;cs(n,t._pointLabels[r],l,c+a.lineHeight/2,a,{color:o.color,textAlign:h,textBaseline:"middle"})}}function T2(t,e,n,i){const{ctx:r}=t;if(n)r.arc(t.xCenter,t.yCenter,e,0,Ne);else{let s=t.getPointPosition(0,e);r.moveTo(s.x,s.y);for(let o=1;o<i;o++)s=t.getPointPosition(o,e),r.lineTo(s.x,s.y)}}function x9(t,e,n,i,r){const s=t.ctx,o=e.circular,{color:a,lineWidth:l}=e;!o&&!i||!a||!l||n<0||(s.save(),s.strokeStyle=a,s.lineWidth=l,s.setLineDash(r.dash||[]),s.lineDashOffset=r.dashOffset,s.beginPath(),T2(t,n,o,i),s.closePath(),s.stroke(),s.restore())}function E9(t,e,n){return br(t,{label:n,index:e,type:"pointLabel"})}class va extends Ih{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=At(Fg(this.options)/2),n=this.width=this.maxWidth-e.width,i=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+n/2+e.left),this.yCenter=Math.floor(this.top+i/2+e.top),this.drawingArea=Math.floor(Math.min(n,i)/2)}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!1);this.min=He(e)&&!isNaN(e)?e:0,this.max=He(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Fg(this.options))}generateTickLabels(e){Ih.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((n,i)=>{const r=Ie(this.options.pointLabels.callback,[n,i],this);return r||r===0?r:""}).filter((n,i)=>this.chart.getDataVisibility(i))}fit(){const e=this.options;e.display&&e.pointLabels.display?h9(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,n,i,r){this.xCenter+=Math.floor((e-n)/2),this.yCenter+=Math.floor((i-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,n,i,r))}getIndexAngle(e){const n=Ne/(this._pointLabels.length||1),i=this.options.startAngle||0;return Jt(e*n+vn(i))}getDistanceFromCenterForValue(e){if(oe(e))return NaN;const n=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*n:(e-this.min)*n}getValueForDistanceFromCenter(e){if(oe(e))return NaN;const n=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-n:this.min+n}getPointLabelContext(e){const n=this._pointLabels||[];if(e>=0&&e<n.length){const i=n[e];return E9(this.getContext(),e,i)}}getPointPosition(e,n,i=0){const r=this.getIndexAngle(e)-Qe+i;return{x:Math.cos(r)*n+this.xCenter,y:Math.sin(r)*n+this.yCenter,angle:r}}getPointPositionForValue(e,n){return this.getPointPosition(e,this.getDistanceFromCenterForValue(n))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:n,top:i,right:r,bottom:s}=this._pointLabelItems[e];return{left:n,top:i,right:r,bottom:s}}drawBackground(){const{backgroundColor:e,grid:{circular:n}}=this.options;if(e){const i=this.ctx;i.save(),i.beginPath(),T2(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),i.closePath(),i.fillStyle=e,i.fill(),i.restore()}}drawGrid(){const e=this.ctx,n=this.options,{angleLines:i,grid:r,border:s}=n,o=this._pointLabels.length;let a,l,c;if(n.pointLabels.display&&w9(this,o),r.display&&this.ticks.forEach((h,d)=>{if(d!==0||d===0&&this.min<0){l=this.getDistanceFromCenterForValue(h.value);const f=this.getContext(d),g=r.setContext(f),y=s.setContext(f);x9(this,g,l,o,y)}}),i.display){for(e.save(),a=o-1;a>=0;a--){const h=i.setContext(this.getPointLabelContext(a)),{color:d,lineWidth:f}=h;!f||!d||(e.lineWidth=f,e.strokeStyle=d,e.setLineDash(h.borderDash),e.lineDashOffset=h.borderDashOffset,l=this.getDistanceFromCenterForValue(n.reverse?this.min:this.max),c=this.getPointPosition(a,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(c.x,c.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,n=this.options,i=n.ticks;if(!i.display)return;const r=this.getIndexAngle(0);let s,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(r),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&this.min>=0&&!n.reverse)return;const c=i.setContext(this.getContext(l)),h=tt(c.font);if(s=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){e.font=h.string,o=e.measureText(a.label).width,e.fillStyle=c.backdropColor;const d=At(c.backdropPadding);e.fillRect(-o/2-d.left,-s-h.size/2-d.top,o+d.width,h.size+d.height)}cs(e,a.label,0,-s,h,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),e.restore()}drawTitle(){}}H(va,"id","radialLinear"),H(va,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:wd.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),H(va,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),H(va,"descriptors",{angleLines:{_fallback:"grid"}});const Sd={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Bt=Object.keys(Sd);function hx(t,e){return t-e}function dx(t,e){if(oe(e))return null;const n=t._adapter,{parser:i,round:r,isoWeekday:s}=t._parseOpts;let o=e;return typeof i=="function"&&(o=i(o)),He(o)||(o=typeof i=="string"?n.parse(o,i):n.parse(o)),o===null?null:(r&&(o=r==="week"&&(_o(s)||s===!0)?n.startOf(o,"isoWeek",s):n.startOf(o,r)),+o)}function fx(t,e,n,i){const r=Bt.length;for(let s=Bt.indexOf(t);s<r-1;++s){const o=Sd[Bt[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=i)return Bt[s]}return Bt[r-1]}function T9(t,e,n,i,r){for(let s=Bt.length-1;s>=Bt.indexOf(n);s--){const o=Bt[s];if(Sd[o].common&&t._adapter.diff(r,i,o)>=e-1)return o}return Bt[n?Bt.indexOf(n):0]}function b9(t){for(let e=Bt.indexOf(t)+1,n=Bt.length;e<n;++e)if(Sd[Bt[e]].common)return Bt[e]}function px(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:i,hi:r}=Qy(n,e),s=n[i]>=e?n[i]:n[r];t[s]=!0}}function S9(t,e,n,i){const r=t._adapter,s=+r.startOf(e[0].value,i),o=e[e.length-1].value;let a,l;for(a=s;a<=o;a=+r.add(a,1,i))l=n[a],l>=0&&(e[l].major=!0);return e}function gx(t,e,n){const i=[],r={},s=e.length;let o,a;for(o=0;o<s;++o)a=e[o],r[a]=o,i.push({value:a,major:!1});return s===0||!n?i:S9(t,i,r,n)}class bl extends _s{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const i=e.time||(e.time={}),r=this._adapter=new D5._date(e.adapters.date);r.init(n),Oa(i.displayFormats,r.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:dx(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,i=e.time.unit||"day";let{min:r,max:s,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(r=Math.min(r,c.min)),!a&&!isNaN(c.max)&&(s=Math.max(s,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),r=He(r)&&!isNaN(r)?r:+n.startOf(Date.now(),i),s=He(s)&&!isNaN(s)?s:+n.endOf(Date.now(),i)+1,this.min=Math.min(r,s-1),this.max=Math.max(r+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],i=e[e.length-1]),{min:n,max:i}}buildTicks(){const e=this.options,n=e.time,i=e.ticks,r=i.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const s=this.min,o=this.max,a=r6(r,s,o);return this._unit=n.unit||(i.autoSkip?fx(n.minUnit,this.min,this.max,this._getLabelCapacity(s)):T9(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:b9(this._unit),this.initOffsets(r),e.reverse&&a.reverse(),gx(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,i=0,r,s;this.options.offset&&e.length&&(r=this.getDecimalForValue(e[0]),e.length===1?n=1-r:n=(this.getDecimalForValue(e[1])-r)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?i=s:i=(s-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=st(n,0,o),i=st(i,0,o),this._offsets={start:n,end:i,factor:1/(n+1+i)}}_generate(){const e=this._adapter,n=this.min,i=this.max,r=this.options,s=r.time,o=s.unit||fx(s.minUnit,n,i,this._getLabelCapacity(n)),a=re(r.ticks.stepSize,1),l=o==="week"?s.isoWeekday:!1,c=_o(l)||l===!0,h={};let d=n,f,g;if(c&&(d=+e.startOf(d,"isoWeek",l)),d=+e.startOf(d,c?"day":o),e.diff(i,n,o)>1e5*a)throw new Error(n+" and "+i+" are too far apart with stepSize of "+a+" "+o);const y=r.ticks.source==="data"&&this.getDataTimestamps();for(f=d,g=0;f<i;f=+e.add(f,a,o),g++)px(h,f,y);return(f===i||r.bounds==="ticks"||g===1)&&px(h,f,y),Object.keys(h).sort(hx).map(x=>+x)}getLabelForValue(e){const n=this._adapter,i=this.options.time;return i.tooltipFormat?n.format(e,i.tooltipFormat):n.format(e,i.displayFormats.datetime)}format(e,n){const r=this.options.time.displayFormats,s=this._unit,o=n||r[s];return this._adapter.format(e,o)}_tickFormatFunction(e,n,i,r){const s=this.options,o=s.ticks.callback;if(o)return Ie(o,[e,n,i],this);const a=s.time.displayFormats,l=this._unit,c=this._majorUnit,h=l&&a[l],d=c&&a[c],f=i[n],g=c&&d&&f&&f.major;return this._adapter.format(e,r||(g?d:h))}generateTickLabels(e){let n,i,r;for(n=0,i=e.length;n<i;++n)r=e[n],r.label=this._tickFormatFunction(r.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+i)*n.factor)}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+i*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,i=this.ctx.measureText(e).width,r=vn(this.isHorizontal()?n.maxRotation:n.minRotation),s=Math.cos(r),o=Math.sin(r),a=this._resolveTickFontOptions(0).size;return{w:i*s+a*o,h:i*o+a*s}}_getLabelCapacity(e){const n=this.options.time,i=n.displayFormats,r=i[n.unit]||i.millisecond,s=this._tickFormatFunction(e,0,gx(this,[e],this._majorUnit),r),o=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,i;if(e.length)return e;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(n=0,i=r.length;n<i;++n)e=e.concat(r[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,i;if(e.length)return e;const r=this.getLabels();for(n=0,i=r.length;n<i;++n)e.push(dx(this,r[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return LI(e.sort(hx))}}H(bl,"id","time"),H(bl,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Xc(t,e,n){let i=0,r=t.length-1,s,o,a,l;n?(e>=t[i].pos&&e<=t[r].pos&&({lo:i,hi:r}=ui(t,"pos",e)),{pos:s,time:a}=t[i],{pos:o,time:l}=t[r]):(e>=t[i].time&&e<=t[r].time&&({lo:i,hi:r}=ui(t,"time",e)),{time:s,pos:a}=t[i],{time:o,pos:l}=t[r]);const c=o-s;return c?a+(l-a)*(e-s)/c:a}class jg extends bl{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=Xc(n,this.min),this._tableRange=Xc(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:i}=this,r=[],s=[];let o,a,l,c,h;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=i&&r.push(c);if(r.length<2)return[{time:n,pos:0},{time:i,pos:1}];for(o=0,a=r.length;o<a;++o)h=r[o+1],l=r[o-1],c=r[o],Math.round((h+l)/2)!==c&&s.push({time:c,pos:o/(a-1)});return s}_generate(){const e=this.min,n=this.max;let i=super.getDataTimestamps();return(!i.includes(e)||!i.length)&&i.splice(0,0,e),(!i.includes(n)||i.length===1)&&i.push(n),i.sort((r,s)=>r-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),i=this.getLabelTimestamps();return n.length&&i.length?e=this.normalize(n.concat(i)):e=n.length?n:i,e=this._cache.all=e,e}getDecimalForValue(e){return(Xc(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return Xc(this._table,i*this._tableRange+this._minPos,!0)}}H(jg,"id","timeseries"),H(jg,"defaults",bl.defaults);var I9=Object.freeze({__proto__:null,CategoryScale:Og,LinearScale:Lg,LogarithmicScale:Vg,RadialLinearScale:va,TimeScale:bl,TimeSeriesScale:jg});const k9=[N5,lj,i9,I9];ni.register(...k9);const P9=({salesData:t,viewMode:e})=>{const n=L.useRef(null),i=L.useRef(null);return L.useEffect(()=>{if(!t||t.length===0)return;const r=t.map(a=>new Date(a.date).toLocaleDateString("en-IN",{day:"2-digit",month:"short"})),s=t.map(a=>e==="revenue"?a.totalRevenue:a.totalProfit);i.current&&i.current.destroy();const o=n.current.getContext("2d");return i.current=new ni(o,{type:"bar",data:{labels:r,datasets:[{label:e==="revenue"?"Revenue ()":"Profit ()",data:s,backgroundColor:e==="revenue"?"rgba(251, 165, 24, 0.7)":"rgba(168, 156, 41, 0.7)",borderColor:e==="revenue"?"rgb(251, 165, 24)":"rgb(168, 156, 41)",borderWidth:1,borderRadius:4}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0,position:"top"},tooltip:{callbacks:{label:a=>{let l=a.dataset.label||"";return l&&(l+=": "),a.parsed.y!==null&&(l+=new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(a.parsed.y)),l}}}},scales:{x:{grid:{display:!1}},y:{beginAtZero:!0,ticks:{callback:a=>a>=1e3?""+a/1e3+"K":""+a}}}}}),()=>{i.current&&i.current.destroy()}},[t,e]),!t||t.length===0?m.jsx("div",{className:"no-data",children:"No sales data available for the selected period"}):m.jsx("div",{className:"sales-chart-container",children:m.jsx("canvas",{ref:n})})},A9=({items:t,viewMode:e})=>{if(!t||t.length===0)return m.jsx("div",{className:"no-data",children:"No sales data available"});const n=Math.max(...t.map(i=>e==="revenue"?i.revenue:i.profit));return m.jsx("div",{className:"top-items-container",children:t.map((i,r)=>{const s=e==="revenue"?i.revenue:i.profit,o=s/n*100;return m.jsxs("div",{className:"top-item",children:[m.jsxs("div",{className:"item-info",children:[m.jsx("div",{className:"item-rank",children:r+1}),m.jsxs("div",{className:"item-details",children:[m.jsx("h4",{className:"item-name",children:i.name}),m.jsxs("p",{className:"item-sold",children:[i.quantitySold," units sold"]})]})]}),m.jsxs("div",{className:"item-value-container",children:[m.jsx("div",{className:"item-bar-container",children:m.jsx("div",{className:"item-bar",style:{width:`${o}%`,backgroundColor:e==="revenue"?"var(--secondary)":"var(--highlight)"}})}),m.jsxs("div",{className:"item-value",children:["",s.toFixed(0)]})]})]},i.itemId||r)})})},C9=({transactions:t})=>{if(!t||t.length===0)return m.jsx("div",{className:"no-data",children:"No transaction data available"});const e=i=>new Date(i).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}),n=i=>new Date(i).toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"});return m.jsx("div",{className:"transactions-table-container",children:m.jsxs("table",{className:"transactions-table",children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{children:"Date & Time"}),m.jsx("th",{children:"Item"}),m.jsx("th",{children:"Type"}),m.jsx("th",{children:"Quantity"}),m.jsx("th",{children:"Amount"})]})}),m.jsx("tbody",{children:t.map(i=>m.jsxs("tr",{className:i.type==="sale"?"sale-row":"restock-row",children:[m.jsx("td",{children:m.jsxs("div",{className:"date-time",children:[m.jsx("span",{className:"date",children:e(i.date)}),m.jsx("span",{className:"time",children:n(i.date)})]})}),m.jsx("td",{children:i.itemName}),m.jsx("td",{children:m.jsx("span",{className:`transaction-type ${i.type}`,children:i.type==="sale"?"Sale":"Restock"})}),m.jsx("td",{children:i.quantitySold}),m.jsx("td",{className:"amount",children:i.type==="sale"?`${i.revenue.toFixed(2)}`:"-"})]},i.id))})]})})},R9=({insights:t})=>{const[e,n]=L.useState(0);return L.useEffect(()=>{if(!t||t.length<=1)return;const i=setInterval(()=>{n(r=>(r+1)%t.length)},8e3);return()=>clearInterval(i)},[t]),!t||t.length===0?null:m.jsxs("div",{className:"business-insights",children:[m.jsx("div",{className:"insight-icon",children:m.jsx(sV,{})}),m.jsxs("div",{className:"insight-content",children:[m.jsx("p",{className:"insight-text",children:t[e]}),t.length>1&&m.jsx("div",{className:"insight-indicators",children:t.map((i,r)=>m.jsx("span",{className:`indicator ${r===e?"active":""}`,onClick:()=>n(r)},r))})]})]})},N9=({currentFilter:t,onFilterChange:e})=>m.jsxs("div",{className:"filter-controls",children:[m.jsx("button",{className:`filter-btn ${t==="week"?"active":""}`,onClick:()=>e("week"),children:"This Week"}),m.jsx("button",{className:`filter-btn ${t==="month"?"active":""}`,onClick:()=>e("month"),children:"This Month"}),m.jsx("button",{className:`filter-btn ${t==="quarter"?"active":""}`,onClick:()=>e("quarter"),children:"Last 3 Months"})]}),D9=()=>{const{currentUser:t}=Pn(),[e,n]=L.useState(!0),[i,r]=L.useState(""),[s,o]=L.useState("month"),[a,l]=L.useState("revenue"),[c,h]=L.useState([]),[d,f]=L.useState([]),[g,y]=L.useState([]),[x,T]=L.useState(0),[v,w]=L.useState(0),[b,A]=L.useState(null),[D,M]=L.useState(null),[S,E]=L.useState([]),[P,k]=L.useState([]),C=()=>{const Z=new Date,U=Z,B=new Date;return s==="week"?B.setDate(Z.getDate()-7):s==="month"?B.setMonth(Z.getMonth()-1):s==="quarter"&&B.setMonth(Z.getMonth()-3),{start:B,end:U}};L.useEffect(()=>{if(!t)return;(async()=>{n(!0),r("");try{const{start:U}=C(),B=pl(Mt,"inventory"),G=pd(B,md("userId","==",t.uid)),J=await eI(G),Q=[];J.forEach(Te=>{Q.push({id:Te.id,...Te.data()})}),f(Q);const Y=N(Q,U);h(Y);const he=R(Q,U);y(he),fe(Y,Q)}catch(U){console.error("Error fetching data:",U),r("Failed to load analytics data")}n(!1)})()},[t,s]);const N=(Z,U)=>{if(!Z.length)return[];const B=[],G=new Date,J=new Date(U);for(;J<=G;){const Q={date:new Date(J),totalRevenue:0,totalProfit:0,itemsSold:[]};Z.forEach(Y=>{const he=Math.floor(Math.random()*5);if(he>0){const Te=he*Y.price,_e=Te*.3;Q.totalRevenue+=Te,Q.totalProfit+=_e,Q.itemsSold.push({itemId:Y.id,name:Y.name,quantitySold:he,revenue:Te,profit:_e,imageUrl:Y.imageUrl})}}),B.push(Q),J.setDate(J.getDate()+1)}return B},R=(Z,U)=>{if(!Z.length)return[];const B=[],G=new Date;for(let J=0;J<15;J++){const Q=Z[Math.floor(Math.random()*Z.length)],Y=new Date(U.getTime()+Math.random()*(G.getTime()-U.getTime())),he=Math.floor(Math.random()*5)+1;B.push({id:`trans-${J}`,itemId:Q.id,itemName:Q.name,quantitySold:he,revenue:he*Q.price,date:Y,type:Math.random()>.3?"sale":"restock"})}return B.sort((J,Q)=>Q.date-J.date)},fe=(Z,U)=>{let B=0,G=0;const J=new Map;if(Z.forEach(Q=>{B+=Q.totalRevenue,G+=Q.totalProfit,Q.itemsSold.forEach(Y=>{if(J.has(Y.itemId)){const he=J.get(Y.itemId);J.set(Y.itemId,{...he,quantitySold:he.quantitySold+Y.quantitySold,revenue:he.revenue+Y.revenue,profit:he.profit+Y.profit})}else J.set(Y.itemId,{itemId:Y.itemId,name:Y.name,quantitySold:Y.quantitySold,revenue:Y.revenue,profit:Y.profit,imageUrl:Y.imageUrl})})}),T(B),w(G),J.size>0){const Y=[...Array.from(J.values())].sort((he,Te)=>Te.quantitySold-he.quantitySold);A(Y[0]||null),M(Y[Y.length-1]||null),E(Y.slice(0,5))}se(Z)},se=(Z,U)=>{const B=[];if(Z.length>0){const J=Math.floor(Z.length/2),Q=Z.slice(J),Y=Z.slice(0,J),he=Q.reduce((_e,Gt)=>_e+Gt.totalRevenue,0),Te=Y.reduce((_e,Gt)=>_e+Gt.totalRevenue,0);if(Te>0){const _e=(he-Te)/Te*100;_e>0?B.push(`Your sales increased by ${_e.toFixed(1)}% compared to the previous period.`):_e<0?B.push(`Your sales decreased by ${Math.abs(_e).toFixed(1)}% compared to the previous period.`):B.push("Your sales remained stable compared to the previous period.")}}b&&B.push(`${b.name} is your best-selling product with ${b.quantitySold} units sold.`);const G=d.filter(J=>J.quantity<5);G.length>0&&B.push(`You have ${G.length} items with low stock. Consider restocking soon.`),k(B)},le=()=>{l(a==="revenue"?"profit":"revenue")};return m.jsxs("div",{className:"profit-analysis-page",children:[m.jsxs("div",{className:"page-header",children:[m.jsx("h1",{className:"page-title",children:"Profit Analysis"}),m.jsxs("div",{className:"view-toggle",onClick:le,children:[m.jsxs("span",{children:["View: ",a==="revenue"?"Revenue":"Profit"]}),a==="revenue"?m.jsx(dV,{className:"toggle-icon"}):m.jsx(hV,{className:"toggle-icon"})]})]}),i&&m.jsx("div",{className:"error-message",children:i}),m.jsx(N9,{currentFilter:s,onFilterChange:o}),e?m.jsxs("div",{className:"loading-container",children:[m.jsx("div",{className:"loading-spinner"}),m.jsx("p",{children:"Loading analytics data..."})]}):m.jsxs(m.Fragment,{children:[m.jsxs("section",{className:"metrics-section",children:[m.jsx(Vc,{title:"Total Revenue",value:x,icon:m.jsx(lV,{}),color:"primary",isCurrency:!0,altValue:a==="profit"?v:null,altLabel:a==="profit"?"Profit":null}),m.jsx(Vc,{title:"Estimated Profit",value:v,icon:m.jsx(zy,{}),color:"highlight",isCurrency:!0,altValue:a==="profit"?(v/x*100).toFixed(1)+"%":null,altLabel:a==="profit"?"Margin":null}),m.jsx(Vc,{title:"Best-Selling Item",value:(b==null?void 0:b.name)||"N/A",subvalue:b?`${b.quantitySold} units`:"",icon:m.jsx(Uy,{}),color:"secondary",imageUrl:b==null?void 0:b.imageUrl}),m.jsx(Vc,{title:"Slow-Moving Item",value:(D==null?void 0:D.name)||"N/A",subvalue:D?`${D.quantitySold} units`:"",icon:m.jsx(iV,{}),color:"accent"})]}),m.jsx(R9,{insights:P}),m.jsxs("section",{className:"charts-section",children:[m.jsxs("div",{className:"chart-container",children:[m.jsx("h2",{className:"section-title",children:"Sales Trends"}),m.jsx(P9,{salesData:c,viewMode:a})]}),m.jsxs("div",{className:"chart-container",children:[m.jsx("h2",{className:"section-title",children:"Top Selling Items"}),m.jsx(A9,{items:S,viewMode:a})]})]}),m.jsxs("section",{className:"transactions-section",children:[m.jsx("h2",{className:"section-title",children:"Recent Transactions"}),m.jsx(C9,{transactions:g})]})]})]})},M9=()=>m.jsxs("div",{className:"ai-business-help",children:[m.jsx("h1",{className:"page-title",children:"AI Business Help"}),m.jsxs("div",{className:"coming-soon",children:[m.jsx("h2",{children:"Coming Soon!"}),m.jsx("p",{children:"We're developing AI-powered business insights to help you grow your retail business."}),m.jsx("p",{children:"This feature will provide personalized recommendations based on your inventory and sales data."})]})]}),O9=({user:t})=>{const{updateUserProfile:e}=Pn(),[n,i]=L.useState(!1),[r,s]=L.useState(""),[o,a]=L.useState(""),[l,c]=L.useState({displayName:"",email:"",phoneNumber:""}),[h,d]=L.useState(null),[f,g]=L.useState(null);L.useEffect(()=>{if(!t)return;c({displayName:t.displayName||"",email:t.email||"",phoneNumber:""}),t.photoURL&&g(t.photoURL),(async()=>{try{const w=await Cy(En(Mt,"users",t.uid));if(w.exists()){const b=w.data();c(A=>({...A,phoneNumber:b.phoneNumber||""}))}}catch(w){console.error("Error fetching user data:",w)}})()},[t]);const y=v=>{const{name:w,value:b}=v.target;c(A=>({...A,[w]:b}))},x=v=>{const w=v.target.files[0];if(!w)return;d(w);const b=new FileReader;b.onloadend=()=>{g(b.result)},b.readAsDataURL(w)},T=async v=>{v.preventDefault(),i(!0),a(""),s("");try{let w=t.photoURL;if(h){const b=gl(ml,`users/${t.uid}/profile-image`);await Eg(b,h),w=await Tg(b)}await bb(t,{displayName:l.displayName,photoURL:w}),await tI(En(Mt,"users",t.uid),{displayName:l.displayName,phoneNumber:l.phoneNumber,photoURL:w,updatedAt:new Date},{merge:!0}),s("Profile updated successfully!")}catch(w){console.error("Error updating profile:",w),a("Failed to update profile. Please try again.")}i(!1)};return m.jsxs("div",{className:"profile-settings",children:[m.jsx("h2",{className:"section-title",children:"Profile Settings"}),o&&m.jsx("div",{className:"error-message",children:o}),r&&m.jsx("div",{className:"success-message",children:r}),m.jsxs("form",{onSubmit:T,className:"settings-form",children:[m.jsx("div",{className:"profile-image-upload",children:m.jsxs("div",{className:"profile-image-container",children:[f?m.jsx("img",{src:f||"/placeholder.svg",alt:"Profile",className:"profile-image"}):m.jsx("div",{className:"profile-placeholder",children:m.jsx($y,{})}),m.jsx("label",{htmlFor:"profile-image",className:"image-upload-label",children:m.jsx(EI,{})}),m.jsx("input",{type:"file",id:"profile-image",accept:"image/*",onChange:x,className:"image-upload-input"})]})}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"displayName",children:"Full Name"}),m.jsx("input",{type:"text",id:"displayName",name:"displayName",value:l.displayName,onChange:y,required:!0})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"email",children:"Email"}),m.jsx("input",{type:"email",id:"email",name:"email",value:l.email,disabled:!0,className:"disabled-input"}),m.jsx("small",{className:"input-note",children:"Email cannot be changed"})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"phoneNumber",children:"Phone Number"}),m.jsx("input",{type:"tel",id:"phoneNumber",name:"phoneNumber",value:l.phoneNumber,onChange:y,placeholder:"Enter your phone number"})]}),m.jsx("button",{type:"submit",className:"primary-btn save-btn",disabled:n,children:n?"Saving...":"Save Changes"})]})]})},L9=({user:t})=>{const[e,n]=L.useState(!1),[i,r]=L.useState(""),[s,o]=L.useState(""),[a,l]=L.useState({storeName:"",address:"",contactNumber:"",gstin:"",storeType:""}),c=["Kirana Store","Medical Store","Bookstore","Electronics","Clothing","Hardware","Stationery","Other"];L.useEffect(()=>{if(!t)return;(async()=>{try{const g=await Cy(En(Mt,"stores",t.uid));g.exists()&&l(g.data())}catch(g){console.error("Error fetching store data:",g)}})()},[t]);const h=f=>{const{name:g,value:y}=f.target;l(x=>({...x,[g]:y}))},d=async f=>{f.preventDefault(),n(!0),o(""),r("");try{await tI(En(Mt,"stores",t.uid),{...a,updatedAt:new Date},{merge:!0}),r("Store details updated successfully!")}catch(g){console.error("Error updating store details:",g),o("Failed to update store details. Please try again.")}n(!1)};return m.jsxs("div",{className:"store-details",children:[m.jsx("h2",{className:"section-title",children:"Store Details"}),s&&m.jsx("div",{className:"error-message",children:s}),i&&m.jsx("div",{className:"success-message",children:i}),m.jsxs("form",{onSubmit:d,className:"settings-form",children:[m.jsx("div",{className:"store-icon",children:m.jsx(II,{})}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"storeName",children:"Store Name"}),m.jsx("input",{type:"text",id:"storeName",name:"storeName",value:a.storeName,onChange:h,required:!0,placeholder:"Enter your store name"})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"address",children:"Address"}),m.jsx("textarea",{id:"address",name:"address",value:a.address,onChange:h,rows:"3",placeholder:"Enter your store address"})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"contactNumber",children:"Contact Number"}),m.jsx("input",{type:"tel",id:"contactNumber",name:"contactNumber",value:a.contactNumber,onChange:h,placeholder:"Enter store contact number"})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"gstin",children:"GSTIN (Optional)"}),m.jsx("input",{type:"text",id:"gstin",name:"gstin",value:a.gstin,onChange:h,placeholder:"Enter your GSTIN"})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"storeType",children:"Store Type"}),m.jsxs("select",{id:"storeType",name:"storeType",value:a.storeType,onChange:h,required:!0,children:[m.jsx("option",{value:"",children:"Select Store Type"}),c.map(f=>m.jsx("option",{value:f,children:f},f))]})]}),m.jsx("button",{type:"submit",className:"primary-btn save-btn",disabled:e,children:e?"Saving...":"Save Store Details"})]})]})},V9=({user:t})=>{const{logout:e}=Pn(),n=Pi(),[i,r]=L.useState(!1),[s,o]=L.useState(""),[a,l]=L.useState(!1),[c,h]=L.useState({createdAt:null,plan:"Free Plan"});L.useEffect(()=>{if(!t)return;(async()=>{try{const x=await Cy(En(Mt,"users",t.uid));if(x.exists()){const T=x.data();h({createdAt:t.metadata.creationTime,plan:T.plan||"Free Plan"})}else h({createdAt:t.metadata.creationTime,plan:"Free Plan"})}catch(x){console.error("Error fetching user metadata:",x)}})()},[t]);const d=async()=>{try{await e(),n("/")}catch(y){console.error("Error logging out:",y),o("Failed to log out. Please try again.")}},f=async()=>{r(!0),o("");try{const y=pl(Mt,"inventory"),x=pd(y,md("userId","==",t.uid)),T=await eI(x),v=[];T.forEach(A=>{v.push(vu(A.ref))}),await Promise.all(v),await vu(En(Mt,"stores",t.uid)),await vu(En(Mt,"users",t.uid));const w=gl(ml,`users/${t.uid}`),b=gl(ml,`inventory/${t.uid}`);try{const D=(await Ww(w)).items.map(E=>qw(E));await Promise.all(D);const S=(await Ww(b)).items.map(E=>qw(E));await Promise.all(S)}catch(A){console.error("Error deleting storage files:",A)}await _D(t),n("/")}catch(y){console.error("Error deleting account:",y),o("Failed to delete account. Please try again."),r(!1)}},g=y=>y?new Date(y).toLocaleDateString("en-IN",{day:"2-digit",month:"long",year:"numeric"}):"Unknown";return m.jsxs("div",{className:"account-settings",children:[m.jsx("h2",{className:"section-title",children:"Account Settings"}),s&&m.jsx("div",{className:"error-message",children:s}),m.jsxs("div",{className:"account-info",children:[m.jsxs("div",{className:"info-item",children:[m.jsx("span",{className:"info-label",children:"Email"}),m.jsx("span",{className:"info-value",children:t==null?void 0:t.email})]}),m.jsxs("div",{className:"info-item",children:[m.jsx("span",{className:"info-label",children:"Account Created"}),m.jsx("span",{className:"info-value",children:g(c.createdAt)})]}),m.jsxs("div",{className:"info-item",children:[m.jsx("span",{className:"info-label",children:"Current Plan"}),m.jsx("span",{className:"info-value plan-badge",children:c.plan})]})]}),m.jsxs("div",{className:"account-actions",children:[m.jsxs("button",{className:"secondary-btn logout-btn",onClick:d,children:[m.jsx(SI,{className:"btn-icon"}),m.jsx("span",{children:"Log Out"})]}),a?m.jsxs("div",{className:"delete-confirmation",children:[m.jsxs("div",{className:"confirmation-message",children:[m.jsx(rV,{className:"warning-icon"}),m.jsx("p",{children:"Are you sure you want to delete your account? This action cannot be undone and will permanently delete all your data."})]}),m.jsxs("div",{className:"confirmation-actions",children:[m.jsx("button",{className:"outline-btn cancel-btn",onClick:()=>l(!1),children:"Cancel"}),m.jsx("button",{className:"danger-btn confirm-delete-btn",onClick:f,disabled:i,children:i?"Deleting...":"Yes, Delete My Account"})]})]}):m.jsxs("button",{className:"danger-btn delete-btn",onClick:()=>l(!0),children:[m.jsx(kI,{className:"btn-icon"}),m.jsx("span",{children:"Delete Account"})]})]})]})},F9=({user:t})=>{const[e,n]=L.useState(!1),[i,r]=L.useState(""),[s,o]=L.useState(""),[a,l]=L.useState(!1),[c,h]=L.useState(!1),[d,f]=L.useState(!1),[g,y]=L.useState({currentPassword:"",newPassword:"",confirmPassword:""}),x=w=>{const{name:b,value:A}=w.target;y(D=>({...D,[b]:A}))},T=w=>{switch(w){case"current":l(!a);break;case"new":h(!c);break;case"confirm":f(!d);break}},v=async w=>{if(w.preventDefault(),n(!0),o(""),r(""),g.newPassword!==g.confirmPassword){o("New passwords do not match"),n(!1);return}if(g.newPassword.length<6){o("New password must be at least 6 characters long"),n(!1);return}try{const b=ps.credential(t.email,g.currentPassword);await lD(t,b),await dD(t,g.newPassword),y({currentPassword:"",newPassword:"",confirmPassword:""}),r("Password updated successfully!")}catch(b){console.error("Error updating password:",b),b.code==="auth/wrong-password"?o("Current password is incorrect"):o("Failed to update password. Please try again.")}n(!1)};return m.jsxs("div",{className:"password-settings",children:[m.jsx("h2",{className:"section-title",children:"Change Password"}),s&&m.jsx("div",{className:"error-message",children:s}),i&&m.jsx("div",{className:"success-message",children:i}),m.jsxs("form",{onSubmit:v,className:"settings-form",children:[m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"currentPassword",children:"Current Password"}),m.jsxs("div",{className:"password-input-container",children:[m.jsx("input",{type:a?"text":"password",id:"currentPassword",name:"currentPassword",value:g.currentPassword,onChange:x,required:!0}),m.jsx("button",{type:"button",className:"toggle-password-btn",onClick:()=>T("current"),tabIndex:"-1",children:a?m.jsx(Vf,{}):m.jsx(Ff,{})})]})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"newPassword",children:"New Password"}),m.jsxs("div",{className:"password-input-container",children:[m.jsx("input",{type:c?"text":"password",id:"newPassword",name:"newPassword",value:g.newPassword,onChange:x,required:!0,minLength:"6"}),m.jsx("button",{type:"button",className:"toggle-password-btn",onClick:()=>T("new"),tabIndex:"-1",children:c?m.jsx(Vf,{}):m.jsx(Ff,{})})]})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"confirmPassword",children:"Confirm New Password"}),m.jsxs("div",{className:"password-input-container",children:[m.jsx("input",{type:d?"text":"password",id:"confirmPassword",name:"confirmPassword",value:g.confirmPassword,onChange:x,required:!0,minLength:"6"}),m.jsx("button",{type:"button",className:"toggle-password-btn",onClick:()=>T("confirm"),tabIndex:"-1",children:d?m.jsx(Vf,{}):m.jsx(Ff,{})})]})]}),m.jsx("button",{type:"submit",className:"primary-btn save-btn",disabled:e,children:e?"Updating...":"Update Password"})]})]})},mx=()=>{const{section:t}=sC(),e=Pi(),[n,i]=L.useState("profile"),{currentUser:r}=Pn();L.useEffect(()=>{t?i(t):e("/settings/profile",{replace:!0})},[t,e]);const s=o=>{i(o),e(`/settings/${o}`)};return m.jsxs("div",{className:"settings-page",children:[m.jsx("h1",{className:"page-title",children:"Settings"}),m.jsxs("div",{className:"settings-container",children:[m.jsxs("div",{className:"settings-tabs",children:[m.jsxs("button",{className:`tab-button ${n==="profile"?"active":""}`,onClick:()=>s("profile"),children:[m.jsx($y,{className:"tab-icon"}),m.jsx("span",{children:"Profile"})]}),m.jsxs("button",{className:`tab-button ${n==="store"?"active":""}`,onClick:()=>s("store"),children:[m.jsx(II,{className:"tab-icon"}),m.jsx("span",{children:"Store Details"})]}),m.jsxs("button",{className:`tab-button ${n==="account"?"active":""}`,onClick:()=>s("account"),children:[m.jsx(By,{className:"tab-icon"}),m.jsx("span",{children:"Account"})]}),m.jsxs("button",{className:`tab-button ${n==="password"?"active":""}`,onClick:()=>s("password"),children:[m.jsx(_h,{className:"tab-icon"}),m.jsx("span",{children:"Password"})]})]}),m.jsxs("div",{className:"settings-content",children:[n==="profile"&&m.jsx(O9,{user:r}),n==="store"&&m.jsx(L9,{user:r}),n==="account"&&m.jsx(V9,{user:r}),n==="password"&&m.jsx(F9,{user:r})]})]})]})},j9=({toggleSidebar:t})=>{const{currentUser:e}=Pn(),n=Pi(),i=()=>e!=null&&e.displayName?e.displayName.split(" ").map(s=>s[0]).join("").toUpperCase():"U",r=()=>{n("/settings/profile")};return m.jsx("nav",{className:"navbar",children:m.jsxs("div",{className:"navbar-container",children:[m.jsxs("div",{className:"navbar-left",children:[m.jsx("button",{className:"menu-button",onClick:t,children:m.jsx(tV,{})}),m.jsxs("div",{className:"navbar-logo",children:[m.jsx(Hs,{className:"logo-icon"}),m.jsx("span",{className:"logo-text",children:"Retail Ease"})]})]}),m.jsx("div",{className:"navbar-right",children:m.jsx("div",{className:"user-profile",onClick:r,children:e!=null&&e.photoURL?m.jsx("img",{src:e.photoURL||"/placeholder.svg",alt:"User Profile",className:"profile-image"}):m.jsx("div",{className:"profile-initials",children:i()})})})]})})},U9=({isOpen:t,toggleSidebar:e,onLogout:n})=>m.jsxs("div",{className:`sidebar ${t?"open":""}`,children:[m.jsx("div",{className:"sidebar-header",children:m.jsx("button",{className:"close-button",onClick:e,children:m.jsx(uV,{})})}),m.jsx("div",{className:"sidebar-content",children:m.jsxs("ul",{className:"sidebar-menu",children:[m.jsx("li",{className:"sidebar-item",children:m.jsxs(Pc,{to:"/inventory",className:({isActive:i})=>i?"sidebar-link active":"sidebar-link",onClick:()=>e(),children:[m.jsx(Uy,{className:"sidebar-icon"}),m.jsx("span",{children:"Inventory"})]})}),m.jsx("li",{className:"sidebar-item",children:m.jsxs(Pc,{to:"/profit-analysis",className:({isActive:i})=>i?"sidebar-link active":"sidebar-link",onClick:()=>e(),children:[m.jsx(zy,{className:"sidebar-icon"}),m.jsx("span",{children:"Profit Analysis"})]})}),m.jsx("li",{className:"sidebar-item",children:m.jsxs(Pc,{to:"/ai-business-help",className:({isActive:i})=>i?"sidebar-link active":"sidebar-link",onClick:()=>e(),children:[m.jsx(bI,{className:"sidebar-icon"}),m.jsx("span",{children:"AI Business Help"})]})}),m.jsx("li",{className:"sidebar-item",children:m.jsxs(Pc,{to:"/settings",className:({isActive:i})=>i?"sidebar-link active":"sidebar-link",onClick:()=>e(),children:[m.jsx(TI,{className:"sidebar-icon"}),m.jsx("span",{children:"Settings"})]})})]})}),m.jsx("div",{className:"sidebar-footer",children:m.jsxs("button",{className:"logout-button",onClick:n,children:[m.jsx(SI,{className:"sidebar-icon"}),m.jsx("span",{children:"Logout"})]})})]}),Is=({children:t})=>{const[e,n]=L.useState(!1),{logout:i}=Pn(),r=Pi(),s=()=>{n(!e)},o=async()=>{try{await i(),r("/")}catch(a){console.error("Failed to log out",a)}};return m.jsxs("div",{className:"main-layout",children:[m.jsx(j9,{toggleSidebar:s}),m.jsxs("div",{className:"layout-container",children:[m.jsx(U9,{isOpen:e,toggleSidebar:s,onLogout:o}),m.jsx("main",{className:`main-content ${e?"sidebar-open":""}`,children:t})]})]})},ks=({children:t})=>{const{currentUser:e,loading:n}=Pn();return n?m.jsx("div",{className:"loading",children:"Loading..."}):e?t:m.jsx(wC,{to:"/login"})};function z9(){const[t,e]=L.useState(!0);return L.useEffect(()=>{const n=setTimeout(()=>{e(!1)},3e3);return()=>clearTimeout(n)},[]),t?m.jsx(fV,{}):m.jsxs(EC,{children:[m.jsx(Cn,{path:"/",element:m.jsx(pV,{})}),m.jsx(Cn,{path:"/login",element:m.jsx(gV,{})}),m.jsx(Cn,{path:"/register",element:m.jsx(mV,{})}),m.jsx(Cn,{path:"/dashboard",element:m.jsx(ks,{children:m.jsx(Is,{children:m.jsx(yV,{})})})}),m.jsx(Cn,{path:"/inventory",element:m.jsx(ks,{children:m.jsx(Is,{children:m.jsx(wV,{})})})}),m.jsx(Cn,{path:"/profit-analysis",element:m.jsx(ks,{children:m.jsx(Is,{children:m.jsx(D9,{})})})}),m.jsx(Cn,{path:"/ai-business-help",element:m.jsx(ks,{children:m.jsx(Is,{children:m.jsx(M9,{})})})}),m.jsx(Cn,{path:"/settings",element:m.jsx(ks,{children:m.jsx(Is,{children:m.jsx(mx,{})})})}),m.jsx(Cn,{path:"/settings/:section",element:m.jsx(ks,{children:m.jsx(Is,{children:m.jsx(mx,{})})})})]})}Jf.createRoot(document.getElementById("root")).render(m.jsx(di.StrictMode,{children:m.jsx(CC,{children:m.jsx(X3,{children:m.jsx(z9,{})})})}));
