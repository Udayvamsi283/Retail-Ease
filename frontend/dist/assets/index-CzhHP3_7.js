var LS=Object.defineProperty;var jS=(t,e,n)=>e in t?LS(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Z=(t,e,n)=>jS(t,typeof e!="symbol"?e+"":e,n);function VS(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var de=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function rw(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function zS(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var iw={exports:{}},gd={},sw={exports:{}},pe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hc=Symbol.for("react.element"),US=Symbol.for("react.portal"),HS=Symbol.for("react.fragment"),WS=Symbol.for("react.strict_mode"),$S=Symbol.for("react.profiler"),qS=Symbol.for("react.provider"),KS=Symbol.for("react.context"),GS=Symbol.for("react.forward_ref"),QS=Symbol.for("react.suspense"),YS=Symbol.for("react.memo"),XS=Symbol.for("react.lazy"),hy=Symbol.iterator;function JS(t){return t===null||typeof t!="object"?null:(t=hy&&t[hy]||t["@@iterator"],typeof t=="function"?t:null)}var ow={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},aw=Object.assign,lw={};function sa(t,e,n){this.props=t,this.context=e,this.refs=lw,this.updater=n||ow}sa.prototype.isReactComponent={};sa.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};sa.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function cw(){}cw.prototype=sa.prototype;function tm(t,e,n){this.props=t,this.context=e,this.refs=lw,this.updater=n||ow}var nm=tm.prototype=new cw;nm.constructor=tm;aw(nm,sa.prototype);nm.isPureReactComponent=!0;var dy=Array.isArray,uw=Object.prototype.hasOwnProperty,rm={current:null},hw={key:!0,ref:!0,__self:!0,__source:!0};function dw(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)uw.call(e,r)&&!hw.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:hc,type:t,key:s,ref:o,props:i,_owner:rm.current}}function ZS(t,e){return{$$typeof:hc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function im(t){return typeof t=="object"&&t!==null&&t.$$typeof===hc}function e6(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var fy=/\/+/g;function Rf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?e6(""+t.key):e.toString(36)}function Bu(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case hc:case US:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Rf(o,0):r,dy(i)?(n="",t!=null&&(n=t.replace(fy,"$&/")+"/"),Bu(i,e,n,"",function(c){return c})):i!=null&&(im(i)&&(i=ZS(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(fy,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",dy(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+Rf(s,a);o+=Bu(s,e,n,l,i)}else if(l=JS(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+Rf(s,a++),o+=Bu(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Xc(t,e,n){if(t==null)return t;var r=[],i=0;return Bu(t,r,"","",function(s){return e.call(n,s,i++)}),r}function t6(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Gt={current:null},Lu={transition:null},n6={ReactCurrentDispatcher:Gt,ReactCurrentBatchConfig:Lu,ReactCurrentOwner:rm};function fw(){throw Error("act(...) is not supported in production builds of React.")}pe.Children={map:Xc,forEach:function(t,e,n){Xc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Xc(t,function(){e++}),e},toArray:function(t){return Xc(t,function(e){return e})||[]},only:function(t){if(!im(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};pe.Component=sa;pe.Fragment=HS;pe.Profiler=$S;pe.PureComponent=tm;pe.StrictMode=WS;pe.Suspense=QS;pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=n6;pe.act=fw;pe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=aw({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=rm.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)uw.call(e,l)&&!hw.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:hc,type:t.type,key:i,ref:s,props:r,_owner:o}};pe.createContext=function(t){return t={$$typeof:KS,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:qS,_context:t},t.Consumer=t};pe.createElement=dw;pe.createFactory=function(t){var e=dw.bind(null,t);return e.type=t,e};pe.createRef=function(){return{current:null}};pe.forwardRef=function(t){return{$$typeof:GS,render:t}};pe.isValidElement=im;pe.lazy=function(t){return{$$typeof:XS,_payload:{_status:-1,_result:t},_init:t6}};pe.memo=function(t,e){return{$$typeof:YS,type:t,compare:e===void 0?null:e}};pe.startTransition=function(t){var e=Lu.transition;Lu.transition={};try{t()}finally{Lu.transition=e}};pe.unstable_act=fw;pe.useCallback=function(t,e){return Gt.current.useCallback(t,e)};pe.useContext=function(t){return Gt.current.useContext(t)};pe.useDebugValue=function(){};pe.useDeferredValue=function(t){return Gt.current.useDeferredValue(t)};pe.useEffect=function(t,e){return Gt.current.useEffect(t,e)};pe.useId=function(){return Gt.current.useId()};pe.useImperativeHandle=function(t,e,n){return Gt.current.useImperativeHandle(t,e,n)};pe.useInsertionEffect=function(t,e){return Gt.current.useInsertionEffect(t,e)};pe.useLayoutEffect=function(t,e){return Gt.current.useLayoutEffect(t,e)};pe.useMemo=function(t,e){return Gt.current.useMemo(t,e)};pe.useReducer=function(t,e,n){return Gt.current.useReducer(t,e,n)};pe.useRef=function(t){return Gt.current.useRef(t)};pe.useState=function(t){return Gt.current.useState(t)};pe.useSyncExternalStore=function(t,e,n){return Gt.current.useSyncExternalStore(t,e,n)};pe.useTransition=function(){return Gt.current.useTransition()};pe.version="18.3.1";sw.exports=pe;var M=sw.exports;const Rr=rw(M),r6=VS({__proto__:null,default:Rr},[M]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i6=M,s6=Symbol.for("react.element"),o6=Symbol.for("react.fragment"),a6=Object.prototype.hasOwnProperty,l6=i6.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c6={key:!0,ref:!0,__self:!0,__source:!0};function pw(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)a6.call(e,r)&&!c6.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:s6,type:t,key:s,ref:o,props:i,_owner:l6.current}}gd.Fragment=o6;gd.jsx=pw;gd.jsxs=pw;iw.exports=gd;var g=iw.exports,dp={},gw={exports:{}},vn={},mw={exports:{}},xw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(j,W){var Q=j.length;j.push(W);e:for(;0<Q;){var B=Q-1>>>1,V=j[B];if(0<i(V,W))j[B]=W,j[Q]=V,Q=B;else break e}}function n(j){return j.length===0?null:j[0]}function r(j){if(j.length===0)return null;var W=j[0],Q=j.pop();if(Q!==W){j[0]=Q;e:for(var B=0,V=j.length,U=V>>>1;B<U;){var H=2*(B+1)-1,re=j[H],ie=H+1,Ie=j[ie];if(0>i(re,Q))ie<V&&0>i(Ie,re)?(j[B]=Ie,j[ie]=Q,B=ie):(j[B]=re,j[H]=Q,B=H);else if(ie<V&&0>i(Ie,Q))j[B]=Ie,j[ie]=Q,B=ie;else break e}}return W}function i(j,W){var Q=j.sortIndex-W.sortIndex;return Q!==0?Q:j.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,f=3,p=!1,m=!1,v=!1,E=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(j){for(var W=n(c);W!==null;){if(W.callback===null)r(c);else if(W.startTime<=j)r(c),W.sortIndex=W.expirationTime,e(l,W);else break;W=n(c)}}function A(j){if(v=!1,w(j),!m)if(n(l)!==null)m=!0,L(P);else{var W=n(c);W!==null&&X(A,W.startTime-j)}}function P(j,W){m=!1,v&&(v=!1,_(b),b=-1),p=!0;var Q=f;try{for(w(W),d=n(l);d!==null&&(!(d.expirationTime>W)||j&&!I());){var B=d.callback;if(typeof B=="function"){d.callback=null,f=d.priorityLevel;var V=B(d.expirationTime<=W);W=t.unstable_now(),typeof V=="function"?d.callback=V:d===n(l)&&r(l),w(W)}else r(l);d=n(l)}if(d!==null)var U=!0;else{var H=n(c);H!==null&&X(A,H.startTime-W),U=!1}return U}finally{d=null,f=Q,p=!1}}var R=!1,C=null,b=-1,k=5,S=-1;function I(){return!(t.unstable_now()-S<k)}function N(){if(C!==null){var j=t.unstable_now();S=j;var W=!0;try{W=C(!0,j)}finally{W?D():(R=!1,C=null)}}else R=!1}var D;if(typeof x=="function")D=function(){x(N)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,q=G.port2;G.port1.onmessage=N,D=function(){q.postMessage(null)}}else D=function(){E(N,0)};function L(j){C=j,R||(R=!0,D())}function X(j,W){b=E(function(){j(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(j){j.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,L(P))},t.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<j?Math.floor(1e3/j):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(j){switch(f){case 1:case 2:case 3:var W=3;break;default:W=f}var Q=f;f=W;try{return j()}finally{f=Q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(j,W){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var Q=f;f=j;try{return W()}finally{f=Q}},t.unstable_scheduleCallback=function(j,W,Q){var B=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?B+Q:B):Q=B,j){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=Q+V,j={id:u++,callback:W,priorityLevel:j,startTime:Q,expirationTime:V,sortIndex:-1},Q>B?(j.sortIndex=Q,e(c,j),n(l)===null&&j===n(c)&&(v?(_(b),b=-1):v=!0,X(A,Q-B))):(j.sortIndex=V,e(l,j),m||p||(m=!0,L(P))),j},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(j){var W=f;return function(){var Q=f;f=W;try{return j.apply(this,arguments)}finally{f=Q}}}})(xw);mw.exports=xw;var u6=mw.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h6=M,xn=u6;function Y(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var vw=new Set,Il={};function Hs(t,e){zo(t,e),zo(t+"Capture",e)}function zo(t,e){for(Il[t]=e,t=0;t<e.length;t++)vw.add(e[t])}var Or=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),fp=Object.prototype.hasOwnProperty,d6=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,py={},gy={};function f6(t){return fp.call(gy,t)?!0:fp.call(py,t)?!1:d6.test(t)?gy[t]=!0:(py[t]=!0,!1)}function p6(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function g6(t,e,n,r){if(e===null||typeof e>"u"||p6(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Qt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var St={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){St[t]=new Qt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];St[e]=new Qt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){St[t]=new Qt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){St[t]=new Qt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){St[t]=new Qt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){St[t]=new Qt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){St[t]=new Qt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){St[t]=new Qt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){St[t]=new Qt(t,5,!1,t.toLowerCase(),null,!1,!1)});var sm=/[\-:]([a-z])/g;function om(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(sm,om);St[e]=new Qt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(sm,om);St[e]=new Qt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(sm,om);St[e]=new Qt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){St[t]=new Qt(t,1,!1,t.toLowerCase(),null,!1,!1)});St.xlinkHref=new Qt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){St[t]=new Qt(t,1,!1,t.toLowerCase(),null,!0,!0)});function am(t,e,n,r){var i=St.hasOwnProperty(e)?St[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(g6(e,n,i,r)&&(n=null),r||i===null?f6(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var $r=h6.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Jc=Symbol.for("react.element"),xo=Symbol.for("react.portal"),vo=Symbol.for("react.fragment"),lm=Symbol.for("react.strict_mode"),pp=Symbol.for("react.profiler"),yw=Symbol.for("react.provider"),_w=Symbol.for("react.context"),cm=Symbol.for("react.forward_ref"),gp=Symbol.for("react.suspense"),mp=Symbol.for("react.suspense_list"),um=Symbol.for("react.memo"),oi=Symbol.for("react.lazy"),Ew=Symbol.for("react.offscreen"),my=Symbol.iterator;function Ra(t){return t===null||typeof t!="object"?null:(t=my&&t[my]||t["@@iterator"],typeof t=="function"?t:null)}var qe=Object.assign,Df;function qa(t){if(Df===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Df=e&&e[1]||""}return`
`+Df+t}var Nf=!1;function Ff(t,e){if(!t||Nf)return"";Nf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Nf=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?qa(t):""}function m6(t){switch(t.tag){case 5:return qa(t.type);case 16:return qa("Lazy");case 13:return qa("Suspense");case 19:return qa("SuspenseList");case 0:case 2:case 15:return t=Ff(t.type,!1),t;case 11:return t=Ff(t.type.render,!1),t;case 1:return t=Ff(t.type,!0),t;default:return""}}function xp(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case vo:return"Fragment";case xo:return"Portal";case pp:return"Profiler";case lm:return"StrictMode";case gp:return"Suspense";case mp:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case _w:return(t.displayName||"Context")+".Consumer";case yw:return(t._context.displayName||"Context")+".Provider";case cm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case um:return e=t.displayName||null,e!==null?e:xp(t.type)||"Memo";case oi:e=t._payload,t=t._init;try{return xp(t(e))}catch{}}return null}function x6(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return xp(e);case 8:return e===lm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Bi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ww(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function v6(t){var e=ww(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Zc(t){t._valueTracker||(t._valueTracker=v6(t))}function bw(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=ww(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function mh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function vp(t,e){var n=e.checked;return qe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function xy(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Bi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Cw(t,e){e=e.checked,e!=null&&am(t,"checked",e,!1)}function yp(t,e){Cw(t,e);var n=Bi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?_p(t,e.type,n):e.hasOwnProperty("defaultValue")&&_p(t,e.type,Bi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function vy(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function _p(t,e,n){(e!=="number"||mh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ka=Array.isArray;function Po(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Bi(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Ep(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Y(91));return qe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function yy(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Y(92));if(Ka(n)){if(1<n.length)throw Error(Y(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Bi(n)}}function Aw(t,e){var n=Bi(e.value),r=Bi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function _y(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Tw(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function wp(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Tw(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var eu,Sw=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(eu=eu||document.createElement("div"),eu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=eu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function kl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ll={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},y6=["Webkit","ms","Moz","O"];Object.keys(ll).forEach(function(t){y6.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ll[e]=ll[t]})});function Iw(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ll.hasOwnProperty(t)&&ll[t]?(""+e).trim():e+"px"}function kw(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Iw(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var _6=qe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function bp(t,e){if(e){if(_6[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Y(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Y(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Y(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Y(62))}}function Cp(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ap=null;function hm(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Tp=null,Ro=null,Do=null;function Ey(t){if(t=pc(t)){if(typeof Tp!="function")throw Error(Y(280));var e=t.stateNode;e&&(e=_d(e),Tp(t.stateNode,t.type,e))}}function Pw(t){Ro?Do?Do.push(t):Do=[t]:Ro=t}function Rw(){if(Ro){var t=Ro,e=Do;if(Do=Ro=null,Ey(t),e)for(t=0;t<e.length;t++)Ey(e[t])}}function Dw(t,e){return t(e)}function Nw(){}var Mf=!1;function Fw(t,e,n){if(Mf)return t(e,n);Mf=!0;try{return Dw(t,e,n)}finally{Mf=!1,(Ro!==null||Do!==null)&&(Nw(),Rw())}}function Pl(t,e){var n=t.stateNode;if(n===null)return null;var r=_d(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Y(231,e,typeof n));return n}var Sp=!1;if(Or)try{var Da={};Object.defineProperty(Da,"passive",{get:function(){Sp=!0}}),window.addEventListener("test",Da,Da),window.removeEventListener("test",Da,Da)}catch{Sp=!1}function E6(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var cl=!1,xh=null,vh=!1,Ip=null,w6={onError:function(t){cl=!0,xh=t}};function b6(t,e,n,r,i,s,o,a,l){cl=!1,xh=null,E6.apply(w6,arguments)}function C6(t,e,n,r,i,s,o,a,l){if(b6.apply(this,arguments),cl){if(cl){var c=xh;cl=!1,xh=null}else throw Error(Y(198));vh||(vh=!0,Ip=c)}}function Ws(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Mw(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function wy(t){if(Ws(t)!==t)throw Error(Y(188))}function A6(t){var e=t.alternate;if(!e){if(e=Ws(t),e===null)throw Error(Y(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return wy(i),t;if(s===r)return wy(i),e;s=s.sibling}throw Error(Y(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(Y(189))}}if(n.alternate!==r)throw Error(Y(190))}if(n.tag!==3)throw Error(Y(188));return n.stateNode.current===n?t:e}function Ow(t){return t=A6(t),t!==null?Bw(t):null}function Bw(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Bw(t);if(e!==null)return e;t=t.sibling}return null}var Lw=xn.unstable_scheduleCallback,by=xn.unstable_cancelCallback,T6=xn.unstable_shouldYield,S6=xn.unstable_requestPaint,rt=xn.unstable_now,I6=xn.unstable_getCurrentPriorityLevel,dm=xn.unstable_ImmediatePriority,jw=xn.unstable_UserBlockingPriority,yh=xn.unstable_NormalPriority,k6=xn.unstable_LowPriority,Vw=xn.unstable_IdlePriority,md=null,Zn=null;function P6(t){if(Zn&&typeof Zn.onCommitFiberRoot=="function")try{Zn.onCommitFiberRoot(md,t,void 0,(t.current.flags&128)===128)}catch{}}var jn=Math.clz32?Math.clz32:N6,R6=Math.log,D6=Math.LN2;function N6(t){return t>>>=0,t===0?32:31-(R6(t)/D6|0)|0}var tu=64,nu=4194304;function Ga(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function _h(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Ga(a):(s&=o,s!==0&&(r=Ga(s)))}else o=n&~i,o!==0?r=Ga(o):s!==0&&(r=Ga(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-jn(e),i=1<<n,r|=t[n],e&=~i;return r}function F6(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function M6(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-jn(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=F6(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function kp(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function zw(){var t=tu;return tu<<=1,!(tu&4194240)&&(tu=64),t}function Of(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function dc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-jn(e),t[e]=n}function O6(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-jn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function fm(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-jn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Ae=0;function Uw(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Hw,pm,Ww,$w,qw,Pp=!1,ru=[],bi=null,Ci=null,Ai=null,Rl=new Map,Dl=new Map,li=[],B6="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Cy(t,e){switch(t){case"focusin":case"focusout":bi=null;break;case"dragenter":case"dragleave":Ci=null;break;case"mouseover":case"mouseout":Ai=null;break;case"pointerover":case"pointerout":Rl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dl.delete(e.pointerId)}}function Na(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=pc(e),e!==null&&pm(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function L6(t,e,n,r,i){switch(e){case"focusin":return bi=Na(bi,t,e,n,r,i),!0;case"dragenter":return Ci=Na(Ci,t,e,n,r,i),!0;case"mouseover":return Ai=Na(Ai,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Rl.set(s,Na(Rl.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Dl.set(s,Na(Dl.get(s)||null,t,e,n,r,i)),!0}return!1}function Kw(t){var e=ms(t.target);if(e!==null){var n=Ws(e);if(n!==null){if(e=n.tag,e===13){if(e=Mw(n),e!==null){t.blockedOn=e,qw(t.priority,function(){Ww(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ju(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Rp(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Ap=r,n.target.dispatchEvent(r),Ap=null}else return e=pc(n),e!==null&&pm(e),t.blockedOn=n,!1;e.shift()}return!0}function Ay(t,e,n){ju(t)&&n.delete(e)}function j6(){Pp=!1,bi!==null&&ju(bi)&&(bi=null),Ci!==null&&ju(Ci)&&(Ci=null),Ai!==null&&ju(Ai)&&(Ai=null),Rl.forEach(Ay),Dl.forEach(Ay)}function Fa(t,e){t.blockedOn===e&&(t.blockedOn=null,Pp||(Pp=!0,xn.unstable_scheduleCallback(xn.unstable_NormalPriority,j6)))}function Nl(t){function e(i){return Fa(i,t)}if(0<ru.length){Fa(ru[0],t);for(var n=1;n<ru.length;n++){var r=ru[n];r.blockedOn===t&&(r.blockedOn=null)}}for(bi!==null&&Fa(bi,t),Ci!==null&&Fa(Ci,t),Ai!==null&&Fa(Ai,t),Rl.forEach(e),Dl.forEach(e),n=0;n<li.length;n++)r=li[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<li.length&&(n=li[0],n.blockedOn===null);)Kw(n),n.blockedOn===null&&li.shift()}var No=$r.ReactCurrentBatchConfig,Eh=!0;function V6(t,e,n,r){var i=Ae,s=No.transition;No.transition=null;try{Ae=1,gm(t,e,n,r)}finally{Ae=i,No.transition=s}}function z6(t,e,n,r){var i=Ae,s=No.transition;No.transition=null;try{Ae=4,gm(t,e,n,r)}finally{Ae=i,No.transition=s}}function gm(t,e,n,r){if(Eh){var i=Rp(t,e,n,r);if(i===null)qf(t,e,r,wh,n),Cy(t,r);else if(L6(i,t,e,n,r))r.stopPropagation();else if(Cy(t,r),e&4&&-1<B6.indexOf(t)){for(;i!==null;){var s=pc(i);if(s!==null&&Hw(s),s=Rp(t,e,n,r),s===null&&qf(t,e,r,wh,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else qf(t,e,r,null,n)}}var wh=null;function Rp(t,e,n,r){if(wh=null,t=hm(r),t=ms(t),t!==null)if(e=Ws(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Mw(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return wh=t,null}function Gw(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(I6()){case dm:return 1;case jw:return 4;case yh:case k6:return 16;case Vw:return 536870912;default:return 16}default:return 16}}var gi=null,mm=null,Vu=null;function Qw(){if(Vu)return Vu;var t,e=mm,n=e.length,r,i="value"in gi?gi.value:gi.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Vu=i.slice(t,1<r?1-r:void 0)}function zu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function iu(){return!0}function Ty(){return!1}function yn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?iu:Ty,this.isPropagationStopped=Ty,this}return qe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=iu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=iu)},persist:function(){},isPersistent:iu}),e}var oa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xm=yn(oa),fc=qe({},oa,{view:0,detail:0}),U6=yn(fc),Bf,Lf,Ma,xd=qe({},fc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ma&&(Ma&&t.type==="mousemove"?(Bf=t.screenX-Ma.screenX,Lf=t.screenY-Ma.screenY):Lf=Bf=0,Ma=t),Bf)},movementY:function(t){return"movementY"in t?t.movementY:Lf}}),Sy=yn(xd),H6=qe({},xd,{dataTransfer:0}),W6=yn(H6),$6=qe({},fc,{relatedTarget:0}),jf=yn($6),q6=qe({},oa,{animationName:0,elapsedTime:0,pseudoElement:0}),K6=yn(q6),G6=qe({},oa,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Q6=yn(G6),Y6=qe({},oa,{data:0}),Iy=yn(Y6),X6={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},J6={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Z6={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function eI(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Z6[t])?!!e[t]:!1}function vm(){return eI}var tI=qe({},fc,{key:function(t){if(t.key){var e=X6[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=zu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?J6[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vm,charCode:function(t){return t.type==="keypress"?zu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?zu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),nI=yn(tI),rI=qe({},xd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ky=yn(rI),iI=qe({},fc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vm}),sI=yn(iI),oI=qe({},oa,{propertyName:0,elapsedTime:0,pseudoElement:0}),aI=yn(oI),lI=qe({},xd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),cI=yn(lI),uI=[9,13,27,32],ym=Or&&"CompositionEvent"in window,ul=null;Or&&"documentMode"in document&&(ul=document.documentMode);var hI=Or&&"TextEvent"in window&&!ul,Yw=Or&&(!ym||ul&&8<ul&&11>=ul),Py=" ",Ry=!1;function Xw(t,e){switch(t){case"keyup":return uI.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Jw(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var yo=!1;function dI(t,e){switch(t){case"compositionend":return Jw(e);case"keypress":return e.which!==32?null:(Ry=!0,Py);case"textInput":return t=e.data,t===Py&&Ry?null:t;default:return null}}function fI(t,e){if(yo)return t==="compositionend"||!ym&&Xw(t,e)?(t=Qw(),Vu=mm=gi=null,yo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Yw&&e.locale!=="ko"?null:e.data;default:return null}}var pI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!pI[t.type]:e==="textarea"}function Zw(t,e,n,r){Pw(r),e=bh(e,"onChange"),0<e.length&&(n=new xm("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var hl=null,Fl=null;function gI(t){u4(t,0)}function vd(t){var e=wo(t);if(bw(e))return t}function mI(t,e){if(t==="change")return e}var e4=!1;if(Or){var Vf;if(Or){var zf="oninput"in document;if(!zf){var Ny=document.createElement("div");Ny.setAttribute("oninput","return;"),zf=typeof Ny.oninput=="function"}Vf=zf}else Vf=!1;e4=Vf&&(!document.documentMode||9<document.documentMode)}function Fy(){hl&&(hl.detachEvent("onpropertychange",t4),Fl=hl=null)}function t4(t){if(t.propertyName==="value"&&vd(Fl)){var e=[];Zw(e,Fl,t,hm(t)),Fw(gI,e)}}function xI(t,e,n){t==="focusin"?(Fy(),hl=e,Fl=n,hl.attachEvent("onpropertychange",t4)):t==="focusout"&&Fy()}function vI(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return vd(Fl)}function yI(t,e){if(t==="click")return vd(e)}function _I(t,e){if(t==="input"||t==="change")return vd(e)}function EI(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Un=typeof Object.is=="function"?Object.is:EI;function Ml(t,e){if(Un(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!fp.call(e,i)||!Un(t[i],e[i]))return!1}return!0}function My(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Oy(t,e){var n=My(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=My(n)}}function n4(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?n4(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function r4(){for(var t=window,e=mh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=mh(t.document)}return e}function _m(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function wI(t){var e=r4(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&n4(n.ownerDocument.documentElement,n)){if(r!==null&&_m(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Oy(n,s);var o=Oy(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var bI=Or&&"documentMode"in document&&11>=document.documentMode,_o=null,Dp=null,dl=null,Np=!1;function By(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Np||_o==null||_o!==mh(r)||(r=_o,"selectionStart"in r&&_m(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),dl&&Ml(dl,r)||(dl=r,r=bh(Dp,"onSelect"),0<r.length&&(e=new xm("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=_o)))}function su(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Eo={animationend:su("Animation","AnimationEnd"),animationiteration:su("Animation","AnimationIteration"),animationstart:su("Animation","AnimationStart"),transitionend:su("Transition","TransitionEnd")},Uf={},i4={};Or&&(i4=document.createElement("div").style,"AnimationEvent"in window||(delete Eo.animationend.animation,delete Eo.animationiteration.animation,delete Eo.animationstart.animation),"TransitionEvent"in window||delete Eo.transitionend.transition);function yd(t){if(Uf[t])return Uf[t];if(!Eo[t])return t;var e=Eo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in i4)return Uf[t]=e[n];return t}var s4=yd("animationend"),o4=yd("animationiteration"),a4=yd("animationstart"),l4=yd("transitionend"),c4=new Map,Ly="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function qi(t,e){c4.set(t,e),Hs(e,[t])}for(var Hf=0;Hf<Ly.length;Hf++){var Wf=Ly[Hf],CI=Wf.toLowerCase(),AI=Wf[0].toUpperCase()+Wf.slice(1);qi(CI,"on"+AI)}qi(s4,"onAnimationEnd");qi(o4,"onAnimationIteration");qi(a4,"onAnimationStart");qi("dblclick","onDoubleClick");qi("focusin","onFocus");qi("focusout","onBlur");qi(l4,"onTransitionEnd");zo("onMouseEnter",["mouseout","mouseover"]);zo("onMouseLeave",["mouseout","mouseover"]);zo("onPointerEnter",["pointerout","pointerover"]);zo("onPointerLeave",["pointerout","pointerover"]);Hs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Hs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Hs("onBeforeInput",["compositionend","keypress","textInput","paste"]);Hs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Hs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Hs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),TI=new Set("cancel close invalid load scroll toggle".split(" ").concat(Qa));function jy(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,C6(r,e,void 0,t),t.currentTarget=null}function u4(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;jy(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;jy(i,a,c),s=l}}}if(vh)throw t=Ip,vh=!1,Ip=null,t}function Fe(t,e){var n=e[Lp];n===void 0&&(n=e[Lp]=new Set);var r=t+"__bubble";n.has(r)||(h4(e,t,2,!1),n.add(r))}function $f(t,e,n){var r=0;e&&(r|=4),h4(n,t,r,e)}var ou="_reactListening"+Math.random().toString(36).slice(2);function Ol(t){if(!t[ou]){t[ou]=!0,vw.forEach(function(n){n!=="selectionchange"&&(TI.has(n)||$f(n,!1,t),$f(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ou]||(e[ou]=!0,$f("selectionchange",!1,e))}}function h4(t,e,n,r){switch(Gw(e)){case 1:var i=V6;break;case 4:i=z6;break;default:i=gm}n=i.bind(null,e,n,t),i=void 0,!Sp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function qf(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=ms(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}Fw(function(){var c=s,u=hm(n),d=[];e:{var f=c4.get(t);if(f!==void 0){var p=xm,m=t;switch(t){case"keypress":if(zu(n)===0)break e;case"keydown":case"keyup":p=nI;break;case"focusin":m="focus",p=jf;break;case"focusout":m="blur",p=jf;break;case"beforeblur":case"afterblur":p=jf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Sy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=W6;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=sI;break;case s4:case o4:case a4:p=K6;break;case l4:p=aI;break;case"scroll":p=U6;break;case"wheel":p=cI;break;case"copy":case"cut":case"paste":p=Q6;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=ky}var v=(e&4)!==0,E=!v&&t==="scroll",_=v?f!==null?f+"Capture":null:f;v=[];for(var x=c,w;x!==null;){w=x;var A=w.stateNode;if(w.tag===5&&A!==null&&(w=A,_!==null&&(A=Pl(x,_),A!=null&&v.push(Bl(x,A,w)))),E)break;x=x.return}0<v.length&&(f=new p(f,m,null,n,u),d.push({event:f,listeners:v}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&n!==Ap&&(m=n.relatedTarget||n.fromElement)&&(ms(m)||m[Br]))break e;if((p||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,p?(m=n.relatedTarget||n.toElement,p=c,m=m?ms(m):null,m!==null&&(E=Ws(m),m!==E||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=c),p!==m)){if(v=Sy,A="onMouseLeave",_="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(v=ky,A="onPointerLeave",_="onPointerEnter",x="pointer"),E=p==null?f:wo(p),w=m==null?f:wo(m),f=new v(A,x+"leave",p,n,u),f.target=E,f.relatedTarget=w,A=null,ms(u)===c&&(v=new v(_,x+"enter",m,n,u),v.target=w,v.relatedTarget=E,A=v),E=A,p&&m)t:{for(v=p,_=m,x=0,w=v;w;w=co(w))x++;for(w=0,A=_;A;A=co(A))w++;for(;0<x-w;)v=co(v),x--;for(;0<w-x;)_=co(_),w--;for(;x--;){if(v===_||_!==null&&v===_.alternate)break t;v=co(v),_=co(_)}v=null}else v=null;p!==null&&Vy(d,f,p,v,!1),m!==null&&E!==null&&Vy(d,E,m,v,!0)}}e:{if(f=c?wo(c):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var P=mI;else if(Dy(f))if(e4)P=_I;else{P=vI;var R=xI}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(P=yI);if(P&&(P=P(t,c))){Zw(d,P,n,u);break e}R&&R(t,f,c),t==="focusout"&&(R=f._wrapperState)&&R.controlled&&f.type==="number"&&_p(f,"number",f.value)}switch(R=c?wo(c):window,t){case"focusin":(Dy(R)||R.contentEditable==="true")&&(_o=R,Dp=c,dl=null);break;case"focusout":dl=Dp=_o=null;break;case"mousedown":Np=!0;break;case"contextmenu":case"mouseup":case"dragend":Np=!1,By(d,n,u);break;case"selectionchange":if(bI)break;case"keydown":case"keyup":By(d,n,u)}var C;if(ym)e:{switch(t){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else yo?Xw(t,n)&&(b="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(b="onCompositionStart");b&&(Yw&&n.locale!=="ko"&&(yo||b!=="onCompositionStart"?b==="onCompositionEnd"&&yo&&(C=Qw()):(gi=u,mm="value"in gi?gi.value:gi.textContent,yo=!0)),R=bh(c,b),0<R.length&&(b=new Iy(b,t,null,n,u),d.push({event:b,listeners:R}),C?b.data=C:(C=Jw(n),C!==null&&(b.data=C)))),(C=hI?dI(t,n):fI(t,n))&&(c=bh(c,"onBeforeInput"),0<c.length&&(u=new Iy("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=C))}u4(d,e)})}function Bl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function bh(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Pl(t,n),s!=null&&r.unshift(Bl(t,s,i)),s=Pl(t,e),s!=null&&r.push(Bl(t,s,i))),t=t.return}return r}function co(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Vy(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Pl(n,s),l!=null&&o.unshift(Bl(n,l,a))):i||(l=Pl(n,s),l!=null&&o.push(Bl(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var SI=/\r\n?/g,II=/\u0000|\uFFFD/g;function zy(t){return(typeof t=="string"?t:""+t).replace(SI,`
`).replace(II,"")}function au(t,e,n){if(e=zy(e),zy(t)!==e&&n)throw Error(Y(425))}function Ch(){}var Fp=null,Mp=null;function Op(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Bp=typeof setTimeout=="function"?setTimeout:void 0,kI=typeof clearTimeout=="function"?clearTimeout:void 0,Uy=typeof Promise=="function"?Promise:void 0,PI=typeof queueMicrotask=="function"?queueMicrotask:typeof Uy<"u"?function(t){return Uy.resolve(null).then(t).catch(RI)}:Bp;function RI(t){setTimeout(function(){throw t})}function Kf(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Nl(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Nl(e)}function Ti(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Hy(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var aa=Math.random().toString(36).slice(2),Yn="__reactFiber$"+aa,Ll="__reactProps$"+aa,Br="__reactContainer$"+aa,Lp="__reactEvents$"+aa,DI="__reactListeners$"+aa,NI="__reactHandles$"+aa;function ms(t){var e=t[Yn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Br]||n[Yn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Hy(t);t!==null;){if(n=t[Yn])return n;t=Hy(t)}return e}t=n,n=t.parentNode}return null}function pc(t){return t=t[Yn]||t[Br],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function wo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Y(33))}function _d(t){return t[Ll]||null}var jp=[],bo=-1;function Ki(t){return{current:t}}function Oe(t){0>bo||(t.current=jp[bo],jp[bo]=null,bo--)}function De(t,e){bo++,jp[bo]=t.current,t.current=e}var Li={},Vt=Ki(Li),sn=Ki(!1),Is=Li;function Uo(t,e){var n=t.type.contextTypes;if(!n)return Li;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function on(t){return t=t.childContextTypes,t!=null}function Ah(){Oe(sn),Oe(Vt)}function Wy(t,e,n){if(Vt.current!==Li)throw Error(Y(168));De(Vt,e),De(sn,n)}function d4(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Y(108,x6(t)||"Unknown",i));return qe({},n,r)}function Th(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Li,Is=Vt.current,De(Vt,t),De(sn,sn.current),!0}function $y(t,e,n){var r=t.stateNode;if(!r)throw Error(Y(169));n?(t=d4(t,e,Is),r.__reactInternalMemoizedMergedChildContext=t,Oe(sn),Oe(Vt),De(Vt,t)):Oe(sn),De(sn,n)}var _r=null,Ed=!1,Gf=!1;function f4(t){_r===null?_r=[t]:_r.push(t)}function FI(t){Ed=!0,f4(t)}function Gi(){if(!Gf&&_r!==null){Gf=!0;var t=0,e=Ae;try{var n=_r;for(Ae=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}_r=null,Ed=!1}catch(i){throw _r!==null&&(_r=_r.slice(t+1)),Lw(dm,Gi),i}finally{Ae=e,Gf=!1}}return null}var Co=[],Ao=0,Sh=null,Ih=0,bn=[],Cn=0,ks=null,br=1,Cr="";function hs(t,e){Co[Ao++]=Ih,Co[Ao++]=Sh,Sh=t,Ih=e}function p4(t,e,n){bn[Cn++]=br,bn[Cn++]=Cr,bn[Cn++]=ks,ks=t;var r=br;t=Cr;var i=32-jn(r)-1;r&=~(1<<i),n+=1;var s=32-jn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,br=1<<32-jn(e)+i|n<<i|r,Cr=s+t}else br=1<<s|n<<i|r,Cr=t}function Em(t){t.return!==null&&(hs(t,1),p4(t,1,0))}function wm(t){for(;t===Sh;)Sh=Co[--Ao],Co[Ao]=null,Ih=Co[--Ao],Co[Ao]=null;for(;t===ks;)ks=bn[--Cn],bn[Cn]=null,Cr=bn[--Cn],bn[Cn]=null,br=bn[--Cn],bn[Cn]=null}var mn=null,pn=null,je=!1,On=null;function g4(t,e){var n=An(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function qy(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,mn=t,pn=Ti(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,mn=t,pn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ks!==null?{id:br,overflow:Cr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=An(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,mn=t,pn=null,!0):!1;default:return!1}}function Vp(t){return(t.mode&1)!==0&&(t.flags&128)===0}function zp(t){if(je){var e=pn;if(e){var n=e;if(!qy(t,e)){if(Vp(t))throw Error(Y(418));e=Ti(n.nextSibling);var r=mn;e&&qy(t,e)?g4(r,n):(t.flags=t.flags&-4097|2,je=!1,mn=t)}}else{if(Vp(t))throw Error(Y(418));t.flags=t.flags&-4097|2,je=!1,mn=t}}}function Ky(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;mn=t}function lu(t){if(t!==mn)return!1;if(!je)return Ky(t),je=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Op(t.type,t.memoizedProps)),e&&(e=pn)){if(Vp(t))throw m4(),Error(Y(418));for(;e;)g4(t,e),e=Ti(e.nextSibling)}if(Ky(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Y(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){pn=Ti(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}pn=null}}else pn=mn?Ti(t.stateNode.nextSibling):null;return!0}function m4(){for(var t=pn;t;)t=Ti(t.nextSibling)}function Ho(){pn=mn=null,je=!1}function bm(t){On===null?On=[t]:On.push(t)}var MI=$r.ReactCurrentBatchConfig;function Oa(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Y(309));var r=n.stateNode}if(!r)throw Error(Y(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(Y(284));if(!n._owner)throw Error(Y(290,t))}return t}function cu(t,e){throw t=Object.prototype.toString.call(e),Error(Y(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Gy(t){var e=t._init;return e(t._payload)}function x4(t){function e(_,x){if(t){var w=_.deletions;w===null?(_.deletions=[x],_.flags|=16):w.push(x)}}function n(_,x){if(!t)return null;for(;x!==null;)e(_,x),x=x.sibling;return null}function r(_,x){for(_=new Map;x!==null;)x.key!==null?_.set(x.key,x):_.set(x.index,x),x=x.sibling;return _}function i(_,x){return _=Pi(_,x),_.index=0,_.sibling=null,_}function s(_,x,w){return _.index=w,t?(w=_.alternate,w!==null?(w=w.index,w<x?(_.flags|=2,x):w):(_.flags|=2,x)):(_.flags|=1048576,x)}function o(_){return t&&_.alternate===null&&(_.flags|=2),_}function a(_,x,w,A){return x===null||x.tag!==6?(x=t0(w,_.mode,A),x.return=_,x):(x=i(x,w),x.return=_,x)}function l(_,x,w,A){var P=w.type;return P===vo?u(_,x,w.props.children,A,w.key):x!==null&&(x.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===oi&&Gy(P)===x.type)?(A=i(x,w.props),A.ref=Oa(_,x,w),A.return=_,A):(A=Gu(w.type,w.key,w.props,null,_.mode,A),A.ref=Oa(_,x,w),A.return=_,A)}function c(_,x,w,A){return x===null||x.tag!==4||x.stateNode.containerInfo!==w.containerInfo||x.stateNode.implementation!==w.implementation?(x=n0(w,_.mode,A),x.return=_,x):(x=i(x,w.children||[]),x.return=_,x)}function u(_,x,w,A,P){return x===null||x.tag!==7?(x=bs(w,_.mode,A,P),x.return=_,x):(x=i(x,w),x.return=_,x)}function d(_,x,w){if(typeof x=="string"&&x!==""||typeof x=="number")return x=t0(""+x,_.mode,w),x.return=_,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Jc:return w=Gu(x.type,x.key,x.props,null,_.mode,w),w.ref=Oa(_,null,x),w.return=_,w;case xo:return x=n0(x,_.mode,w),x.return=_,x;case oi:var A=x._init;return d(_,A(x._payload),w)}if(Ka(x)||Ra(x))return x=bs(x,_.mode,w,null),x.return=_,x;cu(_,x)}return null}function f(_,x,w,A){var P=x!==null?x.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return P!==null?null:a(_,x,""+w,A);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Jc:return w.key===P?l(_,x,w,A):null;case xo:return w.key===P?c(_,x,w,A):null;case oi:return P=w._init,f(_,x,P(w._payload),A)}if(Ka(w)||Ra(w))return P!==null?null:u(_,x,w,A,null);cu(_,w)}return null}function p(_,x,w,A,P){if(typeof A=="string"&&A!==""||typeof A=="number")return _=_.get(w)||null,a(x,_,""+A,P);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case Jc:return _=_.get(A.key===null?w:A.key)||null,l(x,_,A,P);case xo:return _=_.get(A.key===null?w:A.key)||null,c(x,_,A,P);case oi:var R=A._init;return p(_,x,w,R(A._payload),P)}if(Ka(A)||Ra(A))return _=_.get(w)||null,u(x,_,A,P,null);cu(x,A)}return null}function m(_,x,w,A){for(var P=null,R=null,C=x,b=x=0,k=null;C!==null&&b<w.length;b++){C.index>b?(k=C,C=null):k=C.sibling;var S=f(_,C,w[b],A);if(S===null){C===null&&(C=k);break}t&&C&&S.alternate===null&&e(_,C),x=s(S,x,b),R===null?P=S:R.sibling=S,R=S,C=k}if(b===w.length)return n(_,C),je&&hs(_,b),P;if(C===null){for(;b<w.length;b++)C=d(_,w[b],A),C!==null&&(x=s(C,x,b),R===null?P=C:R.sibling=C,R=C);return je&&hs(_,b),P}for(C=r(_,C);b<w.length;b++)k=p(C,_,b,w[b],A),k!==null&&(t&&k.alternate!==null&&C.delete(k.key===null?b:k.key),x=s(k,x,b),R===null?P=k:R.sibling=k,R=k);return t&&C.forEach(function(I){return e(_,I)}),je&&hs(_,b),P}function v(_,x,w,A){var P=Ra(w);if(typeof P!="function")throw Error(Y(150));if(w=P.call(w),w==null)throw Error(Y(151));for(var R=P=null,C=x,b=x=0,k=null,S=w.next();C!==null&&!S.done;b++,S=w.next()){C.index>b?(k=C,C=null):k=C.sibling;var I=f(_,C,S.value,A);if(I===null){C===null&&(C=k);break}t&&C&&I.alternate===null&&e(_,C),x=s(I,x,b),R===null?P=I:R.sibling=I,R=I,C=k}if(S.done)return n(_,C),je&&hs(_,b),P;if(C===null){for(;!S.done;b++,S=w.next())S=d(_,S.value,A),S!==null&&(x=s(S,x,b),R===null?P=S:R.sibling=S,R=S);return je&&hs(_,b),P}for(C=r(_,C);!S.done;b++,S=w.next())S=p(C,_,b,S.value,A),S!==null&&(t&&S.alternate!==null&&C.delete(S.key===null?b:S.key),x=s(S,x,b),R===null?P=S:R.sibling=S,R=S);return t&&C.forEach(function(N){return e(_,N)}),je&&hs(_,b),P}function E(_,x,w,A){if(typeof w=="object"&&w!==null&&w.type===vo&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Jc:e:{for(var P=w.key,R=x;R!==null;){if(R.key===P){if(P=w.type,P===vo){if(R.tag===7){n(_,R.sibling),x=i(R,w.props.children),x.return=_,_=x;break e}}else if(R.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===oi&&Gy(P)===R.type){n(_,R.sibling),x=i(R,w.props),x.ref=Oa(_,R,w),x.return=_,_=x;break e}n(_,R);break}else e(_,R);R=R.sibling}w.type===vo?(x=bs(w.props.children,_.mode,A,w.key),x.return=_,_=x):(A=Gu(w.type,w.key,w.props,null,_.mode,A),A.ref=Oa(_,x,w),A.return=_,_=A)}return o(_);case xo:e:{for(R=w.key;x!==null;){if(x.key===R)if(x.tag===4&&x.stateNode.containerInfo===w.containerInfo&&x.stateNode.implementation===w.implementation){n(_,x.sibling),x=i(x,w.children||[]),x.return=_,_=x;break e}else{n(_,x);break}else e(_,x);x=x.sibling}x=n0(w,_.mode,A),x.return=_,_=x}return o(_);case oi:return R=w._init,E(_,x,R(w._payload),A)}if(Ka(w))return m(_,x,w,A);if(Ra(w))return v(_,x,w,A);cu(_,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,x!==null&&x.tag===6?(n(_,x.sibling),x=i(x,w),x.return=_,_=x):(n(_,x),x=t0(w,_.mode,A),x.return=_,_=x),o(_)):n(_,x)}return E}var Wo=x4(!0),v4=x4(!1),kh=Ki(null),Ph=null,To=null,Cm=null;function Am(){Cm=To=Ph=null}function Tm(t){var e=kh.current;Oe(kh),t._currentValue=e}function Up(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Fo(t,e){Ph=t,Cm=To=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(rn=!0),t.firstContext=null)}function kn(t){var e=t._currentValue;if(Cm!==t)if(t={context:t,memoizedValue:e,next:null},To===null){if(Ph===null)throw Error(Y(308));To=t,Ph.dependencies={lanes:0,firstContext:t}}else To=To.next=t;return e}var xs=null;function Sm(t){xs===null?xs=[t]:xs.push(t)}function y4(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Sm(e)):(n.next=i.next,i.next=n),e.interleaved=n,Lr(t,r)}function Lr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ai=!1;function Im(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function _4(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Dr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Si(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,_e&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Lr(t,n)}return i=r.interleaved,i===null?(e.next=e,Sm(r)):(e.next=i.next,i.next=e),r.interleaved=e,Lr(t,n)}function Uu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,fm(t,n)}}function Qy(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Rh(t,e,n,r){var i=t.updateQueue;ai=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,u=c=l=null,a=s;do{var f=a.lane,p=a.eventTime;if((r&f)===f){u!==null&&(u=u.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=t,v=a;switch(f=e,p=n,v.tag){case 1:if(m=v.payload,typeof m=="function"){d=m.call(p,d,f);break e}d=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=v.payload,f=typeof m=="function"?m.call(p,d,f):m,f==null)break e;d=qe({},d,f);break e;case 2:ai=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=p,l=d):u=u.next=p,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(u===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Rs|=o,t.lanes=o,t.memoizedState=d}}function Yy(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Y(191,i));i.call(r)}}}var gc={},er=Ki(gc),jl=Ki(gc),Vl=Ki(gc);function vs(t){if(t===gc)throw Error(Y(174));return t}function km(t,e){switch(De(Vl,e),De(jl,t),De(er,gc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:wp(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=wp(e,t)}Oe(er),De(er,e)}function $o(){Oe(er),Oe(jl),Oe(Vl)}function E4(t){vs(Vl.current);var e=vs(er.current),n=wp(e,t.type);e!==n&&(De(jl,t),De(er,n))}function Pm(t){jl.current===t&&(Oe(er),Oe(jl))}var He=Ki(0);function Dh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Qf=[];function Rm(){for(var t=0;t<Qf.length;t++)Qf[t]._workInProgressVersionPrimary=null;Qf.length=0}var Hu=$r.ReactCurrentDispatcher,Yf=$r.ReactCurrentBatchConfig,Ps=0,We=null,ut=null,gt=null,Nh=!1,fl=!1,zl=0,OI=0;function Rt(){throw Error(Y(321))}function Dm(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Un(t[n],e[n]))return!1;return!0}function Nm(t,e,n,r,i,s){if(Ps=s,We=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Hu.current=t===null||t.memoizedState===null?VI:zI,t=n(r,i),fl){s=0;do{if(fl=!1,zl=0,25<=s)throw Error(Y(301));s+=1,gt=ut=null,e.updateQueue=null,Hu.current=UI,t=n(r,i)}while(fl)}if(Hu.current=Fh,e=ut!==null&&ut.next!==null,Ps=0,gt=ut=We=null,Nh=!1,e)throw Error(Y(300));return t}function Fm(){var t=zl!==0;return zl=0,t}function Gn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gt===null?We.memoizedState=gt=t:gt=gt.next=t,gt}function Pn(){if(ut===null){var t=We.alternate;t=t!==null?t.memoizedState:null}else t=ut.next;var e=gt===null?We.memoizedState:gt.next;if(e!==null)gt=e,ut=t;else{if(t===null)throw Error(Y(310));ut=t,t={memoizedState:ut.memoizedState,baseState:ut.baseState,baseQueue:ut.baseQueue,queue:ut.queue,next:null},gt===null?We.memoizedState=gt=t:gt=gt.next=t}return gt}function Ul(t,e){return typeof e=="function"?e(t):e}function Xf(t){var e=Pn(),n=e.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=t;var r=ut,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((Ps&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,We.lanes|=u,Rs|=u}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,Un(r,e.memoizedState)||(rn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,We.lanes|=s,Rs|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Jf(t){var e=Pn(),n=e.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Un(s,e.memoizedState)||(rn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function w4(){}function b4(t,e){var n=We,r=Pn(),i=e(),s=!Un(r.memoizedState,i);if(s&&(r.memoizedState=i,rn=!0),r=r.queue,Mm(T4.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||gt!==null&&gt.memoizedState.tag&1){if(n.flags|=2048,Hl(9,A4.bind(null,n,r,i,e),void 0,null),xt===null)throw Error(Y(349));Ps&30||C4(n,e,i)}return i}function C4(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=We.updateQueue,e===null?(e={lastEffect:null,stores:null},We.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function A4(t,e,n,r){e.value=n,e.getSnapshot=r,S4(e)&&I4(t)}function T4(t,e,n){return n(function(){S4(e)&&I4(t)})}function S4(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Un(t,n)}catch{return!0}}function I4(t){var e=Lr(t,1);e!==null&&Vn(e,t,1,-1)}function Xy(t){var e=Gn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ul,lastRenderedState:t},e.queue=t,t=t.dispatch=jI.bind(null,We,t),[e.memoizedState,t]}function Hl(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=We.updateQueue,e===null?(e={lastEffect:null,stores:null},We.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function k4(){return Pn().memoizedState}function Wu(t,e,n,r){var i=Gn();We.flags|=t,i.memoizedState=Hl(1|e,n,void 0,r===void 0?null:r)}function wd(t,e,n,r){var i=Pn();r=r===void 0?null:r;var s=void 0;if(ut!==null){var o=ut.memoizedState;if(s=o.destroy,r!==null&&Dm(r,o.deps)){i.memoizedState=Hl(e,n,s,r);return}}We.flags|=t,i.memoizedState=Hl(1|e,n,s,r)}function Jy(t,e){return Wu(8390656,8,t,e)}function Mm(t,e){return wd(2048,8,t,e)}function P4(t,e){return wd(4,2,t,e)}function R4(t,e){return wd(4,4,t,e)}function D4(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function N4(t,e,n){return n=n!=null?n.concat([t]):null,wd(4,4,D4.bind(null,e,t),n)}function Om(){}function F4(t,e){var n=Pn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Dm(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function M4(t,e){var n=Pn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Dm(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function O4(t,e,n){return Ps&21?(Un(n,e)||(n=zw(),We.lanes|=n,Rs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,rn=!0),t.memoizedState=n)}function BI(t,e){var n=Ae;Ae=n!==0&&4>n?n:4,t(!0);var r=Yf.transition;Yf.transition={};try{t(!1),e()}finally{Ae=n,Yf.transition=r}}function B4(){return Pn().memoizedState}function LI(t,e,n){var r=ki(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},L4(t))j4(e,n);else if(n=y4(t,e,n,r),n!==null){var i=Kt();Vn(n,t,r,i),V4(n,e,r)}}function jI(t,e,n){var r=ki(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(L4(t))j4(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Un(a,o)){var l=e.interleaved;l===null?(i.next=i,Sm(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=y4(t,e,i,r),n!==null&&(i=Kt(),Vn(n,t,r,i),V4(n,e,r))}}function L4(t){var e=t.alternate;return t===We||e!==null&&e===We}function j4(t,e){fl=Nh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function V4(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,fm(t,n)}}var Fh={readContext:kn,useCallback:Rt,useContext:Rt,useEffect:Rt,useImperativeHandle:Rt,useInsertionEffect:Rt,useLayoutEffect:Rt,useMemo:Rt,useReducer:Rt,useRef:Rt,useState:Rt,useDebugValue:Rt,useDeferredValue:Rt,useTransition:Rt,useMutableSource:Rt,useSyncExternalStore:Rt,useId:Rt,unstable_isNewReconciler:!1},VI={readContext:kn,useCallback:function(t,e){return Gn().memoizedState=[t,e===void 0?null:e],t},useContext:kn,useEffect:Jy,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Wu(4194308,4,D4.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Wu(4194308,4,t,e)},useInsertionEffect:function(t,e){return Wu(4,2,t,e)},useMemo:function(t,e){var n=Gn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Gn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=LI.bind(null,We,t),[r.memoizedState,t]},useRef:function(t){var e=Gn();return t={current:t},e.memoizedState=t},useState:Xy,useDebugValue:Om,useDeferredValue:function(t){return Gn().memoizedState=t},useTransition:function(){var t=Xy(!1),e=t[0];return t=BI.bind(null,t[1]),Gn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=We,i=Gn();if(je){if(n===void 0)throw Error(Y(407));n=n()}else{if(n=e(),xt===null)throw Error(Y(349));Ps&30||C4(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Jy(T4.bind(null,r,s,t),[t]),r.flags|=2048,Hl(9,A4.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Gn(),e=xt.identifierPrefix;if(je){var n=Cr,r=br;n=(r&~(1<<32-jn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=zl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=OI++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},zI={readContext:kn,useCallback:F4,useContext:kn,useEffect:Mm,useImperativeHandle:N4,useInsertionEffect:P4,useLayoutEffect:R4,useMemo:M4,useReducer:Xf,useRef:k4,useState:function(){return Xf(Ul)},useDebugValue:Om,useDeferredValue:function(t){var e=Pn();return O4(e,ut.memoizedState,t)},useTransition:function(){var t=Xf(Ul)[0],e=Pn().memoizedState;return[t,e]},useMutableSource:w4,useSyncExternalStore:b4,useId:B4,unstable_isNewReconciler:!1},UI={readContext:kn,useCallback:F4,useContext:kn,useEffect:Mm,useImperativeHandle:N4,useInsertionEffect:P4,useLayoutEffect:R4,useMemo:M4,useReducer:Jf,useRef:k4,useState:function(){return Jf(Ul)},useDebugValue:Om,useDeferredValue:function(t){var e=Pn();return ut===null?e.memoizedState=t:O4(e,ut.memoizedState,t)},useTransition:function(){var t=Jf(Ul)[0],e=Pn().memoizedState;return[t,e]},useMutableSource:w4,useSyncExternalStore:b4,useId:B4,unstable_isNewReconciler:!1};function Fn(t,e){if(t&&t.defaultProps){e=qe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Hp(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:qe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var bd={isMounted:function(t){return(t=t._reactInternals)?Ws(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Kt(),i=ki(t),s=Dr(r,i);s.payload=e,n!=null&&(s.callback=n),e=Si(t,s,i),e!==null&&(Vn(e,t,i,r),Uu(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Kt(),i=ki(t),s=Dr(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Si(t,s,i),e!==null&&(Vn(e,t,i,r),Uu(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Kt(),r=ki(t),i=Dr(n,r);i.tag=2,e!=null&&(i.callback=e),e=Si(t,i,r),e!==null&&(Vn(e,t,r,n),Uu(e,t,r))}};function Zy(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Ml(n,r)||!Ml(i,s):!0}function z4(t,e,n){var r=!1,i=Li,s=e.contextType;return typeof s=="object"&&s!==null?s=kn(s):(i=on(e)?Is:Vt.current,r=e.contextTypes,s=(r=r!=null)?Uo(t,i):Li),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=bd,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function e1(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&bd.enqueueReplaceState(e,e.state,null)}function Wp(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Im(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=kn(s):(s=on(e)?Is:Vt.current,i.context=Uo(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Hp(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&bd.enqueueReplaceState(i,i.state,null),Rh(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function qo(t,e){try{var n="",r=e;do n+=m6(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Zf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function $p(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var HI=typeof WeakMap=="function"?WeakMap:Map;function U4(t,e,n){n=Dr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Oh||(Oh=!0,tg=r),$p(t,e)},n}function H4(t,e,n){n=Dr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){$p(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){$p(t,e),typeof r!="function"&&(Ii===null?Ii=new Set([this]):Ii.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function t1(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new HI;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=r8.bind(null,t,e,n),e.then(t,t))}function n1(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function r1(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Dr(-1,1),e.tag=2,Si(n,e,1))),n.lanes|=1),t)}var WI=$r.ReactCurrentOwner,rn=!1;function $t(t,e,n,r){e.child=t===null?v4(e,null,n,r):Wo(e,t.child,n,r)}function i1(t,e,n,r,i){n=n.render;var s=e.ref;return Fo(e,i),r=Nm(t,e,n,r,s,i),n=Fm(),t!==null&&!rn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,jr(t,e,i)):(je&&n&&Em(e),e.flags|=1,$t(t,e,r,i),e.child)}function s1(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Wm(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,W4(t,e,s,r,i)):(t=Gu(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Ml,n(o,r)&&t.ref===e.ref)return jr(t,e,i)}return e.flags|=1,t=Pi(s,r),t.ref=e.ref,t.return=e,e.child=t}function W4(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Ml(s,r)&&t.ref===e.ref)if(rn=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(rn=!0);else return e.lanes=t.lanes,jr(t,e,i)}return qp(t,e,n,r,i)}function $4(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},De(Io,dn),dn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,De(Io,dn),dn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,De(Io,dn),dn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,De(Io,dn),dn|=r;return $t(t,e,i,n),e.child}function q4(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function qp(t,e,n,r,i){var s=on(n)?Is:Vt.current;return s=Uo(e,s),Fo(e,i),n=Nm(t,e,n,r,s,i),r=Fm(),t!==null&&!rn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,jr(t,e,i)):(je&&r&&Em(e),e.flags|=1,$t(t,e,n,i),e.child)}function o1(t,e,n,r,i){if(on(n)){var s=!0;Th(e)}else s=!1;if(Fo(e,i),e.stateNode===null)$u(t,e),z4(e,n,r),Wp(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=kn(c):(c=on(n)?Is:Vt.current,c=Uo(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&e1(e,o,r,c),ai=!1;var f=e.memoizedState;o.state=f,Rh(e,r,o,i),l=e.memoizedState,a!==r||f!==l||sn.current||ai?(typeof u=="function"&&(Hp(e,n,u,r),l=e.memoizedState),(a=ai||Zy(e,n,a,r,f,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,_4(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Fn(e.type,a),o.props=c,d=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=kn(l):(l=on(n)?Is:Vt.current,l=Uo(e,l));var p=n.getDerivedStateFromProps;(u=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&e1(e,o,r,l),ai=!1,f=e.memoizedState,o.state=f,Rh(e,r,o,i);var m=e.memoizedState;a!==d||f!==m||sn.current||ai?(typeof p=="function"&&(Hp(e,n,p,r),m=e.memoizedState),(c=ai||Zy(e,n,c,r,f,m,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,m,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,m,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=m),o.props=r,o.state=m,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Kp(t,e,n,r,s,i)}function Kp(t,e,n,r,i,s){q4(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&$y(e,n,!1),jr(t,e,s);r=e.stateNode,WI.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Wo(e,t.child,null,s),e.child=Wo(e,null,a,s)):$t(t,e,a,s),e.memoizedState=r.state,i&&$y(e,n,!0),e.child}function K4(t){var e=t.stateNode;e.pendingContext?Wy(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Wy(t,e.context,!1),km(t,e.containerInfo)}function a1(t,e,n,r,i){return Ho(),bm(i),e.flags|=256,$t(t,e,n,r),e.child}var Gp={dehydrated:null,treeContext:null,retryLane:0};function Qp(t){return{baseLanes:t,cachePool:null,transitions:null}}function G4(t,e,n){var r=e.pendingProps,i=He.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),De(He,i&1),t===null)return zp(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Td(o,r,0,null),t=bs(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Qp(n),e.memoizedState=Gp,t):Bm(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return $I(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Pi(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Pi(a,s):(s=bs(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Qp(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Gp,r}return s=t.child,t=s.sibling,r=Pi(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Bm(t,e){return e=Td({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function uu(t,e,n,r){return r!==null&&bm(r),Wo(e,t.child,null,n),t=Bm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function $I(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Zf(Error(Y(422))),uu(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Td({mode:"visible",children:r.children},i,0,null),s=bs(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Wo(e,t.child,null,o),e.child.memoizedState=Qp(o),e.memoizedState=Gp,s);if(!(e.mode&1))return uu(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Y(419)),r=Zf(s,r,void 0),uu(t,e,o,r)}if(a=(o&t.childLanes)!==0,rn||a){if(r=xt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Lr(t,i),Vn(r,t,i,-1))}return Hm(),r=Zf(Error(Y(421))),uu(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=i8.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,pn=Ti(i.nextSibling),mn=e,je=!0,On=null,t!==null&&(bn[Cn++]=br,bn[Cn++]=Cr,bn[Cn++]=ks,br=t.id,Cr=t.overflow,ks=e),e=Bm(e,r.children),e.flags|=4096,e)}function l1(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Up(t.return,e,n)}function e0(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Q4(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if($t(t,e,r.children,n),r=He.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&l1(t,n,e);else if(t.tag===19)l1(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(De(He,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Dh(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),e0(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Dh(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}e0(e,!0,n,null,s);break;case"together":e0(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function $u(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function jr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Rs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Y(153));if(e.child!==null){for(t=e.child,n=Pi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Pi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function qI(t,e,n){switch(e.tag){case 3:K4(e),Ho();break;case 5:E4(e);break;case 1:on(e.type)&&Th(e);break;case 4:km(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;De(kh,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(De(He,He.current&1),e.flags|=128,null):n&e.child.childLanes?G4(t,e,n):(De(He,He.current&1),t=jr(t,e,n),t!==null?t.sibling:null);De(He,He.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Q4(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),De(He,He.current),r)break;return null;case 22:case 23:return e.lanes=0,$4(t,e,n)}return jr(t,e,n)}var Y4,Yp,X4,J4;Y4=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Yp=function(){};X4=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,vs(er.current);var s=null;switch(n){case"input":i=vp(t,i),r=vp(t,r),s=[];break;case"select":i=qe({},i,{value:void 0}),r=qe({},r,{value:void 0}),s=[];break;case"textarea":i=Ep(t,i),r=Ep(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ch)}bp(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Il.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Il.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Fe("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};J4=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ba(t,e){if(!je)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Dt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function KI(t,e,n){var r=e.pendingProps;switch(wm(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dt(e),null;case 1:return on(e.type)&&Ah(),Dt(e),null;case 3:return r=e.stateNode,$o(),Oe(sn),Oe(Vt),Rm(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(lu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,On!==null&&(ig(On),On=null))),Yp(t,e),Dt(e),null;case 5:Pm(e);var i=vs(Vl.current);if(n=e.type,t!==null&&e.stateNode!=null)X4(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Y(166));return Dt(e),null}if(t=vs(er.current),lu(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Yn]=e,r[Ll]=s,t=(e.mode&1)!==0,n){case"dialog":Fe("cancel",r),Fe("close",r);break;case"iframe":case"object":case"embed":Fe("load",r);break;case"video":case"audio":for(i=0;i<Qa.length;i++)Fe(Qa[i],r);break;case"source":Fe("error",r);break;case"img":case"image":case"link":Fe("error",r),Fe("load",r);break;case"details":Fe("toggle",r);break;case"input":xy(r,s),Fe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Fe("invalid",r);break;case"textarea":yy(r,s),Fe("invalid",r)}bp(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&au(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&au(r.textContent,a,t),i=["children",""+a]):Il.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Fe("scroll",r)}switch(n){case"input":Zc(r),vy(r,s,!0);break;case"textarea":Zc(r),_y(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Ch)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Tw(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Yn]=e,t[Ll]=r,Y4(t,e,!1,!1),e.stateNode=t;e:{switch(o=Cp(n,r),n){case"dialog":Fe("cancel",t),Fe("close",t),i=r;break;case"iframe":case"object":case"embed":Fe("load",t),i=r;break;case"video":case"audio":for(i=0;i<Qa.length;i++)Fe(Qa[i],t);i=r;break;case"source":Fe("error",t),i=r;break;case"img":case"image":case"link":Fe("error",t),Fe("load",t),i=r;break;case"details":Fe("toggle",t),i=r;break;case"input":xy(t,r),i=vp(t,r),Fe("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=qe({},r,{value:void 0}),Fe("invalid",t);break;case"textarea":yy(t,r),i=Ep(t,r),Fe("invalid",t);break;default:i=r}bp(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?kw(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Sw(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&kl(t,l):typeof l=="number"&&kl(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Il.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Fe("scroll",t):l!=null&&am(t,s,l,o))}switch(n){case"input":Zc(t),vy(t,r,!1);break;case"textarea":Zc(t),_y(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Bi(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Po(t,!!r.multiple,s,!1):r.defaultValue!=null&&Po(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Ch)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Dt(e),null;case 6:if(t&&e.stateNode!=null)J4(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Y(166));if(n=vs(Vl.current),vs(er.current),lu(e)){if(r=e.stateNode,n=e.memoizedProps,r[Yn]=e,(s=r.nodeValue!==n)&&(t=mn,t!==null))switch(t.tag){case 3:au(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&au(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Yn]=e,e.stateNode=r}return Dt(e),null;case 13:if(Oe(He),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(je&&pn!==null&&e.mode&1&&!(e.flags&128))m4(),Ho(),e.flags|=98560,s=!1;else if(s=lu(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(Y(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Y(317));s[Yn]=e}else Ho(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Dt(e),s=!1}else On!==null&&(ig(On),On=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||He.current&1?ht===0&&(ht=3):Hm())),e.updateQueue!==null&&(e.flags|=4),Dt(e),null);case 4:return $o(),Yp(t,e),t===null&&Ol(e.stateNode.containerInfo),Dt(e),null;case 10:return Tm(e.type._context),Dt(e),null;case 17:return on(e.type)&&Ah(),Dt(e),null;case 19:if(Oe(He),s=e.memoizedState,s===null)return Dt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Ba(s,!1);else{if(ht!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Dh(t),o!==null){for(e.flags|=128,Ba(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return De(He,He.current&1|2),e.child}t=t.sibling}s.tail!==null&&rt()>Ko&&(e.flags|=128,r=!0,Ba(s,!1),e.lanes=4194304)}else{if(!r)if(t=Dh(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ba(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!je)return Dt(e),null}else 2*rt()-s.renderingStartTime>Ko&&n!==1073741824&&(e.flags|=128,r=!0,Ba(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=rt(),e.sibling=null,n=He.current,De(He,r?n&1|2:n&1),e):(Dt(e),null);case 22:case 23:return Um(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?dn&1073741824&&(Dt(e),e.subtreeFlags&6&&(e.flags|=8192)):Dt(e),null;case 24:return null;case 25:return null}throw Error(Y(156,e.tag))}function GI(t,e){switch(wm(e),e.tag){case 1:return on(e.type)&&Ah(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return $o(),Oe(sn),Oe(Vt),Rm(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Pm(e),null;case 13:if(Oe(He),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Y(340));Ho()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Oe(He),null;case 4:return $o(),null;case 10:return Tm(e.type._context),null;case 22:case 23:return Um(),null;case 24:return null;default:return null}}var hu=!1,Ot=!1,QI=typeof WeakSet=="function"?WeakSet:Set,te=null;function So(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ye(t,e,r)}else n.current=null}function Xp(t,e,n){try{n()}catch(r){Ye(t,e,r)}}var c1=!1;function YI(t,e){if(Fp=Eh,t=r4(),_m(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=t,f=null;t:for(;;){for(var p;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(p=d.firstChild)!==null;)f=d,d=p;for(;;){if(d===t)break t;if(f===n&&++c===i&&(a=o),f===s&&++u===r&&(l=o),(p=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Mp={focusedElem:t,selectionRange:n},Eh=!1,te=e;te!==null;)if(e=te,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,te=t;else for(;te!==null;){e=te;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var v=m.memoizedProps,E=m.memoizedState,_=e.stateNode,x=_.getSnapshotBeforeUpdate(e.elementType===e.type?v:Fn(e.type,v),E);_.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Y(163))}}catch(A){Ye(e,e.return,A)}if(t=e.sibling,t!==null){t.return=e.return,te=t;break}te=e.return}return m=c1,c1=!1,m}function pl(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Xp(e,n,s)}i=i.next}while(i!==r)}}function Cd(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Jp(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Z4(t){var e=t.alternate;e!==null&&(t.alternate=null,Z4(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Yn],delete e[Ll],delete e[Lp],delete e[DI],delete e[NI])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function eb(t){return t.tag===5||t.tag===3||t.tag===4}function u1(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||eb(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Zp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ch));else if(r!==4&&(t=t.child,t!==null))for(Zp(t,e,n),t=t.sibling;t!==null;)Zp(t,e,n),t=t.sibling}function eg(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(eg(t,e,n),t=t.sibling;t!==null;)eg(t,e,n),t=t.sibling}var wt=null,Mn=!1;function ni(t,e,n){for(n=n.child;n!==null;)tb(t,e,n),n=n.sibling}function tb(t,e,n){if(Zn&&typeof Zn.onCommitFiberUnmount=="function")try{Zn.onCommitFiberUnmount(md,n)}catch{}switch(n.tag){case 5:Ot||So(n,e);case 6:var r=wt,i=Mn;wt=null,ni(t,e,n),wt=r,Mn=i,wt!==null&&(Mn?(t=wt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):wt.removeChild(n.stateNode));break;case 18:wt!==null&&(Mn?(t=wt,n=n.stateNode,t.nodeType===8?Kf(t.parentNode,n):t.nodeType===1&&Kf(t,n),Nl(t)):Kf(wt,n.stateNode));break;case 4:r=wt,i=Mn,wt=n.stateNode.containerInfo,Mn=!0,ni(t,e,n),wt=r,Mn=i;break;case 0:case 11:case 14:case 15:if(!Ot&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Xp(n,e,o),i=i.next}while(i!==r)}ni(t,e,n);break;case 1:if(!Ot&&(So(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ye(n,e,a)}ni(t,e,n);break;case 21:ni(t,e,n);break;case 22:n.mode&1?(Ot=(r=Ot)||n.memoizedState!==null,ni(t,e,n),Ot=r):ni(t,e,n);break;default:ni(t,e,n)}}function h1(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new QI),e.forEach(function(r){var i=s8.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Nn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:wt=a.stateNode,Mn=!1;break e;case 3:wt=a.stateNode.containerInfo,Mn=!0;break e;case 4:wt=a.stateNode.containerInfo,Mn=!0;break e}a=a.return}if(wt===null)throw Error(Y(160));tb(s,o,i),wt=null,Mn=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Ye(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)nb(e,t),e=e.sibling}function nb(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Nn(e,t),qn(t),r&4){try{pl(3,t,t.return),Cd(3,t)}catch(v){Ye(t,t.return,v)}try{pl(5,t,t.return)}catch(v){Ye(t,t.return,v)}}break;case 1:Nn(e,t),qn(t),r&512&&n!==null&&So(n,n.return);break;case 5:if(Nn(e,t),qn(t),r&512&&n!==null&&So(n,n.return),t.flags&32){var i=t.stateNode;try{kl(i,"")}catch(v){Ye(t,t.return,v)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&Cw(i,s),Cp(a,o);var c=Cp(a,s);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];u==="style"?kw(i,d):u==="dangerouslySetInnerHTML"?Sw(i,d):u==="children"?kl(i,d):am(i,u,d,c)}switch(a){case"input":yp(i,s);break;case"textarea":Aw(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?Po(i,!!s.multiple,p,!1):f!==!!s.multiple&&(s.defaultValue!=null?Po(i,!!s.multiple,s.defaultValue,!0):Po(i,!!s.multiple,s.multiple?[]:"",!1))}i[Ll]=s}catch(v){Ye(t,t.return,v)}}break;case 6:if(Nn(e,t),qn(t),r&4){if(t.stateNode===null)throw Error(Y(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(v){Ye(t,t.return,v)}}break;case 3:if(Nn(e,t),qn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Nl(e.containerInfo)}catch(v){Ye(t,t.return,v)}break;case 4:Nn(e,t),qn(t);break;case 13:Nn(e,t),qn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Vm=rt())),r&4&&h1(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(Ot=(c=Ot)||u,Nn(e,t),Ot=c):Nn(e,t),qn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(te=t,u=t.child;u!==null;){for(d=te=u;te!==null;){switch(f=te,p=f.child,f.tag){case 0:case 11:case 14:case 15:pl(4,f,f.return);break;case 1:So(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(v){Ye(r,n,v)}}break;case 5:So(f,f.return);break;case 22:if(f.memoizedState!==null){f1(d);continue}}p!==null?(p.return=f,te=p):f1(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Iw("display",o))}catch(v){Ye(t,t.return,v)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(v){Ye(t,t.return,v)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Nn(e,t),qn(t),r&4&&h1(t);break;case 21:break;default:Nn(e,t),qn(t)}}function qn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(eb(n)){var r=n;break e}n=n.return}throw Error(Y(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(kl(i,""),r.flags&=-33);var s=u1(t);eg(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=u1(t);Zp(t,a,o);break;default:throw Error(Y(161))}}catch(l){Ye(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function XI(t,e,n){te=t,rb(t)}function rb(t,e,n){for(var r=(t.mode&1)!==0;te!==null;){var i=te,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||hu;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Ot;a=hu;var c=Ot;if(hu=o,(Ot=l)&&!c)for(te=i;te!==null;)o=te,l=o.child,o.tag===22&&o.memoizedState!==null?p1(i):l!==null?(l.return=o,te=l):p1(i);for(;s!==null;)te=s,rb(s),s=s.sibling;te=i,hu=a,Ot=c}d1(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,te=s):d1(t)}}function d1(t){for(;te!==null;){var e=te;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ot||Cd(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ot)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Fn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Yy(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Yy(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&Nl(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Y(163))}Ot||e.flags&512&&Jp(e)}catch(f){Ye(e,e.return,f)}}if(e===t){te=null;break}if(n=e.sibling,n!==null){n.return=e.return,te=n;break}te=e.return}}function f1(t){for(;te!==null;){var e=te;if(e===t){te=null;break}var n=e.sibling;if(n!==null){n.return=e.return,te=n;break}te=e.return}}function p1(t){for(;te!==null;){var e=te;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Cd(4,e)}catch(l){Ye(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Ye(e,i,l)}}var s=e.return;try{Jp(e)}catch(l){Ye(e,s,l)}break;case 5:var o=e.return;try{Jp(e)}catch(l){Ye(e,o,l)}}}catch(l){Ye(e,e.return,l)}if(e===t){te=null;break}var a=e.sibling;if(a!==null){a.return=e.return,te=a;break}te=e.return}}var JI=Math.ceil,Mh=$r.ReactCurrentDispatcher,Lm=$r.ReactCurrentOwner,Tn=$r.ReactCurrentBatchConfig,_e=0,xt=null,at=null,At=0,dn=0,Io=Ki(0),ht=0,Wl=null,Rs=0,Ad=0,jm=0,gl=null,en=null,Vm=0,Ko=1/0,yr=null,Oh=!1,tg=null,Ii=null,du=!1,mi=null,Bh=0,ml=0,ng=null,qu=-1,Ku=0;function Kt(){return _e&6?rt():qu!==-1?qu:qu=rt()}function ki(t){return t.mode&1?_e&2&&At!==0?At&-At:MI.transition!==null?(Ku===0&&(Ku=zw()),Ku):(t=Ae,t!==0||(t=window.event,t=t===void 0?16:Gw(t.type)),t):1}function Vn(t,e,n,r){if(50<ml)throw ml=0,ng=null,Error(Y(185));dc(t,n,r),(!(_e&2)||t!==xt)&&(t===xt&&(!(_e&2)&&(Ad|=n),ht===4&&ci(t,At)),an(t,r),n===1&&_e===0&&!(e.mode&1)&&(Ko=rt()+500,Ed&&Gi()))}function an(t,e){var n=t.callbackNode;M6(t,e);var r=_h(t,t===xt?At:0);if(r===0)n!==null&&by(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&by(n),e===1)t.tag===0?FI(g1.bind(null,t)):f4(g1.bind(null,t)),PI(function(){!(_e&6)&&Gi()}),n=null;else{switch(Uw(r)){case 1:n=dm;break;case 4:n=jw;break;case 16:n=yh;break;case 536870912:n=Vw;break;default:n=yh}n=hb(n,ib.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function ib(t,e){if(qu=-1,Ku=0,_e&6)throw Error(Y(327));var n=t.callbackNode;if(Mo()&&t.callbackNode!==n)return null;var r=_h(t,t===xt?At:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Lh(t,r);else{e=r;var i=_e;_e|=2;var s=ob();(xt!==t||At!==e)&&(yr=null,Ko=rt()+500,ws(t,e));do try{t8();break}catch(a){sb(t,a)}while(!0);Am(),Mh.current=s,_e=i,at!==null?e=0:(xt=null,At=0,e=ht)}if(e!==0){if(e===2&&(i=kp(t),i!==0&&(r=i,e=rg(t,i))),e===1)throw n=Wl,ws(t,0),ci(t,r),an(t,rt()),n;if(e===6)ci(t,r);else{if(i=t.current.alternate,!(r&30)&&!ZI(i)&&(e=Lh(t,r),e===2&&(s=kp(t),s!==0&&(r=s,e=rg(t,s))),e===1))throw n=Wl,ws(t,0),ci(t,r),an(t,rt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Y(345));case 2:ds(t,en,yr);break;case 3:if(ci(t,r),(r&130023424)===r&&(e=Vm+500-rt(),10<e)){if(_h(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Kt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Bp(ds.bind(null,t,en,yr),e);break}ds(t,en,yr);break;case 4:if(ci(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-jn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=rt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*JI(r/1960))-r,10<r){t.timeoutHandle=Bp(ds.bind(null,t,en,yr),r);break}ds(t,en,yr);break;case 5:ds(t,en,yr);break;default:throw Error(Y(329))}}}return an(t,rt()),t.callbackNode===n?ib.bind(null,t):null}function rg(t,e){var n=gl;return t.current.memoizedState.isDehydrated&&(ws(t,e).flags|=256),t=Lh(t,e),t!==2&&(e=en,en=n,e!==null&&ig(e)),t}function ig(t){en===null?en=t:en.push.apply(en,t)}function ZI(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Un(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ci(t,e){for(e&=~jm,e&=~Ad,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-jn(e),r=1<<n;t[n]=-1,e&=~r}}function g1(t){if(_e&6)throw Error(Y(327));Mo();var e=_h(t,0);if(!(e&1))return an(t,rt()),null;var n=Lh(t,e);if(t.tag!==0&&n===2){var r=kp(t);r!==0&&(e=r,n=rg(t,r))}if(n===1)throw n=Wl,ws(t,0),ci(t,e),an(t,rt()),n;if(n===6)throw Error(Y(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ds(t,en,yr),an(t,rt()),null}function zm(t,e){var n=_e;_e|=1;try{return t(e)}finally{_e=n,_e===0&&(Ko=rt()+500,Ed&&Gi())}}function Ds(t){mi!==null&&mi.tag===0&&!(_e&6)&&Mo();var e=_e;_e|=1;var n=Tn.transition,r=Ae;try{if(Tn.transition=null,Ae=1,t)return t()}finally{Ae=r,Tn.transition=n,_e=e,!(_e&6)&&Gi()}}function Um(){dn=Io.current,Oe(Io)}function ws(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,kI(n)),at!==null)for(n=at.return;n!==null;){var r=n;switch(wm(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ah();break;case 3:$o(),Oe(sn),Oe(Vt),Rm();break;case 5:Pm(r);break;case 4:$o();break;case 13:Oe(He);break;case 19:Oe(He);break;case 10:Tm(r.type._context);break;case 22:case 23:Um()}n=n.return}if(xt=t,at=t=Pi(t.current,null),At=dn=e,ht=0,Wl=null,jm=Ad=Rs=0,en=gl=null,xs!==null){for(e=0;e<xs.length;e++)if(n=xs[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}xs=null}return t}function sb(t,e){do{var n=at;try{if(Am(),Hu.current=Fh,Nh){for(var r=We.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Nh=!1}if(Ps=0,gt=ut=We=null,fl=!1,zl=0,Lm.current=null,n===null||n.return===null){ht=1,Wl=e,at=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=At,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=n1(o);if(p!==null){p.flags&=-257,r1(p,o,a,s,e),p.mode&1&&t1(s,c,e),e=p,l=c;var m=e.updateQueue;if(m===null){var v=new Set;v.add(l),e.updateQueue=v}else m.add(l);break e}else{if(!(e&1)){t1(s,c,e),Hm();break e}l=Error(Y(426))}}else if(je&&a.mode&1){var E=n1(o);if(E!==null){!(E.flags&65536)&&(E.flags|=256),r1(E,o,a,s,e),bm(qo(l,a));break e}}s=l=qo(l,a),ht!==4&&(ht=2),gl===null?gl=[s]:gl.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var _=U4(s,l,e);Qy(s,_);break e;case 1:a=l;var x=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof x.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Ii===null||!Ii.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var A=H4(s,a,e);Qy(s,A);break e}}s=s.return}while(s!==null)}lb(n)}catch(P){e=P,at===n&&n!==null&&(at=n=n.return);continue}break}while(!0)}function ob(){var t=Mh.current;return Mh.current=Fh,t===null?Fh:t}function Hm(){(ht===0||ht===3||ht===2)&&(ht=4),xt===null||!(Rs&268435455)&&!(Ad&268435455)||ci(xt,At)}function Lh(t,e){var n=_e;_e|=2;var r=ob();(xt!==t||At!==e)&&(yr=null,ws(t,e));do try{e8();break}catch(i){sb(t,i)}while(!0);if(Am(),_e=n,Mh.current=r,at!==null)throw Error(Y(261));return xt=null,At=0,ht}function e8(){for(;at!==null;)ab(at)}function t8(){for(;at!==null&&!T6();)ab(at)}function ab(t){var e=ub(t.alternate,t,dn);t.memoizedProps=t.pendingProps,e===null?lb(t):at=e,Lm.current=null}function lb(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=GI(n,e),n!==null){n.flags&=32767,at=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ht=6,at=null;return}}else if(n=KI(n,e,dn),n!==null){at=n;return}if(e=e.sibling,e!==null){at=e;return}at=e=t}while(e!==null);ht===0&&(ht=5)}function ds(t,e,n){var r=Ae,i=Tn.transition;try{Tn.transition=null,Ae=1,n8(t,e,n,r)}finally{Tn.transition=i,Ae=r}return null}function n8(t,e,n,r){do Mo();while(mi!==null);if(_e&6)throw Error(Y(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Y(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(O6(t,s),t===xt&&(at=xt=null,At=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||du||(du=!0,hb(yh,function(){return Mo(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Tn.transition,Tn.transition=null;var o=Ae;Ae=1;var a=_e;_e|=4,Lm.current=null,YI(t,n),nb(n,t),wI(Mp),Eh=!!Fp,Mp=Fp=null,t.current=n,XI(n),S6(),_e=a,Ae=o,Tn.transition=s}else t.current=n;if(du&&(du=!1,mi=t,Bh=i),s=t.pendingLanes,s===0&&(Ii=null),P6(n.stateNode),an(t,rt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Oh)throw Oh=!1,t=tg,tg=null,t;return Bh&1&&t.tag!==0&&Mo(),s=t.pendingLanes,s&1?t===ng?ml++:(ml=0,ng=t):ml=0,Gi(),null}function Mo(){if(mi!==null){var t=Uw(Bh),e=Tn.transition,n=Ae;try{if(Tn.transition=null,Ae=16>t?16:t,mi===null)var r=!1;else{if(t=mi,mi=null,Bh=0,_e&6)throw Error(Y(331));var i=_e;for(_e|=4,te=t.current;te!==null;){var s=te,o=s.child;if(te.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(te=c;te!==null;){var u=te;switch(u.tag){case 0:case 11:case 15:pl(8,u,s)}var d=u.child;if(d!==null)d.return=u,te=d;else for(;te!==null;){u=te;var f=u.sibling,p=u.return;if(Z4(u),u===c){te=null;break}if(f!==null){f.return=p,te=f;break}te=p}}}var m=s.alternate;if(m!==null){var v=m.child;if(v!==null){m.child=null;do{var E=v.sibling;v.sibling=null,v=E}while(v!==null)}}te=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,te=o;else e:for(;te!==null;){if(s=te,s.flags&2048)switch(s.tag){case 0:case 11:case 15:pl(9,s,s.return)}var _=s.sibling;if(_!==null){_.return=s.return,te=_;break e}te=s.return}}var x=t.current;for(te=x;te!==null;){o=te;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,te=w;else e:for(o=x;te!==null;){if(a=te,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Cd(9,a)}}catch(P){Ye(a,a.return,P)}if(a===o){te=null;break e}var A=a.sibling;if(A!==null){A.return=a.return,te=A;break e}te=a.return}}if(_e=i,Gi(),Zn&&typeof Zn.onPostCommitFiberRoot=="function")try{Zn.onPostCommitFiberRoot(md,t)}catch{}r=!0}return r}finally{Ae=n,Tn.transition=e}}return!1}function m1(t,e,n){e=qo(n,e),e=U4(t,e,1),t=Si(t,e,1),e=Kt(),t!==null&&(dc(t,1,e),an(t,e))}function Ye(t,e,n){if(t.tag===3)m1(t,t,n);else for(;e!==null;){if(e.tag===3){m1(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ii===null||!Ii.has(r))){t=qo(n,t),t=H4(e,t,1),e=Si(e,t,1),t=Kt(),e!==null&&(dc(e,1,t),an(e,t));break}}e=e.return}}function r8(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Kt(),t.pingedLanes|=t.suspendedLanes&n,xt===t&&(At&n)===n&&(ht===4||ht===3&&(At&130023424)===At&&500>rt()-Vm?ws(t,0):jm|=n),an(t,e)}function cb(t,e){e===0&&(t.mode&1?(e=nu,nu<<=1,!(nu&130023424)&&(nu=4194304)):e=1);var n=Kt();t=Lr(t,e),t!==null&&(dc(t,e,n),an(t,n))}function i8(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),cb(t,n)}function s8(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Y(314))}r!==null&&r.delete(e),cb(t,n)}var ub;ub=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||sn.current)rn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return rn=!1,qI(t,e,n);rn=!!(t.flags&131072)}else rn=!1,je&&e.flags&1048576&&p4(e,Ih,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;$u(t,e),t=e.pendingProps;var i=Uo(e,Vt.current);Fo(e,n),i=Nm(null,e,r,t,i,n);var s=Fm();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,on(r)?(s=!0,Th(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Im(e),i.updater=bd,e.stateNode=i,i._reactInternals=e,Wp(e,r,t,n),e=Kp(null,e,r,!0,s,n)):(e.tag=0,je&&s&&Em(e),$t(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch($u(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=a8(r),t=Fn(r,t),i){case 0:e=qp(null,e,r,t,n);break e;case 1:e=o1(null,e,r,t,n);break e;case 11:e=i1(null,e,r,t,n);break e;case 14:e=s1(null,e,r,Fn(r.type,t),n);break e}throw Error(Y(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Fn(r,i),qp(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Fn(r,i),o1(t,e,r,i,n);case 3:e:{if(K4(e),t===null)throw Error(Y(387));r=e.pendingProps,s=e.memoizedState,i=s.element,_4(t,e),Rh(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=qo(Error(Y(423)),e),e=a1(t,e,r,n,i);break e}else if(r!==i){i=qo(Error(Y(424)),e),e=a1(t,e,r,n,i);break e}else for(pn=Ti(e.stateNode.containerInfo.firstChild),mn=e,je=!0,On=null,n=v4(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ho(),r===i){e=jr(t,e,n);break e}$t(t,e,r,n)}e=e.child}return e;case 5:return E4(e),t===null&&zp(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Op(r,i)?o=null:s!==null&&Op(r,s)&&(e.flags|=32),q4(t,e),$t(t,e,o,n),e.child;case 6:return t===null&&zp(e),null;case 13:return G4(t,e,n);case 4:return km(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Wo(e,null,r,n):$t(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Fn(r,i),i1(t,e,r,i,n);case 7:return $t(t,e,e.pendingProps,n),e.child;case 8:return $t(t,e,e.pendingProps.children,n),e.child;case 12:return $t(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,De(kh,r._currentValue),r._currentValue=o,s!==null)if(Un(s.value,o)){if(s.children===i.children&&!sn.current){e=jr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Dr(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Up(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Y(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Up(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}$t(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Fo(e,n),i=kn(i),r=r(i),e.flags|=1,$t(t,e,r,n),e.child;case 14:return r=e.type,i=Fn(r,e.pendingProps),i=Fn(r.type,i),s1(t,e,r,i,n);case 15:return W4(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Fn(r,i),$u(t,e),e.tag=1,on(r)?(t=!0,Th(e)):t=!1,Fo(e,n),z4(e,r,i),Wp(e,r,i,n),Kp(null,e,r,!0,t,n);case 19:return Q4(t,e,n);case 22:return $4(t,e,n)}throw Error(Y(156,e.tag))};function hb(t,e){return Lw(t,e)}function o8(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function An(t,e,n,r){return new o8(t,e,n,r)}function Wm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function a8(t){if(typeof t=="function")return Wm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===cm)return 11;if(t===um)return 14}return 2}function Pi(t,e){var n=t.alternate;return n===null?(n=An(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Gu(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Wm(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case vo:return bs(n.children,i,s,e);case lm:o=8,i|=8;break;case pp:return t=An(12,n,e,i|2),t.elementType=pp,t.lanes=s,t;case gp:return t=An(13,n,e,i),t.elementType=gp,t.lanes=s,t;case mp:return t=An(19,n,e,i),t.elementType=mp,t.lanes=s,t;case Ew:return Td(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case yw:o=10;break e;case _w:o=9;break e;case cm:o=11;break e;case um:o=14;break e;case oi:o=16,r=null;break e}throw Error(Y(130,t==null?t:typeof t,""))}return e=An(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function bs(t,e,n,r){return t=An(7,t,r,e),t.lanes=n,t}function Td(t,e,n,r){return t=An(22,t,r,e),t.elementType=Ew,t.lanes=n,t.stateNode={isHidden:!1},t}function t0(t,e,n){return t=An(6,t,null,e),t.lanes=n,t}function n0(t,e,n){return e=An(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function l8(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Of(0),this.expirationTimes=Of(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Of(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function $m(t,e,n,r,i,s,o,a,l){return t=new l8(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=An(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Im(s),t}function c8(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:xo,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function db(t){if(!t)return Li;t=t._reactInternals;e:{if(Ws(t)!==t||t.tag!==1)throw Error(Y(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(on(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Y(171))}if(t.tag===1){var n=t.type;if(on(n))return d4(t,n,e)}return e}function fb(t,e,n,r,i,s,o,a,l){return t=$m(n,r,!0,t,i,s,o,a,l),t.context=db(null),n=t.current,r=Kt(),i=ki(n),s=Dr(r,i),s.callback=e??null,Si(n,s,i),t.current.lanes=i,dc(t,i,r),an(t,r),t}function Sd(t,e,n,r){var i=e.current,s=Kt(),o=ki(i);return n=db(n),e.context===null?e.context=n:e.pendingContext=n,e=Dr(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Si(i,e,o),t!==null&&(Vn(t,i,o,s),Uu(t,i,o)),o}function jh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function x1(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function qm(t,e){x1(t,e),(t=t.alternate)&&x1(t,e)}function u8(){return null}var pb=typeof reportError=="function"?reportError:function(t){console.error(t)};function Km(t){this._internalRoot=t}Id.prototype.render=Km.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Y(409));Sd(t,e,null,null)};Id.prototype.unmount=Km.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ds(function(){Sd(null,t,null,null)}),e[Br]=null}};function Id(t){this._internalRoot=t}Id.prototype.unstable_scheduleHydration=function(t){if(t){var e=$w();t={blockedOn:null,target:t,priority:e};for(var n=0;n<li.length&&e!==0&&e<li[n].priority;n++);li.splice(n,0,t),n===0&&Kw(t)}};function Gm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function kd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function v1(){}function h8(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=jh(o);s.call(c)}}var o=fb(e,r,t,0,null,!1,!1,"",v1);return t._reactRootContainer=o,t[Br]=o.current,Ol(t.nodeType===8?t.parentNode:t),Ds(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=jh(l);a.call(c)}}var l=$m(t,0,!1,null,null,!1,!1,"",v1);return t._reactRootContainer=l,t[Br]=l.current,Ol(t.nodeType===8?t.parentNode:t),Ds(function(){Sd(e,l,n,r)}),l}function Pd(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=jh(o);a.call(l)}}Sd(e,o,t,i)}else o=h8(n,e,t,i,r);return jh(o)}Hw=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ga(e.pendingLanes);n!==0&&(fm(e,n|1),an(e,rt()),!(_e&6)&&(Ko=rt()+500,Gi()))}break;case 13:Ds(function(){var r=Lr(t,1);if(r!==null){var i=Kt();Vn(r,t,1,i)}}),qm(t,1)}};pm=function(t){if(t.tag===13){var e=Lr(t,134217728);if(e!==null){var n=Kt();Vn(e,t,134217728,n)}qm(t,134217728)}};Ww=function(t){if(t.tag===13){var e=ki(t),n=Lr(t,e);if(n!==null){var r=Kt();Vn(n,t,e,r)}qm(t,e)}};$w=function(){return Ae};qw=function(t,e){var n=Ae;try{return Ae=t,e()}finally{Ae=n}};Tp=function(t,e,n){switch(e){case"input":if(yp(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=_d(r);if(!i)throw Error(Y(90));bw(r),yp(r,i)}}}break;case"textarea":Aw(t,n);break;case"select":e=n.value,e!=null&&Po(t,!!n.multiple,e,!1)}};Dw=zm;Nw=Ds;var d8={usingClientEntryPoint:!1,Events:[pc,wo,_d,Pw,Rw,zm]},La={findFiberByHostInstance:ms,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},f8={bundleType:La.bundleType,version:La.version,rendererPackageName:La.rendererPackageName,rendererConfig:La.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$r.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Ow(t),t===null?null:t.stateNode},findFiberByHostInstance:La.findFiberByHostInstance||u8,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fu.isDisabled&&fu.supportsFiber)try{md=fu.inject(f8),Zn=fu}catch{}}vn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=d8;vn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Gm(e))throw Error(Y(200));return c8(t,e,null,n)};vn.createRoot=function(t,e){if(!Gm(t))throw Error(Y(299));var n=!1,r="",i=pb;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=$m(t,1,!1,null,null,n,!1,r,i),t[Br]=e.current,Ol(t.nodeType===8?t.parentNode:t),new Km(e)};vn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Y(188)):(t=Object.keys(t).join(","),Error(Y(268,t)));return t=Ow(e),t=t===null?null:t.stateNode,t};vn.flushSync=function(t){return Ds(t)};vn.hydrate=function(t,e,n){if(!kd(e))throw Error(Y(200));return Pd(null,t,e,!0,n)};vn.hydrateRoot=function(t,e,n){if(!Gm(t))throw Error(Y(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=pb;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=fb(e,null,t,1,n??null,i,!1,s,o),t[Br]=e.current,Ol(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Id(e)};vn.render=function(t,e,n){if(!kd(e))throw Error(Y(200));return Pd(null,t,e,!1,n)};vn.unmountComponentAtNode=function(t){if(!kd(t))throw Error(Y(40));return t._reactRootContainer?(Ds(function(){Pd(null,null,t,!1,function(){t._reactRootContainer=null,t[Br]=null})}),!0):!1};vn.unstable_batchedUpdates=zm;vn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!kd(n))throw Error(Y(200));if(t==null||t._reactInternals===void 0)throw Error(Y(38));return Pd(t,e,n,!1,r)};vn.version="18.3.1-next-f1338f8080-20240426";function gb(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(gb)}catch(t){console.error(t)}}gb(),gw.exports=vn;var p8=gw.exports,y1=p8;dp.createRoot=y1.createRoot,dp.hydrateRoot=y1.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $l(){return $l=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$l.apply(this,arguments)}var xi;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(xi||(xi={}));const _1="popstate";function g8(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return sg("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Vh(i)}return x8(e,n,null,t)}function $e(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function mb(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function m8(){return Math.random().toString(36).substr(2,8)}function E1(t,e){return{usr:t.state,key:t.key,idx:e}}function sg(t,e,n,r){return n===void 0&&(n=null),$l({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?la(e):e,{state:n,key:e&&e.key||r||m8()})}function Vh(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function la(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function x8(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=xi.Pop,l=null,c=u();c==null&&(c=0,o.replaceState($l({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function d(){a=xi.Pop;let E=u(),_=E==null?null:E-c;c=E,l&&l({action:a,location:v.location,delta:_})}function f(E,_){a=xi.Push;let x=sg(v.location,E,_);c=u()+1;let w=E1(x,c),A=v.createHref(x);try{o.pushState(w,"",A)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;i.location.assign(A)}s&&l&&l({action:a,location:v.location,delta:1})}function p(E,_){a=xi.Replace;let x=sg(v.location,E,_);c=u();let w=E1(x,c),A=v.createHref(x);o.replaceState(w,"",A),s&&l&&l({action:a,location:v.location,delta:0})}function m(E){let _=i.location.origin!=="null"?i.location.origin:i.location.href,x=typeof E=="string"?E:Vh(E);return x=x.replace(/ $/,"%20"),$e(_,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,_)}let v={get action(){return a},get location(){return t(i,o)},listen(E){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(_1,d),l=E,()=>{i.removeEventListener(_1,d),l=null}},createHref(E){return e(i,E)},createURL:m,encodeLocation(E){let _=m(E);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:f,replace:p,go(E){return o.go(E)}};return v}var w1;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(w1||(w1={}));function v8(t,e,n){return n===void 0&&(n="/"),y8(t,e,n)}function y8(t,e,n,r){let i=typeof e=="string"?la(e):e,s=Go(i.pathname||"/",n);if(s==null)return null;let o=xb(t);_8(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=R8(s);a=k8(o[l],c)}return a}function xb(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&($e(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Ri([r,l.relativePath]),u=n.concat(l);s.children&&s.children.length>0&&($e(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),xb(s.children,e,u,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:S8(c,s.index),routesMeta:u})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of vb(s.path))i(s,o,l)}),e}function vb(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=vb(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function _8(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:I8(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const E8=/^:[\w-]+$/,w8=3,b8=2,C8=1,A8=10,T8=-2,b1=t=>t==="*";function S8(t,e){let n=t.split("/"),r=n.length;return n.some(b1)&&(r+=T8),e&&(r+=b8),n.filter(i=>!b1(i)).reduce((i,s)=>i+(E8.test(s)?w8:s===""?C8:A8),r)}function I8(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function k8(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,u=s==="/"?e:e.slice(s.length)||"/",d=og({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),f=l.route;if(!d)return null;Object.assign(i,d.params),o.push({params:i,pathname:Ri([s,d.pathname]),pathnameBase:M8(Ri([s,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(s=Ri([s,d.pathnameBase]))}return o}function og(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=P8(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,u,d)=>{let{paramName:f,isOptional:p}=u;if(f==="*"){let v=a[d]||"";o=s.slice(0,s.length-v.length).replace(/(.)\/+$/,"$1")}const m=a[d];return p&&!m?c[f]=void 0:c[f]=(m||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function P8(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),mb(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function R8(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return mb(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Go(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function D8(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?la(t):t;return{pathname:n?n.startsWith("/")?n:N8(n,e):e,search:O8(r),hash:B8(i)}}function N8(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function r0(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function F8(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Qm(t,e){let n=F8(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Ym(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=la(t):(i=$l({},t),$e(!i.pathname||!i.pathname.includes("?"),r0("?","pathname","search",i)),$e(!i.pathname||!i.pathname.includes("#"),r0("#","pathname","hash",i)),$e(!i.search||!i.search.includes("#"),r0("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;i.pathname=f.join("/")}a=d>=0?e[d]:"/"}let l=D8(i,a),c=o&&o!=="/"&&o.endsWith("/"),u=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const Ri=t=>t.join("/").replace(/\/\/+/g,"/"),M8=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),O8=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,B8=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function L8(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const yb=["post","put","patch","delete"];new Set(yb);const j8=["get",...yb];new Set(j8);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ql(){return ql=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ql.apply(this,arguments)}const Rd=M.createContext(null),_b=M.createContext(null),qr=M.createContext(null),Dd=M.createContext(null),Kr=M.createContext({outlet:null,matches:[],isDataRoute:!1}),Eb=M.createContext(null);function V8(t,e){let{relative:n}=e===void 0?{}:e;ca()||$e(!1);let{basename:r,navigator:i}=M.useContext(qr),{hash:s,pathname:o,search:a}=Nd(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Ri([r,o])),i.createHref({pathname:l,search:a,hash:s})}function ca(){return M.useContext(Dd)!=null}function ua(){return ca()||$e(!1),M.useContext(Dd).location}function wb(t){M.useContext(qr).static||M.useLayoutEffect(t)}function Gr(){let{isDataRoute:t}=M.useContext(Kr);return t?ek():z8()}function z8(){ca()||$e(!1);let t=M.useContext(Rd),{basename:e,future:n,navigator:r}=M.useContext(qr),{matches:i}=M.useContext(Kr),{pathname:s}=ua(),o=JSON.stringify(Qm(i,n.v7_relativeSplatPath)),a=M.useRef(!1);return wb(()=>{a.current=!0}),M.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let d=Ym(c,JSON.parse(o),s,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Ri([e,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[e,r,o,s,t])}function U8(){let{matches:t}=M.useContext(Kr),e=t[t.length-1];return e?e.params:{}}function Nd(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=M.useContext(qr),{matches:i}=M.useContext(Kr),{pathname:s}=ua(),o=JSON.stringify(Qm(i,r.v7_relativeSplatPath));return M.useMemo(()=>Ym(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function H8(t,e){return W8(t,e)}function W8(t,e,n,r){ca()||$e(!1);let{navigator:i,static:s}=M.useContext(qr),{matches:o}=M.useContext(Kr),a=o[o.length-1],l=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let u=ua(),d;if(e){var f;let _=typeof e=="string"?la(e):e;c==="/"||(f=_.pathname)!=null&&f.startsWith(c)||$e(!1),d=_}else d=u;let p=d.pathname||"/",m=p;if(c!=="/"){let _=c.replace(/^\//,"").split("/");m="/"+p.replace(/^\//,"").split("/").slice(_.length).join("/")}let v=v8(t,{pathname:m}),E=Q8(v&&v.map(_=>Object.assign({},_,{params:Object.assign({},l,_.params),pathname:Ri([c,i.encodeLocation?i.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?c:Ri([c,i.encodeLocation?i.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),o,n,r);return e&&E?M.createElement(Dd.Provider,{value:{location:ql({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:xi.Pop}},E):E}function $8(){let t=Z8(),e=L8(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},e),n?M.createElement("pre",{style:i},n):null,null)}const q8=M.createElement($8,null);class K8 extends M.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?M.createElement(Kr.Provider,{value:this.props.routeContext},M.createElement(Eb.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function G8(t){let{routeContext:e,match:n,children:r}=t,i=M.useContext(Rd);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),M.createElement(Kr.Provider,{value:e},r)}function Q8(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let u=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);u>=0||$e(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let d=o[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=u),d.route.id){let{loaderData:f,errors:p}=n,m=d.route.loader&&f[d.route.id]===void 0&&(!p||p[d.route.id]===void 0);if(d.route.lazy||m){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,d,f)=>{let p,m=!1,v=null,E=null;n&&(p=a&&d.route.id?a[d.route.id]:void 0,v=d.route.errorElement||q8,l&&(c<0&&f===0?(tk("route-fallback"),m=!0,E=null):c===f&&(m=!0,E=d.route.hydrateFallbackElement||null)));let _=e.concat(o.slice(0,f+1)),x=()=>{let w;return p?w=v:m?w=E:d.route.Component?w=M.createElement(d.route.Component,null):d.route.element?w=d.route.element:w=u,M.createElement(G8,{match:d,routeContext:{outlet:u,matches:_,isDataRoute:n!=null},children:w})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?M.createElement(K8,{location:n.location,revalidation:n.revalidation,component:v,error:p,children:x(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):x()},null)}var bb=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(bb||{}),Cb=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Cb||{});function Y8(t){let e=M.useContext(Rd);return e||$e(!1),e}function X8(t){let e=M.useContext(_b);return e||$e(!1),e}function J8(t){let e=M.useContext(Kr);return e||$e(!1),e}function Ab(t){let e=J8(),n=e.matches[e.matches.length-1];return n.route.id||$e(!1),n.route.id}function Z8(){var t;let e=M.useContext(Eb),n=X8(),r=Ab();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function ek(){let{router:t}=Y8(bb.UseNavigateStable),e=Ab(Cb.UseNavigateStable),n=M.useRef(!1);return wb(()=>{n.current=!0}),M.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,ql({fromRouteId:e},s)))},[t,e])}const C1={};function tk(t,e,n){C1[t]||(C1[t]=!0)}function nk(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function rk(t){let{to:e,replace:n,state:r,relative:i}=t;ca()||$e(!1);let{future:s,static:o}=M.useContext(qr),{matches:a}=M.useContext(Kr),{pathname:l}=ua(),c=Gr(),u=Ym(e,Qm(a,s.v7_relativeSplatPath),l,i==="path"),d=JSON.stringify(u);return M.useEffect(()=>c(JSON.parse(d),{replace:n,state:r,relative:i}),[c,d,i,n,r]),null}function wn(t){$e(!1)}function ik(t){let{basename:e="/",children:n=null,location:r,navigationType:i=xi.Pop,navigator:s,static:o=!1,future:a}=t;ca()&&$e(!1);let l=e.replace(/^\/*/,"/"),c=M.useMemo(()=>({basename:l,navigator:s,static:o,future:ql({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=la(r));let{pathname:u="/",search:d="",hash:f="",state:p=null,key:m="default"}=r,v=M.useMemo(()=>{let E=Go(u,l);return E==null?null:{location:{pathname:E,search:d,hash:f,state:p,key:m},navigationType:i}},[l,u,d,f,p,m,i]);return v==null?null:M.createElement(qr.Provider,{value:c},M.createElement(Dd.Provider,{children:n,value:v}))}function sk(t){let{children:e,location:n}=t;return H8(ag(e),n)}new Promise(()=>{});function ag(t,e){e===void 0&&(e=[]);let n=[];return M.Children.forEach(t,(r,i)=>{if(!M.isValidElement(r))return;let s=[...e,i];if(r.type===M.Fragment){n.push.apply(n,ag(r.props.children,s));return}r.type!==wn&&$e(!1),!r.props.index||!r.props.children||$e(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=ag(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zh(){return zh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zh.apply(this,arguments)}function Tb(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function ok(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function ak(t,e){return t.button===0&&(!e||e==="_self")&&!ok(t)}const lk=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],ck=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],uk="6";try{window.__reactRouterVersion=uk}catch{}const hk=M.createContext({isTransitioning:!1}),dk="startTransition",A1=r6[dk];function fk(t){let{basename:e,children:n,future:r,window:i}=t,s=M.useRef();s.current==null&&(s.current=g8({window:i,v5Compat:!0}));let o=s.current,[a,l]=M.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},u=M.useCallback(d=>{c&&A1?A1(()=>l(d)):l(d)},[l,c]);return M.useLayoutEffect(()=>o.listen(u),[o,u]),M.useEffect(()=>nk(r),[r]),M.createElement(ik,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const pk=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",gk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Bn=M.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:u,viewTransition:d}=e,f=Tb(e,lk),{basename:p}=M.useContext(qr),m,v=!1;if(typeof c=="string"&&gk.test(c)&&(m=c,pk))try{let w=new URL(window.location.href),A=c.startsWith("//")?new URL(w.protocol+c):new URL(c),P=Go(A.pathname,p);A.origin===w.origin&&P!=null?c=P+A.search+A.hash:v=!0}catch{}let E=V8(c,{relative:i}),_=xk(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:i,viewTransition:d});function x(w){r&&r(w),w.defaultPrevented||_(w)}return M.createElement("a",zh({},f,{href:m||E,onClick:v||s?r:x,ref:n,target:l}))}),uo=M.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:i=!1,className:s="",end:o=!1,style:a,to:l,viewTransition:c,children:u}=e,d=Tb(e,ck),f=Nd(l,{relative:d.relative}),p=ua(),m=M.useContext(_b),{navigator:v,basename:E}=M.useContext(qr),_=m!=null&&vk(f)&&c===!0,x=v.encodeLocation?v.encodeLocation(f).pathname:f.pathname,w=p.pathname,A=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;i||(w=w.toLowerCase(),A=A?A.toLowerCase():null,x=x.toLowerCase()),A&&E&&(A=Go(A,E)||A);const P=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let R=w===x||!o&&w.startsWith(x)&&w.charAt(P)==="/",C=A!=null&&(A===x||!o&&A.startsWith(x)&&A.charAt(x.length)==="/"),b={isActive:R,isPending:C,isTransitioning:_},k=R?r:void 0,S;typeof s=="function"?S=s(b):S=[s,R?"active":null,C?"pending":null,_?"transitioning":null].filter(Boolean).join(" ");let I=typeof a=="function"?a(b):a;return M.createElement(Bn,zh({},d,{"aria-current":k,className:S,ref:n,style:I,to:l,viewTransition:c}),typeof u=="function"?u(b):u)});var lg;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(lg||(lg={}));var T1;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(T1||(T1={}));function mk(t){let e=M.useContext(Rd);return e||$e(!1),e}function xk(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=Gr(),c=ua(),u=Nd(t,{relative:o});return M.useCallback(d=>{if(ak(d,n)){d.preventDefault();let f=r!==void 0?r:Vh(c)===Vh(u);l(t,{replace:f,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[c,l,u,r,i,n,t,s,o,a])}function vk(t,e){e===void 0&&(e={});let n=M.useContext(hk);n==null&&$e(!1);let{basename:r}=mk(lg.useViewTransitionState),i=Nd(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=Go(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Go(n.nextLocation.pathname,r)||n.nextLocation.pathname;return og(i.pathname,o)!=null||og(i.pathname,s)!=null}var S1={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sb=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},yk=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Ib={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,u=s>>2,d=(s&3)<<4|a>>4;let f=(a&15)<<2|c>>6,p=c&63;l||(p=64,o||(f=64)),r.push(n[u],n[d],n[f],n[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Sb(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):yk(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||d==null)throw new _k;const f=s<<2|a>>4;if(r.push(f),c!==64){const p=a<<4&240|c>>2;if(r.push(p),d!==64){const m=c<<6&192|d;r.push(m)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class _k extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ek=function(t){const e=Sb(t);return Ib.encodeByteArray(e,!0)},Uh=function(t){return Ek(t).replace(/\./g,"")},kb=function(t){try{return Ib.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wk(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bk=()=>wk().__FIREBASE_DEFAULTS__,Ck=()=>{if(typeof process>"u"||typeof S1>"u")return;const t=S1.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Ak=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&kb(t[1]);return e&&JSON.parse(e)},Fd=()=>{try{return bk()||Ck()||Ak()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Pb=t=>{var e,n;return(n=(e=Fd())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Rb=t=>{const e=Pb(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Db=()=>{var t;return(t=Fd())===null||t===void 0?void 0:t.config},Nb=t=>{var e;return(e=Fd())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tk{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fb(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Uh(JSON.stringify(n)),Uh(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Sk(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(zt())}function Ik(){var t;const e=(t=Fd())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function kk(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Pk(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Rk(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Dk(){const t=zt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Nk(){return!Ik()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Fk(){try{return typeof indexedDB=="object"}catch{return!1}}function Mk(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ok="FirebaseError";class cr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Ok,Object.setPrototypeOf(this,cr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,mc.prototype.create)}}class mc{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?Bk(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new cr(i,a,r)}}function Bk(t,e){return t.replace(Lk,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const Lk=/\{\$([^}]+)}/g;function jk(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Hh(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(I1(s)&&I1(o)){if(!Hh(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function I1(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xc(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ya(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Xa(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function Vk(t,e){const n=new zk(t,e);return n.subscribe.bind(n)}class zk{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Uk(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=i0),i.error===void 0&&(i.error=i0),i.complete===void 0&&(i.complete=i0);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Uk(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function i0(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Se(t){return t&&t._delegate?t._delegate:t}class ji{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hk{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Tk;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if($k(e))try{this.getOrInitializeService({instanceIdentifier:fs})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=fs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=fs){return this.instances.has(e)}getOptions(e=fs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Wk(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=fs){return this.component?this.component.multipleInstances?e:fs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Wk(t){return t===fs?void 0:t}function $k(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Hk(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(xe||(xe={}));const Kk={debug:xe.DEBUG,verbose:xe.VERBOSE,info:xe.INFO,warn:xe.WARN,error:xe.ERROR,silent:xe.SILENT},Gk=xe.INFO,Qk={[xe.DEBUG]:"log",[xe.VERBOSE]:"log",[xe.INFO]:"info",[xe.WARN]:"warn",[xe.ERROR]:"error"},Yk=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=Qk[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Xm{constructor(e){this.name=e,this._logLevel=Gk,this._logHandler=Yk,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in xe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Kk[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,xe.DEBUG,...e),this._logHandler(this,xe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,xe.VERBOSE,...e),this._logHandler(this,xe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,xe.INFO,...e),this._logHandler(this,xe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,xe.WARN,...e),this._logHandler(this,xe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,xe.ERROR,...e),this._logHandler(this,xe.ERROR,...e)}}const Xk=(t,e)=>e.some(n=>t instanceof n);let k1,P1;function Jk(){return k1||(k1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Zk(){return P1||(P1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Mb=new WeakMap,cg=new WeakMap,Ob=new WeakMap,s0=new WeakMap,Jm=new WeakMap;function e3(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Di(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Mb.set(n,t)}).catch(()=>{}),Jm.set(e,t),e}function t3(t){if(cg.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});cg.set(t,e)}let ug={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return cg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Ob.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Di(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function n3(t){ug=t(ug)}function r3(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(o0(this),e,...n);return Ob.set(r,e.sort?e.sort():[e]),Di(r)}:Zk().includes(t)?function(...e){return t.apply(o0(this),e),Di(Mb.get(this))}:function(...e){return Di(t.apply(o0(this),e))}}function i3(t){return typeof t=="function"?r3(t):(t instanceof IDBTransaction&&t3(t),Xk(t,Jk())?new Proxy(t,ug):t)}function Di(t){if(t instanceof IDBRequest)return e3(t);if(s0.has(t))return s0.get(t);const e=i3(t);return e!==t&&(s0.set(t,e),Jm.set(e,t)),e}const o0=t=>Jm.get(t);function s3(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Di(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Di(o.result),l.oldVersion,l.newVersion,Di(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const o3=["get","getKey","getAll","getAllKeys","count"],a3=["put","add","delete","clear"],a0=new Map;function R1(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(a0.get(e))return a0.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=a3.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||o3.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return a0.set(e,s),s}n3(t=>({...t,get:(e,n,r)=>R1(e,n)||t.get(e,n,r),has:(e,n)=>!!R1(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l3{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(c3(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function c3(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const hg="@firebase/app",D1="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vr=new Xm("@firebase/app"),u3="@firebase/app-compat",h3="@firebase/analytics-compat",d3="@firebase/analytics",f3="@firebase/app-check-compat",p3="@firebase/app-check",g3="@firebase/auth",m3="@firebase/auth-compat",x3="@firebase/database",v3="@firebase/data-connect",y3="@firebase/database-compat",_3="@firebase/functions",E3="@firebase/functions-compat",w3="@firebase/installations",b3="@firebase/installations-compat",C3="@firebase/messaging",A3="@firebase/messaging-compat",T3="@firebase/performance",S3="@firebase/performance-compat",I3="@firebase/remote-config",k3="@firebase/remote-config-compat",P3="@firebase/storage",R3="@firebase/storage-compat",D3="@firebase/firestore",N3="@firebase/vertexai-preview",F3="@firebase/firestore-compat",M3="firebase",O3="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dg="[DEFAULT]",B3={[hg]:"fire-core",[u3]:"fire-core-compat",[d3]:"fire-analytics",[h3]:"fire-analytics-compat",[p3]:"fire-app-check",[f3]:"fire-app-check-compat",[g3]:"fire-auth",[m3]:"fire-auth-compat",[x3]:"fire-rtdb",[v3]:"fire-data-connect",[y3]:"fire-rtdb-compat",[_3]:"fire-fn",[E3]:"fire-fn-compat",[w3]:"fire-iid",[b3]:"fire-iid-compat",[C3]:"fire-fcm",[A3]:"fire-fcm-compat",[T3]:"fire-perf",[S3]:"fire-perf-compat",[I3]:"fire-rc",[k3]:"fire-rc-compat",[P3]:"fire-gcs",[R3]:"fire-gcs-compat",[D3]:"fire-fst",[F3]:"fire-fst-compat",[N3]:"fire-vertex","fire-js":"fire-js",[M3]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wh=new Map,L3=new Map,fg=new Map;function N1(t,e){try{t.container.addComponent(e)}catch(n){Vr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ns(t){const e=t.name;if(fg.has(e))return Vr.debug(`There were multiple attempts to register component ${e}.`),!1;fg.set(e,t);for(const n of Wh.values())N1(n,t);for(const n of L3.values())N1(n,t);return!0}function Md(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Xn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j3={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ni=new mc("app","Firebase",j3);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V3{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ji("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ni.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $s=O3;function Bb(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:dg,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Ni.create("bad-app-name",{appName:String(i)});if(n||(n=Db()),!n)throw Ni.create("no-options");const s=Wh.get(i);if(s){if(Hh(n,s.options)&&Hh(r,s.config))return s;throw Ni.create("duplicate-app",{appName:i})}const o=new qk(i);for(const l of fg.values())o.addComponent(l);const a=new V3(n,r,o);return Wh.set(i,a),a}function Zm(t=dg){const e=Wh.get(t);if(!e&&t===dg&&Db())return Bb();if(!e)throw Ni.create("no-app",{appName:t});return e}function tr(t,e,n){var r;let i=(r=B3[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Vr.warn(a.join(" "));return}Ns(new ji(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z3="firebase-heartbeat-database",U3=1,Kl="firebase-heartbeat-store";let l0=null;function Lb(){return l0||(l0=s3(z3,U3,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Kl)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ni.create("idb-open",{originalErrorMessage:t.message})})),l0}async function H3(t){try{const n=(await Lb()).transaction(Kl),r=await n.objectStore(Kl).get(jb(t));return await n.done,r}catch(e){if(e instanceof cr)Vr.warn(e.message);else{const n=Ni.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Vr.warn(n.message)}}}async function F1(t,e){try{const r=(await Lb()).transaction(Kl,"readwrite");await r.objectStore(Kl).put(e,jb(t)),await r.done}catch(n){if(n instanceof cr)Vr.warn(n.message);else{const r=Ni.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Vr.warn(r.message)}}}function jb(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W3=1024,$3=30*24*60*60*1e3;class q3{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new G3(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=M1();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=$3}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Vr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=M1(),{heartbeatsToSend:r,unsentEntries:i}=K3(this._heartbeatsCache.heartbeats),s=Uh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Vr.warn(n),""}}}function M1(){return new Date().toISOString().substring(0,10)}function K3(t,e=W3){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),O1(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),O1(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class G3{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Fk()?Mk().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await H3(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return F1(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return F1(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function O1(t){return Uh(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q3(t){Ns(new ji("platform-logger",e=>new l3(e),"PRIVATE")),Ns(new ji("heartbeat",e=>new q3(e),"PRIVATE")),tr(hg,D1,t),tr(hg,D1,"esm2017"),tr("fire-js","")}Q3("");function ex(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Vb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Y3=Vb,zb=new mc("auth","Firebase",Vb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $h=new Xm("@firebase/auth");function X3(t,...e){$h.logLevel<=xe.WARN&&$h.warn(`Auth (${$s}): ${t}`,...e)}function Qu(t,...e){$h.logLevel<=xe.ERROR&&$h.error(`Auth (${$s}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hn(t,...e){throw tx(t,...e)}function nr(t,...e){return tx(t,...e)}function Ub(t,e,n){const r=Object.assign(Object.assign({},Y3()),{[e]:n});return new mc("auth","Firebase",r).create(e,{appName:t.name})}function Nr(t){return Ub(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function tx(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return zb.create(t,...e)}function oe(t,e,...n){if(!t)throw tx(e,...n)}function Ar(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Qu(e),new Error(e)}function zr(t,e){t||Ar(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function J3(){return B1()==="http:"||B1()==="https:"}function B1(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z3(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(J3()||Pk()||"connection"in navigator)?navigator.onLine:!0}function eP(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(e,n){this.shortDelay=e,this.longDelay=n,zr(n>e,"Short delay should be less than long delay!"),this.isMobile=Sk()||Rk()}get(){return Z3()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nx(t,e){zr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ar("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ar("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ar("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nP=new vc(3e4,6e4);function Qi(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ur(t,e,n,r,i={}){return Wb(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=xc(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},s);return kk()||(c.referrerPolicy="no-referrer"),Hb.fetch()($b(t,t.config.apiHost,n,a),c)})}async function Wb(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},tP),e);try{const i=new iP(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw pu(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw pu(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw pu(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw pu(t,"user-disabled",o);const u=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw Ub(t,u,c);Hn(t,u)}}catch(i){if(i instanceof cr)throw i;Hn(t,"network-request-failed",{message:String(i)})}}async function yc(t,e,n,r,i={}){const s=await ur(t,e,n,r,i);return"mfaPendingCredential"in s&&Hn(t,"multi-factor-auth-required",{_serverResponse:s}),s}function $b(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?nx(t.config,i):`${t.config.apiScheme}://${i}`}function rP(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class iP{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(nr(this.auth,"network-request-failed")),nP.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function pu(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=nr(t,e,r);return i.customData._tokenResponse=n,i}function L1(t){return t!==void 0&&t.enterprise!==void 0}class sP{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return rP(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function oP(t,e){return ur(t,"GET","/v2/recaptchaConfig",Qi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aP(t,e){return ur(t,"POST","/v1/accounts:delete",e)}async function qb(t,e){return ur(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function lP(t,e=!1){const n=Se(t),r=await n.getIdToken(e),i=rx(r);oe(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:xl(c0(i.auth_time)),issuedAtTime:xl(c0(i.iat)),expirationTime:xl(c0(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function c0(t){return Number(t)*1e3}function rx(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Qu("JWT malformed, contained fewer than 3 sections"),null;try{const i=kb(n);return i?JSON.parse(i):(Qu("Failed to decode base64 JWT payload"),null)}catch(i){return Qu("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function j1(t){const e=rx(t);return oe(e,"internal-error"),oe(typeof e.exp<"u","internal-error"),oe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fs(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof cr&&cP(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function cP({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uP{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=xl(this.lastLoginAt),this.creationTime=xl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qh(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Fs(t,qb(n,{idToken:r}));oe(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?Kb(s.providerUserInfo):[],a=dP(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),u=l?c:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new gg(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,d)}async function hP(t){const e=Se(t);await qh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function dP(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Kb(t){return t.map(e=>{var{providerId:n}=e,r=ex(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fP(t,e){const n=await Wb(t,{},async()=>{const r=xc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=$b(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Hb.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function pP(t,e){return ur(t,"POST","/v2/accounts:revokeToken",Qi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){oe(e.idToken,"internal-error"),oe(typeof e.idToken<"u","internal-error"),oe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):j1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){oe(e.length!==0,"internal-error");const n=j1(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(oe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await fP(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Oo;return r&&(oe(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(oe(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(oe(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Oo,this.toJSON())}_performRefresh(){return Ar("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ri(t,e){oe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Tr{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=ex(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new uP(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new gg(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Fs(this,this.stsTokenManager.getToken(this.auth,e));return oe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return lP(this,e)}reload(){return hP(this)}_assign(e){this!==e&&(oe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Tr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await qh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Xn(this.auth.app))return Promise.reject(Nr(this.auth));const e=await this.getIdToken();return await Fs(this,aP(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,c,u;const d=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(i=n.email)!==null&&i!==void 0?i:void 0,p=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,m=(o=n.photoURL)!==null&&o!==void 0?o:void 0,v=(a=n.tenantId)!==null&&a!==void 0?a:void 0,E=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,_=(c=n.createdAt)!==null&&c!==void 0?c:void 0,x=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:w,emailVerified:A,isAnonymous:P,providerData:R,stsTokenManager:C}=n;oe(w&&C,e,"internal-error");const b=Oo.fromJSON(this.name,C);oe(typeof w=="string",e,"internal-error"),ri(d,e.name),ri(f,e.name),oe(typeof A=="boolean",e,"internal-error"),oe(typeof P=="boolean",e,"internal-error"),ri(p,e.name),ri(m,e.name),ri(v,e.name),ri(E,e.name),ri(_,e.name),ri(x,e.name);const k=new Tr({uid:w,auth:e,email:f,emailVerified:A,displayName:d,isAnonymous:P,photoURL:m,phoneNumber:p,tenantId:v,stsTokenManager:b,createdAt:_,lastLoginAt:x});return R&&Array.isArray(R)&&(k.providerData=R.map(S=>Object.assign({},S))),E&&(k._redirectEventId=E),k}static async _fromIdTokenResponse(e,n,r=!1){const i=new Oo;i.updateFromServerResponse(n);const s=new Tr({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await qh(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];oe(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?Kb(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Oo;a.updateFromIdToken(r);const l=new Tr({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new gg(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V1=new Map;function Sr(t){zr(t instanceof Function,"Expected a class definition");let e=V1.get(t);return e?(zr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,V1.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Gb.type="NONE";const z1=Gb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yu(t,e,n){return`firebase:${t}:${e}:${n}`}class Bo{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Yu(this.userKey,i.apiKey,s),this.fullPersistenceKey=Yu("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Tr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Bo(Sr(z1),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||Sr(z1);const o=Yu(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const u=await c._get(o);if(u){const d=Tr._fromJSON(e,u);c!==s&&(a=d),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Bo(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new Bo(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U1(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Jb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Qb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(eC(e))return"Blackberry";if(tC(e))return"Webos";if(Yb(e))return"Safari";if((e.includes("chrome/")||Xb(e))&&!e.includes("edge/"))return"Chrome";if(Zb(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Qb(t=zt()){return/firefox\//i.test(t)}function Yb(t=zt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Xb(t=zt()){return/crios\//i.test(t)}function Jb(t=zt()){return/iemobile/i.test(t)}function Zb(t=zt()){return/android/i.test(t)}function eC(t=zt()){return/blackberry/i.test(t)}function tC(t=zt()){return/webos/i.test(t)}function ix(t=zt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function gP(t=zt()){var e;return ix(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function mP(){return Dk()&&document.documentMode===10}function nC(t=zt()){return ix(t)||Zb(t)||tC(t)||eC(t)||/windows phone/i.test(t)||Jb(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rC(t,e=[]){let n;switch(t){case"Browser":n=U1(zt());break;case"Worker":n=`${U1(zt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${$s}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xP{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vP(t,e={}){return ur(t,"GET","/v2/passwordPolicy",Qi(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yP=6;class _P{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:yP,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EP{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new H1(this),this.idTokenSubscription=new H1(this),this.beforeStateQueue=new xP(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=zb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Sr(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Bo.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await qb(this,{idToken:e}),r=await Tr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Xn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return oe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await qh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=eP()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Xn(this.app))return Promise.reject(Nr(this));const n=e?Se(e):null;return n&&oe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&oe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Xn(this.app)?Promise.reject(Nr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Xn(this.app)?Promise.reject(Nr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Sr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await vP(this),n=new _P(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new mc("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await pP(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Sr(e)||this._popupRedirectResolver;oe(n,this,"argument-error"),this.redirectPersistenceManager=await Bo.create(this,[Sr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(oe(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=rC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&X3(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function qs(t){return Se(t)}class H1{constructor(e){this.auth=e,this.observer=null,this.addObserver=Vk(n=>this.observer=n)}get next(){return oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Od={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function wP(t){Od=t}function iC(t){return Od.loadJS(t)}function bP(){return Od.recaptchaEnterpriseScript}function CP(){return Od.gapiScript}function AP(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const TP="recaptcha-enterprise",SP="NO_RECAPTCHA";class IP{constructor(e){this.type=TP,this.auth=qs(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{oP(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new sP(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;L1(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(SP)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&L1(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=bP();l.length!==0&&(l+=a),iC(l).then(()=>{i(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function W1(t,e,n,r=!1){const i=new IP(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function mg(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await W1(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await W1(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kP(t,e){const n=Md(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Hh(s,e??{}))return i;Hn(i,"already-initialized")}return n.initialize({options:e})}function PP(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Sr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function RP(t,e,n){const r=qs(t);oe(r._canInitEmulator,r,"emulator-config-failed"),oe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=sC(e),{host:o,port:a}=DP(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),NP()}function sC(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function DP(t){const e=sC(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:$1(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:$1(o)}}}function $1(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function NP(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ar("not implemented")}_getIdTokenResponse(e){return Ar("not implemented")}_linkToIdToken(e,n){return Ar("not implemented")}_getReauthenticationResolver(e){return Ar("not implemented")}}async function FP(t,e){return ur(t,"POST","/v1/accounts:update",e)}async function MP(t,e){return ur(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OP(t,e){return yc(t,"POST","/v1/accounts:signInWithPassword",Qi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BP(t,e){return yc(t,"POST","/v1/accounts:signInWithEmailLink",Qi(t,e))}async function LP(t,e){return yc(t,"POST","/v1/accounts:signInWithEmailLink",Qi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl extends sx{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Gl(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Gl(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return mg(e,n,"signInWithPassword",OP);case"emailLink":return BP(e,{email:this._email,oobCode:this._password});default:Hn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return mg(e,r,"signUpPassword",MP);case"emailLink":return LP(e,{idToken:n,email:this._email,oobCode:this._password});default:Hn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lo(t,e){return yc(t,"POST","/v1/accounts:signInWithIdp",Qi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jP="http://localhost";class Ms extends sx{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ms(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Hn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=ex(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Ms(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Lo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Lo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Lo(e,n)}buildRequest(){const e={requestUri:jP,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=xc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VP(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function zP(t){const e=Ya(Xa(t)).link,n=e?Ya(Xa(e)).deep_link_id:null,r=Ya(Xa(t)).deep_link_id;return(r?Ya(Xa(r)).link:null)||r||n||e||t}class ox{constructor(e){var n,r,i,s,o,a;const l=Ya(Xa(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,u=(r=l.oobCode)!==null&&r!==void 0?r:null,d=VP((i=l.mode)!==null&&i!==void 0?i:null);oe(c&&u&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=u,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=zP(e);try{return new ox(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(){this.providerId=Ks.PROVIDER_ID}static credential(e,n){return Gl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=ox.parseLink(n);return oe(r,"argument-error"),Gl._fromEmailAndCode(e,r.code,r.tenantId)}}Ks.PROVIDER_ID="password";Ks.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ks.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c extends oC{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui extends _c{constructor(){super("facebook.com")}static credential(e){return Ms._fromParams({providerId:ui.PROVIDER_ID,signInMethod:ui.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ui.credentialFromTaggedObject(e)}static credentialFromError(e){return ui.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ui.credential(e.oauthAccessToken)}catch{return null}}}ui.FACEBOOK_SIGN_IN_METHOD="facebook.com";ui.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi extends _c{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ms._fromParams({providerId:hi.PROVIDER_ID,signInMethod:hi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return hi.credentialFromTaggedObject(e)}static credentialFromError(e){return hi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return hi.credential(n,r)}catch{return null}}}hi.GOOGLE_SIGN_IN_METHOD="google.com";hi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di extends _c{constructor(){super("github.com")}static credential(e){return Ms._fromParams({providerId:di.PROVIDER_ID,signInMethod:di.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return di.credentialFromTaggedObject(e)}static credentialFromError(e){return di.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return di.credential(e.oauthAccessToken)}catch{return null}}}di.GITHUB_SIGN_IN_METHOD="github.com";di.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi extends _c{constructor(){super("twitter.com")}static credential(e,n){return Ms._fromParams({providerId:fi.PROVIDER_ID,signInMethod:fi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return fi.credentialFromTaggedObject(e)}static credentialFromError(e){return fi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return fi.credential(n,r)}catch{return null}}}fi.TWITTER_SIGN_IN_METHOD="twitter.com";fi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UP(t,e){return yc(t,"POST","/v1/accounts:signUp",Qi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Tr._fromIdTokenResponse(e,r,i),o=q1(r);return new Os({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=q1(r);return new Os({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function q1(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh extends cr{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Kh.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Kh(e,n,r,i)}}function aC(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Kh._fromErrorAndOperation(t,s,e,r):s})}async function HP(t,e,n=!1){const r=await Fs(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Os._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lC(t,e,n=!1){const{auth:r}=t;if(Xn(r.app))return Promise.reject(Nr(r));const i="reauthenticate";try{const s=await Fs(t,aC(r,i,e,t),n);oe(s.idToken,r,"internal-error");const o=rx(s.idToken);oe(o,r,"internal-error");const{sub:a}=o;return oe(t.uid===a,r,"user-mismatch"),Os._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Hn(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cC(t,e,n=!1){if(Xn(t.app))return Promise.reject(Nr(t));const r="signIn",i=await aC(t,r,e),s=await Os._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function WP(t,e){return cC(qs(t),e)}async function $P(t,e){return lC(Se(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uC(t){const e=qs(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function qP(t,e,n){if(Xn(t.app))return Promise.reject(Nr(t));const r=qs(t),o=await mg(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",UP).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&uC(t),l}),a=await Os._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function KP(t,e,n){return Xn(t.app)?Promise.reject(Nr(t)):WP(Se(t),Ks.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&uC(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GP(t,e){return ur(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hC(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Se(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Fs(r,GP(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function QP(t,e){return YP(Se(t),null,e)}async function YP(t,e,n){const{auth:r}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(s.password=n);const o=await Fs(t,FP(r,s));await t._updateTokensIfNecessary(o,!0)}function XP(t,e,n,r){return Se(t).onIdTokenChanged(e,n,r)}function JP(t,e,n){return Se(t).beforeAuthStateChanged(e,n)}function ZP(t,e,n,r){return Se(t).onAuthStateChanged(e,n,r)}function eR(t){return Se(t).signOut()}async function tR(t){return Se(t).delete()}const Gh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Gh,"1"),this.storage.removeItem(Gh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nR=1e3,rR=10;class fC extends dC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=nC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);mP()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,rR):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},nR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}fC.type="LOCAL";const iR=fC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC extends dC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}pC.type="SESSION";const gC=pC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sR(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Bd(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await sR(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Bd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ax(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=ax("",20);i.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){const f=d;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(u),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rr(){return window}function aR(t){rr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mC(){return typeof rr().WorkerGlobalScope<"u"&&typeof rr().importScripts=="function"}async function lR(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function cR(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function uR(){return mC()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xC="firebaseLocalStorageDb",hR=1,Qh="firebaseLocalStorage",vC="fbase_key";class Ec{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ld(t,e){return t.transaction([Qh],e?"readwrite":"readonly").objectStore(Qh)}function dR(){const t=indexedDB.deleteDatabase(xC);return new Ec(t).toPromise()}function xg(){const t=indexedDB.open(xC,hR);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Qh,{keyPath:vC})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Qh)?e(r):(r.close(),await dR(),e(await xg()))})})}async function K1(t,e,n){const r=Ld(t,!0).put({[vC]:e,value:n});return new Ec(r).toPromise()}async function fR(t,e){const n=Ld(t,!1).get(e),r=await new Ec(n).toPromise();return r===void 0?null:r.value}function G1(t,e){const n=Ld(t,!0).delete(e);return new Ec(n).toPromise()}const pR=800,gR=3;class yC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await xg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>gR)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return mC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Bd._getInstance(uR()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await lR(),!this.activeServiceWorker)return;this.sender=new oR(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||cR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await xg();return await K1(e,Gh,"1"),await G1(e,Gh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>K1(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>fR(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>G1(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Ld(i,!1).getAll();return new Ec(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),pR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}yC.type="LOCAL";const mR=yC;new vc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xR(t,e){return e?Sr(e):(oe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lx extends sx{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Lo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Lo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Lo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function vR(t){return cC(t.auth,new lx(t),t.bypassAuthState)}function yR(t){const{auth:e,user:n}=t;return oe(n,e,"internal-error"),lC(n,new lx(t),t.bypassAuthState)}async function _R(t){const{auth:e,user:n}=t;return oe(n,e,"internal-error"),HP(n,new lx(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return vR;case"linkViaPopup":case"linkViaRedirect":return _R;case"reauthViaPopup":case"reauthViaRedirect":return yR;default:Hn(this.auth,"internal-error")}}resolve(e){zr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){zr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ER=new vc(2e3,1e4);class ko extends _C{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,ko.currentPopupAction&&ko.currentPopupAction.cancel(),ko.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return oe(e,this.auth,"internal-error"),e}async onExecution(){zr(this.filter.length===1,"Popup operations only handle one event");const e=ax();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(nr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(nr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ko.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(nr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,ER.get())};e()}}ko.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wR="pendingRedirect",Xu=new Map;class bR extends _C{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Xu.get(this.auth._key());if(!e){try{const r=await CR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Xu.set(this.auth._key(),e)}return this.bypassAuthState||Xu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function CR(t,e){const n=SR(e),r=TR(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function AR(t,e){Xu.set(t._key(),e)}function TR(t){return Sr(t._redirectPersistence)}function SR(t){return Yu(wR,t.config.apiKey,t.name)}async function IR(t,e,n=!1){if(Xn(t.app))return Promise.reject(Nr(t));const r=qs(t),i=xR(r,e),o=await new bR(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kR=10*60*1e3;class PR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!RR(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!EC(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(nr(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=kR&&this.cachedEventUids.clear(),this.cachedEventUids.has(Q1(e))}saveEventToCache(e){this.cachedEventUids.add(Q1(e)),this.lastProcessedEventTime=Date.now()}}function Q1(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function EC({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function RR(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return EC(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DR(t,e={}){return ur(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,FR=/^https?/;async function MR(t){if(t.config.emulator)return;const{authorizedDomains:e}=await DR(t);for(const n of e)try{if(OR(n))return}catch{}Hn(t,"unauthorized-domain")}function OR(t){const e=pg(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!FR.test(n))return!1;if(NR.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BR=new vc(3e4,6e4);function Y1(){const t=rr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function LR(t){return new Promise((e,n)=>{var r,i,s;function o(){Y1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Y1(),n(nr(t,"network-request-failed"))},timeout:BR.get()})}if(!((i=(r=rr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=rr().gapi)===null||s===void 0)&&s.load)o();else{const a=AP("iframefcb");return rr()[a]=()=>{gapi.load?o():n(nr(t,"network-request-failed"))},iC(`${CP()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Ju=null,e})}let Ju=null;function jR(t){return Ju=Ju||LR(t),Ju}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VR=new vc(5e3,15e3),zR="__/auth/iframe",UR="emulator/auth/iframe",HR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},WR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function $R(t){const e=t.config;oe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?nx(e,UR):`https://${t.config.authDomain}/${zR}`,r={apiKey:e.apiKey,appName:t.name,v:$s},i=WR.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${xc(r).slice(1)}`}async function qR(t){const e=await jR(t),n=rr().gapi;return oe(n,t,"internal-error"),e.open({where:document.body,url:$R(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:HR,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=nr(t,"network-request-failed"),a=rr().setTimeout(()=>{s(o)},VR.get());function l(){rr().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},GR=500,QR=600,YR="_blank",XR="http://localhost";class X1{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function JR(t,e,n,r=GR,i=QR){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},KR),{width:r.toString(),height:i.toString(),top:s,left:o}),c=zt().toLowerCase();n&&(a=Xb(c)?YR:n),Qb(c)&&(e=e||XR,l.scrollbars="yes");const u=Object.entries(l).reduce((f,[p,m])=>`${f}${p}=${m},`,"");if(gP(c)&&a!=="_self")return ZR(e||"",a),new X1(null);const d=window.open(e||"",a,u);oe(d,t,"popup-blocked");try{d.focus()}catch{}return new X1(d)}function ZR(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eD="__/auth/handler",tD="emulator/auth/handler",nD=encodeURIComponent("fac");async function J1(t,e,n,r,i,s){oe(t.config.authDomain,t,"auth-domain-config-required"),oe(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:$s,eventId:i};if(e instanceof oC){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",jk(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,d]of Object.entries({}))o[u]=d}if(e instanceof _c){const u=e.getScopes().filter(d=>d!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const l=await t._getAppCheckToken(),c=l?`#${nD}=${encodeURIComponent(l)}`:"";return`${rD(t)}?${xc(a).slice(1)}${c}`}function rD({config:t}){return t.emulator?nx(t,tD):`https://${t.authDomain}/${eD}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u0="webStorageSupport";class iD{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=gC,this._completeRedirectFn=IR,this._overrideRedirectResult=AR}async _openPopup(e,n,r,i){var s;zr((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await J1(e,n,r,pg(),i);return JR(e,o,ax())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await J1(e,n,r,pg(),i);return aR(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(zr(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await qR(e),r=new PR(e);return n.register("authEvent",i=>(oe(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(u0,{type:u0},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[u0];o!==void 0&&n(!!o),Hn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=MR(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return nC()||Yb()||ix()}}const sD=iD;var Z1="@firebase/auth",e_="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oD{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aD(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function lD(t){Ns(new ji("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;oe(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:rC(t)},c=new EP(r,i,s,l);return PP(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ns(new ji("auth-internal",e=>{const n=qs(e.getProvider("auth").getImmediate());return(r=>new oD(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),tr(Z1,e_,aD(t)),tr(Z1,e_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cD=5*60,uD=Nb("authIdTokenMaxAge")||cD;let t_=null;const hD=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>uD)return;const i=n==null?void 0:n.token;t_!==i&&(t_=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function dD(t=Zm()){const e=Md(t,"auth");if(e.isInitialized())return e.getImmediate();const n=kP(t,{popupRedirectResolver:sD,persistence:[mR,iR,gC]}),r=Nb("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=hD(s.toString());JP(n,o,()=>o(n.currentUser)),XP(n,a=>o(a))}}const i=Pb("auth");return i&&RP(n,`http://${i}`),n}function fD(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}wP({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=nr("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",fD().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});lD("Browser");var pD="firebase",gD="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */tr(pD,gD,"app");var n_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Cs,wC;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,b){function k(){}k.prototype=b.prototype,C.D=b.prototype,C.prototype=new k,C.prototype.constructor=C,C.C=function(S,I,N){for(var D=Array(arguments.length-2),G=2;G<arguments.length;G++)D[G-2]=arguments[G];return b.prototype[I].apply(S,D)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(C,b,k){k||(k=0);var S=Array(16);if(typeof b=="string")for(var I=0;16>I;++I)S[I]=b.charCodeAt(k++)|b.charCodeAt(k++)<<8|b.charCodeAt(k++)<<16|b.charCodeAt(k++)<<24;else for(I=0;16>I;++I)S[I]=b[k++]|b[k++]<<8|b[k++]<<16|b[k++]<<24;b=C.g[0],k=C.g[1],I=C.g[2];var N=C.g[3],D=b+(N^k&(I^N))+S[0]+3614090360&4294967295;b=k+(D<<7&4294967295|D>>>25),D=N+(I^b&(k^I))+S[1]+3905402710&4294967295,N=b+(D<<12&4294967295|D>>>20),D=I+(k^N&(b^k))+S[2]+606105819&4294967295,I=N+(D<<17&4294967295|D>>>15),D=k+(b^I&(N^b))+S[3]+3250441966&4294967295,k=I+(D<<22&4294967295|D>>>10),D=b+(N^k&(I^N))+S[4]+4118548399&4294967295,b=k+(D<<7&4294967295|D>>>25),D=N+(I^b&(k^I))+S[5]+1200080426&4294967295,N=b+(D<<12&4294967295|D>>>20),D=I+(k^N&(b^k))+S[6]+2821735955&4294967295,I=N+(D<<17&4294967295|D>>>15),D=k+(b^I&(N^b))+S[7]+4249261313&4294967295,k=I+(D<<22&4294967295|D>>>10),D=b+(N^k&(I^N))+S[8]+1770035416&4294967295,b=k+(D<<7&4294967295|D>>>25),D=N+(I^b&(k^I))+S[9]+2336552879&4294967295,N=b+(D<<12&4294967295|D>>>20),D=I+(k^N&(b^k))+S[10]+4294925233&4294967295,I=N+(D<<17&4294967295|D>>>15),D=k+(b^I&(N^b))+S[11]+2304563134&4294967295,k=I+(D<<22&4294967295|D>>>10),D=b+(N^k&(I^N))+S[12]+1804603682&4294967295,b=k+(D<<7&4294967295|D>>>25),D=N+(I^b&(k^I))+S[13]+4254626195&4294967295,N=b+(D<<12&4294967295|D>>>20),D=I+(k^N&(b^k))+S[14]+2792965006&4294967295,I=N+(D<<17&4294967295|D>>>15),D=k+(b^I&(N^b))+S[15]+1236535329&4294967295,k=I+(D<<22&4294967295|D>>>10),D=b+(I^N&(k^I))+S[1]+4129170786&4294967295,b=k+(D<<5&4294967295|D>>>27),D=N+(k^I&(b^k))+S[6]+3225465664&4294967295,N=b+(D<<9&4294967295|D>>>23),D=I+(b^k&(N^b))+S[11]+643717713&4294967295,I=N+(D<<14&4294967295|D>>>18),D=k+(N^b&(I^N))+S[0]+3921069994&4294967295,k=I+(D<<20&4294967295|D>>>12),D=b+(I^N&(k^I))+S[5]+3593408605&4294967295,b=k+(D<<5&4294967295|D>>>27),D=N+(k^I&(b^k))+S[10]+38016083&4294967295,N=b+(D<<9&4294967295|D>>>23),D=I+(b^k&(N^b))+S[15]+3634488961&4294967295,I=N+(D<<14&4294967295|D>>>18),D=k+(N^b&(I^N))+S[4]+3889429448&4294967295,k=I+(D<<20&4294967295|D>>>12),D=b+(I^N&(k^I))+S[9]+568446438&4294967295,b=k+(D<<5&4294967295|D>>>27),D=N+(k^I&(b^k))+S[14]+3275163606&4294967295,N=b+(D<<9&4294967295|D>>>23),D=I+(b^k&(N^b))+S[3]+4107603335&4294967295,I=N+(D<<14&4294967295|D>>>18),D=k+(N^b&(I^N))+S[8]+1163531501&4294967295,k=I+(D<<20&4294967295|D>>>12),D=b+(I^N&(k^I))+S[13]+2850285829&4294967295,b=k+(D<<5&4294967295|D>>>27),D=N+(k^I&(b^k))+S[2]+4243563512&4294967295,N=b+(D<<9&4294967295|D>>>23),D=I+(b^k&(N^b))+S[7]+1735328473&4294967295,I=N+(D<<14&4294967295|D>>>18),D=k+(N^b&(I^N))+S[12]+2368359562&4294967295,k=I+(D<<20&4294967295|D>>>12),D=b+(k^I^N)+S[5]+4294588738&4294967295,b=k+(D<<4&4294967295|D>>>28),D=N+(b^k^I)+S[8]+2272392833&4294967295,N=b+(D<<11&4294967295|D>>>21),D=I+(N^b^k)+S[11]+1839030562&4294967295,I=N+(D<<16&4294967295|D>>>16),D=k+(I^N^b)+S[14]+4259657740&4294967295,k=I+(D<<23&4294967295|D>>>9),D=b+(k^I^N)+S[1]+2763975236&4294967295,b=k+(D<<4&4294967295|D>>>28),D=N+(b^k^I)+S[4]+1272893353&4294967295,N=b+(D<<11&4294967295|D>>>21),D=I+(N^b^k)+S[7]+4139469664&4294967295,I=N+(D<<16&4294967295|D>>>16),D=k+(I^N^b)+S[10]+3200236656&4294967295,k=I+(D<<23&4294967295|D>>>9),D=b+(k^I^N)+S[13]+681279174&4294967295,b=k+(D<<4&4294967295|D>>>28),D=N+(b^k^I)+S[0]+3936430074&4294967295,N=b+(D<<11&4294967295|D>>>21),D=I+(N^b^k)+S[3]+3572445317&4294967295,I=N+(D<<16&4294967295|D>>>16),D=k+(I^N^b)+S[6]+76029189&4294967295,k=I+(D<<23&4294967295|D>>>9),D=b+(k^I^N)+S[9]+3654602809&4294967295,b=k+(D<<4&4294967295|D>>>28),D=N+(b^k^I)+S[12]+3873151461&4294967295,N=b+(D<<11&4294967295|D>>>21),D=I+(N^b^k)+S[15]+530742520&4294967295,I=N+(D<<16&4294967295|D>>>16),D=k+(I^N^b)+S[2]+3299628645&4294967295,k=I+(D<<23&4294967295|D>>>9),D=b+(I^(k|~N))+S[0]+4096336452&4294967295,b=k+(D<<6&4294967295|D>>>26),D=N+(k^(b|~I))+S[7]+1126891415&4294967295,N=b+(D<<10&4294967295|D>>>22),D=I+(b^(N|~k))+S[14]+2878612391&4294967295,I=N+(D<<15&4294967295|D>>>17),D=k+(N^(I|~b))+S[5]+4237533241&4294967295,k=I+(D<<21&4294967295|D>>>11),D=b+(I^(k|~N))+S[12]+1700485571&4294967295,b=k+(D<<6&4294967295|D>>>26),D=N+(k^(b|~I))+S[3]+2399980690&4294967295,N=b+(D<<10&4294967295|D>>>22),D=I+(b^(N|~k))+S[10]+4293915773&4294967295,I=N+(D<<15&4294967295|D>>>17),D=k+(N^(I|~b))+S[1]+2240044497&4294967295,k=I+(D<<21&4294967295|D>>>11),D=b+(I^(k|~N))+S[8]+1873313359&4294967295,b=k+(D<<6&4294967295|D>>>26),D=N+(k^(b|~I))+S[15]+4264355552&4294967295,N=b+(D<<10&4294967295|D>>>22),D=I+(b^(N|~k))+S[6]+2734768916&4294967295,I=N+(D<<15&4294967295|D>>>17),D=k+(N^(I|~b))+S[13]+1309151649&4294967295,k=I+(D<<21&4294967295|D>>>11),D=b+(I^(k|~N))+S[4]+4149444226&4294967295,b=k+(D<<6&4294967295|D>>>26),D=N+(k^(b|~I))+S[11]+3174756917&4294967295,N=b+(D<<10&4294967295|D>>>22),D=I+(b^(N|~k))+S[2]+718787259&4294967295,I=N+(D<<15&4294967295|D>>>17),D=k+(N^(I|~b))+S[9]+3951481745&4294967295,C.g[0]=C.g[0]+b&4294967295,C.g[1]=C.g[1]+(I+(D<<21&4294967295|D>>>11))&4294967295,C.g[2]=C.g[2]+I&4294967295,C.g[3]=C.g[3]+N&4294967295}r.prototype.u=function(C,b){b===void 0&&(b=C.length);for(var k=b-this.blockSize,S=this.B,I=this.h,N=0;N<b;){if(I==0)for(;N<=k;)i(this,C,N),N+=this.blockSize;if(typeof C=="string"){for(;N<b;)if(S[I++]=C.charCodeAt(N++),I==this.blockSize){i(this,S),I=0;break}}else for(;N<b;)if(S[I++]=C[N++],I==this.blockSize){i(this,S),I=0;break}}this.h=I,this.o+=b},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var b=1;b<C.length-8;++b)C[b]=0;var k=8*this.o;for(b=C.length-8;b<C.length;++b)C[b]=k&255,k/=256;for(this.u(C),C=Array(16),b=k=0;4>b;++b)for(var S=0;32>S;S+=8)C[k++]=this.g[b]>>>S&255;return C};function s(C,b){var k=a;return Object.prototype.hasOwnProperty.call(k,C)?k[C]:k[C]=b(C)}function o(C,b){this.h=b;for(var k=[],S=!0,I=C.length-1;0<=I;I--){var N=C[I]|0;S&&N==b||(k[I]=N,S=!1)}this.g=k}var a={};function l(C){return-128<=C&&128>C?s(C,function(b){return new o([b|0],0>b?-1:0)}):new o([C|0],0>C?-1:0)}function c(C){if(isNaN(C)||!isFinite(C))return d;if(0>C)return E(c(-C));for(var b=[],k=1,S=0;C>=k;S++)b[S]=C/k|0,k*=4294967296;return new o(b,0)}function u(C,b){if(C.length==0)throw Error("number format error: empty string");if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(C.charAt(0)=="-")return E(u(C.substring(1),b));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=c(Math.pow(b,8)),S=d,I=0;I<C.length;I+=8){var N=Math.min(8,C.length-I),D=parseInt(C.substring(I,I+N),b);8>N?(N=c(Math.pow(b,N)),S=S.j(N).add(c(D))):(S=S.j(k),S=S.add(c(D)))}return S}var d=l(0),f=l(1),p=l(16777216);t=o.prototype,t.m=function(){if(v(this))return-E(this).m();for(var C=0,b=1,k=0;k<this.g.length;k++){var S=this.i(k);C+=(0<=S?S:4294967296+S)*b,b*=4294967296}return C},t.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(m(this))return"0";if(v(this))return"-"+E(this).toString(C);for(var b=c(Math.pow(C,6)),k=this,S="";;){var I=A(k,b).g;k=_(k,I.j(b));var N=((0<k.g.length?k.g[0]:k.h)>>>0).toString(C);if(k=I,m(k))return N+S;for(;6>N.length;)N="0"+N;S=N+S}},t.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function m(C){if(C.h!=0)return!1;for(var b=0;b<C.g.length;b++)if(C.g[b]!=0)return!1;return!0}function v(C){return C.h==-1}t.l=function(C){return C=_(this,C),v(C)?-1:m(C)?0:1};function E(C){for(var b=C.g.length,k=[],S=0;S<b;S++)k[S]=~C.g[S];return new o(k,~C.h).add(f)}t.abs=function(){return v(this)?E(this):this},t.add=function(C){for(var b=Math.max(this.g.length,C.g.length),k=[],S=0,I=0;I<=b;I++){var N=S+(this.i(I)&65535)+(C.i(I)&65535),D=(N>>>16)+(this.i(I)>>>16)+(C.i(I)>>>16);S=D>>>16,N&=65535,D&=65535,k[I]=D<<16|N}return new o(k,k[k.length-1]&-2147483648?-1:0)};function _(C,b){return C.add(E(b))}t.j=function(C){if(m(this)||m(C))return d;if(v(this))return v(C)?E(this).j(E(C)):E(E(this).j(C));if(v(C))return E(this.j(E(C)));if(0>this.l(p)&&0>C.l(p))return c(this.m()*C.m());for(var b=this.g.length+C.g.length,k=[],S=0;S<2*b;S++)k[S]=0;for(S=0;S<this.g.length;S++)for(var I=0;I<C.g.length;I++){var N=this.i(S)>>>16,D=this.i(S)&65535,G=C.i(I)>>>16,q=C.i(I)&65535;k[2*S+2*I]+=D*q,x(k,2*S+2*I),k[2*S+2*I+1]+=N*q,x(k,2*S+2*I+1),k[2*S+2*I+1]+=D*G,x(k,2*S+2*I+1),k[2*S+2*I+2]+=N*G,x(k,2*S+2*I+2)}for(S=0;S<b;S++)k[S]=k[2*S+1]<<16|k[2*S];for(S=b;S<2*b;S++)k[S]=0;return new o(k,0)};function x(C,b){for(;(C[b]&65535)!=C[b];)C[b+1]+=C[b]>>>16,C[b]&=65535,b++}function w(C,b){this.g=C,this.h=b}function A(C,b){if(m(b))throw Error("division by zero");if(m(C))return new w(d,d);if(v(C))return b=A(E(C),b),new w(E(b.g),E(b.h));if(v(b))return b=A(C,E(b)),new w(E(b.g),b.h);if(30<C.g.length){if(v(C)||v(b))throw Error("slowDivide_ only works with positive integers.");for(var k=f,S=b;0>=S.l(C);)k=P(k),S=P(S);var I=R(k,1),N=R(S,1);for(S=R(S,2),k=R(k,2);!m(S);){var D=N.add(S);0>=D.l(C)&&(I=I.add(k),N=D),S=R(S,1),k=R(k,1)}return b=_(C,I.j(b)),new w(I,b)}for(I=d;0<=C.l(b);){for(k=Math.max(1,Math.floor(C.m()/b.m())),S=Math.ceil(Math.log(k)/Math.LN2),S=48>=S?1:Math.pow(2,S-48),N=c(k),D=N.j(b);v(D)||0<D.l(C);)k-=S,N=c(k),D=N.j(b);m(N)&&(N=f),I=I.add(N),C=_(C,D)}return new w(I,C)}t.A=function(C){return A(this,C).h},t.and=function(C){for(var b=Math.max(this.g.length,C.g.length),k=[],S=0;S<b;S++)k[S]=this.i(S)&C.i(S);return new o(k,this.h&C.h)},t.or=function(C){for(var b=Math.max(this.g.length,C.g.length),k=[],S=0;S<b;S++)k[S]=this.i(S)|C.i(S);return new o(k,this.h|C.h)},t.xor=function(C){for(var b=Math.max(this.g.length,C.g.length),k=[],S=0;S<b;S++)k[S]=this.i(S)^C.i(S);return new o(k,this.h^C.h)};function P(C){for(var b=C.g.length+1,k=[],S=0;S<b;S++)k[S]=C.i(S)<<1|C.i(S-1)>>>31;return new o(k,C.h)}function R(C,b){var k=b>>5;b%=32;for(var S=C.g.length-k,I=[],N=0;N<S;N++)I[N]=0<b?C.i(N+k)>>>b|C.i(N+k+1)<<32-b:C.i(N+k);return new o(I,C.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,wC=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=u,Cs=o}).apply(typeof n_<"u"?n_:typeof self<"u"?self:typeof window<"u"?window:{});var gu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var bC,Ja,CC,Zu,vg,AC,TC,SC;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,y,T){return h==Array.prototype||h==Object.prototype||(h[y]=T.value),h};function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof gu=="object"&&gu];for(var y=0;y<h.length;++y){var T=h[y];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var r=n(this);function i(h,y){if(y)e:{var T=r;h=h.split(".");for(var F=0;F<h.length-1;F++){var O=h[F];if(!(O in T))break e;T=T[O]}h=h[h.length-1],F=T[h],y=y(F),y!=F&&y!=null&&e(T,h,{configurable:!0,writable:!0,value:y})}}function s(h,y){h instanceof String&&(h+="");var T=0,F=!1,O={next:function(){if(!F&&T<h.length){var z=T++;return{value:y(z,h[z]),done:!1}}return F=!0,{done:!0,value:void 0}}};return O[Symbol.iterator]=function(){return O},O}i("Array.prototype.values",function(h){return h||function(){return s(this,function(y,T){return T})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(h){var y=typeof h;return y=y!="object"?y:h?Array.isArray(h)?"array":y:"null",y=="array"||y=="object"&&typeof h.length=="number"}function c(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function u(h,y,T){return h.call.apply(h.bind,arguments)}function d(h,y,T){if(!h)throw Error();if(2<arguments.length){var F=Array.prototype.slice.call(arguments,2);return function(){var O=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(O,F),h.apply(y,O)}}return function(){return h.apply(y,arguments)}}function f(h,y,T){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:d,f.apply(null,arguments)}function p(h,y){var T=Array.prototype.slice.call(arguments,1);return function(){var F=T.slice();return F.push.apply(F,arguments),h.apply(this,F)}}function m(h,y){function T(){}T.prototype=y.prototype,h.aa=y.prototype,h.prototype=new T,h.prototype.constructor=h,h.Qb=function(F,O,z){for(var J=Array(arguments.length-2),Pe=2;Pe<arguments.length;Pe++)J[Pe-2]=arguments[Pe];return y.prototype[O].apply(F,J)}}function v(h){const y=h.length;if(0<y){const T=Array(y);for(let F=0;F<y;F++)T[F]=h[F];return T}return[]}function E(h,y){for(let T=1;T<arguments.length;T++){const F=arguments[T];if(l(F)){const O=h.length||0,z=F.length||0;h.length=O+z;for(let J=0;J<z;J++)h[O+J]=F[J]}else h.push(F)}}class _{constructor(y,T){this.i=y,this.j=T,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function x(h){return/^[\s\xa0]*$/.test(h)}function w(){var h=a.navigator;return h&&(h=h.userAgent)?h:""}function A(h){return A[" "](h),h}A[" "]=function(){};var P=w().indexOf("Gecko")!=-1&&!(w().toLowerCase().indexOf("webkit")!=-1&&w().indexOf("Edge")==-1)&&!(w().indexOf("Trident")!=-1||w().indexOf("MSIE")!=-1)&&w().indexOf("Edge")==-1;function R(h,y,T){for(const F in h)y.call(T,h[F],F,h)}function C(h,y){for(const T in h)y.call(void 0,h[T],T,h)}function b(h){const y={};for(const T in h)y[T]=h[T];return y}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(h,y){let T,F;for(let O=1;O<arguments.length;O++){F=arguments[O];for(T in F)h[T]=F[T];for(let z=0;z<k.length;z++)T=k[z],Object.prototype.hasOwnProperty.call(F,T)&&(h[T]=F[T])}}function I(h){var y=1;h=h.split(":");const T=[];for(;0<y&&h.length;)T.push(h.shift()),y--;return h.length&&T.push(h.join(":")),T}function N(h){a.setTimeout(()=>{throw h},0)}function D(){var h=W;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class G{constructor(){this.h=this.g=null}add(y,T){const F=q.get();F.set(y,T),this.h?this.h.next=F:this.g=F,this.h=F}}var q=new _(()=>new L,h=>h.reset());class L{constructor(){this.next=this.g=this.h=null}set(y,T){this.h=y,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let X,j=!1,W=new G,Q=()=>{const h=a.Promise.resolve(void 0);X=()=>{h.then(B)}};var B=()=>{for(var h;h=D();){try{h.h.call(h.g)}catch(T){N(T)}var y=q;y.j(h),100>y.h&&(y.h++,h.next=y.g,y.g=h)}j=!1};function V(){this.s=this.s,this.C=this.C}V.prototype.s=!1,V.prototype.ma=function(){this.s||(this.s=!0,this.N())},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function U(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}U.prototype.h=function(){this.defaultPrevented=!0};var H=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const T=()=>{};a.addEventListener("test",T,y),a.removeEventListener("test",T,y)}catch{}return h}();function re(h,y){if(U.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var T=this.type=h.type,F=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget){if(P){e:{try{A(y.nodeName);var O=!0;break e}catch{}O=!1}O||(y=null)}}else T=="mouseover"?y=h.fromElement:T=="mouseout"&&(y=h.toElement);this.relatedTarget=y,F?(this.clientX=F.clientX!==void 0?F.clientX:F.pageX,this.clientY=F.clientY!==void 0?F.clientY:F.pageY,this.screenX=F.screenX||0,this.screenY=F.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:ie[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&re.aa.h.call(this)}}m(re,U);var ie={2:"touch",3:"pen",4:"mouse"};re.prototype.h=function(){re.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Ie="closure_listenable_"+(1e6*Math.random()|0),ue=0;function Ge(h,y,T,F,O){this.listener=h,this.proxy=null,this.src=y,this.type=T,this.capture=!!F,this.ha=O,this.key=++ue,this.da=this.fa=!1}function et(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function ke(h){this.src=h,this.g={},this.h=0}ke.prototype.add=function(h,y,T,F,O){var z=h.toString();h=this.g[z],h||(h=this.g[z]=[],this.h++);var J=Ht(h,y,F,O);return-1<J?(y=h[J],T||(y.fa=!1)):(y=new Ge(y,this.src,z,!!F,O),y.fa=T,h.push(y)),y};function hr(h,y){var T=y.type;if(T in h.g){var F=h.g[T],O=Array.prototype.indexOf.call(F,y,void 0),z;(z=0<=O)&&Array.prototype.splice.call(F,O,1),z&&(et(y),h.g[T].length==0&&(delete h.g[T],h.h--))}}function Ht(h,y,T,F){for(var O=0;O<h.length;++O){var z=h[O];if(!z.da&&z.listener==y&&z.capture==!!T&&z.ha==F)return O}return-1}var yt="closure_lm_"+(1e6*Math.random()|0),Qr={};function Yr(h,y,T,F,O){if(Array.isArray(y)){for(var z=0;z<y.length;z++)Yr(h,y[z],T,F,O);return null}return T=ga(T),h&&h[Ie]?h.K(y,T,c(F)?!!F.capture:!1,O):Zs(h,y,T,!1,F,O)}function Zs(h,y,T,F,O,z){if(!y)throw Error("Invalid event type");var J=c(O)?!!O.capture:!!O,Pe=_n(h);if(Pe||(h[yt]=Pe=new ke(h)),T=Pe.add(y,T,F,J,z),T.proxy)return T;if(F=es(),T.proxy=F,F.src=h,F.listener=T,h.addEventListener)H||(O=J),O===void 0&&(O=!1),h.addEventListener(y.toString(),F,O);else if(h.attachEvent)h.attachEvent(Yt(y.toString()),F);else if(h.addListener&&h.removeListener)h.addListener(F);else throw Error("addEventListener and attachEvent are unavailable.");return T}function es(){function h(T){return y.call(h.src,h.listener,T)}const y=Xt;return h}function eo(h,y,T,F,O){if(Array.isArray(y))for(var z=0;z<y.length;z++)eo(h,y[z],T,F,O);else F=c(F)?!!F.capture:!!F,T=ga(T),h&&h[Ie]?(h=h.i,y=String(y).toString(),y in h.g&&(z=h.g[y],T=Ht(z,T,F,O),-1<T&&(et(z[T]),Array.prototype.splice.call(z,T,1),z.length==0&&(delete h.g[y],h.h--)))):h&&(h=_n(h))&&(y=h.g[y.toString()],h=-1,y&&(h=Ht(y,T,F,O)),(T=-1<h?y[h]:null)&&dr(T))}function dr(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[Ie])hr(y.i,h);else{var T=h.type,F=h.proxy;y.removeEventListener?y.removeEventListener(T,F,h.capture):y.detachEvent?y.detachEvent(Yt(T),F):y.addListener&&y.removeListener&&y.removeListener(F),(T=_n(y))?(hr(T,h),T.h==0&&(T.src=null,y[yt]=null)):et(h)}}}function Yt(h){return h in Qr?Qr[h]:Qr[h]="on"+h}function Xt(h,y){if(h.da)h=!0;else{y=new re(y,this);var T=h.listener,F=h.ha||h.src;h.fa&&dr(h),h=T.call(F,y)}return h}function _n(h){return h=h[yt],h instanceof ke?h:null}var Xr="__closure_events_fn_"+(1e9*Math.random()>>>0);function ga(h){return typeof h=="function"?h:(h[Xr]||(h[Xr]=function(y){return h.handleEvent(y)}),h[Xr])}function Ue(){V.call(this),this.i=new ke(this),this.M=this,this.F=null}m(Ue,V),Ue.prototype[Ie]=!0,Ue.prototype.removeEventListener=function(h,y,T,F){eo(this,h,y,T,F)};function tt(h,y){var T,F=h.F;if(F)for(T=[];F;F=F.F)T.push(F);if(h=h.M,F=y.type||y,typeof y=="string")y=new U(y,h);else if(y instanceof U)y.target=y.target||h;else{var O=y;y=new U(F,h),S(y,O)}if(O=!0,T)for(var z=T.length-1;0<=z;z--){var J=y.g=T[z];O=to(J,F,!0,y)&&O}if(J=y.g=h,O=to(J,F,!0,y)&&O,O=to(J,F,!1,y)&&O,T)for(z=0;z<T.length;z++)J=y.g=T[z],O=to(J,F,!1,y)&&O}Ue.prototype.N=function(){if(Ue.aa.N.call(this),this.i){var h=this.i,y;for(y in h.g){for(var T=h.g[y],F=0;F<T.length;F++)et(T[F]);delete h.g[y],h.h--}}this.F=null},Ue.prototype.K=function(h,y,T,F){return this.i.add(String(h),y,!1,T,F)},Ue.prototype.L=function(h,y,T,F){return this.i.add(String(h),y,!0,T,F)};function to(h,y,T,F){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();for(var O=!0,z=0;z<y.length;++z){var J=y[z];if(J&&!J.da&&J.capture==T){var Pe=J.listener,Et=J.ha||J.src;J.fa&&hr(h.i,J),O=Pe.call(Et,F)!==!1&&O}}return O&&!F.defaultPrevented}function ma(h,y,T){if(typeof h=="function")T&&(h=f(h,T));else if(h&&typeof h.handleEvent=="function")h=f(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:a.setTimeout(h,y||0)}function xa(h){h.g=ma(()=>{h.g=null,h.i&&(h.i=!1,xa(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class Jr extends V{constructor(y,T){super(),this.m=y,this.l=T,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:xa(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Rn(h){V.call(this),this.h=h,this.g={}}m(Rn,V);var Dc=[];function va(h){R(h.g,function(y,T){this.g.hasOwnProperty(T)&&dr(y)},h),h.g={}}Rn.prototype.N=function(){Rn.aa.N.call(this),va(this)},Rn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var no=a.JSON.stringify,mf=a.JSON.parse,xf=class{stringify(h){return a.JSON.stringify(h,void 0)}parse(h){return a.JSON.parse(h,void 0)}};function ro(){}ro.prototype.h=null;function Nc(h){return h.h||(h.h=h.i())}function ya(){}var ts={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function io(){U.call(this,"d")}m(io,U);function _a(){U.call(this,"c")}m(_a,U);var fr={},Fc=null;function ns(){return Fc=Fc||new Ue}fr.La="serverreachability";function Mc(h){U.call(this,fr.La,h)}m(Mc,U);function rs(h){const y=ns();tt(y,new Mc(y))}fr.STAT_EVENT="statevent";function Ea(h,y){U.call(this,fr.STAT_EVENT,h),this.stat=y}m(Ea,U);function _t(h){const y=ns();tt(y,new Ea(y,h))}fr.Ma="timingevent";function wa(h,y){U.call(this,fr.Ma,h),this.size=y}m(wa,U);function ct(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){h()},y)}function Jt(){this.g=!0}Jt.prototype.xa=function(){this.g=!1};function Oc(h,y,T,F,O,z){h.info(function(){if(h.g)if(z)for(var J="",Pe=z.split("&"),Et=0;Et<Pe.length;Et++){var Ee=Pe[Et].split("=");if(1<Ee.length){var kt=Ee[0];Ee=Ee[1];var Pt=kt.split("_");J=2<=Pt.length&&Pt[1]=="type"?J+(kt+"="+Ee+"&"):J+(kt+"=redacted&")}}else J=null;else J=z;return"XMLHTTP REQ ("+F+") [attempt "+O+"]: "+y+`
`+T+`
`+J})}function vf(h,y,T,F,O,z,J){h.info(function(){return"XMLHTTP RESP ("+F+") [ attempt "+O+"]: "+y+`
`+T+`
`+z+" "+J})}function so(h,y,T,F){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+vS(h,T)+(F?" "+F:"")})}function xS(h,y){h.info(function(){return"TIMEOUT: "+y})}Jt.prototype.info=function(){};function vS(h,y){if(!h.g)return y;if(!y)return null;try{var T=JSON.parse(y);if(T){for(h=0;h<T.length;h++)if(Array.isArray(T[h])){var F=T[h];if(!(2>F.length)){var O=F[1];if(Array.isArray(O)&&!(1>O.length)){var z=O[0];if(z!="noop"&&z!="stop"&&z!="close")for(var J=1;J<O.length;J++)O[J]=""}}}}return no(T)}catch{return y}}var Bc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Tv={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},yf;function Lc(){}m(Lc,ro),Lc.prototype.g=function(){return new XMLHttpRequest},Lc.prototype.i=function(){return{}},yf=new Lc;function Zr(h,y,T,F){this.j=h,this.i=y,this.l=T,this.R=F||1,this.U=new Rn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Sv}function Sv(){this.i=null,this.g="",this.h=!1}var Iv={},_f={};function Ef(h,y,T){h.L=1,h.v=Uc(pr(y)),h.m=T,h.P=!0,kv(h,null)}function kv(h,y){h.F=Date.now(),jc(h),h.A=pr(h.v);var T=h.A,F=h.R;Array.isArray(F)||(F=[String(F)]),Hv(T.i,"t",F),h.C=0,T=h.j.J,h.h=new Sv,h.g=ay(h.j,T?y:null,!h.m),0<h.O&&(h.M=new Jr(f(h.Y,h,h.g),h.O)),y=h.U,T=h.g,F=h.ca;var O="readystatechange";Array.isArray(O)||(O&&(Dc[0]=O.toString()),O=Dc);for(var z=0;z<O.length;z++){var J=Yr(T,O[z],F||y.handleEvent,!1,y.h||y);if(!J)break;y.g[J.key]=J}y=h.H?b(h.H):{},h.m?(h.u||(h.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,y)):(h.u="GET",h.g.ea(h.A,h.u,null,y)),rs(),Oc(h.i,h.u,h.A,h.l,h.R,h.m)}Zr.prototype.ca=function(h){h=h.target;const y=this.M;y&&gr(h)==3?y.j():this.Y(h)},Zr.prototype.Y=function(h){try{if(h==this.g)e:{const Pt=gr(this.g);var y=this.g.Ba();const lo=this.g.Z();if(!(3>Pt)&&(Pt!=3||this.g&&(this.h.h||this.g.oa()||Yv(this.g)))){this.J||Pt!=4||y==7||(y==8||0>=lo?rs(3):rs(2)),wf(this);var T=this.g.Z();this.X=T;t:if(Pv(this)){var F=Yv(this.g);h="";var O=F.length,z=gr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){is(this),ba(this);var J="";break t}this.h.i=new a.TextDecoder}for(y=0;y<O;y++)this.h.h=!0,h+=this.h.i.decode(F[y],{stream:!(z&&y==O-1)});F.length=0,this.h.g+=h,this.C=0,J=this.h.g}else J=this.g.oa();if(this.o=T==200,vf(this.i,this.u,this.A,this.l,this.R,Pt,T),this.o){if(this.T&&!this.K){t:{if(this.g){var Pe,Et=this.g;if((Pe=Et.g?Et.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(Pe)){var Ee=Pe;break t}}Ee=null}if(T=Ee)so(this.i,this.l,T,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,bf(this,T);else{this.o=!1,this.s=3,_t(12),is(this),ba(this);break e}}if(this.P){T=!0;let Dn;for(;!this.J&&this.C<J.length;)if(Dn=yS(this,J),Dn==_f){Pt==4&&(this.s=4,_t(14),T=!1),so(this.i,this.l,null,"[Incomplete Response]");break}else if(Dn==Iv){this.s=4,_t(15),so(this.i,this.l,J,"[Invalid Chunk]"),T=!1;break}else so(this.i,this.l,Dn,null),bf(this,Dn);if(Pv(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pt!=4||J.length!=0||this.h.h||(this.s=1,_t(16),T=!1),this.o=this.o&&T,!T)so(this.i,this.l,J,"[Invalid Chunked Response]"),is(this),ba(this);else if(0<J.length&&!this.W){this.W=!0;var kt=this.j;kt.g==this&&kt.ba&&!kt.M&&(kt.j.info("Great, no buffering proxy detected. Bytes received: "+J.length),kf(kt),kt.M=!0,_t(11))}}else so(this.i,this.l,J,null),bf(this,J);Pt==4&&is(this),this.o&&!this.J&&(Pt==4?ry(this.j,this):(this.o=!1,jc(this)))}else OS(this.g),T==400&&0<J.indexOf("Unknown SID")?(this.s=3,_t(12)):(this.s=0,_t(13)),is(this),ba(this)}}}catch{}finally{}};function Pv(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function yS(h,y){var T=h.C,F=y.indexOf(`
`,T);return F==-1?_f:(T=Number(y.substring(T,F)),isNaN(T)?Iv:(F+=1,F+T>y.length?_f:(y=y.slice(F,F+T),h.C=F+T,y)))}Zr.prototype.cancel=function(){this.J=!0,is(this)};function jc(h){h.S=Date.now()+h.I,Rv(h,h.I)}function Rv(h,y){if(h.B!=null)throw Error("WatchDog timer not null");h.B=ct(f(h.ba,h),y)}function wf(h){h.B&&(a.clearTimeout(h.B),h.B=null)}Zr.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(xS(this.i,this.A),this.L!=2&&(rs(),_t(17)),is(this),this.s=2,ba(this)):Rv(this,this.S-h)};function ba(h){h.j.G==0||h.J||ry(h.j,h)}function is(h){wf(h);var y=h.M;y&&typeof y.ma=="function"&&y.ma(),h.M=null,va(h.U),h.g&&(y=h.g,h.g=null,y.abort(),y.ma())}function bf(h,y){try{var T=h.j;if(T.G!=0&&(T.g==h||Cf(T.h,h))){if(!h.K&&Cf(T.h,h)&&T.G==3){try{var F=T.Da.g.parse(y)}catch{F=null}if(Array.isArray(F)&&F.length==3){var O=F;if(O[0]==0){e:if(!T.u){if(T.g)if(T.g.F+3e3<h.F)Gc(T),qc(T);else break e;If(T),_t(18)}}else T.za=O[1],0<T.za-T.T&&37500>O[2]&&T.F&&T.v==0&&!T.C&&(T.C=ct(f(T.Za,T),6e3));if(1>=Fv(T.h)&&T.ca){try{T.ca()}catch{}T.ca=void 0}}else os(T,11)}else if((h.K||T.g==h)&&Gc(T),!x(y))for(O=T.Da.g.parse(y),y=0;y<O.length;y++){let Ee=O[y];if(T.T=Ee[0],Ee=Ee[1],T.G==2)if(Ee[0]=="c"){T.K=Ee[1],T.ia=Ee[2];const kt=Ee[3];kt!=null&&(T.la=kt,T.j.info("VER="+T.la));const Pt=Ee[4];Pt!=null&&(T.Aa=Pt,T.j.info("SVER="+T.Aa));const lo=Ee[5];lo!=null&&typeof lo=="number"&&0<lo&&(F=1.5*lo,T.L=F,T.j.info("backChannelRequestTimeoutMs_="+F)),F=T;const Dn=h.g;if(Dn){const Yc=Dn.g?Dn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Yc){var z=F.h;z.g||Yc.indexOf("spdy")==-1&&Yc.indexOf("quic")==-1&&Yc.indexOf("h2")==-1||(z.j=z.l,z.g=new Set,z.h&&(Af(z,z.h),z.h=null))}if(F.D){const Pf=Dn.g?Dn.g.getResponseHeader("X-HTTP-Session-Id"):null;Pf&&(F.ya=Pf,Ne(F.I,F.D,Pf))}}T.G=3,T.l&&T.l.ua(),T.ba&&(T.R=Date.now()-h.F,T.j.info("Handshake RTT: "+T.R+"ms")),F=T;var J=h;if(F.qa=oy(F,F.J?F.ia:null,F.W),J.K){Mv(F.h,J);var Pe=J,Et=F.L;Et&&(Pe.I=Et),Pe.B&&(wf(Pe),jc(Pe)),F.g=J}else ty(F);0<T.i.length&&Kc(T)}else Ee[0]!="stop"&&Ee[0]!="close"||os(T,7);else T.G==3&&(Ee[0]=="stop"||Ee[0]=="close"?Ee[0]=="stop"?os(T,7):Sf(T):Ee[0]!="noop"&&T.l&&T.l.ta(Ee),T.v=0)}}rs(4)}catch{}}var _S=class{constructor(h,y){this.g=h,this.map=y}};function Dv(h){this.l=h||10,a.PerformanceNavigationTiming?(h=a.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Nv(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Fv(h){return h.h?1:h.g?h.g.size:0}function Cf(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function Af(h,y){h.g?h.g.add(y):h.h=y}function Mv(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}Dv.prototype.cancel=function(){if(this.i=Ov(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Ov(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const T of h.g.values())y=y.concat(T.D);return y}return v(h.i)}function ES(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(l(h)){for(var y=[],T=h.length,F=0;F<T;F++)y.push(h[F]);return y}y=[],T=0;for(F in h)y[T++]=h[F];return y}function wS(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(l(h)||typeof h=="string"){var y=[];h=h.length;for(var T=0;T<h;T++)y.push(T);return y}y=[],T=0;for(const F in h)y[T++]=F;return y}}}function Bv(h,y){if(h.forEach&&typeof h.forEach=="function")h.forEach(y,void 0);else if(l(h)||typeof h=="string")Array.prototype.forEach.call(h,y,void 0);else for(var T=wS(h),F=ES(h),O=F.length,z=0;z<O;z++)y.call(void 0,F[z],T&&T[z],h)}var Lv=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function bS(h,y){if(h){h=h.split("&");for(var T=0;T<h.length;T++){var F=h[T].indexOf("="),O=null;if(0<=F){var z=h[T].substring(0,F);O=h[T].substring(F+1)}else z=h[T];y(z,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function ss(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof ss){this.h=h.h,Vc(this,h.j),this.o=h.o,this.g=h.g,zc(this,h.s),this.l=h.l;var y=h.i,T=new Ta;T.i=y.i,y.g&&(T.g=new Map(y.g),T.h=y.h),jv(this,T),this.m=h.m}else h&&(y=String(h).match(Lv))?(this.h=!1,Vc(this,y[1]||"",!0),this.o=Ca(y[2]||""),this.g=Ca(y[3]||"",!0),zc(this,y[4]),this.l=Ca(y[5]||"",!0),jv(this,y[6]||"",!0),this.m=Ca(y[7]||"")):(this.h=!1,this.i=new Ta(null,this.h))}ss.prototype.toString=function(){var h=[],y=this.j;y&&h.push(Aa(y,Vv,!0),":");var T=this.g;return(T||y=="file")&&(h.push("//"),(y=this.o)&&h.push(Aa(y,Vv,!0),"@"),h.push(encodeURIComponent(String(T)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.s,T!=null&&h.push(":",String(T))),(T=this.l)&&(this.g&&T.charAt(0)!="/"&&h.push("/"),h.push(Aa(T,T.charAt(0)=="/"?TS:AS,!0))),(T=this.i.toString())&&h.push("?",T),(T=this.m)&&h.push("#",Aa(T,IS)),h.join("")};function pr(h){return new ss(h)}function Vc(h,y,T){h.j=T?Ca(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function zc(h,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);h.s=y}else h.s=null}function jv(h,y,T){y instanceof Ta?(h.i=y,kS(h.i,h.h)):(T||(y=Aa(y,SS)),h.i=new Ta(y,h.h))}function Ne(h,y,T){h.i.set(y,T)}function Uc(h){return Ne(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Ca(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Aa(h,y,T){return typeof h=="string"?(h=encodeURI(h).replace(y,CS),T&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function CS(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Vv=/[#\/\?@]/g,AS=/[#\?:]/g,TS=/[#\?]/g,SS=/[#\?@]/g,IS=/#/g;function Ta(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function ei(h){h.g||(h.g=new Map,h.h=0,h.i&&bS(h.i,function(y,T){h.add(decodeURIComponent(y.replace(/\+/g," ")),T)}))}t=Ta.prototype,t.add=function(h,y){ei(this),this.i=null,h=oo(this,h);var T=this.g.get(h);return T||this.g.set(h,T=[]),T.push(y),this.h+=1,this};function zv(h,y){ei(h),y=oo(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function Uv(h,y){return ei(h),y=oo(h,y),h.g.has(y)}t.forEach=function(h,y){ei(this),this.g.forEach(function(T,F){T.forEach(function(O){h.call(y,O,F,this)},this)},this)},t.na=function(){ei(this);const h=Array.from(this.g.values()),y=Array.from(this.g.keys()),T=[];for(let F=0;F<y.length;F++){const O=h[F];for(let z=0;z<O.length;z++)T.push(y[F])}return T},t.V=function(h){ei(this);let y=[];if(typeof h=="string")Uv(this,h)&&(y=y.concat(this.g.get(oo(this,h))));else{h=Array.from(this.g.values());for(let T=0;T<h.length;T++)y=y.concat(h[T])}return y},t.set=function(h,y){return ei(this),this.i=null,h=oo(this,h),Uv(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},t.get=function(h,y){return h?(h=this.V(h),0<h.length?String(h[0]):y):y};function Hv(h,y,T){zv(h,y),0<T.length&&(h.i=null,h.g.set(oo(h,y),v(T)),h.h+=T.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(var T=0;T<y.length;T++){var F=y[T];const z=encodeURIComponent(String(F)),J=this.V(F);for(F=0;F<J.length;F++){var O=z;J[F]!==""&&(O+="="+encodeURIComponent(String(J[F]))),h.push(O)}}return this.i=h.join("&")};function oo(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function kS(h,y){y&&!h.j&&(ei(h),h.i=null,h.g.forEach(function(T,F){var O=F.toLowerCase();F!=O&&(zv(this,F),Hv(this,O,T))},h)),h.j=y}function PS(h,y){const T=new Jt;if(a.Image){const F=new Image;F.onload=p(ti,T,"TestLoadImage: loaded",!0,y,F),F.onerror=p(ti,T,"TestLoadImage: error",!1,y,F),F.onabort=p(ti,T,"TestLoadImage: abort",!1,y,F),F.ontimeout=p(ti,T,"TestLoadImage: timeout",!1,y,F),a.setTimeout(function(){F.ontimeout&&F.ontimeout()},1e4),F.src=h}else y(!1)}function RS(h,y){const T=new Jt,F=new AbortController,O=setTimeout(()=>{F.abort(),ti(T,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:F.signal}).then(z=>{clearTimeout(O),z.ok?ti(T,"TestPingServer: ok",!0,y):ti(T,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(O),ti(T,"TestPingServer: error",!1,y)})}function ti(h,y,T,F,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),F(T)}catch{}}function DS(){this.g=new xf}function NS(h,y,T){const F=T||"";try{Bv(h,function(O,z){let J=O;c(O)&&(J=no(O)),y.push(F+z+"="+encodeURIComponent(J))})}catch(O){throw y.push(F+"type="+encodeURIComponent("_badmap")),O}}function Hc(h){this.l=h.Ub||null,this.j=h.eb||!1}m(Hc,ro),Hc.prototype.g=function(){return new Wc(this.l,this.j)},Hc.prototype.i=function(h){return function(){return h}}({});function Wc(h,y){Ue.call(this),this.D=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}m(Wc,Ue),t=Wc.prototype,t.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=y,this.readyState=1,Ia(this)},t.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(y.body=h),(this.D||a).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Sa(this)),this.readyState=0},t.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Ia(this)),this.g&&(this.readyState=3,Ia(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Wv(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function Wv(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}t.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?Sa(this):Ia(this),this.readyState==3&&Wv(this)}},t.Ra=function(h){this.g&&(this.response=this.responseText=h,Sa(this))},t.Qa=function(h){this.g&&(this.response=h,Sa(this))},t.ga=function(){this.g&&Sa(this)};function Sa(h){h.readyState=4,h.l=null,h.j=null,h.v=null,Ia(h)}t.setRequestHeader=function(h,y){this.u.append(h,y)},t.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var T=y.next();!T.done;)T=T.value,h.push(T[0]+": "+T[1]),T=y.next();return h.join(`\r
`)};function Ia(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Wc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function $v(h){let y="";return R(h,function(T,F){y+=F,y+=":",y+=T,y+=`\r
`}),y}function Tf(h,y,T){e:{for(F in T){var F=!1;break e}F=!0}F||(T=$v(T),typeof h=="string"?T!=null&&encodeURIComponent(String(T)):Ne(h,y,T))}function Qe(h){Ue.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}m(Qe,Ue);var FS=/^https?$/i,MS=["POST","PUT"];t=Qe.prototype,t.Ha=function(h){this.J=h},t.ea=function(h,y,T,F){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():yf.g(),this.v=this.o?Nc(this.o):Nc(yf),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(z){qv(this,z);return}if(h=T||"",T=new Map(this.headers),F)if(Object.getPrototypeOf(F)===Object.prototype)for(var O in F)T.set(O,F[O]);else if(typeof F.keys=="function"&&typeof F.get=="function")for(const z of F.keys())T.set(z,F.get(z));else throw Error("Unknown input type for opt_headers: "+String(F));F=Array.from(T.keys()).find(z=>z.toLowerCase()=="content-type"),O=a.FormData&&h instanceof a.FormData,!(0<=Array.prototype.indexOf.call(MS,y,void 0))||F||O||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[z,J]of T)this.g.setRequestHeader(z,J);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Qv(this),this.u=!0,this.g.send(h),this.u=!1}catch(z){qv(this,z)}};function qv(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.m=5,Kv(h),$c(h)}function Kv(h){h.A||(h.A=!0,tt(h,"complete"),tt(h,"error"))}t.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,tt(this,"complete"),tt(this,"abort"),$c(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),$c(this,!0)),Qe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Gv(this):this.bb())},t.bb=function(){Gv(this)};function Gv(h){if(h.h&&typeof o<"u"&&(!h.v[1]||gr(h)!=4||h.Z()!=2)){if(h.u&&gr(h)==4)ma(h.Ea,0,h);else if(tt(h,"readystatechange"),gr(h)==4){h.h=!1;try{const J=h.Z();e:switch(J){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var T;if(!(T=y)){var F;if(F=J===0){var O=String(h.D).match(Lv)[1]||null;!O&&a.self&&a.self.location&&(O=a.self.location.protocol.slice(0,-1)),F=!FS.test(O?O.toLowerCase():"")}T=F}if(T)tt(h,"complete"),tt(h,"success");else{h.m=6;try{var z=2<gr(h)?h.g.statusText:""}catch{z=""}h.l=z+" ["+h.Z()+"]",Kv(h)}}finally{$c(h)}}}}function $c(h,y){if(h.g){Qv(h);const T=h.g,F=h.v[0]?()=>{}:null;h.g=null,h.v=null,y||tt(h,"ready");try{T.onreadystatechange=F}catch{}}}function Qv(h){h.I&&(a.clearTimeout(h.I),h.I=null)}t.isActive=function(){return!!this.g};function gr(h){return h.g?h.g.readyState:0}t.Z=function(){try{return 2<gr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),mf(y)}};function Yv(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function OS(h){const y={};h=(h.g&&2<=gr(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let F=0;F<h.length;F++){if(x(h[F]))continue;var T=I(h[F]);const O=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const z=y[O]||[];y[O]=z,z.push(T)}C(y,function(F){return F.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ka(h,y,T){return T&&T.internalChannelParams&&T.internalChannelParams[h]||y}function Xv(h){this.Aa=0,this.i=[],this.j=new Jt,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ka("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ka("baseRetryDelayMs",5e3,h),this.cb=ka("retryDelaySeedMs",1e4,h),this.Wa=ka("forwardChannelMaxRetries",2,h),this.wa=ka("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new Dv(h&&h.concurrentRequestLimit),this.Da=new DS,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Xv.prototype,t.la=8,t.G=1,t.connect=function(h,y,T,F){_t(0),this.W=h,this.H=y||{},T&&F!==void 0&&(this.H.OSID=T,this.H.OAID=F),this.F=this.X,this.I=oy(this,null,this.W),Kc(this)};function Sf(h){if(Jv(h),h.G==3){var y=h.U++,T=pr(h.I);if(Ne(T,"SID",h.K),Ne(T,"RID",y),Ne(T,"TYPE","terminate"),Pa(h,T),y=new Zr(h,h.j,y),y.L=2,y.v=Uc(pr(T)),T=!1,a.navigator&&a.navigator.sendBeacon)try{T=a.navigator.sendBeacon(y.v.toString(),"")}catch{}!T&&a.Image&&(new Image().src=y.v,T=!0),T||(y.g=ay(y.j,null),y.g.ea(y.v)),y.F=Date.now(),jc(y)}sy(h)}function qc(h){h.g&&(kf(h),h.g.cancel(),h.g=null)}function Jv(h){qc(h),h.u&&(a.clearTimeout(h.u),h.u=null),Gc(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&a.clearTimeout(h.s),h.s=null)}function Kc(h){if(!Nv(h.h)&&!h.s){h.s=!0;var y=h.Ga;X||Q(),j||(X(),j=!0),W.add(y,h),h.B=0}}function BS(h,y){return Fv(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=y.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=ct(f(h.Ga,h,y),iy(h,h.B)),h.B++,!0)}t.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const O=new Zr(this,this.j,h);let z=this.o;if(this.S&&(z?(z=b(z),S(z,this.S)):z=this.S),this.m!==null||this.O||(O.H=z,z=null),this.P)e:{for(var y=0,T=0;T<this.i.length;T++){t:{var F=this.i[T];if("__data__"in F.map&&(F=F.map.__data__,typeof F=="string")){F=F.length;break t}F=void 0}if(F===void 0)break;if(y+=F,4096<y){y=T;break e}if(y===4096||T===this.i.length-1){y=T+1;break e}}y=1e3}else y=1e3;y=ey(this,O,y),T=pr(this.I),Ne(T,"RID",h),Ne(T,"CVER",22),this.D&&Ne(T,"X-HTTP-Session-Id",this.D),Pa(this,T),z&&(this.O?y="headers="+encodeURIComponent(String($v(z)))+"&"+y:this.m&&Tf(T,this.m,z)),Af(this.h,O),this.Ua&&Ne(T,"TYPE","init"),this.P?(Ne(T,"$req",y),Ne(T,"SID","null"),O.T=!0,Ef(O,T,null)):Ef(O,T,y),this.G=2}}else this.G==3&&(h?Zv(this,h):this.i.length==0||Nv(this.h)||Zv(this))};function Zv(h,y){var T;y?T=y.l:T=h.U++;const F=pr(h.I);Ne(F,"SID",h.K),Ne(F,"RID",T),Ne(F,"AID",h.T),Pa(h,F),h.m&&h.o&&Tf(F,h.m,h.o),T=new Zr(h,h.j,T,h.B+1),h.m===null&&(T.H=h.o),y&&(h.i=y.D.concat(h.i)),y=ey(h,T,1e3),T.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),Af(h.h,T),Ef(T,F,y)}function Pa(h,y){h.H&&R(h.H,function(T,F){Ne(y,F,T)}),h.l&&Bv({},function(T,F){Ne(y,F,T)})}function ey(h,y,T){T=Math.min(h.i.length,T);var F=h.l?f(h.l.Na,h.l,h):null;e:{var O=h.i;let z=-1;for(;;){const J=["count="+T];z==-1?0<T?(z=O[0].g,J.push("ofs="+z)):z=0:J.push("ofs="+z);let Pe=!0;for(let Et=0;Et<T;Et++){let Ee=O[Et].g;const kt=O[Et].map;if(Ee-=z,0>Ee)z=Math.max(0,O[Et].g-100),Pe=!1;else try{NS(kt,J,"req"+Ee+"_")}catch{F&&F(kt)}}if(Pe){F=J.join("&");break e}}}return h=h.i.splice(0,T),y.D=h,F}function ty(h){if(!h.g&&!h.u){h.Y=1;var y=h.Fa;X||Q(),j||(X(),j=!0),W.add(y,h),h.v=0}}function If(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=ct(f(h.Fa,h),iy(h,h.v)),h.v++,!0)}t.Fa=function(){if(this.u=null,ny(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=ct(f(this.ab,this),h)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,_t(10),qc(this),ny(this))};function kf(h){h.A!=null&&(a.clearTimeout(h.A),h.A=null)}function ny(h){h.g=new Zr(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var y=pr(h.qa);Ne(y,"RID","rpc"),Ne(y,"SID",h.K),Ne(y,"AID",h.T),Ne(y,"CI",h.F?"0":"1"),!h.F&&h.ja&&Ne(y,"TO",h.ja),Ne(y,"TYPE","xmlhttp"),Pa(h,y),h.m&&h.o&&Tf(y,h.m,h.o),h.L&&(h.g.I=h.L);var T=h.g;h=h.ia,T.L=1,T.v=Uc(pr(y)),T.m=null,T.P=!0,kv(T,h)}t.Za=function(){this.C!=null&&(this.C=null,qc(this),If(this),_t(19))};function Gc(h){h.C!=null&&(a.clearTimeout(h.C),h.C=null)}function ry(h,y){var T=null;if(h.g==y){Gc(h),kf(h),h.g=null;var F=2}else if(Cf(h.h,y))T=y.D,Mv(h.h,y),F=1;else return;if(h.G!=0){if(y.o)if(F==1){T=y.m?y.m.length:0,y=Date.now()-y.F;var O=h.B;F=ns(),tt(F,new wa(F,T)),Kc(h)}else ty(h);else if(O=y.s,O==3||O==0&&0<y.X||!(F==1&&BS(h,y)||F==2&&If(h)))switch(T&&0<T.length&&(y=h.h,y.i=y.i.concat(T)),O){case 1:os(h,5);break;case 4:os(h,10);break;case 3:os(h,6);break;default:os(h,2)}}}function iy(h,y){let T=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(T*=2),T*y}function os(h,y){if(h.j.info("Error code "+y),y==2){var T=f(h.fb,h),F=h.Xa;const O=!F;F=new ss(F||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Vc(F,"https"),Uc(F),O?PS(F.toString(),T):RS(F.toString(),T)}else _t(2);h.G=0,h.l&&h.l.sa(y),sy(h),Jv(h)}t.fb=function(h){h?(this.j.info("Successfully pinged google.com"),_t(2)):(this.j.info("Failed to ping google.com"),_t(1))};function sy(h){if(h.G=0,h.ka=[],h.l){const y=Ov(h.h);(y.length!=0||h.i.length!=0)&&(E(h.ka,y),E(h.ka,h.i),h.h.i.length=0,v(h.i),h.i.length=0),h.l.ra()}}function oy(h,y,T){var F=T instanceof ss?pr(T):new ss(T);if(F.g!="")y&&(F.g=y+"."+F.g),zc(F,F.s);else{var O=a.location;F=O.protocol,y=y?y+"."+O.hostname:O.hostname,O=+O.port;var z=new ss(null);F&&Vc(z,F),y&&(z.g=y),O&&zc(z,O),T&&(z.l=T),F=z}return T=h.D,y=h.ya,T&&y&&Ne(F,T,y),Ne(F,"VER",h.la),Pa(h,F),F}function ay(h,y,T){if(y&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Ca&&!h.pa?new Qe(new Hc({eb:T})):new Qe(h.pa),y.Ha(h.J),y}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function ly(){}t=ly.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Qc(){}Qc.prototype.g=function(h,y){return new un(h,y)};function un(h,y){Ue.call(this),this.g=new Xv(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(h?h["X-WebChannel-Client-Profile"]=y.va:h={"X-WebChannel-Client-Profile":y.va}),this.g.S=h,(h=y&&y.Sb)&&!x(h)&&(this.g.m=h),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!x(y)&&(this.g.D=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new ao(this)}m(un,Ue),un.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},un.prototype.close=function(){Sf(this.g)},un.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var T={};T.__data__=h,h=T}else this.u&&(T={},T.__data__=no(h),h=T);y.i.push(new _S(y.Ya++,h)),y.G==3&&Kc(y)},un.prototype.N=function(){this.g.l=null,delete this.j,Sf(this.g),delete this.g,un.aa.N.call(this)};function cy(h){io.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const T in y){h=T;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}m(cy,io);function uy(){_a.call(this),this.status=1}m(uy,_a);function ao(h){this.g=h}m(ao,ly),ao.prototype.ua=function(){tt(this.g,"a")},ao.prototype.ta=function(h){tt(this.g,new cy(h))},ao.prototype.sa=function(h){tt(this.g,new uy)},ao.prototype.ra=function(){tt(this.g,"b")},Qc.prototype.createWebChannel=Qc.prototype.g,un.prototype.send=un.prototype.o,un.prototype.open=un.prototype.m,un.prototype.close=un.prototype.close,SC=function(){return new Qc},TC=function(){return ns()},AC=fr,vg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Bc.NO_ERROR=0,Bc.TIMEOUT=8,Bc.HTTP_ERROR=6,Zu=Bc,Tv.COMPLETE="complete",CC=Tv,ya.EventType=ts,ts.OPEN="a",ts.CLOSE="b",ts.ERROR="c",ts.MESSAGE="d",Ue.prototype.listen=Ue.prototype.K,Ja=ya,Qe.prototype.listenOnce=Qe.prototype.L,Qe.prototype.getLastError=Qe.prototype.Ka,Qe.prototype.getLastErrorCode=Qe.prototype.Ba,Qe.prototype.getStatus=Qe.prototype.Z,Qe.prototype.getResponseJson=Qe.prototype.Oa,Qe.prototype.getResponseText=Qe.prototype.oa,Qe.prototype.send=Qe.prototype.ea,Qe.prototype.setWithCredentials=Qe.prototype.Ha,bC=Qe}).apply(typeof gu<"u"?gu:typeof self<"u"?self:typeof window<"u"?window:{});const r_="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Mt.UNAUTHENTICATED=new Mt(null),Mt.GOOGLE_CREDENTIALS=new Mt("google-credentials-uid"),Mt.FIRST_PARTY=new Mt("first-party-uid"),Mt.MOCK_USER=new Mt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ha="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bs=new Xm("@firebase/firestore");function ja(){return Bs.logLevel}function ne(t,...e){if(Bs.logLevel<=xe.DEBUG){const n=e.map(cx);Bs.debug(`Firestore (${ha}): ${t}`,...n)}}function Ur(t,...e){if(Bs.logLevel<=xe.ERROR){const n=e.map(cx);Bs.error(`Firestore (${ha}): ${t}`,...n)}}function Qo(t,...e){if(Bs.logLevel<=xe.WARN){const n=e.map(cx);Bs.warn(`Firestore (${ha}): ${t}`,...n)}}function cx(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ae(t="Unexpected state"){const e=`FIRESTORE (${ha}) INTERNAL ASSERTION FAILED: `+t;throw Ur(e),new Error(e)}function Te(t,e){t||ae()}function ce(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ee extends cr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class mD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Mt.UNAUTHENTICATED))}shutdown(){}}class xD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class vD{constructor(e){this.t=e,this.currentUser=Mt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Te(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new Fr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Fr,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Fr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Te(typeof r.accessToken=="string"),new IC(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Te(e===null||typeof e=="string"),new Mt(e)}}class yD{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Mt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class _D{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new yD(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Mt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ED{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class wD{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Te(this.o===void 0);const r=s=>{s.error!=null&&ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,ne("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Te(typeof n.token=="string"),this.R=n.token,new ED(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bD(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=bD(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function we(t,e){return t<e?-1:t>e?1:0}function Yo(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ee($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ee($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ee($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ee($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ft.fromMillis(Date.now())}static fromDate(e){return ft.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new ft(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?we(this.nanoseconds,e.nanoseconds):we(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(e){this.timestamp=e}static fromTimestamp(e){return new le(e)}static min(){return new le(new ft(0,0))}static max(){return new le(new ft(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql{constructor(e,n,r){n===void 0?n=0:n>e.length&&ae(),r===void 0?r=e.length-n:r>e.length-n&&ae(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ql.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ql?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Me extends Ql{construct(e,n,r){return new Me(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ee($.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Me(n)}static emptyPath(){return new Me([])}}const CD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ct extends Ql{construct(e,n,r){return new Ct(e,n,r)}static isValidIdentifier(e){return CD.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ct.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ct(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new ee($.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new ee($.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new ee($.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new ee($.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ct(n)}static emptyPath(){return new Ct([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.path=e}static fromPath(e){return new se(Me.fromString(e))}static fromName(e){return new se(Me.fromString(e).popFirst(5))}static empty(){return new se(Me.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Me.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Me.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new se(new Me(e.slice()))}}function AD(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=le.fromTimestamp(r===1e9?new ft(n+1,0):new ft(n,r));return new Vi(i,se.empty(),e)}function TD(t){return new Vi(t.readTime,t.key,-1)}class Vi{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Vi(le.min(),se.empty(),-1)}static max(){return new Vi(le.max(),se.empty(),-1)}}function SD(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=se.comparator(t.documentKey,e.documentKey),n!==0?n:we(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ID="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class kD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wc(t){if(t.code!==$.FAILED_PRECONDITION||t.message!==ID)throw t;ne("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ae(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new K((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof K?n:K.resolve(n)}catch(n){return K.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):K.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):K.reject(n)}static resolve(e){return new K((n,r)=>{n(e)})}static reject(e){return new K((n,r)=>{r(e)})}static waitFor(e){return new K((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=K.resolve(!1);for(const r of e)n=n.next(i=>i?K.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new K((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(u=>{o[c]=u,++a,a===s&&r(o)},u=>i(u))}})}static doWhile(e,n){return new K((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function PD(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function bc(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}ux.oe=-1;function jd(t){return t==null}function Yh(t){return t===0&&1/t==-1/0}function RD(t){return typeof t=="number"&&Number.isInteger(t)&&!Yh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i_(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Gs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function PC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(e,n){this.comparator=e,this.root=n||bt.EMPTY}insert(e,n){return new Ke(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,bt.BLACK,null,null))}remove(e){return new Ke(this.comparator,this.root.remove(e,this.comparator).copy(null,null,bt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new mu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new mu(this.root,e,this.comparator,!1)}getReverseIterator(){return new mu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new mu(this.root,e,this.comparator,!0)}}class mu{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class bt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??bt.RED,this.left=i??bt.EMPTY,this.right=s??bt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new bt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return bt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return bt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,bt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,bt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ae();const e=this.left.check();if(e!==this.right.check())throw ae();return e+(this.isRed()?0:1)}}bt.EMPTY=null,bt.RED=!0,bt.BLACK=!1;bt.EMPTY=new class{constructor(){this.size=0}get key(){throw ae()}get value(){throw ae()}get color(){throw ae()}get left(){throw ae()}get right(){throw ae()}copy(e,n,r,i,s){return this}insert(e,n,r){return new bt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e){this.comparator=e,this.data=new Ke(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new s_(this.data.getIterator())}getIteratorFrom(e){return new s_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Tt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Tt(this.comparator);return n.data=e,n}}class s_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e){this.fields=e,e.sort(Ct.comparator)}static empty(){return new gn([])}unionWith(e){let n=new Tt(Ct.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new gn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Yo(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new RC("Invalid base64 string: "+s):s}}(e);return new It(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new It(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return we(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}It.EMPTY_BYTE_STRING=new It("");const DD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function zi(t){if(Te(!!t),typeof t=="string"){let e=0;const n=DD.exec(t);if(Te(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:nt(t.seconds),nanos:nt(t.nanos)}}function nt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ls(t){return typeof t=="string"?It.fromBase64String(t):It.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hx(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function dx(t){const e=t.mapValue.fields.__previous_value__;return hx(e)?dx(e):e}function Yl(t){const e=zi(t.mapValue.fields.__local_write_time__.timestampValue);return new ft(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{constructor(e,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Xl{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Xl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Xl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xu={mapValue:{}};function js(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?hx(t)?4:MD(t)?9007199254740991:FD(t)?10:11:ae()}function ar(t,e){if(t===e)return!0;const n=js(t);if(n!==js(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Yl(t).isEqual(Yl(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=zi(i.timestampValue),a=zi(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Ls(i.bytesValue).isEqual(Ls(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return nt(i.geoPointValue.latitude)===nt(s.geoPointValue.latitude)&&nt(i.geoPointValue.longitude)===nt(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return nt(i.integerValue)===nt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=nt(i.doubleValue),a=nt(s.doubleValue);return o===a?Yh(o)===Yh(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Yo(t.arrayValue.values||[],e.arrayValue.values||[],ar);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(i_(o)!==i_(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!ar(o[l],a[l])))return!1;return!0}(t,e);default:return ae()}}function Jl(t,e){return(t.values||[]).find(n=>ar(n,e))!==void 0}function Xo(t,e){if(t===e)return 0;const n=js(t),r=js(e);if(n!==r)return we(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return we(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=nt(s.integerValue||s.doubleValue),l=nt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return o_(t.timestampValue,e.timestampValue);case 4:return o_(Yl(t),Yl(e));case 5:return we(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Ls(s),l=Ls(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=we(a[c],l[c]);if(u!==0)return u}return we(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=we(nt(s.latitude),nt(o.latitude));return a!==0?a:we(nt(s.longitude),nt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return a_(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,c,u;const d=s.fields||{},f=o.fields||{},p=(a=d.value)===null||a===void 0?void 0:a.arrayValue,m=(l=f.value)===null||l===void 0?void 0:l.arrayValue,v=we(((c=p==null?void 0:p.values)===null||c===void 0?void 0:c.length)||0,((u=m==null?void 0:m.values)===null||u===void 0?void 0:u.length)||0);return v!==0?v:a_(p,m)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===xu.mapValue&&o===xu.mapValue)return 0;if(s===xu.mapValue)return 1;if(o===xu.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let d=0;d<l.length&&d<u.length;++d){const f=we(l[d],u[d]);if(f!==0)return f;const p=Xo(a[l[d]],c[u[d]]);if(p!==0)return p}return we(l.length,u.length)}(t.mapValue,e.mapValue);default:throw ae()}}function o_(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return we(t,e);const n=zi(t),r=zi(e),i=we(n.seconds,r.seconds);return i!==0?i:we(n.nanos,r.nanos)}function a_(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Xo(n[i],r[i]);if(s)return s}return we(n.length,r.length)}function Jo(t){return yg(t)}function yg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=zi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ls(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return se.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=yg(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${yg(n.fields[o])}`;return i+"}"}(t.mapValue):ae()}function l_(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function _g(t){return!!t&&"integerValue"in t}function fx(t){return!!t&&"arrayValue"in t}function c_(t){return!!t&&"nullValue"in t}function u_(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function eh(t){return!!t&&"mapValue"in t}function FD(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function vl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Gs(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=vl(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=vl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function MD(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.value=e}static empty(){return new tn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!eh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=vl(n)}setAll(e){let n=Ct.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=vl(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());eh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ar(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];eh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Gs(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new tn(vl(this.value))}}function DC(t){const e=[];return Gs(t.fields,(n,r)=>{const i=new Ct([n]);if(eh(r)){const s=DC(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new gn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Bt(e,0,le.min(),le.min(),le.min(),tn.empty(),0)}static newFoundDocument(e,n,r,i){return new Bt(e,1,n,le.min(),r,i,0)}static newNoDocument(e,n){return new Bt(e,2,n,le.min(),le.min(),tn.empty(),0)}static newUnknownDocument(e,n){return new Bt(e,3,n,le.min(),le.min(),tn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=tn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=tn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Bt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Bt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(e,n){this.position=e,this.inclusive=n}}function h_(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=se.comparator(se.fromName(o.referenceValue),n.key):r=Xo(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function d_(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ar(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(e,n="asc"){this.field=e,this.dir=n}}function OD(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{}class lt extends NC{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new LD(e,n,r):n==="array-contains"?new zD(e,r):n==="in"?new UD(e,r):n==="not-in"?new HD(e,r):n==="array-contains-any"?new WD(e,r):new lt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new jD(e,r):new VD(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Xo(n,this.value)):n!==null&&js(this.value)===js(n)&&this.matchesComparison(Xo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ae()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Wn extends NC{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Wn(e,n)}matches(e){return FC(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function FC(t){return t.op==="and"}function MC(t){return BD(t)&&FC(t)}function BD(t){for(const e of t.filters)if(e instanceof Wn)return!1;return!0}function Eg(t){if(t instanceof lt)return t.field.canonicalString()+t.op.toString()+Jo(t.value);if(MC(t))return t.filters.map(e=>Eg(e)).join(",");{const e=t.filters.map(n=>Eg(n)).join(",");return`${t.op}(${e})`}}function OC(t,e){return t instanceof lt?function(r,i){return i instanceof lt&&r.op===i.op&&r.field.isEqual(i.field)&&ar(r.value,i.value)}(t,e):t instanceof Wn?function(r,i){return i instanceof Wn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&OC(o,i.filters[a]),!0):!1}(t,e):void ae()}function BC(t){return t instanceof lt?function(n){return`${n.field.canonicalString()} ${n.op} ${Jo(n.value)}`}(t):t instanceof Wn?function(n){return n.op.toString()+" {"+n.getFilters().map(BC).join(" ,")+"}"}(t):"Filter"}class LD extends lt{constructor(e,n,r){super(e,n,r),this.key=se.fromName(r.referenceValue)}matches(e){const n=se.comparator(e.key,this.key);return this.matchesComparison(n)}}class jD extends lt{constructor(e,n){super(e,"in",n),this.keys=LC("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class VD extends lt{constructor(e,n){super(e,"not-in",n),this.keys=LC("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function LC(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>se.fromName(r.referenceValue))}class zD extends lt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return fx(n)&&Jl(n.arrayValue,this.value)}}class UD extends lt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Jl(this.value.arrayValue,n)}}class HD extends lt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Jl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Jl(this.value.arrayValue,n)}}class WD extends lt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!fx(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Jl(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $D{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function f_(t,e=null,n=[],r=[],i=null,s=null,o=null){return new $D(t,e,n,r,i,s,o)}function px(t){const e=ce(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Eg(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),jd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Jo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Jo(r)).join(",")),e.ue=n}return e.ue}function gx(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!OD(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!OC(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!d_(t.startAt,e.startAt)&&d_(t.endAt,e.endAt)}function wg(t){return se.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function qD(t,e,n,r,i,s,o,a){return new da(t,e,n,r,i,s,o,a)}function Vd(t){return new da(t)}function p_(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function jC(t){return t.collectionGroup!==null}function yl(t){const e=ce(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Tt(Ct.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Zl(s,r))}),n.has(Ct.keyField().canonicalString())||e.ce.push(new Zl(Ct.keyField(),r))}return e.ce}function ir(t){const e=ce(t);return e.le||(e.le=KD(e,yl(t))),e.le}function KD(t,e){if(t.limitType==="F")return f_(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Zl(i.field,s)});const n=t.endAt?new Xh(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Xh(t.startAt.position,t.startAt.inclusive):null;return f_(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function bg(t,e){const n=t.filters.concat([e]);return new da(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Cg(t,e,n){return new da(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function zd(t,e){return gx(ir(t),ir(e))&&t.limitType===e.limitType}function VC(t){return`${px(ir(t))}|lt:${t.limitType}`}function po(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>BC(i)).join(", ")}]`),jd(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Jo(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Jo(i)).join(",")),`Target(${r})`}(ir(t))}; limitType=${t.limitType})`}function Ud(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):se.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of yl(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=h_(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,yl(r),i)||r.endAt&&!function(o,a,l){const c=h_(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,yl(r),i))}(t,e)}function GD(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function zC(t){return(e,n)=>{let r=!1;for(const i of yl(t)){const s=QD(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function QD(t,e,n){const r=t.field.isKeyField()?se.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?Xo(l,c):ae()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ae()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Gs(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return PC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YD=new Ke(se.comparator);function Hr(){return YD}const UC=new Ke(se.comparator);function Za(...t){let e=UC;for(const n of t)e=e.insert(n.key,n);return e}function HC(t){let e=UC;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ys(){return _l()}function WC(){return _l()}function _l(){return new fa(t=>t.toString(),(t,e)=>t.isEqual(e))}const XD=new Ke(se.comparator),JD=new Tt(se.comparator);function ge(...t){let e=JD;for(const n of t)e=e.add(n);return e}const ZD=new Tt(we);function e5(){return ZD}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mx(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Yh(e)?"-0":e}}function $C(t){return{integerValue:""+t}}function t5(t,e){return RD(e)?$C(e):mx(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{constructor(){this._=void 0}}function n5(t,e,n){return t instanceof ec?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&hx(s)&&(s=dx(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof tc?KC(t,e):t instanceof nc?GC(t,e):function(i,s){const o=qC(i,s),a=g_(o)+g_(i.Pe);return _g(o)&&_g(i.Pe)?$C(a):mx(i.serializer,a)}(t,e)}function r5(t,e,n){return t instanceof tc?KC(t,e):t instanceof nc?GC(t,e):n}function qC(t,e){return t instanceof Jh?function(r){return _g(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class ec extends Hd{}class tc extends Hd{constructor(e){super(),this.elements=e}}function KC(t,e){const n=QC(e);for(const r of t.elements)n.some(i=>ar(i,r))||n.push(r);return{arrayValue:{values:n}}}class nc extends Hd{constructor(e){super(),this.elements=e}}function GC(t,e){let n=QC(e);for(const r of t.elements)n=n.filter(i=>!ar(i,r));return{arrayValue:{values:n}}}class Jh extends Hd{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function g_(t){return nt(t.integerValue||t.doubleValue)}function QC(t){return fx(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i5{constructor(e,n){this.field=e,this.transform=n}}function s5(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof tc&&i instanceof tc||r instanceof nc&&i instanceof nc?Yo(r.elements,i.elements,ar):r instanceof Jh&&i instanceof Jh?ar(r.Pe,i.Pe):r instanceof ec&&i instanceof ec}(t.transform,e.transform)}class o5{constructor(e,n){this.version=e,this.transformResults=n}}class Sn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Sn}static exists(e){return new Sn(void 0,e)}static updateTime(e){return new Sn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function th(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Wd{}function YC(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new xx(t.key,Sn.none()):new Cc(t.key,t.data,Sn.none());{const n=t.data,r=tn.empty();let i=new Tt(Ct.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Yi(t.key,r,new gn(i.toArray()),Sn.none())}}function a5(t,e,n){t instanceof Cc?function(i,s,o){const a=i.value.clone(),l=x_(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Yi?function(i,s,o){if(!th(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=x_(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(XC(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function El(t,e,n,r){return t instanceof Cc?function(s,o,a,l){if(!th(s.precondition,o))return a;const c=s.value.clone(),u=v_(s.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Yi?function(s,o,a,l){if(!th(s.precondition,o))return a;const c=v_(s.fieldTransforms,l,o),u=o.data;return u.setAll(XC(s)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(s,o,a){return th(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function l5(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=qC(r.transform,i||null);s!=null&&(n===null&&(n=tn.empty()),n.set(r.field,s))}return n||null}function m_(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Yo(r,i,(s,o)=>s5(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Cc extends Wd{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Yi extends Wd{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function XC(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function x_(t,e,n){const r=new Map;Te(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,r5(o,a,n[i]))}return r}function v_(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,n5(s,o,e))}return r}class xx extends Wd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class c5 extends Wd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u5{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&a5(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=El(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=El(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=WC();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=YC(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(le.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ge())}isEqual(e){return this.batchId===e.batchId&&Yo(this.mutations,e.mutations,(n,r)=>m_(n,r))&&Yo(this.baseMutations,e.baseMutations,(n,r)=>m_(n,r))}}class vx{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Te(e.mutations.length===r.length);let i=function(){return XD}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new vx(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h5{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d5{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ot,ye;function f5(t){switch(t){default:return ae();case $.CANCELLED:case $.UNKNOWN:case $.DEADLINE_EXCEEDED:case $.RESOURCE_EXHAUSTED:case $.INTERNAL:case $.UNAVAILABLE:case $.UNAUTHENTICATED:return!1;case $.INVALID_ARGUMENT:case $.NOT_FOUND:case $.ALREADY_EXISTS:case $.PERMISSION_DENIED:case $.FAILED_PRECONDITION:case $.ABORTED:case $.OUT_OF_RANGE:case $.UNIMPLEMENTED:case $.DATA_LOSS:return!0}}function JC(t){if(t===void 0)return Ur("GRPC error has no .code"),$.UNKNOWN;switch(t){case ot.OK:return $.OK;case ot.CANCELLED:return $.CANCELLED;case ot.UNKNOWN:return $.UNKNOWN;case ot.DEADLINE_EXCEEDED:return $.DEADLINE_EXCEEDED;case ot.RESOURCE_EXHAUSTED:return $.RESOURCE_EXHAUSTED;case ot.INTERNAL:return $.INTERNAL;case ot.UNAVAILABLE:return $.UNAVAILABLE;case ot.UNAUTHENTICATED:return $.UNAUTHENTICATED;case ot.INVALID_ARGUMENT:return $.INVALID_ARGUMENT;case ot.NOT_FOUND:return $.NOT_FOUND;case ot.ALREADY_EXISTS:return $.ALREADY_EXISTS;case ot.PERMISSION_DENIED:return $.PERMISSION_DENIED;case ot.FAILED_PRECONDITION:return $.FAILED_PRECONDITION;case ot.ABORTED:return $.ABORTED;case ot.OUT_OF_RANGE:return $.OUT_OF_RANGE;case ot.UNIMPLEMENTED:return $.UNIMPLEMENTED;case ot.DATA_LOSS:return $.DATA_LOSS;default:return ae()}}(ye=ot||(ot={}))[ye.OK=0]="OK",ye[ye.CANCELLED=1]="CANCELLED",ye[ye.UNKNOWN=2]="UNKNOWN",ye[ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ye[ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ye[ye.NOT_FOUND=5]="NOT_FOUND",ye[ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",ye[ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",ye[ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",ye[ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ye[ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ye[ye.ABORTED=10]="ABORTED",ye[ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",ye[ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",ye[ye.INTERNAL=13]="INTERNAL",ye[ye.UNAVAILABLE=14]="UNAVAILABLE",ye[ye.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p5(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g5=new Cs([4294967295,4294967295],0);function y_(t){const e=p5().encode(t),n=new wC;return n.update(e),new Uint8Array(n.digest())}function __(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Cs([n,r],0),new Cs([i,s],0)]}class yx{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new el(`Invalid padding: ${n}`);if(r<0)throw new el(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new el(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new el(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Cs.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Cs.fromNumber(r)));return i.compare(g5)===1&&(i=new Cs([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=y_(e),[r,i]=__(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new yx(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=y_(e),[r,i]=__(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class el extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Ac.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new $d(le.min(),i,new Ke(we),Hr(),ge())}}class Ac{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ac(r,n,ge(),ge(),ge())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class ZC{constructor(e,n){this.targetId=e,this.me=n}}class eA{constructor(e,n,r=It.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class E_{constructor(){this.fe=0,this.ge=b_(),this.pe=It.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ge(),n=ge(),r=ge();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ae()}}),new Ac(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=b_()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Te(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class m5{constructor(e){this.Le=e,this.Be=new Map,this.ke=Hr(),this.qe=w_(),this.Qe=new Ke(we)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ae()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(wg(s))if(r===0){const o=new se(s.path);this.Ue(n,o,Bt.newNoDocument(o,le.min()))}else Te(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Ls(r).toUint8Array()}catch(l){if(l instanceof RC)return Qo("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new yx(o,i,s)}catch(l){return Qo(l instanceof el?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&wg(a.target)){const l=new se(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,Bt.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=ge();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new $d(e,n,this.Qe,this.ke,r);return this.ke=Hr(),this.qe=w_(),this.Qe=new Ke(we),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new E_,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Tt(we),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||ne("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new E_),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function w_(){return new Ke(se.comparator)}function b_(){return new Ke(se.comparator)}const x5={asc:"ASCENDING",desc:"DESCENDING"},v5={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},y5={and:"AND",or:"OR"};class _5{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Ag(t,e){return t.useProto3Json||jd(e)?e:{value:e}}function Zh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function tA(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function E5(t,e){return Zh(t,e.toTimestamp())}function sr(t){return Te(!!t),le.fromTimestamp(function(n){const r=zi(n);return new ft(r.seconds,r.nanos)}(t))}function _x(t,e){return Tg(t,e).canonicalString()}function Tg(t,e){const n=function(i){return new Me(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function nA(t){const e=Me.fromString(t);return Te(aA(e)),e}function Sg(t,e){return _x(t.databaseId,e.path)}function h0(t,e){const n=nA(e);if(n.get(1)!==t.databaseId.projectId)throw new ee($.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ee($.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new se(iA(n))}function rA(t,e){return _x(t.databaseId,e)}function w5(t){const e=nA(t);return e.length===4?Me.emptyPath():iA(e)}function Ig(t){return new Me(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function iA(t){return Te(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function C_(t,e,n){return{name:Sg(t,e),fields:n.value.mapValue.fields}}function b5(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ae()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,u){return c.useProto3Json?(Te(u===void 0||typeof u=="string"),It.fromBase64String(u||"")):(Te(u===void 0||u instanceof Buffer||u instanceof Uint8Array),It.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const u=c.code===void 0?$.UNKNOWN:JC(c.code);return new ee(u,c.message||"")}(o);n=new eA(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=h0(t,r.document.name),s=sr(r.document.updateTime),o=r.document.createTime?sr(r.document.createTime):le.min(),a=new tn({mapValue:{fields:r.document.fields}}),l=Bt.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new nh(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=h0(t,r.document),s=r.readTime?sr(r.readTime):le.min(),o=Bt.newNoDocument(i,s),a=r.removedTargetIds||[];n=new nh([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=h0(t,r.document),s=r.removedTargetIds||[];n=new nh([],s,i,null)}else{if(!("filter"in e))return ae();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new d5(i,s),a=r.targetId;n=new ZC(a,o)}}return n}function C5(t,e){let n;if(e instanceof Cc)n={update:C_(t,e.key,e.value)};else if(e instanceof xx)n={delete:Sg(t,e.key)};else if(e instanceof Yi)n={update:C_(t,e.key,e.data),updateMask:N5(e.fieldMask)};else{if(!(e instanceof c5))return ae();n={verify:Sg(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof ec)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof tc)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof nc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Jh)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw ae()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:E5(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ae()}(t,e.precondition)),n}function A5(t,e){return t&&t.length>0?(Te(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?sr(i.updateTime):sr(s);return o.isEqual(le.min())&&(o=sr(s)),new o5(o,i.transformResults||[])}(n,e))):[]}function T5(t,e){return{documents:[rA(t,e.path)]}}function S5(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=rA(t,i);const s=function(c){if(c.length!==0)return oA(Wn.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(u=>function(f){return{field:go(f.field),direction:P5(f.dir)}}(u))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Ag(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:i}}function I5(t){let e=w5(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Te(r===1);const u=n.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let s=[];n.where&&(s=function(d){const f=sA(d);return f instanceof Wn&&MC(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(f=>function(m){return new Zl(mo(m.field),function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(m.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(d){let f;return f=typeof d=="object"?d.value:d,jd(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(d){const f=!!d.before,p=d.values||[];return new Xh(p,f)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const f=!d.before,p=d.values||[];return new Xh(p,f)}(n.endAt)),qD(e,i,o,s,a,"F",l,c)}function k5(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ae()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function sA(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=mo(n.unaryFilter.field);return lt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=mo(n.unaryFilter.field);return lt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=mo(n.unaryFilter.field);return lt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=mo(n.unaryFilter.field);return lt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ae()}}(t):t.fieldFilter!==void 0?function(n){return lt.create(mo(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ae()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Wn.create(n.compositeFilter.filters.map(r=>sA(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ae()}}(n.compositeFilter.op))}(t):ae()}function P5(t){return x5[t]}function R5(t){return v5[t]}function D5(t){return y5[t]}function go(t){return{fieldPath:t.canonicalString()}}function mo(t){return Ct.fromServerFormat(t.fieldPath)}function oA(t){return t instanceof lt?function(n){if(n.op==="=="){if(u_(n.value))return{unaryFilter:{field:go(n.field),op:"IS_NAN"}};if(c_(n.value))return{unaryFilter:{field:go(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(u_(n.value))return{unaryFilter:{field:go(n.field),op:"IS_NOT_NAN"}};if(c_(n.value))return{unaryFilter:{field:go(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:go(n.field),op:R5(n.op),value:n.value}}}(t):t instanceof Wn?function(n){const r=n.getFilters().map(i=>oA(i));return r.length===1?r[0]:{compositeFilter:{op:D5(n.op),filters:r}}}(t):ae()}function N5(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function aA(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e,n,r,i,s=le.min(),o=le.min(),a=It.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new vi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new vi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new vi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new vi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F5{constructor(e){this.ct=e}}function M5(t){const e=I5({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Cg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O5{constructor(){this.un=new B5}addToCollectionParentIndex(e,n){return this.un.add(n),K.resolve()}getCollectionParents(e,n){return K.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return K.resolve()}deleteFieldIndex(e,n){return K.resolve()}deleteAllFieldIndexes(e){return K.resolve()}createTargetIndexes(e,n){return K.resolve()}getDocumentsMatchingTarget(e,n){return K.resolve(null)}getIndexType(e,n){return K.resolve(0)}getFieldIndexes(e,n){return K.resolve([])}getNextCollectionGroupToUpdate(e){return K.resolve(null)}getMinOffset(e,n){return K.resolve(Vi.min())}getMinOffsetFromCollectionGroup(e,n){return K.resolve(Vi.min())}updateCollectionGroup(e,n,r){return K.resolve()}updateIndexEntries(e,n){return K.resolve()}}class B5{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Tt(Me.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Tt(Me.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Zo(0)}static kn(){return new Zo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L5{constructor(){this.changes=new fa(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Bt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?K.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j5{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V5{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&El(r.mutation,i,gn.empty(),ft.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ge()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ge()){const i=ys();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Za();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ys();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ge()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Hr();const o=_l(),a=function(){return _l()}();return n.forEach((l,c)=>{const u=r.get(c.key);i.has(c.key)&&(u===void 0||u.mutation instanceof Yi)?s=s.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),El(u.mutation,c,u.mutation.getFieldMask(),ft.now())):o.set(c.key,gn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,u)=>o.set(c,u)),n.forEach((c,u)=>{var d;return a.set(c,new j5(u,(d=o.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){const r=_l();let i=new Ke((o,a)=>o-a),s=ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let u=r.get(l)||gn.empty();u=a.applyToLocalView(c,u),r.set(l,u);const d=(i.get(a.batchId)||ge()).add(l);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,d=WC();u.forEach(f=>{if(!s.has(f)){const p=YC(n.get(f),r.get(f));p!==null&&d.set(f,p),s=s.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return K.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return se.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):jC(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):K.resolve(ys());let a=-1,l=s;return o.next(c=>K.forEach(c,(u,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(u)?K.resolve():this.remoteDocumentCache.getEntry(e,u).next(f=>{l=l.insert(u,f)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,ge())).next(u=>({batchId:a,changes:HC(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new se(n)).next(r=>{let i=Za();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Za();return this.indexManager.getCollectionParents(e,s).next(a=>K.forEach(a,l=>{const c=function(d,f){return new da(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(u=>{u.forEach((d,f)=>{o=o.insert(d,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,c)=>{const u=c.getKey();o.get(u)===null&&(o=o.insert(u,Bt.newInvalidDocument(u)))});let a=Za();return o.forEach((l,c)=>{const u=s.get(l);u!==void 0&&El(u.mutation,c,gn.empty(),ft.now()),Ud(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z5{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return K.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:sr(i.createTime)}}(n)),K.resolve()}getNamedQuery(e,n){return K.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:M5(i.bundledQuery),readTime:sr(i.readTime)}}(n)),K.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U5{constructor(){this.overlays=new Ke(se.comparator),this.Ir=new Map}getOverlay(e,n){return K.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ys();return K.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),K.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),K.resolve()}getOverlaysForCollection(e,n,r){const i=ys(),s=n.length+1,o=new se(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return K.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ke((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let u=s.get(c.largestBatchId);u===null&&(u=ys(),s=s.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=ys(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=i)););return K.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new h5(n,r));let s=this.Ir.get(n);s===void 0&&(s=ge(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H5{constructor(){this.sessionToken=It.EMPTY_BYTE_STRING}getSessionToken(e){return K.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,K.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{constructor(){this.Tr=new Tt(pt.Er),this.dr=new Tt(pt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new pt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new pt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new se(new Me([])),r=new pt(n,e),i=new pt(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new se(new Me([])),r=new pt(n,e),i=new pt(n,e+1);let s=ge();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new pt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class pt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return se.comparator(e.key,n.key)||we(e.wr,n.wr)}static Ar(e,n){return we(e.wr,n.wr)||se.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W5{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Tt(pt.Er)}checkEmpty(e){return K.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new u5(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new pt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return K.resolve(o)}lookupMutationBatch(e,n){return K.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return K.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return K.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return K.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new pt(n,0),i=new pt(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),K.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Tt(we);return n.forEach(i=>{const s=new pt(i,0),o=new pt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),K.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;se.isDocumentKey(s)||(s=s.child(""));const o=new pt(new se(s),0);let a=new Tt(we);return this.br.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.wr)),!0)},o),K.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Te(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return K.forEach(n.mutations,i=>{const s=new pt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new pt(n,0),i=this.br.firstAfterOrEqual(r);return K.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,K.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $5{constructor(e){this.Mr=e,this.docs=function(){return new Ke(se.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return K.resolve(r?r.document.mutableCopy():Bt.newInvalidDocument(n))}getEntries(e,n){let r=Hr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Bt.newInvalidDocument(i))}),K.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Hr();const o=n.path,a=new se(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||SD(TD(u),r)<=0||(i.has(u.key)||Ud(n,u))&&(s=s.insert(u.key,u.mutableCopy()))}return K.resolve(s)}getAllFromCollectionGroup(e,n,r,i){ae()}Or(e,n){return K.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new q5(this)}getSize(e){return K.resolve(this.size)}}class q5 extends L5{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),K.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K5{constructor(e){this.persistence=e,this.Nr=new fa(n=>px(n),gx),this.lastRemoteSnapshotVersion=le.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Ex,this.targetCount=0,this.kr=Zo.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),K.resolve()}getLastRemoteSnapshotVersion(e){return K.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return K.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),K.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),K.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Zo(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,K.resolve()}updateTargetData(e,n){return this.Kn(n),K.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,K.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),K.waitFor(s).next(()=>i)}getTargetCount(e){return K.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return K.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),K.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),K.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),K.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return K.resolve(r)}containsKey(e,n){return K.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G5{constructor(e,n){this.qr={},this.overlays={},this.Qr=new ux(0),this.Kr=!1,this.Kr=!0,this.$r=new H5,this.referenceDelegate=e(this),this.Ur=new K5(this),this.indexManager=new O5,this.remoteDocumentCache=function(i){return new $5(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new F5(n),this.Gr=new z5(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new U5,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new W5(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){ne("MemoryPersistence","Starting transaction:",e);const i=new Q5(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return K.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class Q5 extends kD{constructor(e){super(),this.currentSequenceNumber=e}}class wx{constructor(e){this.persistence=e,this.Jr=new Ex,this.Yr=null}static Zr(e){return new wx(e)}get Xr(){if(this.Yr)return this.Yr;throw ae()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),K.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),K.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),K.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return K.forEach(this.Xr,r=>{const i=se.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,le.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return K.or([()=>K.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bx{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=ge(),i=ge();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new bx(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y5{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X5{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Nk()?8:PD(zt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new Y5;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(ja()<=xe.DEBUG&&ne("QueryEngine","SDK will not create cache indexes for query:",po(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),K.resolve()):(ja()<=xe.DEBUG&&ne("QueryEngine","Query:",po(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(ja()<=xe.DEBUG&&ne("QueryEngine","The SDK decides to create cache indexes for query:",po(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ir(n))):K.resolve())}Yi(e,n){if(p_(n))return K.resolve(null);let r=ir(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Cg(n,null,"F"),r=ir(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=ge(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ts(n,a);return this.ns(n,c,o,l.readTime)?this.Yi(e,Cg(n,null,"F")):this.rs(e,c,n,l)}))})))}Zi(e,n,r,i){return p_(n)||i.isEqual(le.min())?K.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?K.resolve(null):(ja()<=xe.DEBUG&&ne("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),po(n)),this.rs(e,o,n,AD(i,-1)).next(a=>a))})}ts(e,n){let r=new Tt(zC(e));return n.forEach((i,s)=>{Ud(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return ja()<=xe.DEBUG&&ne("QueryEngine","Using full collection scan to execute query:",po(n)),this.Ji.getDocumentsMatchingQuery(e,n,Vi.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J5{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Ke(we),this._s=new fa(s=>px(s),gx),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new V5(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function Z5(t,e,n,r){return new J5(t,e,n,r)}async function lA(t,e){const n=ce(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=ge();for(const c of i){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of s){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(r,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function eN(t,e){const n=ce(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){const d=c.batch,f=d.keys();let p=K.resolve();return f.forEach(m=>{p=p.next(()=>u.getEntry(l,m)).next(v=>{const E=c.docVersions.get(m);Te(E!==null),v.version.compareTo(E)<0&&(d.applyToRemoteDocument(v,c),v.isValidDocument()&&(v.setReadTime(c.commitVersion),u.addEntry(v)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=ge();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function cA(t){const e=ce(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function tN(t,e){const n=ce(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];e.targetChanges.forEach((u,d)=>{const f=i.get(d);if(!f)return;a.push(n.Ur.removeMatchingKeys(s,u.removedDocuments,d).next(()=>n.Ur.addMatchingKeys(s,u.addedDocuments,d)));let p=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?p=p.withResumeToken(It.EMPTY_BYTE_STRING,le.min()).withLastLimboFreeSnapshotVersion(le.min()):u.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(u.resumeToken,r)),i=i.insert(d,p),function(v,E,_){return v.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=3e8?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(f,p,u)&&a.push(n.Ur.updateTargetData(s,p))});let l=Hr(),c=ge();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(nN(s,o,e.documentUpdates).next(u=>{l=u.Ps,c=u.Is})),!r.isEqual(le.min())){const u=n.Ur.getLastRemoteSnapshotVersion(s).next(d=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(u)}return K.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.os=i,s))}function nN(t,e,n){let r=ge(),i=ge();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Hr();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(le.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):ne("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:i}})}function rN(t,e){const n=ce(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function iN(t,e){const n=ce(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,K.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new vi(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function kg(t,e,n){const r=ce(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!bc(o))throw o;ne("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function A_(t,e,n){const r=ce(t);let i=le.min(),s=ge();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const d=ce(l),f=d._s.get(u);return f!==void 0?K.resolve(d.os.get(f)):d.Ur.getTargetData(c,u)}(r,o,ir(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:le.min(),n?s:ge())).next(a=>(sN(r,GD(e),a),{documents:a,Ts:s})))}function sN(t,e,n){let r=t.us.get(e)||le.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class T_{constructor(){this.activeTargetIds=e5()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class oN{constructor(){this.so=new T_,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new T_,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aN{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S_{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ne("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ne("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vu=null;function d0(){return vu===null?vu=function(){return 268435456+Math.round(2147483648*Math.random())}():vu++,"0x"+vu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nt="WebChannelConnection";class uN extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const a=d0(),l=this.xo(n,r.toUriEncodedString());ne("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,o),this.No(n,l,c,i).then(u=>(ne("RestConnection",`Received RPC '${n}' ${a}: `,u),u),u=>{throw Qo("RestConnection",`RPC '${n}' ${a} failed with error: `,u,"url: ",l,"request:",i),u})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ha}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=lN[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=d0();return new Promise((o,a)=>{const l=new bC;l.setWithCredentials(!0),l.listenOnce(CC.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Zu.NO_ERROR:const u=l.getResponseJson();ne(Nt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(u)),o(u);break;case Zu.TIMEOUT:ne(Nt,`RPC '${e}' ${s} timed out`),a(new ee($.DEADLINE_EXCEEDED,"Request time out"));break;case Zu.HTTP_ERROR:const d=l.getStatus();if(ne(Nt,`RPC '${e}' ${s} failed with status:`,d,"response text:",l.getResponseText()),d>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);const p=f==null?void 0:f.error;if(p&&p.status&&p.message){const m=function(E){const _=E.toLowerCase().replace(/_/g,"-");return Object.values($).indexOf(_)>=0?_:$.UNKNOWN}(p.status);a(new ee(m,p.message))}else a(new ee($.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new ee($.UNAVAILABLE,"Connection failed."));break;default:ae()}}finally{ne(Nt,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);ne(Nt,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",c,r,15)})}Bo(e,n,r){const i=d0(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=SC(),a=TC(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const u=s.join("");ne(Nt,`Creating RPC '${e}' stream ${i}: ${u}`,l);const d=o.createWebChannel(u,l);let f=!1,p=!1;const m=new cN({Io:E=>{p?ne(Nt,`Not sending because RPC '${e}' stream ${i} is closed:`,E):(f||(ne(Nt,`Opening RPC '${e}' stream ${i} transport.`),d.open(),f=!0),ne(Nt,`RPC '${e}' stream ${i} sending:`,E),d.send(E))},To:()=>d.close()}),v=(E,_,x)=>{E.listen(_,w=>{try{x(w)}catch(A){setTimeout(()=>{throw A},0)}})};return v(d,Ja.EventType.OPEN,()=>{p||(ne(Nt,`RPC '${e}' stream ${i} transport opened.`),m.yo())}),v(d,Ja.EventType.CLOSE,()=>{p||(p=!0,ne(Nt,`RPC '${e}' stream ${i} transport closed`),m.So())}),v(d,Ja.EventType.ERROR,E=>{p||(p=!0,Qo(Nt,`RPC '${e}' stream ${i} transport errored:`,E),m.So(new ee($.UNAVAILABLE,"The operation could not be completed")))}),v(d,Ja.EventType.MESSAGE,E=>{var _;if(!p){const x=E.data[0];Te(!!x);const w=x,A=w.error||((_=w[0])===null||_===void 0?void 0:_.error);if(A){ne(Nt,`RPC '${e}' stream ${i} received error:`,A);const P=A.status;let R=function(k){const S=ot[k];if(S!==void 0)return JC(S)}(P),C=A.message;R===void 0&&(R=$.INTERNAL,C="Unknown error status: "+P+" with message "+A.message),p=!0,m.So(new ee(R,C)),d.close()}else ne(Nt,`RPC '${e}' stream ${i} received:`,x),m.bo(x)}}),v(a,AC.STAT_EVENT,E=>{E.stat===vg.PROXY?ne(Nt,`RPC '${e}' stream ${i} detected buffering proxy`):E.stat===vg.NOPROXY&&ne(Nt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{m.wo()},0),m}}function f0(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qd(t){return new _5(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&ne("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{constructor(e,n,r,i,s,o,a,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new uA(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===$.RESOURCE_EXHAUSTED?(Ur(n.toString()),Ur("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===$.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new ee($.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return ne("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(ne("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class hN extends hA{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=b5(this.serializer,e),r=function(s){if(!("targetChange"in s))return le.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?le.min():o.readTime?sr(o.readTime):le.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Ig(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=wg(l)?{documents:T5(s,l)}:{query:S5(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=tA(s,o.resumeToken);const c=Ag(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(le.min())>0){a.readTime=Zh(s,o.snapshotVersion.toTimestamp());const c=Ag(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=k5(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Ig(this.serializer),n.removeTarget=e,this.a_(n)}}class dN extends hA{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Te(!!e.streamToken),this.lastStreamToken=e.streamToken,Te(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Te(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=A5(e.writeResults,e.commitTime),r=sr(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Ig(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>C5(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fN extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new ee($.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,Tg(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ee($.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,Tg(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ee($.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class pN{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Ur(n),this.D_=!1):ne("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{Qs(this)&&(ne("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=ce(l);c.L_.add(4),await Tc(c),c.q_.set("Unknown"),c.L_.delete(4),await Kd(c)}(this))})}),this.q_=new pN(r,i)}}async function Kd(t){if(Qs(t))for(const e of t.B_)await e(!0)}async function Tc(t){for(const e of t.B_)await e(!1)}function dA(t,e){const n=ce(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Sx(n)?Tx(n):pa(n).r_()&&Ax(n,e))}function Cx(t,e){const n=ce(t),r=pa(n);n.N_.delete(e),r.r_()&&fA(n,e),n.N_.size===0&&(r.r_()?r.o_():Qs(n)&&n.q_.set("Unknown"))}function Ax(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(le.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}pa(t).A_(e)}function fA(t,e){t.Q_.xe(e),pa(t).R_(e)}function Tx(t){t.Q_=new m5({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),pa(t).start(),t.q_.v_()}function Sx(t){return Qs(t)&&!pa(t).n_()&&t.N_.size>0}function Qs(t){return ce(t).L_.size===0}function pA(t){t.Q_=void 0}async function mN(t){t.q_.set("Online")}async function xN(t){t.N_.forEach((e,n)=>{Ax(t,e)})}async function vN(t,e){pA(t),Sx(t)?(t.q_.M_(e),Tx(t)):t.q_.set("Unknown")}async function yN(t,e,n){if(t.q_.set("Online"),e instanceof eA&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.N_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))}(t,e)}catch(r){ne("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ed(t,r)}else if(e instanceof nh?t.Q_.Ke(e):e instanceof ZC?t.Q_.He(e):t.Q_.We(e),!n.isEqual(le.min()))try{const r=await cA(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=s.N_.get(c);u&&s.N_.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=s.N_.get(l);if(!u)return;s.N_.set(l,u.withResumeToken(It.EMPTY_BYTE_STRING,u.snapshotVersion)),fA(s,l);const d=new vi(u.target,l,c,u.sequenceNumber);Ax(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){ne("RemoteStore","Failed to raise snapshot:",r),await ed(t,r)}}async function ed(t,e,n){if(!bc(e))throw e;t.L_.add(1),await Tc(t),t.q_.set("Offline"),n||(n=()=>cA(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ne("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Kd(t)})}function gA(t,e){return e().catch(n=>ed(t,n,e))}async function Gd(t){const e=ce(t),n=Ui(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;_N(e);)try{const i=await rN(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,EN(e,i)}catch(i){await ed(e,i)}mA(e)&&xA(e)}function _N(t){return Qs(t)&&t.O_.length<10}function EN(t,e){t.O_.push(e);const n=Ui(t);n.r_()&&n.V_&&n.m_(e.mutations)}function mA(t){return Qs(t)&&!Ui(t).n_()&&t.O_.length>0}function xA(t){Ui(t).start()}async function wN(t){Ui(t).p_()}async function bN(t){const e=Ui(t);for(const n of t.O_)e.m_(n.mutations)}async function CN(t,e,n){const r=t.O_.shift(),i=vx.from(r,e,n);await gA(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Gd(t)}async function AN(t,e){e&&Ui(t).V_&&await async function(r,i){if(function(o){return f5(o)&&o!==$.ABORTED}(i.code)){const s=r.O_.shift();Ui(r).s_(),await gA(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Gd(r)}}(t,e),mA(t)&&xA(t)}async function I_(t,e){const n=ce(t);n.asyncQueue.verifyOperationInProgress(),ne("RemoteStore","RemoteStore received new credentials");const r=Qs(n);n.L_.add(3),await Tc(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Kd(n)}async function TN(t,e){const n=ce(t);e?(n.L_.delete(2),await Kd(n)):e||(n.L_.add(2),await Tc(n),n.q_.set("Unknown"))}function pa(t){return t.K_||(t.K_=function(n,r,i){const s=ce(n);return s.w_(),new hN(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:mN.bind(null,t),Ro:xN.bind(null,t),mo:vN.bind(null,t),d_:yN.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Sx(t)?Tx(t):t.q_.set("Unknown")):(await t.K_.stop(),pA(t))})),t.K_}function Ui(t){return t.U_||(t.U_=function(n,r,i){const s=ce(n);return s.w_(),new dN(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:wN.bind(null,t),mo:AN.bind(null,t),f_:bN.bind(null,t),g_:CN.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Gd(t)):(await t.U_.stop(),t.O_.length>0&&(ne("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ix{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Fr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new Ix(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ee($.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function kx(t,e){if(Ur("AsyncQueue",`${e}: ${t}`),bc(t))return new ee($.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(e){this.comparator=e?(n,r)=>e(n,r)||se.comparator(n.key,r.key):(n,r)=>se.comparator(n.key,r.key),this.keyedMap=Za(),this.sortedSet=new Ke(this.comparator)}static emptySet(e){return new jo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof jo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new jo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k_{constructor(){this.W_=new Ke(se.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ae():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class ea{constructor(e,n,r,i,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new ea(e,n,jo.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&zd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class IN{constructor(){this.queries=P_(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=ce(n),s=i.queries;i.queries=P_(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new ee($.ABORTED,"Firestore shutting down"))}}function P_(){return new fa(t=>VC(t),zd)}async function Px(t,e){const n=ce(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new SN,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=kx(o,`Initialization of query '${po(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&Dx(n)}async function Rx(t,e){const n=ce(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function kN(t,e){const n=ce(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&Dx(n)}function PN(t,e,n){const r=ce(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function Dx(t){t.Y_.forEach(e=>{e.next()})}var Pg,R_;(R_=Pg||(Pg={})).ea="default",R_.Cache="cache";class Nx{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new ea(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=ea.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Pg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(e){this.key=e}}class yA{constructor(e){this.key=e}}class RN{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ge(),this.mutatedKeys=ge(),this.Aa=zC(e),this.Ra=new jo(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new k_,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,d)=>{const f=i.get(u),p=Ud(this.query,d)?d:null,m=!!f&&this.mutatedKeys.has(f.key),v=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let E=!1;f&&p?f.data.isEqual(p.data)?m!==v&&(r.track({type:3,doc:p}),E=!0):this.ga(f,p)||(r.track({type:2,doc:p}),E=!0,(l&&this.Aa(p,l)>0||c&&this.Aa(p,c)<0)&&(a=!0)):!f&&p?(r.track({type:0,doc:p}),E=!0):f&&!p&&(r.track({type:1,doc:f}),E=!0,(l||c)&&(a=!0)),E&&(p?(o=o.add(p),s=v?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),r.track({type:1,doc:u})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((u,d)=>function(p,m){const v=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ae()}};return v(p)-v(m)}(u.type,d.type)||this.Aa(u.doc,d.doc)),this.pa(r),i=i!=null&&i;const a=n&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,c=l!==this.Ea;return this.Ea=l,o.length!==0||c?{snapshot:new ea(this.query,e.Ra,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new k_,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ge(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new yA(r))}),this.da.forEach(r=>{e.has(r)||n.push(new vA(r))}),n}ba(e){this.Ta=e.Ts,this.da=ge();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return ea.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class DN{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class NN{constructor(e){this.key=e,this.va=!1}}class FN{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new fa(a=>VC(a),zd),this.Ma=new Map,this.xa=new Set,this.Oa=new Ke(se.comparator),this.Na=new Map,this.La=new Ex,this.Ba={},this.ka=new Map,this.qa=Zo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function MN(t,e,n=!0){const r=AA(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await _A(r,e,n,!0),i}async function ON(t,e){const n=AA(t);await _A(n,e,!0,!1)}async function _A(t,e,n,r){const i=await iN(t.localStore,ir(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await BN(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&dA(t.remoteStore,i),a}async function BN(t,e,n,r,i){t.Ka=(d,f,p)=>async function(v,E,_,x){let w=E.view.ma(_);w.ns&&(w=await A_(v.localStore,E.query,!1).then(({documents:C})=>E.view.ma(C,w)));const A=x&&x.targetChanges.get(E.targetId),P=x&&x.targetMismatches.get(E.targetId)!=null,R=E.view.applyChanges(w,v.isPrimaryClient,A,P);return N_(v,E.targetId,R.wa),R.snapshot}(t,d,f,p);const s=await A_(t.localStore,e,!0),o=new RN(e,s.Ts),a=o.ma(s.documents),l=Ac.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,l);N_(t,n,c.wa);const u=new DN(e,n,o);return t.Fa.set(e,u),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function LN(t,e,n){const r=ce(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!zd(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await kg(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Cx(r.remoteStore,i.targetId),Rg(r,i.targetId)}).catch(wc)):(Rg(r,i.targetId),await kg(r.localStore,i.targetId,!0))}async function jN(t,e){const n=ce(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Cx(n.remoteStore,r.targetId))}async function VN(t,e,n){const r=KN(t);try{const i=await function(o,a){const l=ce(o),c=ft.now(),u=a.reduce((p,m)=>p.add(m.key),ge());let d,f;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let m=Hr(),v=ge();return l.cs.getEntries(p,u).next(E=>{m=E,m.forEach((_,x)=>{x.isValidDocument()||(v=v.add(_))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,m)).next(E=>{d=E;const _=[];for(const x of a){const w=l5(x,d.get(x.key).overlayedDocument);w!=null&&_.push(new Yi(x.key,w,DC(w.value.mapValue),Sn.exists(!0)))}return l.mutationQueue.addMutationBatch(p,c,_,a)}).next(E=>{f=E;const _=E.applyToLocalDocumentSet(d,v);return l.documentOverlayCache.saveOverlays(p,E.batchId,_)})}).then(()=>({batchId:f.batchId,changes:HC(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new Ke(we)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(r,i.batchId,n),await Sc(r,i.changes),await Gd(r.remoteStore)}catch(i){const s=kx(i,"Failed to persist write");n.reject(s)}}async function EA(t,e){const n=ce(t);try{const r=await tN(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(Te(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Te(o.va):i.removedDocuments.size>0&&(Te(o.va),o.va=!1))}),await Sc(n,r,e)}catch(r){await wc(r)}}function D_(t,e,n){const r=ce(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=ce(o);l.onlineState=a;let c=!1;l.queries.forEach((u,d)=>{for(const f of d.j_)f.Z_(a)&&(c=!0)}),c&&Dx(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function zN(t,e,n){const r=ce(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new Ke(se.comparator);o=o.insert(s,Bt.newNoDocument(s,le.min()));const a=ge().add(s),l=new $d(le.min(),new Map,new Ke(we),o,a);await EA(r,l),r.Oa=r.Oa.remove(s),r.Na.delete(e),Fx(r)}else await kg(r.localStore,e,!1).then(()=>Rg(r,e,n)).catch(wc)}async function UN(t,e){const n=ce(t),r=e.batch.batchId;try{const i=await eN(n.localStore,e);bA(n,r,null),wA(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Sc(n,i)}catch(i){await wc(i)}}async function HN(t,e,n){const r=ce(t);try{const i=await function(o,a){const l=ce(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(d=>(Te(d!==null),u=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(r.localStore,e);bA(r,e,n),wA(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Sc(r,i)}catch(i){await wc(i)}}function wA(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function bA(t,e,n){const r=ce(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Rg(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||CA(t,r)})}function CA(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Cx(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Fx(t))}function N_(t,e,n){for(const r of n)r instanceof vA?(t.La.addReference(r.key,e),WN(t,r)):r instanceof yA?(ne("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||CA(t,r.key)):ae()}function WN(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(ne("SyncEngine","New document in limbo: "+n),t.xa.add(r),Fx(t))}function Fx(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new se(Me.fromString(e)),r=t.qa.next();t.Na.set(r,new NN(n)),t.Oa=t.Oa.insert(n,r),dA(t.remoteStore,new vi(ir(Vd(n.path)),r,"TargetPurposeLimboResolution",ux.oe))}}async function Sc(t,e,n){const r=ce(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(c=>{var u;if((c||n)&&r.isPrimaryClient){const d=c?!c.fromCache:(u=n==null?void 0:n.targetChanges.get(l.targetId))===null||u===void 0?void 0:u.current;r.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){i.push(c);const d=bx.Wi(l.targetId,c);s.push(d)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(l,c){const u=ce(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>K.forEach(c,f=>K.forEach(f.$i,p=>u.persistence.referenceDelegate.addReference(d,f.targetId,p)).next(()=>K.forEach(f.Ui,p=>u.persistence.referenceDelegate.removeReference(d,f.targetId,p)))))}catch(d){if(!bc(d))throw d;ne("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const f=d.targetId;if(!d.fromCache){const p=u.os.get(f),m=p.snapshotVersion,v=p.withLastLimboFreeSnapshotVersion(m);u.os=u.os.insert(f,v)}}}(r.localStore,s))}async function $N(t,e){const n=ce(t);if(!n.currentUser.isEqual(e)){ne("SyncEngine","User change. New user:",e.toKey());const r=await lA(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new ee($.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Sc(n,r.hs)}}function qN(t,e){const n=ce(t),r=n.Na.get(e);if(r&&r.va)return ge().add(r.key);{let i=ge();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function AA(t){const e=ce(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=EA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=qN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=zN.bind(null,e),e.Ca.d_=kN.bind(null,e.eventManager),e.Ca.$a=PN.bind(null,e.eventManager),e}function KN(t){const e=ce(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=UN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=HN.bind(null,e),e}class td{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=qd(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return Z5(this.persistence,new X5,e.initialUser,this.serializer)}Ga(e){return new G5(wx.Zr,this.serializer)}Wa(e){return new oN}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}td.provider={build:()=>new td};class Dg{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>D_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=$N.bind(null,this.syncEngine),await TN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new IN}()}createDatastore(e){const n=qd(e.databaseInfo.databaseId),r=function(s){return new uN(s)}(e.databaseInfo);return function(s,o,a,l){return new fN(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new gN(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>D_(this.syncEngine,n,0),function(){return S_.D()?new S_:new aN}())}createSyncEngine(e,n){return function(i,s,o,a,l,c,u){const d=new FN(i,s,o,a,l,c);return u&&(d.Qa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=ce(i);ne("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Tc(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Dg.provider={build:()=>new Dg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mx{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Ur("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GN{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Mt.UNAUTHENTICATED,this.clientId=kC.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{ne("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(ne("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Fr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=kx(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function p0(t,e){t.asyncQueue.verifyOperationInProgress(),ne("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await lA(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function F_(t,e){t.asyncQueue.verifyOperationInProgress();const n=await QN(t);ne("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>I_(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>I_(e.remoteStore,i)),t._onlineComponents=e}async function QN(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ne("FirestoreClient","Using user provided OfflineComponentProvider");try{await p0(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===$.FAILED_PRECONDITION||i.code===$.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Qo("Error using user provided cache. Falling back to memory cache: "+n),await p0(t,new td)}}else ne("FirestoreClient","Using default OfflineComponentProvider"),await p0(t,new td);return t._offlineComponents}async function TA(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ne("FirestoreClient","Using user provided OnlineComponentProvider"),await F_(t,t._uninitializedComponentsProvider._online)):(ne("FirestoreClient","Using default OnlineComponentProvider"),await F_(t,new Dg))),t._onlineComponents}function YN(t){return TA(t).then(e=>e.syncEngine)}async function nd(t){const e=await TA(t),n=e.eventManager;return n.onListen=MN.bind(null,e.syncEngine),n.onUnlisten=LN.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=ON.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=jN.bind(null,e.syncEngine),n}function XN(t,e,n={}){const r=new Fr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const u=new Mx({next:f=>{u.Za(),o.enqueueAndForget(()=>Rx(s,d));const p=f.docs.has(a);!p&&f.fromCache?c.reject(new ee($.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&f.fromCache&&l&&l.source==="server"?c.reject(new ee($.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),d=new Nx(Vd(a.path),u,{includeMetadataChanges:!0,_a:!0});return Px(s,d)}(await nd(t),t.asyncQueue,e,n,r)),r.promise}function JN(t,e,n={}){const r=new Fr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const u=new Mx({next:f=>{u.Za(),o.enqueueAndForget(()=>Rx(s,d)),f.fromCache&&l.source==="server"?c.reject(new ee($.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),d=new Nx(a,u,{includeMetadataChanges:!0,_a:!0});return Px(s,d)}(await nd(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SA(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IA(t,e,n){if(!n)throw new ee($.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function ZN(t,e,n,r){if(e===!0&&r===!0)throw new ee($.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function O_(t){if(!se.isDocumentKey(t))throw new ee($.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function B_(t){if(se.isDocumentKey(t))throw new ee($.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Qd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ae()}function ln(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ee($.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Qd(t);throw new ee($.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L_{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ee($.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ee($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ZN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=SA((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ee($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ee($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ee($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Yd{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new L_({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ee($.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ee($.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new L_(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new mD;switch(r.type){case"firstParty":return new _D(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ee($.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=M_.get(n);r&&(ne("ComponentProvider","Removing Datastore"),M_.delete(n),r.terminate())}(this),Promise.resolve()}}function e9(t,e,n,r={}){var i;const s=(t=ln(t,Yd))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Qo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=Mt.MOCK_USER;else{a=Fb(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new ee($.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Mt(c)}t._authCredentials=new xD(new IC(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Xi(this.firestore,e,this._query)}}class jt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Fi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new jt(this.firestore,e,this._key)}}class Fi extends Xi{constructor(e,n,r){super(e,n,Vd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new jt(this.firestore,null,new se(e))}withConverter(e){return new Fi(this.firestore,e,this._path)}}function lr(t,e,...n){if(t=Se(t),IA("collection","path",e),t instanceof Yd){const r=Me.fromString(e,...n);return B_(r),new Fi(t,null,r)}{if(!(t instanceof jt||t instanceof Fi))throw new ee($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Me.fromString(e,...n));return B_(r),new Fi(t.firestore,null,r)}}function In(t,e,...n){if(t=Se(t),arguments.length===1&&(e=kC.newId()),IA("doc","path",e),t instanceof Yd){const r=Me.fromString(e,...n);return O_(r),new jt(t,null,new se(r))}{if(!(t instanceof jt||t instanceof Fi))throw new ee($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Me.fromString(e,...n));return O_(r),new jt(t.firestore,t instanceof Fi?t.converter:null,new se(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j_{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new uA(this,"async_queue_retry"),this.Vu=()=>{const r=f0();r&&ne("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=f0();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=f0();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Fr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!bc(e))throw e;ne("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Ur("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=Ix.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&ae()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function V_(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Wr extends Yd{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new j_,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new j_(e),this._firestoreClient=void 0,await e}}}function t9(t,e){const n=typeof t=="object"?t:Zm(),r=typeof t=="string"?t:"(default)",i=Md(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=Rb("firestore");s&&e9(i,...s)}return i}function Xd(t){if(t._terminated)throw new ee($.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||n9(t),t._firestoreClient}function n9(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,c,u){return new ND(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,SA(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new GN(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ta(It.fromBase64String(e))}catch(n){throw new ee($.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ta(It.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ee($.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ct(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zd{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ee($.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ee($.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return we(this._lat,e._lat)||we(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bx{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r9=/^__.*__$/;class i9{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Yi(e,this.data,this.fieldMask,n,this.fieldTransforms):new Cc(e,this.data,n,this.fieldTransforms)}}class kA{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Yi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function PA(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ae()}}class Lx{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Lx(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return rd(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(PA(this.Cu)&&r9.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class s9{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||qd(e)}Qu(e,n,r,i=!1){return new Lx({Cu:e,methodName:n,qu:r,path:Ct.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ef(t){const e=t._freezeSettings(),n=qd(t._databaseId);return new s9(t._databaseId,!!e.ignoreUndefinedProperties,n)}function RA(t,e,n,r,i,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);Vx("Data must be an object, but it was:",o,r);const a=DA(r,o);let l,c;if(s.merge)l=new gn(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const u=[];for(const d of s.mergeFields){const f=Ng(e,d,n);if(!o.contains(f))throw new ee($.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);FA(u,f)||u.push(f)}l=new gn(u),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new i9(new tn(a),l,c)}class tf extends Zd{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof tf}}class jx extends Zd{_toFieldTransform(e){return new i5(e.path,new ec)}isEqual(e){return e instanceof jx}}function o9(t,e,n,r){const i=t.Qu(1,e,n);Vx("Data must be an object, but it was:",i,r);const s=[],o=tn.empty();Gs(r,(l,c)=>{const u=zx(e,l,n);c=Se(c);const d=i.Nu(u);if(c instanceof tf)s.push(u);else{const f=Ic(c,d);f!=null&&(s.push(u),o.set(u,f))}});const a=new gn(s);return new kA(o,a,i.fieldTransforms)}function a9(t,e,n,r,i,s){const o=t.Qu(1,e,n),a=[Ng(e,r,n)],l=[i];if(s.length%2!=0)throw new ee($.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<s.length;f+=2)a.push(Ng(e,s[f])),l.push(s[f+1]);const c=[],u=tn.empty();for(let f=a.length-1;f>=0;--f)if(!FA(c,a[f])){const p=a[f];let m=l[f];m=Se(m);const v=o.Nu(p);if(m instanceof tf)c.push(p);else{const E=Ic(m,v);E!=null&&(c.push(p),u.set(p,E))}}const d=new gn(c);return new kA(u,d,o.fieldTransforms)}function l9(t,e,n,r=!1){return Ic(n,t.Qu(r?4:3,e))}function Ic(t,e){if(NA(t=Se(t)))return Vx("Unsupported field value:",e,t),DA(t,e);if(t instanceof Zd)return function(r,i){if(!PA(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=Ic(a,i.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Se(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return t5(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=ft.fromDate(r);return{timestampValue:Zh(i.serializer,s)}}if(r instanceof ft){const s=new ft(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Zh(i.serializer,s)}}if(r instanceof Ox)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ta)return{bytesValue:tA(i.serializer,r._byteString)};if(r instanceof jt){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:_x(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Bx)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return mx(a.serializer,l)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Qd(r)}`)}(t,e)}function DA(t,e){const n={};return PC(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Gs(t,(r,i)=>{const s=Ic(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function NA(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ft||t instanceof Ox||t instanceof ta||t instanceof jt||t instanceof Zd||t instanceof Bx)}function Vx(t,e,n){if(!NA(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Qd(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Ng(t,e,n){if((e=Se(e))instanceof Jd)return e._internalPath;if(typeof e=="string")return zx(t,e);throw rd("Field path arguments must be of type string or ",t,!1,void 0,n)}const c9=new RegExp("[~\\*/\\[\\]]");function zx(t,e,n){if(e.search(c9)>=0)throw rd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Jd(...e.split("."))._internalPath}catch{throw rd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function rd(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new ee($.INVALID_ARGUMENT,a+t+l)}function FA(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new jt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new u9(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(nf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class u9 extends MA{data(){return super.data()}}function nf(t,e){return typeof e=="string"?zx(t,e):e instanceof Jd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OA(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ee($.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ux{}class BA extends Ux{}function Hi(t,e,...n){let r=[];e instanceof Ux&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof Hx).length,a=s.filter(l=>l instanceof rf).length;if(o>1||o>0&&a>0)throw new ee($.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class rf extends BA{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new rf(e,n,r)}_apply(e){const n=this._parse(e);return jA(e._query,n),new Xi(e.firestore,e.converter,bg(e._query,n))}_parse(e){const n=ef(e.firestore);return function(s,o,a,l,c,u,d){let f;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new ee($.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){U_(d,u);const p=[];for(const m of d)p.push(z_(l,s,m));f={arrayValue:{values:p}}}else f=z_(l,s,d)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||U_(d,u),f=l9(a,o,d,u==="in"||u==="not-in");return lt.create(c,u,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Mr(t,e,n){const r=e,i=nf("where",t);return rf._create(i,r,n)}class Hx extends Ux{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Hx(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Wn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)jA(o,l),o=bg(o,l)}(e._query,n),new Xi(e.firestore,e.converter,bg(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Wx extends BA{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Wx(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new ee($.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new ee($.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Zl(s,o)}(e._query,this._field,this._direction);return new Xi(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new da(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function LA(t,e="asc"){const n=e,r=nf("orderBy",t);return Wx._create(r,n)}function z_(t,e,n){if(typeof(n=Se(n))=="string"){if(n==="")throw new ee($.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!jC(e)&&n.indexOf("/")!==-1)throw new ee($.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Me.fromString(n));if(!se.isDocumentKey(r))throw new ee($.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return l_(t,new se(r))}if(n instanceof jt)return l_(t,n._key);throw new ee($.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Qd(n)}.`)}function U_(t,e){if(!Array.isArray(t)||t.length===0)throw new ee($.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function jA(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ee($.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ee($.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class h9{convertValue(e,n="none"){switch(js(e)){case 0:return null;case 1:return e.booleanValue;case 2:return nt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ls(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ae()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Gs(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>nt(o.doubleValue));return new Bx(s)}convertGeoPoint(e){return new Ox(nt(e.latitude),nt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=dx(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Yl(e));default:return null}}convertTimestamp(e){const n=zi(e);return new ft(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Me.fromString(e);Te(aA(r));const i=new Xl(r.get(1),r.get(3)),s=new se(r.popFirst(5));return i.isEqual(n)||Ur(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VA(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class zA extends MA{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new rh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(nf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class rh extends zA{data(e={}){return super.data(e)}}class UA{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new tl(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new rh(this._firestore,this._userDataWriter,r.key,r,new tl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ee($.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new rh(i._firestore,i._userDataWriter,a.doc.key,a.doc,new tl(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new rh(i._firestore,i._userDataWriter,a.doc.key,a.doc,new tl(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,u=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:d9(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function d9(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ae()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $x(t){t=ln(t,jt);const e=ln(t.firestore,Wr);return XN(Xd(e),t._key).then(n=>$A(e,t,n))}class qx extends h9{constructor(e){super(),this.firestore=e}convertBytes(e){return new ta(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new jt(this.firestore,null,n)}}function id(t){t=ln(t,Xi);const e=ln(t.firestore,Wr),n=Xd(e),r=new qx(e);return OA(t._query),JN(n,t._query).then(i=>new UA(e,r,t,i))}function HA(t,e,n){t=ln(t,jt);const r=ln(t.firestore,Wr),i=VA(t.converter,e,n);return of(r,[RA(ef(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Sn.none())])}function Fg(t,e,n,...r){t=ln(t,jt);const i=ln(t.firestore,Wr),s=ef(i);let o;return o=typeof(e=Se(e))=="string"||e instanceof Jd?a9(s,"updateDoc",t._key,e,n,r):o9(s,"updateDoc",t._key,e),of(i,[o.toMutation(t._key,Sn.exists(!0))])}function ih(t){return of(ln(t.firestore,Wr),[new xx(t._key,Sn.none())])}function WA(t,e){const n=ln(t.firestore,Wr),r=In(t),i=VA(t.converter,e);return of(n,[RA(ef(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Sn.exists(!1))]).then(()=>r)}function sf(t,...e){var n,r,i;t=Se(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||V_(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(V_(e[o])){const d=e[o];e[o]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[o+1]=(r=d.error)===null||r===void 0?void 0:r.bind(d),e[o+2]=(i=d.complete)===null||i===void 0?void 0:i.bind(d)}let l,c,u;if(t instanceof jt)c=ln(t.firestore,Wr),u=Vd(t._key.path),l={next:d=>{e[o]&&e[o]($A(c,t,d))},error:e[o+1],complete:e[o+2]};else{const d=ln(t,Xi);c=ln(d.firestore,Wr),u=d._query;const f=new qx(c);l={next:p=>{e[o]&&e[o](new UA(c,f,d,p))},error:e[o+1],complete:e[o+2]},OA(t._query)}return function(f,p,m,v){const E=new Mx(v),_=new Nx(p,E,m);return f.asyncQueue.enqueueAndForget(async()=>Px(await nd(f),_)),()=>{E.Za(),f.asyncQueue.enqueueAndForget(async()=>Rx(await nd(f),_))}}(Xd(c),u,a,l)}function of(t,e){return function(r,i){const s=new Fr;return r.asyncQueue.enqueueAndForget(async()=>VN(await YN(r),i,s)),s.promise}(Xd(t),e)}function $A(t,e,n){const r=n.docs.get(e._key),i=new qx(t);return new zA(t,i,e._key,r,new tl(n.hasPendingWrites,n.fromCache),e.converter)}function sh(){return new jx("serverTimestamp")}(function(e,n=!0){(function(i){ha=i})($s),Ns(new ji("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Wr(new vD(r.getProvider("auth-internal")),new wD(r.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new ee($.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xl(c.options.projectId,u)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),tr(r_,"4.7.3",e),tr(r_,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qA="firebasestorage.googleapis.com",KA="storageBucket",f9=2*60*1e3,p9=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze extends cr{constructor(e,n,r=0){super(g0(e),`Firebase Storage: ${n} (${g0(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ze.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return g0(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Je;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Je||(Je={}));function g0(t){return"storage/"+t}function Kx(){const t="An unknown error occurred, please check the error payload for server response.";return new Ze(Je.UNKNOWN,t)}function g9(t){return new Ze(Je.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function m9(t){return new Ze(Je.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function x9(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ze(Je.UNAUTHENTICATED,t)}function v9(){return new Ze(Je.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function y9(t){return new Ze(Je.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function _9(){return new Ze(Je.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function E9(){return new Ze(Je.CANCELED,"User canceled the upload/download.")}function w9(t){return new Ze(Je.INVALID_URL,"Invalid URL '"+t+"'.")}function b9(t){return new Ze(Je.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function C9(){return new Ze(Je.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+KA+"' property when initializing the app?")}function A9(){return new Ze(Je.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function T9(){return new Ze(Je.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function S9(t){return new Ze(Je.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Mg(t){return new Ze(Je.INVALID_ARGUMENT,t)}function GA(){return new Ze(Je.APP_DELETED,"The Firebase app was deleted.")}function I9(t){return new Ze(Je.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function wl(t,e){return new Ze(Je.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Va(t){throw new Ze(Je.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=qt.makeFromUrl(e,n)}catch{return new qt(e,"")}if(r.path==="")return r;throw b9(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(A){A.path.charAt(A.path.length-1)==="/"&&(A.path_=A.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function c(A){A.path_=decodeURIComponent(A.path)}const u="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",p=new RegExp(`^https?://${d}/${u}/b/${i}/o${f}`,"i"),m={bucket:1,path:3},v=n===qA?"(?:storage.googleapis.com|storage.cloud.google.com)":n,E="([^?#]*)",_=new RegExp(`^https?://${v}/${i}/${E}`,"i"),w=[{regex:a,indices:l,postModify:s},{regex:p,indices:m,postModify:c},{regex:_,indices:{bucket:1,path:2},postModify:c}];for(let A=0;A<w.length;A++){const P=w[A],R=P.regex.exec(e);if(R){const C=R[P.indices.bucket];let b=R[P.indices.path];b||(b=""),r=new qt(C,b),P.postModify(r);break}}if(r==null)throw w9(e);return r}}class k9{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P9(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let c=!1;function u(...E){c||(c=!0,e.apply(null,E))}function d(E){i=setTimeout(()=>{i=null,t(p,l())},E)}function f(){s&&clearTimeout(s)}function p(E,..._){if(c){f();return}if(E){f(),u.call(null,E,..._);return}if(l()||o){f(),u.call(null,E,..._);return}r<64&&(r*=2);let w;a===1?(a=2,w=0):w=(r+Math.random())*1e3,d(w)}let m=!1;function v(E){m||(m=!0,f(),!c&&(i!==null?(E||(a=2),clearTimeout(i),d(0)):E||(a=1)))}return d(0),s=setTimeout(()=>{o=!0,v(!0)},n),v}function R9(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D9(t){return t!==void 0}function N9(t){return typeof t=="object"&&!Array.isArray(t)}function Gx(t){return typeof t=="string"||t instanceof String}function H_(t){return Qx()&&t instanceof Blob}function Qx(){return typeof Blob<"u"}function Og(t,e,n,r){if(r<e)throw Mg(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Mg(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kc(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function QA(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var As;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(As||(As={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F9(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M9{constructor(e,n,r,i,s,o,a,l,c,u,d,f=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=d,this.retry=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((p,m)=>{this.resolve_=p,this.reject_=m,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new yu(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===As.NO_ERROR,l=s.getStatus();if(!a||F9(l,this.additionalRetryCodes_)&&this.retry){const u=s.getErrorCode()===As.ABORT;r(!1,new yu(!1,null,u));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new yu(c,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());D9(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=Kx();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?GA():E9();o(l)}else{const l=_9();o(l)}};this.canceled_?n(!1,new yu(!1,null,!0)):this.backoffId_=P9(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&R9(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class yu{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function O9(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function B9(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function L9(t,e){e&&(t["X-Firebase-GMPID"]=e)}function j9(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function V9(t,e,n,r,i,s,o=!0){const a=QA(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return L9(c,e),O9(c,n),B9(c,s),j9(c,r),new M9(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z9(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function U9(...t){const e=z9();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Qx())return new Blob(t);throw new Ze(Je.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function H9(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W9(t){if(typeof atob>"u")throw S9("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class m0{constructor(e,n){this.data=e,this.contentType=n||null}}function $9(t,e){switch(t){case Jn.RAW:return new m0(YA(e));case Jn.BASE64:case Jn.BASE64URL:return new m0(XA(t,e));case Jn.DATA_URL:return new m0(K9(e),G9(e))}throw Kx()}function YA(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function q9(t){let e;try{e=decodeURIComponent(t)}catch{throw wl(Jn.DATA_URL,"Malformed data URL.")}return YA(e)}function XA(t,e){switch(t){case Jn.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw wl(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Jn.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw wl(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=W9(e)}catch(i){throw i.message.includes("polyfill")?i:wl(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class JA{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw wl(Jn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=Q9(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function K9(t){const e=new JA(t);return e.base64?XA(Jn.BASE64,e.rest):q9(e.rest)}function G9(t){return new JA(t).contentType}function Q9(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(e,n){let r=0,i="";H_(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(H_(this.data_)){const r=this.data_,i=H9(r,e,n);return i===null?null:new pi(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new pi(r,!0)}}static getBlob(...e){if(Qx()){const n=e.map(r=>r instanceof pi?r.data_:r);return new pi(U9.apply(null,n))}else{const n=e.map(o=>Gx(o)?$9(Jn.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new pi(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yx(t){let e;try{e=JSON.parse(t)}catch{return null}return N9(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y9(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function X9(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function ZA(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J9(t,e){return e}class Wt{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||J9}}let _u=null;function Z9(t){return!Gx(t)||t.length<2?t:ZA(t)}function eT(){if(_u)return _u;const t=[];t.push(new Wt("bucket")),t.push(new Wt("generation")),t.push(new Wt("metageneration")),t.push(new Wt("name","fullPath",!0));function e(s,o){return Z9(o)}const n=new Wt("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new Wt("size");return i.xform=r,t.push(i),t.push(new Wt("timeCreated")),t.push(new Wt("updated")),t.push(new Wt("md5Hash",null,!0)),t.push(new Wt("cacheControl",null,!0)),t.push(new Wt("contentDisposition",null,!0)),t.push(new Wt("contentEncoding",null,!0)),t.push(new Wt("contentLanguage",null,!0)),t.push(new Wt("contentType",null,!0)),t.push(new Wt("metadata","customMetadata",!0)),_u=t,_u}function eF(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new qt(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function tF(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return eF(r,t),r}function tT(t,e,n){const r=Yx(e);return r===null?null:tF(t,r,n)}function nF(t,e,n,r){const i=Yx(e);if(i===null||!Gx(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(c=>{const u=t.bucket,d=t.fullPath,f="/b/"+o(u)+"/o/"+o(d),p=kc(f,n,r),m=QA({alt:"media",token:c});return p+m})[0]}function rF(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W_="prefixes",$_="items";function iF(t,e,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[W_])for(const i of n[W_]){const s=i.replace(/\/$/,""),o=t._makeStorageReference(new qt(e,s));r.prefixes.push(o)}if(n[$_])for(const i of n[$_]){const s=t._makeStorageReference(new qt(e,i.name));r.items.push(s)}return r}function sF(t,e,n){const r=Yx(n);return r===null?null:iF(t,e,r)}class af{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xx(t){if(!t)throw Kx()}function oF(t,e){function n(r,i){const s=tT(t,i,e);return Xx(s!==null),s}return n}function aF(t,e){function n(r,i){const s=sF(t,e,i);return Xx(s!==null),s}return n}function lF(t,e){function n(r,i){const s=tT(t,i,e);return Xx(s!==null),nF(s,i,t.host,t._protocol)}return n}function Jx(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=v9():i=x9():n.getStatus()===402?i=m9(t.bucket):n.getStatus()===403?i=y9(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function nT(t){const e=Jx(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=g9(t.path)),s.serverResponse=i.serverResponse,s}return n}function cF(t,e,n,r,i){const s={};e.isRoot?s.prefix="":s.prefix=e.path+"/",n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);const o=e.bucketOnlyServerUrl(),a=kc(o,t.host,t._protocol),l="GET",c=t.maxOperationRetryTime,u=new af(a,l,aF(t,e.bucket),c);return u.urlParams=s,u.errorHandler=Jx(e),u}function uF(t,e,n){const r=e.fullServerUrl(),i=kc(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new af(i,s,lF(t,n),o);return a.errorHandler=nT(e),a}function hF(t,e){const n=e.fullServerUrl(),r=kc(n,t.host,t._protocol),i="DELETE",s=t.maxOperationRetryTime;function o(l,c){}const a=new af(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=nT(e),a}function dF(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function fF(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=dF(null,e)),r}function pF(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let w="";for(let A=0;A<2;A++)w=w+Math.random().toString().slice(2);return w}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=fF(e,r,i),u=rF(c,n),d="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+u+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,f=`\r
--`+l+"--",p=pi.getBlob(d,r,f);if(p===null)throw A9();const m={name:c.fullPath},v=kc(s,t.host,t._protocol),E="POST",_=t.maxUploadRetryTime,x=new af(v,E,oF(t,n),_);return x.urlParams=m,x.headers=o,x.body=p.uploadData(),x.errorHandler=Jx(e),x}class gF{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=As.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=As.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=As.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw Va("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Va("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Va("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Va("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Va("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class mF extends gF{initXhr(){this.xhr_.responseType="text"}}function lf(){return new mF}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(e,n){this._service=e,n instanceof qt?this._location=n:this._location=qt.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Vs(e,n)}get root(){const e=new qt(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return ZA(this._location.path)}get storage(){return this._service}get parent(){const e=Y9(this._location.path);if(e===null)return null;const n=new qt(this._location.bucket,e);return new Vs(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw I9(e)}}function xF(t,e,n){t._throwIfRoot("uploadBytes");const r=pF(t.storage,t._location,eT(),new pi(e,!0),n);return t.storage.makeRequestWithTokens(r,lf).then(i=>({metadata:i,ref:t}))}function vF(t){const e={prefixes:[],items:[]};return rT(t,e).then(()=>e)}async function rT(t,e,n){const i=await yF(t,{pageToken:n});e.prefixes.push(...i.prefixes),e.items.push(...i.items),i.nextPageToken!=null&&await rT(t,e,i.nextPageToken)}function yF(t,e){e!=null&&typeof e.maxResults=="number"&&Og("options.maxResults",1,1e3,e.maxResults);const n=e||{},r=cF(t.storage,t._location,"/",n.pageToken,n.maxResults);return t.storage.makeRequestWithTokens(r,lf)}function _F(t){t._throwIfRoot("getDownloadURL");const e=uF(t.storage,t._location,eT());return t.storage.makeRequestWithTokens(e,lf).then(n=>{if(n===null)throw T9();return n})}function EF(t){t._throwIfRoot("deleteObject");const e=hF(t.storage,t._location);return t.storage.makeRequestWithTokens(e,lf)}function wF(t,e){const n=X9(t._location.path,e),r=new qt(t._location.bucket,n);return new Vs(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bF(t){return/^[A-Za-z]+:\/\//.test(t)}function CF(t,e){return new Vs(t,e)}function iT(t,e){if(t instanceof Zx){const n=t;if(n._bucket==null)throw C9();const r=new Vs(n,n._bucket);return e!=null?iT(r,e):r}else return e!==void 0?wF(t,e):t}function AF(t,e){if(e&&bF(e)){if(t instanceof Zx)return CF(t,e);throw Mg("To use ref(service, url), the first argument must be a Storage instance.")}else return iT(t,e)}function q_(t,e){const n=e==null?void 0:e[KA];return n==null?null:qt.makeFromBucketSpec(n,t)}function TF(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:Fb(i,t.app.options.projectId))}class Zx{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=qA,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=f9,this._maxUploadRetryTime=p9,this._requests=new Set,i!=null?this._bucket=qt.makeFromBucketSpec(i,this._host):this._bucket=q_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=qt.makeFromBucketSpec(this._url,e):this._bucket=q_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Og("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Og("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Vs(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new k9(GA());{const o=V9(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const K_="@firebase/storage",G_="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sT="storage";function SF(t,e,n){return t=Se(t),xF(t,e,n)}function Q_(t){return t=Se(t),vF(t)}function IF(t){return t=Se(t),_F(t)}function Y_(t){return t=Se(t),EF(t)}function Bg(t,e){return t=Se(t),AF(t,e)}function kF(t=Zm(),e){t=Se(t);const r=Md(t,sT).getImmediate({identifier:e}),i=Rb("storage");return i&&PF(r,...i),r}function PF(t,e,n,r={}){TF(t,e,n,r)}function RF(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new Zx(n,r,i,e,$s)}function DF(){Ns(new ji(sT,RF,"PUBLIC").setMultipleInstances(!0)),tr(K_,G_,""),tr(K_,G_,"esm2017")}DF();const NF={apiKey:"AIzaSyCnKNX6SQQUvXs5pDtwMFLlNSTLkm7YvCw",authDomain:"retailease-a45f0.firebaseapp.com",projectId:"retailease-a45f0",storageBucket:"retailease-a45f0.firebasestorage.app",messagingSenderId:"943909405770",appId:"1:943909405770:web:e42ab60d5d266e70eb92b3"},ev=Bb(NF),Eu=dD(ev),it=t9(ev),Lg=kF(ev),oT=M.createContext();function cn(){return M.useContext(oT)}function FF({children:t}){const[e,n]=M.useState(null),[r,i]=M.useState(!0);function s(u,d){return qP(Eu,u,d)}function o(u,d){return KP(Eu,u,d)}function a(){return eR(Eu)}function l(u,d){return hC(u,d)}M.useEffect(()=>ZP(Eu,d=>{n(d),i(!1)}),[]);const c={currentUser:e,signup:s,login:o,logout:a,updateUserProfile:l,loading:r};return g.jsx(oT.Provider,{value:c,children:t})}var aT={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},X_=Rr.createContext&&Rr.createContext(aT),Mi=function(){return Mi=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Mi.apply(this,arguments)},MF=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function lT(t){return t&&t.map(function(e,n){return Rr.createElement(e.tag,Mi({key:n},e.attr),lT(e.child))})}function be(t){return function(e){return Rr.createElement(OF,Mi({attr:Mi({},t.attr)},e),lT(t.child))}}function OF(t){var e=function(n){var r=t.attr,i=t.size,s=t.title,o=MF(t,["attr","size","title"]),a=i||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),Rr.createElement("svg",Mi({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:l,style:Mi(Mi({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&Rr.createElement("title",null,s),t.children)};return X_!==void 0?Rr.createElement(X_.Consumer,null,function(n){return e(n)}):e(aT)}function cT(t){return be({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"}}]})(t)}function BF(t){return be({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M0 448V64h18v384H0zm26.857-.273V64H36v383.727h-9.143zm27.143 0V64h8.857v383.727H54zm44.857 0V64h8.857v383.727h-8.857zm36 0V64h17.714v383.727h-17.714zm44.857 0V64h8.857v383.727h-8.857zm18 0V64h8.857v383.727h-8.857zm18 0V64h8.857v383.727h-8.857zm35.715 0V64h18v383.727h-18zm44.857 0V64h18v383.727h-18zm35.999 0V64h18.001v383.727h-18.001zm36.001 0V64h18.001v383.727h-18.001zm26.857 0V64h18v383.727h-18zm45.143 0V64h26.857v383.727h-26.857zm35.714 0V64h9.143v383.727H476zm18 .273V64h18v384h-18z"}}]})(t)}function LF(t){return be({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"}}]})(t)}function jF(t){return be({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 512c35.32 0 63.97-28.65 63.97-64H160.03c0 35.35 28.65 64 63.97 64zm215.39-149.71c-19.32-20.76-55.47-51.99-55.47-154.29 0-77.7-54.48-139.9-127.94-155.16V32c0-17.67-14.32-32-31.98-32s-31.98 14.33-31.98 32v20.84C118.56 68.1 64.08 130.3 64.08 208c0 102.3-36.15 133.53-55.47 154.29-6 6.45-8.66 14.16-8.61 21.71.11 16.4 12.98 32 32.1 32h383.8c19.12 0 32-15.6 32.1-32 .05-7.55-2.61-15.27-8.61-21.71z"}}]})(t)}function tv(t){return be({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M425.7 256c-16.9 0-32.8-9-41.4-23.4L320 126l-64.2 106.6c-8.7 14.5-24.6 23.5-41.5 23.5-4.5 0-9-.6-13.3-1.9L64 215v178c0 14.7 10 27.5 24.2 31l216.2 54.1c10.2 2.5 20.9 2.5 31 0L551.8 424c14.2-3.6 24.2-16.4 24.2-31V215l-137 39.1c-4.3 1.3-8.8 1.9-13.3 1.9zm212.6-112.2L586.8 41c-3.1-6.2-9.8-9.8-16.7-8.9L320 64l91.7 152.1c3.8 6.3 11.4 9.3 18.5 7.3l197.9-56.5c9.9-2.9 14.7-13.9 10.2-23.1zM53.2 41L1.7 143.8c-4.6 9.2.3 20.2 10.1 23l197.9 56.5c7.1 2 14.7-1 18.5-7.3L320 64 69.8 32.1c-6.9-.8-13.5 2.7-16.6 8.9z"}}]})(t)}function J_(t){return be({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M0 464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V192H0v272zm320-196c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM192 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM64 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zM400 64h-48V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H160V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H48C21.5 64 0 85.5 0 112v48h448v-48c0-26.5-21.5-48-48-48z"}}]})(t)}function uT(t){return be({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M512 144v288c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V144c0-26.5 21.5-48 48-48h88l12.3-32.9c7-18.7 24.9-31.1 44.9-31.1h125.5c20 0 37.9 12.4 44.9 31.1L376 96h88c26.5 0 48 21.5 48 48zM376 288c0-66.2-53.8-120-120-120s-120 53.8-120 120 53.8 120 120 120 120-53.8 120-120zm-32 0c0 48.5-39.5 88-88 88s-88-39.5-88-88 39.5-88 88-88 88 39.5 88 88z"}}]})(t)}function hT(t){return be({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M511.1 378.8l-26.7-160c-2.6-15.4-15.9-26.7-31.6-26.7H208v-64h96c8.8 0 16-7.2 16-16V16c0-8.8-7.2-16-16-16H48c-8.8 0-16 7.2-16 16v96c0 8.8 7.2 16 16 16h96v64H59.1c-15.6 0-29 11.3-31.6 26.7L.8 378.7c-.6 3.5-.9 7-.9 10.5V480c0 17.7 14.3 32 32 32h448c17.7 0 32-14.3 32-32v-90.7c.1-3.5-.2-7-.8-10.5zM280 248c0-8.8 7.2-16 16-16h16c8.8 0 16 7.2 16 16v16c0 8.8-7.2 16-16 16h-16c-8.8 0-16-7.2-16-16v-16zm-32 64h16c8.8 0 16 7.2 16 16v16c0 8.8-7.2 16-16 16h-16c-8.8 0-16-7.2-16-16v-16c0-8.8 7.2-16 16-16zm-32-80c8.8 0 16 7.2 16 16v16c0 8.8-7.2 16-16 16h-16c-8.8 0-16-7.2-16-16v-16c0-8.8 7.2-16 16-16h16zM80 80V48h192v32H80zm40 200h-16c-8.8 0-16-7.2-16-16v-16c0-8.8 7.2-16 16-16h16c8.8 0 16 7.2 16 16v16c0 8.8-7.2 16-16 16zm16 64v-16c0-8.8 7.2-16 16-16h16c8.8 0 16 7.2 16 16v16c0 8.8-7.2 16-16 16h-16c-8.8 0-16-7.2-16-16zm216 112c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h176c4.4 0 8 3.6 8 8v16zm24-112c0 8.8-7.2 16-16 16h-16c-8.8 0-16-7.2-16-16v-16c0-8.8 7.2-16 16-16h16c8.8 0 16 7.2 16 16v16zm48-80c0 8.8-7.2 16-16 16h-16c-8.8 0-16-7.2-16-16v-16c0-8.8 7.2-16 16-16h16c8.8 0 16 7.2 16 16v16z"}}]})(t)}function nv(t){return be({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M496 384H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16zM464 96H345.94c-21.38 0-32.09 25.85-16.97 40.97l32.4 32.4L288 242.75l-73.37-73.37c-12.5-12.5-32.76-12.5-45.25 0l-68.69 68.69c-6.25 6.25-6.25 16.38 0 22.63l22.62 22.62c6.25 6.25 16.38 6.25 22.63 0L192 237.25l73.37 73.37c12.5 12.5 32.76 12.5 45.25 0l96-96 32.4 32.4c15.12 15.12 40.97 4.41 40.97-16.97V112c.01-8.84-7.15-16-15.99-16z"}}]})(t)}function dT(t){return be({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"}}]})(t)}function VF(t){return be({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"}}]})(t)}function rv(t){return be({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"}}]})(t)}function zF(t){return be({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"}}]})(t)}function x0(t){return be({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M320 400c-75.85 0-137.25-58.71-142.9-133.11L72.2 185.82c-13.79 17.3-26.48 35.59-36.72 55.59a32.35 32.35 0 0 0 0 29.19C89.71 376.41 197.07 448 320 448c26.91 0 52.87-4 77.89-10.46L346 397.39a144.13 144.13 0 0 1-26 2.61zm313.82 58.1l-110.55-85.44a331.25 331.25 0 0 0 81.25-102.07 32.35 32.35 0 0 0 0-29.19C550.29 135.59 442.93 64 320 64a308.15 308.15 0 0 0-147.32 37.7L45.46 3.37A16 16 0 0 0 23 6.18L3.37 31.45A16 16 0 0 0 6.18 53.9l588.36 454.73a16 16 0 0 0 22.46-2.81l19.64-25.27a16 16 0 0 0-2.82-22.45zm-183.72-142l-39.3-30.38A94.75 94.75 0 0 0 416 256a94.76 94.76 0 0 0-121.31-92.21A47.65 47.65 0 0 1 304 192a46.64 46.64 0 0 1-1.54 10l-73.61-56.89A142.31 142.31 0 0 1 320 112a143.92 143.92 0 0 1 144 144c0 21.63-5.29 41.79-13.9 60.11z"}}]})(t)}function oh(t){return be({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z"}}]})(t)}function UF(t){return be({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"}}]})(t)}function HF(t){return be({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M96.06 454.35c.01 6.29 1.87 12.45 5.36 17.69l17.09 25.69a31.99 31.99 0 0 0 26.64 14.28h61.71a31.99 31.99 0 0 0 26.64-14.28l17.09-25.69a31.989 31.989 0 0 0 5.36-17.69l.04-38.35H96.01l.05 38.35zM0 176c0 44.37 16.45 84.85 43.56 115.78 16.52 18.85 42.36 58.23 52.21 91.45.04.26.07.52.11.78h160.24c.04-.26.07-.51.11-.78 9.85-33.22 35.69-72.6 52.21-91.45C335.55 260.85 352 220.37 352 176 352 78.61 272.91-.3 175.45 0 73.44.31 0 82.97 0 176zm176-80c-44.11 0-80 35.89-80 80 0 8.84-7.16 16-16 16s-16-7.16-16-16c0-61.76 50.24-112 112-112 8.84 0 16 7.16 16 16s-7.16 16-16 16z"}}]})(t)}function sd(t){return be({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 224h-24v-72C376 68.2 307.8 0 224 0S72 68.2 72 152v72H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48zm-104 0H152v-72c0-39.7 32.3-72 72-72s72 32.3 72 72v72z"}}]})(t)}function fT(t){return be({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"}}]})(t)}function pT(t){return be({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"}}]})(t)}function iv(t){return be({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M358.4 3.2L320 48 265.6 3.2a15.9 15.9 0 0 0-19.2 0L192 48 137.6 3.2a15.9 15.9 0 0 0-19.2 0L64 48 25.6 3.2C15-4.7 0 2.8 0 16v480c0 13.2 15 20.7 25.6 12.8L64 464l54.4 44.8a15.9 15.9 0 0 0 19.2 0L192 464l54.4 44.8a15.9 15.9 0 0 0 19.2 0L320 464l38.4 44.8c10.5 7.9 25.6.4 25.6-12.8V16c0-13.2-15-20.7-25.6-12.8zM320 360c0 4.4-3.6 8-8 8H72c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h240c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H72c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h240c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H72c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h240c4.4 0 8 3.6 8 8v16z"}}]})(t)}function gT(t){return be({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M32,224H64V416H32A31.96166,31.96166,0,0,1,0,384V256A31.96166,31.96166,0,0,1,32,224Zm512-48V448a64.06328,64.06328,0,0,1-64,64H160a64.06328,64.06328,0,0,1-64-64V176a79.974,79.974,0,0,1,80-80H288V32a32,32,0,0,1,64,0V96H464A79.974,79.974,0,0,1,544,176ZM264,256a40,40,0,1,0-40,40A39.997,39.997,0,0,0,264,256Zm-8,128H192v32h64Zm96,0H288v32h64ZM456,256a40,40,0,1,0-40,40A39.997,39.997,0,0,0,456,256Zm-8,128H384v32h64ZM640,256V384a31.96166,31.96166,0,0,1-32,32H576V224h32A31.96166,31.96166,0,0,1,640,256Z"}}]})(t)}function WF(t){return be({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M308 96c6.627 0 12-5.373 12-12V44c0-6.627-5.373-12-12-12H12C5.373 32 0 37.373 0 44v44.748c0 6.627 5.373 12 12 12h85.28c27.308 0 48.261 9.958 60.97 27.252H12c-6.627 0-12 5.373-12 12v40c0 6.627 5.373 12 12 12h158.757c-6.217 36.086-32.961 58.632-74.757 58.632H12c-6.627 0-12 5.373-12 12v53.012c0 3.349 1.4 6.546 3.861 8.818l165.052 152.356a12.001 12.001 0 0 0 8.139 3.182h82.562c10.924 0 16.166-13.408 8.139-20.818L116.871 319.906c76.499-2.34 131.144-53.395 138.318-127.906H308c6.627 0 12-5.373 12-12v-40c0-6.627-5.373-12-12-12h-58.69c-3.486-11.541-8.28-22.246-14.252-32H308z"}}]})(t)}function sv(t){return be({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"}}]})(t)}function _s(t){return be({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M528.12 301.319l47.273-208C578.806 78.301 567.391 64 551.99 64H159.208l-9.166-44.81C147.758 8.021 137.93 0 126.529 0H24C10.745 0 0 10.745 0 24v16c0 13.255 10.745 24 24 24h69.883l70.248 343.435C147.325 417.1 136 435.222 136 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-15.674-6.447-29.835-16.824-40h209.647C430.447 426.165 424 440.326 424 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-22.172-12.888-41.332-31.579-50.405l5.517-24.276c3.413-15.018-8.002-29.319-23.403-29.319H218.117l-6.545-32h293.145c11.206 0 20.92-7.754 23.403-18.681z"}}]})(t)}function mT(t){return be({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"}}]})(t)}function xT(t){return be({attr:{viewBox:"0 0 616 512"},child:[{tag:"path",attr:{d:"M602 118.6L537.1 15C531.3 5.7 521 0 510 0H106C95 0 84.7 5.7 78.9 15L14 118.6c-33.5 53.5-3.8 127.9 58.8 136.4 4.5.6 9.1.9 13.7.9 29.6 0 55.8-13 73.8-33.1 18 20.1 44.3 33.1 73.8 33.1 29.6 0 55.8-13 73.8-33.1 18 20.1 44.3 33.1 73.8 33.1 29.6 0 55.8-13 73.8-33.1 18.1 20.1 44.3 33.1 73.8 33.1 4.7 0 9.2-.3 13.7-.9 62.8-8.4 92.6-82.8 59-136.4zM529.5 288c-10 0-19.9-1.5-29.5-3.8V384H116v-99.8c-9.6 2.2-19.5 3.8-29.5 3.8-6 0-12.1-.4-18-1.2-5.6-.8-11.1-2.1-16.4-3.6V480c0 17.7 14.3 32 32 32h448c17.7 0 32-14.3 32-32V283.2c-5.4 1.6-10.8 2.9-16.4 3.6-6.1.8-12.1 1.2-18.2 1.2z"}}]})(t)}function $F(t){return be({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"}}]})(t)}function qF(t){return be({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M384 64H192C85.961 64 0 149.961 0 256s85.961 192 192 192h192c106.039 0 192-85.961 192-192S490.039 64 384 64zM64 256c0-70.741 57.249-128 128-128 70.741 0 128 57.249 128 128 0 70.741-57.249 128-128 128-70.741 0-128-57.249-128-128zm320 128h-48.905c65.217-72.858 65.236-183.12 0-256H384c70.741 0 128 57.249 128 128 0 70.74-57.249 128-128 128z"}}]})(t)}function KF(t){return be({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M384 64H192C86 64 0 150 0 256s86 192 192 192h192c106 0 192-86 192-192S490 64 384 64zm0 320c-70.8 0-128-57.3-128-128 0-70.8 57.3-128 128-128 70.8 0 128 57.3 128 128 0 70.8-57.3 128-128 128z"}}]})(t)}function od(t){return be({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"}}]})(t)}function ov(t){return be({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"}}]})(t)}const GF=()=>{const[t,e]=M.useState(!1);return M.useEffect(()=>{const n=setTimeout(()=>{e(!0)},2500);return()=>clearTimeout(n)},[]),g.jsx("div",{className:`splash-screen ${t?"fade-out":"fade-in"}`,children:g.jsxs("div",{className:"splash-content",children:[g.jsx("div",{className:"logo-container",children:g.jsx(_s,{className:"cart-icon"})}),g.jsx("h1",{className:"app-name",children:"Retail Ease"}),g.jsx("div",{className:"loading-bar",children:g.jsx("div",{className:"loading-progress"})})]})})},QF=()=>{const t=Gr();return g.jsx("div",{className:"landing-page",children:g.jsxs("div",{className:"landing-content",children:[g.jsx("div",{className:"logo-container",children:g.jsx(_s,{className:"cart-icon"})}),g.jsx("h1",{className:"app-title",children:"Welcome to Retail Ease"}),g.jsx("p",{className:"app-description",children:"Smart inventory management for Indian small businesses. Track items, get alerts, analyze sales."}),g.jsxs("div",{className:"button-group",children:[g.jsx("button",{className:"primary-btn register-btn",onClick:()=>t("/register"),children:"Register"}),g.jsx("button",{className:"secondary-btn login-btn",onClick:()=>t("/login"),children:"Login"})]}),g.jsxs("div",{className:"features-section",children:[g.jsxs("div",{className:"feature-card",children:[g.jsx("div",{className:"feature-icon",style:{backgroundColor:"var(--primary)"},children:g.jsx(_s,{})}),g.jsx("h3",{children:"Inventory Management"}),g.jsx("p",{children:"Track your stock levels and get alerts for low inventory"})]}),g.jsxs("div",{className:"feature-card",children:[g.jsx("div",{className:"feature-icon",style:{backgroundColor:"var(--secondary)"},children:g.jsx(_s,{})}),g.jsx("h3",{children:"Expiry Alerts"}),g.jsx("p",{children:"Never miss expiry dates with our smart notification system"})]}),g.jsxs("div",{className:"feature-card",children:[g.jsx("div",{className:"feature-icon",style:{backgroundColor:"var(--accent)"},children:g.jsx(_s,{})}),g.jsx("h3",{children:"Business Analytics"}),g.jsx("p",{children:"Gain insights into your sales and profit margins"})]})]})]})})},YF=()=>{const[t,e]=M.useState(""),[n,r]=M.useState(""),[i,s]=M.useState(""),[o,a]=M.useState(!1),{login:l}=cn(),c=Gr(),u=async d=>{d.preventDefault();try{s(""),a(!0),await l(t,n),c("/dashboard")}catch(f){s("Failed to log in. Please check your credentials."),console.error(f)}a(!1)};return g.jsx("div",{className:"auth-container",children:g.jsxs("div",{className:"auth-card",children:[g.jsxs(Bn,{to:"/",className:"back-link",children:[g.jsx(cT,{})," Back to Home"]}),g.jsx("h2",{className:"auth-title",children:"Login to Retail Ease"}),i&&g.jsx("div",{className:"error-message",children:i}),g.jsxs("form",{onSubmit:u,className:"auth-form",children:[g.jsxs("div",{className:"form-group",children:[g.jsxs("label",{htmlFor:"email",children:[g.jsx(rv,{})," Email"]}),g.jsx("input",{type:"email",id:"email",value:t,onChange:d=>e(d.target.value),required:!0,placeholder:"Enter your email"})]}),g.jsxs("div",{className:"form-group",children:[g.jsxs("label",{htmlFor:"password",children:[g.jsx(sd,{})," Password"]}),g.jsx("input",{type:"password",id:"password",value:n,onChange:d=>r(d.target.value),required:!0,placeholder:"Enter your password"})]}),g.jsx("button",{type:"submit",className:"primary-btn auth-btn",disabled:o,children:o?"Logging in...":"Login"})]}),g.jsxs("p",{className:"auth-redirect",children:["Don't have an account? ",g.jsx(Bn,{to:"/register",children:"Register"})]})]})})},XF=()=>{const[t,e]=M.useState(""),[n,r]=M.useState(""),[i,s]=M.useState(""),[o,a]=M.useState(""),[l,c]=M.useState(""),[u,d]=M.useState(!1),{signup:f,updateUserProfile:p}=cn(),m=Gr(),v=async E=>{if(E.preventDefault(),i!==o)return c("Passwords do not match");try{c(""),d(!0);const{user:_}=await f(n,i);await p(_,{displayName:t}),m("/dashboard")}catch(_){c("Failed to create an account"),console.error(_)}d(!1)};return g.jsx("div",{className:"auth-container",children:g.jsxs("div",{className:"auth-card",children:[g.jsxs(Bn,{to:"/",className:"back-link",children:[g.jsx(cT,{})," Back to Home"]}),g.jsx("h2",{className:"auth-title",children:"Register for Retail Ease"}),l&&g.jsx("div",{className:"error-message",children:l}),g.jsxs("form",{onSubmit:v,className:"auth-form",children:[g.jsxs("div",{className:"form-group",children:[g.jsxs("label",{htmlFor:"name",children:[g.jsx(ov,{})," Full Name"]}),g.jsx("input",{type:"text",id:"name",value:t,onChange:E=>e(E.target.value),required:!0,placeholder:"Enter your full name"})]}),g.jsxs("div",{className:"form-group",children:[g.jsxs("label",{htmlFor:"email",children:[g.jsx(rv,{})," Email"]}),g.jsx("input",{type:"email",id:"email",value:n,onChange:E=>r(E.target.value),required:!0,placeholder:"Enter your email"})]}),g.jsxs("div",{className:"form-group",children:[g.jsxs("label",{htmlFor:"password",children:[g.jsx(sd,{})," Password"]}),g.jsx("input",{type:"password",id:"password",value:i,onChange:E=>s(E.target.value),required:!0,placeholder:"Create a password",minLength:"6"})]}),g.jsxs("div",{className:"form-group",children:[g.jsxs("label",{htmlFor:"confirmPassword",children:[g.jsx(sd,{})," Confirm Password"]}),g.jsx("input",{type:"password",id:"confirmPassword",value:o,onChange:E=>a(E.target.value),required:!0,placeholder:"Confirm your password",minLength:"6"})]}),g.jsx("button",{type:"submit",className:"primary-btn auth-btn",disabled:u,children:u?"Creating Account...":"Register"})]}),g.jsxs("p",{className:"auth-redirect",children:["Already have an account? ",g.jsx(Bn,{to:"/login",children:"Login"})]})]})})},JF=()=>{const{currentUser:t}=cn(),[e,n]=M.useState({totalItems:0,lowStock:0,expiringItems:0,totalValue:0}),[r,i]=M.useState(!0);return M.useEffect(()=>{if(!t)return;const s=lr(it,"inventory"),o=Hi(s,Mr("userId","==",t.uid)),a=sf(o,l=>{let c=0,u=0,d=0,f=0;l.forEach(p=>{const m=p.data();if(c++,m.quantity<5&&u++,m.expiryDate){const _=new Date(m.expiryDate.seconds*1e3)-new Date,x=Math.ceil(_/(1e3*60*60*24));x>0&&x<=30&&d++}f+=m.price*m.quantity}),n({totalItems:c,lowStock:u,expiringItems:d,totalValue:f}),i(!1)},l=>{console.error("Error fetching inventory stats:",l),i(!1)});return()=>a()},[t]),g.jsxs("div",{className:"dashboard",children:[g.jsx("h1",{className:"page-title",children:"Dashboard"}),g.jsxs("div",{className:"welcome-card",children:[g.jsxs("h2",{children:["Welcome, ",(t==null?void 0:t.displayName)||"User","!"]}),g.jsx("p",{children:"Manage your inventory and track your business performance with Retail Ease."})]}),g.jsxs("div",{className:"dashboard-stats",children:[g.jsxs("div",{className:"stat-card",children:[g.jsx("h3",{children:"Total Items"}),g.jsx("p",{className:"stat-value",children:r?"...":e.totalItems})]}),g.jsxs("div",{className:"stat-card",children:[g.jsx("h3",{children:"Low Stock"}),g.jsx("p",{className:"stat-value",children:r?"...":e.lowStock})]}),g.jsxs("div",{className:"stat-card",children:[g.jsx("h3",{children:"Expiring Soon"}),g.jsx("p",{className:"stat-value",children:r?"...":e.expiringItems})]}),g.jsxs("div",{className:"stat-card",children:[g.jsx("h3",{children:"Total Value"}),g.jsxs("p",{className:"stat-value",children:["",r?"...":e.totalValue.toLocaleString("en-IN")]})]})]}),g.jsxs("div",{className:"dashboard-actions",children:[g.jsxs(Bn,{to:"/inventory",className:"action-card",children:[g.jsx("div",{className:"action-icon",style:{backgroundColor:"var(--primary)"},children:g.jsx(tv,{})}),g.jsxs("div",{className:"action-content",children:[g.jsx("h3",{children:"Inventory"}),g.jsx("p",{children:"Manage your stock and items"})]})]}),g.jsxs(Bn,{to:"/billing",className:"action-card",children:[g.jsx("div",{className:"action-icon",style:{backgroundColor:"var(--secondary)"},children:g.jsx(hT,{})}),g.jsxs("div",{className:"action-content",children:[g.jsx("h3",{children:"Billing"}),g.jsx("p",{children:"Create bills and process sales"})]})]}),g.jsxs(Bn,{to:"/receipts",className:"action-card",children:[g.jsx("div",{className:"action-icon",style:{backgroundColor:"var(--accent)"},children:g.jsx(iv,{})}),g.jsxs("div",{className:"action-content",children:[g.jsx("h3",{children:"Receipts"}),g.jsx("p",{children:"View and manage sales receipts"})]})]}),g.jsxs(Bn,{to:"/profit-analysis",className:"action-card",children:[g.jsx("div",{className:"action-icon",style:{backgroundColor:"var(--highlight)"},children:g.jsx(nv,{})}),g.jsxs("div",{className:"action-content",children:[g.jsx("h3",{children:"Profit Analysis"}),g.jsx("p",{children:"Track your business performance"})]})]}),g.jsxs(Bn,{to:"/ai-business-help",className:"action-card",children:[g.jsx("div",{className:"action-icon",style:{backgroundColor:"var(--accent)"},children:g.jsx(gT,{})}),g.jsxs("div",{className:"action-content",children:[g.jsx("h3",{children:"AI Business Help"}),g.jsx("p",{children:"Get AI-powered business insights"})]})]}),g.jsxs(Bn,{to:"/settings/profile",className:"action-card",children:[g.jsx("div",{className:"action-icon",style:{backgroundColor:"var(--highlight)"},children:g.jsx(dT,{})}),g.jsxs("div",{className:"action-content",children:[g.jsx("h3",{children:"Settings"}),g.jsx("p",{children:"Configure your account"})]})]})]})]})},ZF=({onSubmit:t,onUpdate:e,editItem:n,setEditItem:r,categories:i})=>{const[s,o]=M.useState({name:"",quantity:0,price:0,expiryDate:"",category:"",barcode:"",newCategory:""}),[a,l]=M.useState(null),[c,u]=M.useState(null),[d,f]=M.useState(!1),[p,m]=M.useState(""),[v,E]=M.useState("");M.useEffect(()=>{n&&(o({name:n.name||"",quantity:n.quantity||0,price:n.price||0,expiryDate:n.expiryDate?new Date(n.expiryDate.seconds*1e3).toISOString().split("T")[0]:"",category:n.category||"",barcode:n.barcode||"",newCategory:""}),n.imageUrl?u(n.imageUrl):u(null))},[n]);const _=R=>{const{name:C,value:b,type:k}=R.target;o(S=>({...S,[C]:k==="number"?Number.parseFloat(b)||0:b}))},x=R=>{const C=R.target.files[0];if(!C)return;l(C);const b=new FileReader;b.onloadend=()=>{u(b.result)},b.readAsDataURL(C)},w=async R=>{R.preventDefault(),m(""),E(""),f(!0);try{const C={name:s.name,quantity:s.quantity,price:s.price,expiryDate:s.expiryDate?new Date(s.expiryDate):null,category:s.category==="new"?s.newCategory:s.category||"Uncategorized",barcode:s.barcode};if(n){a&&(f(!0),E("Uploading image..."));const b=await e(n.id,{...C,imageUrl:n.imageUrl},a);b.success?(E("Item updated successfully!"),A()):m(b.error||"Failed to update item")}else{a&&(f(!0),E("Uploading image..."));const b=await t(C,a);b.success?(E("Item added successfully!"),A()):m(b.error||"Failed to add item")}}catch(C){console.error("Error in form submission:",C),m("An unexpected error occurred")}f(!1)},A=()=>{o({name:"",quantity:0,price:0,expiryDate:"",category:"",barcode:"",newCategory:""}),l(null),u(null),r(null)},P=()=>{alert("Barcode scanner will be integrated with QuaggaJS in the future. This is a placeholder."),o(R=>({...R,barcode:"SCAN"+Math.floor(Math.random()*1e6)}))};return g.jsxs("div",{className:"inventory-form-container",children:[g.jsx("h2",{className:"form-title",children:n?"Edit Item":"Add New Item"}),p&&g.jsx("div",{className:"error-message",children:p}),v&&g.jsx("div",{className:"success-message",children:v}),g.jsxs("form",{onSubmit:w,className:"inventory-form",children:[g.jsxs("div",{className:"form-grid",children:[g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"name",children:"Item Name*"}),g.jsx("input",{type:"text",id:"name",name:"name",value:s.name,onChange:_,required:!0,placeholder:"Enter item name"})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"quantity",children:"Quantity*"}),g.jsx("input",{type:"number",id:"quantity",name:"quantity",value:s.quantity,onChange:_,required:!0,min:"0",step:"1"})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"price",children:"Price ()*"}),g.jsx("input",{type:"number",id:"price",name:"price",value:s.price,onChange:_,required:!0,min:"0",step:"0.01"})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"expiryDate",children:"Expiry Date (Optional)"}),g.jsx("input",{type:"date",id:"expiryDate",name:"expiryDate",value:s.expiryDate,onChange:_,placeholder:"Optional"}),g.jsx("small",{className:"form-hint",children:"Leave empty for items without expiry date"})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"category",children:"Category"}),g.jsxs("select",{id:"category",name:"category",value:s.category,onChange:_,children:[g.jsx("option",{value:"",children:"Select Category"}),i.map(R=>g.jsx("option",{value:R,children:R},R)),g.jsx("option",{value:"new",children:"+ Add New Category"})]})]}),s.category==="new"&&g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"newCategory",children:"New Category"}),g.jsx("input",{type:"text",id:"newCategory",name:"newCategory",value:s.newCategory,onChange:_,placeholder:"Enter new category name"})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"barcode",children:"Barcode"}),g.jsxs("button",{type:"button",className:"scan-barcode-btn",onClick:P,children:[g.jsx(BF,{className:"barcode-icon"}),g.jsx("span",{children:"Scan Barcode"})]}),s.barcode&&g.jsx("div",{className:"barcode-result",children:g.jsxs("span",{children:["Barcode: ",s.barcode]})})]}),g.jsxs("div",{className:"form-group image-upload-group",children:[g.jsx("label",{children:"Item Image"}),g.jsxs("div",{className:"image-upload",children:[g.jsx("input",{type:"file",id:"image",accept:"image/*",onChange:x,className:"image-input"}),g.jsxs("label",{htmlFor:"image",className:"image-label",children:[g.jsx(uT,{className:"camera-icon"}),g.jsx("span",{children:a?"Change Image":"Upload Image"})]}),c&&g.jsx("div",{className:"image-preview",children:g.jsx("img",{src:c||"/placeholder.svg",alt:"Preview"})})]})]})]}),g.jsxs("div",{className:"form-actions",children:[n&&g.jsx("button",{type:"button",className:"outline-btn cancel-btn",onClick:A,children:"Cancel"}),g.jsx("button",{type:"submit",className:"primary-btn submit-btn",disabled:d,children:d?"Processing...":n?"Update Item":"Add Item"})]})]})]})},e7=({items:t,groupedItems:e,loading:n,onDelete:r,onEdit:i,onUpdateQuantity:s})=>{const o=c=>c?new Date(c.seconds*1e3).toLocaleDateString():"N/A",a=c=>{if(!c)return!1;const f=new Date(c.seconds*1e3)-new Date,p=Math.ceil(f/(1e3*60*60*24));return p>0&&p<=30},l=c=>c<5;return n?g.jsx("div",{className:"loading",children:"Loading inventory..."}):t.length===0?g.jsx("div",{className:"empty-inventory",children:g.jsx("p",{children:"No items found. Add your first item using the form above."})}):g.jsxs("div",{className:"inventory-list",children:[g.jsxs("h2",{className:"list-title",children:["Your Inventory (",t.length," items)"]}),Object.entries(e).map(([c,u])=>g.jsxs("div",{className:"category-section",children:[g.jsx("h3",{className:"category-title",children:c}),g.jsx("div",{className:"item-grid",children:u.map(d=>g.jsxs("div",{className:"item-card",children:[g.jsx("div",{className:"item-image",children:d.imageUrl?g.jsx("img",{src:d.imageUrl||"/placeholder.svg",alt:d.name}):g.jsx("div",{className:"no-image",children:"No Image"})}),g.jsxs("div",{className:"item-details",children:[g.jsx("h3",{className:"item-name",children:d.name}),g.jsxs("div",{className:"item-info",children:[g.jsx("div",{className:"info-row",children:g.jsxs("span",{className:"info-value price-tag",children:["",d.price.toFixed(2)]})}),g.jsx("div",{className:"info-row",children:g.jsxs("span",{className:`quantity-value ${l(d.quantity)?"low-stock":""}`,children:["Qty: ",d.quantity]})}),d.expiryDate&&g.jsx("div",{className:"info-row",children:g.jsxs("span",{className:`info-value ${a(d.expiryDate)?"expiring-soon":""}`,children:["Exp: ",o(d.expiryDate)]})})]}),g.jsxs("div",{className:"item-actions",children:[g.jsxs("div",{className:"quantity-control",children:[g.jsx("button",{className:"quantity-btn minus-btn",onClick:()=>s(d.id,d.quantity-1),disabled:d.quantity<=0,children:g.jsx(fT,{})}),g.jsx("button",{className:"quantity-btn plus-btn",onClick:()=>s(d.id,d.quantity+1),children:g.jsx(pT,{})})]}),g.jsxs("div",{className:"action-buttons",children:[g.jsx("button",{className:"action-btn edit-btn",onClick:()=>i(d),title:"Edit Item",children:g.jsx(VF,{})}),g.jsx("button",{className:"action-btn delete-btn",onClick:()=>r(d.id),title:"Delete Item",children:g.jsx(od,{})})]})]})]})]},d.id))})]},c))]})},t7=()=>{const[t,e]=M.useState([]),[n,r]=M.useState(!0),[i,s]=M.useState(""),[o,a]=M.useState(""),[l,c]=M.useState("All"),[u,d]=M.useState(["All"]),[f,p]=M.useState(null),{currentUser:m}=cn(),[v,E]=M.useState("category"),[_,x]=M.useState("asc");M.useEffect(()=>{if(!m)return;r(!0);const I=Hi(lr(it,"inventory"),Mr("userId","==",m.uid));return sf(I,D=>{const G=[],q=new Set(["All"]);D.forEach(L=>{const X={id:L.id,...L.data()};G.push(X),X.category&&q.add(X.category)}),e(G),d(Array.from(q)),r(!1)},D=>{console.error("Error fetching inventory:",D),s("Failed to load inventory items"),r(!1)})},[m]);const w=async(I,N)=>{try{let D=null;return N&&(D=await S(N)),await WA(lr(it,"inventory"),{...I,imageUrl:D,userId:m.uid,createdAt:sh()}),{success:!0}}catch(D){return console.error("Error adding item:",D),{success:!1,error:"Failed to add item"}}},A=async(I,N,D)=>{try{let G=N.imageUrl;return D&&(G=await S(D)),await Fg(In(it,"inventory",I),{...N,imageUrl:G,updatedAt:sh()}),p(null),{success:!0}}catch(G){return console.error("Error updating item:",G),{success:!1,error:"Failed to update item"}}},P=async I=>{if(window.confirm("Are you sure you want to delete this item?"))try{await ih(In(it,"inventory",I))}catch(N){console.error("Error deleting item:",N),s("Failed to delete item")}},R=async(I,N)=>{if(!(N<0))try{await Fg(In(it,"inventory",I),{quantity:N,updatedAt:sh()})}catch(D){console.error("Error updating quantity:",D),s("Failed to update quantity")}},C=I=>{const N=I.target.value;N==="price-asc"?(E("price"),x("asc")):N==="price-desc"?(E("price"),x("desc")):N==="expiry-asc"?(E("expiryDate"),x("asc")):(E(N),x("asc"))},b=t.filter(I=>{const N=I.name.toLowerCase().includes(o.toLowerCase()),D=l==="All"||I.category===l;return N&&D}).sort((I,N)=>{if(v==="price")return _==="asc"?I.price-N.price:N.price-I.price;if(v==="expiryDate")return!I.expiryDate&&!N.expiryDate?0:I.expiryDate?N.expiryDate?_==="asc"?I.expiryDate.seconds-N.expiryDate.seconds:N.expiryDate.seconds-I.expiryDate.seconds:-1:1;if(v==="category"){const D=I.category||"Uncategorized",G=N.category||"Uncategorized";return D.localeCompare(G)}return 0}),k=b.reduce((I,N)=>{const D=N.category||"Uncategorized";return I[D]||(I[D]=[]),I[D].push(N),I},{}),S=async I=>{try{const N=new FormData;N.append("file",I),N.append("upload_preset","retailease_unsigned");const D=await fetch("https://api.cloudinary.com/v1_1/dsqoz1bfm/image/upload",{method:"POST",body:N});if(!D.ok)throw new Error(`Upload failed with status: ${D.status}`);return(await D.json()).secure_url}catch(N){throw console.error("Cloudinary upload error:",N),new Error("Image upload failed. Please try again.")}};return g.jsxs("div",{className:"inventory-page",children:[g.jsx("h1",{className:"page-title",children:"Inventory Management"}),i&&g.jsx("div",{className:"error-message",children:i}),g.jsx(ZF,{onSubmit:w,onUpdate:A,editItem:f,setEditItem:p,categories:u.filter(I=>I!=="All")}),g.jsxs("div",{className:"inventory-filters",children:[g.jsxs("div",{className:"search-container",children:[g.jsx(sv,{className:"search-icon"}),g.jsx("input",{type:"text",placeholder:"Search items...",value:o,onChange:I=>a(I.target.value),className:"search-input"})]}),g.jsxs("div",{className:"filter-options",children:[g.jsx("select",{value:l,onChange:I=>c(I.target.value),className:"category-filter",children:u.map(I=>g.jsx("option",{value:I,children:I},I))}),g.jsxs("select",{value:v==="price"?`price-${_}`:v==="expiryDate"?"expiry-asc":v,onChange:C,className:"sort-filter",children:[g.jsx("option",{value:"category",children:"Sort by Category"}),g.jsx("option",{value:"price-asc",children:"Price: Low to High"}),g.jsx("option",{value:"price-desc",children:"Price: High to Low"}),g.jsx("option",{value:"expiry-asc",children:"Expiry: Sooner to Later"})]})]})]}),g.jsx(e7,{items:b,groupedItems:k,loading:n,onDelete:P,onEdit:p,onUpdateQuantity:R})]})},wu=({title:t,value:e,subvalue:n,icon:r,color:i,isCurrency:s=!1,imageUrl:o,altValue:a=null,altLabel:l=null})=>{const[c,u]=M.useState(!1);M.useEffect(()=>{const m=setTimeout(()=>{u(!0)},100);return()=>clearTimeout(m)},[]);const d=m=>typeof m!="number"?m:m>=1e5?`${(m/1e5).toFixed(2)} L`:m>=1e3?`${(m/1e3).toFixed(1)} K`:`${m.toFixed(2)}`,f=s?d(e):e,p=a!==null?s?d(a):a:null;return g.jsxs("div",{className:`metric-card ${i} ${c?"visible":""}`,children:[g.jsx("div",{className:"metric-icon",children:r}),g.jsxs("div",{className:"metric-content",children:[g.jsx("h3",{className:"metric-title",children:t}),g.jsxs("div",{className:"metric-value-container",children:[o?g.jsxs("div",{className:"metric-with-image",children:[g.jsx("img",{src:o||"/placeholder.svg",alt:e,className:"metric-image"}),g.jsxs("div",{children:[g.jsx("p",{className:"metric-value",children:f}),n&&g.jsx("p",{className:"metric-subvalue",children:n})]})]}):g.jsxs(g.Fragment,{children:[g.jsx("p",{className:"metric-value",children:f}),n&&g.jsx("p",{className:"metric-subvalue",children:n})]}),p!==null&&g.jsxs("div",{className:"metric-alt-value",children:[g.jsx("span",{className:"alt-label",children:l||"Alt"}),g.jsx("span",{className:"alt-value",children:p})]})]})]})]})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Pc(t){return t+.5|0}const yi=(t,e,n)=>Math.max(Math.min(t,n),e);function nl(t){return yi(Pc(t*2.55),0,255)}function Oi(t){return yi(Pc(t*255),0,255)}function Er(t){return yi(Pc(t/2.55)/100,0,1)}function Z_(t){return yi(Pc(t*100),0,100)}const En={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},jg=[..."0123456789ABCDEF"],n7=t=>jg[t&15],r7=t=>jg[(t&240)>>4]+jg[t&15],bu=t=>(t&240)>>4===(t&15),i7=t=>bu(t.r)&&bu(t.g)&&bu(t.b)&&bu(t.a);function s7(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&En[t[1]]*17,g:255&En[t[2]]*17,b:255&En[t[3]]*17,a:e===5?En[t[4]]*17:255}:(e===7||e===9)&&(n={r:En[t[1]]<<4|En[t[2]],g:En[t[3]]<<4|En[t[4]],b:En[t[5]]<<4|En[t[6]],a:e===9?En[t[7]]<<4|En[t[8]]:255})),n}const o7=(t,e)=>t<255?e(t):"";function a7(t){var e=i7(t)?n7:r7;return t?"#"+e(t.r)+e(t.g)+e(t.b)+o7(t.a,e):void 0}const l7=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function vT(t,e,n){const r=e*Math.min(n,1-n),i=(s,o=(s+t/30)%12)=>n-r*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function c7(t,e,n){const r=(i,s=(i+t/60)%6)=>n-n*e*Math.max(Math.min(s,4-s,1),0);return[r(5),r(3),r(1)]}function u7(t,e,n){const r=vT(t,1,.5);let i;for(e+n>1&&(i=1/(e+n),e*=i,n*=i),i=0;i<3;i++)r[i]*=1-e-n,r[i]+=e;return r}function h7(t,e,n,r,i){return t===i?(e-n)/r+(e<n?6:0):e===i?(n-t)/r+2:(t-e)/r+4}function av(t){const n=t.r/255,r=t.g/255,i=t.b/255,s=Math.max(n,r,i),o=Math.min(n,r,i),a=(s+o)/2;let l,c,u;return s!==o&&(u=s-o,c=a>.5?u/(2-s-o):u/(s+o),l=h7(n,r,i,u,s),l=l*60+.5),[l|0,c||0,a]}function lv(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(Oi)}function cv(t,e,n){return lv(vT,t,e,n)}function d7(t,e,n){return lv(u7,t,e,n)}function f7(t,e,n){return lv(c7,t,e,n)}function yT(t){return(t%360+360)%360}function p7(t){const e=l7.exec(t);let n=255,r;if(!e)return;e[5]!==r&&(n=e[6]?nl(+e[5]):Oi(+e[5]));const i=yT(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=d7(i,s,o):e[1]==="hsv"?r=f7(i,s,o):r=cv(i,s,o),{r:r[0],g:r[1],b:r[2],a:n}}function g7(t,e){var n=av(t);n[0]=yT(n[0]+e),n=cv(n),t.r=n[0],t.g=n[1],t.b=n[2]}function m7(t){if(!t)return;const e=av(t),n=e[0],r=Z_(e[1]),i=Z_(e[2]);return t.a<255?`hsla(${n}, ${r}%, ${i}%, ${Er(t.a)})`:`hsl(${n}, ${r}%, ${i}%)`}const e2={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},t2={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function x7(){const t={},e=Object.keys(t2),n=Object.keys(e2);let r,i,s,o,a;for(r=0;r<e.length;r++){for(o=a=e[r],i=0;i<n.length;i++)s=n[i],a=a.replace(s,e2[s]);s=parseInt(t2[o],16),t[a]=[s>>16&255,s>>8&255,s&255]}return t}let Cu;function v7(t){Cu||(Cu=x7(),Cu.transparent=[0,0,0,0]);const e=Cu[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const y7=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function _7(t){const e=y7.exec(t);let n=255,r,i,s;if(e){if(e[7]!==r){const o=+e[7];n=e[8]?nl(o):yi(o*255,0,255)}return r=+e[1],i=+e[3],s=+e[5],r=255&(e[2]?nl(r):yi(r,0,255)),i=255&(e[4]?nl(i):yi(i,0,255)),s=255&(e[6]?nl(s):yi(s,0,255)),{r,g:i,b:s,a:n}}}function E7(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Er(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const v0=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,ho=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function w7(t,e,n){const r=ho(Er(t.r)),i=ho(Er(t.g)),s=ho(Er(t.b));return{r:Oi(v0(r+n*(ho(Er(e.r))-r))),g:Oi(v0(i+n*(ho(Er(e.g))-i))),b:Oi(v0(s+n*(ho(Er(e.b))-s))),a:t.a+n*(e.a-t.a)}}function Au(t,e,n){if(t){let r=av(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,e===0?360:1)),r=cv(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function _T(t,e){return t&&Object.assign(e||{},t)}function n2(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Oi(t[3]))):(e=_T(t,{r:0,g:0,b:0,a:1}),e.a=Oi(e.a)),e}function b7(t){return t.charAt(0)==="r"?_7(t):p7(t)}class rc{constructor(e){if(e instanceof rc)return e;const n=typeof e;let r;n==="object"?r=n2(e):n==="string"&&(r=s7(e)||v7(e)||b7(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=_T(this._rgb);return e&&(e.a=Er(e.a)),e}set rgb(e){this._rgb=n2(e)}rgbString(){return this._valid?E7(this._rgb):void 0}hexString(){return this._valid?a7(this._rgb):void 0}hslString(){return this._valid?m7(this._rgb):void 0}mix(e,n){if(e){const r=this.rgb,i=e.rgb;let s;const o=n===s?.5:n,a=2*o-1,l=r.a-i.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-c,r.r=255&c*r.r+s*i.r+.5,r.g=255&c*r.g+s*i.g+.5,r.b=255&c*r.b+s*i.b+.5,r.a=o*r.a+(1-o)*i.a,this.rgb=r}return this}interpolate(e,n){return e&&(this._rgb=w7(this._rgb,e._rgb,n)),this}clone(){return new rc(this.rgb)}alpha(e){return this._rgb.a=Oi(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=Pc(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Au(this._rgb,2,e),this}darken(e){return Au(this._rgb,2,-e),this}saturate(e){return Au(this._rgb,1,e),this}desaturate(e){return Au(this._rgb,1,-e),this}rotate(e){return g7(this._rgb,e),this}}/*!
 * Chart.js v4.4.8
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function mr(){}const C7=(()=>{let t=0;return()=>t++})();function fe(t){return t==null}function Ve(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function me(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function Xe(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function hn(t,e){return Xe(t)?t:e}function he(t,e){return typeof t>"u"?e:t}const A7=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,ET=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Re(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function Ce(t,e,n,r){let i,s,o;if(Ve(t))for(s=t.length,i=0;i<s;i++)e.call(n,t[i],i);else if(me(t))for(o=Object.keys(t),s=o.length,i=0;i<s;i++)e.call(n,t[o[i]],o[i])}function ad(t,e){let n,r,i,s;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(i=t[n],s=e[n],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function ld(t){if(Ve(t))return t.map(ld);if(me(t)){const e=Object.create(null),n=Object.keys(t),r=n.length;let i=0;for(;i<r;++i)e[n[i]]=ld(t[n[i]]);return e}return t}function wT(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function T7(t,e,n,r){if(!wT(t))return;const i=e[t],s=n[t];me(i)&&me(s)?ic(i,s,r):e[t]=ld(s)}function ic(t,e,n){const r=Ve(e)?e:[e],i=r.length;if(!me(t))return t;n=n||{};const s=n.merger||T7;let o;for(let a=0;a<i;++a){if(o=r[a],!me(o))continue;const l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)s(l[c],t,o,n)}return t}function bl(t,e){return ic(t,e,{merger:S7})}function S7(t,e,n){if(!wT(t))return;const r=e[t],i=n[t];me(r)&&me(i)?bl(r,i):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=ld(i))}const r2={"":t=>t,x:t=>t.x,y:t=>t.y};function I7(t){const e=t.split("."),n=[];let r="";for(const i of e)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function k7(t){const e=I7(t);return n=>{for(const r of e){if(r==="")break;n=n&&n[r]}return n}}function Wi(t,e){return(r2[e]||(r2[e]=k7(e)))(t)}function uv(t){return t.charAt(0).toUpperCase()+t.slice(1)}const sc=t=>typeof t<"u",$i=t=>typeof t=="function",i2=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function P7(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Le=Math.PI,Be=2*Le,R7=Be+Le,cd=Number.POSITIVE_INFINITY,D7=Le/180,st=Le/2,as=Le/4,s2=Le*2/3,_i=Math.log10,or=Math.sign;function Cl(t,e,n){return Math.abs(t-e)<n}function o2(t){const e=Math.round(t);t=Cl(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(_i(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function N7(t){const e=[],n=Math.sqrt(t);let r;for(r=1;r<n;r++)t%r===0&&(e.push(r),e.push(t/r));return n===(n|0)&&e.push(n),e.sort((i,s)=>i-s).pop(),e}function F7(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function na(t){return!F7(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function M7(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function bT(t,e,n){let r,i,s;for(r=0,i=t.length;r<i;r++)s=t[r][n],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function Ln(t){return t*(Le/180)}function hv(t){return t*(180/Le)}function a2(t){if(!Xe(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function CT(t,e){const n=e.x-t.x,r=e.y-t.y,i=Math.sqrt(n*n+r*r);let s=Math.atan2(r,n);return s<-.5*Le&&(s+=Be),{angle:s,distance:i}}function Vg(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function O7(t,e){return(t-e+R7)%Be-Le}function fn(t){return(t%Be+Be)%Be}function oc(t,e,n,r){const i=fn(t),s=fn(e),o=fn(n),a=fn(s-i),l=fn(o-i),c=fn(i-s),u=fn(i-o);return i===s||i===o||r&&s===o||a>l&&c<u}function mt(t,e,n){return Math.max(e,Math.min(n,t))}function B7(t){return mt(t,-32768,32767)}function Ir(t,e,n,r=1e-6){return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function dv(t,e,n){n=n||(o=>t[o]<e);let r=t.length-1,i=0,s;for(;r-i>1;)s=i+r>>1,n(s)?i=s:r=s;return{lo:i,hi:r}}const kr=(t,e,n,r)=>dv(t,n,r?i=>{const s=t[i][e];return s<n||s===n&&t[i+1][e]===n}:i=>t[i][e]<n),L7=(t,e,n)=>dv(t,n,r=>t[r][e]>=n);function j7(t,e,n){let r=0,i=t.length;for(;r<i&&t[r]<e;)r++;for(;i>r&&t[i-1]>n;)i--;return r>0||i<t.length?t.slice(r,i):t}const AT=["push","pop","shift","splice","unshift"];function V7(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),AT.forEach(n=>{const r="_onData"+uv(n),i=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...s){const o=i.apply(this,s);return t._chartjs.listeners.forEach(a=>{typeof a[r]=="function"&&a[r](...s)}),o}})})}function l2(t,e){const n=t._chartjs;if(!n)return;const r=n.listeners,i=r.indexOf(e);i!==-1&&r.splice(i,1),!(r.length>0)&&(AT.forEach(s=>{delete t[s]}),delete t._chartjs)}function TT(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const ST=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function IT(t,e){let n=[],r=!1;return function(...i){n=i,r||(r=!0,ST.call(window,()=>{r=!1,t.apply(e,n)}))}}function z7(t,e){let n;return function(...r){return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}const fv=t=>t==="start"?"left":t==="end"?"right":"center",Ft=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,U7=(t,e,n,r)=>t===(r?"left":"right")?n:t==="center"?(e+n)/2:e;function kT(t,e,n){const r=e.length;let i=0,s=r;if(t._sorted){const{iScale:o,vScale:a,_parsed:l}=t,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,u=o.axis,{min:d,max:f,minDefined:p,maxDefined:m}=o.getUserBounds();if(p){if(i=Math.min(kr(l,u,d).lo,n?r:kr(e,u,o.getPixelForValue(d)).lo),c){const v=l.slice(0,i+1).reverse().findIndex(E=>!fe(E[a.axis]));i-=Math.max(0,v)}i=mt(i,0,r-1)}if(m){let v=Math.max(kr(l,o.axis,f,!0).hi+1,n?0:kr(e,u,o.getPixelForValue(f),!0).hi+1);if(c){const E=l.slice(v-1).findIndex(_=>!fe(_[a.axis]));v+=Math.max(0,E)}s=mt(v,i,r)-i}else s=r-i}return{start:i,count:s}}function PT(t){const{xScale:e,yScale:n,_scaleRanges:r}=t,i={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!r)return t._scaleRanges=i,!0;const s=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,i),s}const Tu=t=>t===0||t===1,c2=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Be/n)),u2=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*Be/n)+1,Al={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*st)+1,easeOutSine:t=>Math.sin(t*st),easeInOutSine:t=>-.5*(Math.cos(Le*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Tu(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Tu(t)?t:c2(t,.075,.3),easeOutElastic:t=>Tu(t)?t:u2(t,.075,.3),easeInOutElastic(t){return Tu(t)?t:t<.5?.5*c2(t*2,.1125,.45):.5+.5*u2(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-Al.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?Al.easeInBounce(t*2)*.5:Al.easeOutBounce(t*2-1)*.5+.5};function pv(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function h2(t){return pv(t)?t:new rc(t)}function y0(t){return pv(t)?t:new rc(t).saturate(.5).darken(.1).hexString()}const H7=["x","y","borderWidth","radius","tension"],W7=["color","borderColor","backgroundColor"];function $7(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:W7},numbers:{type:"number",properties:H7}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function q7(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const d2=new Map;function K7(t,e){e=e||{};const n=t+JSON.stringify(e);let r=d2.get(n);return r||(r=new Intl.NumberFormat(t,e),d2.set(n,r)),r}function Rc(t,e,n){return K7(e,n).format(t)}const RT={values(t){return Ve(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const r=this.chart.options.locale;let i,s=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(i="scientific"),s=G7(t,n)}const o=_i(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),Rc(t,r,l)},logarithmic(t,e,n){if(t===0)return"0";const r=n[e].significand||t/Math.pow(10,Math.floor(_i(t)));return[1,2,3,5,10,15].includes(r)||e>.8*n.length?RT.numeric.call(this,t,e,n):""}};function G7(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var cf={formatters:RT};function Q7(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:cf.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const zs=Object.create(null),zg=Object.create(null);function Tl(t,e){if(!e)return t;const n=e.split(".");for(let r=0,i=n.length;r<i;++r){const s=n[r];t=t[s]||(t[s]=Object.create(null))}return t}function _0(t,e,n){return typeof e=="string"?ic(Tl(t,e),n):ic(Tl(t,""),e)}class Y7{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,i)=>y0(i.backgroundColor),this.hoverBorderColor=(r,i)=>y0(i.borderColor),this.hoverColor=(r,i)=>y0(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return _0(this,e,n)}get(e){return Tl(this,e)}describe(e,n){return _0(zg,e,n)}override(e,n){return _0(zs,e,n)}route(e,n,r,i){const s=Tl(this,e),o=Tl(this,r),a="_"+n;Object.defineProperties(s,{[a]:{value:s[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[i];return me(l)?Object.assign({},c,l):he(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var ze=new Y7({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[$7,q7,Q7]);function X7(t){return!t||fe(t.size)||fe(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function ud(t,e,n,r,i){let s=e[i];return s||(s=e[i]=t.measureText(i).width,n.push(i)),s>r&&(r=s),r}function J7(t,e,n,r){r=r||{};let i=r.data=r.data||{},s=r.garbageCollect=r.garbageCollect||[];r.font!==e&&(i=r.data={},s=r.garbageCollect=[],r.font=e),t.save(),t.font=e;let o=0;const a=n.length;let l,c,u,d,f;for(l=0;l<a;l++)if(d=n[l],d!=null&&!Ve(d))o=ud(t,i,s,o,d);else if(Ve(d))for(c=0,u=d.length;c<u;c++)f=d[c],f!=null&&!Ve(f)&&(o=ud(t,i,s,o,f));t.restore();const p=s.length/2;if(p>n.length){for(l=0;l<p;l++)delete i[s[l]];s.splice(0,p)}return o}function ls(t,e,n){const r=t.currentDevicePixelRatio,i=n!==0?Math.max(n/2,.5):0;return Math.round((e-i)*r)/r+i}function f2(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function Ug(t,e,n,r){DT(t,e,n,r,null)}function DT(t,e,n,r,i){let s,o,a,l,c,u,d,f;const p=e.pointStyle,m=e.rotation,v=e.radius;let E=(m||0)*D7;if(p&&typeof p=="object"&&(s=p.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){t.save(),t.translate(n,r),t.rotate(E),t.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),t.restore();return}if(!(isNaN(v)||v<=0)){switch(t.beginPath(),p){default:i?t.ellipse(n,r,i/2,v,0,0,Be):t.arc(n,r,v,0,Be),t.closePath();break;case"triangle":u=i?i/2:v,t.moveTo(n+Math.sin(E)*u,r-Math.cos(E)*v),E+=s2,t.lineTo(n+Math.sin(E)*u,r-Math.cos(E)*v),E+=s2,t.lineTo(n+Math.sin(E)*u,r-Math.cos(E)*v),t.closePath();break;case"rectRounded":c=v*.516,l=v-c,o=Math.cos(E+as)*l,d=Math.cos(E+as)*(i?i/2-c:l),a=Math.sin(E+as)*l,f=Math.sin(E+as)*(i?i/2-c:l),t.arc(n-d,r-a,c,E-Le,E-st),t.arc(n+f,r-o,c,E-st,E),t.arc(n+d,r+a,c,E,E+st),t.arc(n-f,r+o,c,E+st,E+Le),t.closePath();break;case"rect":if(!m){l=Math.SQRT1_2*v,u=i?i/2:l,t.rect(n-u,r-l,2*u,2*l);break}E+=as;case"rectRot":d=Math.cos(E)*(i?i/2:v),o=Math.cos(E)*v,a=Math.sin(E)*v,f=Math.sin(E)*(i?i/2:v),t.moveTo(n-d,r-a),t.lineTo(n+f,r-o),t.lineTo(n+d,r+a),t.lineTo(n-f,r+o),t.closePath();break;case"crossRot":E+=as;case"cross":d=Math.cos(E)*(i?i/2:v),o=Math.cos(E)*v,a=Math.sin(E)*v,f=Math.sin(E)*(i?i/2:v),t.moveTo(n-d,r-a),t.lineTo(n+d,r+a),t.moveTo(n+f,r-o),t.lineTo(n-f,r+o);break;case"star":d=Math.cos(E)*(i?i/2:v),o=Math.cos(E)*v,a=Math.sin(E)*v,f=Math.sin(E)*(i?i/2:v),t.moveTo(n-d,r-a),t.lineTo(n+d,r+a),t.moveTo(n+f,r-o),t.lineTo(n-f,r+o),E+=as,d=Math.cos(E)*(i?i/2:v),o=Math.cos(E)*v,a=Math.sin(E)*v,f=Math.sin(E)*(i?i/2:v),t.moveTo(n-d,r-a),t.lineTo(n+d,r+a),t.moveTo(n+f,r-o),t.lineTo(n-f,r+o);break;case"line":o=i?i/2:Math.cos(E)*v,a=Math.sin(E)*v,t.moveTo(n-o,r-a),t.lineTo(n+o,r+a);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(E)*(i?i/2:v),r+Math.sin(E)*v);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Pr(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function uf(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function hf(t){t.restore()}function Z7(t,e,n,r,i){if(!e)return t.lineTo(n.x,n.y);if(i==="middle"){const s=(e.x+n.x)/2;t.lineTo(s,e.y),t.lineTo(s,n.y)}else i==="after"!=!!r?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function eM(t,e,n,r){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function tM(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),fe(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function nM(t,e,n,r,i){if(i.strikethrough||i.underline){const s=t.measureText(r),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,u=i.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=i.decorationWidth||2,t.moveTo(o,u),t.lineTo(a,u),t.stroke()}}function rM(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function Us(t,e,n,r,i,s={}){const o=Ve(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="";let l,c;for(t.save(),t.font=i.string,tM(t,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&rM(t,s.backdrop),a&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),fe(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(c,n,r,s.maxWidth)),t.fillText(c,n,r,s.maxWidth),nM(t,n,r,c,s),r+=Number(i.lineHeight);t.restore()}function ac(t,e){const{x:n,y:r,w:i,h:s,radius:o}=e;t.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*Le,Le,!0),t.lineTo(n,r+s-o.bottomLeft),t.arc(n+o.bottomLeft,r+s-o.bottomLeft,o.bottomLeft,Le,st,!0),t.lineTo(n+i-o.bottomRight,r+s),t.arc(n+i-o.bottomRight,r+s-o.bottomRight,o.bottomRight,st,0,!0),t.lineTo(n+i,r+o.topRight),t.arc(n+i-o.topRight,r+o.topRight,o.topRight,0,-st,!0),t.lineTo(n+o.topLeft,r)}const iM=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,sM=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function oM(t,e){const n=(""+t).match(iM);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const aM=t=>+t||0;function gv(t,e){const n={},r=me(e),i=r?Object.keys(e):e,s=me(t)?r?o=>he(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of i)n[o]=aM(s(o));return n}function NT(t){return gv(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Ts(t){return gv(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Ut(t){const e=NT(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function dt(t,e){t=t||{},e=e||ze.font;let n=he(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let r=he(t.style,e.style);r&&!(""+r).match(sM)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:he(t.family,e.family),lineHeight:oM(he(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:he(t.weight,e.weight),string:""};return i.string=X7(i),i}function rl(t,e,n,r){let i,s,o;for(i=0,s=t.length;i<s;++i)if(o=t[i],o!==void 0&&o!==void 0)return o}function lM(t,e,n){const{min:r,max:i}=t,s=ET(e,(i-r)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(r,-Math.abs(s)),max:o(i,s)}}function Ji(t,e){return Object.assign(Object.create(t),e)}function mv(t,e=[""],n,r,i=()=>t[0]){const s=n||t;typeof r>"u"&&(r=BT("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:s,_fallback:r,_getTarget:i,override:a=>mv([a,...t],e,s,r)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return MT(a,l,()=>mM(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return g2(a).includes(l)},ownKeys(a){return g2(a)},set(a,l,c){const u=a._storage||(a._storage=i());return a[l]=u[l]=c,delete a._keys,!0}})}function ra(t,e,n,r){const i={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:FT(t,r),setContext:s=>ra(t,s,n,r),override:s=>ra(t.override(s),e,n,r)};return new Proxy(i,{deleteProperty(s,o){return delete s[o],delete t[o],!0},get(s,o,a){return MT(s,o,()=>uM(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(s,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(s,o,a){return t[o]=a,delete s[o],!0}})}function FT(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:i=e.allKeys}=t;return{allKeys:i,scriptable:n,indexable:r,isScriptable:$i(n)?n:()=>n,isIndexable:$i(r)?r:()=>r}}const cM=(t,e)=>t?t+uv(e):e,xv=(t,e)=>me(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function MT(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const r=n();return t[e]=r,r}function uM(t,e,n){const{_proxy:r,_context:i,_subProxy:s,_descriptors:o}=t;let a=r[e];return $i(a)&&o.isScriptable(e)&&(a=hM(e,a,t,n)),Ve(a)&&a.length&&(a=dM(e,a,t,o.isIndexable)),xv(e,a)&&(a=ra(a,i,s&&s[e],o)),a}function hM(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(s,o||r);return a.delete(t),xv(t,l)&&(l=vv(i._scopes,i,t,l)),l}function dM(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_descriptors:a}=n;if(typeof s.index<"u"&&r(t))return e[s.index%e.length];if(me(e[0])){const l=e,c=i._scopes.filter(u=>u!==l);e=[];for(const u of l){const d=vv(c,i,t,u);e.push(ra(d,s,o&&o[t],a))}}return e}function OT(t,e,n){return $i(t)?t(e,n):t}const fM=(t,e)=>t===!0?e:typeof t=="string"?Wi(e,t):void 0;function pM(t,e,n,r,i){for(const s of e){const o=fM(n,s);if(o){t.add(o);const a=OT(o._fallback,n,i);if(typeof a<"u"&&a!==n&&a!==r)return a}else if(o===!1&&typeof r<"u"&&n!==r)return null}return!1}function vv(t,e,n,r){const i=e._rootScopes,s=OT(e._fallback,n,r),o=[...t,...i],a=new Set;a.add(r);let l=p2(a,o,n,s||n,r);return l===null||typeof s<"u"&&s!==n&&(l=p2(a,o,s,l,r),l===null)?!1:mv(Array.from(a),[""],i,s,()=>gM(e,n,r))}function p2(t,e,n,r,i){for(;n;)n=pM(t,e,n,r,i);return n}function gM(t,e,n){const r=t._getTarget();e in r||(r[e]={});const i=r[e];return Ve(i)&&me(n)?n:i||{}}function mM(t,e,n,r){let i;for(const s of e)if(i=BT(cM(s,t),n),typeof i<"u")return xv(t,i)?vv(n,r,t,i):i}function BT(t,e){for(const n of e){if(!n)continue;const r=n[t];if(typeof r<"u")return r}}function g2(t){let e=t._keys;return e||(e=t._keys=xM(t._scopes)),e}function xM(t){const e=new Set;for(const n of t)for(const r of Object.keys(n).filter(i=>!i.startsWith("_")))e.add(r);return Array.from(e)}function LT(t,e,n,r){const{iScale:i}=t,{key:s="r"}=this._parsing,o=new Array(r);let a,l,c,u;for(a=0,l=r;a<l;++a)c=a+n,u=e[c],o[a]={r:i.parse(Wi(u,s),c)};return o}const vM=Number.EPSILON||1e-14,ia=(t,e)=>e<t.length&&!t[e].skip&&t[e],jT=t=>t==="x"?"y":"x";function yM(t,e,n,r){const i=t.skip?e:t,s=e,o=n.skip?e:n,a=Vg(s,i),l=Vg(o,s);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const d=r*c,f=r*u;return{previous:{x:s.x-d*(o.x-i.x),y:s.y-d*(o.y-i.y)},next:{x:s.x+f*(o.x-i.x),y:s.y+f*(o.y-i.y)}}}function _M(t,e,n){const r=t.length;let i,s,o,a,l,c=ia(t,0);for(let u=0;u<r-1;++u)if(l=c,c=ia(t,u+1),!(!l||!c)){if(Cl(e[u],0,vM)){n[u]=n[u+1]=0;continue}i=n[u]/e[u],s=n[u+1]/e[u],a=Math.pow(i,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),n[u]=i*o*e[u],n[u+1]=s*o*e[u])}}function EM(t,e,n="x"){const r=jT(n),i=t.length;let s,o,a,l=ia(t,0);for(let c=0;c<i;++c){if(o=a,a=l,l=ia(t,c+1),!a)continue;const u=a[n],d=a[r];o&&(s=(u-o[n])/3,a[`cp1${n}`]=u-s,a[`cp1${r}`]=d-s*e[c]),l&&(s=(l[n]-u)/3,a[`cp2${n}`]=u+s,a[`cp2${r}`]=d+s*e[c])}}function wM(t,e="x"){const n=jT(e),r=t.length,i=Array(r).fill(0),s=Array(r);let o,a,l,c=ia(t,0);for(o=0;o<r;++o)if(a=l,l=c,c=ia(t,o+1),!!l){if(c){const u=c[e]-l[e];i[o]=u!==0?(c[n]-l[n])/u:0}s[o]=a?c?or(i[o-1])!==or(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}_M(t,i,s),EM(t,s,e)}function Su(t,e,n){return Math.max(Math.min(t,n),e)}function bM(t,e){let n,r,i,s,o,a=Pr(t[0],e);for(n=0,r=t.length;n<r;++n)o=s,s=a,a=n<r-1&&Pr(t[n+1],e),s&&(i=t[n],o&&(i.cp1x=Su(i.cp1x,e.left,e.right),i.cp1y=Su(i.cp1y,e.top,e.bottom)),a&&(i.cp2x=Su(i.cp2x,e.left,e.right),i.cp2y=Su(i.cp2y,e.top,e.bottom)))}function CM(t,e,n,r,i){let s,o,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")wM(t,i);else{let c=r?t[t.length-1]:t[0];for(s=0,o=t.length;s<o;++s)a=t[s],l=yM(c,a,t[Math.min(s+1,o-(r?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&bM(t,n)}function yv(){return typeof window<"u"&&typeof document<"u"}function _v(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function hd(t,e,n){let r;return typeof t=="string"?(r=parseInt(t,10),t.indexOf("%")!==-1&&(r=r/100*e.parentNode[n])):r=t,r}const df=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function AM(t,e){return df(t).getPropertyValue(e)}const TM=["top","right","bottom","left"];function Ss(t,e,n){const r={};n=n?"-"+n:"";for(let i=0;i<4;i++){const s=TM[i];r[s]=parseFloat(t[e+"-"+s+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const SM=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function IM(t,e){const n=t.touches,r=n&&n.length?n[0]:t,{offsetX:i,offsetY:s}=r;let o=!1,a,l;if(SM(i,s,t.target))a=i,l=s;else{const c=e.getBoundingClientRect();a=r.clientX-c.left,l=r.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function ps(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:r}=e,i=df(n),s=i.boxSizing==="border-box",o=Ss(i,"padding"),a=Ss(i,"border","width"),{x:l,y:c,box:u}=IM(t,n),d=o.left+(u&&a.left),f=o.top+(u&&a.top);let{width:p,height:m}=e;return s&&(p-=o.width+a.width,m-=o.height+a.height),{x:Math.round((l-d)/p*n.width/r),y:Math.round((c-f)/m*n.height/r)}}function kM(t,e,n){let r,i;if(e===void 0||n===void 0){const s=t&&_v(t);if(!s)e=t.clientWidth,n=t.clientHeight;else{const o=s.getBoundingClientRect(),a=df(s),l=Ss(a,"border","width"),c=Ss(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,r=hd(a.maxWidth,s,"clientWidth"),i=hd(a.maxHeight,s,"clientHeight")}}return{width:e,height:n,maxWidth:r||cd,maxHeight:i||cd}}const Iu=t=>Math.round(t*10)/10;function PM(t,e,n,r){const i=df(t),s=Ss(i,"margin"),o=hd(i.maxWidth,t,"clientWidth")||cd,a=hd(i.maxHeight,t,"clientHeight")||cd,l=kM(t,e,n);let{width:c,height:u}=l;if(i.boxSizing==="content-box"){const f=Ss(i,"border","width"),p=Ss(i,"padding");c-=p.width+f.width,u-=p.height+f.height}return c=Math.max(0,c-s.width),u=Math.max(0,r?c/r:u-s.height),c=Iu(Math.min(c,o,l.maxWidth)),u=Iu(Math.min(u,a,l.maxHeight)),c&&!u&&(u=Iu(c/2)),(e!==void 0||n!==void 0)&&r&&l.height&&u>l.height&&(u=l.height,c=Iu(Math.floor(u*r))),{width:c,height:u}}function m2(t,e,n){const r=e||1,i=Math.floor(t.height*r),s=Math.floor(t.width*r);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==r||o.height!==i||o.width!==s?(t.currentDevicePixelRatio=r,o.height=i,o.width=s,t.ctx.setTransform(r,0,0,r,0,0),!0):!1}const RM=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};yv()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function x2(t,e){const n=AM(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function gs(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function DM(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:r==="middle"?n<.5?t.y:e.y:r==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function NM(t,e,n,r){const i={x:t.cp2x,y:t.cp2y},s={x:e.cp1x,y:e.cp1y},o=gs(t,i,n),a=gs(i,s,n),l=gs(s,e,n),c=gs(o,a,n),u=gs(a,l,n);return gs(c,u,n)}const FM=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},MM=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Vo(t,e,n){return t?FM(e,n):MM()}function VT(t,e){let n,r;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function zT(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function UT(t){return t==="angle"?{between:oc,compare:O7,normalize:fn}:{between:Ir,compare:(e,n)=>e-n,normalize:e=>e}}function v2({start:t,end:e,count:n,loop:r,style:i}){return{start:t%n,end:e%n,loop:r&&(e-t+1)%n===0,style:i}}function OM(t,e,n){const{property:r,start:i,end:s}=n,{between:o,normalize:a}=UT(r),l=e.length;let{start:c,end:u,loop:d}=t,f,p;if(d){for(c+=l,u+=l,f=0,p=l;f<p&&o(a(e[c%l][r]),i,s);++f)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:d,style:t.style}}function HT(t,e,n){if(!n)return[t];const{property:r,start:i,end:s}=n,o=e.length,{compare:a,between:l,normalize:c}=UT(r),{start:u,end:d,loop:f,style:p}=OM(t,e,n),m=[];let v=!1,E=null,_,x,w;const A=()=>l(i,w,_)&&a(i,w)!==0,P=()=>a(s,_)===0||l(s,w,_),R=()=>v||A(),C=()=>!v||P();for(let b=u,k=u;b<=d;++b)x=e[b%o],!x.skip&&(_=c(x[r]),_!==w&&(v=l(_,i,s),E===null&&R()&&(E=a(_,i)===0?b:k),E!==null&&C()&&(m.push(v2({start:E,end:b,loop:f,count:o,style:p})),E=null),k=b,w=_));return E!==null&&m.push(v2({start:E,end:d,loop:f,count:o,style:p})),m}function WT(t,e){const n=[],r=t.segments;for(let i=0;i<r.length;i++){const s=HT(r[i],t.points,e);s.length&&n.push(...s)}return n}function BM(t,e,n,r){let i=0,s=e-1;if(n&&!r)for(;i<e&&!t[i].skip;)i++;for(;i<e&&t[i].skip;)i++;for(i%=e,n&&(s+=i);s>i&&t[s%e].skip;)s--;return s%=e,{start:i,end:s}}function LM(t,e,n,r){const i=t.length,s=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%i];c.skip||c.stop?a.skip||(r=!1,s.push({start:e%i,end:(l-1)%i,loop:r}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&s.push({start:e%i,end:o%i,loop:r}),s}function jM(t,e){const n=t.points,r=t.options.spanGaps,i=n.length;if(!i)return[];const s=!!t._loop,{start:o,end:a}=BM(n,i,s,r);if(r===!0)return y2(t,[{start:o,end:a,loop:s}],n,e);const l=a<o?a+i:a,c=!!t._fullLoop&&o===0&&a===i-1;return y2(t,LM(n,o,l,c),n,e)}function y2(t,e,n,r){return!r||!r.setContext||!n?e:VM(t,e,n,r)}function VM(t,e,n,r){const i=t._chart.getContext(),s=_2(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let u=s,d=e[0].start,f=d;function p(m,v,E,_){const x=a?-1:1;if(m!==v){for(m+=l;n[m%l].skip;)m-=x;for(;n[v%l].skip;)v+=x;m%l!==v%l&&(c.push({start:m%l,end:v%l,loop:E,style:_}),u=_,d=v%l)}}for(const m of e){d=a?d:m.start;let v=n[d%l],E;for(f=d+1;f<=m.end;f++){const _=n[f%l];E=_2(r.setContext(Ji(i,{type:"segment",p0:v,p1:_,p0DataIndex:(f-1)%l,p1DataIndex:f%l,datasetIndex:o}))),zM(E,u)&&p(d,f-1,m.loop,u),v=_,u=E}d<f-1&&p(d,f-1,m.loop,u)}return c}function _2(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function zM(t,e){if(!e)return!1;const n=[],r=function(i,s){return pv(s)?(n.includes(s)||n.push(s),n.indexOf(s)):s};return JSON.stringify(t,r)!==JSON.stringify(e,r)}/*!
 * Chart.js v4.4.8
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class UM{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,r,i){const s=n.listeners[i],o=n.duration;s.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(r-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=ST.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((r,i)=>{if(!r.running||!r.items.length)return;const s=r.items;let o=s.length-1,a=!1,l;for(;o>=0;--o)l=s[o],l._active?(l._total>r.duration&&(r.duration=l._total),l.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(i.draw(),this._notify(i,r,e,"progress")),s.length||(r.running=!1,this._notify(i,r,e,"complete"),r.initial=!1),n+=s.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let r=n.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,r)),r}listen(e,n,r){this._getAnims(e).listeners[n].push(r)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,i)=>Math.max(r,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const r=n.items;let i=r.length-1;for(;i>=0;--i)r[i].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var xr=new UM;const E2="transparent",HM={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const r=h2(t||E2),i=r.valid&&h2(e||E2);return i&&i.valid?i.mix(r,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class WM{constructor(e,n,r,i){const s=n[r];i=rl([e.to,i,s,e.from]);const o=rl([e.from,s,i]);this._active=!0,this._fn=e.fn||HM[e.type||typeof o],this._easing=Al[e.easing]||Al.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=r,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(e,n,r){if(this._active){this._notify(!1);const i=this._target[this._prop],s=r-this._start,o=this._duration-s;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=rl([e.to,n,i,e.from]),this._from=rl([e.from,i,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,r=this._duration,i=this._prop,s=this._from,o=this._loop,a=this._to;let l;if(this._active=s!==a&&(o||n<r),!this._active){this._target[i]=a,this._notify(!0);return}if(n<0){this._target[i]=s;return}l=n/r%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[i]=this._fn(s,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,r)=>{e.push({res:n,rej:r})})}_notify(e){const n=e?"res":"rej",r=this._promises||[];for(let i=0;i<r.length;i++)r[i][n]()}}class $T{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!me(e))return;const n=Object.keys(ze.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const s=e[i];if(!me(s))return;const o={};for(const a of n)o[a]=s[a];(Ve(s.properties)&&s.properties||[i]).forEach(a=>{(a===i||!r.has(a))&&r.set(a,o)})})}_animateOptions(e,n){const r=n.options,i=qM(e,r);if(!i)return[];const s=this._createAnimations(i,r);return r.$shared&&$M(e.options.$animations,r).then(()=>{e.options=r},()=>{}),s}_createAnimations(e,n){const r=this._properties,i=[],s=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){i.push(...this._animateOptions(e,n));continue}const u=n[c];let d=s[c];const f=r.get(c);if(d)if(f&&d.active()){d.update(f,u,a);continue}else d.cancel();if(!f||!f.duration){e[c]=u;continue}s[c]=d=new WM(f,e,c,u),i.push(d)}return i}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const r=this._createAnimations(e,n);if(r.length)return xr.add(this._chart,r),!0}}function $M(t,e){const n=[],r=Object.keys(e);for(let i=0;i<r.length;i++){const s=t[r[i]];s&&s.active()&&n.push(s.wait())}return Promise.all(n)}function qM(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function w2(t,e){const n=t&&t.options||{},r=n.reverse,i=n.min===void 0?e:0,s=n.max===void 0?e:0;return{start:r?s:i,end:r?i:s}}function KM(t,e,n){if(n===!1)return!1;const r=w2(t,n),i=w2(e,n);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}function GM(t){let e,n,r,i;return me(t)?(e=t.top,n=t.right,r=t.bottom,i=t.left):e=n=r=i=t,{top:e,right:n,bottom:r,left:i,disabled:t===!1}}function qT(t,e){const n=[],r=t._getSortedDatasetMetas(e);let i,s;for(i=0,s=r.length;i<s;++i)n.push(r[i].index);return n}function b2(t,e,n,r={}){const i=t.keys,s=r.mode==="single";let o,a,l,c;if(e===null)return;let u=!1;for(o=0,a=i.length;o<a;++o){if(l=+i[o],l===n){if(u=!0,r.all)continue;break}c=t.values[l],Xe(c)&&(s||e===0||or(e)===or(c))&&(e+=c)}return!u&&!r.all?0:e}function QM(t,e){const{iScale:n,vScale:r}=e,i=n.axis==="x"?"x":"y",s=r.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[i]:u,[s]:t[u]};return a}function E0(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function YM(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function XM(t){const{min:e,max:n,minDefined:r,maxDefined:i}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}function JM(t,e,n){const r=t[e]||(t[e]={});return r[n]||(r[n]={})}function C2(t,e,n,r){for(const i of e.getMatchingVisibleMetas(r).reverse()){const s=t[i.index];if(n&&s>0||!n&&s<0)return i.index}return null}function A2(t,e){const{chart:n,_cachedMeta:r}=t,i=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=r,l=s.axis,c=o.axis,u=YM(s,o,r),d=e.length;let f;for(let p=0;p<d;++p){const m=e[p],{[l]:v,[c]:E}=m,_=m._stacks||(m._stacks={});f=_[c]=JM(i,u,v),f[a]=E,f._top=C2(f,o,!0,r.type),f._bottom=C2(f,o,!1,r.type);const x=f._visualValues||(f._visualValues={});x[a]=E}}function w0(t,e){const n=t.scales;return Object.keys(n).filter(r=>n[r].axis===e).shift()}function ZM(t,e){return Ji(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function eO(t,e,n){return Ji(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function za(t,e){const n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const i of e){const s=i._stacks;if(!s||s[r]===void 0||s[r][n]===void 0)return;delete s[r][n],s[r]._visualValues!==void 0&&s[r]._visualValues[n]!==void 0&&delete s[r]._visualValues[n]}}}const b0=t=>t==="reset"||t==="none",T2=(t,e)=>e?t:Object.assign({},t),tO=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:qT(n,!0),values:null};class zn{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=E0(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&za(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,r=this.getDataset(),i=(d,f,p,m)=>d==="x"?f:d==="r"?m:p,s=n.xAxisID=he(r.xAxisID,w0(e,"x")),o=n.yAxisID=he(r.yAxisID,w0(e,"y")),a=n.rAxisID=he(r.rAxisID,w0(e,"r")),l=n.indexAxis,c=n.iAxisID=i(l,s,o,a),u=n.vAxisID=i(l,o,s,a);n.xScale=this.getScaleForId(s),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&l2(this._data,this),e._stacked&&za(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),r=this._data;if(me(n)){const i=this._cachedMeta;this._data=QM(n,i)}else if(r!==n){if(r){l2(r,this);const i=this._cachedMeta;za(i),i._parsed=[]}n&&Object.isExtensible(n)&&V7(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,r=this.getDataset();let i=!1;this._dataCheck();const s=n._stacked;n._stacked=E0(n.vScale,n),n.stack!==r.stack&&(i=!0,za(n),n.stack=r.stack),this._resyncElements(e),(i||s!==n._stacked)&&(A2(this,n._parsed),n._stacked=E0(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:r,_data:i}=this,{iScale:s,_stacked:o}=r,a=s.axis;let l=e===0&&n===i.length?!0:r._sorted,c=e>0&&r._parsed[e-1],u,d,f;if(this._parsing===!1)r._parsed=i,r._sorted=!0,f=i;else{Ve(i[e])?f=this.parseArrayData(r,i,e,n):me(i[e])?f=this.parseObjectData(r,i,e,n):f=this.parsePrimitiveData(r,i,e,n);const p=()=>d[a]===null||c&&d[a]<c[a];for(u=0;u<n;++u)r._parsed[u+e]=d=f[u],l&&(p()&&(l=!1),c=d);r._sorted=l}o&&A2(this,f)}parsePrimitiveData(e,n,r,i){const{iScale:s,vScale:o}=e,a=s.axis,l=o.axis,c=s.getLabels(),u=s===o,d=new Array(i);let f,p,m;for(f=0,p=i;f<p;++f)m=f+r,d[f]={[a]:u||s.parse(c[m],m),[l]:o.parse(n[m],m)};return d}parseArrayData(e,n,r,i){const{xScale:s,yScale:o}=e,a=new Array(i);let l,c,u,d;for(l=0,c=i;l<c;++l)u=l+r,d=n[u],a[l]={x:s.parse(d[0],u),y:o.parse(d[1],u)};return a}parseObjectData(e,n,r,i){const{xScale:s,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(i);let u,d,f,p;for(u=0,d=i;u<d;++u)f=u+r,p=n[f],c[u]={x:s.parse(Wi(p,a),f),y:o.parse(Wi(p,l),f)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,r){const i=this.chart,s=this._cachedMeta,o=n[e.axis],a={keys:qT(i,!0),values:n._stacks[e.axis]._visualValues};return b2(a,o,s.index,{mode:r})}updateRangeFromParsed(e,n,r,i){const s=r[n.axis];let o=s===null?NaN:s;const a=i&&r._stacks[n.axis];i&&a&&(i.values=a,o=b2(i,s,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const r=this._cachedMeta,i=r._parsed,s=r._sorted&&e===r.iScale,o=i.length,a=this._getOtherScale(e),l=tO(n,r,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:d}=XM(a);let f,p;function m(){p=i[f];const v=p[a.axis];return!Xe(p[e.axis])||u>v||d<v}for(f=0;f<o&&!(!m()&&(this.updateRangeFromParsed(c,e,p,l),s));++f);if(s){for(f=o-1;f>=0;--f)if(!m()){this.updateRangeFromParsed(c,e,p,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,r=[];let i,s,o;for(i=0,s=n.length;i<s;++i)o=n[i][e.axis],Xe(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,r=n.iScale,i=n.vScale,s=this.getParsed(e);return{label:r?""+r.getLabelForValue(s[r.axis]):"",value:i?""+i.getLabelForValue(s[i.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=GM(he(this.options.clip,KM(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,r=this._cachedMeta,i=r.data||[],s=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||i.length-a,c=this.options.drawActiveElementsOnTop;let u;for(r.dataset&&r.dataset.draw(e,s,a,l),u=a;u<a+l;++u){const d=i[u];d.hidden||(d.active&&c?o.push(d):d.draw(e,s))}for(u=0;u<o.length;++u)o[u].draw(e,s)}getStyle(e,n){const r=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,n,r){const i=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];s=o.$context||(o.$context=eO(this.getContext(),e,o)),s.parsed=this.getParsed(e),s.raw=i.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=ZM(this.chart.getContext(),this.index)),s.dataset=i,s.index=s.datasetIndex=this.index;return s.active=!!n,s.mode=r,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",r){const i=n==="active",s=this._cachedDataOpts,o=e+"-"+n,a=s[o],l=this.enableOptionSharing&&sc(r);if(a)return T2(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,e),d=i?[`${e}Hover`,"hover",e,""]:[e,""],f=c.getOptionScopes(this.getDataset(),u),p=Object.keys(ze.elements[e]),m=()=>this.getContext(r,i,n),v=c.resolveNamedOptions(f,p,m,d);return v.$shared&&(v.$shared=l,s[o]=Object.freeze(T2(v,l))),v}_resolveAnimations(e,n,r){const i=this.chart,s=this._cachedDataOpts,o=`animation-${n}`,a=s[o];if(a)return a;let l;if(i.options.animation!==!1){const u=this.chart.config,d=u.datasetAnimationScopeKeys(this._type,n),f=u.getOptionScopes(this.getDataset(),d);l=u.createResolver(f,this.getContext(e,r,n))}const c=new $T(i,l&&l.animations);return l&&l._cacheable&&(s[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||b0(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const r=this.resolveDataElementOptions(e,n),i=this._sharedOptions,s=this.getSharedOptions(r),o=this.includeOptions(n,s)||s!==i;return this.updateSharedOptions(s,n,r),{sharedOptions:s,includeOptions:o}}updateElement(e,n,r,i){b0(i)?Object.assign(e,r):this._resolveAnimations(n,i).update(e,r)}updateSharedOptions(e,n,r){e&&!b0(n)&&this._resolveAnimations(void 0,n).update(e,r)}_setStyle(e,n,r,i){e.active=i;const s=this.getStyle(n,i);this._resolveAnimations(n,r,i).update(e,{options:!i&&this.getSharedOptions(s)||s})}removeHoverStyle(e,n,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,n,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,r=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const i=r.length,s=n.length,o=Math.min(s,i);o&&this.parse(0,o),s>i?this._insertElements(i,s-i,e):s<i&&this._removeElements(s,i-s)}_insertElements(e,n,r=!0){const i=this._cachedMeta,s=i.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(s),a=e;a<o;++a)s[a]=new this.dataElementType;this._parsing&&l(i._parsed),this.parse(e,n),r&&this.updateElements(s,e,n,"reset")}updateElements(e,n,r,i){}_removeElements(e,n){const r=this._cachedMeta;if(this._parsing){const i=r._parsed.splice(e,n);r._stacked&&za(r,i)}r.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,r,i]=e;this[n](r,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}Z(zn,"defaults",{}),Z(zn,"datasetElementType",null),Z(zn,"dataElementType",null);function nO(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let r=[];for(let i=0,s=n.length;i<s;i++)r=r.concat(n[i].controller.getAllParsedValues(t));t._cache.$bar=TT(r.sort((i,s)=>i-s))}return t._cache.$bar}function rO(t){const e=t.iScale,n=nO(e,t.type);let r=e._length,i,s,o,a;const l=()=>{o===32767||o===-32768||(sc(a)&&(r=Math.min(r,Math.abs(o-a)||r)),a=o)};for(i=0,s=n.length;i<s;++i)o=e.getPixelForValue(n[i]),l();for(a=void 0,i=0,s=e.ticks.length;i<s;++i)o=e.getPixelForTick(i),l();return r}function iO(t,e,n,r){const i=n.barThickness;let s,o;return fe(i)?(s=e.min*n.categoryPercentage,o=n.barPercentage):(s=i*r,o=1),{chunk:s/r,ratio:o,start:e.pixels[t]-s/2}}function sO(t,e,n,r){const i=e.pixels,s=i[t];let o=t>0?i[t-1]:null,a=t<i.length-1?i[t+1]:null;const l=n.categoryPercentage;o===null&&(o=s-(a===null?e.end-e.start:a-s)),a===null&&(a=s+s-o);const c=s-(s-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/r,ratio:n.barPercentage,start:c}}function oO(t,e,n,r){const i=n.parse(t[0],r),s=n.parse(t[1],r),o=Math.min(i,s),a=Math.max(i,s);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),e[n.axis]=c,e._custom={barStart:l,barEnd:c,start:i,end:s,min:o,max:a}}function KT(t,e,n,r){return Ve(t)?oO(t,e,n,r):e[n.axis]=n.parse(t,r),e}function S2(t,e,n,r){const i=t.iScale,s=t.vScale,o=i.getLabels(),a=i===s,l=[];let c,u,d,f;for(c=n,u=n+r;c<u;++c)f=e[c],d={},d[i.axis]=a||i.parse(o[c],c),l.push(KT(f,d,s,c));return l}function C0(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function aO(t,e,n){return t!==0?or(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function lO(t){let e,n,r,i,s;return t.horizontal?(e=t.base>t.x,n="left",r="right"):(e=t.base<t.y,n="bottom",r="top"),e?(i="end",s="start"):(i="start",s="end"),{start:n,end:r,reverse:e,top:i,bottom:s}}function cO(t,e,n,r){let i=e.borderSkipped;const s={};if(!i){t.borderSkipped=s;return}if(i===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:c,bottom:u}=lO(t);i==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===r?i=c:(n._bottom||0)===r?i=u:(s[I2(u,o,a,l)]=!0,i=c)),s[I2(i,o,a,l)]=!0,t.borderSkipped=s}function I2(t,e,n,r){return r?(t=uO(t,e,n),t=k2(t,n,e)):t=k2(t,e,n),t}function uO(t,e,n){return t===e?n:t===n?e:t}function k2(t,e,n){return t==="start"?e:t==="end"?n:t}function hO(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class ah extends zn{parsePrimitiveData(e,n,r,i){return S2(e,n,r,i)}parseArrayData(e,n,r,i){return S2(e,n,r,i)}parseObjectData(e,n,r,i){const{iScale:s,vScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=s.axis==="x"?a:l,u=o.axis==="x"?a:l,d=[];let f,p,m,v;for(f=r,p=r+i;f<p;++f)v=n[f],m={},m[s.axis]=s.parse(Wi(v,c),f),d.push(KT(Wi(v,u),m,o,f));return d}updateRangeFromParsed(e,n,r,i){super.updateRangeFromParsed(e,n,r,i);const s=r._custom;s&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,s.min),e.max=Math.max(e.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:r,vScale:i}=n,s=this.getParsed(e),o=s._custom,a=C0(o)?"["+o.start+", "+o.end+"]":""+i.getLabelForValue(s[i.axis]);return{label:""+r.getLabelForValue(s[r.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,r,i){const s=i==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),u=this._getRuler(),{sharedOptions:d,includeOptions:f}=this._getSharedOptions(n,i);for(let p=n;p<n+r;p++){const m=this.getParsed(p),v=s||fe(m[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(p),E=this._calculateBarIndexPixels(p,u),_=(m._stacks||{})[a.axis],x={horizontal:c,base:v.base,enableBorderRadius:!_||C0(m._custom)||o===_._top||o===_._bottom,x:c?v.head:E.center,y:c?E.center:v.head,height:c?E.size:Math.abs(v.size),width:c?Math.abs(v.size):E.size};f&&(x.options=d||this.resolveDataElementOptions(p,e[p].active?"active":i));const w=x.options||e[p].options;cO(x,w,_,o),hO(x,w,u.ratio),this.updateElement(e[p],p,x,i)}}_getStacks(e,n){const{iScale:r}=this._cachedMeta,i=r.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),s=r.options.stacked,o=[],a=this._cachedMeta.controller.getParsed(n),l=a&&a[r.axis],c=u=>{const d=u._parsed.find(p=>p[r.axis]===l),f=d&&d[u.vScale.axis];if(fe(f)||isNaN(f))return!0};for(const u of i)if(!(n!==void 0&&c(u))&&((s===!1||o.indexOf(u.stack)===-1||s===void 0&&u.stack===void 0)&&o.push(u.stack),u.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,n,r){const i=this._getStacks(e,r),s=n!==void 0?i.indexOf(n):-1;return s===-1?i.length-1:s}_getRuler(){const e=this.options,n=this._cachedMeta,r=n.iScale,i=[];let s,o;for(s=0,o=n.data.length;s<o;++s)i.push(r.getPixelForValue(this.getParsed(s)[r.axis],s));const a=e.barThickness;return{min:a||rO(n),pixels:i,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:r,index:i},options:{base:s,minBarLength:o}}=this,a=s||0,l=this.getParsed(e),c=l._custom,u=C0(c);let d=l[n.axis],f=0,p=r?this.applyStack(n,l,r):d,m,v;p!==d&&(f=p-d,p=d),u&&(d=c.barStart,p=c.barEnd-c.barStart,d!==0&&or(d)!==or(c.barEnd)&&(f=0),f+=d);const E=!fe(s)&&!u?s:f;let _=n.getPixelForValue(E);if(this.chart.getDataVisibility(e)?m=n.getPixelForValue(f+p):m=_,v=m-_,Math.abs(v)<o){v=aO(v,n,a)*o,d===a&&(_-=v/2);const x=n.getPixelForDecimal(0),w=n.getPixelForDecimal(1),A=Math.min(x,w),P=Math.max(x,w);_=Math.max(Math.min(_,P),A),m=_+v,r&&!u&&(l._stacks[n.axis]._visualValues[i]=n.getValueForPixel(m)-n.getValueForPixel(_))}if(_===n.getPixelForValue(a)){const x=or(v)*n.getLineWidthForValue(a)/2;_+=x,v-=x}return{size:v,base:_,head:m,center:m+v/2}}_calculateBarIndexPixels(e,n){const r=n.scale,i=this.options,s=i.skipNull,o=he(i.maxBarThickness,1/0);let a,l;if(n.grouped){const c=s?this._getStackCount(e):n.stackCount,u=i.barThickness==="flex"?sO(e,n,i,c):iO(e,n,i,c),d=this._getStackIndex(this.index,this._cachedMeta.stack,s?e:void 0);a=u.start+u.chunk*d+u.chunk/2,l=Math.min(o,u.chunk*u.ratio)}else a=r.getPixelForValue(this.getParsed(e)[r.axis],e),l=Math.min(o,n.min*n.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,n=e.vScale,r=e.data,i=r.length;let s=0;for(;s<i;++s)this.getParsed(s)[n.axis]!==null&&!r[s].hidden&&r[s].draw(this._ctx)}}Z(ah,"id","bar"),Z(ah,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),Z(ah,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class lh extends zn{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,n,r,i){const s=super.parsePrimitiveData(e,n,r,i);for(let o=0;o<s.length;o++)s[o]._custom=this.resolveDataElementOptions(o+r).radius;return s}parseArrayData(e,n,r,i){const s=super.parseArrayData(e,n,r,i);for(let o=0;o<s.length;o++){const a=n[r+o];s[o]._custom=he(a[2],this.resolveDataElementOptions(o+r).radius)}return s}parseObjectData(e,n,r,i){const s=super.parseObjectData(e,n,r,i);for(let o=0;o<s.length;o++){const a=n[r+o];s[o]._custom=he(a&&a.r&&+a.r,this.resolveDataElementOptions(o+r).radius)}return s}getMaxOverflow(){const e=this._cachedMeta.data;let n=0;for(let r=e.length-1;r>=0;--r)n=Math.max(n,e[r].size(this.resolveDataElementOptions(r))/2);return n>0&&n}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart.data.labels||[],{xScale:i,yScale:s}=n,o=this.getParsed(e),a=i.getLabelForValue(o.x),l=s.getLabelForValue(o.y),c=o._custom;return{label:r[e]||"",value:"("+a+", "+l+(c?", "+c:"")+")"}}update(e){const n=this._cachedMeta.data;this.updateElements(n,0,n.length,e)}updateElements(e,n,r,i){const s=i==="reset",{iScale:o,vScale:a}=this._cachedMeta,{sharedOptions:l,includeOptions:c}=this._getSharedOptions(n,i),u=o.axis,d=a.axis;for(let f=n;f<n+r;f++){const p=e[f],m=!s&&this.getParsed(f),v={},E=v[u]=s?o.getPixelForDecimal(.5):o.getPixelForValue(m[u]),_=v[d]=s?a.getBasePixel():a.getPixelForValue(m[d]);v.skip=isNaN(E)||isNaN(_),c&&(v.options=l||this.resolveDataElementOptions(f,p.active?"active":i),s&&(v.options.radius=0)),this.updateElement(p,f,v,i)}}resolveDataElementOptions(e,n){const r=this.getParsed(e);let i=super.resolveDataElementOptions(e,n);i.$shared&&(i=Object.assign({},i,{$shared:!1}));const s=i.radius;return n!=="active"&&(i.radius=0),i.radius+=he(r&&r._custom,s),i}}Z(lh,"id","bubble"),Z(lh,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),Z(lh,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function dO(t,e,n){let r=1,i=1,s=0,o=0;if(e<Be){const a=t,l=a+e,c=Math.cos(a),u=Math.sin(a),d=Math.cos(l),f=Math.sin(l),p=(w,A,P)=>oc(w,a,l,!0)?1:Math.max(A,A*n,P,P*n),m=(w,A,P)=>oc(w,a,l,!0)?-1:Math.min(A,A*n,P,P*n),v=p(0,c,d),E=p(st,u,f),_=m(Le,c,d),x=m(Le+st,u,f);r=(v-_)/2,i=(E-x)/2,s=-(v+_)/2,o=-(E+x)/2}return{ratioX:r,ratioY:i,offsetX:s,offsetY:o}}class Es extends zn{constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const r=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=r;else{let s=l=>+r[l];if(me(r[e])){const{key:l="value"}=this._parsing;s=c=>+Wi(r[c],l)}let o,a;for(o=e,a=e+n;o<a;++o)i._parsed[o]=s(o)}}_getRotation(){return Ln(this.options.rotation-90)}_getCircumference(){return Ln(this.options.circumference)}_getRotationExtents(){let e=Be,n=-Be;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const i=this.chart.getDatasetMeta(r).controller,s=i._getRotation(),o=i._getCircumference();e=Math.min(e,s),n=Math.max(n,s+o)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:r}=n,i=this._cachedMeta,s=i.data,o=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,a=Math.max((Math.min(r.width,r.height)-o)/2,0),l=Math.min(A7(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:u,rotation:d}=this._getRotationExtents(),{ratioX:f,ratioY:p,offsetX:m,offsetY:v}=dO(d,u,l),E=(r.width-o)/f,_=(r.height-o)/p,x=Math.max(Math.min(E,_)/2,0),w=ET(this.options.radius,x),A=Math.max(w*l,0),P=(w-A)/this._getVisibleDatasetWeightTotal();this.offsetX=m*w,this.offsetY=v*w,i.total=this.calculateTotal(),this.outerRadius=w-P*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-P*c,0),this.updateElements(s,0,s.length,e)}_circumference(e,n){const r=this.options,i=this._cachedMeta,s=this._getCircumference();return n&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||i._parsed[e]===null||i.data[e].hidden?0:this.calculateCircumference(i._parsed[e]*s/Be)}updateElements(e,n,r,i){const s=i==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,u=(a.left+a.right)/2,d=(a.top+a.bottom)/2,f=s&&c.animateScale,p=f?0:this.innerRadius,m=f?0:this.outerRadius,{sharedOptions:v,includeOptions:E}=this._getSharedOptions(n,i);let _=this._getRotation(),x;for(x=0;x<n;++x)_+=this._circumference(x,s);for(x=n;x<n+r;++x){const w=this._circumference(x,s),A=e[x],P={x:u+this.offsetX,y:d+this.offsetY,startAngle:_,endAngle:_+w,circumference:w,outerRadius:m,innerRadius:p};E&&(P.options=v||this.resolveDataElementOptions(x,A.active?"active":i)),_+=w,this.updateElement(A,x,P,i)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let r=0,i;for(i=0;i<n.length;i++){const s=e._parsed[i];s!==null&&!isNaN(s)&&this.chart.getDataVisibility(i)&&!n[i].hidden&&(r+=Math.abs(s))}return r}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?Be*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart,i=r.data.labels||[],s=Rc(n._parsed[e],r.options.locale);return{label:i[e]||"",value:s}}getMaxBorderWidth(e){let n=0;const r=this.chart;let i,s,o,a,l;if(!e){for(i=0,s=r.data.datasets.length;i<s;++i)if(r.isDatasetVisible(i)){o=r.getDatasetMeta(i),e=o.data,a=o.controller;break}}if(!e)return 0;for(i=0,s=e.length;i<s;++i)l=a.resolveDataElementOptions(i),l.borderAlign!=="inner"&&(n=Math.max(n,l.borderWidth||0,l.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let r=0,i=e.length;r<i;++r){const s=this.resolveDataElementOptions(r);n=Math.max(n,s.offset||0,s.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(n+=this._getRingWeight(r));return n}_getRingWeight(e){return Math.max(he(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}Z(Es,"id","doughnut"),Z(Es,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),Z(Es,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),Z(Es,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:r,color:i}}=e.legend.options;return n.labels.map((s,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:s,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:i,lineWidth:l.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,n,r){r.chart.toggleDataVisibility(n.index),r.chart.update()}}}});class ch extends zn{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:r,data:i=[],_dataset:s}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=kT(n,i,o);this._drawStart=a,this._drawCount=l,PT(n)&&(a=0,l=i.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!s._decimated,r.points=i;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(r,void 0,{animated:!o,options:c},e),this.updateElements(i,a,l,e)}updateElements(e,n,r,i){const s=i==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:u,includeOptions:d}=this._getSharedOptions(n,i),f=o.axis,p=a.axis,{spanGaps:m,segment:v}=this.options,E=na(m)?m:Number.POSITIVE_INFINITY,_=this.chart._animationsDisabled||s||i==="none",x=n+r,w=e.length;let A=n>0&&this.getParsed(n-1);for(let P=0;P<w;++P){const R=e[P],C=_?R:{};if(P<n||P>=x){C.skip=!0;continue}const b=this.getParsed(P),k=fe(b[p]),S=C[f]=o.getPixelForValue(b[f],P),I=C[p]=s||k?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,b,l):b[p],P);C.skip=isNaN(S)||isNaN(I)||k,C.stop=P>0&&Math.abs(b[f]-A[f])>E,v&&(C.parsed=b,C.raw=c.data[P]),d&&(C.options=u||this.resolveDataElementOptions(P,R.active?"active":i)),_||this.updateElement(R,P,C,i),A=b}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,r=n.options&&n.options.borderWidth||0,i=e.data||[];if(!i.length)return r;const s=i[0].size(this.resolveDataElementOptions(0)),o=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(r,s,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}Z(ch,"id","line"),Z(ch,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),Z(ch,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class Sl extends zn{constructor(e,n){super(e,n),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart,i=r.data.labels||[],s=Rc(n._parsed[e].r,r.options.locale);return{label:i[e]||"",value:s}}parseObjectData(e,n,r,i){return LT.bind(this)(e,n,r,i)}update(e){const n=this._cachedMeta.data;this._updateRadius(),this.updateElements(n,0,n.length,e)}getMinMax(){const e=this._cachedMeta,n={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((r,i)=>{const s=this.getParsed(i).r;!isNaN(s)&&this.chart.getDataVisibility(i)&&(s<n.min&&(n.min=s),s>n.max&&(n.max=s))}),n}_updateRadius(){const e=this.chart,n=e.chartArea,r=e.options,i=Math.min(n.right-n.left,n.bottom-n.top),s=Math.max(i/2,0),o=Math.max(r.cutoutPercentage?s/100*r.cutoutPercentage:1,0),a=(s-o)/e.getVisibleDatasetCount();this.outerRadius=s-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(e,n,r,i){const s=i==="reset",o=this.chart,l=o.options.animation,c=this._cachedMeta.rScale,u=c.xCenter,d=c.yCenter,f=c.getIndexAngle(0)-.5*Le;let p=f,m;const v=360/this.countVisibleElements();for(m=0;m<n;++m)p+=this._computeAngle(m,i,v);for(m=n;m<n+r;m++){const E=e[m];let _=p,x=p+this._computeAngle(m,i,v),w=o.getDataVisibility(m)?c.getDistanceFromCenterForValue(this.getParsed(m).r):0;p=x,s&&(l.animateScale&&(w=0),l.animateRotate&&(_=x=f));const A={x:u,y:d,innerRadius:0,outerRadius:w,startAngle:_,endAngle:x,options:this.resolveDataElementOptions(m,E.active?"active":i)};this.updateElement(E,m,A,i)}}countVisibleElements(){const e=this._cachedMeta;let n=0;return e.data.forEach((r,i)=>{!isNaN(this.getParsed(i).r)&&this.chart.getDataVisibility(i)&&n++}),n}_computeAngle(e,n,r){return this.chart.getDataVisibility(e)?Ln(this.resolveDataElementOptions(e,n).angle||r):0}}Z(Sl,"id","polarArea"),Z(Sl,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),Z(Sl,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:r,color:i}}=e.legend.options;return n.labels.map((s,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:s,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:i,lineWidth:l.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,n,r){r.chart.toggleDataVisibility(n.index),r.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class Hg extends Es{}Z(Hg,"id","pie"),Z(Hg,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class uh extends zn{getLabelAndValue(e){const n=this._cachedMeta.vScale,r=this.getParsed(e);return{label:n.getLabels()[e],value:""+n.getLabelForValue(r[n.axis])}}parseObjectData(e,n,r,i){return LT.bind(this)(e,n,r,i)}update(e){const n=this._cachedMeta,r=n.dataset,i=n.data||[],s=n.iScale.getLabels();if(r.points=i,e!=="resize"){const o=this.resolveDatasetElementOptions(e);this.options.showLine||(o.borderWidth=0);const a={_loop:!0,_fullLoop:s.length===i.length,options:o};this.updateElement(r,void 0,a,e)}this.updateElements(i,0,i.length,e)}updateElements(e,n,r,i){const s=this._cachedMeta.rScale,o=i==="reset";for(let a=n;a<n+r;a++){const l=e[a],c=this.resolveDataElementOptions(a,l.active?"active":i),u=s.getPointPositionForValue(a,this.getParsed(a).r),d=o?s.xCenter:u.x,f=o?s.yCenter:u.y,p={x:d,y:f,angle:u.angle,skip:isNaN(d)||isNaN(f),options:c};this.updateElement(l,a,p,i)}}}Z(uh,"id","radar"),Z(uh,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),Z(uh,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class hh extends zn{getLabelAndValue(e){const n=this._cachedMeta,r=this.chart.data.labels||[],{xScale:i,yScale:s}=n,o=this.getParsed(e),a=i.getLabelForValue(o.x),l=s.getLabelForValue(o.y);return{label:r[e]||"",value:"("+a+", "+l+")"}}update(e){const n=this._cachedMeta,{data:r=[]}=n,i=this.chart._animationsDisabled;let{start:s,count:o}=kT(n,r,i);if(this._drawStart=s,this._drawCount=o,PT(n)&&(s=0,o=r.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:l}=n;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=r;const c=this.resolveDatasetElementOptions(e);c.segment=this.options.segment,this.updateElement(a,void 0,{animated:!i,options:c},e)}else this.datasetElementType&&(delete n.dataset,this.datasetElementType=!1);this.updateElements(r,s,o,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,n,r,i){const s=i==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,u=this.resolveDataElementOptions(n,i),d=this.getSharedOptions(u),f=this.includeOptions(i,d),p=o.axis,m=a.axis,{spanGaps:v,segment:E}=this.options,_=na(v)?v:Number.POSITIVE_INFINITY,x=this.chart._animationsDisabled||s||i==="none";let w=n>0&&this.getParsed(n-1);for(let A=n;A<n+r;++A){const P=e[A],R=this.getParsed(A),C=x?P:{},b=fe(R[m]),k=C[p]=o.getPixelForValue(R[p],A),S=C[m]=s||b?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,R,l):R[m],A);C.skip=isNaN(k)||isNaN(S)||b,C.stop=A>0&&Math.abs(R[p]-w[p])>_,E&&(C.parsed=R,C.raw=c.data[A]),f&&(C.options=d||this.resolveDataElementOptions(A,P.active?"active":i)),x||this.updateElement(P,A,C,i),w=R}this.updateSharedOptions(d,i,u)}getMaxOverflow(){const e=this._cachedMeta,n=e.data||[];if(!this.options.showLine){let a=0;for(let l=n.length-1;l>=0;--l)a=Math.max(a,n[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}const r=e.dataset,i=r.options&&r.options.borderWidth||0;if(!n.length)return i;const s=n[0].size(this.resolveDataElementOptions(0)),o=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(i,s,o)/2}}Z(hh,"id","scatter"),Z(hh,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),Z(hh,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var fO=Object.freeze({__proto__:null,BarController:ah,BubbleController:lh,DoughnutController:Es,LineController:ch,PieController:Hg,PolarAreaController:Sl,RadarController:uh,ScatterController:hh});function cs(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Ev{constructor(e){Z(this,"options");this.options=e||{}}static override(e){Object.assign(Ev.prototype,e)}init(){}formats(){return cs()}parse(){return cs()}format(){return cs()}add(){return cs()}diff(){return cs()}startOf(){return cs()}endOf(){return cs()}}var pO={_date:Ev};function gO(t,e,n,r){const{controller:i,data:s,_sorted:o}=t,a=i._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&s.length){const c=a._reversePixels?L7:kr;if(r){if(i._sharedOptions){const u=s[0],d=typeof u.getRange=="function"&&u.getRange(e);if(d){const f=c(s,e,n-d),p=c(s,e,n+d);return{lo:f.lo,hi:p.hi}}}}else{const u=c(s,e,n);if(l){const{vScale:d}=i._cachedMeta,{_parsed:f}=t,p=f.slice(0,u.lo+1).reverse().findIndex(v=>!fe(v[d.axis]));u.lo-=Math.max(0,p);const m=f.slice(u.hi).findIndex(v=>!fe(v[d.axis]));u.hi+=Math.max(0,m)}return u}}return{lo:0,hi:s.length-1}}function ff(t,e,n,r,i){const s=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=s.length;a<l;++a){const{index:c,data:u}=s[a],{lo:d,hi:f}=gO(s[a],e,o,i);for(let p=d;p<=f;++p){const m=u[p];m.skip||r(m,c,p)}}}function mO(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(r,i){const s=e?Math.abs(r.x-i.x):0,o=n?Math.abs(r.y-i.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function A0(t,e,n,r,i){const s=[];return!i&&!t.isPointInArea(e)||ff(t,n,e,function(a,l,c){!i&&!Pr(a,t.chartArea,0)||a.inRange(e.x,e.y,r)&&s.push({element:a,datasetIndex:l,index:c})},!0),s}function xO(t,e,n,r){let i=[];function s(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],r),{angle:d}=CT(o,{x:e.x,y:e.y});oc(d,c,u)&&i.push({element:o,datasetIndex:a,index:l})}return ff(t,n,e,s),i}function vO(t,e,n,r,i,s){let o=[];const a=mO(n);let l=Number.POSITIVE_INFINITY;function c(u,d,f){const p=u.inRange(e.x,e.y,i);if(r&&!p)return;const m=u.getCenterPoint(i);if(!(!!s||t.isPointInArea(m))&&!p)return;const E=a(e,m);E<l?(o=[{element:u,datasetIndex:d,index:f}],l=E):E===l&&o.push({element:u,datasetIndex:d,index:f})}return ff(t,n,e,c),o}function T0(t,e,n,r,i,s){return!s&&!t.isPointInArea(e)?[]:n==="r"&&!r?xO(t,e,n,i):vO(t,e,n,r,i,s)}function P2(t,e,n,r,i){const s=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return ff(t,n,e,(l,c,u)=>{l[o]&&l[o](e[n],i)&&(s.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(e.x,e.y,i))}),r&&!a?[]:s}var yO={modes:{index(t,e,n,r){const i=ps(e,t),s=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?A0(t,i,s,r,o):T0(t,i,s,!1,r,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,d=c.data[u];d&&!d.skip&&l.push({element:d,datasetIndex:c.index,index:u})}),l):[]},dataset(t,e,n,r){const i=ps(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?A0(t,i,s,r,o):T0(t,i,s,!1,r,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(t,e,n,r){const i=ps(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return A0(t,i,s,r,o)},nearest(t,e,n,r){const i=ps(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return T0(t,i,s,n.intersect,r,o)},x(t,e,n,r){const i=ps(e,t);return P2(t,i,"x",n.intersect,r)},y(t,e,n,r){const i=ps(e,t);return P2(t,i,"y",n.intersect,r)}}};const GT=["left","top","right","bottom"];function Ua(t,e){return t.filter(n=>n.pos===e)}function R2(t,e){return t.filter(n=>GT.indexOf(n.pos)===-1&&n.box.axis===e)}function Ha(t,e){return t.sort((n,r)=>{const i=e?r:n,s=e?n:r;return i.weight===s.weight?i.index-s.index:i.weight-s.weight})}function _O(t){const e=[];let n,r,i,s,o,a;for(n=0,r=(t||[]).length;n<r;++n)i=t[n],{position:s,options:{stack:o,stackWeight:a=1}}=i,e.push({index:n,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&s+o,stackWeight:a});return e}function EO(t){const e={};for(const n of t){const{stack:r,pos:i,stackWeight:s}=n;if(!r||!GT.includes(i))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function wO(t,e){const n=EO(t),{vBoxMaxWidth:r,hBoxMaxHeight:i}=e;let s,o,a;for(s=0,o=t.length;s<o;++s){a=t[s];const{fullSize:l}=a.box,c=n[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*r:l&&e.availableWidth,a.height=i):(a.width=r,a.height=u?u*i:l&&e.availableHeight)}return n}function bO(t){const e=_O(t),n=Ha(e.filter(c=>c.box.fullSize),!0),r=Ha(Ua(e,"left"),!0),i=Ha(Ua(e,"right")),s=Ha(Ua(e,"top"),!0),o=Ha(Ua(e,"bottom")),a=R2(e,"x"),l=R2(e,"y");return{fullSize:n,leftAndTop:r.concat(s),rightAndBottom:i.concat(l).concat(o).concat(a),chartArea:Ua(e,"chartArea"),vertical:r.concat(i).concat(l),horizontal:s.concat(o).concat(a)}}function D2(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function QT(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function CO(t,e,n,r){const{pos:i,box:s}=n,o=t.maxPadding;if(!me(i)){n.size&&(t[i]-=n.size);const d=r[n.stack]||{size:0,count:1};d.size=Math.max(d.size,n.horizontal?s.height:s.width),n.size=d.size/d.count,t[i]+=n.size}s.getPadding&&QT(o,s.getPadding());const a=Math.max(0,e.outerWidth-D2(o,t,"left","right")),l=Math.max(0,e.outerHeight-D2(o,t,"top","bottom")),c=a!==t.w,u=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function AO(t){const e=t.maxPadding;function n(r){const i=Math.max(e[r]-t[r],0);return t[r]+=i,i}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function TO(t,e){const n=e.maxPadding;function r(i){const s={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{s[o]=Math.max(e[o],n[o])}),s}return r(t?["left","right"]:["top","bottom"])}function il(t,e,n,r){const i=[];let s,o,a,l,c,u;for(s=0,o=t.length,c=0;s<o;++s){a=t[s],l=a.box,l.update(a.width||e.w,a.height||e.h,TO(a.horizontal,e));const{same:d,other:f}=CO(e,n,a,r);c|=d&&i.length,u=u||f,l.fullSize||i.push(a)}return c&&il(i,e,n,r)||u}function ku(t,e,n,r,i){t.top=n,t.left=e,t.right=e+r,t.bottom=n+i,t.width=r,t.height=i}function N2(t,e,n,r){const i=n.padding;let{x:s,y:o}=e;for(const a of t){const l=a.box,c=r[a.stack]||{placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const d=e.w*u,f=c.size||l.height;sc(c.start)&&(o=c.start),l.fullSize?ku(l,i.left,o,n.outerWidth-i.right-i.left,f):ku(l,e.left+c.placed,o,d,f),c.start=o,c.placed+=d,o=l.bottom}else{const d=e.h*u,f=c.size||l.width;sc(c.start)&&(s=c.start),l.fullSize?ku(l,s,i.top,f,n.outerHeight-i.bottom-i.top):ku(l,s,e.top+c.placed,f,d),c.start=s,c.placed+=d,s=l.right}}e.x=s,e.y=o}var Lt={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;const i=Ut(t.options.layout.padding),s=Math.max(e-i.width,0),o=Math.max(n-i.height,0),a=bO(t.boxes),l=a.vertical,c=a.horizontal;Ce(t.boxes,v=>{typeof v.beforeLayout=="function"&&v.beforeLayout()});const u=l.reduce((v,E)=>E.box.options&&E.box.options.display===!1?v:v+1,0)||1,d=Object.freeze({outerWidth:e,outerHeight:n,padding:i,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/u,hBoxMaxHeight:o/2}),f=Object.assign({},i);QT(f,Ut(r));const p=Object.assign({maxPadding:f,w:s,h:o,x:i.left,y:i.top},i),m=wO(l.concat(c),d);il(a.fullSize,p,d,m),il(l,p,d,m),il(c,p,d,m)&&il(l,p,d,m),AO(p),N2(a.leftAndTop,p,d,m),p.x+=p.w,p.y+=p.h,N2(a.rightAndBottom,p,d,m),t.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},Ce(a.chartArea,v=>{const E=v.box;Object.assign(E,t.chartArea),E.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})})}};class YT{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,r){}removeEventListener(e,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,r,i){return n=Math.max(0,n||e.width),r=r||e.height,{width:n,height:Math.max(0,i?Math.floor(n/i):r)}}isAttached(e){return!0}updateConfig(e){}}class SO extends YT{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const dh="$chartjs",IO={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},F2=t=>t===null||t==="";function kO(t,e){const n=t.style,r=t.getAttribute("height"),i=t.getAttribute("width");if(t[dh]={initial:{height:r,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",F2(i)){const s=x2(t,"width");s!==void 0&&(t.width=s)}if(F2(r))if(t.style.height==="")t.height=t.width/(e||2);else{const s=x2(t,"height");s!==void 0&&(t.height=s)}return t}const XT=RM?{passive:!0}:!1;function PO(t,e,n){t&&t.addEventListener(e,n,XT)}function RO(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,XT)}function DO(t,e){const n=IO[t.type]||t.type,{x:r,y:i}=ps(t,e);return{type:n,chart:e,native:t,x:r!==void 0?r:null,y:i!==void 0?i:null}}function dd(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function NO(t,e,n){const r=t.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||dd(a.addedNodes,r),o=o&&!dd(a.removedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}function FO(t,e,n){const r=t.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||dd(a.removedNodes,r),o=o&&!dd(a.addedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}const lc=new Map;let M2=0;function JT(){const t=window.devicePixelRatio;t!==M2&&(M2=t,lc.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function MO(t,e){lc.size||window.addEventListener("resize",JT),lc.set(t,e)}function OO(t){lc.delete(t),lc.size||window.removeEventListener("resize",JT)}function BO(t,e,n){const r=t.canvas,i=r&&_v(r);if(!i)return;const s=IT((a,l)=>{const c=i.clientWidth;n(a,l),c<i.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||s(c,u)});return o.observe(i),MO(t,s),o}function S0(t,e,n){n&&n.disconnect(),e==="resize"&&OO(t)}function LO(t,e,n){const r=t.canvas,i=IT(s=>{t.ctx!==null&&n(DO(s,t))},t);return PO(r,e,i),i}class jO extends YT{acquireContext(e,n){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(kO(e,n),r):null}releaseContext(e){const n=e.canvas;if(!n[dh])return!1;const r=n[dh].initial;["height","width"].forEach(s=>{const o=r[s];fe(o)?n.removeAttribute(s):n.setAttribute(s,o)});const i=r.style||{};return Object.keys(i).forEach(s=>{n.style[s]=i[s]}),n.width=n.width,delete n[dh],!0}addEventListener(e,n,r){this.removeEventListener(e,n);const i=e.$proxies||(e.$proxies={}),o={attach:NO,detach:FO,resize:BO}[n]||LO;i[n]=o(e,n,r)}removeEventListener(e,n){const r=e.$proxies||(e.$proxies={}),i=r[n];if(!i)return;({attach:S0,detach:S0,resize:S0}[n]||RO)(e,n,i),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,r,i){return PM(e,n,r,i)}isAttached(e){const n=e&&_v(e);return!!(n&&n.isConnected)}}function VO(t){return!yv()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?SO:jO}class $n{constructor(){Z(this,"x");Z(this,"y");Z(this,"active",!1);Z(this,"options");Z(this,"$animations")}tooltipPosition(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}hasValue(){return na(this.x)&&na(this.y)}getProps(e,n){const r=this.$animations;if(!n||!r)return this;const i={};return e.forEach(s=>{i[s]=r[s]&&r[s].active()?r[s]._to:this[s]}),i}}Z($n,"defaults",{}),Z($n,"defaultRoutes");function zO(t,e){const n=t.options.ticks,r=UO(t),i=Math.min(n.maxTicksLimit||r,r),s=n.major.enabled?WO(e):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>i)return $O(e,c,s,o/i),c;const u=HO(s,e,i);if(o>0){let d,f;const p=o>1?Math.round((l-a)/(o-1)):null;for(Pu(e,c,u,fe(p)?0:a-p,a),d=0,f=o-1;d<f;d++)Pu(e,c,u,s[d],s[d+1]);return Pu(e,c,u,l,fe(p)?e.length:l+p),c}return Pu(e,c,u),c}function UO(t){const e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),i=t._maxLength/n;return Math.floor(Math.min(r,i))}function HO(t,e,n){const r=qO(t),i=e.length/n;if(!r)return Math.max(i,1);const s=N7(r);for(let o=0,a=s.length-1;o<a;o++){const l=s[o];if(l>i)return l}return Math.max(i,1)}function WO(t){const e=[];let n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}function $O(t,e,n,r){let i=0,s=n[0],o;for(r=Math.ceil(r),o=0;o<t.length;o++)o===s&&(e.push(t[o]),i++,s=n[i*r])}function Pu(t,e,n,r,i){const s=he(r,0),o=Math.min(he(i,t.length),t.length);let a=0,l,c,u;for(n=Math.ceil(n),i&&(l=i-r,n=l/Math.floor(l/n)),u=s;u<0;)a++,u=Math.round(s+a*n);for(c=Math.max(s,0);c<o;c++)c===u&&(e.push(t[c]),a++,u=Math.round(s+a*n))}function qO(t){const e=t.length;let n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}const KO=t=>t==="left"?"right":t==="right"?"left":t,O2=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,B2=(t,e)=>Math.min(e||t,t);function L2(t,e){const n=[],r=t.length/e,i=t.length;let s=0;for(;s<i;s+=r)n.push(t[Math.floor(s)]);return n}function GO(t,e,n){const r=t.ticks.length,i=Math.min(e,r-1),s=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(i),c;if(!(n&&(r===1?c=Math.max(l-s,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(i-1))/2,l+=i<e?c:-c,l<s-a||l>o+a)))return l}function QO(t,e){Ce(t,n=>{const r=n.gc,i=r.length/2;let s;if(i>e){for(s=0;s<i;++s)delete n.data[r[s]];r.splice(0,i)}})}function Wa(t){return t.drawTicks?t.tickLength:0}function j2(t,e){if(!t.display)return 0;const n=dt(t.font,e),r=Ut(t.padding);return(Ve(t.text)?t.text.length:1)*n.lineHeight+r.height}function YO(t,e){return Ji(t,{scale:e,type:"scale"})}function XO(t,e,n){return Ji(t,{tick:n,index:e,type:"tick"})}function JO(t,e,n){let r=fv(t);return(n&&e!=="right"||!n&&e==="right")&&(r=KO(r)),r}function ZO(t,e,n,r){const{top:i,left:s,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:u}=l;let d=0,f,p,m;const v=o-i,E=a-s;if(t.isHorizontal()){if(p=Ft(r,s,a),me(n)){const _=Object.keys(n)[0],x=n[_];m=u[_].getPixelForValue(x)+v-e}else n==="center"?m=(c.bottom+c.top)/2+v-e:m=O2(t,n,e);f=a-s}else{if(me(n)){const _=Object.keys(n)[0],x=n[_];p=u[_].getPixelForValue(x)-E+e}else n==="center"?p=(c.left+c.right)/2-E+e:p=O2(t,n,e);m=Ft(r,o,i),d=n==="left"?-st:st}return{titleX:p,titleY:m,maxWidth:f,rotation:d}}class Ys extends $n{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:r,_suggestedMax:i}=this;return e=hn(e,Number.POSITIVE_INFINITY),n=hn(n,Number.NEGATIVE_INFINITY),r=hn(r,Number.POSITIVE_INFINITY),i=hn(i,Number.NEGATIVE_INFINITY),{min:hn(e,r),max:hn(n,i),minDefined:Xe(e),maxDefined:Xe(n)}}getMinMax(e){let{min:n,max:r,minDefined:i,maxDefined:s}=this.getUserBounds(),o;if(i&&s)return{min:n,max:r};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),i||(n=Math.min(n,o.min)),s||(r=Math.max(r,o.max));return n=s&&n>r?r:n,r=i&&n>r?n:r,{min:hn(n,hn(r,n)),max:hn(r,hn(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Re(this.options.beforeUpdate,[this])}update(e,n,r){const{beginAtZero:i,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=lM(this,s,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?L2(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=zO(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,e=!e),this._startPixel=n,this._endPixel=r,this._reversePixels=e,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Re(this.options.afterUpdate,[this])}beforeSetDimensions(){Re(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Re(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Re(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Re(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let r,i,s;for(r=0,i=e.length;r<i;r++)s=e[r],s.label=Re(n.callback,[s.value,r,e],this)}afterTickToLabelConversion(){Re(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Re(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,r=B2(this.ticks.length,e.ticks.maxTicksLimit),i=n.minRotation||0,s=n.maxRotation;let o=i,a,l,c;if(!this._isVisible()||!n.display||i>=s||r<=1||!this.isHorizontal()){this.labelRotation=i;return}const u=this._getLabelSizes(),d=u.widest.width,f=u.highest.height,p=mt(this.chart.width-d,0,this.maxWidth);a=e.offset?this.maxWidth/r:p/(r-1),d+6>a&&(a=p/(r-(e.offset?.5:1)),l=this.maxHeight-Wa(e.grid)-n.padding-j2(e.title,this.chart.options.font),c=Math.sqrt(d*d+f*f),o=hv(Math.min(Math.asin(mt((u.highest.height+6)/a,-1,1)),Math.asin(mt(l/c,-1,1))-Math.asin(mt(f/c,-1,1)))),o=Math.max(i,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){Re(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Re(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:r,title:i,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=j2(i,n.options.font);if(a?(e.width=this.maxWidth,e.height=Wa(s)+l):(e.height=this.maxHeight,e.width=Wa(s)+l),r.display&&this.ticks.length){const{first:c,last:u,widest:d,highest:f}=this._getLabelSizes(),p=r.padding*2,m=Ln(this.labelRotation),v=Math.cos(m),E=Math.sin(m);if(a){const _=r.mirror?0:E*d.width+v*f.height;e.height=Math.min(this.maxHeight,e.height+_+p)}else{const _=r.mirror?0:v*d.width+E*f.height;e.width=Math.min(this.maxWidth,e.width+_+p)}this._calculatePadding(c,u,E,v)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,r,i){const{ticks:{align:s,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,p=0;l?c?(f=i*e.width,p=r*n.height):(f=r*e.height,p=i*n.width):s==="start"?p=n.width:s==="end"?f=e.width:s!=="inner"&&(f=e.width/2,p=n.width/2),this.paddingLeft=Math.max((f-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((p-d+o)*this.width/(this.width-d),0)}else{let u=n.height/2,d=e.height/2;s==="start"?(u=0,d=e.height):s==="end"&&(u=n.height,d=0),this.paddingTop=u+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Re(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,r;for(n=0,r=e.length;n<r;n++)fe(e[n].label)&&(e.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=L2(r,n)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,r){const{ctx:i,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(n/B2(n,r));let c=0,u=0,d,f,p,m,v,E,_,x,w,A,P;for(d=0;d<n;d+=l){if(m=e[d].label,v=this._resolveTickFontOptions(d),i.font=E=v.string,_=s[E]=s[E]||{data:{},gc:[]},x=v.lineHeight,w=A=0,!fe(m)&&!Ve(m))w=ud(i,_.data,_.gc,w,m),A=x;else if(Ve(m))for(f=0,p=m.length;f<p;++f)P=m[f],!fe(P)&&!Ve(P)&&(w=ud(i,_.data,_.gc,w,P),A+=x);o.push(w),a.push(A),c=Math.max(w,c),u=Math.max(A,u)}QO(s,n);const R=o.indexOf(c),C=a.indexOf(u),b=k=>({width:o[k]||0,height:a[k]||0});return{first:b(0),last:b(n-1),widest:b(R),highest:b(C),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return B7(this._alignToPixels?ls(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const r=n[e];return r.$context||(r.$context=XO(this.getContext(),e,r))}return this.$context||(this.$context=YO(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=Ln(this.labelRotation),r=Math.abs(Math.cos(n)),i=Math.abs(Math.sin(n)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*r>a*i?a/r:l/i:l*i<a*r?l/r:a/i}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,r=this.chart,i=this.options,{grid:s,position:o,border:a}=i,l=s.offset,c=this.isHorizontal(),d=this.ticks.length+(l?1:0),f=Wa(s),p=[],m=a.setContext(this.getContext()),v=m.display?m.width:0,E=v/2,_=function(L){return ls(r,L,v)};let x,w,A,P,R,C,b,k,S,I,N,D;if(o==="top")x=_(this.bottom),C=this.bottom-f,k=x-E,I=_(e.top)+E,D=e.bottom;else if(o==="bottom")x=_(this.top),I=e.top,D=_(e.bottom)-E,C=x+E,k=this.top+f;else if(o==="left")x=_(this.right),R=this.right-f,b=x-E,S=_(e.left)+E,N=e.right;else if(o==="right")x=_(this.left),S=e.left,N=_(e.right)-E,R=x+E,b=this.left+f;else if(n==="x"){if(o==="center")x=_((e.top+e.bottom)/2+.5);else if(me(o)){const L=Object.keys(o)[0],X=o[L];x=_(this.chart.scales[L].getPixelForValue(X))}I=e.top,D=e.bottom,C=x+E,k=C+f}else if(n==="y"){if(o==="center")x=_((e.left+e.right)/2);else if(me(o)){const L=Object.keys(o)[0],X=o[L];x=_(this.chart.scales[L].getPixelForValue(X))}R=x-E,b=R-f,S=e.left,N=e.right}const G=he(i.ticks.maxTicksLimit,d),q=Math.max(1,Math.ceil(d/G));for(w=0;w<d;w+=q){const L=this.getContext(w),X=s.setContext(L),j=a.setContext(L),W=X.lineWidth,Q=X.color,B=j.dash||[],V=j.dashOffset,U=X.tickWidth,H=X.tickColor,re=X.tickBorderDash||[],ie=X.tickBorderDashOffset;A=GO(this,w,l),A!==void 0&&(P=ls(r,A,W),c?R=b=S=N=P:C=k=I=D=P,p.push({tx1:R,ty1:C,tx2:b,ty2:k,x1:S,y1:I,x2:N,y2:D,width:W,color:Q,borderDash:B,borderDashOffset:V,tickWidth:U,tickColor:H,tickBorderDash:re,tickBorderDashOffset:ie}))}return this._ticksLength=d,this._borderValue=x,p}_computeLabelItems(e){const n=this.axis,r=this.options,{position:i,ticks:s}=r,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:d}=s,f=Wa(r.grid),p=f+u,m=d?-u:p,v=-Ln(this.labelRotation),E=[];let _,x,w,A,P,R,C,b,k,S,I,N,D="middle";if(i==="top")R=this.bottom-m,C=this._getXAxisLabelAlignment();else if(i==="bottom")R=this.top+m,C=this._getXAxisLabelAlignment();else if(i==="left"){const q=this._getYAxisLabelAlignment(f);C=q.textAlign,P=q.x}else if(i==="right"){const q=this._getYAxisLabelAlignment(f);C=q.textAlign,P=q.x}else if(n==="x"){if(i==="center")R=(e.top+e.bottom)/2+p;else if(me(i)){const q=Object.keys(i)[0],L=i[q];R=this.chart.scales[q].getPixelForValue(L)+p}C=this._getXAxisLabelAlignment()}else if(n==="y"){if(i==="center")P=(e.left+e.right)/2-p;else if(me(i)){const q=Object.keys(i)[0],L=i[q];P=this.chart.scales[q].getPixelForValue(L)}C=this._getYAxisLabelAlignment(f).textAlign}n==="y"&&(l==="start"?D="top":l==="end"&&(D="bottom"));const G=this._getLabelSizes();for(_=0,x=a.length;_<x;++_){w=a[_],A=w.label;const q=s.setContext(this.getContext(_));b=this.getPixelForTick(_)+s.labelOffset,k=this._resolveTickFontOptions(_),S=k.lineHeight,I=Ve(A)?A.length:1;const L=I/2,X=q.color,j=q.textStrokeColor,W=q.textStrokeWidth;let Q=C;o?(P=b,C==="inner"&&(_===x-1?Q=this.options.reverse?"left":"right":_===0?Q=this.options.reverse?"right":"left":Q="center"),i==="top"?c==="near"||v!==0?N=-I*S+S/2:c==="center"?N=-G.highest.height/2-L*S+S:N=-G.highest.height+S/2:c==="near"||v!==0?N=S/2:c==="center"?N=G.highest.height/2-L*S:N=G.highest.height-I*S,d&&(N*=-1),v!==0&&!q.showLabelBackdrop&&(P+=S/2*Math.sin(v))):(R=b,N=(1-I)*S/2);let B;if(q.showLabelBackdrop){const V=Ut(q.backdropPadding),U=G.heights[_],H=G.widths[_];let re=N-V.top,ie=0-V.left;switch(D){case"middle":re-=U/2;break;case"bottom":re-=U;break}switch(C){case"center":ie-=H/2;break;case"right":ie-=H;break;case"inner":_===x-1?ie-=H:_>0&&(ie-=H/2);break}B={left:ie,top:re,width:H+V.width,height:U+V.height,color:q.backdropColor}}E.push({label:A,font:k,textOffset:N,options:{rotation:v,color:X,strokeColor:j,strokeWidth:W,textAlign:Q,textBaseline:D,translation:[P,R],backdrop:B}})}return E}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-Ln(this.labelRotation))return e==="top"?"left":"right";let i="center";return n.align==="start"?i="left":n.align==="end"?i="right":n.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:r,mirror:i,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,l=o.widest.width;let c,u;return n==="left"?i?(u=this.right+s,r==="near"?c="left":r==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,r==="near"?c="right":r==="center"?(c="center",u-=l/2):(c="left",u=this.left)):n==="right"?i?(u=this.left+s,r==="near"?c="right":r==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,r==="near"?c="left":r==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:r,top:i,width:s,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(r,i,s,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const i=this.ticks.findIndex(s=>s.value===e);return i>=0?n.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const n=this.options.grid,r=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const a=(l,c,u)=>{!u.width||!u.color||(r.save(),r.lineWidth=u.width,r.strokeStyle=u.color,r.setLineDash(u.borderDash||[]),r.lineDashOffset=u.borderDashOffset,r.beginPath(),r.moveTo(l.x,l.y),r.lineTo(c.x,c.y),r.stroke(),r.restore())};if(n.display)for(s=0,o=i.length;s<o;++s){const l=i[s];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:r,grid:i}}=this,s=r.setContext(this.getContext()),o=r.display?s.width:0;if(!o)return;const a=i.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,d,f;this.isHorizontal()?(c=ls(e,this.left,o)-o/2,u=ls(e,this.right,a)+a/2,d=f=l):(d=ls(e,this.top,o)-o/2,f=ls(e,this.bottom,a)+a/2,c=u=l),n.save(),n.lineWidth=s.width,n.strokeStyle=s.color,n.beginPath(),n.moveTo(c,d),n.lineTo(u,f),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,i=this._computeLabelArea();i&&uf(r,i);const s=this.getLabelItems(e);for(const o of s){const a=o.options,l=o.font,c=o.label,u=o.textOffset;Us(r,c,0,u,l,a)}i&&hf(r)}drawTitle(){const{ctx:e,options:{position:n,title:r,reverse:i}}=this;if(!r.display)return;const s=dt(r.font),o=Ut(r.padding),a=r.align;let l=s.lineHeight/2;n==="bottom"||n==="center"||me(n)?(l+=o.bottom,Ve(r.text)&&(l+=s.lineHeight*(r.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:d,rotation:f}=ZO(this,l,n,a);Us(e,r.text,0,0,s,{color:r.color,maxWidth:d,rotation:f,textAlign:JO(a,n,i),textBaseline:"middle",translation:[c,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,r=he(e.grid&&e.grid.z,-1),i=he(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Ys.prototype.draw?[{z:n,draw:s=>{this.draw(s)}}]:[{z:r,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:n,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",i=[];let s,o;for(s=0,o=n.length;s<o;++s){const a=n[s];a[r]===this.id&&(!e||a.type===e)&&i.push(a)}return i}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return dt(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Ru{constructor(e,n,r){this.type=e,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let r;nB(n)&&(r=this.register(n));const i=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in i||(i[s]=e,eB(e,o,r),this.override&&ze.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,r=e.id,i=this.scope;r in n&&delete n[r],i&&r in ze[i]&&(delete ze[i][r],this.override&&delete zs[r])}}function eB(t,e,n){const r=ic(Object.create(null),[n?ze.get(n):{},ze.get(e),t.defaults]);ze.set(e,r),t.defaultRoutes&&tB(e,t.defaultRoutes),t.descriptors&&ze.describe(e,t.descriptors)}function tB(t,e){Object.keys(e).forEach(n=>{const r=n.split("."),i=r.pop(),s=[t].concat(r).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");ze.route(s,i,l,a)})}function nB(t){return"id"in t&&"defaults"in t}class rB{constructor(){this.controllers=new Ru(zn,"datasets",!0),this.elements=new Ru($n,"elements"),this.plugins=new Ru(Object,"plugins"),this.scales=new Ru(Ys,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,r){[...n].forEach(i=>{const s=r||this._getRegistryForType(i);r||s.isForType(i)||s===this.plugins&&i.id?this._exec(e,s,i):Ce(i,o=>{const a=r||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,r){const i=uv(e);Re(r["before"+i],[],r),n[e](r),Re(r["after"+i],[],r)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(e))return r}return this.plugins}_get(e,n,r){const i=n.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return i}}var Qn=new rB;class iB{constructor(){this._init=[]}notify(e,n,r,i){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const s=i?this._descriptors(e).filter(i):this._descriptors(e),o=this._notify(s,e,n,r);return n==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,r,i){i=i||{};for(const s of e){const o=s.plugin,a=o[r],l=[n,i,s.options];if(Re(a,l,o)===!1&&i.cancelable)return!1}return!0}invalidate(){fe(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const r=e&&e.config,i=he(r.options&&r.options.plugins,{}),s=sB(r);return i===!1&&!n?[]:aB(e,s,i,n)}_notifyStateChanges(e){const n=this._oldCache||[],r=this._cache,i=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(i(n,r),e,"stop"),this._notify(i(r,n),e,"start")}}function sB(t){const e={},n=[],r=Object.keys(Qn.plugins.items);for(let s=0;s<r.length;s++)n.push(Qn.getPlugin(r[s]));const i=t.plugins||[];for(let s=0;s<i.length;s++){const o=i[s];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function oB(t,e){return!e&&t===!1?null:t===!0?{}:t}function aB(t,{plugins:e,localIds:n},r,i){const s=[],o=t.getContext();for(const a of e){const l=a.id,c=oB(r[l],i);c!==null&&s.push({plugin:a,options:lB(t.config,{plugin:a,local:n[l]},c,o)})}return s}function lB(t,{plugin:e,local:n},r,i){const s=t.pluginScopeKeys(e),o=t.getOptionScopes(r,s);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Wg(t,e){const n=ze.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function cB(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function uB(t,e){return t===e?"_index_":"_value_"}function V2(t){if(t==="x"||t==="y"||t==="r")return t}function hB(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function $g(t,...e){if(V2(t))return t;for(const n of e){const r=n.axis||hB(n.position)||t.length>1&&V2(t[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function z2(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function dB(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(r=>r.xAxisID===t||r.yAxisID===t);if(n.length)return z2(t,"x",n[0])||z2(t,"y",n[0])}return{}}function fB(t,e){const n=zs[t.type]||{scales:{}},r=e.scales||{},i=Wg(t.type,e),s=Object.create(null);return Object.keys(r).forEach(o=>{const a=r[o];if(!me(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=$g(o,a,dB(o,t),ze.scales[a.type]),c=uB(l,i),u=n.scales||{};s[o]=bl(Object.create(null),[{axis:l},a,u[l],u[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||Wg(a,e),u=(zs[a]||{}).scales||{};Object.keys(u).forEach(d=>{const f=cB(d,l),p=o[f+"AxisID"]||f;s[p]=s[p]||Object.create(null),bl(s[p],[{axis:f},r[p],u[d]])})}),Object.keys(s).forEach(o=>{const a=s[o];bl(a,[ze.scales[a.type],ze.scale])}),s}function ZT(t){const e=t.options||(t.options={});e.plugins=he(e.plugins,{}),e.scales=fB(t,e)}function eS(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function pB(t){return t=t||{},t.data=eS(t.data),ZT(t),t}const U2=new Map,tS=new Set;function Du(t,e){let n=U2.get(t);return n||(n=e(),U2.set(t,n),tS.add(n)),n}const $a=(t,e,n)=>{const r=Wi(e,n);r!==void 0&&t.add(r)};class gB{constructor(e){this._config=pB(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=eS(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),ZT(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Du(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return Du(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return Du(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,r=this.type;return Du(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const r=this._scopeCache;let i=r.get(e);return(!i||n)&&(i=new Map,r.set(e,i)),i}getOptionScopes(e,n,r){const{options:i,type:s}=this,o=this._cachedScopes(e,r),a=o.get(n);if(a)return a;const l=new Set;n.forEach(u=>{e&&(l.add(e),u.forEach(d=>$a(l,e,d))),u.forEach(d=>$a(l,i,d)),u.forEach(d=>$a(l,zs[s]||{},d)),u.forEach(d=>$a(l,ze,d)),u.forEach(d=>$a(l,zg,d))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),tS.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,zs[n]||{},ze.datasets[n]||{},{type:n},ze,zg]}resolveNamedOptions(e,n,r,i=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=H2(this._resolverCache,e,i);let l=o;if(xB(o,n)){s.$shared=!1,r=$i(r)?r():r;const c=this.createResolver(e,r,a);l=ra(o,r,c)}for(const c of n)s[c]=l[c];return s}createResolver(e,n,r=[""],i){const{resolver:s}=H2(this._resolverCache,e,r);return me(n)?ra(s,n,void 0,i):s}}function H2(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));const i=n.join();let s=r.get(i);return s||(s={resolver:mv(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},r.set(i,s)),s}const mB=t=>me(t)&&Object.getOwnPropertyNames(t).some(e=>$i(t[e]));function xB(t,e){const{isScriptable:n,isIndexable:r}=FT(t);for(const i of e){const s=n(i),o=r(i),a=(o||s)&&t[i];if(s&&($i(a)||mB(a))||o&&Ve(a))return!0}return!1}var vB="4.4.8";const yB=["top","bottom","left","right","chartArea"];function W2(t,e){return t==="top"||t==="bottom"||yB.indexOf(t)===-1&&e==="x"}function $2(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function q2(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),Re(n&&n.onComplete,[t],e)}function _B(t){const e=t.chart,n=e.options.animation;Re(n&&n.onProgress,[t],e)}function nS(t){return yv()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const fh={},K2=t=>{const e=nS(t);return Object.values(fh).filter(n=>n.canvas===e).pop()};function EB(t,e,n){const r=Object.keys(t);for(const i of r){const s=+i;if(s>=e){const o=t[i];delete t[i],(n>0||s>e)&&(t[s+n]=o)}}}function wB(t,e,n,r){return!n||t.type==="mouseout"?null:r?e:t}function Nu(t,e,n){return t.options.clip?t[n]:e[n]}function bB(t,e){const{xScale:n,yScale:r}=t;return n&&r?{left:Nu(n,e,"left"),right:Nu(n,e,"right"),top:Nu(r,e,"top"),bottom:Nu(r,e,"bottom")}:e}class wr{static register(...e){Qn.add(...e),G2()}static unregister(...e){Qn.remove(...e),G2()}constructor(e,n){const r=this.config=new gB(n),i=nS(e),s=K2(i);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||VO(i)),this.platform.updateConfig(r);const a=this.platform.acquireContext(i,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=C7(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new iB,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=z7(d=>this.update(d),o.resizeDelay||0),this._dataChanges=[],fh[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}xr.listen(this,"complete",q2),xr.listen(this,"progress",_B),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:r,height:i,_aspectRatio:s}=this;return fe(e)?n&&s?s:i?r/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Qn}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():m2(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return f2(this.canvas,this.ctx),this}stop(){return xr.stop(this),this}resize(e,n){xr.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const r=this.options,i=this.canvas,s=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(i,e,n,s),a=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,m2(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),Re(r.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};Ce(n,(r,i)=>{r.id=i})}buildOrUpdateScales(){const e=this.options,n=e.scales,r=this.scales,i=Object.keys(r).reduce((o,a)=>(o[a]=!1,o),{});let s=[];n&&(s=s.concat(Object.keys(n).map(o=>{const a=n[o],l=$g(o,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),Ce(s,o=>{const a=o.options,l=a.id,c=$g(l,a),u=he(a.type,o.dtype);(a.position===void 0||W2(a.position,c)!==W2(o.dposition))&&(a.position=o.dposition),i[l]=!0;let d=null;if(l in r&&r[l].type===u)d=r[l];else{const f=Qn.getScale(u);d=new f({id:l,type:u,ctx:this.ctx,chart:this}),r[d.id]=d}d.init(a,e)}),Ce(i,(o,a)=>{o||delete r[a]}),Ce(r,o=>{Lt.configure(this,o,o.options),Lt.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,r=e.length;if(e.sort((i,s)=>i.index-s.index),r>n){for(let i=n;i<r;++i)this._destroyDatasetMeta(i);e.splice(n,r-n)}this._sortedMetasets=e.slice(0).sort($2("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((r,i)=>{n.filter(s=>s===r._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let r,i;for(this._removeUnreferencedMetasets(),r=0,i=n.length;r<i;r++){const s=n[r];let o=this.getDatasetMeta(r);const a=s.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=a,o.indexAxis=s.indexAxis||Wg(a,this.options),o.order=s.order||0,o.index=r,o.label=""+s.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const l=Qn.getController(a),{datasetElementType:c,dataElementType:u}=ze.datasets[a];Object.assign(l,{dataElementType:Qn.getElement(u),datasetElementType:c&&Qn.getElement(c)}),o.controller=new l(this,r),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){Ce(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:d}=this.getDatasetMeta(c),f=!i&&s.indexOf(d)===-1;d.buildOrUpdateElements(f),o=Math.max(+d.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),i||Ce(s,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort($2("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Ce(this.scales,e=>{Lt.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!i2(n,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:i,count:s}of n){const o=r==="_removeElements"?-s:s;EB(e,i,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=s=>new Set(e.filter(o=>o[0]===s).map((o,a)=>a+","+o.splice(1).join(","))),i=r(0);for(let s=1;s<n;s++)if(!i2(i,r(s)))return;return Array.from(i).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Lt.update(this,this.width,this.height,e);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],Ce(this.boxes,i=>{r&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,s)=>{i._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,$i(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const r=this.getDatasetMeta(e),i={meta:r,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(r.controller._update(n),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(xr.has(this)?this.attached&&!xr.running(this)&&xr.start(this):(this.draw(),q2({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,r=[];let i,s;for(i=0,s=n.length;i<s;++i){const o=n[i];(!e||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,r=e._clip,i=!r.disabled,s=bB(e,this.chartArea),o={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",o)!==!1&&(i&&uf(n,{left:r.left===!1?0:s.left-r.left,right:r.right===!1?this.width:s.right+r.right,top:r.top===!1?0:s.top-r.top,bottom:r.bottom===!1?this.height:s.bottom+r.bottom}),e.controller.draw(),i&&hf(n),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(e){return Pr(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,r,i){const s=yO.modes[n];return typeof s=="function"?s(this,e,r,i):[]}getDatasetMeta(e){const n=this.data.datasets[e],r=this._metasets;let i=r.filter(s=>s&&s._dataset===n).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},r.push(i)),i}getContext(){return this.$context||(this.$context=Ji(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(e,n){const r=this.getDatasetMeta(e);r.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,r){const i=r?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,i);sc(n)?(s.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),o.update(s,{visible:r}),this.update(a=>a.datasetIndex===e?i:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),xr.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),f2(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete fh[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,r=(s,o)=>{n.addEventListener(this,s,o),e[s]=o},i=(s,o,a)=>{s.offsetX=o,s.offsetY=a,this._eventHandler(s)};Ce(this.options.events,s=>r(s,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,r=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},i=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},s=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{i("attach",a),this.attached=!0,this.resize(),r("resize",s),r("detach",o)};o=()=>{this.attached=!1,i("resize",s),this._stop(),this._resize(0,0),r("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){Ce(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},Ce(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,r){const i=r?"set":"remove";let s,o,a,l;for(n==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+i+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],r=e.map(({datasetIndex:s,index:o})=>{const a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[o],index:o}});!ad(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(e,n,r){return this._plugins.notify(this,e,n,r)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,r){const i=this.options.hover,s=(l,c)=>l.filter(u=>!c.some(d=>u.datasetIndex===d.datasetIndex&&u.index===d.index)),o=s(n,e),a=r?e:s(e,n);o.length&&this.updateHoverStyle(o,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(e,n){const r={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},i=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,i)===!1)return;const s=this._handleEvent(e,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,i),(s||r.changed)&&this.render(),this}_handleEvent(e,n,r){const{_active:i=[],options:s}=this,o=n,a=this._getActiveElements(e,i,r,o),l=P7(e),c=wB(e,this._lastEvent,r,l);r&&(this._lastEvent=null,Re(s.onHover,[e,a,this],this),l&&Re(s.onClick,[e,a,this],this));const u=!ad(a,i);return(u||n)&&(this._active=a,this._updateHoverStyles(a,i,n)),this._lastEvent=c,u}_getActiveElements(e,n,r,i){if(e.type==="mouseout")return[];if(!r)return n;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,i)}}Z(wr,"defaults",ze),Z(wr,"instances",fh),Z(wr,"overrides",zs),Z(wr,"registry",Qn),Z(wr,"version",vB),Z(wr,"getChart",K2);function G2(){return Ce(wr.instances,t=>t._plugins.invalidate())}function CB(t,e,n){const{startAngle:r,pixelMargin:i,x:s,y:o,outerRadius:a,innerRadius:l}=e;let c=i/a;t.beginPath(),t.arc(s,o,a,r-c,n+c),l>i?(c=i/l,t.arc(s,o,l,n+c,r-c,!0)):t.arc(s,o,i,n+st,r-st),t.closePath(),t.clip()}function AB(t){return gv(t,["outerStart","outerEnd","innerStart","innerEnd"])}function TB(t,e,n,r){const i=AB(t.options.borderRadius),s=(n-e)/2,o=Math.min(s,r*e/2),a=l=>{const c=(n-Math.min(s,l))*r/2;return mt(l,0,Math.min(s,c))};return{outerStart:a(i.outerStart),outerEnd:a(i.outerEnd),innerStart:mt(i.innerStart,0,o),innerEnd:mt(i.innerEnd,0,o)}}function fo(t,e,n,r){return{x:n+t*Math.cos(e),y:r+t*Math.sin(e)}}function fd(t,e,n,r,i,s){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:u}=e,d=Math.max(e.outerRadius+r+n-c,0),f=u>0?u+r+n+c:0;let p=0;const m=i-l;if(r){const q=u>0?u-r:0,L=d>0?d-r:0,X=(q+L)/2,j=X!==0?m*X/(X+r):m;p=(m-j)/2}const v=Math.max(.001,m*d-n/Le)/d,E=(m-v)/2,_=l+E+p,x=i-E-p,{outerStart:w,outerEnd:A,innerStart:P,innerEnd:R}=TB(e,f,d,x-_),C=d-w,b=d-A,k=_+w/C,S=x-A/b,I=f+P,N=f+R,D=_+P/I,G=x-R/N;if(t.beginPath(),s){const q=(k+S)/2;if(t.arc(o,a,d,k,q),t.arc(o,a,d,q,S),A>0){const W=fo(b,S,o,a);t.arc(W.x,W.y,A,S,x+st)}const L=fo(N,x,o,a);if(t.lineTo(L.x,L.y),R>0){const W=fo(N,G,o,a);t.arc(W.x,W.y,R,x+st,G+Math.PI)}const X=(x-R/f+(_+P/f))/2;if(t.arc(o,a,f,x-R/f,X,!0),t.arc(o,a,f,X,_+P/f,!0),P>0){const W=fo(I,D,o,a);t.arc(W.x,W.y,P,D+Math.PI,_-st)}const j=fo(C,_,o,a);if(t.lineTo(j.x,j.y),w>0){const W=fo(C,k,o,a);t.arc(W.x,W.y,w,_-st,k)}}else{t.moveTo(o,a);const q=Math.cos(k)*d+o,L=Math.sin(k)*d+a;t.lineTo(q,L);const X=Math.cos(S)*d+o,j=Math.sin(S)*d+a;t.lineTo(X,j)}t.closePath()}function SB(t,e,n,r,i){const{fullCircles:s,startAngle:o,circumference:a}=e;let l=e.endAngle;if(s){fd(t,e,n,r,l,i);for(let c=0;c<s;++c)t.fill();isNaN(a)||(l=o+(a%Be||Be))}return fd(t,e,n,r,l,i),t.fill(),l}function IB(t,e,n,r,i){const{fullCircles:s,startAngle:o,circumference:a,options:l}=e,{borderWidth:c,borderJoinStyle:u,borderDash:d,borderDashOffset:f}=l,p=l.borderAlign==="inner";if(!c)return;t.setLineDash(d||[]),t.lineDashOffset=f,p?(t.lineWidth=c*2,t.lineJoin=u||"round"):(t.lineWidth=c,t.lineJoin=u||"bevel");let m=e.endAngle;if(s){fd(t,e,n,r,m,i);for(let v=0;v<s;++v)t.stroke();isNaN(a)||(m=o+(a%Be||Be))}p&&CB(t,e,m),s||(fd(t,e,n,r,m,i),t.stroke())}class sl extends $n{constructor(n){super();Z(this,"circumference");Z(this,"endAngle");Z(this,"fullCircles");Z(this,"innerRadius");Z(this,"outerRadius");Z(this,"pixelMargin");Z(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,r,i){const s=this.getProps(["x","y"],i),{angle:o,distance:a}=CT(s,{x:n,y:r}),{startAngle:l,endAngle:c,innerRadius:u,outerRadius:d,circumference:f}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),p=(this.options.spacing+this.options.borderWidth)/2,m=he(f,c-l),v=oc(o,l,c)&&l!==c,E=m>=Be||v,_=Ir(a,u+p,d+p);return E&&_}getCenterPoint(n){const{x:r,y:i,startAngle:s,endAngle:o,innerRadius:a,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:c,spacing:u}=this.options,d=(s+o)/2,f=(a+l+u+c)/2;return{x:r+Math.cos(d)*f,y:i+Math.sin(d)*f}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:r,circumference:i}=this,s=(r.offset||0)/4,o=(r.spacing||0)/2,a=r.circular;if(this.pixelMargin=r.borderAlign==="inner"?.33:0,this.fullCircles=i>Be?Math.floor(i/Be):0,i===0||this.innerRadius<0||this.outerRadius<0)return;n.save();const l=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(l)*s,Math.sin(l)*s);const c=1-Math.sin(Math.min(Le,i||0)),u=s*c;n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,SB(n,this,u,o,a),IB(n,this,u,o,a),n.restore()}}Z(sl,"id","arc"),Z(sl,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),Z(sl,"defaultRoutes",{backgroundColor:"backgroundColor"}),Z(sl,"descriptors",{_scriptable:!0,_indexable:n=>n!=="borderDash"});function rS(t,e,n=e){t.lineCap=he(n.borderCapStyle,e.borderCapStyle),t.setLineDash(he(n.borderDash,e.borderDash)),t.lineDashOffset=he(n.borderDashOffset,e.borderDashOffset),t.lineJoin=he(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=he(n.borderWidth,e.borderWidth),t.strokeStyle=he(n.borderColor,e.borderColor)}function kB(t,e,n){t.lineTo(n.x,n.y)}function PB(t){return t.stepped?Z7:t.tension||t.cubicInterpolationMode==="monotone"?eM:kB}function iS(t,e,n={}){const r=t.length,{start:i=0,end:s=r-1}=n,{start:o,end:a}=e,l=Math.max(i,o),c=Math.min(s,a),u=i<o&&s<o||i>a&&s>a;return{count:r,start:l,loop:e.loop,ilen:c<l&&!u?r+c-l:c-l}}function RB(t,e,n,r){const{points:i,options:s}=e,{count:o,start:a,loop:l,ilen:c}=iS(i,n,r),u=PB(s);let{move:d=!0,reverse:f}=r||{},p,m,v;for(p=0;p<=c;++p)m=i[(a+(f?c-p:p))%o],!m.skip&&(d?(t.moveTo(m.x,m.y),d=!1):u(t,v,m,f,s.stepped),v=m);return l&&(m=i[(a+(f?c:0))%o],u(t,v,m,f,s.stepped)),!!l}function DB(t,e,n,r){const i=e.points,{count:s,start:o,ilen:a}=iS(i,n,r),{move:l=!0,reverse:c}=r||{};let u=0,d=0,f,p,m,v,E,_;const x=A=>(o+(c?a-A:A))%s,w=()=>{v!==E&&(t.lineTo(u,E),t.lineTo(u,v),t.lineTo(u,_))};for(l&&(p=i[x(0)],t.moveTo(p.x,p.y)),f=0;f<=a;++f){if(p=i[x(f)],p.skip)continue;const A=p.x,P=p.y,R=A|0;R===m?(P<v?v=P:P>E&&(E=P),u=(d*u+A)/++d):(w(),t.lineTo(A,P),m=R,d=0,v=E=P),_=P}w()}function qg(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?DB:RB}function NB(t){return t.stepped?DM:t.tension||t.cubicInterpolationMode==="monotone"?NM:gs}function FB(t,e,n,r){let i=e._path;i||(i=e._path=new Path2D,e.path(i,n,r)&&i.closePath()),rS(t,e.options),t.stroke(i)}function MB(t,e,n,r){const{segments:i,options:s}=e,o=qg(e);for(const a of i)rS(t,s,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+r-1})&&t.closePath(),t.stroke()}const OB=typeof Path2D=="function";function BB(t,e,n,r){OB&&!e.options.segment?FB(t,e,n,r):MB(t,e,n,r)}class Ei extends $n{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const i=r.spanGaps?this._loop:this._fullLoop;CM(this._points,r,e,i,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=jM(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,r=e.length;return r&&n[e[r-1].end]}interpolate(e,n){const r=this.options,i=e[n],s=this.points,o=WT(this,{property:n,start:i,end:i});if(!o.length)return;const a=[],l=NB(r);let c,u;for(c=0,u=o.length;c<u;++c){const{start:d,end:f}=o[c],p=s[d],m=s[f];if(p===m){a.push(p);continue}const v=Math.abs((i-p[n])/(m[n]-p[n])),E=l(p,m,v,r.stepped);E[n]=e[n],a.push(E)}return a.length===1?a[0]:a}pathSegment(e,n,r){return qg(this)(e,this,n,r)}path(e,n,r){const i=this.segments,s=qg(this);let o=this._loop;n=n||0,r=r||this.points.length-n;for(const a of i)o&=s(e,this,a,{start:n,end:n+r-1});return!!o}draw(e,n,r,i){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),BB(e,this,r,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}Z(Ei,"id","line"),Z(Ei,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),Z(Ei,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),Z(Ei,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function Q2(t,e,n,r){const i=t.options,{[n]:s}=t.getProps([n],r);return Math.abs(e-s)<i.radius+i.hitRadius}class ph extends $n{constructor(n){super();Z(this,"parsed");Z(this,"skip");Z(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,r,i){const s=this.options,{x:o,y:a}=this.getProps(["x","y"],i);return Math.pow(n-o,2)+Math.pow(r-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(n,r){return Q2(this,n,"x",r)}inYRange(n,r){return Q2(this,n,"y",r)}getCenterPoint(n){const{x:r,y:i}=this.getProps(["x","y"],n);return{x:r,y:i}}size(n){n=n||this.options||{};let r=n.radius||0;r=Math.max(r,r&&n.hoverRadius||0);const i=r&&n.borderWidth||0;return(r+i)*2}draw(n,r){const i=this.options;this.skip||i.radius<.1||!Pr(this,r,this.size(i)/2)||(n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.fillStyle=i.backgroundColor,Ug(n,i,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}Z(ph,"id","point"),Z(ph,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),Z(ph,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function sS(t,e){const{x:n,y:r,base:i,width:s,height:o}=t.getProps(["x","y","base","width","height"],e);let a,l,c,u,d;return t.horizontal?(d=o/2,a=Math.min(n,i),l=Math.max(n,i),c=r-d,u=r+d):(d=s/2,a=n-d,l=n+d,c=Math.min(r,i),u=Math.max(r,i)),{left:a,top:c,right:l,bottom:u}}function wi(t,e,n,r){return t?0:mt(e,n,r)}function LB(t,e,n){const r=t.options.borderWidth,i=t.borderSkipped,s=NT(r);return{t:wi(i.top,s.top,0,n),r:wi(i.right,s.right,0,e),b:wi(i.bottom,s.bottom,0,n),l:wi(i.left,s.left,0,e)}}function jB(t,e,n){const{enableBorderRadius:r}=t.getProps(["enableBorderRadius"]),i=t.options.borderRadius,s=Ts(i),o=Math.min(e,n),a=t.borderSkipped,l=r||me(i);return{topLeft:wi(!l||a.top||a.left,s.topLeft,0,o),topRight:wi(!l||a.top||a.right,s.topRight,0,o),bottomLeft:wi(!l||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:wi(!l||a.bottom||a.right,s.bottomRight,0,o)}}function VB(t){const e=sS(t),n=e.right-e.left,r=e.bottom-e.top,i=LB(t,n/2,r/2),s=jB(t,n/2,r/2);return{outer:{x:e.left,y:e.top,w:n,h:r,radius:s},inner:{x:e.left+i.l,y:e.top+i.t,w:n-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,s.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(i.b,i.r))}}}}function I0(t,e,n,r){const i=e===null,s=n===null,a=t&&!(i&&s)&&sS(t,r);return a&&(i||Ir(e,a.left,a.right))&&(s||Ir(n,a.top,a.bottom))}function zB(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function UB(t,e){t.rect(e.x,e.y,e.w,e.h)}function k0(t,e,n={}){const r=t.x!==n.x?-e:0,i=t.y!==n.y?-e:0,s=(t.x+t.w!==n.x+n.w?e:0)-r,o=(t.y+t.h!==n.y+n.h?e:0)-i;return{x:t.x+r,y:t.y+i,w:t.w+s,h:t.h+o,radius:t.radius}}class gh extends $n{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:r,backgroundColor:i}}=this,{inner:s,outer:o}=VB(this),a=zB(o.radius)?ac:UB;e.save(),(o.w!==s.w||o.h!==s.h)&&(e.beginPath(),a(e,k0(o,n,s)),e.clip(),a(e,k0(s,-n,o)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),a(e,k0(s,n)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,n,r){return I0(this,e,n,r)}inXRange(e,n){return I0(this,e,null,n)}inYRange(e,n){return I0(this,null,e,n)}getCenterPoint(e){const{x:n,y:r,base:i,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(n+i)/2:n,y:s?r:(r+i)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}Z(gh,"id","bar"),Z(gh,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),Z(gh,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var HB=Object.freeze({__proto__:null,ArcElement:sl,BarElement:gh,LineElement:Ei,PointElement:ph});const Kg=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],Y2=Kg.map(t=>t.replace("rgb(","rgba(").replace(")",", 0.5)"));function oS(t){return Kg[t%Kg.length]}function aS(t){return Y2[t%Y2.length]}function WB(t,e){return t.borderColor=oS(e),t.backgroundColor=aS(e),++e}function $B(t,e){return t.backgroundColor=t.data.map(()=>oS(e++)),e}function qB(t,e){return t.backgroundColor=t.data.map(()=>aS(e++)),e}function KB(t){let e=0;return(n,r)=>{const i=t.getDatasetMeta(r).controller;i instanceof Es?e=$B(n,e):i instanceof Sl?e=qB(n,e):i&&(e=WB(n,e))}}function X2(t){let e;for(e in t)if(t[e].borderColor||t[e].backgroundColor)return!0;return!1}function GB(t){return t&&(t.borderColor||t.backgroundColor)}function QB(){return ze.borderColor!=="rgba(0,0,0,0.1)"||ze.backgroundColor!=="rgba(0,0,0,0.1)"}var YB={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(t,e,n){if(!n.enabled)return;const{data:{datasets:r},options:i}=t.config,{elements:s}=i,o=X2(r)||GB(i)||s&&X2(s)||QB();if(!n.forceOverride&&o)return;const a=KB(t);r.forEach(a)}};function XB(t,e,n,r,i){const s=i.samples||r;if(s>=n)return t.slice(e,e+n);const o=[],a=(n-2)/(s-2);let l=0;const c=e+n-1;let u=e,d,f,p,m,v;for(o[l++]=t[u],d=0;d<s-2;d++){let E=0,_=0,x;const w=Math.floor((d+1)*a)+1+e,A=Math.min(Math.floor((d+2)*a)+1,n)+e,P=A-w;for(x=w;x<A;x++)E+=t[x].x,_+=t[x].y;E/=P,_/=P;const R=Math.floor(d*a)+1+e,C=Math.min(Math.floor((d+1)*a)+1,n)+e,{x:b,y:k}=t[u];for(p=m=-1,x=R;x<C;x++)m=.5*Math.abs((b-E)*(t[x].y-k)-(b-t[x].x)*(_-k)),m>p&&(p=m,f=t[x],v=x);o[l++]=f,u=v}return o[l++]=t[c],o}function JB(t,e,n,r){let i=0,s=0,o,a,l,c,u,d,f,p,m,v;const E=[],_=e+n-1,x=t[e].x,A=t[_].x-x;for(o=e;o<e+n;++o){a=t[o],l=(a.x-x)/A*r,c=a.y;const P=l|0;if(P===u)c<m?(m=c,d=o):c>v&&(v=c,f=o),i=(s*i+a.x)/++s;else{const R=o-1;if(!fe(d)&&!fe(f)){const C=Math.min(d,f),b=Math.max(d,f);C!==p&&C!==R&&E.push({...t[C],x:i}),b!==p&&b!==R&&E.push({...t[b],x:i})}o>0&&R!==p&&E.push(t[R]),E.push(a),u=P,s=0,m=v=c,d=f=p=o}}return E}function lS(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function J2(t){t.data.datasets.forEach(e=>{lS(e)})}function ZB(t,e){const n=e.length;let r=0,i;const{iScale:s}=t,{min:o,max:a,minDefined:l,maxDefined:c}=s.getUserBounds();return l&&(r=mt(kr(e,s.axis,o).lo,0,n-1)),c?i=mt(kr(e,s.axis,a).hi+1,r,n)-r:i=n-r,{start:r,count:i}}var eL={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,n)=>{if(!n.enabled){J2(t);return}const r=t.width;t.data.datasets.forEach((i,s)=>{const{_data:o,indexAxis:a}=i,l=t.getDatasetMeta(s),c=o||i.data;if(rl([a,t.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;const u=t.scales[l.xAxisID];if(u.type!=="linear"&&u.type!=="time"||t.options.parsing)return;let{start:d,count:f}=ZB(l,c);const p=n.threshold||4*r;if(f<=p){lS(i);return}fe(o)&&(i._data=c,delete i.data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(v){this._data=v}}));let m;switch(n.algorithm){case"lttb":m=XB(c,d,f,r,n);break;case"min-max":m=JB(c,d,f,r);break;default:throw new Error(`Unsupported decimation algorithm '${n.algorithm}'`)}i._decimated=m})},destroy(t){J2(t)}};function tL(t,e,n){const r=t.segments,i=t.points,s=e.points,o=[];for(const a of r){let{start:l,end:c}=a;c=wv(l,c,i);const u=Gg(n,i[l],i[c],a.loop);if(!e.segments){o.push({source:a,target:u,start:i[l],end:i[c]});continue}const d=WT(e,u);for(const f of d){const p=Gg(n,s[f.start],s[f.end],f.loop),m=HT(a,i,p);for(const v of m)o.push({source:v,target:f,start:{[n]:Z2(u,p,"start",Math.max)},end:{[n]:Z2(u,p,"end",Math.min)}})}}return o}function Gg(t,e,n,r){if(r)return;let i=e[t],s=n[t];return t==="angle"&&(i=fn(i),s=fn(s)),{property:t,start:i,end:s}}function nL(t,e){const{x:n=null,y:r=null}=t||{},i=e.points,s=[];return e.segments.forEach(({start:o,end:a})=>{a=wv(o,a,i);const l=i[o],c=i[a];r!==null?(s.push({x:l.x,y:r}),s.push({x:c.x,y:r})):n!==null&&(s.push({x:n,y:l.y}),s.push({x:n,y:c.y}))}),s}function wv(t,e,n){for(;e>t;e--){const r=n[e];if(!isNaN(r.x)&&!isNaN(r.y))break}return e}function Z2(t,e,n,r){return t&&e?r(t[n],e[n]):t?t[n]:e?e[n]:0}function cS(t,e){let n=[],r=!1;return Ve(t)?(r=!0,n=t):n=nL(t,e),n.length?new Ei({points:n,options:{tension:0},_loop:r,_fullLoop:r}):null}function eE(t){return t&&t.fill!==!1}function rL(t,e,n){let i=t[e].fill;const s=[e];let o;if(!n)return i;for(;i!==!1&&s.indexOf(i)===-1;){if(!Xe(i))return i;if(o=t[i],!o)return!1;if(o.visible)return i;s.push(i),i=o.fill}return!1}function iL(t,e,n){const r=lL(t);if(me(r))return isNaN(r.value)?!1:r;let i=parseFloat(r);return Xe(i)&&Math.floor(i)===i?sL(r[0],e,i,n):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function sL(t,e,n,r){return(t==="-"||t==="+")&&(n=e+n),n===e||n<0||n>=r?!1:n}function oL(t,e){let n=null;return t==="start"?n=e.bottom:t==="end"?n=e.top:me(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}function aL(t,e,n){let r;return t==="start"?r=n:t==="end"?r=e.options.reverse?e.min:e.max:me(t)?r=t.value:r=e.getBaseValue(),r}function lL(t){const e=t.options,n=e.fill;let r=he(n&&n.target,n);return r===void 0&&(r=!!e.backgroundColor),r===!1||r===null?!1:r===!0?"origin":r}function cL(t){const{scale:e,index:n,line:r}=t,i=[],s=r.segments,o=r.points,a=uL(e,n);a.push(cS({x:null,y:e.bottom},r));for(let l=0;l<s.length;l++){const c=s[l];for(let u=c.start;u<=c.end;u++)hL(i,o[u],a)}return new Ei({points:i,options:{}})}function uL(t,e){const n=[],r=t.getMatchingVisibleMetas("line");for(let i=0;i<r.length;i++){const s=r[i];if(s.index===e)break;s.hidden||n.unshift(s.dataset)}return n}function hL(t,e,n){const r=[];for(let i=0;i<n.length;i++){const s=n[i],{first:o,last:a,point:l}=dL(s,e,"x");if(!(!l||o&&a)){if(o)r.unshift(l);else if(t.push(l),!a)break}}t.push(...r)}function dL(t,e,n){const r=t.interpolate(e,n);if(!r)return{};const i=r[n],s=t.segments,o=t.points;let a=!1,l=!1;for(let c=0;c<s.length;c++){const u=s[c],d=o[u.start][n],f=o[u.end][n];if(Ir(i,d,f)){a=i===d,l=i===f;break}}return{first:a,last:l,point:r}}class uS{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,n,r){const{x:i,y:s,radius:o}=this;return n=n||{start:0,end:Be},e.arc(i,s,o,n.end,n.start,!0),!r.bounds}interpolate(e){const{x:n,y:r,radius:i}=this,s=e.angle;return{x:n+Math.cos(s)*i,y:r+Math.sin(s)*i,angle:s}}}function fL(t){const{chart:e,fill:n,line:r}=t;if(Xe(n))return pL(e,n);if(n==="stack")return cL(t);if(n==="shape")return!0;const i=gL(t);return i instanceof uS?i:cS(i,r)}function pL(t,e){const n=t.getDatasetMeta(e);return n&&t.isDatasetVisible(e)?n.dataset:null}function gL(t){return(t.scale||{}).getPointPositionForValue?xL(t):mL(t)}function mL(t){const{scale:e={},fill:n}=t,r=oL(n,e);if(Xe(r)){const i=e.isHorizontal();return{x:i?r:null,y:i?null:r}}return null}function xL(t){const{scale:e,fill:n}=t,r=e.options,i=e.getLabels().length,s=r.reverse?e.max:e.min,o=aL(n,e,s),a=[];if(r.grid.circular){const l=e.getPointPositionForValue(0,s);return new uS({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(o)})}for(let l=0;l<i;++l)a.push(e.getPointPositionForValue(l,o));return a}function P0(t,e,n){const r=fL(e),{line:i,scale:s,axis:o}=e,a=i.options,l=a.fill,c=a.backgroundColor,{above:u=c,below:d=c}=l||{};r&&i.points.length&&(uf(t,n),vL(t,{line:i,target:r,above:u,below:d,area:n,scale:s,axis:o}),hf(t))}function vL(t,e){const{line:n,target:r,above:i,below:s,area:o,scale:a}=e,l=n._loop?"angle":e.axis;t.save(),l==="x"&&s!==i&&(tE(t,r,o.top),nE(t,{line:n,target:r,color:i,scale:a,property:l}),t.restore(),t.save(),tE(t,r,o.bottom)),nE(t,{line:n,target:r,color:s,scale:a,property:l}),t.restore()}function tE(t,e,n){const{segments:r,points:i}=e;let s=!0,o=!1;t.beginPath();for(const a of r){const{start:l,end:c}=a,u=i[l],d=i[wv(l,c,i)];s?(t.moveTo(u.x,u.y),s=!1):(t.lineTo(u.x,n),t.lineTo(u.x,u.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(d.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function nE(t,e){const{line:n,target:r,property:i,color:s,scale:o}=e,a=tL(n,r,i);for(const{source:l,target:c,start:u,end:d}of a){const{style:{backgroundColor:f=s}={}}=l,p=r!==!0;t.save(),t.fillStyle=f,yL(t,o,p&&Gg(i,u,d)),t.beginPath();const m=!!n.pathSegment(t,l);let v;if(p){m?t.closePath():rE(t,r,d,i);const E=!!r.pathSegment(t,c,{move:m,reverse:!0});v=m&&E,v||rE(t,r,u,i)}t.closePath(),t.fill(v?"evenodd":"nonzero"),t.restore()}}function yL(t,e,n){const{top:r,bottom:i}=e.chart.chartArea,{property:s,start:o,end:a}=n||{};s==="x"&&(t.beginPath(),t.rect(o,r,a-o,i-r),t.clip())}function rE(t,e,n,r){const i=e.interpolate(n,r);i&&t.lineTo(i.x,i.y)}var _L={id:"filler",afterDatasetsUpdate(t,e,n){const r=(t.data.datasets||[]).length,i=[];let s,o,a,l;for(o=0;o<r;++o)s=t.getDatasetMeta(o),a=s.dataset,l=null,a&&a.options&&a instanceof Ei&&(l={visible:t.isDatasetVisible(o),index:o,fill:iL(a,o,r),chart:t,axis:s.controller.options.indexAxis,scale:s.vScale,line:a}),s.$filler=l,i.push(l);for(o=0;o<r;++o)l=i[o],!(!l||l.fill===!1)&&(l.fill=rL(i,o,n.propagate))},beforeDraw(t,e,n){const r=n.drawTime==="beforeDraw",i=t.getSortedVisibleDatasetMetas(),s=t.chartArea;for(let o=i.length-1;o>=0;--o){const a=i[o].$filler;a&&(a.line.updateControlPoints(s,a.axis),r&&a.fill&&P0(t.ctx,a,s))}},beforeDatasetsDraw(t,e,n){if(n.drawTime!=="beforeDatasetsDraw")return;const r=t.getSortedVisibleDatasetMetas();for(let i=r.length-1;i>=0;--i){const s=r[i].$filler;eE(s)&&P0(t.ctx,s,t.chartArea)}},beforeDatasetDraw(t,e,n){const r=e.meta.$filler;!eE(r)||n.drawTime!=="beforeDatasetDraw"||P0(t.ctx,r,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const iE=(t,e)=>{let{boxHeight:n=e,boxWidth:r=e}=t;return t.usePointStyle&&(n=Math.min(n,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(e,n)}},EL=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class sE extends $n{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,r){this.maxWidth=e,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=Re(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(r=>e.filter(r,this.chart.data))),e.sort&&(n=n.sort((r,i)=>e.sort(r,i,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,i=dt(r.font),s=i.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=iE(r,s);let c,u;n.font=i.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,s,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,i,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,n,r,i){const{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=i+a;let d=e;s.textAlign="left",s.textBaseline="middle";let f=-1,p=-u;return this.legendItems.forEach((m,v)=>{const E=r+n/2+s.measureText(m.text).width;(v===0||c[c.length-1]+E+2*a>o)&&(d+=u,c[c.length-(v>0?0:1)]=0,p+=u,f++),l[v]={left:0,top:p,row:f,width:E,height:i},c[c.length-1]+=E+a}),d}_fitCols(e,n,r,i){const{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-e;let d=a,f=0,p=0,m=0,v=0;return this.legendItems.forEach((E,_)=>{const{itemWidth:x,itemHeight:w}=wL(r,n,s,E,i);_>0&&p+w+2*a>u&&(d+=f+a,c.push({width:f,height:p}),m+=f+a,v++,f=p=0),l[_]={left:m,top:p,col:v,width:x,height:w},f=Math.max(f,x),p+=w+a}),d+=f,c.push({width:f,height:p}),d}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:i},rtl:s}}=this,o=Vo(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=Ft(r,this.left+i,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=Ft(r,this.left+i,this.right-this.lineWidths[a])),c.top+=this.top+e+i,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+i}else{let a=0,l=Ft(r,this.top+e+i,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=Ft(r,this.top+e+i,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+i,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;uf(e,this),this._draw(),hf(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:r,ctx:i}=this,{align:s,labels:o}=e,a=ze.color,l=Vo(e.rtl,this.left,this.width),c=dt(o.font),{padding:u}=o,d=c.size,f=d/2;let p;this.drawTitle(),i.textAlign=l.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=c.string;const{boxWidth:m,boxHeight:v,itemHeight:E}=iE(o,d),_=function(R,C,b){if(isNaN(m)||m<=0||isNaN(v)||v<0)return;i.save();const k=he(b.lineWidth,1);if(i.fillStyle=he(b.fillStyle,a),i.lineCap=he(b.lineCap,"butt"),i.lineDashOffset=he(b.lineDashOffset,0),i.lineJoin=he(b.lineJoin,"miter"),i.lineWidth=k,i.strokeStyle=he(b.strokeStyle,a),i.setLineDash(he(b.lineDash,[])),o.usePointStyle){const S={radius:v*Math.SQRT2/2,pointStyle:b.pointStyle,rotation:b.rotation,borderWidth:k},I=l.xPlus(R,m/2),N=C+f;DT(i,S,I,N,o.pointStyleWidth&&m)}else{const S=C+Math.max((d-v)/2,0),I=l.leftForLtr(R,m),N=Ts(b.borderRadius);i.beginPath(),Object.values(N).some(D=>D!==0)?ac(i,{x:I,y:S,w:m,h:v,radius:N}):i.rect(I,S,m,v),i.fill(),k!==0&&i.stroke()}i.restore()},x=function(R,C,b){Us(i,b.text,R,C+E/2,c,{strikethrough:b.hidden,textAlign:l.textAlign(b.textAlign)})},w=this.isHorizontal(),A=this._computeTitleHeight();w?p={x:Ft(s,this.left+u,this.right-r[0]),y:this.top+u+A,line:0}:p={x:this.left+u,y:Ft(s,this.top+A+u,this.bottom-n[0].height),line:0},VT(this.ctx,e.textDirection);const P=E+u;this.legendItems.forEach((R,C)=>{i.strokeStyle=R.fontColor,i.fillStyle=R.fontColor;const b=i.measureText(R.text).width,k=l.textAlign(R.textAlign||(R.textAlign=o.textAlign)),S=m+f+b;let I=p.x,N=p.y;l.setWidth(this.width),w?C>0&&I+S+u>this.right&&(N=p.y+=P,p.line++,I=p.x=Ft(s,this.left+u,this.right-r[p.line])):C>0&&N+P>this.bottom&&(I=p.x=I+n[p.line].width+u,p.line++,N=p.y=Ft(s,this.top+A+u,this.bottom-n[p.line].height));const D=l.x(I);if(_(D,N,R),I=U7(k,I+m+f,w?I+S:this.right,e.rtl),x(l.x(I),N,R),w)p.x+=S+u;else if(typeof R.text!="string"){const G=c.lineHeight;p.y+=hS(R,G)+u}else p.y+=P}),zT(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,r=dt(n.font),i=Ut(n.padding);if(!n.display)return;const s=Vo(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=r.size/2,c=i.top+l;let u,d=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),u=this.top+c,d=Ft(e.align,d,this.right-f);else{const m=this.columnSizes.reduce((v,E)=>Math.max(v,E.height),0);u=c+Ft(e.align,this.top,this.bottom-m-e.labels.padding-this._computeTitleHeight())}const p=Ft(a,d,d+f);o.textAlign=s.textAlign(fv(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=r.string,Us(o,n.text,p,u,r)}_computeTitleHeight(){const e=this.options.title,n=dt(e.font),r=Ut(e.padding);return e.display?n.lineHeight+r.height:0}_getLegendItemAt(e,n){let r,i,s;if(Ir(e,this.left,this.right)&&Ir(n,this.top,this.bottom)){for(s=this.legendHitBoxes,r=0;r<s.length;++r)if(i=s[r],Ir(e,i.left,i.left+i.width)&&Ir(n,i.top,i.top+i.height))return this.legendItems[r]}return null}handleEvent(e){const n=this.options;if(!AL(e.type,n))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const i=this._hoveredItem,s=EL(i,r);i&&!s&&Re(n.onLeave,[e,i,this],this),this._hoveredItem=r,r&&!s&&Re(n.onHover,[e,r,this],this)}else r&&Re(n.onClick,[e,r,this],this)}}function wL(t,e,n,r,i){const s=bL(r,t,e,n),o=CL(i,r,e.lineHeight);return{itemWidth:s,itemHeight:o}}function bL(t,e,n,r){let i=t.text;return i&&typeof i!="string"&&(i=i.reduce((s,o)=>s.length>o.length?s:o)),e+n.size/2+r.measureText(i).width}function CL(t,e,n){let r=t;return typeof e.text!="string"&&(r=hS(e,n)),r}function hS(t,e){const n=t.text?t.text.length:0;return e*n}function AL(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var TL={id:"legend",_element:sE,start(t,e,n){const r=t.legend=new sE({ctx:t.ctx,options:n,chart:t});Lt.configure(t,r,n),Lt.addBox(t,r)},stop(t){Lt.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const r=t.legend;Lt.configure(t,r,n),r.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const r=e.datasetIndex,i=n.chart;i.isDatasetVisible(r)?(i.hide(r),e.hidden=!0):(i.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:i,color:s,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),u=Ut(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:r||c.pointStyle,rotation:c.rotation,textAlign:i||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class bv extends $n{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const i=Ve(r.text)?r.text.length:1;this._padding=Ut(r.padding);const s=i*dt(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:r,bottom:i,right:s,options:o}=this,a=o.align;let l=0,c,u,d;return this.isHorizontal()?(u=Ft(a,r,s),d=n+e,c=s-r):(o.position==="left"?(u=r+e,d=Ft(a,i,n),l=Le*-.5):(u=s-e,d=Ft(a,n,i),l=Le*.5),c=i-n),{titleX:u,titleY:d,maxWidth:c,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const r=dt(n.font),s=r.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(s);Us(e,n.text,0,0,r,{color:n.color,maxWidth:l,rotation:c,textAlign:fv(n.align),textBaseline:"middle",translation:[o,a]})}}function SL(t,e){const n=new bv({ctx:t.ctx,options:e,chart:t});Lt.configure(t,n,e),Lt.addBox(t,n),t.titleBlock=n}var IL={id:"title",_element:bv,start(t,e,n){SL(t,n)},stop(t){const e=t.titleBlock;Lt.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const r=t.titleBlock;Lt.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Fu=new WeakMap;var kL={id:"subtitle",start(t,e,n){const r=new bv({ctx:t.ctx,options:n,chart:t});Lt.configure(t,r,n),Lt.addBox(t,r),Fu.set(t,r)},stop(t){Lt.removeBox(t,Fu.get(t)),Fu.delete(t)},beforeUpdate(t,e,n){const r=Fu.get(t);Lt.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const ol={average(t){if(!t.length)return!1;let e,n,r=new Set,i=0,s=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();r.add(l.x),i+=l.y,++s}}return s===0||r.size===0?!1:{x:[...r].reduce((a,l)=>a+l)/r.size,y:i/s}},nearest(t,e){if(!t.length)return!1;let n=e.x,r=e.y,i=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=t.length;s<o;++s){const l=t[s].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=Vg(e,c);u<i&&(i=u,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,r=l.y}return{x:n,y:r}}};function Kn(t,e){return e&&(Ve(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function vr(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function PL(t,e){const{element:n,datasetIndex:r,index:i}=e,s=t.getDatasetMeta(r).controller,{label:o,value:a}=s.getLabelAndValue(i);return{chart:t,label:o,parsed:s.getParsed(i),raw:t.data.datasets[r].data[i],formattedValue:a,dataset:s.getDataset(),dataIndex:i,datasetIndex:r,element:n}}function oE(t,e){const n=t.chart.ctx,{body:r,footer:i,title:s}=t,{boxWidth:o,boxHeight:a}=e,l=dt(e.bodyFont),c=dt(e.titleFont),u=dt(e.footerFont),d=s.length,f=i.length,p=r.length,m=Ut(e.padding);let v=m.height,E=0,_=r.reduce((A,P)=>A+P.before.length+P.lines.length+P.after.length,0);if(_+=t.beforeBody.length+t.afterBody.length,d&&(v+=d*c.lineHeight+(d-1)*e.titleSpacing+e.titleMarginBottom),_){const A=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;v+=p*A+(_-p)*l.lineHeight+(_-1)*e.bodySpacing}f&&(v+=e.footerMarginTop+f*u.lineHeight+(f-1)*e.footerSpacing);let x=0;const w=function(A){E=Math.max(E,n.measureText(A).width+x)};return n.save(),n.font=c.string,Ce(t.title,w),n.font=l.string,Ce(t.beforeBody.concat(t.afterBody),w),x=e.displayColors?o+2+e.boxPadding:0,Ce(r,A=>{Ce(A.before,w),Ce(A.lines,w),Ce(A.after,w)}),x=0,n.font=u.string,Ce(t.footer,w),n.restore(),E+=m.width,{width:E,height:v}}function RL(t,e){const{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}function DL(t,e,n,r){const{x:i,width:s}=r,o=n.caretSize+n.caretPadding;if(t==="left"&&i+s+o>e.width||t==="right"&&i-s-o<0)return!0}function NL(t,e,n,r){const{x:i,width:s}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return r==="center"?c=i<=(a+l)/2?"left":"right":i<=s/2?c="left":i>=o-s/2&&(c="right"),DL(c,t,e,n)&&(c="center"),c}function aE(t,e,n){const r=n.yAlign||e.yAlign||RL(t,n);return{xAlign:n.xAlign||e.xAlign||NL(t,e,n,r),yAlign:r}}function FL(t,e){let{x:n,width:r}=t;return e==="right"?n-=r:e==="center"&&(n-=r/2),n}function ML(t,e,n){let{y:r,height:i}=t;return e==="top"?r+=n:e==="bottom"?r-=i+n:r-=i/2,r}function lE(t,e,n,r){const{caretSize:i,caretPadding:s,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=i+s,{topLeft:u,topRight:d,bottomLeft:f,bottomRight:p}=Ts(o);let m=FL(e,a);const v=ML(e,l,c);return l==="center"?a==="left"?m+=c:a==="right"&&(m-=c):a==="left"?m-=Math.max(u,f)+i:a==="right"&&(m+=Math.max(d,p)+i),{x:mt(m,0,r.width-e.width),y:mt(v,0,r.height-e.height)}}function Mu(t,e,n){const r=Ut(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-r.right:t.x+r.left}function cE(t){return Kn([],vr(t))}function OL(t,e,n){return Ji(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function uE(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const dS={beforeTitle:mr,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:mr,beforeBody:mr,beforeLabel:mr,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return fe(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:mr,afterBody:mr,beforeFooter:mr,footer:mr,afterFooter:mr};function Zt(t,e,n,r){const i=t[e].call(n,r);return typeof i>"u"?dS[e].call(n,r):i}class Qg extends $n{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,r=this.options.setContext(this.getContext()),i=r.enabled&&n.options.animation&&r.animations,s=new $T(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=OL(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:r}=n,i=Zt(r,"beforeTitle",this,e),s=Zt(r,"title",this,e),o=Zt(r,"afterTitle",this,e);let a=[];return a=Kn(a,vr(i)),a=Kn(a,vr(s)),a=Kn(a,vr(o)),a}getBeforeBody(e,n){return cE(Zt(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:r}=n,i=[];return Ce(e,s=>{const o={before:[],lines:[],after:[]},a=uE(r,s);Kn(o.before,vr(Zt(a,"beforeLabel",this,s))),Kn(o.lines,Zt(a,"label",this,s)),Kn(o.after,vr(Zt(a,"afterLabel",this,s))),i.push(o)}),i}getAfterBody(e,n){return cE(Zt(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:r}=n,i=Zt(r,"beforeFooter",this,e),s=Zt(r,"footer",this,e),o=Zt(r,"afterFooter",this,e);let a=[];return a=Kn(a,vr(i)),a=Kn(a,vr(s)),a=Kn(a,vr(o)),a}_createItems(e){const n=this._active,r=this.chart.data,i=[],s=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(PL(this.chart,n[l]));return e.filter&&(a=a.filter((u,d,f)=>e.filter(u,d,f,r))),e.itemSort&&(a=a.sort((u,d)=>e.itemSort(u,d,r))),Ce(a,u=>{const d=uE(e.callbacks,u);i.push(Zt(d,"labelColor",this,u)),s.push(Zt(d,"labelPointStyle",this,u)),o.push(Zt(d,"labelTextColor",this,u))}),this.labelColors=i,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const r=this.options.setContext(this.getContext()),i=this._active;let s,o=[];if(!i.length)this.opacity!==0&&(s={opacity:0});else{const a=ol[r.position].call(this,i,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const l=this._size=oE(this,r),c=Object.assign({},a,l),u=aE(this.chart,r,c),d=lE(r,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,s={opacity:1,x:d.x,y:d.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,r,i){const s=this.getCaretPosition(e,r,i);n.lineTo(s.x1,s.y1),n.lineTo(s.x2,s.y2),n.lineTo(s.x3,s.y3)}getCaretPosition(e,n,r){const{xAlign:i,yAlign:s}=this,{caretSize:o,cornerRadius:a}=r,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:d}=Ts(a),{x:f,y:p}=e,{width:m,height:v}=n;let E,_,x,w,A,P;return s==="center"?(A=p+v/2,i==="left"?(E=f,_=E-o,w=A+o,P=A-o):(E=f+m,_=E+o,w=A-o,P=A+o),x=E):(i==="left"?_=f+Math.max(l,u)+o:i==="right"?_=f+m-Math.max(c,d)-o:_=this.caretX,s==="top"?(w=p,A=w-o,E=_-o,x=_+o):(w=p+v,A=w+o,E=_+o,x=_-o),P=w),{x1:E,x2:_,x3:x,y1:w,y2:A,y3:P}}drawTitle(e,n,r){const i=this.title,s=i.length;let o,a,l;if(s){const c=Vo(r.rtl,this.x,this.width);for(e.x=Mu(this,r.titleAlign,r),n.textAlign=c.textAlign(r.titleAlign),n.textBaseline="middle",o=dt(r.titleFont),a=r.titleSpacing,n.fillStyle=r.titleColor,n.font=o.string,l=0;l<s;++l)n.fillText(i[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===s&&(e.y+=r.titleMarginBottom-a)}}_drawColorBox(e,n,r,i,s){const o=this.labelColors[r],a=this.labelPointStyles[r],{boxHeight:l,boxWidth:c}=s,u=dt(s.bodyFont),d=Mu(this,"left",s),f=i.x(d),p=l<u.lineHeight?(u.lineHeight-l)/2:0,m=n.y+p;if(s.usePointStyle){const v={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},E=i.leftForLtr(f,c)+c/2,_=m+l/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,Ug(e,v,E,_),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,Ug(e,v,E,_)}else{e.lineWidth=me(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const v=i.leftForLtr(f,c),E=i.leftForLtr(i.xPlus(f,1),c-2),_=Ts(o.borderRadius);Object.values(_).some(x=>x!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,ac(e,{x:v,y:m,w:c,h:l,radius:_}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),ac(e,{x:E,y:m+1,w:c-2,h:l-2,radius:_}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(v,m,c,l),e.strokeRect(v,m,c,l),e.fillStyle=o.backgroundColor,e.fillRect(E,m+1,c-2,l-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,n,r){const{body:i}=this,{bodySpacing:s,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=r,d=dt(r.bodyFont);let f=d.lineHeight,p=0;const m=Vo(r.rtl,this.x,this.width),v=function(b){n.fillText(b,m.x(e.x+p),e.y+f/2),e.y+=f+s},E=m.textAlign(o);let _,x,w,A,P,R,C;for(n.textAlign=o,n.textBaseline="middle",n.font=d.string,e.x=Mu(this,E,r),n.fillStyle=r.bodyColor,Ce(this.beforeBody,v),p=a&&E!=="right"?o==="center"?c/2+u:c+2+u:0,A=0,R=i.length;A<R;++A){for(_=i[A],x=this.labelTextColors[A],n.fillStyle=x,Ce(_.before,v),w=_.lines,a&&w.length&&(this._drawColorBox(n,e,A,m,r),f=Math.max(d.lineHeight,l)),P=0,C=w.length;P<C;++P)v(w[P]),f=d.lineHeight;Ce(_.after,v)}p=0,f=d.lineHeight,Ce(this.afterBody,v),e.y-=s}drawFooter(e,n,r){const i=this.footer,s=i.length;let o,a;if(s){const l=Vo(r.rtl,this.x,this.width);for(e.x=Mu(this,r.footerAlign,r),e.y+=r.footerMarginTop,n.textAlign=l.textAlign(r.footerAlign),n.textBaseline="middle",o=dt(r.footerFont),n.fillStyle=r.footerColor,n.font=o.string,a=0;a<s;++a)n.fillText(i[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+r.footerSpacing}}drawBackground(e,n,r,i){const{xAlign:s,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:u}=r,{topLeft:d,topRight:f,bottomLeft:p,bottomRight:m}=Ts(i.cornerRadius);n.fillStyle=i.backgroundColor,n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.beginPath(),n.moveTo(a+d,l),o==="top"&&this.drawCaret(e,n,r,i),n.lineTo(a+c-f,l),n.quadraticCurveTo(a+c,l,a+c,l+f),o==="center"&&s==="right"&&this.drawCaret(e,n,r,i),n.lineTo(a+c,l+u-m),n.quadraticCurveTo(a+c,l+u,a+c-m,l+u),o==="bottom"&&this.drawCaret(e,n,r,i),n.lineTo(a+p,l+u),n.quadraticCurveTo(a,l+u,a,l+u-p),o==="center"&&s==="left"&&this.drawCaret(e,n,r,i),n.lineTo(a,l+d),n.quadraticCurveTo(a,l,a+d,l),n.closePath(),n.fill(),i.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,r=this.$animations,i=r&&r.x,s=r&&r.y;if(i||s){const o=ol[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=oE(this,e),l=Object.assign({},o,this._size),c=aE(n,e,l),u=lE(e,l,c,n);(i._to!==u.x||s._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const i={width:this.width,height:this.height},s={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=Ut(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=r,this.drawBackground(s,e,i,n),VT(e,n.textDirection),s.y+=o.top,this.drawTitle(s,e,n),this.drawBody(s,e,n),this.drawFooter(s,e,n),zT(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const r=this._active,i=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),s=!ad(r,i),o=this._positionChanged(i,n);(s||o)&&(this._active=i,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,s=this._active||[],o=this._getActiveElements(e,s,n,r),a=this._positionChanged(o,e),l=n||!ad(o,s)||a;return l&&(this._active=o,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,r,i){const s=this.options;if(e.type==="mouseout")return[];if(!i)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,s.mode,s,r);return s.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:r,caretY:i,options:s}=this,o=ol[s.position].call(this,e,n);return o!==!1&&(r!==o.x||i!==o.y)}}Z(Qg,"positioners",ol);var BL={id:"tooltip",_element:Qg,positioners:ol,afterInit(t,e,n){n&&(t.tooltip=new Qg({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:dS},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},LL=Object.freeze({__proto__:null,Colors:YB,Decimation:eL,Filler:_L,Legend:TL,SubTitle:kL,Title:IL,Tooltip:BL});const jL=(t,e,n,r)=>(typeof e=="string"?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function VL(t,e,n,r){const i=t.indexOf(e);if(i===-1)return jL(t,e,n,r);const s=t.lastIndexOf(e);return i!==s?n:i}const zL=(t,e)=>t===null?null:mt(Math.round(t),0,e);function hE(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class Yg extends Ys{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const r=this.getLabels();for(const{index:i,label:s}of n)r[i]===s&&r.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(fe(e))return null;const r=this.getLabels();return n=isFinite(n)&&r[n]===e?n:VL(r,e,he(n,e),this._addedLabels),zL(n,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),n||(i=this.getLabels().length-1)),this.min=r,this.max=i}buildTicks(){const e=this.min,n=this.max,r=this.options.offset,i=[];let s=this.getLabels();s=e===0&&n===s.length-1?s:s.slice(e,n+1),this._valueRange=Math.max(s.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=e;o<=n;o++)i.push({value:o});return i}getLabelForValue(e){return hE.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}Z(Yg,"id","category"),Z(Yg,"defaults",{ticks:{callback:hE}});function UL(t,e){const n=[],{bounds:i,step:s,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:d,includeBounds:f}=t,p=s||1,m=u-1,{min:v,max:E}=e,_=!fe(o),x=!fe(a),w=!fe(c),A=(E-v)/(d+1);let P=o2((E-v)/m/p)*p,R,C,b,k;if(P<1e-14&&!_&&!x)return[{value:v},{value:E}];k=Math.ceil(E/P)-Math.floor(v/P),k>m&&(P=o2(k*P/m/p)*p),fe(l)||(R=Math.pow(10,l),P=Math.ceil(P*R)/R),i==="ticks"?(C=Math.floor(v/P)*P,b=Math.ceil(E/P)*P):(C=v,b=E),_&&x&&s&&M7((a-o)/s,P/1e3)?(k=Math.round(Math.min((a-o)/P,u)),P=(a-o)/k,C=o,b=a):w?(C=_?o:C,b=x?a:b,k=c-1,P=(b-C)/k):(k=(b-C)/P,Cl(k,Math.round(k),P/1e3)?k=Math.round(k):k=Math.ceil(k));const S=Math.max(a2(P),a2(C));R=Math.pow(10,fe(l)?S:l),C=Math.round(C*R)/R,b=Math.round(b*R)/R;let I=0;for(_&&(f&&C!==o?(n.push({value:o}),C<o&&I++,Cl(Math.round((C+I*P)*R)/R,o,dE(o,A,t))&&I++):C<o&&I++);I<k;++I){const N=Math.round((C+I*P)*R)/R;if(x&&N>a)break;n.push({value:N})}return x&&f&&b!==a?n.length&&Cl(n[n.length-1].value,a,dE(a,A,t))?n[n.length-1].value=a:n.push({value:a}):(!x||b===a)&&n.push({value:b}),n}function dE(t,e,{horizontal:n,minRotation:r}){const i=Ln(r),s=(n?Math.sin(i):Math.cos(i))||.001,o=.75*e*(""+t).length;return Math.min(e/s,o)}class pd extends Ys{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return fe(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds();let{min:i,max:s}=this;const o=l=>i=n?i:l,a=l=>s=r?s:l;if(e){const l=or(i),c=or(s);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(i===s){let l=s===0?1:Math.abs(s*.05);a(s+l),e||o(i-l)}this.min=i,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:r}=e,i;return r?(i=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),n=n||11),n&&(i=Math.min(n,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const i={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},s=this._range||this,o=UL(i,s);return e.bounds==="ticks"&&bT(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const i=(r-n)/Math.max(e.length-1,1)/2;n-=i,r+=i}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(e){return Rc(e,this.chart.options.locale,this.options.ticks.format)}}class Xg extends pd{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=Xe(e)?e:0,this.max=Xe(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,r=Ln(this.options.ticks.minRotation),i=(e?Math.sin(r):Math.cos(r))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,s.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}Z(Xg,"id","linear"),Z(Xg,"defaults",{ticks:{callback:cf.formatters.numeric}});const cc=t=>Math.floor(_i(t)),us=(t,e)=>Math.pow(10,cc(t)+e);function fE(t){return t/Math.pow(10,cc(t))===1}function pE(t,e,n){const r=Math.pow(10,n),i=Math.floor(t/r);return Math.ceil(e/r)-i}function HL(t,e){const n=e-t;let r=cc(n);for(;pE(t,e,r)>10;)r++;for(;pE(t,e,r)<10;)r--;return Math.min(r,cc(t))}function WL(t,{min:e,max:n}){e=hn(t.min,e);const r=[],i=cc(e);let s=HL(e,n),o=s<0?Math.pow(10,Math.abs(s)):1;const a=Math.pow(10,s),l=i>s?Math.pow(10,i):0,c=Math.round((e-l)*o)/o,u=Math.floor((e-l)/a/10)*a*10;let d=Math.floor((c-u)/Math.pow(10,s)),f=hn(t.min,Math.round((l+u+d*Math.pow(10,s))*o)/o);for(;f<n;)r.push({value:f,major:fE(f),significand:d}),d>=10?d=d<15?15:20:d++,d>=20&&(s++,d=2,o=s>=0?1:o),f=Math.round((l+u+d*Math.pow(10,s))*o)/o;const p=hn(t.max,f);return r.push({value:p,major:fE(p),significand:d}),r}class Jg extends Ys{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,n){const r=pd.prototype.parse.apply(this,[e,n]);if(r===0){this._zero=!0;return}return Xe(r)&&r>0?r:null}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=Xe(e)?Math.max(0,e):null,this.max=Xe(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Xe(this._userMin)&&(this.min=e===us(this.min,0)?us(this.min,-1):us(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let r=this.min,i=this.max;const s=a=>r=e?r:a,o=a=>i=n?i:a;r===i&&(r<=0?(s(1),o(10)):(s(us(r,-1)),o(us(i,1)))),r<=0&&s(us(i,-1)),i<=0&&o(us(r,1)),this.min=r,this.max=i}buildTicks(){const e=this.options,n={min:this._userMin,max:this._userMax},r=WL(n,this);return e.bounds==="ticks"&&bT(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}getLabelForValue(e){return e===void 0?"0":Rc(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=_i(e),this._valueRange=_i(this.max)-_i(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(_i(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const n=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+n*this._valueRange)}}Z(Jg,"id","logarithmic"),Z(Jg,"defaults",{ticks:{callback:cf.formatters.logarithmic,major:{enabled:!0}}});function Zg(t){const e=t.ticks;if(e.display&&t.display){const n=Ut(e.backdropPadding);return he(e.font&&e.font.size,ze.font.size)+n.height}return 0}function $L(t,e,n){return n=Ve(n)?n:[n],{w:J7(t,e.string,n),h:n.length*e.lineHeight}}function gE(t,e,n,r,i){return t===r||t===i?{start:e-n/2,end:e+n/2}:t<r||t>i?{start:e-n,end:e}:{start:e,end:e+n}}function qL(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),r=[],i=[],s=t._pointLabels.length,o=t.options.pointLabels,a=o.centerPointLabels?Le/s:0;for(let l=0;l<s;l++){const c=o.setContext(t.getPointLabelContext(l));i[l]=c.padding;const u=t.getPointPosition(l,t.drawingArea+i[l],a),d=dt(c.font),f=$L(t.ctx,d,t._pointLabels[l]);r[l]=f;const p=fn(t.getIndexAngle(l)+a),m=Math.round(hv(p)),v=gE(m,u.x,f.w,0,180),E=gE(m,u.y,f.h,90,270);KL(n,e,p,v,E)}t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=YL(t,r,i)}function KL(t,e,n,r,i){const s=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n));let a=0,l=0;r.start<e.l?(a=(e.l-r.start)/s,t.l=Math.min(t.l,e.l-a)):r.end>e.r&&(a=(r.end-e.r)/s,t.r=Math.max(t.r,e.r+a)),i.start<e.t?(l=(e.t-i.start)/o,t.t=Math.min(t.t,e.t-l)):i.end>e.b&&(l=(i.end-e.b)/o,t.b=Math.max(t.b,e.b+l))}function GL(t,e,n){const r=t.drawingArea,{extra:i,additionalAngle:s,padding:o,size:a}=n,l=t.getPointPosition(e,r+i+o,s),c=Math.round(hv(fn(l.angle+st))),u=ZL(l.y,a.h,c),d=XL(c),f=JL(l.x,a.w,d);return{visible:!0,x:l.x,y:u,textAlign:d,left:f,top:u,right:f+a.w,bottom:u+a.h}}function QL(t,e){if(!e)return!0;const{left:n,top:r,right:i,bottom:s}=t;return!(Pr({x:n,y:r},e)||Pr({x:n,y:s},e)||Pr({x:i,y:r},e)||Pr({x:i,y:s},e))}function YL(t,e,n){const r=[],i=t._pointLabels.length,s=t.options,{centerPointLabels:o,display:a}=s.pointLabels,l={extra:Zg(s)/2,additionalAngle:o?Le/i:0};let c;for(let u=0;u<i;u++){l.padding=n[u],l.size=e[u];const d=GL(t,u,l);r.push(d),a==="auto"&&(d.visible=QL(d,c),d.visible&&(c=d))}return r}function XL(t){return t===0||t===180?"center":t<180?"left":"right"}function JL(t,e,n){return n==="right"?t-=e:n==="center"&&(t-=e/2),t}function ZL(t,e,n){return n===90||n===270?t-=e/2:(n>270||n<90)&&(t-=e),t}function ej(t,e,n){const{left:r,top:i,right:s,bottom:o}=n,{backdropColor:a}=e;if(!fe(a)){const l=Ts(e.borderRadius),c=Ut(e.backdropPadding);t.fillStyle=a;const u=r-c.left,d=i-c.top,f=s-r+c.width,p=o-i+c.height;Object.values(l).some(m=>m!==0)?(t.beginPath(),ac(t,{x:u,y:d,w:f,h:p,radius:l}),t.fill()):t.fillRect(u,d,f,p)}}function tj(t,e){const{ctx:n,options:{pointLabels:r}}=t;for(let i=e-1;i>=0;i--){const s=t._pointLabelItems[i];if(!s.visible)continue;const o=r.setContext(t.getPointLabelContext(i));ej(n,o,s);const a=dt(o.font),{x:l,y:c,textAlign:u}=s;Us(n,t._pointLabels[i],l,c+a.lineHeight/2,a,{color:o.color,textAlign:u,textBaseline:"middle"})}}function fS(t,e,n,r){const{ctx:i}=t;if(n)i.arc(t.xCenter,t.yCenter,e,0,Be);else{let s=t.getPointPosition(0,e);i.moveTo(s.x,s.y);for(let o=1;o<r;o++)s=t.getPointPosition(o,e),i.lineTo(s.x,s.y)}}function nj(t,e,n,r,i){const s=t.ctx,o=e.circular,{color:a,lineWidth:l}=e;!o&&!r||!a||!l||n<0||(s.save(),s.strokeStyle=a,s.lineWidth=l,s.setLineDash(i.dash||[]),s.lineDashOffset=i.dashOffset,s.beginPath(),fS(t,n,o,r),s.closePath(),s.stroke(),s.restore())}function rj(t,e,n){return Ji(t,{label:n,index:e,type:"pointLabel"})}class al extends pd{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=Ut(Zg(this.options)/2),n=this.width=this.maxWidth-e.width,r=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+n/2+e.left),this.yCenter=Math.floor(this.top+r/2+e.top),this.drawingArea=Math.floor(Math.min(n,r)/2)}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!1);this.min=Xe(e)&&!isNaN(e)?e:0,this.max=Xe(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Zg(this.options))}generateTickLabels(e){pd.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((n,r)=>{const i=Re(this.options.pointLabels.callback,[n,r],this);return i||i===0?i:""}).filter((n,r)=>this.chart.getDataVisibility(r))}fit(){const e=this.options;e.display&&e.pointLabels.display?qL(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,n,r,i){this.xCenter+=Math.floor((e-n)/2),this.yCenter+=Math.floor((r-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,n,r,i))}getIndexAngle(e){const n=Be/(this._pointLabels.length||1),r=this.options.startAngle||0;return fn(e*n+Ln(r))}getDistanceFromCenterForValue(e){if(fe(e))return NaN;const n=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*n:(e-this.min)*n}getValueForDistanceFromCenter(e){if(fe(e))return NaN;const n=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-n:this.min+n}getPointLabelContext(e){const n=this._pointLabels||[];if(e>=0&&e<n.length){const r=n[e];return rj(this.getContext(),e,r)}}getPointPosition(e,n,r=0){const i=this.getIndexAngle(e)-st+r;return{x:Math.cos(i)*n+this.xCenter,y:Math.sin(i)*n+this.yCenter,angle:i}}getPointPositionForValue(e,n){return this.getPointPosition(e,this.getDistanceFromCenterForValue(n))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:n,top:r,right:i,bottom:s}=this._pointLabelItems[e];return{left:n,top:r,right:i,bottom:s}}drawBackground(){const{backgroundColor:e,grid:{circular:n}}=this.options;if(e){const r=this.ctx;r.save(),r.beginPath(),fS(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),r.closePath(),r.fillStyle=e,r.fill(),r.restore()}}drawGrid(){const e=this.ctx,n=this.options,{angleLines:r,grid:i,border:s}=n,o=this._pointLabels.length;let a,l,c;if(n.pointLabels.display&&tj(this,o),i.display&&this.ticks.forEach((u,d)=>{if(d!==0||d===0&&this.min<0){l=this.getDistanceFromCenterForValue(u.value);const f=this.getContext(d),p=i.setContext(f),m=s.setContext(f);nj(this,p,l,o,m)}}),r.display){for(e.save(),a=o-1;a>=0;a--){const u=r.setContext(this.getPointLabelContext(a)),{color:d,lineWidth:f}=u;!f||!d||(e.lineWidth=f,e.strokeStyle=d,e.setLineDash(u.borderDash),e.lineDashOffset=u.borderDashOffset,l=this.getDistanceFromCenterForValue(n.reverse?this.min:this.max),c=this.getPointPosition(a,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(c.x,c.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,n=this.options,r=n.ticks;if(!r.display)return;const i=this.getIndexAngle(0);let s,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(i),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&this.min>=0&&!n.reverse)return;const c=r.setContext(this.getContext(l)),u=dt(c.font);if(s=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){e.font=u.string,o=e.measureText(a.label).width,e.fillStyle=c.backdropColor;const d=Ut(c.backdropPadding);e.fillRect(-o/2-d.left,-s-u.size/2-d.top,o+d.width,u.size+d.height)}Us(e,a.label,0,-s,u,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),e.restore()}drawTitle(){}}Z(al,"id","radialLinear"),Z(al,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:cf.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),Z(al,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),Z(al,"descriptors",{angleLines:{_fallback:"grid"}});const pf={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},nn=Object.keys(pf);function mE(t,e){return t-e}function xE(t,e){if(fe(e))return null;const n=t._adapter,{parser:r,round:i,isoWeekday:s}=t._parseOpts;let o=e;return typeof r=="function"&&(o=r(o)),Xe(o)||(o=typeof r=="string"?n.parse(o,r):n.parse(o)),o===null?null:(i&&(o=i==="week"&&(na(s)||s===!0)?n.startOf(o,"isoWeek",s):n.startOf(o,i)),+o)}function vE(t,e,n,r){const i=nn.length;for(let s=nn.indexOf(t);s<i-1;++s){const o=pf[nn[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=r)return nn[s]}return nn[i-1]}function ij(t,e,n,r,i){for(let s=nn.length-1;s>=nn.indexOf(n);s--){const o=nn[s];if(pf[o].common&&t._adapter.diff(i,r,o)>=e-1)return o}return nn[n?nn.indexOf(n):0]}function sj(t){for(let e=nn.indexOf(t)+1,n=nn.length;e<n;++e)if(pf[nn[e]].common)return nn[e]}function yE(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:r,hi:i}=dv(n,e),s=n[r]>=e?n[r]:n[i];t[s]=!0}}function oj(t,e,n,r){const i=t._adapter,s=+i.startOf(e[0].value,r),o=e[e.length-1].value;let a,l;for(a=s;a<=o;a=+i.add(a,1,r))l=n[a],l>=0&&(e[l].major=!0);return e}function _E(t,e,n){const r=[],i={},s=e.length;let o,a;for(o=0;o<s;++o)a=e[o],i[a]=o,r.push({value:a,major:!1});return s===0||!n?r:oj(t,r,i,n)}class uc extends Ys{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const r=e.time||(e.time={}),i=this._adapter=new pO._date(e.adapters.date);i.init(n),bl(r.displayFormats,i.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:xE(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,r=e.time.unit||"day";let{min:i,max:s,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(i=Math.min(i,c.min)),!a&&!isNaN(c.max)&&(s=Math.max(s,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),i=Xe(i)&&!isNaN(i)?i:+n.startOf(Date.now(),r),s=Xe(s)&&!isNaN(s)?s:+n.endOf(Date.now(),r)+1,this.min=Math.min(i,s-1),this.max=Math.max(i+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],r=e[e.length-1]),{min:n,max:r}}buildTicks(){const e=this.options,n=e.time,r=e.ticks,i=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const s=this.min,o=this.max,a=j7(i,s,o);return this._unit=n.unit||(r.autoSkip?vE(n.minUnit,this.min,this.max,this._getLabelCapacity(s)):ij(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:sj(this._unit),this.initOffsets(i),e.reverse&&a.reverse(),_E(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,r=0,i,s;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),e.length===1?n=1-i:n=(this.getDecimalForValue(e[1])-i)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?r=s:r=(s-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=mt(n,0,o),r=mt(r,0,o),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const e=this._adapter,n=this.min,r=this.max,i=this.options,s=i.time,o=s.unit||vE(s.minUnit,n,r,this._getLabelCapacity(n)),a=he(i.ticks.stepSize,1),l=o==="week"?s.isoWeekday:!1,c=na(l)||l===!0,u={};let d=n,f,p;if(c&&(d=+e.startOf(d,"isoWeek",l)),d=+e.startOf(d,c?"day":o),e.diff(r,n,o)>1e5*a)throw new Error(n+" and "+r+" are too far apart with stepSize of "+a+" "+o);const m=i.ticks.source==="data"&&this.getDataTimestamps();for(f=d,p=0;f<r;f=+e.add(f,a,o),p++)yE(u,f,m);return(f===r||i.bounds==="ticks"||p===1)&&yE(u,f,m),Object.keys(u).sort(mE).map(v=>+v)}getLabelForValue(e){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(e,r.tooltipFormat):n.format(e,r.displayFormats.datetime)}format(e,n){const i=this.options.time.displayFormats,s=this._unit,o=n||i[s];return this._adapter.format(e,o)}_tickFormatFunction(e,n,r,i){const s=this.options,o=s.ticks.callback;if(o)return Re(o,[e,n,r],this);const a=s.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],d=c&&a[c],f=r[n],p=c&&d&&f&&f.major;return this._adapter.format(e,i||(p?d:u))}generateTickLabels(e){let n,r,i;for(n=0,r=e.length;n<r;++n)i=e[n],i.label=this._tickFormatFunction(i.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,r=this.ctx.measureText(e).width,i=Ln(this.isHorizontal()?n.maxRotation:n.minRotation),s=Math.cos(i),o=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:r*s+a*o,h:r*o+a*s}}_getLabelCapacity(e){const n=this.options.time,r=n.displayFormats,i=r[n.unit]||r.millisecond,s=this._tickFormatFunction(e,0,_E(this,[e],this._majorUnit),i),o=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,r;if(e.length)return e;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(n=0,r=i.length;n<r;++n)e=e.concat(i[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,r;if(e.length)return e;const i=this.getLabels();for(n=0,r=i.length;n<r;++n)e.push(xE(this,i[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return TT(e.sort(mE))}}Z(uc,"id","time"),Z(uc,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Ou(t,e,n){let r=0,i=t.length-1,s,o,a,l;n?(e>=t[r].pos&&e<=t[i].pos&&({lo:r,hi:i}=kr(t,"pos",e)),{pos:s,time:a}=t[r],{pos:o,time:l}=t[i]):(e>=t[r].time&&e<=t[i].time&&({lo:r,hi:i}=kr(t,"time",e)),{time:s,pos:a}=t[r],{time:o,pos:l}=t[i]);const c=o-s;return c?a+(l-a)*(e-s)/c:a}class em extends uc{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=Ou(n,this.min),this._tableRange=Ou(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:r}=this,i=[],s=[];let o,a,l,c,u;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=r&&i.push(c);if(i.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(o=0,a=i.length;o<a;++o)u=i[o+1],l=i[o-1],c=i[o],Math.round((u+l)/2)!==c&&s.push({time:c,pos:o/(a-1)});return s}_generate(){const e=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((i,s)=>i-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?e=this.normalize(n.concat(r)):e=n.length?n:r,e=this._cache.all=e,e}getDecimalForValue(e){return(Ou(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return Ou(this._table,r*this._tableRange+this._minPos,!0)}}Z(em,"id","timeseries"),Z(em,"defaults",uc.defaults);var aj=Object.freeze({__proto__:null,CategoryScale:Yg,LinearScale:Xg,LogarithmicScale:Jg,RadialLinearScale:al,TimeScale:uc,TimeSeriesScale:em});const lj=[fO,HB,LL,aj];wr.register(...lj);const cj=({salesData:t,viewMode:e})=>{const n=M.useRef(null),r=M.useRef(null);return M.useEffect(()=>{if(!t||t.length===0)return;const i=t.map(a=>new Date(a.date).toLocaleDateString("en-IN",{day:"2-digit",month:"short"})),s=t.map(a=>e==="revenue"?a.totalRevenue:a.totalProfit);r.current&&r.current.destroy();const o=n.current.getContext("2d");return r.current=new wr(o,{type:"bar",data:{labels:i,datasets:[{label:e==="revenue"?"Revenue ()":"Profit ()",data:s,backgroundColor:e==="revenue"?"rgba(251, 165, 24, 0.7)":"rgba(168, 156, 41, 0.7)",borderColor:e==="revenue"?"rgb(251, 165, 24)":"rgb(168, 156, 41)",borderWidth:1,borderRadius:4}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0,position:"top"},tooltip:{callbacks:{label:a=>{let l=a.dataset.label||"";return l&&(l+=": "),a.parsed.y!==null&&(l+=new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(a.parsed.y)),l}}}},scales:{x:{grid:{display:!1}},y:{beginAtZero:!0,ticks:{callback:a=>a>=1e3?""+a/1e3+"K":""+a}}}}}),()=>{r.current&&r.current.destroy()}},[t,e]),!t||t.length===0?g.jsx("div",{className:"no-data",children:"No sales data available for the selected period"}):g.jsx("div",{className:"sales-chart-container",children:g.jsx("canvas",{ref:n})})},uj=({items:t,viewMode:e})=>{if(!t||t.length===0)return g.jsx("div",{className:"no-data",children:"No sales data available"});const n=Math.max(...t.map(r=>e==="revenue"?r.revenue:r.profit));return g.jsx("div",{className:"top-items-container",children:t.map((r,i)=>{const s=e==="revenue"?r.revenue:r.profit,o=s/n*100;return g.jsxs("div",{className:"top-item",children:[g.jsxs("div",{className:"item-info",children:[g.jsx("div",{className:"item-rank",children:i+1}),g.jsxs("div",{className:"item-details",children:[g.jsx("h4",{className:"item-name",children:r.name}),g.jsxs("p",{className:"item-sold",children:[r.quantitySold," units sold"]})]})]}),g.jsxs("div",{className:"item-value-container",children:[g.jsx("div",{className:"item-bar-container",children:g.jsx("div",{className:"item-bar",style:{width:`${o}%`,backgroundColor:e==="revenue"?"var(--secondary)":"var(--highlight)"}})}),g.jsxs("div",{className:"item-value",children:["",s.toFixed(0)]})]})]},r.itemId||i)})})},hj=({transactions:t})=>{if(!t||t.length===0)return g.jsx("div",{className:"no-data",children:"No transaction data available"});const e=i=>new Date(i).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}),n=i=>new Date(i).toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"}),r=i=>i.length===1?i[0].name:`${i[0].name} + ${i.length-1} more`;return g.jsx("div",{className:"transactions-table-container",children:g.jsxs("table",{className:"transactions-table",children:[g.jsx("thead",{children:g.jsxs("tr",{children:[g.jsx("th",{children:"Date & Time"}),g.jsx("th",{children:"Items"}),g.jsx("th",{children:"Type"}),g.jsx("th",{children:"Amount"})]})}),g.jsx("tbody",{children:t.map(i=>g.jsxs("tr",{className:i.type==="sale"?"sale-row":"restock-row",children:[g.jsx("td",{children:g.jsxs("div",{className:"date-time",children:[g.jsx("span",{className:"date",children:e(i.date)}),g.jsx("span",{className:"time",children:n(i.date)})]})}),g.jsx("td",{children:r(i.items)}),g.jsx("td",{children:g.jsx("span",{className:`transaction-type ${i.type}`,children:i.type==="sale"?"Sale":"Restock"})}),g.jsxs("td",{className:"amount",children:["",i.total.toFixed(2)]})]},i.id))})]})})},dj=({insights:t})=>{const[e,n]=M.useState(0);return M.useEffect(()=>{if(!t||t.length<=1)return;const r=setInterval(()=>{n(i=>(i+1)%t.length)},8e3);return()=>clearInterval(r)},[t]),!t||t.length===0?null:g.jsxs("div",{className:"business-insights",children:[g.jsx("div",{className:"insight-icon",children:g.jsx(HF,{})}),g.jsxs("div",{className:"insight-content",children:[g.jsx("p",{className:"insight-text",children:t[e]}),t.length>1&&g.jsx("div",{className:"insight-indicators",children:t.map((r,i)=>g.jsx("span",{className:`indicator ${i===e?"active":""}`,onClick:()=>n(i)},i))})]})]})},fj=({currentFilter:t,onFilterChange:e})=>g.jsxs("div",{className:"filter-controls",children:[g.jsx("button",{className:`filter-btn ${t==="week"?"active":""}`,onClick:()=>e("week"),children:"This Week"}),g.jsx("button",{className:`filter-btn ${t==="month"?"active":""}`,onClick:()=>e("month"),children:"This Month"}),g.jsx("button",{className:`filter-btn ${t==="quarter"?"active":""}`,onClick:()=>e("quarter"),children:"Last 3 Months"})]}),pj=()=>{const{currentUser:t}=cn(),[e,n]=M.useState(!0),[r,i]=M.useState(""),[s,o]=M.useState("month"),[a,l]=M.useState("revenue"),[c,u]=M.useState([]),[d,f]=M.useState([]),[p,m]=M.useState([]),[v,E]=M.useState(0),[_,x]=M.useState(0),[w,A]=M.useState(null),[P,R]=M.useState(null),[C,b]=M.useState([]),[k,S]=M.useState([]),I=()=>{const q=new Date,L=q,X=new Date;return s==="week"?X.setDate(q.getDate()-7):s==="month"?X.setMonth(q.getMonth()-1):s==="quarter"&&X.setMonth(q.getMonth()-3),{start:X,end:L}};M.useEffect(()=>{if(!t)return;(async()=>{n(!0),i("");try{const{start:L}=I(),X=lr(it,"inventory"),j=Hi(X,Mr("userId","==",t.uid)),W=await id(j),Q=[];W.forEach(Ge=>{Q.push({id:Ge.id,...Ge.data()})}),f(Q);const B=lr(it,"receipts"),V=Hi(B,Mr("userId","==",t.uid),Mr("timestamp",">=",L),LA("timestamp","desc")),U=await id(V),H=[];U.forEach(Ge=>{var ke;const et=Ge.data();H.push({id:Ge.id,...et,timestamp:((ke=et.timestamp)==null?void 0:ke.toDate())||new Date})});const re={},ie={},Ie=[];H.forEach(Ge=>{const et=Ge.timestamp.toISOString().split("T")[0];re[et]||(re[et]={date:new Date(et),totalRevenue:0,totalProfit:0,itemsSold:[]}),re[et].totalRevenue+=Ge.total,re[et].totalProfit+=Ge.total*.3,Ge.items.forEach(ke=>{re[et].itemsSold.push({itemId:ke.id,name:ke.name,quantitySold:ke.quantity,revenue:ke.subtotal,profit:ke.subtotal*.3}),ie[ke.id]||(ie[ke.id]={itemId:ke.id,name:ke.name,quantitySold:0,revenue:0,profit:0}),ie[ke.id].quantitySold+=ke.quantity,ie[ke.id].revenue+=ke.subtotal,ie[ke.id].profit+=ke.subtotal*.3}),Ie.push({id:Ge.id,date:Ge.timestamp,items:Ge.items,total:Ge.total,type:"sale"})});const ue=Object.values(re);u(ue),m(Ie),N(ue,ie,Q)}catch(L){console.error("Error fetching data:",L),i("Failed to load analytics data")}n(!1)})()},[t,s]);const N=(q,L,X)=>{let j=0,W=0;q.forEach(B=>{j+=B.totalRevenue,W+=B.totalProfit}),E(j),x(W);const Q=Object.values(L);if(Q.length>0){const B=[...Q].sort((V,U)=>U.quantitySold-V.quantitySold);A(B[0]||null),R(B[B.length-1]||null),b(B.slice(0,5))}else A(null),R(null),b([]);D(q,Q,X)},D=(q,L,X)=>{const j=[];if(q.length>0){const Q=Math.floor(q.length/2),B=q.slice(0,Q),V=q.slice(Q),U=B.reduce((re,ie)=>re+ie.totalRevenue,0),H=V.reduce((re,ie)=>re+ie.totalRevenue,0);if(H>0){const re=(U-H)/H*100;re>0?j.push(`Your sales increased by ${re.toFixed(1)}% compared to the previous period.`):re<0?j.push(`Your sales decreased by ${Math.abs(re).toFixed(1)}% compared to the previous period.`):j.push("Your sales remained stable compared to the previous period.")}}w&&j.push(`${w.name} is your best-selling product with ${w.quantitySold} units sold.`);const W=X.filter(Q=>Q.quantity<5);if(W.length>0&&j.push(`You have ${W.length} items with low stock. Consider restocking soon.`),p.length>0){const Q=v/p.length;j.push(`Your average transaction value is ${Q.toFixed(2)}.`)}S(j)},G=()=>{l(a==="revenue"?"profit":"revenue")};return g.jsxs("div",{className:"profit-analysis-page",children:[g.jsxs("div",{className:"page-header",children:[g.jsx("h1",{className:"page-title",children:"Profit Analysis"}),g.jsxs("div",{className:"view-toggle",onClick:G,children:[g.jsxs("span",{children:["View: ",a==="revenue"?"Revenue":"Profit"]}),a==="revenue"?g.jsx(KF,{className:"toggle-icon"}):g.jsx(qF,{className:"toggle-icon"})]})]}),r&&g.jsx("div",{className:"error-message",children:r}),g.jsx(fj,{currentFilter:s,onFilterChange:o}),e?g.jsxs("div",{className:"loading-container",children:[g.jsx("div",{className:"loading-spinner"}),g.jsx("p",{children:"Loading analytics data..."})]}):g.jsxs(g.Fragment,{children:[g.jsxs("section",{className:"metrics-section",children:[g.jsx(wu,{title:"Total Revenue",value:v,icon:g.jsx(WF,{}),color:"primary",isCurrency:!0,altValue:a==="profit"?_:null,altLabel:a==="profit"?"Profit":null}),g.jsx(wu,{title:"Estimated Profit",value:_,icon:g.jsx(nv,{}),color:"highlight",isCurrency:!0,altValue:a==="profit"?(_/v*100).toFixed(1)+"%":null,altLabel:a==="profit"?"Margin":null}),g.jsx(wu,{title:"Best-Selling Item",value:(w==null?void 0:w.name)||"N/A",subvalue:w?`${w.quantitySold} units`:"",icon:g.jsx(tv,{}),color:"secondary"}),g.jsx(wu,{title:"Slow-Moving Item",value:(P==null?void 0:P.name)||"N/A",subvalue:P?`${P.quantitySold} units`:"",icon:g.jsx(zF,{}),color:"accent"})]}),g.jsx(dj,{insights:k}),g.jsxs("section",{className:"charts-section",children:[g.jsxs("div",{className:"chart-container",children:[g.jsx("h2",{className:"section-title",children:"Sales Trends"}),g.jsx(cj,{salesData:c,viewMode:a})]}),g.jsxs("div",{className:"chart-container",children:[g.jsx("h2",{className:"section-title",children:"Top Selling Items"}),g.jsx(uj,{items:C,viewMode:a})]})]}),g.jsxs("section",{className:"transactions-section",children:[g.jsx("h2",{className:"section-title",children:"Recent Transactions"}),g.jsx(hj,{transactions:p})]})]})]})};var pS={exports:{}};function gj(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var R0={exports:{}};const mj={},xj=Object.freeze(Object.defineProperty({__proto__:null,default:mj},Symbol.toStringTag,{value:"Module"})),vj=zS(xj);var EE;function ve(){return EE||(EE=1,function(t,e){(function(n,r){t.exports=r()})(de,function(){var n=n||function(r,i){var s;if(typeof window<"u"&&window.crypto&&(s=window.crypto),typeof self<"u"&&self.crypto&&(s=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(s=globalThis.crypto),!s&&typeof window<"u"&&window.msCrypto&&(s=window.msCrypto),!s&&typeof de<"u"&&de.crypto&&(s=de.crypto),!s&&typeof gj=="function")try{s=vj}catch{}var o=function(){if(s){if(typeof s.getRandomValues=="function")try{return s.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof s.randomBytes=="function")try{return s.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},a=Object.create||function(){function x(){}return function(w){var A;return x.prototype=w,A=new x,x.prototype=null,A}}(),l={},c=l.lib={},u=c.Base=function(){return{extend:function(x){var w=a(this);return x&&w.mixIn(x),(!w.hasOwnProperty("init")||this.init===w.init)&&(w.init=function(){w.$super.init.apply(this,arguments)}),w.init.prototype=w,w.$super=this,w},create:function(){var x=this.extend();return x.init.apply(x,arguments),x},init:function(){},mixIn:function(x){for(var w in x)x.hasOwnProperty(w)&&(this[w]=x[w]);x.hasOwnProperty("toString")&&(this.toString=x.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),d=c.WordArray=u.extend({init:function(x,w){x=this.words=x||[],w!=i?this.sigBytes=w:this.sigBytes=x.length*4},toString:function(x){return(x||p).stringify(this)},concat:function(x){var w=this.words,A=x.words,P=this.sigBytes,R=x.sigBytes;if(this.clamp(),P%4)for(var C=0;C<R;C++){var b=A[C>>>2]>>>24-C%4*8&255;w[P+C>>>2]|=b<<24-(P+C)%4*8}else for(var k=0;k<R;k+=4)w[P+k>>>2]=A[k>>>2];return this.sigBytes+=R,this},clamp:function(){var x=this.words,w=this.sigBytes;x[w>>>2]&=4294967295<<32-w%4*8,x.length=r.ceil(w/4)},clone:function(){var x=u.clone.call(this);return x.words=this.words.slice(0),x},random:function(x){for(var w=[],A=0;A<x;A+=4)w.push(o());return new d.init(w,x)}}),f=l.enc={},p=f.Hex={stringify:function(x){for(var w=x.words,A=x.sigBytes,P=[],R=0;R<A;R++){var C=w[R>>>2]>>>24-R%4*8&255;P.push((C>>>4).toString(16)),P.push((C&15).toString(16))}return P.join("")},parse:function(x){for(var w=x.length,A=[],P=0;P<w;P+=2)A[P>>>3]|=parseInt(x.substr(P,2),16)<<24-P%8*4;return new d.init(A,w/2)}},m=f.Latin1={stringify:function(x){for(var w=x.words,A=x.sigBytes,P=[],R=0;R<A;R++){var C=w[R>>>2]>>>24-R%4*8&255;P.push(String.fromCharCode(C))}return P.join("")},parse:function(x){for(var w=x.length,A=[],P=0;P<w;P++)A[P>>>2]|=(x.charCodeAt(P)&255)<<24-P%4*8;return new d.init(A,w)}},v=f.Utf8={stringify:function(x){try{return decodeURIComponent(escape(m.stringify(x)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(x){return m.parse(unescape(encodeURIComponent(x)))}},E=c.BufferedBlockAlgorithm=u.extend({reset:function(){this._data=new d.init,this._nDataBytes=0},_append:function(x){typeof x=="string"&&(x=v.parse(x)),this._data.concat(x),this._nDataBytes+=x.sigBytes},_process:function(x){var w,A=this._data,P=A.words,R=A.sigBytes,C=this.blockSize,b=C*4,k=R/b;x?k=r.ceil(k):k=r.max((k|0)-this._minBufferSize,0);var S=k*C,I=r.min(S*4,R);if(S){for(var N=0;N<S;N+=C)this._doProcessBlock(P,N);w=P.splice(0,S),A.sigBytes-=I}return new d.init(w,I)},clone:function(){var x=u.clone.call(this);return x._data=this._data.clone(),x},_minBufferSize:0});c.Hasher=E.extend({cfg:u.extend(),init:function(x){this.cfg=this.cfg.extend(x),this.reset()},reset:function(){E.reset.call(this),this._doReset()},update:function(x){return this._append(x),this._process(),this},finalize:function(x){x&&this._append(x);var w=this._doFinalize();return w},blockSize:16,_createHelper:function(x){return function(w,A){return new x.init(A).finalize(w)}},_createHmacHelper:function(x){return function(w,A){return new _.HMAC.init(x,A).finalize(w)}}});var _=l.algo={};return l}(Math);return n})}(R0)),R0.exports}var D0={exports:{}},wE;function gf(){return wE||(wE=1,function(t,e){(function(n,r){t.exports=r(ve())})(de,function(n){return function(r){var i=n,s=i.lib,o=s.Base,a=s.WordArray,l=i.x64={};l.Word=o.extend({init:function(c,u){this.high=c,this.low=u}}),l.WordArray=o.extend({init:function(c,u){c=this.words=c||[],u!=r?this.sigBytes=u:this.sigBytes=c.length*8},toX32:function(){for(var c=this.words,u=c.length,d=[],f=0;f<u;f++){var p=c[f];d.push(p.high),d.push(p.low)}return a.create(d,this.sigBytes)},clone:function(){for(var c=o.clone.call(this),u=c.words=this.words.slice(0),d=u.length,f=0;f<d;f++)u[f]=u[f].clone();return c}})}(),n})}(D0)),D0.exports}var N0={exports:{}},bE;function yj(){return bE||(bE=1,function(t,e){(function(n,r){t.exports=r(ve())})(de,function(n){return function(){if(typeof ArrayBuffer=="function"){var r=n,i=r.lib,s=i.WordArray,o=s.init,a=s.init=function(l){if(l instanceof ArrayBuffer&&(l=new Uint8Array(l)),(l instanceof Int8Array||typeof Uint8ClampedArray<"u"&&l instanceof Uint8ClampedArray||l instanceof Int16Array||l instanceof Uint16Array||l instanceof Int32Array||l instanceof Uint32Array||l instanceof Float32Array||l instanceof Float64Array)&&(l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength)),l instanceof Uint8Array){for(var c=l.byteLength,u=[],d=0;d<c;d++)u[d>>>2]|=l[d]<<24-d%4*8;o.call(this,u,c)}else o.apply(this,arguments)};a.prototype=s}}(),n.lib.WordArray})}(N0)),N0.exports}var F0={exports:{}},CE;function _j(){return CE||(CE=1,function(t,e){(function(n,r){t.exports=r(ve())})(de,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=r.enc;o.Utf16=o.Utf16BE={stringify:function(l){for(var c=l.words,u=l.sigBytes,d=[],f=0;f<u;f+=2){var p=c[f>>>2]>>>16-f%4*8&65535;d.push(String.fromCharCode(p))}return d.join("")},parse:function(l){for(var c=l.length,u=[],d=0;d<c;d++)u[d>>>1]|=l.charCodeAt(d)<<16-d%2*16;return s.create(u,c*2)}},o.Utf16LE={stringify:function(l){for(var c=l.words,u=l.sigBytes,d=[],f=0;f<u;f+=2){var p=a(c[f>>>2]>>>16-f%4*8&65535);d.push(String.fromCharCode(p))}return d.join("")},parse:function(l){for(var c=l.length,u=[],d=0;d<c;d++)u[d>>>1]|=a(l.charCodeAt(d)<<16-d%2*16);return s.create(u,c*2)}};function a(l){return l<<8&4278255360|l>>>8&16711935}}(),n.enc.Utf16})}(F0)),F0.exports}var M0={exports:{}},AE;function Xs(){return AE||(AE=1,function(t,e){(function(n,r){t.exports=r(ve())})(de,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=r.enc;o.Base64={stringify:function(l){var c=l.words,u=l.sigBytes,d=this._map;l.clamp();for(var f=[],p=0;p<u;p+=3)for(var m=c[p>>>2]>>>24-p%4*8&255,v=c[p+1>>>2]>>>24-(p+1)%4*8&255,E=c[p+2>>>2]>>>24-(p+2)%4*8&255,_=m<<16|v<<8|E,x=0;x<4&&p+x*.75<u;x++)f.push(d.charAt(_>>>6*(3-x)&63));var w=d.charAt(64);if(w)for(;f.length%4;)f.push(w);return f.join("")},parse:function(l){var c=l.length,u=this._map,d=this._reverseMap;if(!d){d=this._reverseMap=[];for(var f=0;f<u.length;f++)d[u.charCodeAt(f)]=f}var p=u.charAt(64);if(p){var m=l.indexOf(p);m!==-1&&(c=m)}return a(l,c,d)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function a(l,c,u){for(var d=[],f=0,p=0;p<c;p++)if(p%4){var m=u[l.charCodeAt(p-1)]<<p%4*2,v=u[l.charCodeAt(p)]>>>6-p%4*2,E=m|v;d[f>>>2]|=E<<24-f%4*8,f++}return s.create(d,f)}}(),n.enc.Base64})}(M0)),M0.exports}var O0={exports:{}},TE;function Ej(){return TE||(TE=1,function(t,e){(function(n,r){t.exports=r(ve())})(de,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=r.enc;o.Base64url={stringify:function(l,c){c===void 0&&(c=!0);var u=l.words,d=l.sigBytes,f=c?this._safe_map:this._map;l.clamp();for(var p=[],m=0;m<d;m+=3)for(var v=u[m>>>2]>>>24-m%4*8&255,E=u[m+1>>>2]>>>24-(m+1)%4*8&255,_=u[m+2>>>2]>>>24-(m+2)%4*8&255,x=v<<16|E<<8|_,w=0;w<4&&m+w*.75<d;w++)p.push(f.charAt(x>>>6*(3-w)&63));var A=f.charAt(64);if(A)for(;p.length%4;)p.push(A);return p.join("")},parse:function(l,c){c===void 0&&(c=!0);var u=l.length,d=c?this._safe_map:this._map,f=this._reverseMap;if(!f){f=this._reverseMap=[];for(var p=0;p<d.length;p++)f[d.charCodeAt(p)]=p}var m=d.charAt(64);if(m){var v=l.indexOf(m);v!==-1&&(u=v)}return a(l,u,f)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function a(l,c,u){for(var d=[],f=0,p=0;p<c;p++)if(p%4){var m=u[l.charCodeAt(p-1)]<<p%4*2,v=u[l.charCodeAt(p)]>>>6-p%4*2,E=m|v;d[f>>>2]|=E<<24-f%4*8,f++}return s.create(d,f)}}(),n.enc.Base64url})}(O0)),O0.exports}var B0={exports:{}},SE;function Js(){return SE||(SE=1,function(t,e){(function(n,r){t.exports=r(ve())})(de,function(n){return function(r){var i=n,s=i.lib,o=s.WordArray,a=s.Hasher,l=i.algo,c=[];(function(){for(var v=0;v<64;v++)c[v]=r.abs(r.sin(v+1))*4294967296|0})();var u=l.MD5=a.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(v,E){for(var _=0;_<16;_++){var x=E+_,w=v[x];v[x]=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360}var A=this._hash.words,P=v[E+0],R=v[E+1],C=v[E+2],b=v[E+3],k=v[E+4],S=v[E+5],I=v[E+6],N=v[E+7],D=v[E+8],G=v[E+9],q=v[E+10],L=v[E+11],X=v[E+12],j=v[E+13],W=v[E+14],Q=v[E+15],B=A[0],V=A[1],U=A[2],H=A[3];B=d(B,V,U,H,P,7,c[0]),H=d(H,B,V,U,R,12,c[1]),U=d(U,H,B,V,C,17,c[2]),V=d(V,U,H,B,b,22,c[3]),B=d(B,V,U,H,k,7,c[4]),H=d(H,B,V,U,S,12,c[5]),U=d(U,H,B,V,I,17,c[6]),V=d(V,U,H,B,N,22,c[7]),B=d(B,V,U,H,D,7,c[8]),H=d(H,B,V,U,G,12,c[9]),U=d(U,H,B,V,q,17,c[10]),V=d(V,U,H,B,L,22,c[11]),B=d(B,V,U,H,X,7,c[12]),H=d(H,B,V,U,j,12,c[13]),U=d(U,H,B,V,W,17,c[14]),V=d(V,U,H,B,Q,22,c[15]),B=f(B,V,U,H,R,5,c[16]),H=f(H,B,V,U,I,9,c[17]),U=f(U,H,B,V,L,14,c[18]),V=f(V,U,H,B,P,20,c[19]),B=f(B,V,U,H,S,5,c[20]),H=f(H,B,V,U,q,9,c[21]),U=f(U,H,B,V,Q,14,c[22]),V=f(V,U,H,B,k,20,c[23]),B=f(B,V,U,H,G,5,c[24]),H=f(H,B,V,U,W,9,c[25]),U=f(U,H,B,V,b,14,c[26]),V=f(V,U,H,B,D,20,c[27]),B=f(B,V,U,H,j,5,c[28]),H=f(H,B,V,U,C,9,c[29]),U=f(U,H,B,V,N,14,c[30]),V=f(V,U,H,B,X,20,c[31]),B=p(B,V,U,H,S,4,c[32]),H=p(H,B,V,U,D,11,c[33]),U=p(U,H,B,V,L,16,c[34]),V=p(V,U,H,B,W,23,c[35]),B=p(B,V,U,H,R,4,c[36]),H=p(H,B,V,U,k,11,c[37]),U=p(U,H,B,V,N,16,c[38]),V=p(V,U,H,B,q,23,c[39]),B=p(B,V,U,H,j,4,c[40]),H=p(H,B,V,U,P,11,c[41]),U=p(U,H,B,V,b,16,c[42]),V=p(V,U,H,B,I,23,c[43]),B=p(B,V,U,H,G,4,c[44]),H=p(H,B,V,U,X,11,c[45]),U=p(U,H,B,V,Q,16,c[46]),V=p(V,U,H,B,C,23,c[47]),B=m(B,V,U,H,P,6,c[48]),H=m(H,B,V,U,N,10,c[49]),U=m(U,H,B,V,W,15,c[50]),V=m(V,U,H,B,S,21,c[51]),B=m(B,V,U,H,X,6,c[52]),H=m(H,B,V,U,b,10,c[53]),U=m(U,H,B,V,q,15,c[54]),V=m(V,U,H,B,R,21,c[55]),B=m(B,V,U,H,D,6,c[56]),H=m(H,B,V,U,Q,10,c[57]),U=m(U,H,B,V,I,15,c[58]),V=m(V,U,H,B,j,21,c[59]),B=m(B,V,U,H,k,6,c[60]),H=m(H,B,V,U,L,10,c[61]),U=m(U,H,B,V,C,15,c[62]),V=m(V,U,H,B,G,21,c[63]),A[0]=A[0]+B|0,A[1]=A[1]+V|0,A[2]=A[2]+U|0,A[3]=A[3]+H|0},_doFinalize:function(){var v=this._data,E=v.words,_=this._nDataBytes*8,x=v.sigBytes*8;E[x>>>5]|=128<<24-x%32;var w=r.floor(_/4294967296),A=_;E[(x+64>>>9<<4)+15]=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360,E[(x+64>>>9<<4)+14]=(A<<8|A>>>24)&16711935|(A<<24|A>>>8)&4278255360,v.sigBytes=(E.length+1)*4,this._process();for(var P=this._hash,R=P.words,C=0;C<4;C++){var b=R[C];R[C]=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360}return P},clone:function(){var v=a.clone.call(this);return v._hash=this._hash.clone(),v}});function d(v,E,_,x,w,A,P){var R=v+(E&_|~E&x)+w+P;return(R<<A|R>>>32-A)+E}function f(v,E,_,x,w,A,P){var R=v+(E&x|_&~x)+w+P;return(R<<A|R>>>32-A)+E}function p(v,E,_,x,w,A,P){var R=v+(E^_^x)+w+P;return(R<<A|R>>>32-A)+E}function m(v,E,_,x,w,A,P){var R=v+(_^(E|~x))+w+P;return(R<<A|R>>>32-A)+E}i.MD5=a._createHelper(u),i.HmacMD5=a._createHmacHelper(u)}(Math),n.MD5})}(B0)),B0.exports}var L0={exports:{}},IE;function gS(){return IE||(IE=1,function(t,e){(function(n,r){t.exports=r(ve())})(de,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=i.Hasher,a=r.algo,l=[],c=a.SHA1=o.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(u,d){for(var f=this._hash.words,p=f[0],m=f[1],v=f[2],E=f[3],_=f[4],x=0;x<80;x++){if(x<16)l[x]=u[d+x]|0;else{var w=l[x-3]^l[x-8]^l[x-14]^l[x-16];l[x]=w<<1|w>>>31}var A=(p<<5|p>>>27)+_+l[x];x<20?A+=(m&v|~m&E)+1518500249:x<40?A+=(m^v^E)+1859775393:x<60?A+=(m&v|m&E|v&E)-1894007588:A+=(m^v^E)-899497514,_=E,E=v,v=m<<30|m>>>2,m=p,p=A}f[0]=f[0]+p|0,f[1]=f[1]+m|0,f[2]=f[2]+v|0,f[3]=f[3]+E|0,f[4]=f[4]+_|0},_doFinalize:function(){var u=this._data,d=u.words,f=this._nDataBytes*8,p=u.sigBytes*8;return d[p>>>5]|=128<<24-p%32,d[(p+64>>>9<<4)+14]=Math.floor(f/4294967296),d[(p+64>>>9<<4)+15]=f,u.sigBytes=d.length*4,this._process(),this._hash},clone:function(){var u=o.clone.call(this);return u._hash=this._hash.clone(),u}});r.SHA1=o._createHelper(c),r.HmacSHA1=o._createHmacHelper(c)}(),n.SHA1})}(L0)),L0.exports}var j0={exports:{}},kE;function Cv(){return kE||(kE=1,function(t,e){(function(n,r){t.exports=r(ve())})(de,function(n){return function(r){var i=n,s=i.lib,o=s.WordArray,a=s.Hasher,l=i.algo,c=[],u=[];(function(){function p(_){for(var x=r.sqrt(_),w=2;w<=x;w++)if(!(_%w))return!1;return!0}function m(_){return(_-(_|0))*4294967296|0}for(var v=2,E=0;E<64;)p(v)&&(E<8&&(c[E]=m(r.pow(v,1/2))),u[E]=m(r.pow(v,1/3)),E++),v++})();var d=[],f=l.SHA256=a.extend({_doReset:function(){this._hash=new o.init(c.slice(0))},_doProcessBlock:function(p,m){for(var v=this._hash.words,E=v[0],_=v[1],x=v[2],w=v[3],A=v[4],P=v[5],R=v[6],C=v[7],b=0;b<64;b++){if(b<16)d[b]=p[m+b]|0;else{var k=d[b-15],S=(k<<25|k>>>7)^(k<<14|k>>>18)^k>>>3,I=d[b-2],N=(I<<15|I>>>17)^(I<<13|I>>>19)^I>>>10;d[b]=S+d[b-7]+N+d[b-16]}var D=A&P^~A&R,G=E&_^E&x^_&x,q=(E<<30|E>>>2)^(E<<19|E>>>13)^(E<<10|E>>>22),L=(A<<26|A>>>6)^(A<<21|A>>>11)^(A<<7|A>>>25),X=C+L+D+u[b]+d[b],j=q+G;C=R,R=P,P=A,A=w+X|0,w=x,x=_,_=E,E=X+j|0}v[0]=v[0]+E|0,v[1]=v[1]+_|0,v[2]=v[2]+x|0,v[3]=v[3]+w|0,v[4]=v[4]+A|0,v[5]=v[5]+P|0,v[6]=v[6]+R|0,v[7]=v[7]+C|0},_doFinalize:function(){var p=this._data,m=p.words,v=this._nDataBytes*8,E=p.sigBytes*8;return m[E>>>5]|=128<<24-E%32,m[(E+64>>>9<<4)+14]=r.floor(v/4294967296),m[(E+64>>>9<<4)+15]=v,p.sigBytes=m.length*4,this._process(),this._hash},clone:function(){var p=a.clone.call(this);return p._hash=this._hash.clone(),p}});i.SHA256=a._createHelper(f),i.HmacSHA256=a._createHmacHelper(f)}(Math),n.SHA256})}(j0)),j0.exports}var V0={exports:{}},PE;function wj(){return PE||(PE=1,function(t,e){(function(n,r,i){t.exports=r(ve(),Cv())})(de,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=r.algo,a=o.SHA256,l=o.SHA224=a.extend({_doReset:function(){this._hash=new s.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var c=a._doFinalize.call(this);return c.sigBytes-=4,c}});r.SHA224=a._createHelper(l),r.HmacSHA224=a._createHmacHelper(l)}(),n.SHA224})}(V0)),V0.exports}var z0={exports:{}},RE;function mS(){return RE||(RE=1,function(t,e){(function(n,r,i){t.exports=r(ve(),gf())})(de,function(n){return function(){var r=n,i=r.lib,s=i.Hasher,o=r.x64,a=o.Word,l=o.WordArray,c=r.algo;function u(){return a.create.apply(a,arguments)}var d=[u(1116352408,3609767458),u(1899447441,602891725),u(3049323471,3964484399),u(3921009573,2173295548),u(961987163,4081628472),u(1508970993,3053834265),u(2453635748,2937671579),u(2870763221,3664609560),u(3624381080,2734883394),u(310598401,1164996542),u(607225278,1323610764),u(1426881987,3590304994),u(1925078388,4068182383),u(2162078206,991336113),u(2614888103,633803317),u(3248222580,3479774868),u(3835390401,2666613458),u(4022224774,944711139),u(264347078,2341262773),u(604807628,2007800933),u(770255983,1495990901),u(1249150122,1856431235),u(1555081692,3175218132),u(1996064986,2198950837),u(2554220882,3999719339),u(2821834349,766784016),u(2952996808,2566594879),u(3210313671,3203337956),u(3336571891,1034457026),u(3584528711,2466948901),u(113926993,3758326383),u(338241895,168717936),u(666307205,1188179964),u(773529912,1546045734),u(1294757372,1522805485),u(1396182291,2643833823),u(1695183700,2343527390),u(1986661051,1014477480),u(2177026350,1206759142),u(2456956037,344077627),u(2730485921,1290863460),u(2820302411,3158454273),u(3259730800,3505952657),u(3345764771,106217008),u(3516065817,3606008344),u(3600352804,1432725776),u(4094571909,1467031594),u(275423344,851169720),u(430227734,3100823752),u(506948616,1363258195),u(659060556,3750685593),u(883997877,3785050280),u(958139571,3318307427),u(1322822218,3812723403),u(1537002063,2003034995),u(1747873779,3602036899),u(1955562222,1575990012),u(2024104815,1125592928),u(2227730452,2716904306),u(2361852424,442776044),u(2428436474,593698344),u(2756734187,3733110249),u(3204031479,2999351573),u(3329325298,3815920427),u(3391569614,3928383900),u(3515267271,566280711),u(3940187606,3454069534),u(4118630271,4000239992),u(116418474,1914138554),u(174292421,2731055270),u(289380356,3203993006),u(460393269,320620315),u(685471733,587496836),u(852142971,1086792851),u(1017036298,365543100),u(1126000580,2618297676),u(1288033470,3409855158),u(1501505948,4234509866),u(1607167915,987167468),u(1816402316,1246189591)],f=[];(function(){for(var m=0;m<80;m++)f[m]=u()})();var p=c.SHA512=s.extend({_doReset:function(){this._hash=new l.init([new a.init(1779033703,4089235720),new a.init(3144134277,2227873595),new a.init(1013904242,4271175723),new a.init(2773480762,1595750129),new a.init(1359893119,2917565137),new a.init(2600822924,725511199),new a.init(528734635,4215389547),new a.init(1541459225,327033209)])},_doProcessBlock:function(m,v){for(var E=this._hash.words,_=E[0],x=E[1],w=E[2],A=E[3],P=E[4],R=E[5],C=E[6],b=E[7],k=_.high,S=_.low,I=x.high,N=x.low,D=w.high,G=w.low,q=A.high,L=A.low,X=P.high,j=P.low,W=R.high,Q=R.low,B=C.high,V=C.low,U=b.high,H=b.low,re=k,ie=S,Ie=I,ue=N,Ge=D,et=G,ke=q,hr=L,Ht=X,yt=j,Qr=W,Yr=Q,Zs=B,es=V,eo=U,dr=H,Yt=0;Yt<80;Yt++){var Xt,_n,Xr=f[Yt];if(Yt<16)_n=Xr.high=m[v+Yt*2]|0,Xt=Xr.low=m[v+Yt*2+1]|0;else{var ga=f[Yt-15],Ue=ga.high,tt=ga.low,to=(Ue>>>1|tt<<31)^(Ue>>>8|tt<<24)^Ue>>>7,ma=(tt>>>1|Ue<<31)^(tt>>>8|Ue<<24)^(tt>>>7|Ue<<25),xa=f[Yt-2],Jr=xa.high,Rn=xa.low,Dc=(Jr>>>19|Rn<<13)^(Jr<<3|Rn>>>29)^Jr>>>6,va=(Rn>>>19|Jr<<13)^(Rn<<3|Jr>>>29)^(Rn>>>6|Jr<<26),no=f[Yt-7],mf=no.high,xf=no.low,ro=f[Yt-16],Nc=ro.high,ya=ro.low;Xt=ma+xf,_n=to+mf+(Xt>>>0<ma>>>0?1:0),Xt=Xt+va,_n=_n+Dc+(Xt>>>0<va>>>0?1:0),Xt=Xt+ya,_n=_n+Nc+(Xt>>>0<ya>>>0?1:0),Xr.high=_n,Xr.low=Xt}var ts=Ht&Qr^~Ht&Zs,io=yt&Yr^~yt&es,_a=re&Ie^re&Ge^Ie&Ge,fr=ie&ue^ie&et^ue&et,Fc=(re>>>28|ie<<4)^(re<<30|ie>>>2)^(re<<25|ie>>>7),ns=(ie>>>28|re<<4)^(ie<<30|re>>>2)^(ie<<25|re>>>7),Mc=(Ht>>>14|yt<<18)^(Ht>>>18|yt<<14)^(Ht<<23|yt>>>9),rs=(yt>>>14|Ht<<18)^(yt>>>18|Ht<<14)^(yt<<23|Ht>>>9),Ea=d[Yt],_t=Ea.high,wa=Ea.low,ct=dr+rs,Jt=eo+Mc+(ct>>>0<dr>>>0?1:0),ct=ct+io,Jt=Jt+ts+(ct>>>0<io>>>0?1:0),ct=ct+wa,Jt=Jt+_t+(ct>>>0<wa>>>0?1:0),ct=ct+Xt,Jt=Jt+_n+(ct>>>0<Xt>>>0?1:0),Oc=ns+fr,vf=Fc+_a+(Oc>>>0<ns>>>0?1:0);eo=Zs,dr=es,Zs=Qr,es=Yr,Qr=Ht,Yr=yt,yt=hr+ct|0,Ht=ke+Jt+(yt>>>0<hr>>>0?1:0)|0,ke=Ge,hr=et,Ge=Ie,et=ue,Ie=re,ue=ie,ie=ct+Oc|0,re=Jt+vf+(ie>>>0<ct>>>0?1:0)|0}S=_.low=S+ie,_.high=k+re+(S>>>0<ie>>>0?1:0),N=x.low=N+ue,x.high=I+Ie+(N>>>0<ue>>>0?1:0),G=w.low=G+et,w.high=D+Ge+(G>>>0<et>>>0?1:0),L=A.low=L+hr,A.high=q+ke+(L>>>0<hr>>>0?1:0),j=P.low=j+yt,P.high=X+Ht+(j>>>0<yt>>>0?1:0),Q=R.low=Q+Yr,R.high=W+Qr+(Q>>>0<Yr>>>0?1:0),V=C.low=V+es,C.high=B+Zs+(V>>>0<es>>>0?1:0),H=b.low=H+dr,b.high=U+eo+(H>>>0<dr>>>0?1:0)},_doFinalize:function(){var m=this._data,v=m.words,E=this._nDataBytes*8,_=m.sigBytes*8;v[_>>>5]|=128<<24-_%32,v[(_+128>>>10<<5)+30]=Math.floor(E/4294967296),v[(_+128>>>10<<5)+31]=E,m.sigBytes=v.length*4,this._process();var x=this._hash.toX32();return x},clone:function(){var m=s.clone.call(this);return m._hash=this._hash.clone(),m},blockSize:1024/32});r.SHA512=s._createHelper(p),r.HmacSHA512=s._createHmacHelper(p)}(),n.SHA512})}(z0)),z0.exports}var U0={exports:{}},DE;function bj(){return DE||(DE=1,function(t,e){(function(n,r,i){t.exports=r(ve(),gf(),mS())})(de,function(n){return function(){var r=n,i=r.x64,s=i.Word,o=i.WordArray,a=r.algo,l=a.SHA512,c=a.SHA384=l.extend({_doReset:function(){this._hash=new o.init([new s.init(3418070365,3238371032),new s.init(1654270250,914150663),new s.init(2438529370,812702999),new s.init(355462360,4144912697),new s.init(1731405415,4290775857),new s.init(2394180231,1750603025),new s.init(3675008525,1694076839),new s.init(1203062813,3204075428)])},_doFinalize:function(){var u=l._doFinalize.call(this);return u.sigBytes-=16,u}});r.SHA384=l._createHelper(c),r.HmacSHA384=l._createHmacHelper(c)}(),n.SHA384})}(U0)),U0.exports}var H0={exports:{}},NE;function Cj(){return NE||(NE=1,function(t,e){(function(n,r,i){t.exports=r(ve(),gf())})(de,function(n){return function(r){var i=n,s=i.lib,o=s.WordArray,a=s.Hasher,l=i.x64,c=l.Word,u=i.algo,d=[],f=[],p=[];(function(){for(var E=1,_=0,x=0;x<24;x++){d[E+5*_]=(x+1)*(x+2)/2%64;var w=_%5,A=(2*E+3*_)%5;E=w,_=A}for(var E=0;E<5;E++)for(var _=0;_<5;_++)f[E+5*_]=_+(2*E+3*_)%5*5;for(var P=1,R=0;R<24;R++){for(var C=0,b=0,k=0;k<7;k++){if(P&1){var S=(1<<k)-1;S<32?b^=1<<S:C^=1<<S-32}P&128?P=P<<1^113:P<<=1}p[R]=c.create(C,b)}})();var m=[];(function(){for(var E=0;E<25;E++)m[E]=c.create()})();var v=u.SHA3=a.extend({cfg:a.cfg.extend({outputLength:512}),_doReset:function(){for(var E=this._state=[],_=0;_<25;_++)E[_]=new c.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(E,_){for(var x=this._state,w=this.blockSize/2,A=0;A<w;A++){var P=E[_+2*A],R=E[_+2*A+1];P=(P<<8|P>>>24)&16711935|(P<<24|P>>>8)&4278255360,R=(R<<8|R>>>24)&16711935|(R<<24|R>>>8)&4278255360;var C=x[A];C.high^=R,C.low^=P}for(var b=0;b<24;b++){for(var k=0;k<5;k++){for(var S=0,I=0,N=0;N<5;N++){var C=x[k+5*N];S^=C.high,I^=C.low}var D=m[k];D.high=S,D.low=I}for(var k=0;k<5;k++)for(var G=m[(k+4)%5],q=m[(k+1)%5],L=q.high,X=q.low,S=G.high^(L<<1|X>>>31),I=G.low^(X<<1|L>>>31),N=0;N<5;N++){var C=x[k+5*N];C.high^=S,C.low^=I}for(var j=1;j<25;j++){var S,I,C=x[j],W=C.high,Q=C.low,B=d[j];B<32?(S=W<<B|Q>>>32-B,I=Q<<B|W>>>32-B):(S=Q<<B-32|W>>>64-B,I=W<<B-32|Q>>>64-B);var V=m[f[j]];V.high=S,V.low=I}var U=m[0],H=x[0];U.high=H.high,U.low=H.low;for(var k=0;k<5;k++)for(var N=0;N<5;N++){var j=k+5*N,C=x[j],re=m[j],ie=m[(k+1)%5+5*N],Ie=m[(k+2)%5+5*N];C.high=re.high^~ie.high&Ie.high,C.low=re.low^~ie.low&Ie.low}var C=x[0],ue=p[b];C.high^=ue.high,C.low^=ue.low}},_doFinalize:function(){var E=this._data,_=E.words;this._nDataBytes*8;var x=E.sigBytes*8,w=this.blockSize*32;_[x>>>5]|=1<<24-x%32,_[(r.ceil((x+1)/w)*w>>>5)-1]|=128,E.sigBytes=_.length*4,this._process();for(var A=this._state,P=this.cfg.outputLength/8,R=P/8,C=[],b=0;b<R;b++){var k=A[b],S=k.high,I=k.low;S=(S<<8|S>>>24)&16711935|(S<<24|S>>>8)&4278255360,I=(I<<8|I>>>24)&16711935|(I<<24|I>>>8)&4278255360,C.push(I),C.push(S)}return new o.init(C,P)},clone:function(){for(var E=a.clone.call(this),_=E._state=this._state.slice(0),x=0;x<25;x++)_[x]=_[x].clone();return E}});i.SHA3=a._createHelper(v),i.HmacSHA3=a._createHmacHelper(v)}(Math),n.SHA3})}(H0)),H0.exports}var W0={exports:{}},FE;function Aj(){return FE||(FE=1,function(t,e){(function(n,r){t.exports=r(ve())})(de,function(n){/** @preserve
			(c) 2012 by Cdric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return function(r){var i=n,s=i.lib,o=s.WordArray,a=s.Hasher,l=i.algo,c=o.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),u=o.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),d=o.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),f=o.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),p=o.create([0,1518500249,1859775393,2400959708,2840853838]),m=o.create([1352829926,1548603684,1836072691,2053994217,0]),v=l.RIPEMD160=a.extend({_doReset:function(){this._hash=o.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(R,C){for(var b=0;b<16;b++){var k=C+b,S=R[k];R[k]=(S<<8|S>>>24)&16711935|(S<<24|S>>>8)&4278255360}var I=this._hash.words,N=p.words,D=m.words,G=c.words,q=u.words,L=d.words,X=f.words,j,W,Q,B,V,U,H,re,ie,Ie;U=j=I[0],H=W=I[1],re=Q=I[2],ie=B=I[3],Ie=V=I[4];for(var ue,b=0;b<80;b+=1)ue=j+R[C+G[b]]|0,b<16?ue+=E(W,Q,B)+N[0]:b<32?ue+=_(W,Q,B)+N[1]:b<48?ue+=x(W,Q,B)+N[2]:b<64?ue+=w(W,Q,B)+N[3]:ue+=A(W,Q,B)+N[4],ue=ue|0,ue=P(ue,L[b]),ue=ue+V|0,j=V,V=B,B=P(Q,10),Q=W,W=ue,ue=U+R[C+q[b]]|0,b<16?ue+=A(H,re,ie)+D[0]:b<32?ue+=w(H,re,ie)+D[1]:b<48?ue+=x(H,re,ie)+D[2]:b<64?ue+=_(H,re,ie)+D[3]:ue+=E(H,re,ie)+D[4],ue=ue|0,ue=P(ue,X[b]),ue=ue+Ie|0,U=Ie,Ie=ie,ie=P(re,10),re=H,H=ue;ue=I[1]+Q+ie|0,I[1]=I[2]+B+Ie|0,I[2]=I[3]+V+U|0,I[3]=I[4]+j+H|0,I[4]=I[0]+W+re|0,I[0]=ue},_doFinalize:function(){var R=this._data,C=R.words,b=this._nDataBytes*8,k=R.sigBytes*8;C[k>>>5]|=128<<24-k%32,C[(k+64>>>9<<4)+14]=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,R.sigBytes=(C.length+1)*4,this._process();for(var S=this._hash,I=S.words,N=0;N<5;N++){var D=I[N];I[N]=(D<<8|D>>>24)&16711935|(D<<24|D>>>8)&4278255360}return S},clone:function(){var R=a.clone.call(this);return R._hash=this._hash.clone(),R}});function E(R,C,b){return R^C^b}function _(R,C,b){return R&C|~R&b}function x(R,C,b){return(R|~C)^b}function w(R,C,b){return R&b|C&~b}function A(R,C,b){return R^(C|~b)}function P(R,C){return R<<C|R>>>32-C}i.RIPEMD160=a._createHelper(v),i.HmacRIPEMD160=a._createHmacHelper(v)}(),n.RIPEMD160})}(W0)),W0.exports}var $0={exports:{}},ME;function Av(){return ME||(ME=1,function(t,e){(function(n,r){t.exports=r(ve())})(de,function(n){(function(){var r=n,i=r.lib,s=i.Base,o=r.enc,a=o.Utf8,l=r.algo;l.HMAC=s.extend({init:function(c,u){c=this._hasher=new c.init,typeof u=="string"&&(u=a.parse(u));var d=c.blockSize,f=d*4;u.sigBytes>f&&(u=c.finalize(u)),u.clamp();for(var p=this._oKey=u.clone(),m=this._iKey=u.clone(),v=p.words,E=m.words,_=0;_<d;_++)v[_]^=1549556828,E[_]^=909522486;p.sigBytes=m.sigBytes=f,this.reset()},reset:function(){var c=this._hasher;c.reset(),c.update(this._iKey)},update:function(c){return this._hasher.update(c),this},finalize:function(c){var u=this._hasher,d=u.finalize(c);u.reset();var f=u.finalize(this._oKey.clone().concat(d));return f}})})()})}($0)),$0.exports}var q0={exports:{}},OE;function Tj(){return OE||(OE=1,function(t,e){(function(n,r,i){t.exports=r(ve(),Cv(),Av())})(de,function(n){return function(){var r=n,i=r.lib,s=i.Base,o=i.WordArray,a=r.algo,l=a.SHA256,c=a.HMAC,u=a.PBKDF2=s.extend({cfg:s.extend({keySize:128/32,hasher:l,iterations:25e4}),init:function(d){this.cfg=this.cfg.extend(d)},compute:function(d,f){for(var p=this.cfg,m=c.create(p.hasher,d),v=o.create(),E=o.create([1]),_=v.words,x=E.words,w=p.keySize,A=p.iterations;_.length<w;){var P=m.update(f).finalize(E);m.reset();for(var R=P.words,C=R.length,b=P,k=1;k<A;k++){b=m.finalize(b),m.reset();for(var S=b.words,I=0;I<C;I++)R[I]^=S[I]}v.concat(P),x[0]++}return v.sigBytes=w*4,v}});r.PBKDF2=function(d,f,p){return u.create(p).compute(d,f)}}(),n.PBKDF2})}(q0)),q0.exports}var K0={exports:{}},BE;function Zi(){return BE||(BE=1,function(t,e){(function(n,r,i){t.exports=r(ve(),gS(),Av())})(de,function(n){return function(){var r=n,i=r.lib,s=i.Base,o=i.WordArray,a=r.algo,l=a.MD5,c=a.EvpKDF=s.extend({cfg:s.extend({keySize:128/32,hasher:l,iterations:1}),init:function(u){this.cfg=this.cfg.extend(u)},compute:function(u,d){for(var f,p=this.cfg,m=p.hasher.create(),v=o.create(),E=v.words,_=p.keySize,x=p.iterations;E.length<_;){f&&m.update(f),f=m.update(u).finalize(d),m.reset();for(var w=1;w<x;w++)f=m.finalize(f),m.reset();v.concat(f)}return v.sigBytes=_*4,v}});r.EvpKDF=function(u,d,f){return c.create(f).compute(u,d)}}(),n.EvpKDF})}(K0)),K0.exports}var G0={exports:{}},LE;function vt(){return LE||(LE=1,function(t,e){(function(n,r,i){t.exports=r(ve(),Zi())})(de,function(n){n.lib.Cipher||function(r){var i=n,s=i.lib,o=s.Base,a=s.WordArray,l=s.BufferedBlockAlgorithm,c=i.enc;c.Utf8;var u=c.Base64,d=i.algo,f=d.EvpKDF,p=s.Cipher=l.extend({cfg:o.extend(),createEncryptor:function(S,I){return this.create(this._ENC_XFORM_MODE,S,I)},createDecryptor:function(S,I){return this.create(this._DEC_XFORM_MODE,S,I)},init:function(S,I,N){this.cfg=this.cfg.extend(N),this._xformMode=S,this._key=I,this.reset()},reset:function(){l.reset.call(this),this._doReset()},process:function(S){return this._append(S),this._process()},finalize:function(S){S&&this._append(S);var I=this._doFinalize();return I},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function S(I){return typeof I=="string"?k:R}return function(I){return{encrypt:function(N,D,G){return S(D).encrypt(I,N,D,G)},decrypt:function(N,D,G){return S(D).decrypt(I,N,D,G)}}}}()});s.StreamCipher=p.extend({_doFinalize:function(){var S=this._process(!0);return S},blockSize:1});var m=i.mode={},v=s.BlockCipherMode=o.extend({createEncryptor:function(S,I){return this.Encryptor.create(S,I)},createDecryptor:function(S,I){return this.Decryptor.create(S,I)},init:function(S,I){this._cipher=S,this._iv=I}}),E=m.CBC=function(){var S=v.extend();S.Encryptor=S.extend({processBlock:function(N,D){var G=this._cipher,q=G.blockSize;I.call(this,N,D,q),G.encryptBlock(N,D),this._prevBlock=N.slice(D,D+q)}}),S.Decryptor=S.extend({processBlock:function(N,D){var G=this._cipher,q=G.blockSize,L=N.slice(D,D+q);G.decryptBlock(N,D),I.call(this,N,D,q),this._prevBlock=L}});function I(N,D,G){var q,L=this._iv;L?(q=L,this._iv=r):q=this._prevBlock;for(var X=0;X<G;X++)N[D+X]^=q[X]}return S}(),_=i.pad={},x=_.Pkcs7={pad:function(S,I){for(var N=I*4,D=N-S.sigBytes%N,G=D<<24|D<<16|D<<8|D,q=[],L=0;L<D;L+=4)q.push(G);var X=a.create(q,D);S.concat(X)},unpad:function(S){var I=S.words[S.sigBytes-1>>>2]&255;S.sigBytes-=I}};s.BlockCipher=p.extend({cfg:p.cfg.extend({mode:E,padding:x}),reset:function(){var S;p.reset.call(this);var I=this.cfg,N=I.iv,D=I.mode;this._xformMode==this._ENC_XFORM_MODE?S=D.createEncryptor:(S=D.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==S?this._mode.init(this,N&&N.words):(this._mode=S.call(D,this,N&&N.words),this._mode.__creator=S)},_doProcessBlock:function(S,I){this._mode.processBlock(S,I)},_doFinalize:function(){var S,I=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(I.pad(this._data,this.blockSize),S=this._process(!0)):(S=this._process(!0),I.unpad(S)),S},blockSize:128/32});var w=s.CipherParams=o.extend({init:function(S){this.mixIn(S)},toString:function(S){return(S||this.formatter).stringify(this)}}),A=i.format={},P=A.OpenSSL={stringify:function(S){var I,N=S.ciphertext,D=S.salt;return D?I=a.create([1398893684,1701076831]).concat(D).concat(N):I=N,I.toString(u)},parse:function(S){var I,N=u.parse(S),D=N.words;return D[0]==1398893684&&D[1]==1701076831&&(I=a.create(D.slice(2,4)),D.splice(0,4),N.sigBytes-=16),w.create({ciphertext:N,salt:I})}},R=s.SerializableCipher=o.extend({cfg:o.extend({format:P}),encrypt:function(S,I,N,D){D=this.cfg.extend(D);var G=S.createEncryptor(N,D),q=G.finalize(I),L=G.cfg;return w.create({ciphertext:q,key:N,iv:L.iv,algorithm:S,mode:L.mode,padding:L.padding,blockSize:S.blockSize,formatter:D.format})},decrypt:function(S,I,N,D){D=this.cfg.extend(D),I=this._parse(I,D.format);var G=S.createDecryptor(N,D).finalize(I.ciphertext);return G},_parse:function(S,I){return typeof S=="string"?I.parse(S,this):S}}),C=i.kdf={},b=C.OpenSSL={execute:function(S,I,N,D,G){if(D||(D=a.random(64/8)),G)var q=f.create({keySize:I+N,hasher:G}).compute(S,D);else var q=f.create({keySize:I+N}).compute(S,D);var L=a.create(q.words.slice(I),N*4);return q.sigBytes=I*4,w.create({key:q,iv:L,salt:D})}},k=s.PasswordBasedCipher=R.extend({cfg:R.cfg.extend({kdf:b}),encrypt:function(S,I,N,D){D=this.cfg.extend(D);var G=D.kdf.execute(N,S.keySize,S.ivSize,D.salt,D.hasher);D.iv=G.iv;var q=R.encrypt.call(this,S,I,G.key,D);return q.mixIn(G),q},decrypt:function(S,I,N,D){D=this.cfg.extend(D),I=this._parse(I,D.format);var G=D.kdf.execute(N,S.keySize,S.ivSize,I.salt,D.hasher);D.iv=G.iv;var q=R.decrypt.call(this,S,I,G.key,D);return q}})}()})}(G0)),G0.exports}var Q0={exports:{}},jE;function Sj(){return jE||(jE=1,function(t,e){(function(n,r,i){t.exports=r(ve(),vt())})(de,function(n){return n.mode.CFB=function(){var r=n.lib.BlockCipherMode.extend();r.Encryptor=r.extend({processBlock:function(s,o){var a=this._cipher,l=a.blockSize;i.call(this,s,o,l,a),this._prevBlock=s.slice(o,o+l)}}),r.Decryptor=r.extend({processBlock:function(s,o){var a=this._cipher,l=a.blockSize,c=s.slice(o,o+l);i.call(this,s,o,l,a),this._prevBlock=c}});function i(s,o,a,l){var c,u=this._iv;u?(c=u.slice(0),this._iv=void 0):c=this._prevBlock,l.encryptBlock(c,0);for(var d=0;d<a;d++)s[o+d]^=c[d]}return r}(),n.mode.CFB})}(Q0)),Q0.exports}var Y0={exports:{}},VE;function Ij(){return VE||(VE=1,function(t,e){(function(n,r,i){t.exports=r(ve(),vt())})(de,function(n){return n.mode.CTR=function(){var r=n.lib.BlockCipherMode.extend(),i=r.Encryptor=r.extend({processBlock:function(s,o){var a=this._cipher,l=a.blockSize,c=this._iv,u=this._counter;c&&(u=this._counter=c.slice(0),this._iv=void 0);var d=u.slice(0);a.encryptBlock(d,0),u[l-1]=u[l-1]+1|0;for(var f=0;f<l;f++)s[o+f]^=d[f]}});return r.Decryptor=i,r}(),n.mode.CTR})}(Y0)),Y0.exports}var X0={exports:{}},zE;function kj(){return zE||(zE=1,function(t,e){(function(n,r,i){t.exports=r(ve(),vt())})(de,function(n){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return n.mode.CTRGladman=function(){var r=n.lib.BlockCipherMode.extend();function i(a){if((a>>24&255)===255){var l=a>>16&255,c=a>>8&255,u=a&255;l===255?(l=0,c===255?(c=0,u===255?u=0:++u):++c):++l,a=0,a+=l<<16,a+=c<<8,a+=u}else a+=1<<24;return a}function s(a){return(a[0]=i(a[0]))===0&&(a[1]=i(a[1])),a}var o=r.Encryptor=r.extend({processBlock:function(a,l){var c=this._cipher,u=c.blockSize,d=this._iv,f=this._counter;d&&(f=this._counter=d.slice(0),this._iv=void 0),s(f);var p=f.slice(0);c.encryptBlock(p,0);for(var m=0;m<u;m++)a[l+m]^=p[m]}});return r.Decryptor=o,r}(),n.mode.CTRGladman})}(X0)),X0.exports}var J0={exports:{}},UE;function Pj(){return UE||(UE=1,function(t,e){(function(n,r,i){t.exports=r(ve(),vt())})(de,function(n){return n.mode.OFB=function(){var r=n.lib.BlockCipherMode.extend(),i=r.Encryptor=r.extend({processBlock:function(s,o){var a=this._cipher,l=a.blockSize,c=this._iv,u=this._keystream;c&&(u=this._keystream=c.slice(0),this._iv=void 0),a.encryptBlock(u,0);for(var d=0;d<l;d++)s[o+d]^=u[d]}});return r.Decryptor=i,r}(),n.mode.OFB})}(J0)),J0.exports}var Z0={exports:{}},HE;function Rj(){return HE||(HE=1,function(t,e){(function(n,r,i){t.exports=r(ve(),vt())})(de,function(n){return n.mode.ECB=function(){var r=n.lib.BlockCipherMode.extend();return r.Encryptor=r.extend({processBlock:function(i,s){this._cipher.encryptBlock(i,s)}}),r.Decryptor=r.extend({processBlock:function(i,s){this._cipher.decryptBlock(i,s)}}),r}(),n.mode.ECB})}(Z0)),Z0.exports}var ep={exports:{}},WE;function Dj(){return WE||(WE=1,function(t,e){(function(n,r,i){t.exports=r(ve(),vt())})(de,function(n){return n.pad.AnsiX923={pad:function(r,i){var s=r.sigBytes,o=i*4,a=o-s%o,l=s+a-1;r.clamp(),r.words[l>>>2]|=a<<24-l%4*8,r.sigBytes+=a},unpad:function(r){var i=r.words[r.sigBytes-1>>>2]&255;r.sigBytes-=i}},n.pad.Ansix923})}(ep)),ep.exports}var tp={exports:{}},$E;function Nj(){return $E||($E=1,function(t,e){(function(n,r,i){t.exports=r(ve(),vt())})(de,function(n){return n.pad.Iso10126={pad:function(r,i){var s=i*4,o=s-r.sigBytes%s;r.concat(n.lib.WordArray.random(o-1)).concat(n.lib.WordArray.create([o<<24],1))},unpad:function(r){var i=r.words[r.sigBytes-1>>>2]&255;r.sigBytes-=i}},n.pad.Iso10126})}(tp)),tp.exports}var np={exports:{}},qE;function Fj(){return qE||(qE=1,function(t,e){(function(n,r,i){t.exports=r(ve(),vt())})(de,function(n){return n.pad.Iso97971={pad:function(r,i){r.concat(n.lib.WordArray.create([2147483648],1)),n.pad.ZeroPadding.pad(r,i)},unpad:function(r){n.pad.ZeroPadding.unpad(r),r.sigBytes--}},n.pad.Iso97971})}(np)),np.exports}var rp={exports:{}},KE;function Mj(){return KE||(KE=1,function(t,e){(function(n,r,i){t.exports=r(ve(),vt())})(de,function(n){return n.pad.ZeroPadding={pad:function(r,i){var s=i*4;r.clamp(),r.sigBytes+=s-(r.sigBytes%s||s)},unpad:function(r){for(var i=r.words,s=r.sigBytes-1,s=r.sigBytes-1;s>=0;s--)if(i[s>>>2]>>>24-s%4*8&255){r.sigBytes=s+1;break}}},n.pad.ZeroPadding})}(rp)),rp.exports}var ip={exports:{}},GE;function Oj(){return GE||(GE=1,function(t,e){(function(n,r,i){t.exports=r(ve(),vt())})(de,function(n){return n.pad.NoPadding={pad:function(){},unpad:function(){}},n.pad.NoPadding})}(ip)),ip.exports}var sp={exports:{}},QE;function Bj(){return QE||(QE=1,function(t,e){(function(n,r,i){t.exports=r(ve(),vt())})(de,function(n){return function(r){var i=n,s=i.lib,o=s.CipherParams,a=i.enc,l=a.Hex,c=i.format;c.Hex={stringify:function(u){return u.ciphertext.toString(l)},parse:function(u){var d=l.parse(u);return o.create({ciphertext:d})}}}(),n.format.Hex})}(sp)),sp.exports}var op={exports:{}},YE;function Lj(){return YE||(YE=1,function(t,e){(function(n,r,i){t.exports=r(ve(),Xs(),Js(),Zi(),vt())})(de,function(n){return function(){var r=n,i=r.lib,s=i.BlockCipher,o=r.algo,a=[],l=[],c=[],u=[],d=[],f=[],p=[],m=[],v=[],E=[];(function(){for(var w=[],A=0;A<256;A++)A<128?w[A]=A<<1:w[A]=A<<1^283;for(var P=0,R=0,A=0;A<256;A++){var C=R^R<<1^R<<2^R<<3^R<<4;C=C>>>8^C&255^99,a[P]=C,l[C]=P;var b=w[P],k=w[b],S=w[k],I=w[C]*257^C*16843008;c[P]=I<<24|I>>>8,u[P]=I<<16|I>>>16,d[P]=I<<8|I>>>24,f[P]=I;var I=S*16843009^k*65537^b*257^P*16843008;p[C]=I<<24|I>>>8,m[C]=I<<16|I>>>16,v[C]=I<<8|I>>>24,E[C]=I,P?(P=b^w[w[w[S^b]]],R^=w[w[R]]):P=R=1}})();var _=[0,1,2,4,8,16,32,64,128,27,54],x=o.AES=s.extend({_doReset:function(){var w;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var A=this._keyPriorReset=this._key,P=A.words,R=A.sigBytes/4,C=this._nRounds=R+6,b=(C+1)*4,k=this._keySchedule=[],S=0;S<b;S++)S<R?k[S]=P[S]:(w=k[S-1],S%R?R>6&&S%R==4&&(w=a[w>>>24]<<24|a[w>>>16&255]<<16|a[w>>>8&255]<<8|a[w&255]):(w=w<<8|w>>>24,w=a[w>>>24]<<24|a[w>>>16&255]<<16|a[w>>>8&255]<<8|a[w&255],w^=_[S/R|0]<<24),k[S]=k[S-R]^w);for(var I=this._invKeySchedule=[],N=0;N<b;N++){var S=b-N;if(N%4)var w=k[S];else var w=k[S-4];N<4||S<=4?I[N]=w:I[N]=p[a[w>>>24]]^m[a[w>>>16&255]]^v[a[w>>>8&255]]^E[a[w&255]]}}},encryptBlock:function(w,A){this._doCryptBlock(w,A,this._keySchedule,c,u,d,f,a)},decryptBlock:function(w,A){var P=w[A+1];w[A+1]=w[A+3],w[A+3]=P,this._doCryptBlock(w,A,this._invKeySchedule,p,m,v,E,l);var P=w[A+1];w[A+1]=w[A+3],w[A+3]=P},_doCryptBlock:function(w,A,P,R,C,b,k,S){for(var I=this._nRounds,N=w[A]^P[0],D=w[A+1]^P[1],G=w[A+2]^P[2],q=w[A+3]^P[3],L=4,X=1;X<I;X++){var j=R[N>>>24]^C[D>>>16&255]^b[G>>>8&255]^k[q&255]^P[L++],W=R[D>>>24]^C[G>>>16&255]^b[q>>>8&255]^k[N&255]^P[L++],Q=R[G>>>24]^C[q>>>16&255]^b[N>>>8&255]^k[D&255]^P[L++],B=R[q>>>24]^C[N>>>16&255]^b[D>>>8&255]^k[G&255]^P[L++];N=j,D=W,G=Q,q=B}var j=(S[N>>>24]<<24|S[D>>>16&255]<<16|S[G>>>8&255]<<8|S[q&255])^P[L++],W=(S[D>>>24]<<24|S[G>>>16&255]<<16|S[q>>>8&255]<<8|S[N&255])^P[L++],Q=(S[G>>>24]<<24|S[q>>>16&255]<<16|S[N>>>8&255]<<8|S[D&255])^P[L++],B=(S[q>>>24]<<24|S[N>>>16&255]<<16|S[D>>>8&255]<<8|S[G&255])^P[L++];w[A]=j,w[A+1]=W,w[A+2]=Q,w[A+3]=B},keySize:256/32});r.AES=s._createHelper(x)}(),n.AES})}(op)),op.exports}var ap={exports:{}},XE;function jj(){return XE||(XE=1,function(t,e){(function(n,r,i){t.exports=r(ve(),Xs(),Js(),Zi(),vt())})(de,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=i.BlockCipher,a=r.algo,l=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],c=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],u=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],d=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],f=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],p=a.DES=o.extend({_doReset:function(){for(var _=this._key,x=_.words,w=[],A=0;A<56;A++){var P=l[A]-1;w[A]=x[P>>>5]>>>31-P%32&1}for(var R=this._subKeys=[],C=0;C<16;C++){for(var b=R[C]=[],k=u[C],A=0;A<24;A++)b[A/6|0]|=w[(c[A]-1+k)%28]<<31-A%6,b[4+(A/6|0)]|=w[28+(c[A+24]-1+k)%28]<<31-A%6;b[0]=b[0]<<1|b[0]>>>31;for(var A=1;A<7;A++)b[A]=b[A]>>>(A-1)*4+3;b[7]=b[7]<<5|b[7]>>>27}for(var S=this._invSubKeys=[],A=0;A<16;A++)S[A]=R[15-A]},encryptBlock:function(_,x){this._doCryptBlock(_,x,this._subKeys)},decryptBlock:function(_,x){this._doCryptBlock(_,x,this._invSubKeys)},_doCryptBlock:function(_,x,w){this._lBlock=_[x],this._rBlock=_[x+1],m.call(this,4,252645135),m.call(this,16,65535),v.call(this,2,858993459),v.call(this,8,16711935),m.call(this,1,1431655765);for(var A=0;A<16;A++){for(var P=w[A],R=this._lBlock,C=this._rBlock,b=0,k=0;k<8;k++)b|=d[k][((C^P[k])&f[k])>>>0];this._lBlock=C,this._rBlock=R^b}var S=this._lBlock;this._lBlock=this._rBlock,this._rBlock=S,m.call(this,1,1431655765),v.call(this,8,16711935),v.call(this,2,858993459),m.call(this,16,65535),m.call(this,4,252645135),_[x]=this._lBlock,_[x+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function m(_,x){var w=(this._lBlock>>>_^this._rBlock)&x;this._rBlock^=w,this._lBlock^=w<<_}function v(_,x){var w=(this._rBlock>>>_^this._lBlock)&x;this._lBlock^=w,this._rBlock^=w<<_}r.DES=o._createHelper(p);var E=a.TripleDES=o.extend({_doReset:function(){var _=this._key,x=_.words;if(x.length!==2&&x.length!==4&&x.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var w=x.slice(0,2),A=x.length<4?x.slice(0,2):x.slice(2,4),P=x.length<6?x.slice(0,2):x.slice(4,6);this._des1=p.createEncryptor(s.create(w)),this._des2=p.createEncryptor(s.create(A)),this._des3=p.createEncryptor(s.create(P))},encryptBlock:function(_,x){this._des1.encryptBlock(_,x),this._des2.decryptBlock(_,x),this._des3.encryptBlock(_,x)},decryptBlock:function(_,x){this._des3.decryptBlock(_,x),this._des2.encryptBlock(_,x),this._des1.decryptBlock(_,x)},keySize:192/32,ivSize:64/32,blockSize:64/32});r.TripleDES=o._createHelper(E)}(),n.TripleDES})}(ap)),ap.exports}var lp={exports:{}},JE;function Vj(){return JE||(JE=1,function(t,e){(function(n,r,i){t.exports=r(ve(),Xs(),Js(),Zi(),vt())})(de,function(n){return function(){var r=n,i=r.lib,s=i.StreamCipher,o=r.algo,a=o.RC4=s.extend({_doReset:function(){for(var u=this._key,d=u.words,f=u.sigBytes,p=this._S=[],m=0;m<256;m++)p[m]=m;for(var m=0,v=0;m<256;m++){var E=m%f,_=d[E>>>2]>>>24-E%4*8&255;v=(v+p[m]+_)%256;var x=p[m];p[m]=p[v],p[v]=x}this._i=this._j=0},_doProcessBlock:function(u,d){u[d]^=l.call(this)},keySize:256/32,ivSize:0});function l(){for(var u=this._S,d=this._i,f=this._j,p=0,m=0;m<4;m++){d=(d+1)%256,f=(f+u[d])%256;var v=u[d];u[d]=u[f],u[f]=v,p|=u[(u[d]+u[f])%256]<<24-m*8}return this._i=d,this._j=f,p}r.RC4=s._createHelper(a);var c=o.RC4Drop=a.extend({cfg:a.cfg.extend({drop:192}),_doReset:function(){a._doReset.call(this);for(var u=this.cfg.drop;u>0;u--)l.call(this)}});r.RC4Drop=s._createHelper(c)}(),n.RC4})}(lp)),lp.exports}var cp={exports:{}},ZE;function zj(){return ZE||(ZE=1,function(t,e){(function(n,r,i){t.exports=r(ve(),Xs(),Js(),Zi(),vt())})(de,function(n){return function(){var r=n,i=r.lib,s=i.StreamCipher,o=r.algo,a=[],l=[],c=[],u=o.Rabbit=s.extend({_doReset:function(){for(var f=this._key.words,p=this.cfg.iv,m=0;m<4;m++)f[m]=(f[m]<<8|f[m]>>>24)&16711935|(f[m]<<24|f[m]>>>8)&4278255360;var v=this._X=[f[0],f[3]<<16|f[2]>>>16,f[1],f[0]<<16|f[3]>>>16,f[2],f[1]<<16|f[0]>>>16,f[3],f[2]<<16|f[1]>>>16],E=this._C=[f[2]<<16|f[2]>>>16,f[0]&4294901760|f[1]&65535,f[3]<<16|f[3]>>>16,f[1]&4294901760|f[2]&65535,f[0]<<16|f[0]>>>16,f[2]&4294901760|f[3]&65535,f[1]<<16|f[1]>>>16,f[3]&4294901760|f[0]&65535];this._b=0;for(var m=0;m<4;m++)d.call(this);for(var m=0;m<8;m++)E[m]^=v[m+4&7];if(p){var _=p.words,x=_[0],w=_[1],A=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360,P=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360,R=A>>>16|P&4294901760,C=P<<16|A&65535;E[0]^=A,E[1]^=R,E[2]^=P,E[3]^=C,E[4]^=A,E[5]^=R,E[6]^=P,E[7]^=C;for(var m=0;m<4;m++)d.call(this)}},_doProcessBlock:function(f,p){var m=this._X;d.call(this),a[0]=m[0]^m[5]>>>16^m[3]<<16,a[1]=m[2]^m[7]>>>16^m[5]<<16,a[2]=m[4]^m[1]>>>16^m[7]<<16,a[3]=m[6]^m[3]>>>16^m[1]<<16;for(var v=0;v<4;v++)a[v]=(a[v]<<8|a[v]>>>24)&16711935|(a[v]<<24|a[v]>>>8)&4278255360,f[p+v]^=a[v]},blockSize:128/32,ivSize:64/32});function d(){for(var f=this._X,p=this._C,m=0;m<8;m++)l[m]=p[m];p[0]=p[0]+1295307597+this._b|0,p[1]=p[1]+3545052371+(p[0]>>>0<l[0]>>>0?1:0)|0,p[2]=p[2]+886263092+(p[1]>>>0<l[1]>>>0?1:0)|0,p[3]=p[3]+1295307597+(p[2]>>>0<l[2]>>>0?1:0)|0,p[4]=p[4]+3545052371+(p[3]>>>0<l[3]>>>0?1:0)|0,p[5]=p[5]+886263092+(p[4]>>>0<l[4]>>>0?1:0)|0,p[6]=p[6]+1295307597+(p[5]>>>0<l[5]>>>0?1:0)|0,p[7]=p[7]+3545052371+(p[6]>>>0<l[6]>>>0?1:0)|0,this._b=p[7]>>>0<l[7]>>>0?1:0;for(var m=0;m<8;m++){var v=f[m]+p[m],E=v&65535,_=v>>>16,x=((E*E>>>17)+E*_>>>15)+_*_,w=((v&4294901760)*v|0)+((v&65535)*v|0);c[m]=x^w}f[0]=c[0]+(c[7]<<16|c[7]>>>16)+(c[6]<<16|c[6]>>>16)|0,f[1]=c[1]+(c[0]<<8|c[0]>>>24)+c[7]|0,f[2]=c[2]+(c[1]<<16|c[1]>>>16)+(c[0]<<16|c[0]>>>16)|0,f[3]=c[3]+(c[2]<<8|c[2]>>>24)+c[1]|0,f[4]=c[4]+(c[3]<<16|c[3]>>>16)+(c[2]<<16|c[2]>>>16)|0,f[5]=c[5]+(c[4]<<8|c[4]>>>24)+c[3]|0,f[6]=c[6]+(c[5]<<16|c[5]>>>16)+(c[4]<<16|c[4]>>>16)|0,f[7]=c[7]+(c[6]<<8|c[6]>>>24)+c[5]|0}r.Rabbit=s._createHelper(u)}(),n.Rabbit})}(cp)),cp.exports}var up={exports:{}},ew;function Uj(){return ew||(ew=1,function(t,e){(function(n,r,i){t.exports=r(ve(),Xs(),Js(),Zi(),vt())})(de,function(n){return function(){var r=n,i=r.lib,s=i.StreamCipher,o=r.algo,a=[],l=[],c=[],u=o.RabbitLegacy=s.extend({_doReset:function(){var f=this._key.words,p=this.cfg.iv,m=this._X=[f[0],f[3]<<16|f[2]>>>16,f[1],f[0]<<16|f[3]>>>16,f[2],f[1]<<16|f[0]>>>16,f[3],f[2]<<16|f[1]>>>16],v=this._C=[f[2]<<16|f[2]>>>16,f[0]&4294901760|f[1]&65535,f[3]<<16|f[3]>>>16,f[1]&4294901760|f[2]&65535,f[0]<<16|f[0]>>>16,f[2]&4294901760|f[3]&65535,f[1]<<16|f[1]>>>16,f[3]&4294901760|f[0]&65535];this._b=0;for(var E=0;E<4;E++)d.call(this);for(var E=0;E<8;E++)v[E]^=m[E+4&7];if(p){var _=p.words,x=_[0],w=_[1],A=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360,P=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360,R=A>>>16|P&4294901760,C=P<<16|A&65535;v[0]^=A,v[1]^=R,v[2]^=P,v[3]^=C,v[4]^=A,v[5]^=R,v[6]^=P,v[7]^=C;for(var E=0;E<4;E++)d.call(this)}},_doProcessBlock:function(f,p){var m=this._X;d.call(this),a[0]=m[0]^m[5]>>>16^m[3]<<16,a[1]=m[2]^m[7]>>>16^m[5]<<16,a[2]=m[4]^m[1]>>>16^m[7]<<16,a[3]=m[6]^m[3]>>>16^m[1]<<16;for(var v=0;v<4;v++)a[v]=(a[v]<<8|a[v]>>>24)&16711935|(a[v]<<24|a[v]>>>8)&4278255360,f[p+v]^=a[v]},blockSize:128/32,ivSize:64/32});function d(){for(var f=this._X,p=this._C,m=0;m<8;m++)l[m]=p[m];p[0]=p[0]+1295307597+this._b|0,p[1]=p[1]+3545052371+(p[0]>>>0<l[0]>>>0?1:0)|0,p[2]=p[2]+886263092+(p[1]>>>0<l[1]>>>0?1:0)|0,p[3]=p[3]+1295307597+(p[2]>>>0<l[2]>>>0?1:0)|0,p[4]=p[4]+3545052371+(p[3]>>>0<l[3]>>>0?1:0)|0,p[5]=p[5]+886263092+(p[4]>>>0<l[4]>>>0?1:0)|0,p[6]=p[6]+1295307597+(p[5]>>>0<l[5]>>>0?1:0)|0,p[7]=p[7]+3545052371+(p[6]>>>0<l[6]>>>0?1:0)|0,this._b=p[7]>>>0<l[7]>>>0?1:0;for(var m=0;m<8;m++){var v=f[m]+p[m],E=v&65535,_=v>>>16,x=((E*E>>>17)+E*_>>>15)+_*_,w=((v&4294901760)*v|0)+((v&65535)*v|0);c[m]=x^w}f[0]=c[0]+(c[7]<<16|c[7]>>>16)+(c[6]<<16|c[6]>>>16)|0,f[1]=c[1]+(c[0]<<8|c[0]>>>24)+c[7]|0,f[2]=c[2]+(c[1]<<16|c[1]>>>16)+(c[0]<<16|c[0]>>>16)|0,f[3]=c[3]+(c[2]<<8|c[2]>>>24)+c[1]|0,f[4]=c[4]+(c[3]<<16|c[3]>>>16)+(c[2]<<16|c[2]>>>16)|0,f[5]=c[5]+(c[4]<<8|c[4]>>>24)+c[3]|0,f[6]=c[6]+(c[5]<<16|c[5]>>>16)+(c[4]<<16|c[4]>>>16)|0,f[7]=c[7]+(c[6]<<8|c[6]>>>24)+c[5]|0}r.RabbitLegacy=s._createHelper(u)}(),n.RabbitLegacy})}(up)),up.exports}var hp={exports:{}},tw;function Hj(){return tw||(tw=1,function(t,e){(function(n,r,i){t.exports=r(ve(),Xs(),Js(),Zi(),vt())})(de,function(n){return function(){var r=n,i=r.lib,s=i.BlockCipher,o=r.algo;const a=16,l=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],c=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var u={pbox:[],sbox:[]};function d(E,_){let x=_>>24&255,w=_>>16&255,A=_>>8&255,P=_&255,R=E.sbox[0][x]+E.sbox[1][w];return R=R^E.sbox[2][A],R=R+E.sbox[3][P],R}function f(E,_,x){let w=_,A=x,P;for(let R=0;R<a;++R)w=w^E.pbox[R],A=d(E,w)^A,P=w,w=A,A=P;return P=w,w=A,A=P,A=A^E.pbox[a],w=w^E.pbox[a+1],{left:w,right:A}}function p(E,_,x){let w=_,A=x,P;for(let R=a+1;R>1;--R)w=w^E.pbox[R],A=d(E,w)^A,P=w,w=A,A=P;return P=w,w=A,A=P,A=A^E.pbox[1],w=w^E.pbox[0],{left:w,right:A}}function m(E,_,x){for(let C=0;C<4;C++){E.sbox[C]=[];for(let b=0;b<256;b++)E.sbox[C][b]=c[C][b]}let w=0;for(let C=0;C<a+2;C++)E.pbox[C]=l[C]^_[w],w++,w>=x&&(w=0);let A=0,P=0,R=0;for(let C=0;C<a+2;C+=2)R=f(E,A,P),A=R.left,P=R.right,E.pbox[C]=A,E.pbox[C+1]=P;for(let C=0;C<4;C++)for(let b=0;b<256;b+=2)R=f(E,A,P),A=R.left,P=R.right,E.sbox[C][b]=A,E.sbox[C][b+1]=P;return!0}var v=o.Blowfish=s.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var E=this._keyPriorReset=this._key,_=E.words,x=E.sigBytes/4;m(u,_,x)}},encryptBlock:function(E,_){var x=f(u,E[_],E[_+1]);E[_]=x.left,E[_+1]=x.right},decryptBlock:function(E,_){var x=p(u,E[_],E[_+1]);E[_]=x.left,E[_+1]=x.right},blockSize:64/32,keySize:128/32,ivSize:64/32});r.Blowfish=s._createHelper(v)}(),n.Blowfish})}(hp)),hp.exports}(function(t,e){(function(n,r,i){t.exports=r(ve(),gf(),yj(),_j(),Xs(),Ej(),Js(),gS(),Cv(),wj(),mS(),bj(),Cj(),Aj(),Av(),Tj(),Zi(),vt(),Sj(),Ij(),kj(),Pj(),Rj(),Dj(),Nj(),Fj(),Mj(),Oj(),Bj(),Lj(),jj(),Vj(),zj(),Uj(),Hj())})(de,function(n){return n})})(pS);var Wj=pS.exports;const $j=rw(Wj),qj=({currentUser:t})=>{const e=M.useRef(null);return M.useEffect(()=>{const n=(t==null?void 0:t.uid)||"guest_user",i=$j.HmacSHA256(n,"dbjin8z9tdvktq2dkm661iecb1uxkcjn").toString(),s=document.getElementById("chatbase-frame");s&&s.remove();const o=document.createElement("iframe");o.src=`https://www.chatbase.co/chatbot-iframe/YqM2rVJeK1WB1LyvIDGy7?userId=${n}&signature=${i}`,o.width="100%",o.height="100%",o.style.border="none",o.id="chatbase-frame",e.current&&(e.current.innerHTML="",e.current.appendChild(o))},[t]),g.jsxs("div",{className:"ai-chat-fullscreen",children:[" ",g.jsx("h1",{className:"page-title",children:"AI Business Assistant "})," ",g.jsx("div",{ref:e,className:"chatbot-container"})," "]})},Kj=({user:t})=>{const{updateUserProfile:e}=cn(),[n,r]=M.useState(!1),[i,s]=M.useState(""),[o,a]=M.useState(""),[l,c]=M.useState({displayName:"",email:"",phoneNumber:""}),[u,d]=M.useState(null),[f,p]=M.useState(null);M.useEffect(()=>{if(!t)return;c({displayName:t.displayName||"",email:t.email||"",phoneNumber:""}),t.photoURL&&p(t.photoURL),(async()=>{try{const x=await $x(In(it,"users",t.uid));if(x.exists()){const w=x.data();c(A=>({...A,phoneNumber:w.phoneNumber||""}))}}catch(x){console.error("Error fetching user data:",x)}})()},[t]);const m=_=>{const{name:x,value:w}=_.target;c(A=>({...A,[x]:w}))},v=_=>{const x=_.target.files[0];if(!x)return;d(x);const w=new FileReader;w.onloadend=()=>{p(w.result)},w.readAsDataURL(x)},E=async _=>{_.preventDefault(),r(!0),a(""),s("");try{let x=t.photoURL;if(u){const w=Bg(Lg,`users/${t.uid}/profile-image`);await SF(w,u),x=await IF(w)}await hC(t,{displayName:l.displayName,photoURL:x}),await HA(In(it,"users",t.uid),{displayName:l.displayName,phoneNumber:l.phoneNumber,photoURL:x,updatedAt:new Date},{merge:!0}),s("Profile updated successfully!")}catch(x){console.error("Error updating profile:",x),a("Failed to update profile. Please try again.")}r(!1)};return g.jsxs("div",{className:"profile-settings",children:[g.jsx("h2",{className:"section-title",children:"Profile Settings"}),o&&g.jsx("div",{className:"error-message",children:o}),i&&g.jsx("div",{className:"success-message",children:i}),g.jsxs("form",{onSubmit:E,className:"settings-form",children:[g.jsx("div",{className:"profile-image-upload",children:g.jsxs("div",{className:"profile-image-container",children:[f?g.jsx("img",{src:f||"/placeholder.svg",alt:"Profile",className:"profile-image"}):g.jsx("div",{className:"profile-placeholder",children:g.jsx(ov,{})}),g.jsx("label",{htmlFor:"profile-image",className:"image-upload-label",children:g.jsx(uT,{})}),g.jsx("input",{type:"file",id:"profile-image",accept:"image/*",onChange:v,className:"image-upload-input"})]})}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"displayName",children:"Full Name"}),g.jsx("input",{type:"text",id:"displayName",name:"displayName",value:l.displayName,onChange:m,required:!0})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"email",children:"Email"}),g.jsx("input",{type:"email",id:"email",name:"email",value:l.email,disabled:!0,className:"disabled-input"}),g.jsx("small",{className:"input-note",children:"Email cannot be changed"})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"phoneNumber",children:"Phone Number"}),g.jsx("input",{type:"tel",id:"phoneNumber",name:"phoneNumber",value:l.phoneNumber,onChange:m,placeholder:"Enter your phone number"})]}),g.jsx("button",{type:"submit",className:"primary-btn save-btn",disabled:n,children:n?"Saving...":"Save Changes"})]})]})},Gj=({user:t})=>{const[e,n]=M.useState(!1),[r,i]=M.useState(""),[s,o]=M.useState(""),[a,l]=M.useState({storeName:"",address:"",contactNumber:"",gstin:"",storeType:""}),c=["Kirana Store","Medical Store","Bookstore","Electronics","Clothing","Hardware","Stationery","Other"];M.useEffect(()=>{if(!t)return;(async()=>{try{const p=await $x(In(it,"stores",t.uid));p.exists()&&l(p.data())}catch(p){console.error("Error fetching store data:",p)}})()},[t]);const u=f=>{const{name:p,value:m}=f.target;l(v=>({...v,[p]:m}))},d=async f=>{f.preventDefault(),n(!0),o(""),i("");try{await HA(In(it,"stores",t.uid),{...a,updatedAt:new Date},{merge:!0}),i("Store details updated successfully!")}catch(p){console.error("Error updating store details:",p),o("Failed to update store details. Please try again.")}n(!1)};return g.jsxs("div",{className:"store-details",children:[g.jsx("h2",{className:"section-title",children:"Store Details"}),s&&g.jsx("div",{className:"error-message",children:s}),r&&g.jsx("div",{className:"success-message",children:r}),g.jsxs("form",{onSubmit:d,className:"settings-form",children:[g.jsx("div",{className:"store-icon",children:g.jsx(xT,{})}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"storeName",children:"Store Name"}),g.jsx("input",{type:"text",id:"storeName",name:"storeName",value:a.storeName,onChange:u,required:!0,placeholder:"Enter your store name"})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"address",children:"Address"}),g.jsx("textarea",{id:"address",name:"address",value:a.address,onChange:u,rows:"3",placeholder:"Enter your store address"})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"contactNumber",children:"Contact Number"}),g.jsx("input",{type:"tel",id:"contactNumber",name:"contactNumber",value:a.contactNumber,onChange:u,placeholder:"Enter store contact number"})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"gstin",children:"GSTIN (Optional)"}),g.jsx("input",{type:"text",id:"gstin",name:"gstin",value:a.gstin,onChange:u,placeholder:"Enter your GSTIN"})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"storeType",children:"Store Type"}),g.jsxs("select",{id:"storeType",name:"storeType",value:a.storeType,onChange:u,required:!0,children:[g.jsx("option",{value:"",children:"Select Store Type"}),c.map(f=>g.jsx("option",{value:f,children:f},f))]})]}),g.jsx("button",{type:"submit",className:"primary-btn save-btn",disabled:e,children:e?"Saving...":"Save Store Details"})]})]})},Qj=({user:t})=>{const{logout:e}=cn(),n=Gr(),[r,i]=M.useState(!1),[s,o]=M.useState(""),[a,l]=M.useState(!1),[c,u]=M.useState({createdAt:null,plan:"Free Plan"});M.useEffect(()=>{if(!t)return;(async()=>{try{const v=await $x(In(it,"users",t.uid));if(v.exists()){const E=v.data();u({createdAt:t.metadata.creationTime,plan:E.plan||"Free Plan"})}else u({createdAt:t.metadata.creationTime,plan:"Free Plan"})}catch(v){console.error("Error fetching user metadata:",v)}})()},[t]);const d=async()=>{try{await e(),n("/")}catch(m){console.error("Error logging out:",m),o("Failed to log out. Please try again.")}},f=async()=>{i(!0),o("");try{const m=lr(it,"inventory"),v=Hi(m,Mr("userId","==",t.uid)),E=await id(v),_=[];E.forEach(A=>{_.push(ih(A.ref))}),await Promise.all(_),await ih(In(it,"stores",t.uid)),await ih(In(it,"users",t.uid));const x=Bg(Lg,`users/${t.uid}`),w=Bg(Lg,`inventory/${t.uid}`);try{const P=(await Q_(x)).items.map(b=>Y_(b));await Promise.all(P);const C=(await Q_(w)).items.map(b=>Y_(b));await Promise.all(C)}catch(A){console.error("Error deleting storage files:",A)}await tR(t),n("/")}catch(m){console.error("Error deleting account:",m),o("Failed to delete account. Please try again."),i(!1)}},p=m=>m?new Date(m).toLocaleDateString("en-IN",{day:"2-digit",month:"long",year:"numeric"}):"Unknown";return g.jsxs("div",{className:"account-settings",children:[g.jsx("h2",{className:"section-title",children:"Account Settings"}),s&&g.jsx("div",{className:"error-message",children:s}),g.jsxs("div",{className:"account-info",children:[g.jsxs("div",{className:"info-item",children:[g.jsx("span",{className:"info-label",children:"Email"}),g.jsx("span",{className:"info-value",children:t==null?void 0:t.email})]}),g.jsxs("div",{className:"info-item",children:[g.jsx("span",{className:"info-label",children:"Account Created"}),g.jsx("span",{className:"info-value",children:p(c.createdAt)})]}),g.jsxs("div",{className:"info-item",children:[g.jsx("span",{className:"info-label",children:"Current Plan"}),g.jsx("span",{className:"info-value plan-badge",children:c.plan})]})]}),g.jsxs("div",{className:"account-actions",children:[g.jsxs("button",{className:"secondary-btn logout-btn",onClick:d,children:[g.jsx(mT,{className:"btn-icon"}),g.jsx("span",{children:"Log Out"})]}),a?g.jsxs("div",{className:"delete-confirmation",children:[g.jsxs("div",{className:"confirmation-message",children:[g.jsx(UF,{className:"warning-icon"}),g.jsx("p",{children:"Are you sure you want to delete your account? This action cannot be undone and will permanently delete all your data."})]}),g.jsxs("div",{className:"confirmation-actions",children:[g.jsx("button",{className:"outline-btn cancel-btn",onClick:()=>l(!1),children:"Cancel"}),g.jsx("button",{className:"danger-btn confirm-delete-btn",onClick:f,disabled:r,children:r?"Deleting...":"Yes, Delete My Account"})]})]}):g.jsxs("button",{className:"danger-btn delete-btn",onClick:()=>l(!0),children:[g.jsx(od,{className:"btn-icon"}),g.jsx("span",{children:"Delete Account"})]})]})]})},Yj=({user:t})=>{const[e,n]=M.useState(!1),[r,i]=M.useState(""),[s,o]=M.useState(""),[a,l]=M.useState(!1),[c,u]=M.useState(!1),[d,f]=M.useState(!1),[p,m]=M.useState({currentPassword:"",newPassword:"",confirmPassword:""}),v=x=>{const{name:w,value:A}=x.target;m(P=>({...P,[w]:A}))},E=x=>{switch(x){case"current":l(!a);break;case"new":u(!c);break;case"confirm":f(!d);break}},_=async x=>{if(x.preventDefault(),n(!0),o(""),i(""),p.newPassword!==p.confirmPassword){o("New passwords do not match"),n(!1);return}if(p.newPassword.length<6){o("New password must be at least 6 characters long"),n(!1);return}try{const w=Ks.credential(t.email,p.currentPassword);await $P(t,w),await QP(t,p.newPassword),m({currentPassword:"",newPassword:"",confirmPassword:""}),i("Password updated successfully!")}catch(w){console.error("Error updating password:",w),w.code==="auth/wrong-password"?o("Current password is incorrect"):o("Failed to update password. Please try again.")}n(!1)};return g.jsxs("div",{className:"password-settings",children:[g.jsx("h2",{className:"section-title",children:"Change Password"}),s&&g.jsx("div",{className:"error-message",children:s}),r&&g.jsx("div",{className:"success-message",children:r}),g.jsxs("form",{onSubmit:_,className:"settings-form",children:[g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"currentPassword",children:"Current Password"}),g.jsxs("div",{className:"password-input-container",children:[g.jsx("input",{type:a?"text":"password",id:"currentPassword",name:"currentPassword",value:p.currentPassword,onChange:v,required:!0}),g.jsx("button",{type:"button",className:"toggle-password-btn",onClick:()=>E("current"),tabIndex:"-1",children:a?g.jsx(x0,{}):g.jsx(oh,{})})]})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"newPassword",children:"New Password"}),g.jsxs("div",{className:"password-input-container",children:[g.jsx("input",{type:c?"text":"password",id:"newPassword",name:"newPassword",value:p.newPassword,onChange:v,required:!0,minLength:"6"}),g.jsx("button",{type:"button",className:"toggle-password-btn",onClick:()=>E("new"),tabIndex:"-1",children:c?g.jsx(x0,{}):g.jsx(oh,{})})]})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"confirmPassword",children:"Confirm New Password"}),g.jsxs("div",{className:"password-input-container",children:[g.jsx("input",{type:d?"text":"password",id:"confirmPassword",name:"confirmPassword",value:p.confirmPassword,onChange:v,required:!0,minLength:"6"}),g.jsx("button",{type:"button",className:"toggle-password-btn",onClick:()=>E("confirm"),tabIndex:"-1",children:d?g.jsx(x0,{}):g.jsx(oh,{})})]})]}),g.jsx("button",{type:"submit",className:"primary-btn save-btn",disabled:e,children:e?"Updating...":"Update Password"})]})]})},nw=()=>{const{section:t}=U8(),e=Gr(),[n,r]=M.useState("profile"),{currentUser:i}=cn();M.useEffect(()=>{t?r(t):e("/settings/profile",{replace:!0})},[t,e]);const s=o=>{r(o),e(`/settings/${o}`)};return g.jsxs("div",{className:"settings-page",children:[g.jsx("h1",{className:"page-title",children:"Settings"}),g.jsxs("div",{className:"settings-container",children:[g.jsxs("div",{className:"settings-tabs",children:[g.jsxs("button",{className:`tab-button ${n==="profile"?"active":""}`,onClick:()=>s("profile"),children:[g.jsx(ov,{className:"tab-icon"}),g.jsx("span",{children:"Profile"})]}),g.jsxs("button",{className:`tab-button ${n==="store"?"active":""}`,onClick:()=>s("store"),children:[g.jsx(xT,{className:"tab-icon"}),g.jsx("span",{children:"Store Details"})]}),g.jsxs("button",{className:`tab-button ${n==="account"?"active":""}`,onClick:()=>s("account"),children:[g.jsx(rv,{className:"tab-icon"}),g.jsx("span",{children:"Account"})]}),g.jsxs("button",{className:`tab-button ${n==="password"?"active":""}`,onClick:()=>s("password"),children:[g.jsx(sd,{className:"tab-icon"}),g.jsx("span",{children:"Password"})]})]}),g.jsxs("div",{className:"settings-content",children:[n==="profile"&&g.jsx(Kj,{user:i}),n==="store"&&g.jsx(Gj,{user:i}),n==="account"&&g.jsx(Qj,{user:i}),n==="password"&&g.jsx(Yj,{user:i})]})]})]})},Xj=()=>{const{currentUser:t}=cn(),[e,n]=M.useState([]),[r,i]=M.useState([]),[s,o]=M.useState(""),[a,l]=M.useState([]),[c,u]=M.useState(!0),[d,f]=M.useState(""),[p,m]=M.useState(!1),[v,E]=M.useState(""),[_,x]=M.useState(""),[w,A]=M.useState(!1),[P,R]=M.useState(null);M.useEffect(()=>{if(!t)return;u(!0);const L=Hi(lr(it,"inventory"),Mr("userId","==",t.uid));return sf(L,j=>{const W=[];j.forEach(Q=>{W.push({id:Q.id,...Q.data()})}),n(W),i(W),u(!1)},j=>{console.error("Error fetching inventory:",j),f("Failed to load inventory items"),u(!1)})},[t]),M.useEffect(()=>{if(s.trim()==="")i(e);else{const L=e.filter(X=>X.name.toLowerCase().includes(s.toLowerCase()));i(L)}},[s,e]);const C=a.reduce((L,X)=>L+X.price*X.quantity,0),b=L=>{const X=a.find(j=>j.id===L.id);X?X.quantity<L.availableQuantity?l(a.map(j=>j.id===L.id?{...j,quantity:j.quantity+1}:j)):(f(`Maximum available quantity for ${L.name} is ${L.availableQuantity}`),setTimeout(()=>f(""),3e3)):L.quantity>0?l([...a,{...L,quantity:1,availableQuantity:L.quantity}]):(f(`${L.name} is out of stock`),setTimeout(()=>f(""),3e3))},k=L=>{l(a.filter(X=>X.id!==L))},S=(L,X)=>{const j=a.find(W=>W.id===L);if(X<=0){k(L);return}if(X>j.availableQuantity){f(`Maximum available quantity for ${j.name} is ${j.availableQuantity}`),setTimeout(()=>f(""),3e3);return}l(a.map(W=>W.id===L?{...W,quantity:X}:W))},I=()=>{l([])},N=L=>{if(E(L),L==="upi"){alert("UPI payment is coming soon!");return}m(!0)},D=()=>(Number.parseFloat(_)||0)-C,G=async()=>{try{const L={userId:t.uid,items:a.map(W=>({id:W.id,name:W.name,quantity:W.quantity,price:W.price,subtotal:W.price*W.quantity})),total:C,paymentMethod:v,amountPaid:Number.parseFloat(_)||0,change:D(),timestamp:sh()},X=await WA(lr(it,"receipts"),L),j=a.map(W=>{const Q=W.availableQuantity-W.quantity;return Fg(In(it,"inventory",W.id),{quantity:Q})});await Promise.all(j),R({id:X.id,...L,timestamp:new Date}),A(!0),m(!1),l([]),x(""),E("")}catch(L){console.error("Error generating receipt:",L),f("Failed to generate receipt")}},q=()=>{A(!1),R(null)};return g.jsxs("div",{className:"billing-page",children:[g.jsx("h1",{className:"page-title",children:"Billing"}),d&&g.jsx("div",{className:"error-message",children:d}),g.jsxs("div",{className:"billing-container",children:[g.jsxs("div",{className:"inventory-section",children:[g.jsxs("div",{className:"search-container",children:[g.jsx(sv,{className:"search-icon"}),g.jsx("input",{type:"text",placeholder:"Search items...",value:s,onChange:L=>o(L.target.value),className:"search-input"})]}),c?g.jsx("div",{className:"loading",children:"Loading inventory..."}):g.jsx("div",{className:"inventory-grid",children:r.length===0?g.jsx("div",{className:"no-items",children:"No items found"}):r.map(L=>g.jsxs("div",{className:"inventory-item",children:[g.jsx("div",{className:"item-image",children:L.imageUrl?g.jsx("img",{src:L.imageUrl||"/placeholder.svg",alt:L.name}):g.jsx("div",{className:"no-image",children:"No Image"})}),g.jsxs("div",{className:"item-details",children:[g.jsx("h3",{className:"item-name",children:L.name}),g.jsxs("p",{className:"item-price",children:["",L.price.toFixed(2)]}),g.jsx("p",{className:"item-quantity",children:L.quantity>0?`${L.quantity} in stock`:"Out of stock"}),g.jsx("p",{className:"item-category",children:L.category||"Uncategorized"})]}),g.jsx("button",{className:"add-to-cart-btn",onClick:()=>b(L),disabled:L.quantity<=0,children:"Add to Cart"})]},L.id))})]}),g.jsxs("div",{className:"cart-section",children:[g.jsxs("div",{className:"cart-header",children:[g.jsxs("h2",{children:[g.jsx(_s,{})," Shopping Cart"]}),a.length>0&&g.jsxs("button",{className:"clear-cart-btn",onClick:I,children:[g.jsx(od,{})," Clear"]})]}),a.length===0?g.jsx("div",{className:"empty-cart",children:"Your cart is empty"}):g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"cart-items",children:a.map(L=>g.jsxs("div",{className:"cart-item",children:[g.jsxs("div",{className:"cart-item-details",children:[g.jsx("h3",{children:L.name}),g.jsxs("p",{children:["",L.price.toFixed(2)," each"]})]}),g.jsxs("div",{className:"cart-item-quantity",children:[g.jsx("button",{className:"quantity-btn",onClick:()=>S(L.id,L.quantity-1),children:g.jsx(fT,{})}),g.jsx("span",{children:L.quantity}),g.jsx("button",{className:"quantity-btn",onClick:()=>S(L.id,L.quantity+1),children:g.jsx(pT,{})})]}),g.jsxs("div",{className:"cart-item-subtotal",children:["",(L.price*L.quantity).toFixed(2)]}),g.jsx("button",{className:"remove-btn",onClick:()=>k(L.id),children:g.jsx(od,{})})]},L.id))}),g.jsx("div",{className:"cart-total",children:g.jsxs("h3",{children:["Total: ",C.toFixed(2)]})}),g.jsxs("div",{className:"payment-options",children:[g.jsx("button",{className:"payment-btn cash-btn",onClick:()=>N("cash"),children:"Cash Payment"}),g.jsx("button",{className:"payment-btn upi-btn",onClick:()=>N("upi"),children:"UPI Payment"})]})]})]})]}),p&&g.jsx("div",{className:"modal-overlay",children:g.jsxs("div",{className:"payment-modal",children:[g.jsx("h2",{children:"Cash Payment"}),g.jsxs("div",{className:"payment-details",children:[g.jsx("div",{className:"payment-info",children:g.jsxs("p",{children:["Total Amount: ",C.toFixed(2)]})}),g.jsxs("div",{className:"payment-form",children:[g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"amountPaid",children:"Amount Paid"}),g.jsx("input",{type:"number",id:"amountPaid",value:_,onChange:L=>x(L.target.value),min:C,step:"0.01",required:!0})]}),_&&Number.parseFloat(_)>=C&&g.jsx("div",{className:"change-amount",children:g.jsxs("p",{children:["Change to Return: ",D().toFixed(2)]})})]})]}),g.jsxs("div",{className:"modal-actions",children:[g.jsx("button",{className:"cancel-btn",onClick:()=>m(!1),children:"Cancel"}),g.jsx("button",{className:"confirm-btn",onClick:G,disabled:!_||Number.parseFloat(_)<C,children:"Confirm Payment"})]})]})}),w&&P&&g.jsx("div",{className:"modal-overlay",children:g.jsxs("div",{className:"receipt-modal",children:[g.jsx("h2",{children:"Receipt"}),g.jsxs("div",{className:"receipt-content",children:[g.jsxs("div",{className:"receipt-header",children:[g.jsxs("p",{children:["Receipt ID: ",P.id]}),g.jsxs("p",{children:["Date: ",P.timestamp.toLocaleDateString()," ",P.timestamp.toLocaleTimeString()]})]}),g.jsx("div",{className:"receipt-items",children:g.jsxs("table",{children:[g.jsx("thead",{children:g.jsxs("tr",{children:[g.jsx("th",{children:"Item"}),g.jsx("th",{children:"Qty"}),g.jsx("th",{children:"Price"}),g.jsx("th",{children:"Total"})]})}),g.jsx("tbody",{children:P.items.map((L,X)=>g.jsxs("tr",{children:[g.jsx("td",{children:L.name}),g.jsx("td",{children:L.quantity}),g.jsxs("td",{children:["",L.price.toFixed(2)]}),g.jsxs("td",{children:["",L.subtotal.toFixed(2)]})]},X))})]})}),g.jsxs("div",{className:"receipt-summary",children:[g.jsxs("p",{children:[g.jsx("strong",{children:"Total Amount:"})," ",P.total.toFixed(2)]}),g.jsxs("p",{children:[g.jsx("strong",{children:"Payment Method:"})," ",P.paymentMethod==="cash"?"Cash":"UPI"]}),P.paymentMethod==="cash"&&g.jsxs(g.Fragment,{children:[g.jsxs("p",{children:[g.jsx("strong",{children:"Amount Paid:"})," ",P.amountPaid.toFixed(2)]}),g.jsxs("p",{children:[g.jsx("strong",{children:"Change:"})," ",P.change.toFixed(2)]})]})]}),g.jsx("div",{className:"receipt-footer",children:g.jsx("p",{children:"Thank you for your purchase!"})})]}),g.jsx("div",{className:"modal-actions",children:g.jsx("button",{className:"confirm-btn",onClick:q,children:"Close"})})]})})]})},Jj=()=>{const{currentUser:t}=cn(),[e,n]=M.useState([]),[r,i]=M.useState([]),[s,o]=M.useState(!0),[a,l]=M.useState(""),[c,u]=M.useState(""),[d,f]=M.useState({start:"",end:""}),[p,m]=M.useState("all"),[v,E]=M.useState(null);M.useEffect(()=>{if(!t)return;(async()=>{o(!0);try{const C=Hi(lr(it,"receipts"),Mr("userId","==",t.uid),LA("timestamp","desc")),b=await id(C),k=[];b.forEach(S=>{var N;const I=S.data();k.push({id:S.id,...I,timestamp:((N=I.timestamp)==null?void 0:N.toDate())||new Date})}),n(k),i(k),o(!1)}catch(C){console.error("Error fetching receipts:",C),l("Failed to load receipts"),o(!1)}})()},[t]),M.useEffect(()=>{let R=[...e];if(c&&(R=R.filter(C=>C.items.some(b=>b.name.toLowerCase().includes(c.toLowerCase())))),d.start){const C=new Date(d.start);C.setHours(0,0,0,0),R=R.filter(b=>b.timestamp>=C)}if(d.end){const C=new Date(d.end);C.setHours(23,59,59,999),R=R.filter(b=>b.timestamp<=C)}p!=="all"&&(R=R.filter(C=>C.paymentMethod===p)),i(R)},[c,d,p,e]);const _=R=>{const{name:C,value:b}=R.target;f(k=>({...k,[C]:b}))},x=R=>{E(R)},w=()=>{E(null)},A=R=>R.toLocaleDateString(),P=R=>R.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return g.jsxs("div",{className:"receipts-page",children:[g.jsx("h1",{className:"page-title",children:"Receipts"}),a&&g.jsx("div",{className:"error-message",children:a}),g.jsxs("div",{className:"receipts-filters",children:[g.jsxs("div",{className:"search-container",children:[g.jsx(sv,{className:"search-icon"}),g.jsx("input",{type:"text",placeholder:"Search items in receipts...",value:c,onChange:R=>u(R.target.value),className:"search-input"})]}),g.jsxs("div",{className:"filter-group",children:[g.jsxs("div",{className:"date-filters",children:[g.jsxs("div",{className:"date-filter",children:[g.jsxs("label",{htmlFor:"start",children:[g.jsx(J_,{})," From"]}),g.jsx("input",{type:"date",id:"start",name:"start",value:d.start,onChange:_})]}),g.jsxs("div",{className:"date-filter",children:[g.jsxs("label",{htmlFor:"end",children:[g.jsx(J_,{})," To"]}),g.jsx("input",{type:"date",id:"end",name:"end",value:d.end,onChange:_})]})]}),g.jsxs("div",{className:"payment-filter",children:[g.jsx("label",{htmlFor:"paymentFilter",children:"Payment Method"}),g.jsxs("select",{id:"paymentFilter",value:p,onChange:R=>m(R.target.value),children:[g.jsx("option",{value:"all",children:"All Methods"}),g.jsx("option",{value:"cash",children:"Cash"}),g.jsx("option",{value:"upi",children:"UPI"})]})]})]})]}),s?g.jsx("div",{className:"loading",children:"Loading receipts..."}):g.jsx("div",{className:"receipts-list",children:r.length===0?g.jsx("div",{className:"no-receipts",children:"No receipts found"}):r.map(R=>g.jsxs("div",{className:"receipt-card",children:[g.jsxs("div",{className:"receipt-header",children:[g.jsx("div",{className:"receipt-icon",children:g.jsx(iv,{})}),g.jsxs("div",{className:"receipt-info",children:[g.jsxs("h3",{children:["Receipt #",R.id.slice(-6)]}),g.jsxs("p",{className:"receipt-date",children:[A(R.timestamp)," at"," ",P(R.timestamp)]})]})]}),g.jsxs("div",{className:"receipt-summary",children:[g.jsxs("div",{className:"receipt-items-summary",children:[g.jsxs("p",{children:[R.items.length," item(s)"]}),g.jsxs("ul",{className:"items-preview",children:[R.items.slice(0,3).map((C,b)=>g.jsxs("li",{children:[C.quantity," x ",C.name]},b)),R.items.length>3&&g.jsxs("li",{children:["+ ",R.items.length-3," more"]})]})]}),g.jsxs("div",{className:"receipt-total",children:[g.jsxs("p",{className:"total-amount",children:["",R.total.toFixed(2)]}),g.jsx("p",{className:"payment-method",children:R.paymentMethod==="cash"?"Cash Payment":"UPI Payment"})]})]}),g.jsxs("button",{className:"view-details-btn",onClick:()=>x(R),children:[g.jsx(oh,{})," View Details"]})]},R.id))}),v&&g.jsx("div",{className:"modal-overlay",children:g.jsxs("div",{className:"receipt-details-modal",children:[g.jsx("h2",{children:"Receipt Details"}),g.jsxs("div",{className:"receipt-content",children:[g.jsxs("div",{className:"receipt-header",children:[g.jsxs("p",{children:["Receipt ID: ",v.id]}),g.jsxs("p",{children:["Date: ",A(v.timestamp)," ",P(v.timestamp)]})]}),g.jsx("div",{className:"receipt-items",children:g.jsxs("table",{children:[g.jsx("thead",{children:g.jsxs("tr",{children:[g.jsx("th",{children:"Item"}),g.jsx("th",{children:"Qty"}),g.jsx("th",{children:"Price"}),g.jsx("th",{children:"Total"})]})}),g.jsx("tbody",{children:v.items.map((R,C)=>g.jsxs("tr",{children:[g.jsx("td",{children:R.name}),g.jsx("td",{children:R.quantity}),g.jsxs("td",{children:["",R.price.toFixed(2)]}),g.jsxs("td",{children:["",R.subtotal.toFixed(2)]})]},C))})]})}),g.jsxs("div",{className:"receipt-summary",children:[g.jsxs("p",{children:[g.jsx("strong",{children:"Total Amount:"})," ",v.total.toFixed(2)]}),g.jsxs("p",{children:[g.jsx("strong",{children:"Payment Method:"})," ",v.paymentMethod==="cash"?"Cash":"UPI"]}),v.paymentMethod==="cash"&&g.jsxs(g.Fragment,{children:[g.jsxs("p",{children:[g.jsx("strong",{children:"Amount Paid:"})," ",v.amountPaid.toFixed(2)]}),g.jsxs("p",{children:[g.jsx("strong",{children:"Change:"})," ",v.change.toFixed(2)]})]})]}),g.jsx("div",{className:"receipt-footer",children:g.jsx("p",{children:"Thank you for your purchase!"})})]}),g.jsx("div",{className:"modal-actions",children:g.jsx("button",{className:"confirm-btn",onClick:w,children:"Close"})})]})})]})},Zj=({toggleSidebar:t})=>{const{currentUser:e}=cn(),n=Gr(),[r,i]=M.useState([]),[s,o]=M.useState(!1),a=M.useRef(null),l=()=>e!=null&&e.displayName?e.displayName.split(" ").map(d=>d[0]).join("").toUpperCase():"U",c=()=>{n("/settings/profile")};M.useEffect(()=>{if(!e)return;const d=lr(it,"inventory"),f=Hi(d,Mr("userId","==",e.uid)),p=sf(f,m=>{const v=[],E=new Date;m.forEach(_=>{const x=_.data();if(x.expiryDate){const w=new Date(x.expiryDate.seconds*1e3),A=Math.ceil((w-E)/(1e3*60*60*24));A<=7&&A>=0&&v.push({id:_.id,name:x.name,expiryDate:w,daysLeft:A})}}),i(v)});return()=>p()},[e]),M.useEffect(()=>{const d=f=>{a.current&&!a.current.contains(f.target)&&o(!1)};return document.addEventListener("mousedown",d),()=>{document.removeEventListener("mousedown",d)}},[]);const u=()=>{o(!s)};return g.jsx("nav",{className:"navbar",children:g.jsxs("div",{className:"navbar-container",children:[g.jsxs("div",{className:"navbar-left",children:[g.jsx("button",{className:"menu-button",onClick:t,children:g.jsx(LF,{})}),g.jsxs("div",{className:"navbar-logo",children:[g.jsx(_s,{className:"logo-icon"}),g.jsx("span",{className:"logo-text",children:"Retail Ease"})]})]}),g.jsxs("div",{className:"navbar-right",children:[e&&g.jsxs("div",{className:"notification-bell",ref:a,children:[g.jsxs("button",{className:"bell-button",onClick:u,children:[g.jsx(jF,{}),r.length>0&&g.jsx("span",{className:"notification-badge",children:r.length})]}),s&&g.jsxs("div",{className:"notification-dropdown",children:[g.jsx("div",{className:"notification-header",children:g.jsx("h3",{children:"Expiring Items"})}),g.jsx("div",{className:"notification-content",children:r.length===0?g.jsx("p",{className:"no-notifications",children:"No items expiring soon"}):g.jsx("ul",{className:"notification-list",children:r.map(d=>g.jsxs("li",{className:"notification-item",children:[g.jsx("span",{className:"item-name",children:d.name}),g.jsxs("span",{className:"expiry-info",children:["expires in ",g.jsx("strong",{children:d.daysLeft})," ",d.daysLeft===1?"day":"days"]})]},d.id))})})]})]}),g.jsx("div",{className:"user-profile",onClick:c,children:e!=null&&e.photoURL?g.jsx("img",{src:e.photoURL||"/placeholder.svg",alt:"User Profile",className:"profile-image"}):g.jsx("div",{className:"profile-initials",children:l()})})]})]})})},eV=({isOpen:t,toggleSidebar:e,onLogout:n})=>g.jsxs("div",{className:`sidebar ${t?"open":""}`,children:[g.jsx("div",{className:"sidebar-header",children:g.jsx("button",{className:"close-button",onClick:e,children:g.jsx($F,{})})}),g.jsx("div",{className:"sidebar-content",children:g.jsxs("ul",{className:"sidebar-menu",children:[g.jsx("li",{className:"sidebar-item",children:g.jsxs(uo,{to:"/inventory",className:({isActive:r})=>r?"sidebar-link active":"sidebar-link",onClick:()=>e(),children:[g.jsx(tv,{className:"sidebar-icon"}),g.jsx("span",{children:"Inventory"})]})}),g.jsx("li",{className:"sidebar-item",children:g.jsxs(uo,{to:"/billing",className:({isActive:r})=>r?"sidebar-link active":"sidebar-link",onClick:()=>e(),children:[g.jsx(hT,{className:"sidebar-icon"}),g.jsx("span",{children:"Billing"})]})}),g.jsx("li",{className:"sidebar-item",children:g.jsxs(uo,{to:"/receipts",className:({isActive:r})=>r?"sidebar-link active":"sidebar-link",onClick:()=>e(),children:[g.jsx(iv,{className:"sidebar-icon"}),g.jsx("span",{children:"Receipts"})]})}),g.jsx("li",{className:"sidebar-item",children:g.jsxs(uo,{to:"/profit-analysis",className:({isActive:r})=>r?"sidebar-link active":"sidebar-link",onClick:()=>e(),children:[g.jsx(nv,{className:"sidebar-icon"}),g.jsx("span",{children:"Profit Analysis"})]})}),g.jsx("li",{className:"sidebar-item",children:g.jsxs(uo,{to:"/ai-business-help",className:({isActive:r})=>r?"sidebar-link active":"sidebar-link",onClick:()=>e(),children:[g.jsx(gT,{className:"sidebar-icon"}),g.jsx("span",{children:"AI Business Help"})]})}),g.jsx("li",{className:"sidebar-item",children:g.jsxs(uo,{to:"/settings/profile",className:({isActive:r})=>r?"sidebar-link active":"sidebar-link",onClick:()=>e(),children:[g.jsx(dT,{className:"sidebar-icon"}),g.jsx("span",{children:"Settings"})]})})]})}),g.jsx("div",{className:"sidebar-footer",children:g.jsxs("button",{className:"logout-button",onClick:n,children:[g.jsx(mT,{className:"sidebar-icon"}),g.jsx("span",{children:"Logout"})]})})]}),ii=({children:t})=>{const[e,n]=M.useState(!1),{logout:r}=cn(),i=Gr(),s=()=>{n(!e)},o=async()=>{try{await r(),i("/")}catch(a){console.error("Failed to log out",a)}};return g.jsxs("div",{className:"main-layout",children:[g.jsx(Zj,{toggleSidebar:s}),g.jsxs("div",{className:"layout-container",children:[g.jsx(eV,{isOpen:e,toggleSidebar:s,onLogout:o}),g.jsx("main",{className:`main-content ${e?"sidebar-open":""}`,children:t})]})]})},si=({children:t})=>{const{currentUser:e,loading:n}=cn();return n?g.jsx("div",{className:"loading",children:"Loading..."}):e?t:g.jsx(rk,{to:"/login"})};function tV(){const[t,e]=M.useState(!0);return M.useEffect(()=>{const n=setTimeout(()=>{e(!1)},3e3);return()=>clearTimeout(n)},[]),t?g.jsx(GF,{}):g.jsxs(sk,{children:[g.jsx(wn,{path:"/",element:g.jsx(QF,{})}),g.jsx(wn,{path:"/login",element:g.jsx(YF,{})}),g.jsx(wn,{path:"/register",element:g.jsx(XF,{})}),g.jsx(wn,{path:"/dashboard",element:g.jsx(si,{children:g.jsx(ii,{children:g.jsx(JF,{})})})}),g.jsx(wn,{path:"/inventory",element:g.jsx(si,{children:g.jsx(ii,{children:g.jsx(t7,{})})})}),g.jsx(wn,{path:"/profit-analysis",element:g.jsx(si,{children:g.jsx(ii,{children:g.jsx(pj,{})})})}),g.jsx(wn,{path:"/ai-business-help",element:g.jsx(si,{children:g.jsx(ii,{children:g.jsx(qj,{currentUser:cn().currentUser})})})}),g.jsx(wn,{path:"/settings",element:g.jsx(si,{children:g.jsx(ii,{children:g.jsx(nw,{})})})}),g.jsx(wn,{path:"/settings/:section",element:g.jsx(si,{children:g.jsx(ii,{children:g.jsx(nw,{})})})}),g.jsx(wn,{path:"/billing",element:g.jsx(si,{children:g.jsx(ii,{children:g.jsx(Xj,{})})})}),g.jsx(wn,{path:"/receipts",element:g.jsx(si,{children:g.jsx(ii,{children:g.jsx(Jj,{})})})})]})}dp.createRoot(document.getElementById("root")).render(g.jsx(Rr.StrictMode,{children:g.jsx(fk,{children:g.jsx(FF,{children:g.jsx(tV,{})})})}));
